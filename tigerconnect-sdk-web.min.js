var TigerConnect=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Client=void 0;var o=n(1),i=r(o);t._babelPolyfill||n(243);var a="web";a&&n(432)("./"+a),e.Client=i["default"]}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,d["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,l["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,c["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,d["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,l["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,c["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0});var a,u,s=n(2),c=r(s),f=n(5),l=r(f),h=n(16),d=r(h),p=n(53),v=r(p),y=n(57),g=r(y),m=n(78),b=r(m),w=n(87),_=r(w),E=n(88),x=r(E),A=n(89),O=r(A),j=n(92),k=r(j),I=n(97),T=r(I),S=n(120),M=r(S),C=n(118),P=r(C),B=n(106),D=r(B),R=n(121),G=r(R),L=n(130),z=r(L),F=n(225),V=r(F),N=n(193),U=r(N),$=n(241),q=r($);n(242)(P["default"]);var W={eventsFeatures:"is-typing",autoAckEvents:!0,logLevel:"error",eventsAutoReconnect:!0,flushAckInterval:2e3,flushAckMaxEvents:500,flushSetMessageStatusInterval:1e3,flushMessageMaxCount:500,conversationReloadDelay:200,eventsAutoReconnectDelay:2e3,organizationRostersChangeThrottleDelay:500,temporaryEntityDelayBeforeRefreshing:100,conversationsEnsureEntities:!0,enableEnsureEntityWithTemp:!0,enableEnsureEntityFindMissing:!0,consumerOrganizationId:"UpM28mnfW65vJkbqEATtKvxm",maxMetadataKeyCount:8,pushAgent:"consumer",baseUrl:"https://developer.tigertext.me/v2",productKey:"bc1oOf3DZXbnaNZ2LCWZGvSg",clientVersion:"1.0"},K=(u=a=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if((0,x["default"])(this,t),!(null==n||n instanceof Object))throw new TypeError('Value of argument "config" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+i(n));if(!(null==n||n instanceof Object))throw new TypeError('Value of argument "config" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+o(n));this.config=P["default"].defaults(n,W),this.httpClient=new T["default"]({baseUrl:this.config.baseUrl,logger:new k["default"]({name:"HttpClient",level:this.config.logLevel})}),this.enums=U["default"],this.store=new V["default"](this,{logger:new k["default"]({name:"Store",level:this.config.logLevel})}),this.store.defineModels(),this.models=this.store.models,this.modelsByEntityType=P["default"].mapKeys(this.store.models,function(t,e){return P["default"].snakeCase(e)}),this.logger=new k["default"]({name:"TigerConnectClient",level:this.config.logLevel}),this.api={},P["default"].each(G["default"],function(t,n){e.api[P["default"].camelCase(n)]=new t(e,{logger:new k["default"]({name:t.name,level:e.config.logLevel})})}),this._services={},P["default"].each(z["default"],function(t,n){n=P["default"].camelCase(n),e._services[n]=e[n]=new t(e,{logger:new k["default"]({name:t.name,level:e.config.logLevel})})}),P["default"].each(this._services,function(t){return t.mounted&&t.mounted()}),this._listenToEvents()}return(0,O["default"])(t,[{key:"_listenToEvents",value:function(){var t=this;this.on("signedIn",function(e,n){t.logger.info("signedIn",e.id)}).on("signedOut",function(){t.reset()}).on("signUp",function(e){var n=e.user,r=e.auth;t.logger.info("signUp",n.id),t._setCurrentUser(n,r)}),this.events.on("event",function(e){return t.emit("event",e)}),this.conversations.on("message",function(e){return t.emit("message",e)}),this.conversations.on("change",function(e){return t.emit("conversation:change",e)})}},{key:"signIn",value:function(){var t=(0,_["default"])(b["default"].mark(function e(t,n){var r,o,i,a=arguments.length<=2||void 0===arguments[2]?{udid:void 0}:arguments[2];return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.users.signIn(t,n,a);case 3:return r=e.sent,o=r.user,i=r.auth,this._setCurrentUser(o,i),this.emit("signedIn",o,i),e.abrupt("return",{user:o,auth:i});case 11:throw e.prev=11,e.t0=e["catch"](0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"signOut",value:function(){var t=(0,_["default"])(b["default"].mark(function e(){var t,n,r=arguments.length<=0||void 0===arguments[0]?{async:!0}:arguments[0],o=r.async,i=void 0===o?!0:o;return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSignedIn()){e.next=2;break}return e.abrupt("return",g["default"].resolve());case 2:if(i||"undefined"!=typeof XMLHttpRequest){e.next=4;break}throw new Error("async: false option has to be on the browser.");case 4:if(!i){e.next=15;break}return t=this.users.signOut({async:i}),e.next=8,t;case 8:this._currentUser=null,this._auth=null,this.httpClient.removeAuth(),this.events.disconnect(),this.emit("signedOut"),e.next=21;break;case 15:return n=new XMLHttpRequest,n.open("POST",this.config.baseUrl+"/logout",!1),n.setRequestHeader("Authorization",this.httpClient.getAuthHeader()),n.send(null),this.emit("signedOut"),e.abrupt("return",g["default"].resolve());case 21:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"authenticate",value:function(){var t=(0,_["default"])(b["default"].mark(function e(t,n){var r,o,i;return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._setAuth(t,n),e.prev=1,e.next=4,this.httpClient.get("/user");case 4:e.next=25;break;case 6:if(e.prev=6,e.t0=e["catch"](1),r=e.t0.response&&e.t0.response.get("TT_Log_Account_Token")){e.next=11;break}throw new D["default"].WrongCredentialsError;case 11:return e.prev=11,e.next=14,this.users.find(r);case 14:return o=e.sent,i={key:t,secret:n},this._setCurrentUser(o,i),this.emit("signedIn",o,i),e.abrupt("return",o);case 21:throw e.prev=21,e.t1=e["catch"](11),this._removeAuth(),e.t1;case 25:case"end":return e.stop()}},e,this,[[1,6],[11,21]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_setCurrentUser",value:function(t,e){this._currentUser=t,this._setAuth(e.key,e.secret,e.resource)}},{key:"_setAuth",value:function(t,e,n){this._auth={key:t,secret:e,resource:n},this.httpClient.setAuth(t,e)}},{key:"_removeAuth",value:function(){this._auth=null,this.httpClient.removeAuth()}},{key:"getCurrentUser",value:function(){return this._currentUser||null}},{key:"getAuth",value:function(){return this._auth}},{key:"isSignedIn",value:function(){return null!=this.getAuth()}},{key:"requireUser",value:function(){if(!this.isSignedIn())throw new D["default"].NotSignedInError}},{key:"reactToAdvisoryEvent",value:function(t,e){this.emit("advisory",{type:t,data:e})}},{key:"modelByTypeNS",value:function(t){return this.MODEL_BY_TYPE_NS[t]}},{key:"injectModel",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?t.xmlns||t.type:arguments[1],n=this.modelByTypeNS(e);return n?n.inject(t):((0,q["default"])(n,"injectModel: Missing class for "+e),null)}},{key:"getEntity",value:function(t,e){return this.modelsByEntityType[t].get(e)}},{key:"getEntities",value:function(t){var e=this;return t.map(function(t){return e.getEntity(t.type,t.id)})}},{key:"typeNSByModelName",value:function(t){return this.TYPE_NS_BY_MODEL_NAME[t]}},{key:"reset",value:function(){this.emit("reset"),P["default"].each(this._services,function(t){t.dispose&&t.dispose(),t.mounted&&t.mounted()}),this.store&&this.store.clear()}},{key:"configure",value:function(t){return(0,v["default"])(this.config,t),this}},{key:"setDefaultOrganization",value:function(t){return this.configure({defaultOrganizationId:t})}},{key:"MODEL_BY_TYPE_NS",get:function(){return this._MODEL_BY_TYPE_NS||(this._MODEL_BY_TYPE_NS={"tigertext:entity:account":this.models.User,"tigertext:entity:group":this.models.Group,"tigertext:entity:list":this.models.Group,"tigertext:iq:message":this.models.Message,"tigertext:iq:group_message":this.models.Message,"tigertext:iq:group:message":this.models.Message}),this._MODEL_BY_TYPE_NS}},{key:"TYPE_NS_BY_MODEL_NAME",get:function(){return this._TYPE_NS_BY_MODEL_NAME||(this._TYPE_NS_BY_MODEL_NAME=P["default"].reduce(this.MODEL_BY_TYPE_NS,function(t,e,n){return t[e.name]=n,t[P["default"].capitalize(e.name)]=n,t},{})),this._TYPE_NS_BY_MODEL_NAME}}]),t}(),a.errors=D["default"],a.VERSION="0.1.1",u);(0,v["default"])(K.prototype,M["default"].prototype),e["default"]=K,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(3),__esModule:!0}},function(t,e,n){var r=n(4);t.exports=function(t){return(r.JSON&&r.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={"default":n(6),__esModule:!0}},function(t,e,n){n(7),t.exports=n(4).Object.keys},function(t,e,n){var r=n(8);n(10)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(9);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(11),o=n(4),i=n(15);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(12),o=n(4),i=n(13),a="prototype",u=function(t,e,n){var s,c,f,l=t&u.F,h=t&u.G,d=t&u.S,p=t&u.P,v=t&u.B,y=t&u.W,g=h?o:o[e]||(o[e]={}),m=h?r:d?r[e]:(r[e]||{})[a];h&&(n=e);for(s in n)c=!l&&m&&s in m,c&&s in g||(f=c?m[s]:n[s],g[s]=h&&"function"!=typeof m[s]?n[s]:v&&c?i(f,r):y&&m[s]==f?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(f):p&&"function"==typeof f?i(Function.call,f):f,p&&((g[a]||(g[a]={}))[s]=f))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(14);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o="function"==typeof _Symbol&&"symbol"==typeof _Symbol$iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof _Symbol&&t.constructor===_Symbol?"symbol":typeof t};e.__esModule=!0;var i=n(17),a=r(i),u=n(43),s=r(u);e["default"]="function"==typeof s["default"]&&"symbol"===o(a["default"])?function(t){return"undefined"==typeof t?"undefined":o(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":"undefined"==typeof t?"undefined":o(t)}},function(t,e,n){t.exports={"default":n(18),__esModule:!0}},function(t,e,n){n(19),n(36),t.exports=n(33)("iterator")},function(t,e,n){"use strict";var r=n(20)(!0);n(22)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(21),o=n(9);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return 0>s||s>=c?t?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(23),o=n(11),i=n(24),a=n(25),u=n(29),s=n(30),c=n(31),f=n(32),l=n(26).getProto,h=n(33)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,b,w,_){c(n,e,m);var E,x,A=function(t){if(!d&&t in I)return I[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",j=b==y,k=!1,I=t.prototype,T=I[h]||I[p]||b&&I[b],S=T||A(b);if(T){var M=l(S.call(new t));f(M,O,!0),!r&&u(I,p)&&a(M,h,g),j&&T.name!==y&&(k=!0,S=function(){return T.call(this)})}if(r&&!_||!d&&!k&&I[h]||a(I,h,S),s[e]=S,s[O]=g,b)if(E={values:j?S:A(y),keys:w?S:A(v),entries:j?A("entries"):S},_)for(x in E)x in I||i(I,x,E[x]);else o(o.P+o.F*(d||k),e,E);return E}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(25)},function(t,e,n){var r=n(26),o=n(27);t.exports=n(28)?function(t,e,n){return r.setDesc(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(26),o=n(27),i=n(32),a={};n(25)(a,n(33)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(26).setDesc,o=n(29),i=n(33)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(34)("wks"),o=n(35),i=n(12).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||o)("Symbol."+t))}},function(t,e,n){var r=n(12),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){n(37);var r=n(30);r.NodeList=r.HTMLCollection=r.Array},function(t,e,n){"use strict";var r=n(38),o=n(39),i=n(30),a=n(40);t.exports=n(22)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(41),o=n(9);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(42);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={"default":n(44),__esModule:!0}},function(t,e,n){n(45),n(52),t.exports=n(4).Symbol},function(t,e,n){"use strict";var r=n(26),o=n(12),i=n(29),a=n(28),u=n(11),s=n(24),c=n(15),f=n(34),l=n(32),h=n(35),d=n(33),p=n(46),v=n(47),y=n(48),g=n(49),m=n(50),b=n(40),w=n(27),_=r.getDesc,E=r.setDesc,x=r.create,A=v.get,O=o.Symbol,j=o.JSON,k=j&&j.stringify,I=!1,T=d("_hidden"),S=r.isEnum,M=f("symbol-registry"),C=f("symbols"),P="function"==typeof O,B=Object.prototype,D=a&&c(function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=_(B,e);r&&delete B[e],E(t,e,n),r&&t!==B&&E(B,e,r)}:E,R=function(t){var e=C[t]=x(O.prototype);return e._k=t,a&&I&&D(B,t,{configurable:!0,set:function(e){i(this,T)&&i(this[T],t)&&(this[T][t]=!1),D(this,t,w(1,e))}}),e},G=function(t){return"symbol"==typeof t},L=function(t,e,n){return n&&i(C,e)?(n.enumerable?(i(t,T)&&t[T][e]&&(t[T][e]=!1),n=x(n,{enumerable:w(0,!1)})):(i(t,T)||E(t,T,w(1,{})),t[T][e]=!0),D(t,e,n)):E(t,e,n)},z=function(t,e){m(t);for(var n,r=y(e=b(e)),o=0,i=r.length;i>o;)L(t,n=r[o++],e[n]);return t},F=function(t,e){return void 0===e?x(t):z(x(t),e)},V=function(t){var e=S.call(this,t);return e||!i(this,t)||!i(C,t)||i(this,T)&&this[T][t]?e:!0},N=function(t,e){var n=_(t=b(t),e);return!n||!i(C,e)||i(t,T)&&t[T][e]||(n.enumerable=!0),n},U=function(t){for(var e,n=A(b(t)),r=[],o=0;n.length>o;)i(C,e=n[o++])||e==T||r.push(e);return r},$=function(t){for(var e,n=A(b(t)),r=[],o=0;n.length>o;)i(C,e=n[o++])&&r.push(C[e]);return r},q=function(t){if(void 0!==t&&!G(t)){for(var e,n,r=[t],o=1,i=arguments;i.length>o;)r.push(i[o++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),G(e)?void 0:e}),r[1]=e,k.apply(j,r)}},W=c(function(){var t=O();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))});P||(O=function(){if(G(this))throw TypeError("Symbol is not a constructor");return R(h(arguments.length>0?arguments[0]:void 0))},s(O.prototype,"toString",function(){return this._k}),G=function(t){return t instanceof O},r.create=F,r.isEnum=V,r.getDesc=N,r.setDesc=L,r.setDescs=z,r.getNames=v.get=U,r.getSymbols=$,a&&!n(23)&&s(B,"propertyIsEnumerable",V,!0));var K={"for":function(t){return i(M,t+="")?M[t]:M[t]=O(t)},keyFor:function(t){return p(M,t)},useSetter:function(){I=!0},useSimple:function(){I=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=d(t);K[t]=P?e:R(e)}),I=!0,u(u.G+u.W,{Symbol:O}),u(u.S,"Symbol",K),u(u.S+u.F*!P,"Object",{create:F,defineProperty:L,defineProperties:z,getOwnPropertyDescriptor:N,getOwnPropertyNames:U,getOwnPropertySymbols:$}),j&&u(u.S+u.F*(!P||W),"JSON",{stringify:q}),l(O,"Symbol"),l(Math,"Math",!0),l(o.JSON,"JSON",!0)},function(t,e,n){var r=n(26),o=n(40);t.exports=function(t,e){for(var n,i=o(t),a=r.getKeys(i),u=a.length,s=0;u>s;)if(i[n=a[s++]]===e)return n}},function(t,e,n){var r=n(40),o=n(26).getNames,i={}.toString,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.get=function(t){return a&&"[object Window]"==i.call(t)?u(t):o(r(t))}},function(t,e,n){var r=n(26);t.exports=function(t){var e=r.getKeys(t),n=r.getSymbols;if(n)for(var o,i=n(t),a=r.isEnum,u=0;i.length>u;)a.call(t,o=i[u++])&&e.push(o);return e}},function(t,e,n){var r=n(42);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(51);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){},function(t,e,n){t.exports={"default":n(54),__esModule:!0}},function(t,e,n){n(55),t.exports=n(4).Object.assign},function(t,e,n){var r=n(11);r(r.S+r.F,"Object",{assign:n(56)})},function(t,e,n){var r=n(26),o=n(8),i=n(41);t.exports=n(15)(function(){var t=Object.assign,e={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=o})?function(t,e){for(var n=o(t),a=arguments,u=a.length,s=1,c=r.getKeys,f=r.getSymbols,l=r.isEnum;u>s;)for(var h,d=i(a[s++]),p=f?c(d).concat(f(d)):c(d),v=p.length,y=0;v>y;)l.call(d,h=p[y++])&&(n[h]=d[h]);return n}:Object.assign},function(t,e,n){t.exports={"default":n(58),__esModule:!0}},function(t,e,n){n(52),n(19),n(36),n(59),t.exports=n(4).Promise},function(t,e,n){"use strict";var r,o=n(26),i=n(23),a=n(12),u=n(13),s=n(60),c=n(11),f=n(51),l=n(50),h=n(14),d=n(61),p=n(62),v=n(67).set,y=n(68),g=n(33)("species"),m=n(69),b=n(70),w="Promise",_=a.process,E="process"==s(_),x=a[w],A=function(t){var e=new x(function(){});return t&&(e.constructor=Object),x.resolve(e)===e},O=function(){function t(e){var n=new x(e);return v(n,t.prototype),n}var e=!1;try{if(e=x&&x.resolve&&A(),v(t,x),t.prototype=o.create(x.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(28)){var r=!1;x.resolve(o.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(i){e=!1}return e}(),j=function(t,e){return i&&t===x&&e===r?!0:y(t,e)},k=function(t){var e=l(t)[g];return void 0!=e?e:t},I=function(t){var e;return f(t)&&"function"==typeof(e=t.then)?e:!1},T=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},S=function(t){try{t()}catch(e){return{error:e}}},M=function(t,e){if(!t.n){t.n=!0;var n=t.c;b(function(){for(var r=t.v,o=1==t.s,i=0,u=function(e){var n,i,a=o?e.ok:e.fail,u=e.resolve,s=e.reject;try{a?(o||(t.h=!0),n=a===!0?r:a(r),n===e.promise?s(TypeError("Promise-chain cycle")):(i=I(n))?i.call(n,u,s):u(n)):s(r)}catch(c){s(c)}};n.length>i;)u(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,o=t.p;C(o)&&(E?_.emit("unhandledRejection",r,o):(e=a.onunhandledrejection)?e({promise:o,reason:r}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},C=function(t){var e,n=t._d,r=n.a||n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(e=r[o++],e.fail||!C(e.promise))return!1;return!0},P=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),M(e,!0))},B=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=I(t))?b(function(){var r={r:n,d:!1};try{e.call(t,u(B,r,1),u(P,r,1))}catch(o){P.call(r,o)}}):(n.v=t,n.s=1,M(n,!1))}catch(r){P.call({r:n,d:!1},r)}}};O||(x=function(t){h(t);var e=this._d={p:d(this,x,w),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(u(B,e,1),u(P,e,1))}catch(n){P.call(e,n)}},n(75)(x.prototype,{then:function(t,e){var n=new T(m(this,x)),r=n.promise,o=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,o.c.push(n),o.a&&o.a.push(n),o.s&&M(o,!1),r},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!O,{Promise:x}),n(32)(x,w),n(76)(w),r=n(4)[w],c(c.S+c.F*!O,w,{reject:function(t){var e=new T(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(!O||A(!0)),w,{resolve:function(t){if(t instanceof x&&j(t.constructor,this))return t;var e=new T(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(O&&n(77)(function(t){x.all(t)["catch"](function(){})})),w,{all:function(t){var e=k(this),n=new T(e),r=n.resolve,i=n.reject,a=[],u=S(function(){p(t,!1,a.push,a);var n=a.length,u=Array(n);n?o.each.call(a,function(t,o){var a=!1;e.resolve(t).then(function(t){a||(a=!0,u[o]=t,--n||r(u))},i)}):r(u)});return u&&i(u.error),n.promise},race:function(t){var e=k(this),n=new T(e),r=n.reject,o=S(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e,n){var r=n(42),o=n(33)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[o])?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(13),o=n(63),i=n(64),a=n(50),u=n(65),s=n(66);t.exports=function(t,e,n,c){var f,l,h,d=s(t),p=r(n,c,e?2:1),v=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(i(d))for(f=u(t.length);f>v;v++)e?p(a(l=t[v])[0],l[1]):p(t[v]);else for(h=d.call(t);!(l=h.next()).done;)o(h,p,l.value,e)}},function(t,e,n){var r=n(50);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},function(t,e,n){var r=n(30),o=n(33)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(21),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(60),o=n(33)("iterator"),i=n(30);t.exports=n(4).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e,n){var r=n(26).getDesc,o=n(51),i=n(50),a=function(t,e){if(i(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(13)(Function.call,r(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:a}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(50),o=n(14),i=n(33)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(12),u=n(71).set,s=a.MutationObserver||a.WebKitMutationObserver,c=a.process,f=a.Promise,l="process"==n(42)(c),h=function(){var t,e,n;for(l&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;o=void 0,t&&t.enter()};if(l)i=function(){c.nextTick(h)};else if(s){var d=1,p=document.createTextNode("");new s(h).observe(p,{characterData:!0}),i=function(){p.data=d=-d}}else i=f&&f.resolve?function(){f.resolve().then(h)}:function(){u.call(a,h)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&c.domain};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r,o,i,a=n(13),u=n(72),s=n(73),c=n(74),f=n(12),l=f.process,h=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,v=0,y={},g="onreadystatechange",m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete y[t]},"process"==n(42)(l)?r=function(t){l.nextTick(a(m,t,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=g in c("script")?function(t){s.appendChild(c("script"))[g]=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:d}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){t.exports=n(12).document&&document.documentElement},function(t,e,n){var r=n(51),o=n(12).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(24);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(4),o=n(26),i=n(28),a=n(33)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.setDesc(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(33)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){n=!0},i[r]=function(){return a},t(i)}catch(u){}return n}},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(79),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}t.exports={"default":t.exports,__esModule:!0}}).call(e,function(){return this}())},function(t,e,n){(function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=n(57),a=o(i),u=n(82),s=o(u),c=n(85),f=o(c),l=n(16),h=o(l),d=n(17),p=o(d),v=n(43),y=o(v);!function(t){function n(t,e,n,r){var o=(0,f["default"])((e||i).prototype),a=new w(r||[]);return o._invoke=g(t,n,a),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function u(){}function c(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function d(t){this.arg=t}function v(t){function e(e,n){var r=t[e](n),o=r.value;return o instanceof d?a["default"].resolve(o.arg).then(i,u):a["default"].resolve(o).then(function(t){return r.value=t,r})}function n(t,n){function r(){return e(t,n)}return o=o?o.then(r,r):new a["default"](function(t){t(r())})}"object"===("undefined"==typeof r?"undefined":(0,h["default"])(r))&&r.domain&&(e=r.domain.bind(e));var o,i=e.bind(t,"next"),u=e.bind(t,"throw");e.bind(t,"return"),this._invoke=n}function g(t,e,n){var r=I;return function(i,a){if(r===S)throw new Error("Generator is already running");if(r===M){if("throw"===i)throw a;return E()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===x){n.delegate=null;var s=u.iterator["return"];if(s){var c=o(s,u.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=x;var f=c.arg;if(!f.done)return r=T,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===T?n.sent=a:n.sent=x;else if("throw"===i){if(r===I)throw r=M,a;n.dispatchException(a)&&(i="next",a=x)}else"return"===i&&n.abrupt("return",a);r=S;var c=o(t,e,n);if("normal"===c.type){r=n.done?M:T;var f={value:c.arg,done:n.done};if(c.arg!==C)return f;n.delegate&&"next"===i&&(a=x)}else"throw"===c.type&&(r=M,i="throw",a=c.arg)}}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function _(t){if(t){var e=t[O];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function o(){for(;++n<t.length;)if(A.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=x,o.done=!0,o};return r.next=r}}return{next:E}}function E(){return{value:x,done:!0}}var x,A=Object.prototype.hasOwnProperty,O="function"==typeof y["default"]&&p["default"]||"@@iterator",j="object"===(0,h["default"])(e),k=t.regeneratorRuntime;if(k)return void(j&&(e.exports=k));k=t.regeneratorRuntime=j?e.exports:{},k.wrap=n;var I="suspendedStart",T="suspendedYield",S="executing",M="completed",C={},P=c.prototype=i.prototype;u.prototype=P.constructor=c,c.constructor=u,u.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;
return e?e===u||"GeneratorFunction"===(e.displayName||e.name):!1},k.mark=function(t){return s["default"]?(0,s["default"])(t,c):t.__proto__=c,t.prototype=(0,f["default"])(P),t},k.awrap=function(t){return new d(t)},l(v.prototype),k.async=function(t,e,r,o){var i=new v(n(t,e,r,o));return k.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},l(P),P[O]=function(){return this},P.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=_,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=x,this.done=!1,this.delegate=null,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&A.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=x)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=A.call(o,"catchLoc"),u=A.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&A.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?this.next=o.finallyLoc:this.complete(i),C},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),C}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;b(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},C}}}("object"===("undefined"==typeof t?"undefined":(0,h["default"])(t))?t:"object"===("undefined"==typeof window?"undefined":(0,h["default"])(window))?window:"object"===("undefined"==typeof self?"undefined":(0,h["default"])(self))?self:void 0)}).call(e,function(){return this}(),n(80)(t),n(81))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function n(){c=!1,a.length?s=a.concat(s):f=-1,s.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=s.length;e;){for(a=s,s=[];++f<e;)a&&a[f].run();f=-1,e=s.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var a,u=t.exports={},s=[],c=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new o(t,e)),1!==s.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){t.exports={"default":n(83),__esModule:!0}},function(t,e,n){n(84),t.exports=n(4).Object.setPrototypeOf},function(t,e,n){var r=n(11);r(r.S,"Object",{setPrototypeOf:n(67).set})},function(t,e,n){t.exports={"default":n(86),__esModule:!0}},function(t,e,n){var r=n(26);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(57),i=r(o);e["default"]=function(t){return function(){var e=t.apply(this,arguments);return new i["default"](function(t,n){function r(o,a){try{var u=e[o](a),s=u.value}catch(c){return void n(c)}u.done?t(s):i["default"].resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)})}r("next")})}}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(90),i=r(o);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(91),__esModule:!0}},function(t,e,n){var r=n(26);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(93),d=r(h),p=n(88),v=r(p),y=n(89),g=r(y),m=function(){function t(e){var n=e.name,r=e.level;if((0,v["default"])(this,t),null==arguments[0]||"string"!=typeof arguments[0].name||"string"!=typeof arguments[0].level)throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ name: string;\n  level: string;\n}\n\nGot:\n"+i({name:n,level:r}));if(null==arguments[0]||"string"!=typeof arguments[0].name||"string"!=typeof arguments[0].level)throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ name: string;\n  level: string;\n}\n\nGot:\n"+o({name:n,level:r}));this.name=n,this.level=r}return(0,g["default"])(t,[{key:"setLevel",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "level" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof t)throw new TypeError('Value of argument "level" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));this.level=t}}]),t}(),b=["debug","log","info","warn","error"],w=b.reduce(function(t,e,n){return t[e]=n,t},{});b.forEach(function(t){var e=w[t];m.prototype[t]=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];e<w[this.level]||(r=["["+this.name+"]"].concat((0,d["default"])(r)),Function.prototype.apply.call(console[t],console,r))}}),e["default"]=m,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(94),i=r(o);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i["default"])(t)}},function(t,e,n){t.exports={"default":n(95),__esModule:!0}},function(t,e,n){n(19),n(96),t.exports=n(4).Array.from},function(t,e,n){"use strict";var r=n(13),o=n(11),i=n(8),a=n(63),u=n(64),s=n(65),c=n(66);o(o.S+o.F*!n(77)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,l=i(t),h="function"==typeof this?this:Array,d=arguments,p=d.length,v=p>1?d[1]:void 0,y=void 0!==v,g=0,m=c(l);if(y&&(v=r(v,p>2?d[2]:void 0,2)),void 0==m||h==Array&&u(m))for(e=s(l.length),n=new h(e);e>g;g++)n[g]=y?v(l[g],g):l[g];else for(f=m.call(l),n=new h;!(o=f.next()).done;g++)n[g]=y?a(f,v,[o.value,g],!0):o.value;return n.length=g,n}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(53),i=r(o),a=n(78),u=r(a),s=n(57),c=r(s),f=n(87),l=r(f),h=n(88),d=r(h),p=n(89),v=r(p),y=n(98),g=r(y),m=n(101),b=r(m),w=n(106),_=r(w),E=n(117),x=r(E),A=n(118),O=r(A),j=n(119),k=["get","post","put","patch","del"],I=function(){function t(e){(0,d["default"])(this,t),this.config=e,this.logger=e.logger,this._prefixBaseUrl=(0,x["default"])(this.config.baseUrl)}return(0,v["default"])(t,[{key:"setAuth",value:function(t,e){this._key=t,this._secret=e}},{key:"removeAuth",value:function(){this._key=null,this._secret=null}},{key:"getAuthHeader",value:function(){return this.getAuthHeaderForKeyAndSecret(this._key,this._secret)}},{key:"getAuthHeaderForKeyAndSecret",value:function(t,e){return t&&e?"Basic "+(0,b["default"])(t+":"+e):null}},{key:"_contentType",value:function(t){switch(t){case"json":return"application/json";case"event-stream":return"text/event-stream";case"text":default:return"plain/text"}}},{key:"downloadImageBlob",value:function(){var t=(0,l["default"])(u["default"].mark(function e(t){var n=this;return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof XMLHttpRequest){e.next=2;break}throw new Error("must have XMLHttpRequest");case 2:return e.abrupt("return",new c["default"](function(e,r){var o=new XMLHttpRequest,i=n.config.baseUrl+t;o.open("GET",i,!0),o.setRequestHeader("Authorization",n.getAuthHeader()),o.responseType="blob",o.onreadystatechange=function(){4==o.readyState&&(o.status<200||o.status>299?r(new Error("Failed downloading "+i+". Status = "+o.status)):e(o.response))},o.send(null)}));case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"downloadImageAndGetURL",value:function(){var t=(0,l["default"])(u["default"].mark(function e(t){var n,r;return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.downloadImageBlob(t);case 2:return n=e.sent,r=URL.createObjectURL(n),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();k.forEach(function(t){I.prototype[t]=function(){var e=(0,l["default"])(u["default"].mark(function n(e){var r,o,a=this,s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return u["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=O["default"].defaults(s||{},{reqFormat:"json",resFormat:"json"}),s.urlParams&&(e=e.replace(/:([\w\-]+)/g,function(t,e){return encodeURIComponent(s.urlParams[e])})),this.logger&&this.logger.info("start",t.toUpperCase(),e,s),r=(0,i["default"])({},s.headers),r["Content-Type"]=r["Content-Type"]||this._contentType(s.reqFormat),r.Accept=r.Accept||this._contentType(s.resFormat),s.requestId&&(r["Request-ID"]=s.requestId),o=new c["default"](function(n,o){var i=g["default"][t](e).use(a._prefixBaseUrl).set(r).query(s.query||{}).send(s.data||{});a._key&&a._secret&&(i=i.auth(a._key,a._secret)),i.end(function(r,i){if(r)return a.logger&&a.logger.info("error",t.toUpperCase(),e,r),401==r.status&&o(new _["default"].WrongCredentialsError),void o(r);switch(s.resFormat){case"json":var u=i.body||{};"reply"in u&&(u=u.reply);var c={data:u,headers:i.headers,getHeader:function(t){return i.headers[t.toLowerCase()]},status:i.status};Object.defineProperty(c,"_origData",{get:function(){return i.body}}),a.logger&&a.logger.info("success",t.toUpperCase(),e,c),n(c);break;default:a.logger&&a.logger.info("success",t.toUpperCase(),e,i.text?i.text.substr(0,80)+"...":"[null]"),n(i.text)}})}),n.abrupt("return",o);case 9:case"end":return n.stop()}},n,this)}));return function(t,n){return e.apply(this,arguments)}}()}),!function(){var t=I.prototype.get,e=(0,j.decorator)(t);I.prototype.get=function(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.reusePromise?e.call(this,n,r):t.call(this,n,r)}}(),e["default"]=I,t.exports=e["default"]},function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){return t===Object(t)}function a(t){if(!i(t))return t;var e=[];for(var n in t)null!=t[n]&&u(e,n,t[n]);return e.join("&")}function u(t,e,n){return Array.isArray(n)?n.forEach(function(n){u(t,e,n)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}function s(t){for(var e,n,r={},o=t.split("&"),i=0,a=o.length;a>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function c(t){var e,n,r,o,i=t.split(/\r?\n/),a={};i.pop();for(var u=0,s=i.length;s>u;++u)n=i[u],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=w(n.slice(e+1)),a[r]=o;return a}function f(t){return/[\/+]json\b/.test(t)}function l(t){return t.split(/ *; */).shift()}function h(t){return b(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function d(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(t,e){var n=this;m.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new d(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(o,e)})}function v(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}function y(t,e){var n=v("DELETE",t);return e&&n.end(e),n}var g,m=n(99),b=n(100);g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,v.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var w="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=a,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},d.prototype.get=function(t){return this.header[t.toLowerCase()]},d.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=l(e);var n=h(e);for(var r in n)this[r]=n[r]},d.prototype.parseBody=function(t){var e=v.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},d.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},d.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},v.Response=d,m(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",v.types[t]||t),this},p.prototype.parse=function(t){return this._parser=t,this},p.prototype.accept=function(t){return this.set("Accept",v.types[t]||t),this},p.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},p.prototype.field=function(t,e){return this._formData||(this._formData=new g.FormData),this._formData.append(t,e),this},p.prototype.attach=function(t,e,n){return this._formData||(this._formData=new g.FormData),this._formData.append(t,e,n||e.name),this},p.prototype.send=function(t){var e=i(t),n=this.getHeader("Content-Type");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},p.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},p.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,n=this.xhr=v.getXHR(),i=this._query.join("&"),a=this._timeout,u=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(c){}if(a&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},a)),i&&(i=v.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!o(u)){var l=this.getHeader("Content-Type"),h=this._parser||v.serialize[l?l.split(";")[0]:""];!h&&f(l)&&(h=v.serialize["application/json"]),h&&(u=h(u))}for(var d in this.header)null!=this.header[d]&&n.setRequestHeader(d,this.header[d]);return this.emit("request",this),n.send("undefined"!=typeof u?u:null),this},p.prototype.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},v.Request=p,v.get=function(t,e,n){var r=v("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},v.head=function(t,e,n){var r=v("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.del=y,v["delete"]=y,v.patch=function(t,e,n){var r=v("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.post=function(t,e,n){var r=v("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.put=function(t,e,n){var r=v("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},t.exports=v},function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},function(t,e,n){(function(e){!function(){"use strict";function n(t){var n;return n=t instanceof e?t:new e(t.toString(),"binary"),n.toString("base64")}t.exports=n}()}).call(e,n(102).Buffer)},function(t,e,n){(function(t,r){"use strict";function o(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(t.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?a(this,e):"string"==typeof e?u(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function a(e,n){if(e=v(e,0>n?0:0|y(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)e[r]=0;return e}function u(t,e,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|m(e,n);return t=v(t,r),t.write(e,n),t}function s(e,n){if(t.isBuffer(n))return c(e,n);if(Y(n))return f(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(e,n);if(n instanceof ArrayBuffer)return h(e,n)}return n.length?d(e,n):p(e,n)}function c(t,e){var n=0|y(e.length);return t=v(t,n),e.copy(t,0,0,n),t}function f(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function h(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=l(e,new Uint8Array(n)),e}function d(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function p(t,e){var n,r=0;"Buffer"===e.type&&Y(e.data)&&(n=e.data,r=0|y(n.length)),t=v(t,r);for(var o=0;r>o;o+=1)t[o]=255&n[o];return t}function v(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=X),e}function y(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(e,n){if(!(this instanceof g))return new g(e,n);var r=new t(e,n);return delete r.parent,r}function m(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return T(this,e,n);case"binary":return S(this,e,n);case"base64":return j(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;r>a;a++){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[n+a]=u}return a}function _(t,e,n,r){return K(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return K($(e),t,n,r)}function x(t,e,n,r){return E(t,e,n,r)}function A(t,e,n,r){return K(W(e),t,n,r)}function O(t,e,n,r){return K(q(e,t.length-n),t,n,r)}function j(t,e,n){return 0===e&&n===t.length?H.fromByteArray(t):H.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;n>o;){var i=t[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(n>=o+u){var s,c,f,l;switch(u){case 1:128>i&&(a=i);break;case 2:s=t[o+1],128===(192&s)&&(l=(31&i)<<6|63&s,l>127&&(a=l));break;case 3:s=t[o+1],c=t[o+2],128===(192&s)&&128===(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:s=t[o+1],c=t[o+2],f=t[o+3],128===(192&s)&&128===(192&c)&&128===(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return I(r)}function I(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(127&t[o]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function M(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=N(t[i]);return o}function C(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,n,r,o,i,a){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>i||a>n)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range")}function D(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function R(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function G(t,e,n,r,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function L(t,e,n,r,o){return o||G(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function z(t,e,n,r,o){return o||G(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function F(t){if(t=V(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return 16>t?"0"+t.toString(16):t.toString(16)}function U(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,128>n){if((e-=1)<0)break;i.push(n)}else if(2048>n){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function $(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function q(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function W(t){return H.toByteArray(F(t))}function K(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}var H=n(103),Z=n(104),Y=n(105);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var X={};t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.TYPED_ARRAY_SUPPORT?(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array):(t.prototype.length=void 0,t.prototype.parent=void 0),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,a=Math.min(r,o);a>i&&e[i]===n[i];)++i;return i!==a&&(r=e[i],o=n[i]),o>r?-1:r>o?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Y(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var o=new t(n),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(o,i),i+=a.length}return o},t.byteLength=m,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[-1===r?0:o-r]){if(-1===r&&(r=o),
o-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=e,e=0|n,n=o}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return E(this,t,e,n);case"binary":return x(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=t._augment(this.subarray(e,n));else{var i=n-e;o=new t(i,void 0);for(var a=0;i>a;a++)o[a]=this[a+e]}return o.length&&(o.parent=this.parent||this),o},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||B(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||B(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):R(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):R(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=0,a=1,u=0>t?1:0;for(this[e]=255&t;++i<n&&(a*=256);)this[e+i]=(t/a>>0)-u&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=(t/a>>0)-u&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):R(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):R(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&r>o&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,a=o-r;if(this===e&&n>r&&o>n)for(i=a-1;i>=0;i--)e[i+n]=this[i+r];else if(1e3>a||!t.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+n]=this[i+r];else e._set(this.subarray(r,r+a),n);return a},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var o=U(t.toString()),i=o.length;for(r=e;n>r;r++)this[r]=o[r%i]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(102).Buffer,function(){return this}())},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===u||e===h?63:s>e?-1:s+10>e?e-s+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,o,a,u,s,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;s="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new i(3*t.length/4-s),a=s>0?t.length-4:t.length;var l=0;for(r=0,o=0;a>r;r+=4,o+=3)u=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===s?(u=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&u)):1===s&&(u=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(u>>8&255),n(255&u)),c}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,a,u=t.length%3,s="";for(o=0,a=t.length-u;a>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s+=n(i);switch(u){case 1:i=t[t.length-1],s+=e(i>>2),s+=e(i<<4&63),s+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],s+=e(i>>10),s+=e(i>>4&63),s+=e(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}(e)},function(t,e){e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,f=-7,l=n?o-1:0,h=n?-1:1,d=t[e+l];for(l+=h,i=d&(1<<-f)-1,d>>=-f,f+=u;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),i-=c}return(d?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),e+=a+l>=1?h/s:h*Math.pow(2,1-l),e*s>=2&&(a++,s/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(e*s-1)*Math.pow(2,o),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+d]=255&u,d+=p,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={NotSignedInError:n(107),WrongCredentialsError:n(113),NotFoundError:n(114),PermissionDeniedError:n(115),ValidationError:n(116)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(108),u=r(a),s=n(88),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=(i=o=function(t){function e(){var t;(0,c["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,l["default"])(this,(t=(0,u["default"])(e)).call.apply(t,[this].concat(r)));return i.code=e.CODE,i}return(0,d["default"])(e,t),e}(Error),o.CODE="not-signed-in",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(109),__esModule:!0}},function(t,e,n){n(110),t.exports=n(4).Object.getPrototypeOf},function(t,e,n){var r=n(8);n(10)("getPrototypeOf",function(t){return function(e){return t(r(e))}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(16),i=r(o);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(82),i=r(o),a=n(85),u=r(a),s=n(16),c=r(s);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,u["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i["default"]?(0,i["default"])(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(108),u=r(a),s=n(88),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=(i=o=function(t){function e(){var t;(0,c["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,l["default"])(this,(t=(0,u["default"])(e)).call.apply(t,[this].concat(r)));return i.code=e.CODE,i}return(0,d["default"])(e,t),e}(Error),o.CODE="wrong-credentials",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(108),u=r(a),s=n(88),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=(i=o=function(t){function e(t,n,r){(0,c["default"])(this,e);var o=(0,l["default"])(this,(0,u["default"])(e).call(this,r));return o.code=e.CODE,o.resource=t,o.id=n,o}return(0,d["default"])(e,t),e}(Error),o.CODE="not-found",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(108),u=r(a),s=n(88),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=(i=o=function(t){function e(t,n,r){var o=arguments.length<=3||void 0===arguments[3]?"can't perform action "+r+" on "+(t.name||t)+" #"+n:arguments[3];(0,c["default"])(this,e);var i=(0,l["default"])(this,(0,u["default"])(e).call(this,o));return i.code=e.CODE,i.resource=t,i.action=r,i.id=n,i}return(0,d["default"])(e,t),e}(Error),o.CODE="permission-denied",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(108),u=r(a),s=n(88),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=(i=o=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?"invalid":arguments[1],r=arguments.length<=2||void 0===arguments[2]?t+" is "+n:arguments[2];(0,c["default"])(this,e);var o=(0,l["default"])(this,(0,u["default"])(e).call(this,r));return o.code=e.CODE,o.name=t,o.reason=n,o}return(0,d["default"])(e,t),e}(Error),o.CODE="validation",i);e["default"]=p,t.exports=e["default"]},function(t,e){t.exports=function(t){return function(e){return"/"===e.url[0]&&(e.url=t+e.url),e}}},function(t,e,n){var r;(function(t,o){(function(){function i(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function u(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var o=-1,i=t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function c(t,e){for(var n=-1,r=t.length,o=-1,i=e.length,a=Array(r+i);++n<r;)a[n]=t[n];for(;++o<i;)a[n++]=e[o];return a}function f(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function d(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[++o]=a)}return i}function p(t,e){return!!t.length&&A(t,e,0)>-1}function v(t,e,n){for(var r=-1,o=t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function y(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function g(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function m(t,e,n,r){var o=-1,i=t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function b(t,e,n,r){var o=t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function w(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function _(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(u===J?a===a:n(a,u)))var u=a,s=i}return s}function E(t,e,n,r){var o;return n(t,function(t,n,i){return e(t,n,i)?(o=r?n:t,!1):void 0}),o}function x(t,e,n){for(var r=t.length,o=n?r:-1;n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function A(t,e,n){if(e!==e)return V(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function O(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function j(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function k(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);i!==J&&(n=n===J?i:n+i)}return n}function I(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function T(t,e){return y(e,function(e){return[e,t[e]]})}function S(t){return function(e){return t(e)}}function M(t,e){return y(e,function(e){return t[e]})}function C(t,e){for(var n=-1,r=t.length;++n<r&&A(e,t[n],0)>-1;);return n}function P(t,e){for(var n=t.length;n--&&A(e,t[n],0)>-1;);return n}function B(t){return t&&t.Object===Object?t:null}function D(t,e){if(t!==e){var n=null===t,r=t===J,o=t===t,i=null===e,a=e===J,u=e===e;if(t>e&&!i||!o||n&&!a&&u||r&&u)return 1;if(e>t&&!n||!u||i&&!r&&o||a&&o)return-1}return 0}function R(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,u=n.length;++r<a;){var s=D(o[r],i[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}function G(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}function L(t){return xn[t]}function z(t){return An[t]}function F(t){return"\\"+kn[t]}function V(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!==i)return o}return-1}function N(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function U(t,e){return t="number"==typeof t||Ie.test(t)?+t:-1,e=null==e?xt:e,t>-1&&t%1==0&&e>t}function $(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function W(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var a=t[n];a!==e&&a!==Tt||(t[n]=Tt,i[++o]=n)}return i}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function H(t){if(!t||!vn.test(t))return t.length;for(var e=pn.lastIndex=0;pn.test(t);)e++;return e}function Z(t){return t.match(pn)}function Y(t){return On[t]}function X(t){function e(t){if(za(t)&&!Ef(t)&&!(t instanceof o)){if(t instanceof r)return t;if($s.call(t,"__wrapped__"))return Bo(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=J}function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function B(){var t=new o(this.__wrapped__);return t.__actions__=Lr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lr(this.__views__),t}function Ie(){if(this.__filtered__){var t=new o(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ce(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ef(t),r=0>e,o=n?t.length:0,i=go(0,o,this.__views__),a=i.start,u=i.end,s=u-a,c=r?u:a-1,f=this.__iteratees__,l=f.length,h=0,d=vc(s,this.__takeCount__);if(!n||yt>o||o==s&&d==s)return jr(t,this.__actions__);var p=[];t:for(;s--&&d>h;){c+=e;for(var v=-1,y=t[c];++v<l;){var g=f[v],m=g.iteratee,b=g.type,w=m(y);if(b==mt)y=w;else if(!w){if(b==gt)continue t;break t}}p[h++]=y}return p}function Pe(){}function Be(t,e){return Re(t,e)&&delete t[e]}function De(t,e){if(Ec){var n=t[e];return n===_t?J:n}return $s.call(t,e)?t[e]:J}function Re(t,e){return Ec?t[e]!==J:$s.call(t,e)}function Ge(t,e,n){t[e]=Ec&&n===J?_t:n}function Le(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ze(){this.__data__={hash:new Pe,map:bc?new bc:[],string:new Pe}}function Fe(t){var e=this.__data__;return Oo(t)?Be("string"==typeof t?e.string:e.hash,t):bc?e.map["delete"](t):Qe(e.map,t)}function Ve(t){var e=this.__data__;return Oo(t)?De("string"==typeof t?e.string:e.hash,t):bc?e.map.get(t):tn(e.map,t)}function Ne(t){var e=this.__data__;return Oo(t)?Re("string"==typeof t?e.string:e.hash,t):bc?e.map.has(t):en(e.map,t)}function Ue(t,e){var n=this.__data__;return Oo(t)?Ge("string"==typeof t?n.string:n.hash,t,e):bc?n.map.set(t,e):rn(n.map,t,e),this}function $e(t){var e=-1,n=t?t.length:0;for(this.__data__=new Le;++e<n;)this.push(t[e])}function qe(t,e){var n=t.__data__;if(Oo(e)){var r=n.__data__,o="string"==typeof e?r.string:r.hash;return o[e]===_t}return n.has(e)}function We(t){var e=this.__data__;if(Oo(t)){var n=e.__data__,r="string"==typeof t?n.string:n.hash;r[t]=_t}else e.set(t,_t)}function Ke(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function He(){this.__data__={array:[],map:null}}function Ze(t){var e=this.__data__,n=e.array;return n?Qe(n,t):e.map["delete"](t)}function Ye(t){var e=this.__data__,n=e.array;return n?tn(n,t):e.map.get(t)}function Xe(t){var e=this.__data__,n=e.array;return n?en(n,t):e.map.has(t)}function Je(t,e){var n=this.__data__,r=n.array;r&&(r.length<yt-1?rn(r,t,e):(n.array=null,n.map=new Le(r)));var o=n.map;return o&&o.set(t,e),this}function Qe(t,e){var n=nn(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():sc.call(t,n,1),!0}function tn(t,e){var n=nn(t,e);return 0>n?J:t[n][1]}function en(t,e){return nn(t,e)>-1}function nn(t,e){for(var n=t.length;n--;)if(wa(t[n][0],e))return n;return-1}function rn(t,e,n){var r=nn(t,e);0>r?t.push([e,n]):t[r][1]=n}function on(t,e,n,r){return t===J||wa(t,Ns[n])&&!$s.call(r,n)?e:t}function an(t,e,n){(n===J||wa(t[e],n))&&("number"!=typeof e||n!==J||e in t)||(t[e]=n)}function un(t,e,n){var r=t[e];$s.call(t,e)&&wa(r,n)&&(n!==J||e in t)||(t[e]=n)}function sn(t,e,n,r){return Mc(t,function(t,o,i){e(r,t,n(t),i)}),r}function cn(t,e){return t&&zr(e,Ou(e),t)}function fn(t,e){for(var n=-1,r=null==t,o=e.length,i=Array(o);++n<o;)i[n]=r?J:Eu(t,e[n]);return i}function ln(t){return ja(t)?t:[]}function hn(t){return"function"==typeof t?t:ps}function pn(t){return Ef(t)?t:Po(t)}function xn(t,e,n){return t===t&&(n!==J&&(t=n>=t?t:n),e!==J&&(t=t>=e?t:e)),t}function An(t,e,n,r,o,i){var a;if(n&&(a=o?n(t,r,o,i):n(t)),a!==J)return a;if(!La(t))return t;var u=Ef(t);if(u){if(a=bo(t),!e)return Lr(t,a)}else{var s=yo(t),c=s==Dt||s==Rt;if(xf(t))return Tr(t,e);if(s==zt||s==St||c&&!o){if(N(t))return o?t:{};if(a=wo(c?{}:t),!e)return Vr(t,cn(a,t))}else{if(!En[s])return o?t:{};a=_o(t,s,e)}}i||(i=new Ke);var l=i.get(t);return l?l:(i.set(t,a),(u?f:zn)(t,function(r,o){un(a,o,An(r,e,n,o,t,i))}),u?a:Vr(t,a))}function On(t){var e=Ou(t),n=e.length;return function(r){if(null==r)return!n;for(var o=n;o--;){var i=e[o],a=t[i],u=r[i];if(u===J&&!(i in Object(r))||!a(u))return!1}return!0}}function jn(t){return La(t)?ic(t):{}}function kn(t,e,n){if("function"!=typeof t)throw new Fs(wt);return uc(function(){t.apply(J,n)},e)}function Sn(t,e,n,r){var o=-1,i=p,a=!0,u=t.length,s=[],c=e.length;if(!u)return s;n&&(e=y(e,S(n))),r?(i=v,a=!1):e.length>=yt&&(i=qe,a=!1,e=new $e(e));t:for(;++o<u;){var f=t[o],l=n?n(f):f;if(a&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;s.push(f)}else i(e,l,r)||s.push(f)}return s}function Mn(t,e){var n=!0;return Mc(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Pn(t,e,n,r){var o=t.length;for(n=uu(n),0>n&&(n=-n>o?0:o+n),r=r===J||r>o?o:uu(r),0>r&&(r+=o),r=n>r?0:su(r);r>n;)t[n++]=e;return t}function Bn(t,e){var n=[];return Mc(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function Dn(t,e,n,r){r||(r=[]);for(var o=-1,i=t.length;++o<i;){var a=t[o];e>0&&ja(a)&&(n||Ef(a)||xa(a))?e>1?Dn(a,e-1,n,r):g(r,a):n||(r[r.length]=a)}return r}function Rn(t,e){return null==t?t:Pc(t,e,ju)}function zn(t,e){return t&&Pc(t,e,Ou)}function Fn(t,e){return t&&Bc(t,e,Ou)}function Vn(t,e){return d(e,function(e){return Da(t[e])})}function Nn(t,e){e=Ao(e,t)?[e+""]:pn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:J}function Un(t,e){return $s.call(t,e)||"object"==typeof t&&e in t&&null===nc(t)}function $n(t,e){return e in Object(t)}function qn(t,e,n){return t>=vc(e,n)&&t<pc(e,n)}function Wn(t,e,n){for(var r=n?v:p,o=t.length,i=o,a=Array(o),u=[];i--;){var s=t[i];i&&e&&(s=y(s,S(e))),a[i]=!n&&(e||s.length>=120)?new $e(i&&s):J}s=t[0];var c=-1,f=s.length,l=a[0];t:for(;++c<f;){var h=s[c],d=e?e(h):h;if(!(l?qe(l,d):r(u,d,n))){for(var i=o;--i;){var g=a[i];if(!(g?qe(g,d):r(t[i],d,n)))continue t}l&&l.push(d),u.push(h)}}return u}function Kn(t,e,n,r){return zn(t,function(t,o,i){e(r,n(t),o,i)}),r}function Hn(t,e,n){Ao(e,t)||(e=pn(e),t=Mo(t,e),e=Jo(e));var r=null==t?t:t[e];return null==r?J:u(r,t,n)}function Zn(t,e,n,r,o){return t===e?!0:null==t||null==e||!La(t)&&!za(e)?t!==t&&e!==e:Yn(t,e,Zn,n,r,o)}function Yn(t,e,n,r,o,i){var a=Ef(t),u=Ef(e),s=Mt,c=Mt;a||(s=yo(t),s==St?s=zt:s!=zt&&(a=tu(t))),u||(c=yo(e),c==St?c=zt:c!=zt&&(u=tu(e)));var f=s==zt&&!N(t),l=c==zt&&!N(e),h=s==c;if(h&&!a&&!f)return so(t,e,s,n,r,o);var d=o&lt;if(!d){var p=f&&$s.call(t,"__wrapped__"),v=l&&$s.call(e,"__wrapped__");if(p||v)return n(p?t.value():t,v?e.value():e,r,o,i)}return h?(i||(i=new Ke),(a?uo:co)(t,e,n,r,o,i)):!1}function Xn(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=n[o];var s=u[0],c=t[s],f=u[1];if(a&&u[2]){if(c===J&&!(s in t))return!1}else{var l=new Ke,h=r?r(c,f,s,t,e,l):J;if(!(h===J?Zn(f,c,r,ft|lt,l):h))return!1}}return!0}function Jn(t){var e=typeof t;return"function"==e?t:null==t?ps:"object"==e?Ef(t)?rr(t[0],t[1]):nr(t):Es(t)}function Qn(t){return dc(Object(t))}function tr(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function er(t,e){var n=-1,r=Oa(t)?Array(t.length):[];return Mc(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function nr(t){var e=ho(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==J||n in Object(t))}}return function(n){return n===t||Xn(n,t,e)}}function rr(t,e){return function(n){var r=Eu(n,t);return r===J&&r===e?Au(n,t):Zn(e,r,J,ft|lt)}}function or(t,e,n,r,o){if(t!==e){var i=Ef(e)||tu(e)?J:ju(e);f(i||e,function(a,u){if(i&&(u=a,a=e[u]),La(a))o||(o=new Ke),ir(t,e,u,n,or,r,o);else{var s=r?r(t[u],a,u+"",t,e,o):J;s===J&&(s=a),an(t,u,s)}})}}function ir(t,e,n,r,o,i,a){var u=t[n],s=e[n],c=a.get(s);if(c)return void an(t,n,c);var f=i?i(u,s,n+"",t,e,a):J,l=f===J;l&&(f=s,Ef(s)||tu(s)?Ef(u)?f=u:ja(u)?f=Lr(u):(l=!1,f=An(s,!0)):Ha(s)||xa(s)?xa(u)?f=fu(u):!La(u)||r&&Da(u)?(l=!1,f=An(s,!0)):f=u:l=!1),a.set(s,f),l&&o(f,s,r,i,a),an(t,n,f)}function ar(t,e,n){var r=-1,o=lo();e=y(e.length?e:Array(1),function(t){return o(t)});var i=er(t,function(t,n,o){var i=y(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return j(i,function(t,e){return R(t,e,n)})}function ur(t,e){return t=Object(t),m(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function sr(t,e){var n={};return Rn(t,function(t,r){e(t,r)&&(n[r]=t)}),n}function cr(t){return function(e){return null==e?J:e[t]}}function fr(t){return function(e){return Nn(e,t)}}function lr(t,e){return hr(t,e)}function hr(t,e,n){var r=-1,o=e.length,i=t;for(n&&(i=y(t,function(t){return n(t)}));++r<o;)for(var a=0,u=e[r],s=n?n(u):u;(a=A(i,s,a))>-1;)i!==t&&sc.call(i,a,1),sc.call(t,a,1);return t}function dr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(r==n||o!=i){var i=o;if(U(o))sc.call(t,o,1);else if(Ao(o,t))delete t[o];else{var a=pn(o),u=Mo(t,a);null!=u&&delete u[Jo(a)]}}}return t}function pr(t,e){return t+fc(gc()*(e-t+1))}function vr(t,e,n,r){for(var o=-1,i=pc(cc((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a}function yr(t,e,n,r){e=Ao(e,t)?[e+""]:pn(e);for(var o=-1,i=e.length,a=i-1,u=t;null!=u&&++o<i;){var s=e[o];if(La(u)){var c=n;if(o!=a){var f=u[s];c=r?r(f,s,u):J,c===J&&(c=null==f?U(e[o+1])?[]:{}:f)}un(u,s,c)}u=u[s]}return t}function gr(t,e,n){var r=-1,o=t.length;0>e&&(e=-e>o?0:o+e),n=n>o?o:n,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}function mr(t,e){var n;return Mc(t,function(t,r,o){return n=e(t,r,o),!n}),!!n}function br(t,e,n){var r=0,o=t?t.length:r;if("number"==typeof e&&e===e&&It>=o){for(;o>r;){var i=r+o>>>1,a=t[i];(n?e>=a:e>a)&&null!==a?r=i+1:o=i}return o}return wr(t,e,ps,n)}function wr(t,e,n,r){e=n(e);for(var o=0,i=t?t.length:0,a=e!==e,u=null===e,s=e===J;i>o;){var c=fc((o+i)/2),f=n(t[c]),l=f!==J,h=f===f;if(a)var d=h||r;else d=u?h&&l&&(r||null!=f):s?h&&(r||l):null==f?!1:r?e>=f:e>f;d?o=c+1:i=c}return vc(i,kt)}function _r(t){return Er(t)}function Er(t,e){for(var n=0,r=t.length,o=t[0],i=e?e(o):o,a=i,u=0,s=[o];++n<r;)o=t[n],i=e?e(o):o,wa(i,a)||(a=i,s[++u]=o);return s}function xr(t,e,n){var r=-1,o=p,i=t.length,a=!0,u=[],s=u;if(n)a=!1,o=v;else if(i>=yt){var c=e?null:Rc(t);if(c)return K(c);a=!1,o=qe,s=new $e}else s=e?[]:u;t:for(;++r<i;){var f=t[r],l=e?e(f):f;if(a&&l===l){for(var h=s.length;h--;)if(s[h]===l)continue t;e&&s.push(l),u.push(f)}else o(s,l,n)||(s!==u&&s.push(l),u.push(f))}return u}function Ar(t,e){e=Ao(e,t)?[e+""]:pn(e),t=Mo(t,e);var n=Jo(e);return null!=t&&xu(t,n)?delete t[n]:!0}function Or(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?gr(t,r?0:i,r?i+1:o):gr(t,r?i+1:0,r?o:i)}function jr(t,e){var n=t;return n instanceof o&&(n=n.value()),m(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function kr(t,e,n){for(var r=-1,o=t.length;++r<o;)var i=i?g(Sn(i,t[r],e,n),Sn(t[r],i,e,n)):t[r];return i&&i.length?xr(i,e,n):[]}function Ir(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;)n(a,t[r],i>r?e[r]:J);return a}function Tr(t,e){if(e)return t.slice();var n=t.constructor,r=new n(t.length);return t.copy(r),r}function Sr(t){var e=t.constructor,n=new e(t.byteLength),r=new Qs(n);return r.set(new Qs(t)),n}function Mr(t){var e=t.constructor;return m(q(t),i,new e)}function Cr(t){var e=t.constructor,n=new e(t.source,Ee.exec(t));return n.lastIndex=t.lastIndex,n}function Pr(t){var e=t.constructor;return m(K(t),a,new e)}function Br(t){return Js?Object(Ic.call(t)):{}}function Dr(t,e){var n=t.buffer,r=e?Sr(n):n,o=t.constructor;return new o(r,t.byteOffset,t.length)}function Rr(t,e,n,r){
for(var o=-1,i=t.length,a=n.length,u=-1,s=e.length,c=pc(i-a,0),f=Array(s+c),l=!r;++u<s;)f[u]=e[u];for(;++o<a;)(l||i>o)&&(f[n[o]]=t[o]);for(;c--;)f[u++]=t[o++];return f}function Gr(t,e,n,r){for(var o=-1,i=t.length,a=-1,u=n.length,s=-1,c=e.length,f=pc(i-u,0),l=Array(f+c),h=!r;++o<f;)l[o]=t[o];for(var d=o;++s<c;)l[d+s]=e[s];for(;++a<u;)(h||i>o)&&(l[d+n[a]]=t[o++]);return l}function Lr(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function zr(t,e,n){return Fr(t,e,n)}function Fr(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],u=r?r(n[a],t[a],a,n,t):t[a];un(n,a,u)}return n}function Vr(t,e){return zr(t,zc(t),e)}function Nr(t,e){return function(n,r){var o=Ef(n)?s:sn,i=e?e():{};return o(n,t,lo(r),i)}}function Ur(t){return fa(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:J,a=o>2?n[2]:J;for(i="function"==typeof i?(o--,i):J,a&&xo(n[0],n[1],a)&&(i=3>o?J:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e})}function $r(t,e){return function(n,r){if(null==n)return n;if(!Oa(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function qr(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(n(i[s],s,i)===!1)break}return e}}function Wr(t,e,n){function r(){var e=this&&this!==Gn&&this instanceof r?i:t;return e.apply(o?n:this,arguments)}var o=e&tt,i=Zr(t);return r}function Kr(t){return function(e){e=hu(e);var n=vn.test(e)?Z(e):J,r=n?n[0]:e.charAt(0),o=n?n.slice(1).join(""):e.slice(1);return r[t]()+o}}function Hr(t){return function(e){return m(fs($u(e)),t,"")}}function Zr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),r=t.apply(n,e);return La(r)?r:n}}function Yr(t,e,n){function r(){for(var i=arguments.length,a=Array(i),s=i,c=vo(r);s--;)a[s]=arguments[s];var f=3>i&&a[0]!==c&&a[i-1]!==c?[]:W(a,c);if(i-=f.length,n>i)return oo(t,e,Jr,r.placeholder,J,a,f,J,J,n-i);var l=this&&this!==Gn&&this instanceof r?o:t;return u(l,this,a)}var o=Zr(t);return r}function Xr(t){return fa(function(e){e=Dn(e,1);var n=e.length,o=n,i=r.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new Fs(wt);if(i&&!u&&"wrapper"==fo(a))var u=new r([],!0)}for(o=u?o:n;++o<n;){a=e[o];var s=fo(a),c="wrapper"==s?Gc(a):J;u=c&&jo(c[0])&&c[1]==(ut|rt|it|st)&&!c[4].length&&1==c[9]?u[fo(c[0])].apply(u,c[3]):1==a.length&&jo(a)?u[s]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ef(r)&&r.length>=yt)return u.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function Jr(t,e,n,r,o,i,a,u,s,c){function f(){for(var g=arguments.length,m=g,b=Array(g);m--;)b[m]=arguments[m];if(p)var w=vo(f),_=G(b,w);if(r&&(b=Rr(b,r,o,p)),i&&(b=Gr(b,i,a,p)),g-=_,p&&c>g){var E=W(b,w);return oo(t,e,Jr,f.placeholder,n,b,E,u,s,c-g)}var x=h?n:this,A=d?x[t]:t;return g=b.length,u?b=Co(b,u):v&&g>1&&b.reverse(),l&&g>s&&(b.length=s),this&&this!==Gn&&this instanceof f&&(A=y||Zr(A)),A.apply(x,b)}var l=e&ut,h=e&tt,d=e&et,p=e&(rt|ot),v=e&ct,y=d?J:Zr(t);return f}function Qr(t,e){return function(n,r){return Kn(n,t,e(r),{})}}function to(t){return fa(function(e){return e=y(Dn(e,1),lo()),fa(function(n){var r=this;return t(e,function(t){return u(t,r,n)})})})}function eo(t,e,n){e=uu(e);var r=H(t);if(!e||r>=e)return"";var o=e-r;n=n===J?" ":n+"";var i=Ju(n,cc(o/H(n)));return vn.test(n)?Z(i).slice(0,o).join(""):i.slice(0,o)}function no(t,e,n,r){function o(){for(var e=-1,s=arguments.length,c=-1,f=r.length,l=Array(f+s),h=this&&this!==Gn&&this instanceof o?a:t;++c<f;)l[c]=r[c];for(;s--;)l[c++]=arguments[++e];return u(h,i?n:this,l)}var i=e&tt,a=Zr(t);return o}function ro(t){return function(e,n,r){return r&&"number"!=typeof r&&xo(e,n,r)&&(n=r=J),e=cu(e),e=e===e?e:0,n===J?(n=e,e=0):n=cu(n)||0,r=r===J?n>e?1:-1:cu(r)||0,vr(e,n,r,t)}}function oo(t,e,n,r,o,i,a,u,s,c){var f=e&rt,l=u?Lr(u):J,h=f?a:J,d=f?J:a,p=f?i:J,v=f?J:i;e|=f?it:at,e&=~(f?at:it),e&nt||(e&=~(tt|et));var y=[t,e,o,p,h,v,d,l,s,c],g=n.apply(J,y);return jo(t)&&Fc(g,y),g.placeholder=r,g}function io(t){var e=Ls[t];return function(t,n){if(t=cu(t),n=uu(n)){var r=(hu(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return r=(hu(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function ao(t,e,n,r,o,i,a,u){var s=e&et;if(!s&&"function"!=typeof t)throw new Fs(wt);var c=r?r.length:0;if(c||(e&=~(it|at),r=o=J),a=a===J?a:pc(uu(a),0),u=u===J?u:uu(u),c-=o?o.length:0,e&at){var f=r,l=o;r=o=J}var h=s?J:Gc(t),d=[t,e,n,r,o,f,l,i,a,u];if(h&&To(d,h),t=d[0],e=d[1],n=d[2],r=d[3],o=d[4],u=d[9]=null==d[9]?s?0:t.length:pc(d[9]-c,0),!u&&e&(rt|ot)&&(e&=~(rt|ot)),e&&e!=tt)p=e==rt||e==ot?Yr(t,e,u):e!=it&&e!=(tt|it)||o.length?Jr.apply(J,d):no(t,e,n,r);else var p=Wr(t,e,n);var v=h?Dc:Fc;return v(p,d)}function uo(t,e,n,r,o,i){var a=-1,u=o&lt,s=o&ft,c=t.length,f=e.length;if(c!=f&&!(u&&f>c))return!1;var l=i.get(t);if(l)return l==e;var h=!0;for(i.set(t,e);++a<c;){var d=t[a],p=e[a];if(r)var v=u?r(p,d,a,e,t,i):r(d,p,a,t,e,i);if(v!==J){if(v)continue;h=!1;break}if(s){if(!w(e,function(t){return d===t||n(d,t,r,o,i)})){h=!1;break}}else if(d!==p&&!n(d,p,r,o,i)){h=!1;break}}return i["delete"](t),h}function so(t,e,n,r,o,i){switch(n){case Wt:return!(t.byteLength!=e.byteLength||!r(new Qs(t),new Qs(e)));case Ct:case Pt:return+t==+e;case Bt:return t.name==e.name&&t.message==e.message;case Lt:return t!=+t?e!=+e:t==+e;case Ft:case Nt:return t==e+"";case Gt:var a=q;case Vt:var u=i&lt;return a||(a=K),(u||t.size==e.size)&&r(a(t),a(e),o,i|ft);case Ut:return!!Js&&Ic.call(t)==Ic.call(e)}return!1}function co(t,e,n,r,o,i){var a=o&lt,u=Ou(t),s=u.length,c=Ou(e),f=c.length;if(s!=f&&!a)return!1;for(var l=s;l--;){var h=u[l];if(!(a?h in e:Un(e,h)))return!1}var d=i.get(t);if(d)return d==e;var p=!0;i.set(t,e);for(var v=a;++l<s;){h=u[l];var y=t[h],g=e[h];if(r)var m=a?r(g,y,h,e,t,i):r(y,g,h,t,e,i);if(!(m===J?y===g||n(y,g,r,o,i):m)){p=!1;break}v||(v="constructor"==h)}if(p&&!v){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return i["delete"](t),p}function fo(t){for(var e=t.name+"",n=Sc[e],r=$s.call(Sc,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function lo(){var t=e.iteratee||vs;return t=t===vs?Jn:t,arguments.length?t(arguments[0],arguments[1]):t}function ho(t){for(var e=Bu(t),n=e.length;n--;)e[n][2]=Io(e[n][1]);return e}function po(t,e){var n=null==t?J:t[e];return $a(n)?n:J}function vo(t){var n=$s.call(e,"placeholder")?e:t;return n.placeholder}function yo(t){return Ks.call(t)}function go(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=vc(e,t+a);break;case"takeRight":t=pc(t,e-a)}}return{start:t,end:e}}function mo(t,e,n){if(null==t)return!1;var r=n(t,e);r||Ao(e)||(e=pn(e),t=Mo(t,e),null!=t&&(e=Jo(e),r=n(t,e)));var o=t?t.length:J;return r||!!o&&Ga(o)&&U(e,o)&&(Ef(t)||Ja(t)||xa(t))}function bo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&$s.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function wo(t){return Da(t.constructor)&&!ko(t)?jn(nc(t)):{}}function _o(t,e,n){var r=t.constructor;switch(e){case Wt:return Sr(t);case Ct:case Pt:return new r(+t);case Kt:case Ht:case Zt:case Yt:case Xt:case Jt:case Qt:case te:case ee:return Dr(t,n);case Gt:return Mr(t);case Lt:case Nt:return new r(t);case Ft:return Cr(t);case Vt:return Pr(t);case Ut:return Br(t)}}function Eo(t){var e=t?t.length:J;return Ga(e)&&(Ef(t)||Ja(t)||xa(t))?I(e,String):null}function xo(t,e,n){if(!La(n))return!1;var r=typeof e;return("number"==r?Oa(n)&&U(e,n.length):"string"==r&&e in n)?wa(n[e],t):!1}function Ao(t,e){return"number"==typeof t?!0:!Ef(t)&&(de.test(t)||!he.test(t)||null!=e&&t in Object(e))}function Oo(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function jo(t){var n=fo(t),r=e[n];if("function"!=typeof r||!(n in o.prototype))return!1;if(t===r)return!0;var i=Gc(r);return!!i&&t===i[0]}function ko(t){var e=t&&t.constructor,n=Da(e)&&e.prototype||Ns;return t===n}function Io(t){return t===t&&!La(t)}function To(t,e){var n=t[1],r=e[1],o=n|r,i=(tt|et|ut)>o,a=r==ut&&n==rt||r==ut&&n==st&&t[7].length<=e[8]||r==(ut|st)&&e[7].length<=e[8]&&n==rt;if(!i&&!a)return t;r&tt&&(t[2]=e[2],o|=n&tt?0:nt);var u=e[3];if(u){var s=t[3];t[3]=s?Rr(s,u,e[4]):Lr(u),t[4]=s?W(t[3],Tt):Lr(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?Gr(s,u,e[6]):Lr(u),t[6]=s?W(t[5],Tt):Lr(e[6])),u=e[7],u&&(t[7]=Lr(u)),r&ut&&(t[8]=null==t[8]?e[8]:vc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function So(t,e,n,r,o,i){return La(t)&&La(e)&&(i.set(e,t),or(t,e,J,So,i)),t}function Mo(t,e){return 1==e.length?t:Eu(t,gr(e,0,-1))}function Co(t,e){for(var n=t.length,r=vc(e.length,n),o=Lr(t);r--;){var i=e[r];t[r]=U(i,n)?o[i]:J}return t}function Po(t){var e=[];return hu(t).replace(pe,function(t,n,r,o){e.push(r?o.replace(we,"$1"):n||t)}),e}function Bo(t){if(t instanceof o)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Lr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Do(t,e){e=pc(uu(e),0);var n=t?t.length:0;if(!n||1>e)return[];for(var r=0,o=-1,i=Array(cc(n/e));n>r;)i[++o]=gr(t,r,r+=e);return i}function Ro(t){for(var e=-1,n=t?t.length:0,r=-1,o=[];++e<n;){var i=t[e];i&&(o[++r]=i)}return o}function Go(t,e,n){var r=t?t.length:0;return r?(e=n||e===J?1:uu(e),gr(t,0>e?0:e,r)):[]}function Lo(t,e,n){var r=t?t.length:0;return r?(e=n||e===J?1:uu(e),e=r-e,gr(t,0,0>e?0:e)):[]}function zo(t,e){return t&&t.length?Or(t,lo(e,3),!0,!0):[]}function Fo(t,e){return t&&t.length?Or(t,lo(e,3),!0):[]}function Vo(t,e,n,r){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&xo(t,e,n)&&(n=0,r=o),Pn(t,e,n,r)):[]}function No(t,e){return t&&t.length?x(t,lo(e,3)):-1}function Uo(t,e){return t&&t.length?x(t,lo(e,3),!0):-1}function $o(t){var e=t?t.length:0;return e?Dn(t,1):[]}function qo(t){var e=t?t.length:0;return e?Dn(t,Et):[]}function Wo(t,e){var n=t?t.length:0;return n?(e=e===J?1:uu(e),Dn(t,e)):[]}function Ko(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r}function Ho(t){return t?t[0]:J}function Zo(t,e,n){var r=t?t.length:0;return r?(n=uu(n),0>n&&(n=pc(r+n,0)),A(t,e,n)):-1}function Yo(t){return Lo(t,1)}function Xo(t,e){return t?hc.call(t,e):""}function Jo(t){var e=t?t.length:0;return e?t[e-1]:J}function Qo(t,e,n){var r=t?t.length:0;if(!r)return-1;var o=r;if(n!==J&&(o=uu(n),o=(0>o?pc(r+o,0):vc(o,r-1))+1),e!==e)return V(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function ti(t,e){return t&&t.length&&e&&e.length?lr(t,e):t}function ei(t,e,n){return t&&t.length&&e&&e.length?hr(t,e,lo(n)):t}function ni(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=lo(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return dr(t,o),n}function ri(t){return t?mc.call(t):t}function oi(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&xo(t,e,n)?(e=0,n=r):(e=null==e?0:uu(e),n=n===J?r:uu(n)),gr(t,e,n)):[]}function ii(t,e){return br(t,e)}function ai(t,e,n){return wr(t,e,lo(n))}function ui(t,e){var n=t?t.length:0;if(n){var r=br(t,e);if(n>r&&wa(t[r],e))return r}return-1}function si(t,e){return br(t,e,!0)}function ci(t,e,n){return wr(t,e,lo(n),!0)}function fi(t,e){var n=t?t.length:0;if(n){var r=br(t,e,!0)-1;if(wa(t[r],e))return r}return-1}function li(t){return t&&t.length?_r(t):[]}function hi(t,e){return t&&t.length?Er(t,lo(e)):[]}function di(t){return Go(t,1)}function pi(t,e,n){return t&&t.length?(e=n||e===J?1:uu(e),gr(t,0,0>e?0:e)):[]}function vi(t,e,n){var r=t?t.length:0;return r?(e=n||e===J?1:uu(e),e=r-e,gr(t,0>e?0:e,r)):[]}function yi(t,e){return t&&t.length?Or(t,lo(e,3),!1,!0):[]}function gi(t,e){return t&&t.length?Or(t,lo(e,3)):[]}function mi(t){return t&&t.length?xr(t):[]}function bi(t,e){return t&&t.length?xr(t,lo(e)):[]}function wi(t,e){return t&&t.length?xr(t,J,e):[]}function _i(t){if(!t||!t.length)return[];var e=0;return t=d(t,function(t){return ja(t)?(e=pc(t.length,e),!0):void 0}),I(e,function(e){return y(t,cr(e))})}function Ei(t,e){if(!t||!t.length)return[];var n=_i(t);return null==e?n:y(n,function(t){return u(e,J,t)})}function xi(t,e){return Ir(t||[],e||[],un)}function Ai(t,e){return Ir(t||[],e||[],yr)}function Oi(t){var n=e(t);return n.__chain__=!0,n}function ji(t,e){return e(t),t}function ki(t,e){return e(t)}function Ii(){return Oi(this)}function Ti(){return new r(this.value(),this.__chain__)}function Si(t){return this.map(t).flatten()}function Mi(){this.__values__===J&&(this.__values__=au(this.value()));var t=this.__index__>=this.__values__.length,e=t?J:this.__values__[this.__index__++];return{done:t,value:e}}function Ci(){return this}function Pi(t){for(var e,r=this;r instanceof n;){var o=Bo(r);o.__index__=0,o.__values__=J,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e}function Bi(){var t=this.__wrapped__;if(t instanceof o){var e=t;return this.__actions__.length&&(e=new o(this)),e=e.reverse(),e.__actions__.push({func:ki,args:[ri],thisArg:J}),new r(e,this.__chain__)}return this.thru(ri)}function Di(){return jr(this.__wrapped__,this.__actions__)}function Ri(t,e,n){var r=Ef(t)?h:Mn;return n&&xo(t,e,n)&&(e=J),r(t,lo(e,3))}function Gi(t,e){var n=Ef(t)?d:Bn;return n(t,lo(e,3))}function Li(t,e){if(e=lo(e,3),Ef(t)){var n=x(t,e);return n>-1?t[n]:J}return E(t,e,Mc)}function zi(t,e){if(e=lo(e,3),Ef(t)){var n=x(t,e,!0);return n>-1?t[n]:J}return E(t,e,Cc)}function Fi(t,e){return Dn($i(t,e),1)}function Vi(t,e){return"function"==typeof e&&Ef(t)?f(t,e):Mc(t,hn(e))}function Ni(t,e){return"function"==typeof e&&Ef(t)?l(t,e):Cc(t,hn(e))}function Ui(t,e,n,r){t=Oa(t)?t:Lu(t),n=n&&!r?uu(n):0;var o=t.length;return 0>n&&(n=pc(o+n,0)),Ja(t)?o>=n&&t.indexOf(e,n)>-1:!!o&&A(t,e,n)>-1}function $i(t,e){var n=Ef(t)?y:er;return n(t,lo(e,3))}function qi(t,e,n,r){return null==t?[]:(Ef(e)||(e=null==e?[]:[e]),n=r?J:n,Ef(n)||(n=null==n?[]:[n]),ar(t,e,n))}function Wi(t,e,n){var r=Ef(t)?m:O,o=arguments.length<3;return r(t,lo(e,4),n,o,Mc)}function Ki(t,e,n){var r=Ef(t)?b:O,o=arguments.length<3;return r(t,lo(e,4),n,o,Cc)}function Hi(t,e){var n=Ef(t)?d:Bn;return e=lo(e,3),n(t,function(t,n,r){return!e(t,n,r)})}function Zi(t){var e=Oa(t)?t:Lu(t),n=e.length;return n>0?e[pr(0,n-1)]:J}function Yi(t,e){var n=-1,r=au(t),o=r.length,i=o-1;for(e=xn(uu(e),0,o);++n<e;){var a=pr(n,i),u=r[a];r[a]=r[n],r[n]=u}return r.length=e,r}function Xi(t){return Yi(t,jt)}function Ji(t){if(null==t)return 0;if(Oa(t)){var e=t.length;return e&&Ja(t)?H(t):e}return Ou(t).length}function Qi(t,e,n){var r=Ef(t)?w:mr;return n&&xo(t,e,n)&&(e=J),r(t,lo(e,3))}function ta(t,e){if("function"!=typeof e)throw new Fs(wt);return t=uu(t),function(){return--t<1?e.apply(this,arguments):void 0}}function ea(t,e,n){return e=n?J:e,e=t&&null==e?t.length:e,ao(t,ut,J,J,J,J,e)}function na(t,e){var n;if("function"!=typeof e)throw new Fs(wt);return t=uu(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=J),n}}function ra(t,e,n){e=n?J:e;var r=ao(t,rt,J,J,J,J,J,e);return r.placeholder=ra.placeholder,r}function oa(t,e,n){e=n?J:e;var r=ao(t,ot,J,J,J,J,J,e);return r.placeholder=oa.placeholder,r}function ia(t,e,n){function r(){p&&tc(p),f&&tc(f),y=0,c=f=d=p=v=J}function o(e,n){n&&tc(n),f=p=v=J,e&&(y=df(),l=t.apply(d,c),p||f||(c=d=J))}function i(){var t=e-(df()-h);0>=t||t>e?o(v,f):p=uc(i,t)}function a(){return(p&&v||f&&b)&&(l=t.apply(d,c)),r(),l}function u(){o(b,p)}function s(){if(c=arguments,h=df(),d=this,v=b&&(p||!g),m===!1)var n=g&&!p;else{y||f||g||(y=h);var r=m-(h-y),o=(0>=r||r>m)&&(g||f);o?(f&&(f=tc(f)),y=h,l=t.apply(d,c)):f||(f=uc(u,r))}return o&&p?p=tc(p):p||e===m||(p=uc(i,e)),n&&(o=!0,l=t.apply(d,c)),!o||p||f||(c=d=J),l}var c,f,l,h,d,p,v,y=0,g=!1,m=!1,b=!0;if("function"!=typeof t)throw new Fs(wt);return e=cu(e)||0,La(n)&&(g=!!n.leading,m="maxWait"in n&&pc(cu(n.maxWait)||0,e),b="trailing"in n?!!n.trailing:b),s.cancel=r,s.flush=a,s}function aa(t){return ao(t,ct)}function ua(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Fs(wt);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new ua.Cache,n}function sa(t){if("function"!=typeof t)throw new Fs(wt);return function(){return!t.apply(this,arguments)}}function ca(t){return na(2,t)}function fa(t,e){if("function"!=typeof t)throw new Fs(wt);return e=pc(e===J?t.length-1:uu(e),0),function(){for(var n=arguments,r=-1,o=pc(n.length-e,0),i=Array(o);++r<o;)i[r]=n[e+r];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,n[0],i);case 2:return t.call(this,n[0],n[1],i)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=i,u(t,this,a)}}function la(t,e){if("function"!=typeof t)throw new Fs(wt);return e=e===J?0:pc(uu(e),0),fa(function(n){var r=n[e],o=n.slice(0,e);return r&&g(o,r),u(t,this,o)})}function ha(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Fs(wt);return La(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ia(t,e,{leading:r,maxWait:e,trailing:o})}function da(t){return ea(t,1)}function pa(t,e){return e=null==e?ps:e,bf(e,t)}function va(){if(!arguments.length)return[];var t=arguments[0];return Ef(t)?t:[t]}function ya(t){return An(t)}function ga(t,e){return An(t,!1,e)}function ma(t){return An(t,!0)}function ba(t,e){return An(t,!0,e)}function wa(t,e){return t===e||t!==t&&e!==e}function _a(t,e){return t>e}function Ea(t,e){return t>=e}function xa(t){return ja(t)&&$s.call(t,"callee")&&(!ac.call(t,"callee")||Ks.call(t)==St)}function Aa(t){return za(t)&&Ks.call(t)==Wt}function Oa(t){return null!=t&&!("function"==typeof t&&Da(t))&&Ga(Lc(t))}function ja(t){return za(t)&&Oa(t)}function ka(t){return t===!0||t===!1||za(t)&&Ks.call(t)==Ct}function Ia(t){return za(t)&&Ks.call(t)==Pt}function Ta(t){return!!t&&1===t.nodeType&&za(t)&&!Ha(t)}function Sa(t){if(Oa(t)&&(Ef(t)||Ja(t)||Da(t.splice)||xa(t)))return!t.length;for(var e in t)if($s.call(t,e))return!1;return!0}function Ma(t,e){return Zn(t,e)}function Ca(t,e,n){n="function"==typeof n?n:J;var r=n?n(t,e):J;return r===J?Zn(t,e,n):!!r}function Pa(t){return za(t)?Ks.call(t)==Bt||"string"==typeof t.message&&"string"==typeof t.name:!1}function Ba(t){return"number"==typeof t&&lc(t)}function Da(t){var e=La(t)?Ks.call(t):"";return e==Dt||e==Rt}function Ra(t){return"number"==typeof t&&t==uu(t)}function Ga(t){return"number"==typeof t&&t>-1&&t%1==0&&xt>=t}function La(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function za(t){return!!t&&"object"==typeof t}function Fa(t){return za(t)&&yo(t)==Gt}function Va(t,e){return t===e||Xn(t,e,ho(e))}function Na(t,e,n){return n="function"==typeof n?n:J,Xn(t,e,ho(e),n)}function Ua(t){return Ka(t)&&t!=+t}function $a(t){return null==t?!1:Da(t)?Zs.test(Us.call(t)):za(t)&&(N(t)?Zs:je).test(t)}function qa(t){return null===t}function Wa(t){return null==t}function Ka(t){return"number"==typeof t||za(t)&&Ks.call(t)==Lt}function Ha(t){if(!za(t)||Ks.call(t)!=zt||N(t))return!1;var e=nc(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&Us.call(n)==Ws}function Za(t){return La(t)&&Ks.call(t)==Ft}function Ya(t){return Ra(t)&&t>=-xt&&xt>=t}function Xa(t){return za(t)&&yo(t)==Vt}function Ja(t){return"string"==typeof t||!Ef(t)&&za(t)&&Ks.call(t)==Nt}function Qa(t){return"symbol"==typeof t||za(t)&&Ks.call(t)==Ut}function tu(t){return za(t)&&Ga(t.length)&&!!_n[Ks.call(t)]}function eu(t){return t===J}function nu(t){return za(t)&&yo(t)==$t}function ru(t){return za(t)&&Ks.call(t)==qt}function ou(t,e){return e>t}function iu(t,e){return e>=t}function au(t){if(!t)return[];if(Oa(t))return Ja(t)?Z(t):Lr(t);if(oc&&t[oc])return $(t[oc]());var e=yo(t),n=e==Gt?q:e==Vt?K:Lu;return n(t)}function uu(t){if(!t)return 0===t?t:0;if(t=cu(t),t===Et||t===-Et){var e=0>t?-1:1;return e*At}var n=t%1;return t===t?n?t-n:t:0}function su(t){return t?xn(uu(t),0,jt):0}function cu(t){if(La(t)){var e=Da(t.valueOf)?t.valueOf():t;t=La(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ge,"");var n=Oe.test(t);return n||ke.test(t)?Tn(t.slice(2),n?2:8):Ae.test(t)?Ot:+t}function fu(t){return zr(t,ju(t))}function lu(t){return xn(uu(t),-xt,xt)}function hu(t){if("string"==typeof t)return t;if(null==t)return"";if(Qa(t))return Js?Tc.call(t):"";var e=t+"";return"0"==e&&1/t==-Et?"-0":e}function du(t,e){var n=jn(t);return e?cn(n,e):n}function pu(t,e){return E(t,lo(e,3),zn,!0)}function vu(t,e){return E(t,lo(e,3),Fn,!0)}function yu(t,e){return null==t?t:Pc(t,hn(e),ju)}function gu(t,e){return null==t?t:Bc(t,hn(e),ju)}function mu(t,e){return t&&zn(t,hn(e))}function bu(t,e){return t&&Fn(t,hn(e))}function wu(t){return null==t?[]:Vn(t,Ou(t))}function _u(t){return null==t?[]:Vn(t,ju(t))}function Eu(t,e,n){var r=null==t?J:Nn(t,e);return r===J?n:r}function xu(t,e){return mo(t,e,Un)}function Au(t,e){return mo(t,e,$n)}function Ou(t){var e=ko(t);if(!e&&!Oa(t))return Qn(t);var n=Eo(t),r=!!n,o=n||[],i=o.length;for(var a in t)!Un(t,a)||r&&("length"==a||U(a,i))||e&&"constructor"==a||o.push(a);return o}function ju(t){for(var e=-1,n=ko(t),r=tr(t),o=r.length,i=Eo(t),a=!!i,u=i||[],s=u.length;++e<o;){var c=r[e];a&&("length"==c||U(c,s))||"constructor"==c&&(n||!$s.call(t,c))||u.push(c)}return u}function ku(t,e){var n={};return e=lo(e,3),zn(t,function(t,r,o){n[e(t,r,o)]=t}),n}function Iu(t,e){var n={};return e=lo(e,3),zn(t,function(t,r,o){n[r]=e(t,r,o)}),n}function Tu(t,e){return e=lo(e),sr(t,function(t,n){return!e(t,n)})}function Su(t,e){return null==t?{}:sr(t,lo(e))}function Mu(t,e,n){if(Ao(e,t))r=null==t?J:t[e];else{e=pn(e);var r=Eu(t,e);t=Mo(t,e)}return r===J&&(r=n),Da(r)?r.call(t):r}function Cu(t,e,n){return null==t?t:yr(t,e,n)}function Pu(t,e,n,r){return r="function"==typeof r?r:J,null==t?t:yr(t,e,n,r)}function Bu(t){return T(t,Ou(t))}function Du(t){return T(t,ju(t))}function Ru(t,e,n){var r=Ef(t)||tu(t);if(e=lo(e,4),null==n)if(r||La(t)){var o=t.constructor;n=r?Ef(t)?new o:[]:Da(o)?jn(nc(t)):{}}else n={};return(r?f:zn)(t,function(t,r,o){return e(n,t,r,o)}),n}function Gu(t,e){return null==t?!0:Ar(t,e)}function Lu(t){return t?M(t,Ou(t)):[]}function zu(t){return null==t?[]:M(t,ju(t))}function Fu(t,e,n){return n===J&&(n=e,e=J),n!==J&&(n=cu(n),n=n===n?n:0),e!==J&&(e=cu(e),e=e===e?e:0),xn(cu(t),e,n)}function Vu(t,e,n){return e=cu(e)||0,n===J?(n=e,e=0):n=cu(n)||0,t=cu(t),qn(t,e,n)}function Nu(t,e,n){if(n&&"boolean"!=typeof n&&xo(t,e,n)&&(e=n=J),n===J&&("boolean"==typeof e?(n=e,e=J):"boolean"==typeof t&&(n=t,t=J)),t===J&&e===J?(t=0,e=1):(t=cu(t)||0,e===J?(e=t,t=0):e=cu(e)||0),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=gc();return vc(t+o*(e-t+In("1e-"+((o+"").length-1))),e)}return pr(t,e)}function Uu(t){return Nf(hu(t).toLowerCase())}function $u(t){return t=hu(t),t&&t.replace(Te,L).replace(dn,"")}function qu(t,e,n){t=hu(t),e="string"==typeof e?e:e+"";var r=t.length;return n=n===J?r:xn(uu(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Wu(t){return t=hu(t),t&&se.test(t)?t.replace(ae,z):t}function Ku(t){return t=hu(t),t&&ye.test(t)?t.replace(ve,"\\$&"):t}function Hu(t,e,n){t=hu(t),e=uu(e);var r=H(t);if(!e||r>=e)return t;var o=(e-r)/2,i=fc(o),a=cc(o);return eo("",i,n)+t+eo("",a,n)}function Zu(t,e,n){return t=hu(t),t+eo(t,e,n)}function Yu(t,e,n){return t=hu(t),eo(t,e,n)+t}function Xu(t,e,n){return n||null==e?e=0:e&&(e=+e),t=hu(t).replace(ge,""),yc(t,e||(xe.test(t)?16:10))}function Ju(t,e){t=hu(t),e=uu(e);var n="";if(!t||1>e||e>xt)return n;do e%2&&(n+=t),e=fc(e/2),t+=t;while(e);return n}function Qu(){var t=arguments,e=hu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function ts(t,e,n){return hu(t).split(e,n)}function es(t,e,n){return t=hu(t),n=xn(uu(n),0,t.length),t.lastIndexOf(e,n)==n}function ns(t,n,r){var o=e.templateSettings;r&&xo(t,n,r)&&(n=J),t=hu(t),n=jf({},n,o,on);var i,a,u=jf({},n.imports,o.imports,on),s=Ou(u),c=M(u,s),f=0,l=n.interpolate||Se,h="__p += '",d=zs((n.escape||Se).source+"|"+l.source+"|"+(l===le?_e:Se).source+"|"+(n.evaluate||Se).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++wn+"]")+"\n";t.replace(d,function(e,n,r,o,u,s){return r||(r=o),h+=t.slice(f,s).replace(Me,F),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+e.length,e}),h+="';\n";var v=n.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ne,""):h).replace(re,"$1").replace(oe,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Wf(function(){return Function(s,p+"return "+h).apply(J,c)});if(y.source=h,Pa(y))throw y;return y}function rs(t){return hu(t).toLowerCase()}function os(t){return hu(t).toUpperCase()}function is(t,e,n){if(t=hu(t),!t)return t;if(n||e===J)return t.replace(ge,"");if(e+="",!e)return t;var r=Z(t),o=Z(e);return r.slice(C(r,o),P(r,o)+1).join("")}function as(t,e,n){if(t=hu(t),!t)return t;if(n||e===J)return t.replace(be,"");if(e+="",!e)return t;var r=Z(t);return r.slice(0,P(r,Z(e))+1).join("")}function us(t,e,n){if(t=hu(t),!t)return t;if(n||e===J)return t.replace(me,"");if(e+="",!e)return t;var r=Z(t);return r.slice(C(r,Z(e))).join("")}function ss(t,e){var n=ht,r=dt;if(La(e)){var o="separator"in e?e.separator:o;n="length"in e?uu(e.length):n,r="omission"in e?hu(e.omission):r}t=hu(t);var i=t.length;if(vn.test(t)){var a=Z(t);i=a.length}if(n>=i)return t;var u=n-H(r);if(1>u)return r;var s=a?a.slice(0,u).join(""):t.slice(0,u);if(o===J)return s+r;if(a&&(u+=s.length-u),Za(o)){if(t.slice(u).search(o)){var c,f=s;for(o.global||(o=zs(o.source,hu(Ee.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var l=c.index;s=s.slice(0,l===J?u:l)}}else if(t.indexOf(o,u)!=u){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+r}function cs(t){return t=hu(t),t&&ue.test(t)?t.replace(ie,Y):t}function fs(t,e,n){return t=hu(t),e=n?J:e,e===J&&(e=mn.test(t)?gn:yn),t.match(e)||[]}function ls(t){var e=t?t.length:0,n=lo();return t=e?y(t,function(t){if("function"!=typeof t[1])throw new Fs(wt);return[n(t[0]),t[1]]}):[],fa(function(n){for(var r=-1;++r<e;){var o=t[r];if(u(o[0],this,n))return u(o[1],this,n)}})}function hs(t){return On(An(t,!0))}function ds(t){return function(){return t}}function ps(t){return t}function vs(t){return Jn("function"==typeof t?t:An(t,!0))}function ys(t){return nr(An(t,!0))}function gs(t,e){return rr(t,An(e,!0))}function ms(t,e,n){var r=Ou(e),o=Vn(e,r);null!=n||La(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Vn(e,Ou(e)));var i=La(n)&&"chain"in n?n.chain:!0,a=Da(t);return f(o,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=Lr(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function bs(){return Gn._===this&&(Gn._=Hs),this}function ws(){}function _s(t){return t=uu(t),function(){return arguments[t]}}function Es(t){return Ao(t)?cr(t):fr(t)}function xs(t){return function(e){return null==t?J:Nn(t,e)}}function As(t,e){if(t=uu(t),1>t||t>xt)return[];var n=jt,r=vc(t,jt);e=hn(e),t-=jt;for(var o=I(r,e);++n<t;)e(n);return o}function Os(t){return Ef(t)?y(t,String):Po(t)}function js(t){var e=++qs;return hu(t)+e}function ks(t,e){var n;return t===J&&e===J?0:(t!==J&&(n=t),e!==J&&(n=n===J?e:n+e),n)}function Is(t){return t&&t.length?_(t,ps,_a):J}function Ts(t,e){return t&&t.length?_(t,lo(e),_a):J}function Ss(t){return Bs(t)/(t?t.length:0)}function Ms(t){return t&&t.length?_(t,ps,ou):J}function Cs(t,e){return t&&t.length?_(t,lo(e),ou):J}function Ps(t,e){var n;return t===J&&e===J?0:(t!==J&&(n=t),e!==J&&(n=n===J?e:n-e),n)}function Bs(t){return t&&t.length?k(t,ps):0}function Ds(t,e){return t&&t.length?k(t,lo(e)):0}t=t?Ln.defaults({},t,Ln.pick(Gn,bn)):Gn;var Rs=t.Date,Gs=t.Error,Ls=t.Math,zs=t.RegExp,Fs=t.TypeError,Vs=t.Array.prototype,Ns=t.Object.prototype,Us=t.Function.prototype.toString,$s=Ns.hasOwnProperty,qs=0,Ws=Us.call(Object),Ks=Ns.toString,Hs=Gn._,Zs=zs("^"+Us.call($s).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ys=Cn?t.Buffer:J,Xs=t.Reflect,Js=t.Symbol,Qs=t.Uint8Array,tc=t.clearTimeout,ec=Xs?Xs.enumerate:J,nc=Object.getPrototypeOf,rc=Object.getOwnPropertySymbols,oc="symbol"==typeof(oc=Js&&Js.iterator)?oc:J,ic=Object.create,ac=Ns.propertyIsEnumerable,uc=t.setTimeout,sc=Vs.splice,cc=Ls.ceil,fc=Ls.floor,lc=t.isFinite,hc=Vs.join,dc=Object.keys,pc=Ls.max,vc=Ls.min,yc=t.parseInt,gc=Ls.random,mc=Vs.reverse,bc=po(t,"Map"),wc=po(t,"Set"),_c=po(t,"WeakMap"),Ec=po(Object,"create"),xc=_c&&new _c,Ac=bc?Us.call(bc):"",Oc=wc?Us.call(wc):"",jc=_c?Us.call(_c):"",kc=Js?Js.prototype:J,Ic=Js?kc.valueOf:J,Tc=Js?kc.toString:J,Sc={};e.templateSettings={escape:ce,evaluate:fe,interpolate:le,variable:"",imports:{_:e}};var Mc=$r(zn),Cc=$r(Fn,!0),Pc=qr(),Bc=qr(!0);ec&&!ac.call({valueOf:1},"valueOf")&&(tr=function(t){return $(ec(t))});var Dc=xc?function(t,e){return xc.set(t,e),t}:ps,Rc=wc&&2===new wc([1,2]).size?function(t){return new wc(t)}:ws,Gc=xc?function(t){return xc.get(t)}:ws,Lc=cr("length"),zc=rc||function(){return[]};(bc&&yo(new bc)!=Gt||wc&&yo(new wc)!=Vt||_c&&yo(new _c)!=$t)&&(yo=function(t){var e=Ks.call(t),n=e==zt?t.constructor:null,r="function"==typeof n?Us.call(n):"";if(r)switch(r){case Ac:return Gt;case Oc:return Vt;case jc:return $t}return e});var Fc=function(){var t=0,e=0;return function(n,r){var o=df(),i=vt-(o-e);if(e=o,i>0){if(++t>=pt)return n}else t=0;return Dc(n,r)}}(),Vc=fa(function(t,e){return Ef(t)||(t=null==t?[]:[Object(t)]),e=Dn(e,1),c(t,e)}),Nc=fa(function(t,e){return ja(t)?Sn(t,Dn(e,1,!0)):[]}),Uc=fa(function(t,e){var n=Jo(e);return ja(n)&&(n=J),ja(t)?Sn(t,Dn(e,1,!0),lo(n)):[]}),$c=fa(function(t,e){var n=Jo(e);return ja(n)&&(n=J),ja(t)?Sn(t,Dn(e,1,!0),J,n):[]}),qc=fa(function(t){var e=y(t,ln);return e.length&&e[0]===t[0]?Wn(e):[]}),Wc=fa(function(t){var e=Jo(t),n=y(t,ln);return e===Jo(n)?e=J:n.pop(),n.length&&n[0]===t[0]?Wn(n,lo(e)):[]}),Kc=fa(function(t){var e=Jo(t),n=y(t,ln);return e===Jo(n)?e=J:n.pop(),n.length&&n[0]===t[0]?Wn(n,J,e):[]}),Hc=fa(ti),Zc=fa(function(t,e){e=y(Dn(e,1),String);var n=fn(t,e);return dr(t,e.sort(D)),n}),Yc=fa(function(t){return xr(Dn(t,1,!0))}),Xc=fa(function(t){var e=Jo(t);return ja(e)&&(e=J),xr(Dn(t,1,!0),lo(e))}),Jc=fa(function(t){var e=Jo(t);return ja(e)&&(e=J),xr(Dn(t,1,!0),J,e)}),Qc=fa(function(t,e){return ja(t)?Sn(t,e):[]}),tf=fa(function(t){return kr(d(t,ja))}),ef=fa(function(t){var e=Jo(t);return ja(e)&&(e=J),kr(d(t,ja),lo(e))}),nf=fa(function(t){var e=Jo(t);return ja(e)&&(e=J),kr(d(t,ja),J,e)}),rf=fa(_i),of=fa(function(t){var e=t.length,n=e>1?t[e-1]:J;return n="function"==typeof n?(t.pop(),n):J,Ei(t,n)}),af=fa(function(t){t=Dn(t,1);var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return fn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof o&&U(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:ki,args:[a],thisArg:J}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(J),t})):this.thru(a)}),uf=Nr(function(t,e,n){$s.call(t,n)?++t[n]:t[n]=1}),sf=Nr(function(t,e,n){$s.call(t,n)?t[n].push(e):t[n]=[e]}),cf=fa(function(t,e,n){var r=-1,o="function"==typeof e,i=Ao(e),a=Oa(t)?Array(t.length):[];return Mc(t,function(t){var s=o?e:i&&null!=t?t[e]:J;a[++r]=s?u(s,t,n):Hn(t,e,n)}),a}),ff=Nr(function(t,e,n){t[n]=e}),lf=Nr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),hf=fa(function(t,e){if(null==t)return[];var n=e.length;return n>1&&xo(t,e[0],e[1])?e=[]:n>2&&xo(e[0],e[1],e[2])&&(e.length=1),ar(t,Dn(e,1),[])}),df=Rs.now,pf=fa(function(t,e,n){var r=tt;if(n.length){var o=W(n,vo(pf));r|=it}return ao(t,r,e,n,o)}),vf=fa(function(t,e,n){var r=tt|et;
if(n.length){var o=W(n,vo(vf));r|=it}return ao(e,r,t,n,o)}),yf=fa(function(t,e){return kn(t,1,e)}),gf=fa(function(t,e,n){return kn(t,cu(e)||0,n)}),mf=fa(function(t,e){e=y(Dn(e,1),lo());var n=e.length;return fa(function(r){for(var o=-1,i=vc(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return u(t,this,r)})}),bf=fa(function(t,e){var n=W(e,vo(bf));return ao(t,it,J,e,n)}),wf=fa(function(t,e){var n=W(e,vo(wf));return ao(t,at,J,e,n)}),_f=fa(function(t,e){return ao(t,st,J,J,J,Dn(e,1))}),Ef=Array.isArray,xf=Ys?function(t){return t instanceof Ys}:ds(!1),Af=Ur(function(t,e){zr(e,Ou(e),t)}),Of=Ur(function(t,e){zr(e,ju(e),t)}),jf=Ur(function(t,e,n,r){Fr(e,ju(e),t,r)}),kf=Ur(function(t,e,n,r){Fr(e,Ou(e),t,r)}),If=fa(function(t,e){return fn(t,Dn(e,1))}),Tf=fa(function(t){return t.push(J,on),u(jf,J,t)}),Sf=fa(function(t){return t.push(J,So),u(Df,J,t)}),Mf=Qr(function(t,e,n){t[e]=n},ds(ps)),Cf=Qr(function(t,e,n){$s.call(t,e)?t[e].push(n):t[e]=[n]},lo),Pf=fa(Hn),Bf=Ur(function(t,e,n){or(t,e,n)}),Df=Ur(function(t,e,n,r){or(t,e,n,r)}),Rf=fa(function(t,e){return null==t?{}:(e=y(Dn(e,1),String),ur(t,Sn(ju(t),e)))}),Gf=fa(function(t,e){return null==t?{}:ur(t,Dn(e,1))}),Lf=Hr(function(t,e,n){return e=e.toLowerCase(),t+(n?Uu(e):e)}),zf=Hr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ff=Hr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Vf=Kr("toLowerCase"),Nf=Kr("toUpperCase"),Uf=Hr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),$f=Hr(function(t,e,n){return t+(n?" ":"")+Uu(e)}),qf=Hr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Wf=fa(function(t,e){try{return u(t,J,e)}catch(n){return Pa(n)?n:new Gs(n)}}),Kf=fa(function(t,e){return f(Dn(e,1),function(e){t[e]=pf(t[e],t)}),t}),Hf=Xr(),Zf=Xr(!0),Yf=fa(function(t,e){return function(n){return Hn(n,t,e)}}),Xf=fa(function(t,e){return function(n){return Hn(t,n,e)}}),Jf=to(y),Qf=to(h),tl=to(w),el=ro(),nl=ro(!0),rl=io("ceil"),ol=io("floor"),il=io("round");return e.prototype=n.prototype,r.prototype=jn(n.prototype),r.prototype.constructor=r,o.prototype=jn(n.prototype),o.prototype.constructor=o,Pe.prototype=Ec?Ec(null):Ns,Le.prototype.clear=ze,Le.prototype["delete"]=Fe,Le.prototype.get=Ve,Le.prototype.has=Ne,Le.prototype.set=Ue,$e.prototype.push=We,Ke.prototype.clear=He,Ke.prototype["delete"]=Ze,Ke.prototype.get=Ye,Ke.prototype.has=Xe,Ke.prototype.set=Je,ua.Cache=Le,e.after=ta,e.ary=ea,e.assign=Af,e.assignIn=Of,e.assignInWith=jf,e.assignWith=kf,e.at=If,e.before=na,e.bind=pf,e.bindAll=Kf,e.bindKey=vf,e.castArray=va,e.chain=Oi,e.chunk=Do,e.compact=Ro,e.concat=Vc,e.cond=ls,e.conforms=hs,e.constant=ds,e.countBy=uf,e.create=du,e.curry=ra,e.curryRight=oa,e.debounce=ia,e.defaults=Tf,e.defaultsDeep=Sf,e.defer=yf,e.delay=gf,e.difference=Nc,e.differenceBy=Uc,e.differenceWith=$c,e.drop=Go,e.dropRight=Lo,e.dropRightWhile=zo,e.dropWhile=Fo,e.fill=Vo,e.filter=Gi,e.flatMap=Fi,e.flatten=$o,e.flattenDeep=qo,e.flattenDepth=Wo,e.flip=aa,e.flow=Hf,e.flowRight=Zf,e.fromPairs=Ko,e.functions=wu,e.functionsIn=_u,e.groupBy=sf,e.initial=Yo,e.intersection=qc,e.intersectionBy=Wc,e.intersectionWith=Kc,e.invert=Mf,e.invertBy=Cf,e.invokeMap=cf,e.iteratee=vs,e.keyBy=ff,e.keys=Ou,e.keysIn=ju,e.map=$i,e.mapKeys=ku,e.mapValues=Iu,e.matches=ys,e.matchesProperty=gs,e.memoize=ua,e.merge=Bf,e.mergeWith=Df,e.method=Yf,e.methodOf=Xf,e.mixin=ms,e.negate=sa,e.nthArg=_s,e.omit=Rf,e.omitBy=Tu,e.once=ca,e.orderBy=qi,e.over=Jf,e.overArgs=mf,e.overEvery=Qf,e.overSome=tl,e.partial=bf,e.partialRight=wf,e.partition=lf,e.pick=Gf,e.pickBy=Su,e.property=Es,e.propertyOf=xs,e.pull=Hc,e.pullAll=ti,e.pullAllBy=ei,e.pullAt=Zc,e.range=el,e.rangeRight=nl,e.rearg=_f,e.reject=Hi,e.remove=ni,e.rest=fa,e.reverse=ri,e.sampleSize=Yi,e.set=Cu,e.setWith=Pu,e.shuffle=Xi,e.slice=oi,e.sortBy=hf,e.sortedUniq=li,e.sortedUniqBy=hi,e.split=ts,e.spread=la,e.tail=di,e.take=pi,e.takeRight=vi,e.takeRightWhile=yi,e.takeWhile=gi,e.tap=ji,e.throttle=ha,e.thru=ki,e.toArray=au,e.toPairs=Bu,e.toPairsIn=Du,e.toPath=Os,e.toPlainObject=fu,e.transform=Ru,e.unary=da,e.union=Yc,e.unionBy=Xc,e.unionWith=Jc,e.uniq=mi,e.uniqBy=bi,e.uniqWith=wi,e.unset=Gu,e.unzip=_i,e.unzipWith=Ei,e.values=Lu,e.valuesIn=zu,e.without=Qc,e.words=fs,e.wrap=pa,e.xor=tf,e.xorBy=ef,e.xorWith=nf,e.zip=rf,e.zipObject=xi,e.zipObjectDeep=Ai,e.zipWith=of,e.extend=Of,e.extendWith=jf,ms(e,e),e.add=ks,e.attempt=Wf,e.camelCase=Lf,e.capitalize=Uu,e.ceil=rl,e.clamp=Fu,e.clone=ya,e.cloneDeep=ma,e.cloneDeepWith=ba,e.cloneWith=ga,e.deburr=$u,e.endsWith=qu,e.eq=wa,e.escape=Wu,e.escapeRegExp=Ku,e.every=Ri,e.find=Li,e.findIndex=No,e.findKey=pu,e.findLast=zi,e.findLastIndex=Uo,e.findLastKey=vu,e.floor=ol,e.forEach=Vi,e.forEachRight=Ni,e.forIn=yu,e.forInRight=gu,e.forOwn=mu,e.forOwnRight=bu,e.get=Eu,e.gt=_a,e.gte=Ea,e.has=xu,e.hasIn=Au,e.head=Ho,e.identity=ps,e.includes=Ui,e.indexOf=Zo,e.inRange=Vu,e.invoke=Pf,e.isArguments=xa,e.isArray=Ef,e.isArrayBuffer=Aa,e.isArrayLike=Oa,e.isArrayLikeObject=ja,e.isBoolean=ka,e.isBuffer=xf,e.isDate=Ia,e.isElement=Ta,e.isEmpty=Sa,e.isEqual=Ma,e.isEqualWith=Ca,e.isError=Pa,e.isFinite=Ba,e.isFunction=Da,e.isInteger=Ra,e.isLength=Ga,e.isMap=Fa,e.isMatch=Va,e.isMatchWith=Na,e.isNaN=Ua,e.isNative=$a,e.isNil=Wa,e.isNull=qa,e.isNumber=Ka,e.isObject=La,e.isObjectLike=za,e.isPlainObject=Ha,e.isRegExp=Za,e.isSafeInteger=Ya,e.isSet=Xa,e.isString=Ja,e.isSymbol=Qa,e.isTypedArray=tu,e.isUndefined=eu,e.isWeakMap=nu,e.isWeakSet=ru,e.join=Xo,e.kebabCase=zf,e.last=Jo,e.lastIndexOf=Qo,e.lowerCase=Ff,e.lowerFirst=Vf,e.lt=ou,e.lte=iu,e.max=Is,e.maxBy=Ts,e.mean=Ss,e.min=Ms,e.minBy=Cs,e.noConflict=bs,e.noop=ws,e.now=df,e.pad=Hu,e.padEnd=Zu,e.padStart=Yu,e.parseInt=Xu,e.random=Nu,e.reduce=Wi,e.reduceRight=Ki,e.repeat=Ju,e.replace=Qu,e.result=Mu,e.round=il,e.runInContext=X,e.sample=Zi,e.size=Ji,e.snakeCase=Uf,e.some=Qi,e.sortedIndex=ii,e.sortedIndexBy=ai,e.sortedIndexOf=ui,e.sortedLastIndex=si,e.sortedLastIndexBy=ci,e.sortedLastIndexOf=fi,e.startCase=$f,e.startsWith=es,e.subtract=Ps,e.sum=Bs,e.sumBy=Ds,e.template=ns,e.times=As,e.toInteger=uu,e.toLength=su,e.toLower=rs,e.toNumber=cu,e.toSafeInteger=lu,e.toString=hu,e.toUpper=os,e.trim=is,e.trimEnd=as,e.trimStart=us,e.truncate=ss,e.unescape=cs,e.uniqueId=js,e.upperCase=qf,e.upperFirst=Nf,e.each=Vi,e.eachRight=Ni,e.first=Ho,ms(e,function(){var t={};return zn(e,function(n,r){$s.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=Q,f(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),f(["drop","take"],function(t,e){o.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new o(this);n=n===J?1:pc(uu(n),0);var i=this.clone();return r?i.__takeCount__=vc(n,i.__takeCount__):i.__views__.push({size:vc(n,jt),type:t+(i.__dir__<0?"Right":"")}),i},o.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),f(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==gt||n==bt;o.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),f(["head","last"],function(t,e){var n="take"+(e?"Right":"");o.prototype[t]=function(){return this[n](1).value()[0]}}),f(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");o.prototype[t]=function(){return this.__filtered__?new o(this):this[n](1)}}),o.prototype.compact=function(){return this.filter(ps)},o.prototype.find=function(t){return this.filter(t).head()},o.prototype.findLast=function(t){return this.reverse().find(t)},o.prototype.invokeMap=fa(function(t,e){return"function"==typeof t?new o(this):this.map(function(n){return Hn(n,t,e)})}),o.prototype.reject=function(t){return t=lo(t,3),this.filter(function(e){return!t(e)})},o.prototype.slice=function(t,e){t=uu(t);var n=this;return n.__filtered__&&(t>0||0>e)?new o(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==J&&(e=uu(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},o.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},o.prototype.toArray=function(){return this.take(jt)},zn(o.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),a=/^(?:head|last)$/.test(n),u=e[a?"take"+("last"==n?"Right":""):n],s=a||/^find/.test(n);u&&(e.prototype[n]=function(){var n=this.__wrapped__,c=a?[1]:arguments,f=n instanceof o,l=c[0],h=f||Ef(n),d=function(t){var n=u.apply(e,g([t],c));return a&&p?n[0]:n};h&&i&&"function"==typeof l&&1!=l.length&&(f=h=!1);var p=this.__chain__,v=!!this.__actions__.length,y=s&&!p,m=f&&!v;if(!s&&h){n=m?n:new o(this);var b=t.apply(n,c);return b.__actions__.push({func:ki,args:[d],thisArg:J}),new r(b,p)}return y&&m?t.apply(this,c):(b=this.thru(d),y?a?b.value()[0]:b.value():b)})}),f(["pop","push","shift","sort","splice","unshift"],function(t){var n=Vs[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return o&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),zn(o.prototype,function(t,n){var r=e[n];if(r){var o=r.name+"",i=Sc[o]||(Sc[o]=[]);i.push({name:n,func:r})}}),Sc[Jr(J,et).name]=[{name:"wrapper",func:J}],o.prototype.clone=B,o.prototype.reverse=Ie,o.prototype.value=Ce,e.prototype.at=af,e.prototype.chain=Ii,e.prototype.commit=Ti,e.prototype.flatMap=Si,e.prototype.next=Mi,e.prototype.plant=Pi,e.prototype.reverse=Bi,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Di,oc&&(e.prototype[oc]=Ci),e}var J,Q="4.5.1",tt=1,et=2,nt=4,rt=8,ot=16,it=32,at=64,ut=128,st=256,ct=512,ft=1,lt=2,ht=30,dt="...",pt=150,vt=16,yt=200,gt=1,mt=2,bt=3,wt="Expected a function",_t="__lodash_hash_undefined__",Et=1/0,xt=9007199254740991,At=1.7976931348623157e308,Ot=NaN,jt=4294967295,kt=jt-1,It=jt>>>1,Tt="__lodash_placeholder__",St="[object Arguments]",Mt="[object Array]",Ct="[object Boolean]",Pt="[object Date]",Bt="[object Error]",Dt="[object Function]",Rt="[object GeneratorFunction]",Gt="[object Map]",Lt="[object Number]",zt="[object Object]",Ft="[object RegExp]",Vt="[object Set]",Nt="[object String]",Ut="[object Symbol]",$t="[object WeakMap]",qt="[object WeakSet]",Wt="[object ArrayBuffer]",Kt="[object Float32Array]",Ht="[object Float64Array]",Zt="[object Int8Array]",Yt="[object Int16Array]",Xt="[object Int32Array]",Jt="[object Uint8Array]",Qt="[object Uint8ClampedArray]",te="[object Uint16Array]",ee="[object Uint32Array]",ne=/\b__p \+= '';/g,re=/\b(__p \+=) '' \+/g,oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39|#96);/g,ae=/[&<>"'`]/g,ue=RegExp(ie.source),se=RegExp(ae.source),ce=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,le=/<%=([\s\S]+?)%>/g,he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/,pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ve=/[\\^$.*+?()[\]{}|]/g,ye=RegExp(ve.source),ge=/^\s+|\s+$/g,me=/^\s+/,be=/\s+$/,we=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,xe=/^0x/i,Ae=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,ke=/^0o[0-7]+$/i,Ie=/^(?:0|[1-9]\d*)$/,Te=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Se=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",Pe="\\u0300-\\u036f\\ufe20-\\ufe23",Be="\\u20d0-\\u20f0",De="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Ge="\\xac\\xb1\\xd7\\xf7",Le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ze="\\u2018\\u2019\\u201c\\u201d",Fe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ve="A-Z\\xc0-\\xd6\\xd8-\\xde",Ne="\\ufe0e\\ufe0f",Ue=Ge+Le+ze+Fe,$e="["+Ce+"]",qe="["+Ue+"]",We="["+Pe+Be+"]",Ke="\\d+",He="["+De+"]",Ze="["+Re+"]",Ye="[^"+Ce+Ue+Ke+De+Re+Ve+"]",Xe="\\ud83c[\\udffb-\\udfff]",Je="(?:"+We+"|"+Xe+")",Qe="[^"+Ce+"]",tn="(?:\\ud83c[\\udde6-\\uddff]){2}",en="[\\ud800-\\udbff][\\udc00-\\udfff]",nn="["+Ve+"]",rn="\\u200d",on="(?:"+Ze+"|"+Ye+")",an="(?:"+nn+"|"+Ye+")",un=Je+"?",sn="["+Ne+"]?",cn="(?:"+rn+"(?:"+[Qe,tn,en].join("|")+")"+sn+un+")*",fn=sn+un+cn,ln="(?:"+[He,tn,en].join("|")+")"+fn,hn="(?:"+[Qe+We+"?",We,tn,en,$e].join("|")+")",dn=RegExp(We,"g"),pn=RegExp(Xe+"(?="+Xe+")|"+hn+fn,"g"),vn=RegExp("["+rn+Ce+Pe+Be+Ne+"]"),yn=/[a-zA-Z0-9]+/g,gn=RegExp([nn+"?"+Ze+"+(?="+[qe,nn,"$"].join("|")+")",an+"+(?="+[qe,nn+on,"$"].join("|")+")",nn+"?"+on+"+",nn+"+",Ke,ln].join("|"),"g"),mn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bn=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wn=-1,_n={};_n[Kt]=_n[Ht]=_n[Zt]=_n[Yt]=_n[Xt]=_n[Jt]=_n[Qt]=_n[te]=_n[ee]=!0,_n[St]=_n[Mt]=_n[Wt]=_n[Ct]=_n[Pt]=_n[Bt]=_n[Dt]=_n[Gt]=_n[Lt]=_n[zt]=_n[Ft]=_n[Vt]=_n[Nt]=_n[$t]=!1;var En={};En[St]=En[Mt]=En[Wt]=En[Ct]=En[Pt]=En[Kt]=En[Ht]=En[Zt]=En[Yt]=En[Xt]=En[Gt]=En[Lt]=En[zt]=En[Ft]=En[Vt]=En[Nt]=En[Ut]=En[Jt]=En[Qt]=En[te]=En[ee]=!0,En[Bt]=En[Dt]=En[$t]=!1;var xn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},An={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},On={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},jn={"function":!0,object:!0},kn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},In=parseFloat,Tn=parseInt,Sn=jn[typeof e]&&e&&!e.nodeType?e:J,Mn=jn[typeof t]&&t&&!t.nodeType?t:J,Cn=Mn&&Mn.exports===Sn?Sn:J,Pn=B(Sn&&Mn&&"object"==typeof o&&o),Bn=B(jn[typeof self]&&self),Dn=B(jn[typeof window]&&window),Rn=B(jn[typeof this]&&this),Gn=Pn||Dn!==(Rn&&Rn.window)&&Dn||Bn||Rn||Function("return this")(),Ln=X();(Dn||Bn||{})._=Ln,r=function(){return Ln}.call(e,n,e,t),!(r!==J&&(t.exports=r))}).call(this)}).call(e,n(80)(t),function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=(0,f["default"])({memoize:!1},e);var n=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=r,a=["memoized",i],u=d.get(t,i);if(u)return u;if(e.memoize){var c=d.get(t,a);if(c)return s["default"].resolve(c)}var f=function(){d.del(t,i)},l=t.apply(this,r),h=l.then(function(n){return e.memoize&&d.set(t,a,n),f(),n},function(t){throw f(),t});return d.set(t,i,h),h};return n.__reusePromise__origFn=t,n.__reusePromise__clear=function(){o.clear(t)},n}function i(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];void 0==t?d.clear():d.del(t.__reusePromise__origFn||t)}function a(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e,n,r){return r.value=o(r.value,t),r}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(57),s=r(u),c=n(53),f=r(c),l=n(2),h=r(l);e["default"]=o,e.clear=i,e.decorator=a;var d=function(){function t(t){return(0,h["default"])(t)}function e(t,e,n){return t[u]==e&&t[s]==n}function n(t,n){for(var r=0,o=f.length;o>r;r++){var i=f[r];if(e(i,t,n))return r}return-1}function r(e,r){var o=t(r),i=n(e,o);return f[i]?f[i][c]:null}function o(e,r,o){var i=t(r),a=n(e,i);if(a>-1)f[a][c]=o;else{var l=[];l[u]=e,l[s]=i,l[c]=o,f.push(l)}return o}function i(e,r){if(void 0===r)for(var o=f.length-1;o>=0;o--){var i=f[o];i[u]==e&&f.splice(o,1)}else{var a=t(r),o=n(e,a);o>-1&&f.splice(o,1)}}function a(){f.length=0}var u=0,s=1,c=2,f=[];return{get:r,set:o,del:i,clear:a}}();a.clear=i,o.clear=i},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,s=0;o>s;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=a;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={Roster:n(122),Users:n(124),Groups:n(125),Organizations:n(126),Messages:n(127),Metadata:n(129)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(108),g=r(y),m=n(88),b=r(m),w=n(89),_=r(w),E=n(111),x=r(E),A=n(112),O=r(A),j=n(123),k=r(j),I=n(118),T=r(I),S=["user","distributionList"],M=function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,_["default"])(e,[{key:"findAll",value:function(){var t=(0,v["default"])(d["default"].mark(function e(){var t;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpClient.get("/roster");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n,r){var a,u;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:if(T["default"].includes(S,t)){e.next=14;break}return e.abrupt("return");case 14:return a={},r&&(a["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),e.next=19,this.httpClient.post("/roster",{headers:a,data:{entity:n,type:u}});case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n,r){var a,u;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:if(T["default"].includes(S,t)){e.next=14;break}return e.abrupt("return");case 14:return a={},r&&(a["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),e.next=19,this.httpClient.del("/roster/:counterPartyId",{headers:a,urlParams:{counterPartyId:n},data:{type:u}});case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(k["default"]);e["default"]=M,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(53),i=r(o),a=n(88),u=r(a),s=n(120),c=r(s),f=function l(t,e){(0,u["default"])(this,l),(0,i["default"])(this,e),this.config=t.config,this.host=t,this.httpClient=t.httpClient};e["default"]=f,(0,i["default"])(f.prototype,c["default"].prototype),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(108),g=r(y),m=n(88),b=r(m),w=n(89),_=r(w),E=n(111),x=r(E),A=n(112),O=r(A),j=n(123),k=r(j),I=n(118),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,_["default"])(e,[{key:"find",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){var n;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/user/:id",{urlParams:{id:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(108),g=r(y),m=n(88),b=r(m),w=n(89),_=r(w),E=n(111),x=r(E),A=n(112),O=r(A),j=n(123),k=r(j),I=n(118),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,_["default"])(e,[{key:"create",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){var n,r,o,i,a,u,s=t.name,c=(t.avatarFile,t.replayHistory),f=void 0===c?!0:c,l=t.memberIds,h=void 0===l?[]:l,p=t.organizationId;return d["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},p&&(n["TT-X-Organization-Key"]=p),r={name:s,replay_history:f,members:h},t.next=5,this.httpClient.post("/group",{headers:n,data:r});case 5:return o=t.sent,i=o.getHeader("TT-X-Group-Token"),a=o.getHeader("TT-X-Group-Avatar"),u={id:i,avatarUrl:a,name:s,memberIds:h,organizationId:p},t.abrupt("return",u);case 10:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n){var r,o,i=n.name,a=void 0===i?void 0:i,u=(n.avatarFile,n.replayHistory),s=void 0===u?void 0:u,c=n.memberIds,f=void 0===c?[]:c;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"undefined"!=typeof a&&(r.name=a),"undefined"!=typeof f&&(r.members=f),"undefined"!=typeof s&&(r.replay_history=s),e.next=6,this.httpClient.post("/group/:id",{urlParams:{id:t},data:r});case 6:return o=e.sent,e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){var n;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/group/:id",{urlParams:{
id:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.del("/group/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status&&403!=e.t0.response.status){e.next=16;break}return e.abrupt("return",!1);case 16:throw e.t0;case 17:case"end":return e.stop()}},e,this,[[4,10]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(108),g=r(y),m=n(88),b=r(m),w=n(89),_=r(w),E=n(111),x=r(E),A=n(112),O=r(A),j=n(123),k=r(j),I=n(118),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,_["default"])(e,[{key:"find",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n){var r;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.prev=8,e.next=11,this.httpClient.get("/user/:userId/organization/:id",{urlParams:{userId:t,id:n}});case 11:return r=e.sent,e.abrupt("return",r.data);case 15:if(e.prev=15,e.t0=e["catch"](8),!e.t0.response||404!=e.t0.response.status){e.next=21;break}return e.abrupt("return",null);case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[8,15]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findAllOfUser",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){var n;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/user/:userId/organization",{urlParams:{userId:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,c["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,u["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,d["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,c["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,u["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,d["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(5),u=r(a),s=n(16),c=r(s),f=n(78),l=r(f),h=n(2),d=r(h),p=n(128),v=r(p),y=n(87),g=r(y),m=n(108),b=r(m),w=n(88),_=r(w),E=n(89),x=r(E),A=n(111),O=r(A),j=n(112),k=r(j),I=n(123),T=r(I),S=function(t){function e(){return(0,_["default"])(this,e),(0,O["default"])(this,(0,b["default"])(e).apply(this,arguments))}return(0,k["default"])(e,t),(0,x["default"])(e,[{key:"send",value:function(){var t=(0,g["default"])(l["default"].mark(function e(t){var n,r,o,i=t.counterPartyId,a=t.body,u=t.senderOrganizationId,s=t.recipientOrganizationId,c=t.metadata,f=t.localId;return l["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s||(s=u),n={recipient:i,body:a},c&&(n.data=c.map(function(t){return(0,v["default"])({},t,{payload:(0,d["default"])(t.payload)})})),u&&(n.sender_organization=u),s&&(n.recipient_organization=s),t.prev=5,t.next=8,this.httpClient.post("/message",{data:n,requestId:f});case 8:return r=t.sent,o={serverId:r.getHeader("TT-X-Message-Id"),ttl:r.getHeader("TT-X-Msg-Ttl")},t.abrupt("return",o);case 13:throw t.prev=13,t.t0=t["catch"](5),t.t0;case 16:case"end":return t.stop()}},e,this,[[5,13]])}));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,g["default"])(l["default"].mark(function e(t){return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.del("/message/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,this,[[4,10]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(T["default"]);e["default"]=S,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(53),i=r(o);e["default"]=i["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(108),g=r(y),m=n(88),b=r(m),w=n(89),_=r(w),E=n(111),x=r(E),A=n(112),O=r(A),j=n(123),k=r(j),I=n(118),T=r(I),S=function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,_["default"])(e,[{key:"update",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n,r){return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:return e.next=14,this.httpClient.post("/metadata/:id",{urlParams:{id:t},data:n,headers:{"TT-X-Organization-Key":r}});case 14:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n){var r;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.next=10,this.httpClient.get("/metadata/:id",{urlParams:{id:t},headers:{"TT-X-Organization-Key":n}});case 10:return r=e.sent,e.abrupt("return",r.data);case 12:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findMulti",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t,n){var r,a;return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=6;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.next=10,this.httpClient.post("/metadata_bulk",{data:{entities:t},headers:{"TT-X-Organization-Key":n}});case 10:return r=e.sent,a=T["default"].zipObject(t,r.data),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(k["default"]);e["default"]=S,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={Users:n(131),EventRouter:n(137),Events:n(139),Messages:n(173),Groups:n(205),Organizations:n(206),Conversations:n(213),Presence:n(214),Metadata:n(215),Search:n(224)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,d["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,l["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,d["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,l["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f=n(2),l=r(f),h=n(5),d=r(h),p=n(16),v=r(p),y=n(132),g=r(y),m=n(57),b=r(m),w=n(78),_=r(w),E=n(87),x=r(E),A=n(108),O=r(A),j=n(88),k=r(j),I=n(89),T=r(I),S=n(111),M=r(S),C=n(112),P=r(C),B=n(101),D=r(B),R=n(118),G=r(R),L=n(135),z=r(L),F=n(136),V=r(F),N=n(106),U=r(N),$=n(119),q=new z["default"].MD5,W=(u=(0,$.decorator)(),s=(0,$.decorator)(),c=function(t){function e(){return(0,k["default"])(this,e),(0,M["default"])(this,(0,O["default"])(e).apply(this,arguments))}return(0,P["default"])(e,t),(0,T["default"])(e,[{key:"signIn",value:function(){var t=(0,x["default"])(_["default"].mark(function e(t,n){var r,o,u,s,c,f=arguments.length<=2||void 0===arguments[2]?{udid:void 0}:arguments[2];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return r={Authorization:this.getSignInAuthHeader(t,n)},o={user_id:t,password:n,push_routing:this.config.pushAgent,version:this.config.clientVersion,device_id:f.udid},e.next=12,this.httpClient.post("/login",{headers:r,data:o});case 12:return u=e.sent,s=this.host.models.User.inject(u.data.user),c=u.data.auth,e.abrupt("return",{user:s,auth:c});case 16:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getSignInAuthHeader",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return this.constructor.getSignInAuthHeader(this.config.productKey,t,e)}},{key:"signUp",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){var t,n,r,o,i,a,u,s,c,f,l,h,d,p,v,y=arguments.length<=0||void 0===arguments[0]?{udid:void 0,email:void 0,password:void 0,countryCode:void 0,version:void 0}:arguments[0];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.signUpHashKey,n=this.config.signUpHashSalt,r=y.udid,o=[t,n,r].join(":"),i=q.hex(o),a=[i.substr(0,2),i.substr(i.length-2)].join(""),u=[this.config.productKey,t,n,r,a].join(":"),s=(0,D["default"])(u),c="XMPP-Anonymous "+s,f={Authorization:c},l={primary_email:y.email,unique_id:y.email,password:y.password,push_routing:this.config.pushAgent,product:this.config.productKey,country_code:y.countryCode,device_id:y.udid,version:this.config.clientVersion},e.next=13,this.httpClient.post("/signup",{headers:f,data:l});case 13:return h=e.sent,d=this.host.models.User.inject(h.data.user),p=h.data.auth,v={user:d,auth:p},this.host.emit("signUp",v),e.abrupt("return",v);case 19:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"signOut",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){return _["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpClient.post("/logout"));case 1:case"end":return t.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"me",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){return _["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.host.isSignedIn()){t.next=2;break}return t.abrupt("return",b["default"].reject(new U["default"].NotSignedInError));case 2:return t.abrupt("return",this.find(this.host.getCurrentUser().id));case 3:case"end":return t.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,x["default"])(_["default"].mark(function e(t){var n,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(o=G["default"].defaults(o,{ignoreNotFound:!1,bypassCache:!1}),this.host.requireUser(),n=null,o.bypassCache){e.next=11;break}if(n=this.host.models.User.get(t),!n||n.$temporary){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.users.find(t);case 13:if(r=e.sent,!r){e.next=18;break}n=this.host.models.User.inject(r),e.next=20;break;case 18:if(o.ignoreNotFound){e.next=20;break}throw new U["default"].NotFoundError(this.host.models.User.name,t);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.User.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.User.getMulti(t)}}],[{key:"getSignInAuthHeader",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "productKey" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "productKey" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=[t,e,n].join(":"),o=(0,D["default"])(r),u="XMPP-Simple "+o;return u}}]),e}(V["default"]),o(c.prototype,"me",[u],(0,g["default"])(c.prototype,"me"),c.prototype),o(c.prototype,"find",[s],(0,g["default"])(c.prototype,"find"),c.prototype),c);e["default"]=W,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(133),__esModule:!0}},function(t,e,n){var r=n(26);n(134),t.exports=function(t,e){return r.getDesc(t,e)}},function(t,e,n){var r=n(40);n(10)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){var r;(function(o){!function(){function i(t){var e,n,r,o="",i=-1;if(t&&t.length)for(r=t.length;(i+=1)<r;)e=t.charCodeAt(i),n=r>i+1?t.charCodeAt(i+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),i+=1),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o}function a(t){var e,n,r,o,i,a,u=[];if(e=n=r=o=i=0,t&&t.length)for(a=t.length,t+="";a>e;)r=t.charCodeAt(e),n+=1,128>r?(u[n]=String.fromCharCode(r),e+=1):r>191&&224>r?(o=t.charCodeAt(e+1),u[n]=String.fromCharCode((31&r)<<6|63&o),e+=2):(o=t.charCodeAt(e+1),i=t.charCodeAt(e+2),u[n]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),e+=3);return u.join("")}function u(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function s(t,e){return t<<e|t>>>32-e}function c(t,e){for(var n,r=e?"0123456789ABCDEF":"0123456789abcdef",o="",i=0,a=t.length;a>i;i+=1)n=t.charCodeAt(i),o+=r.charAt(n>>>4&15)+r.charAt(15&n);return o}function f(t){var e,n=32*t.length,r="";for(e=0;n>e;e+=8)r+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return r}function l(t){var e,n=32*t.length,r="";for(e=0;n>e;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function h(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;o>e;e+=1)r[e]=0;for(e=0;n>e;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function d(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;o>e;e+=1)r[e]=0;for(e=0;n>e;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return r}function p(t,e){var n,r,o,i,a,u,s,c,f=e.length,l=Array();for(u=Array(Math.ceil(t.length/2)),i=u.length,n=0;i>n;n+=1)u[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;u.length>0;){for(a=Array(),o=0,n=0;n<u.length;n+=1)o=(o<<16)+u[n],r=Math.floor(o/f),o-=r*f,(a.length>0||r>0)&&(a[a.length]=r);l[l.length]=o,u=a}for(s="",n=l.length-1;n>=0;n--)s+=e.charAt(l[n]);for(c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=s.length;c>n;n+=1)s=e[0]+s;return s}function v(t,e){var n,r,o,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",u=t.length;for(e=e||"=",n=0;u>n;n+=3)for(o=t.charCodeAt(n)<<16|(u>n+1?t.charCodeAt(n+1)<<8:0)|(u>n+2?t.charCodeAt(n+2):0),r=0;4>r;r+=1)a+=8*n+6*r>8*t.length?e:i.charAt(o>>>6*(3-r)&63);return a}var y;y={VERSION:"1.0.5",Base64:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="=",n=!0;this.encode=function(r){var o,a,u,s="",c=r.length;for(e=e||"=",r=n?i(r):r,o=0;c>o;o+=3)for(u=r.charCodeAt(o)<<16|(c>o+1?r.charCodeAt(o+1)<<8:0)|(c>o+2?r.charCodeAt(o+2):0),a=0;4>a;a+=1)s+=8*o+6*a>8*c?e:t.charAt(u>>>6*(3-a)&63);return s},this.decode=function(r){var o,i,u,s,c,f,l,h,d,p,v="",y=[];if(!r)return r;o=p=0,r=r.replace(new RegExp("\\"+e,"gi"),"");do c=t.indexOf(r.charAt(o+=1)),f=t.indexOf(r.charAt(o+=1)),l=t.indexOf(r.charAt(o+=1)),h=t.indexOf(r.charAt(o+=1)),d=c<<18|f<<12|l<<6|h,i=d>>16&255,u=d>>8&255,s=255&d,p+=1,64===l?y[p]=String.fromCharCode(i):64===h?y[p]=String.fromCharCode(i,u):y[p]=String.fromCharCode(i,u,s);while(o<r.length);return v=y.join(""),v=n?a(v):v},this.setPad=function(t){return e=t||e,this},this.setTab=function(e){return t=e||t,this},this.setUTF8=function(t){return"boolean"==typeof t&&(n=t),this}},CRC32:function(t){var e,n,r,o=0,a=0,u=0;for(t=i(t),e=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o=-1^o,n=0,r=t.length;r>n;n+=1)u=255&(o^t.charCodeAt(n)),a="0x"+e.substr(9*u,8),o=o>>>8^a;return(-1^o)>>>0},MD5:function(t){function e(t){return t=b?i(t):t,l(r(h(t),8*t.length))}function n(t,e){var n,o,a,u,s;for(t=b?i(t):t,e=b?i(e):e,n=h(t),n.length>16&&(n=r(n,8*t.length)),o=Array(16),a=Array(16),s=0;16>s;s+=1)o[s]=909522486^n[s],a[s]=1549556828^n[s];return u=r(o.concat(h(e)),512+8*e.length),l(r(a.concat(u),640))}function r(t,e){var n,r,o,i,s,c=1732584193,l=-271733879,h=-1732584194,p=271733878;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,n=0;n<t.length;n+=16)r=c,o=l,i=h,s=p,c=a(c,l,h,p,t[n+0],7,-680876936),p=a(p,c,l,h,t[n+1],12,-389564586),h=a(h,p,c,l,t[n+2],17,606105819),l=a(l,h,p,c,t[n+3],22,-1044525330),c=a(c,l,h,p,t[n+4],7,-176418897),p=a(p,c,l,h,t[n+5],12,1200080426),h=a(h,p,c,l,t[n+6],17,-1473231341),l=a(l,h,p,c,t[n+7],22,-45705983),c=a(c,l,h,p,t[n+8],7,1770035416),p=a(p,c,l,h,t[n+9],12,-1958414417),h=a(h,p,c,l,t[n+10],17,-42063),l=a(l,h,p,c,t[n+11],22,-1990404162),c=a(c,l,h,p,t[n+12],7,1804603682),p=a(p,c,l,h,t[n+13],12,-40341101),h=a(h,p,c,l,t[n+14],17,-1502002290),l=a(l,h,p,c,t[n+15],22,1236535329),c=f(c,l,h,p,t[n+1],5,-165796510),p=f(p,c,l,h,t[n+6],9,-1069501632),h=f(h,p,c,l,t[n+11],14,643717713),l=f(l,h,p,c,t[n+0],20,-373897302),c=f(c,l,h,p,t[n+5],5,-701558691),p=f(p,c,l,h,t[n+10],9,38016083),h=f(h,p,c,l,t[n+15],14,-660478335),l=f(l,h,p,c,t[n+4],20,-405537848),c=f(c,l,h,p,t[n+9],5,568446438),p=f(p,c,l,h,t[n+14],9,-1019803690),h=f(h,p,c,l,t[n+3],14,-187363961),l=f(l,h,p,c,t[n+8],20,1163531501),c=f(c,l,h,p,t[n+13],5,-1444681467),p=f(p,c,l,h,t[n+2],9,-51403784),h=f(h,p,c,l,t[n+7],14,1735328473),
l=f(l,h,p,c,t[n+12],20,-1926607734),c=d(c,l,h,p,t[n+5],4,-378558),p=d(p,c,l,h,t[n+8],11,-2022574463),h=d(h,p,c,l,t[n+11],16,1839030562),l=d(l,h,p,c,t[n+14],23,-35309556),c=d(c,l,h,p,t[n+1],4,-1530992060),p=d(p,c,l,h,t[n+4],11,1272893353),h=d(h,p,c,l,t[n+7],16,-155497632),l=d(l,h,p,c,t[n+10],23,-1094730640),c=d(c,l,h,p,t[n+13],4,681279174),p=d(p,c,l,h,t[n+0],11,-358537222),h=d(h,p,c,l,t[n+3],16,-722521979),l=d(l,h,p,c,t[n+6],23,76029189),c=d(c,l,h,p,t[n+9],4,-640364487),p=d(p,c,l,h,t[n+12],11,-421815835),h=d(h,p,c,l,t[n+15],16,530742520),l=d(l,h,p,c,t[n+2],23,-995338651),c=y(c,l,h,p,t[n+0],6,-198630844),p=y(p,c,l,h,t[n+7],10,1126891415),h=y(h,p,c,l,t[n+14],15,-1416354905),l=y(l,h,p,c,t[n+5],21,-57434055),c=y(c,l,h,p,t[n+12],6,1700485571),p=y(p,c,l,h,t[n+3],10,-1894986606),h=y(h,p,c,l,t[n+10],15,-1051523),l=y(l,h,p,c,t[n+1],21,-2054922799),c=y(c,l,h,p,t[n+8],6,1873313359),p=y(p,c,l,h,t[n+15],10,-30611744),h=y(h,p,c,l,t[n+6],15,-1560198380),l=y(l,h,p,c,t[n+13],21,1309151649),c=y(c,l,h,p,t[n+4],6,-145523070),p=y(p,c,l,h,t[n+11],10,-1120210379),h=y(h,p,c,l,t[n+2],15,718787259),l=y(l,h,p,c,t[n+9],21,-343485551),c=u(c,r),l=u(l,o),h=u(h,i),p=u(p,s);return Array(c,l,h,p)}function o(t,e,n,r,o,i){return u(s(u(u(e,t),u(r,i)),o),n)}function a(t,e,n,r,i,a,u){return o(e&n|~e&r,t,e,i,a,u)}function f(t,e,n,r,i,a,u){return o(e&r|n&~r,t,e,i,a,u)}function d(t,e,n,r,i,a,u){return o(e^n^r,t,e,i,a,u)}function y(t,e,n,r,i,a,u){return o(n^(e|~r),t,e,i,a,u)}var g=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,m=t&&"string"==typeof t.pad?t.pda:"=",b=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,b),g)},this.b64=function(t){return v(e(t),m)},this.any=function(t,n){return p(e(t,b),n)},this.raw=function(t){return e(t,b)},this.hex_hmac=function(t,e){return c(n(t,e),g)},this.b64_hmac=function(t,e){return v(n(t,e),m)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(g=t),this},this.setPad=function(t){return m=t||m,this},this.setUTF8=function(t){return"boolean"==typeof t&&(b=t),this}},SHA1:function(t){function e(t){return t=y?i(t):t,f(r(d(t),8*t.length))}function n(t,e){var n,o,a,u,s;for(t=y?i(t):t,e=y?i(e):e,n=d(t),n.length>16&&(n=r(n,8*t.length)),o=Array(16),a=Array(16),u=0;16>u;u+=1)o[u]=909522486^n[u],a[u]=1549556828^n[u];return s=r(o.concat(d(e)),512+8*e.length),f(r(a.concat(s),672))}function r(t,e){var n,r,i,c,f,l,h,d,p=Array(80),v=1732584193,y=-271733879,g=-1732584194,m=271733878,b=-1009589776;for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,n=0;n<t.length;n+=16){for(c=v,f=y,l=g,h=m,d=b,r=0;80>r;r+=1)16>r?p[r]=t[n+r]:p[r]=s(p[r-3]^p[r-8]^p[r-14]^p[r-16],1),i=u(u(s(v,5),o(r,y,g,m)),u(u(b,p[r]),a(r))),b=m,m=g,g=s(y,30),y=v,v=i;v=u(v,c),y=u(y,f),g=u(g,l),m=u(m,h),b=u(b,d)}return Array(v,y,g,m,b)}function o(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function a(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}var l=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,h=t&&"string"==typeof t.pad?t.pda:"=",y=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,y),l)},this.b64=function(t){return v(e(t,y),h)},this.any=function(t,n){return p(e(t,y),n)},this.raw=function(t){return e(t,y)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),h)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(l=t),this},this.setPad=function(t){return h=t||h,this},this.setUTF8=function(t){return"boolean"==typeof t&&(y=t),this}},SHA256:function(t){function e(t,e){return t=e?i(t):t,f(m(d(t),8*t.length))}function n(t,e){t=E?i(t):t,e=E?i(e):e;var n,r=0,o=d(t),a=Array(16),u=Array(16);for(o.length>16&&(o=m(o,8*t.length));16>r;r+=1)a[r]=909522486^o[r],u[r]=1549556828^o[r];return n=m(a.concat(d(e)),512+8*e.length),f(m(u.concat(n),768))}function r(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function l(t){return r(t,2)^r(t,13)^r(t,22)}function h(t){return r(t,6)^r(t,11)^r(t,25)}function y(t){return r(t,7)^r(t,18)^o(t,3)}function g(t){return r(t,17)^r(t,19)^o(t,10)}function m(t,e){var n,r,o,i,c,f,d,p,v,m,w,_,E=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],x=new Array(64);for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,v=0;v<t.length;v+=16){for(n=E[0],r=E[1],o=E[2],i=E[3],c=E[4],f=E[5],d=E[6],p=E[7],m=0;64>m;m+=1)16>m?x[m]=t[m+v]:x[m]=u(u(u(g(x[m-2]),x[m-7]),y(x[m-15])),x[m-16]),w=u(u(u(u(p,h(c)),a(c,f,d)),b[m]),x[m]),_=u(l(n),s(n,r,o)),p=d,d=f,f=c,c=u(i,w),i=o,o=r,r=n,n=u(w,_);E[0]=u(n,E[0]),E[1]=u(r,E[1]),E[2]=u(o,E[2]),E[3]=u(i,E[3]),E[4]=u(c,E[4]),E[5]=u(f,E[5]),E[6]=u(d,E[6]),E[7]=u(p,E[7])}return E}var b,w=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,_=t&&"string"==typeof t.pad?t.pda:"=",E=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,E))},this.b64=function(t){return v(e(t,E),_)},this.any=function(t,n){return p(e(t,E),n)},this.raw=function(t){return e(t,E)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),_)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(w=t),this},this.setPad=function(t){return _=t||_,this},this.setUTF8=function(t){return"boolean"==typeof t&&(E=t),this},b=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){function e(t){return t=_?i(t):t,f(r(d(t),8*t.length))}function n(t,e){t=_?i(t):t,e=_?i(e):e;var n,o=0,a=d(t),u=Array(32),s=Array(32);for(a.length>32&&(a=r(a,8*t.length));32>o;o+=1)u[o]=909522486^a[o],s[o]=1549556828^a[o];return n=r(u.concat(d(e)),1024+8*e.length),f(r(s.concat(n),1536))}function r(t,e){var n,r,i,c=new Array(80),f=new Array(16),d=[new o(1779033703,-205731576),new o(-1150833019,-2067093701),new o(1013904242,-23791573),new o(-1521486534,1595750129),new o(1359893119,-1377402159),new o(-1694144372,725511199),new o(528734635,-79577749),new o(1541459225,327033209)],p=new o(0,0),v=new o(0,0),b=new o(0,0),w=new o(0,0),_=new o(0,0),E=new o(0,0),x=new o(0,0),A=new o(0,0),O=new o(0,0),j=new o(0,0),k=new o(0,0),I=new o(0,0),T=new o(0,0),S=new o(0,0),M=new o(0,0),C=new o(0,0),P=new o(0,0);for(void 0===m&&(m=[new o(1116352408,-685199838),new o(1899447441,602891725),new o(-1245643825,-330482897),new o(-373957723,-2121671748),new o(961987163,-213338824),new o(1508970993,-1241133031),new o(-1841331548,-1357295717),new o(-1424204075,-630357736),new o(-670586216,-1560083902),new o(310598401,1164996542),new o(607225278,1323610764),new o(1426881987,-704662302),new o(1925078388,-226784913),new o(-2132889090,991336113),new o(-1680079193,633803317),new o(-1046744716,-815192428),new o(-459576895,-1628353838),new o(-272742522,944711139),new o(264347078,-1953704523),new o(604807628,2007800933),new o(770255983,1495990901),new o(1249150122,1856431235),new o(1555081692,-1119749164),new o(1996064986,-2096016459),new o(-1740746414,-295247957),new o(-1473132947,766784016),new o(-1341970488,-1728372417),new o(-1084653625,-1091629340),new o(-958395405,1034457026),new o(-710438585,-1828018395),new o(113926993,-536640913),new o(338241895,168717936),new o(666307205,1188179964),new o(773529912,1546045734),new o(1294757372,1522805485),new o(1396182291,-1651133473),new o(1695183700,-1951439906),new o(1986661051,1014477480),new o(-2117940946,1206759142),new o(-1838011259,344077627),new o(-1564481375,1290863460),new o(-1474664885,-1136513023),new o(-1035236496,-789014639),new o(-949202525,106217008),new o(-778901479,-688958952),new o(-694614492,1432725776),new o(-200395387,1467031594),new o(275423344,851169720),new o(430227734,-1194143544),new o(506948616,1363258195),new o(659060556,-544281703),new o(883997877,-509917016),new o(958139571,-976659869),new o(1322822218,-482243893),new o(1537002063,2003034995),new o(1747873779,-692930397),new o(1955562222,1575990012),new o(2024104815,1125592928),new o(-2067236844,-1578062990),new o(-1933114872,442776044),new o(-1866530822,593698344),new o(-1538233109,-561857047),new o(-1090935817,-1295615723),new o(-965641998,-479046869),new o(-903397682,-366583396),new o(-779700025,566280711),new o(-354779690,-840897762),new o(-176337025,-294727304),new o(116418474,1914138554),new o(174292421,-1563912026),new o(289380356,-1090974290),new o(460393269,320620315),new o(685471733,587496836),new o(852142971,1086792851),new o(1017036298,365543100),new o(1126000580,-1676669620),new o(1288033470,-885112138),new o(1501505948,-60457430),new o(1607167915,987167468),new o(1816402316,1246189591)]),r=0;80>r;r+=1)c[r]=new o(0,0);for(t[e>>5]|=128<<24-(31&e),t[(e+128>>10<<5)+31]=e,i=t.length,r=0;i>r;r+=32){for(a(b,d[0]),a(w,d[1]),a(_,d[2]),a(E,d[3]),a(x,d[4]),a(A,d[5]),a(O,d[6]),a(j,d[7]),n=0;16>n;n+=1)c[n].h=t[r+2*n],c[n].l=t[r+2*n+1];for(n=16;80>n;n+=1)u(M,c[n-2],19),s(C,c[n-2],29),l(P,c[n-2],6),I.l=M.l^C.l^P.l,I.h=M.h^C.h^P.h,u(M,c[n-15],1),u(C,c[n-15],8),l(P,c[n-15],7),k.l=M.l^C.l^P.l,k.h=M.h^C.h^P.h,y(c[n],I,c[n-7],k,c[n-16]);for(n=0;80>n;n+=1)T.l=x.l&A.l^~x.l&O.l,T.h=x.h&A.h^~x.h&O.h,u(M,x,14),u(C,x,18),s(P,x,9),I.l=M.l^C.l^P.l,I.h=M.h^C.h^P.h,u(M,b,28),s(C,b,2),s(P,b,7),k.l=M.l^C.l^P.l,k.h=M.h^C.h^P.h,S.l=b.l&w.l^b.l&_.l^w.l&_.l,S.h=b.h&w.h^b.h&_.h^w.h&_.h,g(p,j,I,T,m[n],c[n]),h(v,k,S),a(j,O),a(O,A),a(A,x),h(x,E,p),a(E,_),a(_,w),a(w,b),h(b,p,v);h(d[0],d[0],b),h(d[1],d[1],w),h(d[2],d[2],_),h(d[3],d[3],E),h(d[4],d[4],x),h(d[5],d[5],A),h(d[6],d[6],O),h(d[7],d[7],j)}for(r=0;8>r;r+=1)f[2*r]=d[r].h,f[2*r+1]=d[r].l;return f}function o(t,e){this.h=t,this.l=e}function a(t,e){t.h=e.h,t.l=e.l}function u(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function s(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function l(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function h(t,e,n){var r=(65535&e.l)+(65535&n.l),o=(e.l>>>16)+(n.l>>>16)+(r>>>16),i=(65535&e.h)+(65535&n.h)+(o>>>16),a=(e.h>>>16)+(n.h>>>16)+(i>>>16);t.l=65535&r|o<<16,t.h=65535&i|a<<16}function y(t,e,n,r,o){var i=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&o.l),a=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(o.l>>>16)+(i>>>16),u=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&o.h)+(a>>>16),s=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(o.h>>>16)+(u>>>16);t.l=65535&i|a<<16,t.h=65535&u|s<<16}function g(t,e,n,r,o,i){var a=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&o.l)+(65535&i.l),u=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(o.l>>>16)+(i.l>>>16)+(a>>>16),s=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&o.h)+(65535&i.h)+(u>>>16),c=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(o.h>>>16)+(i.h>>>16)+(s>>>16);t.l=65535&a|u<<16,t.h=65535&s|c<<16}var m,b=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,w=t&&"string"==typeof t.pad?t.pda:"=",_=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t))},this.b64=function(t){return v(e(t),w)},this.any=function(t,n){return p(e(t),n)},this.raw=function(t){return e(t,_)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),w)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(b=t),this},this.setPad=function(t){return w=t||w,this},this.setUTF8=function(t){return"boolean"==typeof t&&(_=t),this}},RMD160:function(t){function e(t){return t=g?i(t):t,r(o(h(t),8*t.length))}function n(t,e){t=g?i(t):t,e=g?i(e):e;var n,a,u=h(t),s=Array(16),c=Array(16);for(u.length>16&&(u=o(u,8*t.length)),n=0;16>n;n+=1)s[n]=909522486^u[n],c[n]=1549556828^u[n];return a=o(s.concat(h(e)),512+8*e.length),r(o(c.concat(a),672))}function r(t){var e,n="",r=32*t.length;for(e=0;r>e;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function o(t,e){var n,r,o,i,c,h,d,p,v,y,g,E,x,A,O=1732584193,j=4023233417,k=2562383102,I=271733878,T=3285377520;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,i=t.length,o=0;i>o;o+=16){for(c=y=O,h=g=j,d=E=k,p=x=I,v=A=T,r=0;79>=r;r+=1)n=u(c,a(r,h,d,p)),n=u(n,t[o+m[r]]),n=u(n,f(r)),n=u(s(n,w[r]),v),c=v,v=p,p=s(d,10),d=h,h=n,n=u(y,a(79-r,g,E,x)),n=u(n,t[o+b[r]]),n=u(n,l(r)),n=u(s(n,_[r]),A),y=A,A=x,x=s(E,10),E=g,g=n;n=u(j,u(d,x)),j=u(k,u(p,A)),k=u(I,u(v,y)),I=u(T,u(c,g)),T=u(O,u(h,E)),O=n}return[O,j,k,I,T]}function a(t,e,n,r){return t>=0&&15>=t?e^n^r:t>=16&&31>=t?e&n|~e&r:t>=32&&47>=t?(e|~n)^r:t>=48&&63>=t?e&r|n&~r:t>=64&&79>=t?e^(n|~r):"rmd160_f: j out of range"}function f(t){return t>=0&&15>=t?0:t>=16&&31>=t?1518500249:t>=32&&47>=t?1859775393:t>=48&&63>=t?2400959708:t>=64&&79>=t?2840853838:"rmd160_K1: j out of range"}function l(t){return t>=0&&15>=t?1352829926:t>=16&&31>=t?1548603684:t>=32&&47>=t?1836072691:t>=48&&63>=t?2053994217:t>=64&&79>=t?0:"rmd160_K2: j out of range"}var d=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,y=t&&"string"==typeof t.pad?t.pda:"=",g=t&&"boolean"==typeof t.utf8?t.utf8:!0,m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(t){return c(e(t,g))},this.b64=function(t){return v(e(t,g),y)},this.any=function(t,n){return p(e(t,g),n)},this.raw=function(t){return e(t,g)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),y)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(d=t),this},this.setPad=function(t){return"undefined"!=typeof t&&(y=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(g=t),this}}},function(i,a){var u=!1;u=e,e&&"object"==typeof o&&o&&o===o.global&&(i=o),r=function(){return y}.call(e,n,e,t),!(r!==a&&(t.exports=r))}(this)}()}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(53),i=r(o),a=n(88),u=r(a),s=n(89),c=r(s),f=n(120),l=r(f),h=function(){function t(e,n){(0,u["default"])(this,t),(0,i["default"])(this,n),this.host=e,this.config=e.config,this.httpClient=e.httpClient}return(0,c["default"])(t,[{key:"_resolveModelId",value:function(t){return"string"==typeof t?t:t.serverId?t.serverId:t.id?t.id:null}},{key:"_resolveEntity",value:function(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=this.host.modelsByEntityType[r].get(t);if(o)return o}return null}},{key:"_resolveEntityType",value:function(t,e){var n=this._resolveEntity(t,e);return n?n.$entityType:null}},{key:"mounted",value:function(){}},{key:"dispose",value:function(){}}]),t}();e["default"]=h,(0,i["default"])(h.prototype,l["default"].prototype),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(138),i=r(o),a=n(88),u=r(a),s=n(89),c=r(s),f=n(118),l=r(f),h=function(){function t(e){var n=this;(0,u["default"])(this,t),this.EVENTS={client_advisory:function(t){switch(t.advisory.name){case"replay_start":this.host.reactToAdvisoryEvent("replayStart",{replayMessageCount:t.advisory.replay_message_count});break;case"replay_stop":this.host.reactToAdvisoryEvent("replayStop")}},"message|group_message":function(t){this.host.conversations.reactToIncomingMessageEvent(t)},"message:status|group:message:status":function(t){this.host.messages.reactToMessageStatusEvent(t)},friends:function(t){this.host.conversations.reactToFriendsEvent(t)},presence:function(t){this.host.presence.reactToPresenceEvent(t)},"push:credentials:requested":function(t){},bang:function(t){this.host.groups.reactToBangEvent(t)},update:function(t){var e=t.type,n=(0,i["default"])(t,["type"]);this.host.injectModel(n,e)},"account:settings":function(t){},"message:is_typing":function(t){},"push:credentials":function(t){},remote_wipe:function(t){},validated:function(t){},conversation_mute:function(t){}},this.host=e;var r=[];l["default"].each(this.EVENTS,function(t,e){e.includes("|")&&(r.push(e),e.split("|").forEach(function(e){return n.EVENTS[e]=t}))}),r.forEach(function(t){return delete n.EVENTS[t]})}return(0,c["default"])(t,[{key:"emit",value:function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t.data):this.logger&&this.logger.error("unhandled event: "+t.type,t.data)}}]),t}();e["default"]=h,t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(93),i=r(o),a=n(5),u=r(a),s=n(78),c=r(s),f=n(57),l=r(f),h=n(87),d=r(h),p=n(108),v=r(p),y=n(88),g=r(y),m=n(89),b=r(m),w=n(111),_=r(w),E=n(112),x=r(E),A=n(136),O=r(A),j=n(140),k=r(j),I=n(118),T=r(I),S=function(t){function e(t,n){(0,g["default"])(this,e);var r=(0,_["default"])(this,(0,v["default"])(e).call(this,t,n));return r._throtelled_flushQueuedAcks=T["default"].throttle(r._flushQueuedAcks.bind(r),r.config.flushAckInterval,{leading:!1}),r}return(0,x["default"])(e,t),(0,b["default"])(e,[{key:"mounted",value:function(){this._queuedAcks=[],this._statsByEventType={}}},{key:"dispose",value:function(){this._queuedAcks=null,this._statsByEventType=null,this._throtelled_flushQueuedAcks.cancel&&this._throtelled_flushQueuedAcks.cancel()}},{key:"connect",value:function(){var t=(0,d["default"])(c["default"].mark(function e(){var t,n=this;return c["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.host.requireUser(),!this.eventSource){e.next=4;break}return this.logger.warn("already connected"),e.abrupt("return");case 4:return t=this.config.baseUrl+"/events",this.logger.info("connecting events"),this.eventSource=new k["default"](t,{headers:{Authorization:this.httpClient.getAuthHeader(),"TT-X-Features":this.config.eventsFeatures}}),e.abrupt("return",new l["default"](function(t,e){var r=void 0;n.eventSource.addEventListener("open",function(){n.logger.info("open"),r=!0,t()}),n.eventSource.addEventListener("message",n._onEvent.bind(n)),n.eventSource.addEventListener("error",function(t){r||e(),n._onError(t)}),n.eventSource.addEventListener("close",function(){n.logger.info("close")})}));case 8:case"end":return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.eventSource&&this.eventSource.close(),this.eventSource=null}},{key:"reconnect",value:function(){this.eventSource&&this.disconnect(),this.connect()}},{key:"_onEvent",value:function(t){var e=this,n=t.data;if(n.includes("\n"))return void n.split("\n").forEach(function(t){return e._onEvent({data:t})});var r=n;try{n=JSON.parse(r)}catch(o){throw this.logger.error("error parsing ",r),o}var i=n.event_id,a=(0,u["default"])(n.event)[0],s=a.replace("tigertext:iq:",""),c=n.event[a];this._statsByEventType[s]||(this._statsByEventType[s]={count:0}),this._statsByEventType[s].count++,this.logger.info("incoming",s,c);var f=new this.host.models.Event(i,s,c,{_origData:r});try{this.host.eventRouter.emit(f),this.emit("event",f),this.config.autoAckEvents&&this.__queueAck(i)}catch(o){throw this.logger.error("error in event "+s,o,{data:c}),o}}},{key:"_onError",value:function(t){var e=this;this.logger.warn("error",t,t.message||"",t.status||""),this.disconnect(),this.config.eventsAutoReconnect&&setTimeout(function(){e.connect()},this.config.eventsAutoReconnectDelay)}},{key:"__queueAck",value:function(t){var e;t=T["default"].arrayWrap(t),(e=this._queuedAcks).push.apply(e,(0,i["default"])(t)),t.length>=this.config.flushAckMaxEvents?(this.logger.log("reached "+this.config.flushAckMaxEvents+" -- flushing"),this._flushQueuedAcks()):this._throtelled_flushQueuedAcks()}},{key:"_flushQueuedAcks",value:function(){this._queuedAcks.length>0&&(this.ack(this._queuedAcks),this._queuedAcks.length=0)}},{key:"ack",value:function(){var t=(0,d["default"])(c["default"].mark(function e(t){return c["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),t=T["default"].arrayWrap(t),this.logger.log("ack",t),e.prev=3,e.next=6,this.httpClient.post("/events/ack",{data:{events:t}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),this.logger.warn("some events not acked",t);case 11:case"end":return e.stop()}},e,this,[[3,8]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(O["default"]);e["default"]=S,t.exports=e["default"]},function(t,e,n){(function(e){function r(t){return Object.getPrototypeOf(t)===Object.prototype}function o(t,n){function c(){m||v===o.CLOSED||(m=!0,v=o.CONNECTING,d("error",new i("error")),x&&(t=x,x=null),setTimeout(function(){v===o.CONNECTING&&h()},y.reconnectInterval))}function h(){m=!1;var a=s(t),u="https:"==a.protocol;if(a.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},b&&(a.headers["Last-Event-ID"]=b),n&&n.headers&&r(n.headers))for(var _ in n.headers){var E=n.headers[_];E&&(a.headers[_]=E)}a.rejectUnauthorized=!(n&&0==n.rejectUnauthorized),g=(u?f:l).request(a,function(n){if(301==n.statusCode||307==n.statusCode)return n.headers.location?(307==n.statusCode&&(x=t),t=n.headers.location,void e.nextTick(h)):void d("error",new i("error",{status:n.statusCode}));if(200!==n.statusCode)return d("error",new i("error",{status:n.statusCode})),y.close();v=o.OPEN,n.on("close",c),n.on("end",c),d("open",new i("open"));var r="";n.on("data",function(t){r+=t;for(var e=0,n=r.length;n>e;){w&&("\n"===r[e]&&++e,w=!1);for(var o,i=-1,a=-1,u=e;0>i&&n>u;++u)o=r[u],":"===o?0>a&&(a=u-e):"\r"===o?(w=!0,i=u-e):"\n"===o&&(i=u-e);if(0>i)break;p(r,e,a,i),e+=i+1}e===n?r="":e>0&&(r=r.slice(e))})}),g.on("error",c),g.setNoDelay&&g.setNoDelay(!0),g.end()}function d(){y.listeners(arguments[0]).length>0&&y.emit.apply(y,arguments)}function p(e,n,r,o){if(0===o){if(_.length>0){var i=E||"message";d(i,new a(i,{data:_.slice(0,-1),lastEventId:b,origin:u(t)})),_=""}E=void 0}else if(r>0){var s=0>r,c=0,f=e.slice(n,n+(s?o:r));c=s?o:" "!==e[n+r+1]?r+1:r+2,n+=c;var l=o-c,h=e.slice(n,n+l);if("data"===f)_+=h+"\n";else if("event"===f)E=h;else if("id"===f)b=h;else if("retry"===f){var p=parseInt(h,10);Number.isNaN(p)||(y.reconnectInterval=p)}}}var v=o.CONNECTING;Object.defineProperty(this,"readyState",{get:function(){return v}}),Object.defineProperty(this,"url",{get:function(){return t}});var y=this;y.reconnectInterval=1e3;var g,m=!1,b="";n&&n.headers&&r(n.headers)&&n.headers["Last-Event-ID"]&&(b=n.headers["Last-Event-ID"],delete n.headers["Last-Event-ID"]);var w=!1,_="",E="",x=null;h(),this.close=function(){v!=o.CLOSED&&(v=o.CLOSED,g.abort&&g.abort())}}function i(t,e){if(Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0}),e)for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}function a(t,e){Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0});for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}var u=n(141),s=n(146).parse,c=n(120),f=n(151),l=n(152),h=n(170);t.exports=o,h.inherits(o,c.EventEmitter),o.prototype.constructor=o,["open","error","message"].forEach(function(t){Object.defineProperty(o.prototype,"on"+t,{get:function(){var e=this.listeners(t)[0];return e?e._listener?e._listener:e:void 0},set:function(e){this.removeAllListeners(t),this.addEventListener(t,e)}})}),Object.defineProperty(o,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(o,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(o,"CLOSED",{enumerable:!0,value:2}),o.prototype.addEventListener=function(t,e){"function"==typeof e&&(e._listener=e,this.on(t,e))}}).call(e,n(81))},function(t,e,n){"use strict";function r(t){return"string"==typeof t&&(t=o(t)),t.protocol&&t.hostname?(t.protocol+"//"+t.host).toLowerCase():"null"}var o=n(142);r.same=function(t,e){return r(t)===r(e)},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var c,f,l,h,d=u.test(t),p=typeof e,v=this,y=0;for("object"!==p&&"string"!==p&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=i(e);y<s.length;y++)f=s[y],c=f[0],h=f[1],c!==c?v[h]=t:"string"==typeof c?~(l=t.indexOf(c))&&("number"==typeof f[2]?(v[h]=t.slice(0,l),t=t.slice(l+f[2])):(v[h]=t.slice(l),t=t.slice(0,l))):(l=c.exec(t))&&(v[h]=l[1],t=t.slice(0,t.length-l[0].length)),v[h]=v[h]||(f[3]||"port"===h&&d?e[h]||"":""),f[4]&&(v[h]=v[h].toLowerCase());n&&(v.query=n(v.query)),o(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.href=v.toString()}var o=n(143),i=n(144),a=n(145),u=/^\/(?!\/)/,s=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(t,e,n){var r=this;return"query"===t?("string"==typeof e&&e.length&&(e=(n||a.parse)(e)),r[t]=e):"port"===t?(r[t]=e,o(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=e,r.port&&(e+=":"+r.port),r.host=e):"host"===t?(r[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),r.hostname=e[0],r.port=e[1])):r[t]=e,r.href=r.toString(),r},r.prototype.toString=function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r},r.qs=a,r.location=i,t.exports=r},function(t,e){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){(function(e){"use strict";var r,o={hash:1,query:1};t.exports=function(t){t=t||e.location||{},r=r||n(142);var i,a={},u=typeof t;if("blob:"===t.protocol)a=new r(unescape(t.pathname),{});else if("string"===u){a=new r(t,{});for(i in o)delete a[i]}else if("object"===u)for(i in t)i in o||(a[i]=t[i]);return a}}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){for(var e,n=/([^=?&]+)=([^&]*)/g,r={};e=n.exec(t);r[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return r}function r(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var r in t)o.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""}var o=Object.prototype.hasOwnProperty;e.stringify=r,e.parse=n},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return s(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function u(t,e){return t?o(t,!1,!0).resolveObject(e):e}function s(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function l(t){return null==t}var h=n(147);e.parse=o,e.resolve=a,e.resolveObject=u,e.format=i,e.Url=r;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(y),m=["%","/","?",";","#"].concat(g),b=["/","?","#"],w=255,_=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=n(148);r.prototype.parse=function(t,e,n){if(!s(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=d.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&A[o]||(r=r.substr(2),this.slashes=!0)}if(!A[o]&&(a||o&&!O[o])){for(var u=-1,c=0;c<b.length;c++){var f=r.indexOf(b[c]);-1!==f&&(-1===u||u>f)&&(u=f)}var l,p;p=-1===u?r.lastIndexOf("@"):r.lastIndexOf("@",u),-1!==p&&(l=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(l)),u=-1;for(var c=0;c<m.length;c++){var f=r.indexOf(m[c]);-1!==f&&(-1===u||u>f)&&(u=f)}-1===u&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),c=0,k=y.length;k>c;c++){var I=y[c];if(I&&!I.match(_)){for(var T="",S=0,M=I.length;M>S;S++)T+=I.charCodeAt(S)>127?"x":I[S];if(!T.match(_)){var C=y.slice(0,c),P=y.slice(c+1),B=I.match(E);B&&(C.push(B[1]),P.unshift(B[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=C.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var D=this.hostname.split("."),R=[],c=0;c<D.length;++c){var G=D[c];R.push(G.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(G):G)}this.hostname=R.join(".")}var L=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+L,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[i])for(var c=0,k=g.length;k>c;c++){var F=g[c],V=encodeURIComponent(F);V===F&&(V=escape(F)),r=r.split(F).join(V)}var N=r.indexOf("#");-1!==N&&(this.hash=r.substr(N),r=r.slice(0,N));var U=r.indexOf("?");if(-1!==U?(this.search=r.substr(U),this.query=r.substr(U+1),e&&(this.query=j.parse(this.query)),r=r.slice(0,U)):e&&(this.search="",this.query={}),r&&(this.pathname=r),O[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",G=this.search||"";this.path=L+G}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||O[e])&&o!==!1?(o="//"+(o||""),
n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(s(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),O[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!O[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||A[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||u||n.host&&t.pathname,d=h,p=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!O[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),h=h&&(""===o[0]||""===p[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=o;else if(o.length)p||(p=[]),p.pop(),p=p.concat(o),n.search=t.search,n.query=t.query;else if(!l(t.search)){if(v){n.hostname=n.host=p.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=p.slice(-1)[0],m=(n.host||t.host)&&("."===g||".."===g)||""===g,b=0,w=p.length;w>=0;w--)g=p[w],"."==g?p.splice(w,1):".."===g?(p.splice(w,1),b++):b&&(p.splice(w,1),b--);if(!h&&!d)for(;b--;b)p.unshift("..");!h||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),m&&"/"!==p.join("/").substr(-1)&&p.push("");var _=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=_?"":p.length?p.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return h=h||n.host&&p.length,h&&!_&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,o){!function(i){function a(t){throw RangeError(C[t])}function u(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var o=t.split("."),i=u(o,e).join(".");return r+i}function c(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function f(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:_}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?B(t/O):t>>1,t+=B(t/e);t>P*x>>1;r+=_)t=B(t/P);return B(r+(P+1)*t/(t+A))}function p(t){var e,n,r,o,i,u,s,c,h,p,v=[],y=t.length,g=0,m=k,b=j;for(n=t.lastIndexOf(I),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&a("not-basic"),v.push(t.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(i=g,u=1,s=_;o>=y&&a("invalid-input"),c=l(t.charCodeAt(o++)),(c>=_||c>B((w-g)/u))&&a("overflow"),g+=c*u,h=b>=s?E:s>=b+x?x:s-b,!(h>c);s+=_)p=_-h,u>B(w/p)&&a("overflow"),u*=p;e=v.length+1,b=d(g-i,e,0==i),B(g/e)>w-m&&a("overflow"),m+=B(g/e),g%=e,v.splice(g++,0,m)}return f(v)}function v(t){var e,n,r,o,i,u,s,f,l,p,v,y,g,m,b,A=[];for(t=c(t),y=t.length,e=k,n=0,i=j,u=0;y>u;++u)v=t[u],128>v&&A.push(D(v));for(r=o=A.length,o&&A.push(I);y>r;){for(s=w,u=0;y>u;++u)v=t[u],v>=e&&s>v&&(s=v);for(g=r+1,s-e>B((w-n)/g)&&a("overflow"),n+=(s-e)*g,e=s,u=0;y>u;++u)if(v=t[u],e>v&&++n>w&&a("overflow"),v==e){for(f=n,l=_;p=i>=l?E:l>=i+x?x:l-i,!(p>f);l+=_)b=f-p,m=_-p,A.push(D(h(p+b%m,0))),f=B(b/m);A.push(D(h(f,0))),i=d(n,g,r==o),n=0,++r}++n,++e}return A.join("")}function y(t){return s(t,function(t){return T.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return S.test(t)?"xn--"+v(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);m.global!==m&&m.window!==m&&m.self!==m||(i=m);var b,w=2147483647,_=36,E=1,x=26,A=38,O=700,j=72,k=128,I="-",T=/^xn--/,S=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=_-E,B=Math.floor,D=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:f},decode:p,encode:v,toASCII:g,toUnicode:y},r=function(){return b}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(80)(t),function(){return this}())},function(t,e,n){"use strict";e.decode=e.parse=n(149),e.encode=e.stringify=n(150)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var s=t.length;u>0&&s>u&&(s=u);for(var c=0;s>c;++c){var f,l,h,d,p=t[c].replace(a,"%20"),v=p.indexOf(r);v>=0?(f=p.substr(0,v),l=p.substr(v+1)):(f=p,l=""),h=decodeURIComponent(f),d=decodeURIComponent(l),n(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){var r=n(152),o=t.exports;for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.request=function(t,e){return t||(t={}),t.scheme="https",r.request.call(this,t,e)}},function(t,e,n){var r=t.exports,o=(n(120).EventEmitter,n(153)),i=n(146);r.request=function(t,e){"string"==typeof t&&(t=i.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.protocol||(t.scheme?t.protocol=t.scheme+":":t.protocol=window.location.protocol),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https:"==t.protocol?443:80);var n=new o(new a,t);return e&&n.on("response",e),n},r.get=function(t,e){t.method="GET";var n=r.request(t,e);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var n=new window.ActiveXObject(t[e]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(t[e])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){var r=n(154),o=n(169),i=n(172),a=n(155),u=t.exports=function(t,e){var n=this;n.writable=!0,n.xhr=t,n.body=[],n.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(r){}if(e.responseType)try{t.responseType=e.responseType}catch(r){}if(t.open(e.method||"GET",n.uri,!0),t.onerror=function(t){n.emit("error",new Error("Network error"))},n._headers={},e.headers)for(var a=s(e.headers),u=0;u<a.length;u++){var c=a[u];if(n.isSafeRequestHeader(c)){var f=e.headers[c];n.setHeader(c,f)}}e.auth&&this.setHeader("Authorization","Basic "+i.btoa(e.auth));var l=new o;l.on("close",function(){n.emit("close")}),l.on("ready",function(){n.emit("response",l)}),l.on("error",function(t){n.emit("error",t)}),t.onreadystatechange=function(){t.__aborted||l.handle(t)}};a(u,r),u.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},u.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},u.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},u.prototype.write=function(t){this.body.push(t)},u.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},u.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=s(this._headers),n=0;n<e.length;n++){var r=e[n],o=this._headers[r];if(c(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(r,o[i]);else this.xhr.setRequestHeader(r,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var a=[],n=0;n<this.body.length;n++)a.push.apply(a,this.body[n]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var u=0,n=0;n<this.body.length;n++)u+=this.body[n].length;for(var a=new this.body[0].constructor(u),f=0,n=0;n<this.body.length;n++)for(var h=this.body[n],i=0;i<h.length;i++)a[f++]=h[i];this.xhr.send(a)}else if(l(this.body[0]))this.xhr.send(this.body[0]);else{for(var a="",n=0;n<this.body.length;n++)a+=this.body[n].toString();this.xhr.send(a)}},u.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],u.prototype.isSafeRequestHeader=function(t){return t?-1===f(u.unsafeHeaders,t.toLowerCase()):!1};var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},l=function(t){return"undefined"!=typeof Blob&&t instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&t instanceof FormData?!0:void 0}},function(t,e,n){function r(){o.call(this)}t.exports=r;var o=n(120).EventEmitter,i=n(155);i(r,o),r.Readable=n(156),r.Writable=n(165),r.Duplex=n(166),r.Transform=n(167),r.PassThrough=n(168),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function i(){f||(f=!0,t.end())}function a(){f||(f=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(s(),0===o.listenerCount(this,"error"))throw t}function s(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",i),c.removeListener("close",a),c.removeListener("error",u),t.removeListener("error",u),c.removeListener("end",s),c.removeListener("close",s),t.removeListener("close",s)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",i),c.on("close",a));var f=!1;return c.on("error",u),t.on("error",u),c.on("end",s),c.on("close",s),t.on("close",s),t.emit("pipe",c),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){e=t.exports=n(157),e.Readable=e,e.Writable=n(161),e.Duplex=n(162),e.Transform=n(163),e.PassThrough=n(164)},function(t,e,n){(function(e){function r(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=n(160).StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function o(t){return this instanceof o?(this._readableState=new r(t,this),this.readable=!0,void j.call(this)):new o(t)}function i(t,e,n,r,o){var i=c(e,n);if(i)t.emit("error",i);else if(null===n||void 0===n)e.reading=!1,e.ended||f(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&o){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else!e.decoder||o||r||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&l(t),d(t,e);else o||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){if(t>=T)t=T;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function s(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||null===t?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return A.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?l(t):w(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick(function(){h(t)}):h(t))}function h(t){t.emit("readable")}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&y(t)}}function y(t){function e(t,e,o){var i=t.write(n);!1===i&&r.awaitDrain++}var n,r=t._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=t.read());)if(1===r.pipesCount?e(r.pipes,0,null):_(r.pipes,e),t.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(O.listenerCount(t,"data")>0&&m(t))):void(r.ranOut=!0)}function g(){this._readableState.ranOut&&(this._readableState.ranOut=!1,y(this))}function m(t,n){var r=t._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var o=n||!1,i=!1;t.readable=!0,t.pipe=j.prototype.pipe,t.on=t.addListener=j.prototype.on,t.on("readable",function(){i=!0;for(var e;!o&&null!==(e=t.read());)t.emit("data",e);null===e&&(i=!1,t._readableState.needReadable=!0)}),t.pause=function(){o=!0,this.emit("pause")},t.resume=function(){o=!1,i?e.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var n,r=e.buffer,o=e.length,i=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(a)n=r.shift();else if(!t||t>=o)n=i?r.join(""):A.concat(r,o),r.length=0;else if(t<r[0].length){var u=r[0];n=u.slice(0,t),r[0]=u.slice(t)}else if(t===r[0].length)n=r.shift();else{n=i?"":new A(t);for(var s=0,c=0,f=r.length;f>c&&t>s;c++){var u=r[0],l=Math.min(t-s,u.length);i?n+=u.slice(0,l):u.copy(n,s,0,l),l<u.length?r[0]=u.slice(l):r.shift(),s+=l}}return n}function w(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function _(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function E(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}t.exports=o;var x=n(158),A=n(102).Buffer;o.ReadableState=r;var O=n(120).EventEmitter;O.listenerCount||(O.listenerCount=function(t,e){return t.listeners(e).length});var j=n(154),k=n(159);k.inherits=n(155);var I;k.inherits(o,j),o.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new A(t,e),e="")),i(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return i(this,e,t,"",!0)},o.prototype.setEncoding=function(t){I||(I=n(160).StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t};var T=8388608;o.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return l(this),null;if(t=s(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=s(n,e));var o;return o=t>0?b(t,e):null,null===o&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&w(this),o},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,n){function r(t){t===f&&i()}function o(){t.end()}function i(){t.removeListener("close",u),t.removeListener("finish",s),t.removeListener("drain",p),t.removeListener("error",a),t.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",i),t._writableState&&!t._writableState.needDrain||p()}function a(e){c(),t.removeListener("error",a),0===O.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",s),c()}function s(){t.removeListener("close",u),c()}function c(){f.unpipe(t)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1;var h=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,d=h?o:i;l.endEmitted?e.nextTick(d):f.once("end",d),t.on("unpipe",r);var p=v(f);return t.on("drain",p),t._events&&t._events.error?x(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",s),t.emit("pipe",f),l.flowing||(this.on("readable",g),l.flowing=!0,e.nextTick(function(){y(f)})),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1;for(var o=0;r>o;o++)n[o].emit("unpipe",this);return this}var o=E(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=j.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):this.read(0))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},o.prototype.pause=function(){m(this,!0),this.emit("pause")},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(o){if(e.decoder&&(o=e.decoder.write(o)),o&&(e.objectMode||o.length)){var i=r.push(o);i||(n=!0,t.pause())}});for(var o in t)"function"==typeof t[o]&&"undefined"==typeof this[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return _(i,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){n&&(n=!1,t.resume())},r},o._fromList=b}).call(e,n(81))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===y(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function a(t){return"number"==typeof t}function u(t){return"string"==typeof t}function s(t){return"symbol"==typeof t}function c(t){return void 0===t}function f(t){return"[object RegExp]"===y(t)}function l(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===y(t)}function d(t){return"[object Error]"===y(t)||t instanceof Error}function p(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function y(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=a,e.isString=u,e.isSymbol=s,e.isUndefined=c,e.isRegExp=f,e.isObject=l,e.isDate=h,e.isError=d,e.isFunction=p,e.isPrimitive=v,e.isBuffer=t.isBuffer}).call(e,n(102).Buffer)},function(t,e,n){function r(t){if(t&&!s(t))throw new Error("Unknown encoding: "+t)}function o(t){return t.toString(this.encoding)}function i(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var u=n(102).Buffer,s=u.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=o)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),e+=t.toString(this.encoding,0,o);var o=e.length-1,r=e.charCodeAt(o);if(r>=55296&&56319>=r){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,o)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;e+=r.slice(0,n).toString(o)}return e}},function(t,e,n){(function(e){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function o(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(t){var e=n(162);return this instanceof i||this instanceof e?(this._writableState=new o(t,this),this.writable=!0,void E.call(this)):new i(t)}function a(t,n,r){var o=new Error("write after end");t.emit("error",o),e.nextTick(function(){r(o)})}function u(t,n,r,o){var i=!0;if(!w.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick(function(){o(a)}),i=!1}return i}function s(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new w(e,n)),e}function c(t,e,n,o,i){n=s(e,n,o),w.isBuffer(n)&&(o="buffer");var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;return u||(e.needDrain=!0),e.writing?e.buffer.push(new r(n,o,i)):f(t,e,a,n,o,i),u}function f(t,e,n,r,o,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,o,e.onwrite),e.sync=!1}function l(t,n,r,o,i){r?e.nextTick(function(){i(o)}):i(o),t._writableState.errorEmitted=!0,t.emit("error",o)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var r=t._writableState,o=r.sync,i=r.writecb;if(h(r),n)l(t,r,o,n,i);else{var a=g(t,r);a||r.bufferProcessing||!r.buffer.length||y(t,r),o?e.nextTick(function(){p(t,r,a,i)}):p(t,r,a,i)}}function p(t,e,n,r){n||v(t,e),r(),n&&m(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var r=e.buffer[n],o=r.chunk,i=r.encoding,a=r.callback,u=e.objectMode?1:o.length;if(f(t,e,u,o,i,a),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function g(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var n=g(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function b(t,n,r){n.ending=!0,m(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0}t.exports=i;var w=n(102).Buffer;i.WritableState=o;var _=n(159);_.inherits=n(155);var E=n(154);_.inherits(i,E),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,n){var r=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),w.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):u(this,r,t,n)&&(o=c(this,r,t,e,n)),o},i.prototype._write=function(t,e,n){n(new Error("not implemented"))},i.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),r.ending||r.finished||b(this,r,n)}}).call(e,n(81))},function(t,e,n){(function(e){function r(t){return this instanceof r?(s.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(t)}function o(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function i(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}t.exports=r;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},u=n(159);u.inherits=n(155);var s=n(157),c=n(161);u.inherits(r,s),i(a(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(e,n(81))},function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(t,e,n){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),o&&o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);u.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=i;var u=n(162),s=n(159);s.inherits=n(155),s.inherits(i,u),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){function r(t){return this instanceof r?void o.call(this,t):new r(t)}t.exports=r;var o=n(163),i=n(159);i.inherits=n(155),i.inherits(r,o),r.prototype._transform=function(t,e,n){n(null,t);
}},function(t,e,n){t.exports=n(161)},function(t,e,n){t.exports=n(162)},function(t,e,n){t.exports=n(163)},function(t,e,n){t.exports=n(164)},function(t,e,n){function r(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<e.length;r++){var o=e[r];if(""!==o){var i=o.match(/^([^:]+):\s*(.*)/);if(i){var a=i[1].toLowerCase(),u=i[2];void 0!==n[a]?s(n[a])?n[a].push(u):n[a]=[n[a],u]:n[a]=u}else n[o]=!0}}return n}var o=n(154),i=n(170),a=t.exports=function(t){this.offset=0,this.readable=!0};i.inherits(a,o);var u={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&u.status2){try{this.statusCode=t.status,this.headers=r(t)}catch(e){u.status2=!1}u.status2&&this.emit("ready")}else if(u.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=r(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){u.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){(function(t,r){function o(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function a(t,e){return t}function u(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,r){if(t.customInspect&&n&&j(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return b(o)||(o=s(t,o,r)),o}var i=c(t,n);if(i)return i;var a=Object.keys(n),v=u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),O(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(j(n)){var y=n.name?": "+n.name:"";return t.stylize("[Function"+y+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return f(n)}var g="",m=!1,w=["{","}"];if(p(n)&&(m=!0,w=["[","]"]),j(n)){var _=n.name?": "+n.name:"";g=" [Function"+_+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),A(n)&&(g=" "+Date.prototype.toUTCString.call(n)),O(n)&&(g=" "+f(n)),0===a.length&&(!m||0==n.length))return w[0]+g+w[1];if(0>r)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=m?l(t,n,r,v,a):a.map(function(e){return h(t,n,r,v,e,m)}),t.seen.pop(),d(x,g,w)}function c(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o){for(var i=[],a=0,u=e.length;u>a;++a)M(e,String(a))?i.push(h(t,e,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))}),i}function h(t,e,n,r,o,i){var a,u,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),M(r,o)||(a="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=y(n)?s(t,c.value,null):s(t,c.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),_(a)){if(i&&o.match(/^\d+$/))return u;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function d(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function E(t){return x(t)&&"[object RegExp]"===I(t)}function x(t){return"object"==typeof t&&null!==t}function A(t){return x(t)&&"[object Date]"===I(t)}function O(t){return x(t)&&("[object Error]"===I(t)||t instanceof Error)}function j(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function T(t){return 10>t?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),u=r[n];i>n;u=r[++n])a+=y(u)||!x(u)?" "+u:" "+o(u);return a},e.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(_(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return i};var P,B={};e.debuglog=function(t){if(_(P)&&(P={NODE_ENV:"production",NODE_TARGET:"web"}.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=r.pid;B[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else B[t]=function(){};return B[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=g,e.isNumber=m,e.isString=b,e.isSymbol=w,e.isUndefined=_,e.isRegExp=E,e.isObject=x,e.isDate=A,e.isError=O,e.isFunction=j,e.isPrimitive=k,e.isBuffer=n(171);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=n(155),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(81))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){!function(){function t(t){this.message=t}var n=e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var n,o,i=0,a=r,u="";e.charAt(0|i)||(a="=",i%1);u+=a.charAt(63&n>>8-i%1*8)){if(o=e.charCodeAt(i+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return u}),n.atob||(n.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,a=0,u="";o=e.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?u+=String.fromCharCode(255&n>>(-2*i&6)):0)o=r.indexOf(o);return u})}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,y["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,p["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,y["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,p["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,h,d=n(2),p=r(d),v=n(5),y=r(v),g=n(16),m=r(g),b=n(132),w=r(b),_=n(174),E=r(_),x=n(17),A=r(x),O=n(53),j=r(O),k=n(128),I=r(k),T=n(78),S=r(T),M=n(87),C=r(M),P=n(108),B=r(P),D=n(88),R=r(D),G=n(89),L=r(G),z=n(111),F=r(z),V=n(112),N=r(V),U=n(136),$=r(U),q=n(118),W=r(q),K=n(119),H=n(177),Z=r(H),Y=n(193),X=n(203),J=r(X),Q=n(106),tt=r(Q),et=n(204),nt=r(et),rt=(u=(0,K.decorator)(),s=(0,K.decorator)(),c=(0,K.decorator)({memoize:!0}),f=(0,K.decorator)(),l=(0,K.decorator)(),h=function(t){function e(){var t;(0,R["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,F["default"])(this,(t=(0,B["default"])(e)).call.apply(t,[this].concat(r)));return i._throtelled_flushQueueMessageStatuses=i.config.flushSetMessageStatusInterval?W["default"].throttle(i.__flushQueueMessageStatuses,i.config.flushSetMessageStatusInterval,{leading:!1}):i.__flushQueueMessageStatuses,i}return(0,N["default"])(e,t),(0,L["default"])(e,[{key:"mounted",value:function(){this._queuedMessageStatuses={deliveredIds:[],readIds:[]}}},{key:"dispose",value:function(){this._queuedMessageStatuses=null,K.decorator.clear(this.downloadAttachmentURL)}},{key:"sendToUser",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=r.organizationId,u=r.senderOrganizationId,s=r.recipientOrganizationId,c=r.metadata;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return o?(u&&J["default"].raise("senderOrganizationId","invalid","Cannot set senderOrganizationId if organizationId is set"),s&&J["default"].raise("recipientOrganizationId","invalid","Cannot set recipientOrganizationId if organizationId is set"),u=s=o):u?s||(s=u):this.host.config.defaultOrganizationId?u=s=this.host.config.defaultOrganizationId:J["default"].raise("senderOrganizationId or organizationId","required","Message is sent in the context of an organization. Provide `senderOrganizationId` or `organizationId` or set a default one with client.setDefaultOrganization(...)"),t=this._resolveModelId(t),e.abrupt("return",this.__send("user",t,n,{senderOrganizationId:u,recipientOrganizationId:s,metadata:c}));case 11:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"sendToGroup",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=o.organizationId,s=o.metadata;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=this._resolveModelId(t),r=this.host.models.Group.get(t),r?u=r.organizationId:u||(this.host.config.defaultOrganizationId?u=this.host.config.defaultOrganizationId:J["default"].raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)")),e.abrupt("return",this.__send("group",t,n,{senderOrganizationId:u,metadata:s}));case 12:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"sendToNewGroup",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=o.organizationId,s=o.groupName,c=o.groupMetadata;return o.metadata,S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "userIds" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "userIds" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=t.map(this._resolveModelId.bind(this)),0==t.length&&J["default"].raise("userIds","required"),u||(this.host.config.defaultOrganizationId?u=this.host.config.defaultOrganizationId:J["default"].raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)")),e.next=13,this.__prepareGroupForUsers(u,t,s,{groupMetadata:c});case 13:return r=e.sent,e.abrupt("return",this.sendToGroup(r,n,{organizationId:u}));case 15:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"__send",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n,r,o){var u,s,c,f,l,h,d=o.senderOrganizationId,p=o.recipientOrganizationId,v=o.metadata,y=arguments;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if(null!=y[3]&&"string"==typeof y[3].senderOrganizationId&&(null==y[3].recipientOrganizationId||"string"==typeof y[3].recipientOrganizationId)&&(null==y[3].metadata||Array.isArray(y[3].metadata)||null==y[3].metadata||y[3].metadata instanceof Object)){e.next=8;break}throw new TypeError("Value of argument 3 violates contract.\n\nExpected:\n{ senderOrganizationId: string;\n  recipientOrganizationId: ?string;\n  metadata: ?Array | ?Object;\n}\n\nGot:\n"+a({senderOrganizationId:d,recipientOrganizationId:p,metadata:v}));case 8:if("string"==typeof t){e.next=10;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 10:if("string"==typeof n){e.next=12;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 12:if("string"==typeof r){e.next=14;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 14:if(null!=y[3]&&"string"==typeof y[3].senderOrganizationId&&(null==y[3].recipientOrganizationId||"string"==typeof y[3].recipientOrganizationId)&&(null==y[3].metadata||Array.isArray(y[3].metadata)||null==y[3].metadata||y[3].metadata instanceof Object)){e.next=16;break}throw new TypeError("Value of argument 3 violates contract.\n\nExpected:\n{ senderOrganizationId: string;\n  recipientOrganizationId: ?string;\n  metadata: ?Array | ?Object;\n}\n\nGot:\n"+i({senderOrganizationId:d,recipientOrganizationId:p,metadata:v}));case 16:return J["default"].oneOf("counterPartyType",t,["user","group"]),J["default"].notEmpty("counterPartyId",n),v&&(v=W["default"].arrayWrap(v).map(function(t){return(0,I["default"])({mimetype:"application/json"},t)})),p||(p=d),this.host.requireUser(),u=this.host.conversations.ensureConversation(t,n,d),s=(0,W["default"])(this.host.models.Message.getAll()).orderBy(["sortNumber"],["desc"]).first(),c=s?s.sortNumber:0,f=c+1e-6,l=this.host.models.Message.createInstance({id:Z["default"].v4(),conversationId:u.id,counterPartyId:n,counterPartyType:t,body:r,senderOrganizationId:d,recipientOrganizationId:p,sortNumber:f,createdAt:new Date,senderId:this.host.getCurrentUser().id,direction:Y.MessageDirection.OUTGOING,senderStatus:Y.MessageSenderStatus.SENDING,$synced:!1,serverId:null,metadata:v}),"group"==t?(l.groupId=n,l.recipientStatus=Y.MessageRecipientStatus.NA):(l.recipientId=n,l.recipientStatus=Y.MessageRecipientStatus.NEW),this.host.models.Message.inject(l),this.host.emit("message:sending",l),e.next=31,this.host.api.messages.send({counterPartyId:n,body:r,senderOrganizationId:d,recipientOrganizationId:p,metadata:v,localId:l.id});case 31:return h=e.sent,(0,j["default"])(l,{serverId:h.serverId,ttl:h.ttl,senderStatus:Y.MessageSenderStatus.SENT,$synced:!0}),this.host.models.Message.inject(l),this.host.emit("message:sent",l),e.abrupt("return",l);case 36:case"end":return e.stop()}},e,this)}));return function(e,n,r,o){return t.apply(this,arguments)}}()},{key:"__prepareGroupForUsers",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n,r,o){var i,a,u=this,s=o.groupMetadata;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[this.host.getCurrentUser()].concat(n.map(function(t){return u.host.models.User.get(t)}).filter(Boolean)),r||(r=i.map(function(t){return t.displayName}).filter(Boolean).join(", ")||"Group"),e.next=4,this.host.groups.create({organizationId:t,name:r,replayHistory:!0,memberIds:n,metadata:s});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(e,n,r,o){return t.apply(this,arguments)}}()},{key:"onMessageRecalled",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));this.host.requireUser();var e=this._getMessageByServerId(t);e&&this._deleteLocalMessage(e)}},{key:"_deleteLocalMessage",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));this.host.models.Message.eject(t)}},{key:"recall",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:if(this.host.requireUser(),n=this._resolveMessage(t)){e.next=8;break}return e.abrupt("return");case 8:if(n.senderId==this.host.getCurrentUser().id){e.next=10;break}throw new tt["default"].PermissionDeniedError(n,n.serverId,"recall");case 10:if(n.$synced!==!1){e.next=14;break}this._deleteLocalMessage(n),e.next=17;break;case 14:return e.next=16,this.host.api.messages.destroy(n.serverId);case 16:this._deleteLocalMessage(n);case 17:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"reactToMessageStatusEvent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=t.client_id,n=t.is_recalled;n?this.onMessageRecalled(e):this.__setMessageStatusPerRecipientFromServerData(e,W["default"].pick(t,["status","account_id","timestamp"]))&&this.__touchMessage(e)}},{key:"__setMessageStatusPerRecipientFromServerData",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(!(e instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!(e instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(e));var n=Y.MessageRecipientStatus.resolve(e.status),r=e.account_id,o=e.timestamp;return this.setRecipientMessageStatus(t,r,n,o)}},{key:"setRecipientMessageStatus",value:function(t,e,n,r){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if(!(null==r||"string"==typeof r||null==r||r instanceof Date))throw new TypeError('Value of argument "createdAt" violates contract.\n\nExpected:\n?string | ?Date\n\nGot:\n'+a(r));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if(!(null==r||"string"==typeof r||null==r||r instanceof Date))throw new TypeError('Value of argument "createdAt" violates contract.\n\nExpected:\n?string | ?Date\n\nGot:\n'+i(r));var o=this._getMessageByServerId(t);if(o&&(n=Y.MessageRecipientStatus.resolve(n),e!==this.host.getCurrentUser().id)){"user"===o.counterPartyType&&this._setSingleUserMessageRecipientMessageStatus(o,n);var u=W["default"].find(o.statusesPerRecipient,{userId:e});if(!u||this.__canChangeRecipientStatus(u.status,n)){var s=o.id+":"+e;return this.host.models.MessageStatusPerRecipient.inject({id:s,messageId:o.id,userId:e,status:n,createdAt:r})}}}},{key:"__touchMessage",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));var e=this._resolveMessage(t);this.host.models.Message.inject({id:e.id})}},{key:"_resolveMessage",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));return this.host.models.Message.is(t)?t:this.host.models.Message.get(t)||this._getMessageByServerId(t)}},{key:"_getMessageByServerId",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));return this.host.models.Message.is(t)?t:(0,W["default"])(this.host.models.Message.getAll()).find({serverId:t})}},{key:"_setSingleUserMessageRecipientMessageStatus",value:function(t,e){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));this.__canChangeRecipientStatus(t.recipientStatus,e)&&this.host.models.Message.inject({id:t.id,recipientStatus:e})}},{key:"__canChangeRecipientStatus",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "fromStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "toStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "fromStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "toStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t===e?!1:t!==Y.MessageRecipientStatus.READ||e!=Y.MessageRecipientStatus.DELIVERED}},{key:"find",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o,u,s;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.next=7,this.httpClient.get("/message/:id",{urlParams:{id:t}});case 7:return n=e.sent,r=n.data,o=n.data.recipient_token,e.next=12,this.__lookupCounterParty(o);case 12:if(u=e.sent,!u){e.next=17;break}r.counterParty=u,e.next=18;break;case 17:return e.abrupt("return",null);case 18:return s=this.host.models.Message.inject(r),e.next=21,this.findStatusesPerRecipient(s);case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Message.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Message.getMulti(t)}},{key:"__lookupCounterParty",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o,u,s,c,f,l,h,d,p,v,y,g,m;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(r=[{model:this.host.models.User,finder:(n=this.host.users).find.bind(n)},{model:this.host.models.Group,finder:(n=this.host.groups).find.bind(n)}],r&&("function"==typeof r[A["default"]]||Array.isArray(r))){e.next=7;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+i(r));case 7:if(r&&("function"==typeof r[A["default"]]||Array.isArray(r))){e.next=9;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+a(r));case 9:o=!0,u=!1,s=void 0,e.prev=12,c=(0,E["default"])(r);case 14:if(o=(f=c.next()).done){e.next=22;break}if(l=f.value.model,h=l.get(t),!h){e.next=19;break}return e.abrupt("return",h);case 19:o=!0,e.next=14;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](12),u=!0,s=e.t0;case 28:e.prev=28,e.prev=29,!o&&c["return"]&&c["return"]();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);
case 35:return e.finish(28);case 36:if(r&&("function"==typeof r[A["default"]]||Array.isArray(r))){e.next=38;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+i(r));case 38:if(r&&("function"==typeof r[A["default"]]||Array.isArray(r))){e.next=40;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+a(r));case 40:d=!0,p=!1,v=void 0,e.prev=43,y=(0,E["default"])(r);case 45:if(d=(g=y.next()).done){e.next=62;break}return m=g.value.finder,e.prev=47,e.next=50,m(t);case 50:if(h=e.sent,!h){e.next=53;break}return e.abrupt("return",h);case 53:e.next=59;break;case 55:if(e.prev=55,e.t1=e["catch"](47),e.t1.code==tt["default"].NotFoundError.CODE){e.next=59;break}throw e.t1;case 59:d=!0,e.next=45;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e["catch"](43),p=!0,v=e.t2;case 68:e.prev=68,e.prev=69,!d&&y["return"]&&y["return"]();case 71:if(e.prev=71,!p){e.next=74;break}throw v;case 74:return e.finish(71);case 75:return e.finish(68);case 76:return e.abrupt("return",null);case 77:case"end":return e.stop()}},e,this,[[12,24,28,36],[29,,31,35],[43,64,68,76],[47,55],[69,,71,75]])}));return function(e){return t.apply(this,arguments)}}()},{key:"downloadAttachmentURL",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r,o;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||"number"==typeof n){e.next=4;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||"number"==typeof n){e.next=8;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+i(n));case 8:return r=this._resolveMessage(t),n=n.toString(),e.next=12,this.httpClient.downloadImageAndGetURL("/message/"+r.serverId+"/attachment/"+n);case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.next=7,this.httpClient["delete"]("/message/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getMessageCount",value:function(){return this.host.models.Message.getAll().length}},{key:"getTotalUnreadCount",value:function(){return W["default"].sumBy(this.host.models.Conversation.getAll(),"unreadCount")}},{key:"markAsRead",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.queue,o=void 0===r?!0:r;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+i(t));case 4:if(t=(0,W["default"])(t).chain().arrayWrap().map(this._resolveModelId.bind(this)).uniq().value(),!o){e.next=9;break}return e.abrupt("return",this.__queueMessageStatuses({readIds:t}));case 9:return e.abrupt("return",this.__setMessagesStatus({readIds:t}));case 10:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"markAsDelivered",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.queue,o=void 0===r?!0:r;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+i(t));case 4:if(t=(0,W["default"])(t).chain().arrayWrap().map(this._resolveModelId.bind(this)).uniq().value(),!o){e.next=9;break}return e.abrupt("return",this.__queueMessageStatuses({deliveredIds:t}));case 9:return e.abrupt("return",this.__setMessagesStatus({deliveredIds:t}));case 10:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"markAsReceived",value:function(){var t=(0,C["default"])(S["default"].mark(function e(){var t=arguments;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.markAsDelivered.apply(this,t));case 1:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"__queueMessageStatuses",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r=t.deliveredIds,o=t.readIds,u=arguments;return S["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=u[0]&&(null==u[0].deliveredIds||Array.isArray(u[0].deliveredIds)&&u[0].deliveredIds.every(function(t){return"string"==typeof t}))&&(null==u[0].readIds||Array.isArray(u[0].readIds)&&u[0].readIds.every(function(t){return"string"==typeof t}))){t.next=2;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ deliveredIds: ?Array<string>;\n  readIds: ?Array<string>;\n}\n\nGot:\n"+a({deliveredIds:r,readIds:o}));case 2:if(null!=u[0]&&(null==u[0].deliveredIds||Array.isArray(u[0].deliveredIds)&&u[0].deliveredIds.every(function(t){return"string"==typeof t}))&&(null==u[0].readIds||Array.isArray(u[0].readIds)&&u[0].readIds.every(function(t){return"string"==typeof t}))){t.next=4;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ deliveredIds: ?Array<string>;\n  readIds: ?Array<string>;\n}\n\nGot:\n"+i({deliveredIds:r,readIds:o}));case 4:if(r&&(this._queuedMessageStatuses.deliveredIds=W["default"].union(this._queuedMessageStatuses.deliveredIds,r)),o&&(this._queuedMessageStatuses.readIds=W["default"].union(this._queuedMessageStatuses.readIds,o)),n=this._queuedMessageStatuses.deliveredIds.length+this._queuedMessageStatuses.readIds.length,!(n>=this.config.flushMessageMaxCount)){t.next=12;break}return this.logger.log("reached "+this.config.flushMessageMaxCount+" -- flushing"),t.abrupt("return",this.__flushQueueMessageStatuses());case 12:this._throtelled_flushQueueMessageStatuses();case 13:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"__flushQueueMessageStatuses",value:function(){var t=this._queuedMessageStatuses.deliveredIds.length+this._queuedMessageStatuses.readIds.length;t>0&&(this.__setMessagesStatus(this._queuedMessageStatuses),this._queuedMessageStatuses.deliveredIds=[],this._queuedMessageStatuses.readIds=[])}},{key:"__setMessagesStatus",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o,i=this,a=t.deliveredIds,u=void 0===a?[]:a,s=t.readIds,c=void 0===s?[]:s;return S["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.host.requireUser(),u=(0,W["default"])(u).chain().map(this._resolveModelId.bind(this)).uniq().value(),c=(0,W["default"])(c).chain().map(this._resolveModelId.bind(this)).uniq().value(),n=u.map(this._resolveMessage).filter(Boolean),r=c.map(this._resolveMessage).filter(Boolean),c=W["default"].difference(c,(0,W["default"])(r).filter(function(t){return t.recipientStatus===Y.MessageRecipientStatus.READ||t.recipientStatus==Y.MessageRecipientStatus.TO_BE_READ}).map("id").value()),u=W["default"].difference(u,c,(0,W["default"])(n).filter(function(t){return t.recipientStatus===Y.MessageRecipientStatus.DELIVERED||t.recipientStatus===Y.MessageRecipientStatus.READ||t.recipientStatus==Y.MessageRecipientStatus.TO_BE_READ}).map("id").value()),o={},u.length&&(o.delivered=u),c.length&&(o.read=c,r.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:Y.MessageRecipientStatus.TO_BE_READ})})),!W["default"].isEmpty(o.delivered)||!W["default"].isEmpty(o.read)){t.next=12;break}return t.abrupt("return",!1);case 12:return t.next=14,this.httpClient.post("/message/status",{data:o});case 14:c.length&&(o.read=c,r.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:Y.MessageRecipientStatus.READ})})),u.length&&n.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:Y.MessageRecipientStatus.DELIVERED})});case 16:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findStatusesPerRecipient",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o,u,s=this;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:if(this.host.requireUser(),n=this._resolveMessage(t)){e.next=8;break}return e.abrupt("return",null);case 8:e.t0=n.counterPartyType,e.next="group"===e.t0?11:"user"===e.t0?21:23;break;case 11:return e.next=13,this.httpClient.get("/message/:id/status",{urlParams:{id:n.serverId}});case 13:if(r=e.sent,o=r.data,!o.is_recalled){e.next=18;break}return this.onMessageRecalled(n.serverId),e.abrupt("return");case 18:return u=o.statuses.map(function(t){return s.__setMessageStatusPerRecipientFromServerData(n.serverId,t)}).some(function(t){return t}),u&&this.__touchMessage(n),e.abrupt("break",23);case 21:return this.setRecipientMessageStatus(n.serverId,n.counterPartyId,n.recipientStatus,null)&&this.__touchMessage(n),e.abrupt("break",23);case 23:return e.abrupt("return",n.statusesPerRecipient);case 24:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"startTyping",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.abrupt("return",this.httpClient.post("/message/typing",{data:{recipient:t}}));case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"endTyping",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.abrupt("return",this.httpClient["delete"]("/message/typing/:recipientId",{urlParams:{recipientId:t}}));case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}($["default"]),o(h.prototype,"__prepareGroupForUsers",[u],(0,w["default"])(h.prototype,"__prepareGroupForUsers"),h.prototype),o(h.prototype,"_resolveMessage",[nt["default"]],(0,w["default"])(h.prototype,"_resolveMessage"),h.prototype),o(h.prototype,"find",[s],(0,w["default"])(h.prototype,"find"),h.prototype),o(h.prototype,"downloadAttachmentURL",[c],(0,w["default"])(h.prototype,"downloadAttachmentURL"),h.prototype),o(h.prototype,"destroy",[f],(0,w["default"])(h.prototype,"destroy"),h.prototype),o(h.prototype,"__flushQueueMessageStatuses",[nt["default"]],(0,w["default"])(h.prototype,"__flushQueueMessageStatuses"),h.prototype),o(h.prototype,"findStatusesPerRecipient",[l],(0,w["default"])(h.prototype,"findStatusesPerRecipient"),h.prototype),h);e["default"]=rt,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(175),__esModule:!0}},function(t,e,n){n(36),n(19),t.exports=n(176)},function(t,e,n){var r=n(50),o=n(66);t.exports=n(4).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r;(function(o){!function(i){"use strict";function a(){var t=i.crypto||i.msCrypto;if(!h&&t&&t.getRandomValues)try{var e=new Uint8Array(16);v=h=function(){return t.getRandomValues(e),e},h()}catch(n){}if(!h){var r=new Array(16);d=h=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function u(){try{var t=n(178).randomBytes;p=h=t&&function(){return t(16)},h()}catch(e){}}function s(t,e,n){var r=e&&n||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(e[r+o++]=m[t])});16>o;)e[r+o++]=0;return e}function c(t,e){var n=e||0,r=g;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function f(t,e,n){var r=e&&n||0,o=e||[];t=t||{};var i=null!=t.clockseq?t.clockseq:E,a=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:A+1,s=a-x+(u-A)/1e4;if(0>s&&null==t.clockseq&&(i=i+1&16383),(0>s||a>x)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=a,A=u,E=i,a+=122192928e5;var f=(1e4*(268435455&a)+u)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var l=a/4294967296*1e4&268435455;o[r++]=l>>>8&255,o[r++]=255&l,o[r++]=l>>>24&15|16,o[r++]=l>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var h=t.node||_,d=0;6>d;d++)o[r+d]=h[d];return e?e:c(o)}function l(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new y(16):null,t=null),t=t||{};var o=t.random||(t.rng||h)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;16>i;i++)e[r+i]=o[i];return e||c(o)}var h,d,p,v;i?a():u();for(var y="function"==typeof o?o:Array,g=[],m={},b=0;256>b;b++)g[b]=(b+256).toString(16).substr(1),m[g[b]]=b;var w=h(),_=[1|w[0],w[1],w[2],w[3],w[4],w[5]],E=16383&(w[6]<<8|w[7]),x=0,A=0,O=l;O.v1=f,O.v4=l,O.parse=s,O.unparse=c,O.BufferClass=y,O._rng=h,O._mathRNG=d,O._nodeRNG=p,O._whatwgRNG=v,"undefined"!=typeof t&&t.exports?t.exports=O:(r=function(){return O}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}("undefined"!=typeof window?window:null)}).call(e,n(102).Buffer)},function(t,e,n){(function(t){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(t,e){for(var n in t)e(t[n],n)}var i=n(179);e.createHash=n(181),e.createHmac=n(190),e.randomBytes=function(e,n){if(!n||!n.call)return new t(i(e));try{n.call(this,void 0,new t(i(e)))}catch(r){n(r)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var a=n(191)(e);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync,o(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){r("sorry,",t,"is not implemented yet")}})}).call(e,n(102).Buffer)},function(t,e,n){(function(e,r){!function(){var o=("undefined"==typeof window?e:window)||{};_crypto=o.crypto||o.msCrypto||n(180),t.exports=function(t){if(_crypto.getRandomValues){var e=new r(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),n(102).Buffer)},function(t,e){},function(t,e,n){(function(e){function r(t){return function(){var n=[],r={update:function(t,r){return e.isBuffer(t)||(t=new e(t,r)),n.push(t),this},digest:function(r){var o=e.concat(n),i=t(o);return n=null,r?i.toString(r):i}};return r}}var o=n(182),i=r(n(187)),a=r(n(189));t.exports=function(t){return"md5"===t?new i:"rmd160"===t?new a:o(t)}}).call(e,n(102).Buffer)},function(t,e,n){var e=t.exports=function(t){var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n},r=n(102).Buffer,o=n(183)(r);e.sha1=n(184)(r,o),e.sha256=n(185)(r,o),e.sha512=n(186)(r,o)},function(t,e){t.exports=function(t){function e(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var r=this._len+=e.length,o=this._s=this._s||0,i=0,a=this._block;r>o;){for(var u=Math.min(e.length,i+this._blockSize-o%this._blockSize),s=u-i,c=0;s>c;c++)a[o%this._blockSize+c]=e[c+i];o+=s,i+=s,o%this._blockSize===0&&this._update(a)}return this._s=o,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,n){var r=n(170).inherits;t.exports=function(t,e){function n(){return p.length?p.pop().init():this instanceof n?(this._w=d,e.call(this,64,56),this._h=null,void this.init()):new n}function o(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function a(t,e){return t+e|0}function u(t,e){return t<<e|t>>>32-e}var s=0,c=4,f=8,l=12,h=16,d=new("undefined"==typeof Int32Array?Array:Int32Array)(80),p=[];return r(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},n.prototype._POOL=p,n.prototype._update=function(t){var e,n,r,s,c,f,l,h,d,p;e=f=this._a,n=l=this._b,r=h=this._c,s=d=this._d,c=p=this._e;for(var v=this._w,y=0;80>y;y++){var g=v[y]=16>y?t.readInt32BE(4*y):u(v[y-3]^v[y-8]^v[y-14]^v[y-16],1),m=a(a(u(e,5),o(y,n,r,s)),a(a(c,g),i(y)));c=s,s=r,r=u(n,30),n=e,e=m}this._a=a(e,f),this._b=a(n,l),this._c=a(r,h),this._d=a(s,d),this._e=a(c,p)},n.prototype._hash=function(){p.length<100&&p.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,s),e.writeInt32BE(0|this._b,c),e.writeInt32BE(0|this._c,f),e.writeInt32BE(0|this._d,l),e.writeInt32BE(0|this._e,h),e},n}},function(t,e,n){var r=n(170).inherits;t.exports=function(t,e){function n(){this.init(),this._w=d,e.call(this,64,56)}function o(t,e){return t>>>e|t<<32-e}function i(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function u(t,e,n){return t&e^t&n^e&n}function s(t){return o(t,2)^o(t,13)^o(t,22)}function c(t){return o(t,6)^o(t,11)^o(t,25)}function f(t){return o(t,7)^o(t,18)^i(t,3)}function l(t){return o(t,17)^o(t,19)^i(t,10)}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,o,i,d,p,v,y,g,m=this._w;e=0|this._a,n=0|this._b,r=0|this._c,o=0|this._d,i=0|this._e,d=0|this._f,p=0|this._g,v=0|this._h;for(var b=0;64>b;b++){var w=m[b]=16>b?t.readInt32BE(4*b):l(m[b-2])+m[b-7]+f(m[b-15])+m[b-16];y=v+c(i)+a(i,d,p)+h[b]+w,g=s(e)+u(e,n,r),v=p,p=d,d=i,i=o+y,o=r,r=n,n=e,e=y+g}this._a=e+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=i+this._e|0,this._f=d+this._f|0,this._g=p+this._g|0,this._h=v+this._h|0},n.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},n}},function(t,e,n){var r=n(170).inherits;t.exports=function(t,e){function n(){this.init(),this._w=s,e.call(this,128,112)}function o(t,e,n){return t>>>n|e<<32-n}function i(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}var u=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,s,c,f,l,h,d,p,v,y,g,m,b,w,_=this._w;e=0|this._a,n=0|this._b,r=0|this._c,s=0|this._d,c=0|this._e,f=0|this._f,l=0|this._g,h=0|this._h,d=0|this._al,p=0|this._bl,v=0|this._cl,y=0|this._dl,g=0|this._el,m=0|this._fl,b=0|this._gl,w=0|this._hl;for(var E=0;80>E;E++){var x,A,O=2*E;if(16>E)x=_[O]=t.readInt32BE(4*O),A=_[O+1]=t.readInt32BE(4*O+4);else{var j=_[O-30],k=_[O-30+1],I=o(j,k,1)^o(j,k,8)^j>>>7,T=o(k,j,1)^o(k,j,8)^o(k,j,7);j=_[O-4],k=_[O-4+1];var S=o(j,k,19)^o(k,j,29)^j>>>6,M=o(k,j,19)^o(j,k,29)^o(k,j,6),C=_[O-14],P=_[O-14+1],B=_[O-32],D=_[O-32+1];A=T+P,x=I+C+(T>>>0>A>>>0?1:0),A+=M,x=x+S+(M>>>0>A>>>0?1:0),A+=D,x=x+B+(D>>>0>A>>>0?1:0),_[O]=x,_[O+1]=A}var R=a(e,n,r),G=a(d,p,v),L=o(e,d,28)^o(d,e,2)^o(d,e,7),z=o(d,e,28)^o(e,d,2)^o(e,d,7),F=o(c,g,14)^o(c,g,18)^o(g,c,9),V=o(g,c,14)^o(g,c,18)^o(c,g,9),N=u[O],U=u[O+1],$=i(c,f,l),q=i(g,m,b),W=w+V,K=h+F+(w>>>0>W>>>0?1:0);W+=q,K=K+$+(q>>>0>W>>>0?1:0),W+=U,K=K+N+(U>>>0>W>>>0?1:0),W+=A,K=K+x+(A>>>0>W>>>0?1:0);var H=z+G,Z=L+R+(z>>>0>H>>>0?1:0);h=l,w=b,l=f,b=m,f=c,m=g,g=y+W|0,c=s+K+(y>>>0>g>>>0?1:0)|0,s=r,y=v,r=n,v=p,n=e,p=d,d=W+H|0,e=K+Z+(W>>>0>d>>>0?1:0)|0}this._al=this._al+d|0,this._bl=this._bl+p|0,this._cl=this._cl+v|0,this._dl=this._dl+y|0,this._el=this._el+g|0,this._fl=this._fl+m|0,this._gl=this._gl+b|0,this._hl=this._hl+w|0,this._a=this._a+e+(this._al>>>0<d>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<v>>>0?1:0)|0,this._d=this._d+s+(this._dl>>>0<y>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<g>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+l+(this._gl>>>0<b>>>0?1:0)|0,this._h=this._h+h+(this._hl>>>0<w>>>0?1:0)|0},n.prototype._hash=function(){function e(t,e,r){n.writeInt32BE(t,r),n.writeInt32BE(e,r+4)}var n=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),n},n}},function(t,e,n){function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,o=-1732584194,f=271733878,l=0;l<t.length;l+=16){var h=n,d=r,p=o,v=f;n=i(n,r,o,f,t[l+0],7,-680876936),f=i(f,n,r,o,t[l+1],12,-389564586),o=i(o,f,n,r,t[l+2],17,606105819),r=i(r,o,f,n,t[l+3],22,-1044525330),n=i(n,r,o,f,t[l+4],7,-176418897),f=i(f,n,r,o,t[l+5],12,1200080426),o=i(o,f,n,r,t[l+6],17,-1473231341),r=i(r,o,f,n,t[l+7],22,-45705983),n=i(n,r,o,f,t[l+8],7,1770035416),f=i(f,n,r,o,t[l+9],12,-1958414417),o=i(o,f,n,r,t[l+10],17,-42063),r=i(r,o,f,n,t[l+11],22,-1990404162),n=i(n,r,o,f,t[l+12],7,1804603682),f=i(f,n,r,o,t[l+13],12,-40341101),o=i(o,f,n,r,t[l+14],17,-1502002290),r=i(r,o,f,n,t[l+15],22,1236535329),n=a(n,r,o,f,t[l+1],5,-165796510),f=a(f,n,r,o,t[l+6],9,-1069501632),o=a(o,f,n,r,t[l+11],14,643717713),r=a(r,o,f,n,t[l+0],20,-373897302),n=a(n,r,o,f,t[l+5],5,-701558691),f=a(f,n,r,o,t[l+10],9,38016083),o=a(o,f,n,r,t[l+15],14,-660478335),r=a(r,o,f,n,t[l+4],20,-405537848),n=a(n,r,o,f,t[l+9],5,568446438),f=a(f,n,r,o,t[l+14],9,-1019803690),o=a(o,f,n,r,t[l+3],14,-187363961),r=a(r,o,f,n,t[l+8],20,1163531501),n=a(n,r,o,f,t[l+13],5,-1444681467),f=a(f,n,r,o,t[l+2],9,-51403784),o=a(o,f,n,r,t[l+7],14,1735328473),r=a(r,o,f,n,t[l+12],20,-1926607734),n=u(n,r,o,f,t[l+5],4,-378558),f=u(f,n,r,o,t[l+8],11,-2022574463),o=u(o,f,n,r,t[l+11],16,1839030562),r=u(r,o,f,n,t[l+14],23,-35309556),n=u(n,r,o,f,t[l+1],4,-1530992060),f=u(f,n,r,o,t[l+4],11,1272893353),o=u(o,f,n,r,t[l+7],16,-155497632),r=u(r,o,f,n,t[l+10],23,-1094730640),n=u(n,r,o,f,t[l+13],4,681279174),f=u(f,n,r,o,t[l+0],11,-358537222),o=u(o,f,n,r,t[l+3],16,-722521979),r=u(r,o,f,n,t[l+6],23,76029189),n=u(n,r,o,f,t[l+9],4,-640364487),f=u(f,n,r,o,t[l+12],11,-421815835),o=u(o,f,n,r,t[l+15],16,530742520),r=u(r,o,f,n,t[l+2],23,-995338651),n=s(n,r,o,f,t[l+0],6,-198630844),f=s(f,n,r,o,t[l+7],10,1126891415),o=s(o,f,n,r,t[l+14],15,-1416354905),r=s(r,o,f,n,t[l+5],21,-57434055),n=s(n,r,o,f,t[l+12],6,1700485571),f=s(f,n,r,o,t[l+3],10,-1894986606),o=s(o,f,n,r,t[l+10],15,-1051523),r=s(r,o,f,n,t[l+1],21,-2054922799),n=s(n,r,o,f,t[l+8],6,1873313359),f=s(f,n,r,o,t[l+15],10,-30611744),o=s(o,f,n,r,t[l+6],15,-1560198380),r=s(r,o,f,n,t[l+13],21,1309151649),n=s(n,r,o,f,t[l+4],6,-145523070),f=s(f,n,r,o,t[l+11],10,-1120210379),o=s(o,f,n,r,t[l+2],15,718787259),r=s(r,o,f,n,t[l+9],21,-343485551),n=c(n,h),r=c(r,d),o=c(o,p),f=c(f,v)}return Array(n,r,o,f)}function o(t,e,n,r,o,i){return c(f(c(c(e,t),c(r,i)),o),n)}function i(t,e,n,r,i,a,u){return o(e&n|~e&r,t,e,i,a,u)}function a(t,e,n,r,i,a,u){return o(e&r|n&~r,t,e,i,a,u)}function u(t,e,n,r,i,a,u){return o(e^n^r,t,e,i,a,u)}function s(t,e,n,r,i,a,u){return o(n^(e|~r),t,e,i,a,u)}function c(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function f(t,e){return t<<e|t>>>32-e}var l=n(188);t.exports=function(t){return l.hash(t,r,16)}},function(t,e,n){(function(e){function n(t,n){if(t.length%i!==0){var r=t.length+(i-t.length%i);t=e.concat([t,a],r)}for(var o=[],u=n?t.readInt32BE:t.readInt32LE,s=0;s<t.length;s+=i)o.push(u.call(t,s));return o}function r(t,n,r){for(var o=new e(n),i=r?o.writeInt32BE:o.writeInt32LE,a=0;a<t.length;a++)i.call(o,t[a],4*a,!0);return o}function o(t,o,i,a){e.isBuffer(t)||(t=new e(t));var s=o(n(t,a),t.length*u);return r(s,i,a)}var i=4,a=new e(i);a.fill(0);var u=8;t.exports={hash:o}}).call(e,n(102).Buffer)},function(t,e,n){(function(e){function n(t,e,n){return t^e^n}function r(t,e,n){return t&e|~t&n}function o(t,e,n){return(t|~e)^n}function i(t,e,n){return t&n|e&~n}function a(t,e,n){return t^(e|~n)}function u(t,e){return t<<e|t>>>32-e}function s(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var r=v(t),o=8*t.length,i=8*t.length;r[o>>>5]|=128<<24-o%32,r[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var a=0;a<r.length;a+=16)g(n,r,a);for(var a=0;5>a;a++){var u=n[a];n[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=y(n);return new e(s)}t.exports=s;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],v=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},y=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},g=function(t,e,s){for(var v=0;16>v;v++){var y=s+v,g=e[y];e[y]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var m,b,w,_,E,x,A,O,j,k;x=m=t[0],A=b=t[1],O=w=t[2],j=_=t[3],k=E=t[4];for(var I,v=0;80>v;v+=1)I=m+e[s+c[v]]|0,I+=16>v?n(b,w,_)+d[0]:32>v?r(b,w,_)+d[1]:48>v?o(b,w,_)+d[2]:64>v?i(b,w,_)+d[3]:a(b,w,_)+d[4],
I=0|I,I=u(I,l[v]),I=I+E|0,m=E,E=_,_=u(w,10),w=b,b=I,I=x+e[s+f[v]]|0,I+=16>v?a(A,O,j)+p[0]:32>v?i(A,O,j)+p[1]:48>v?o(A,O,j)+p[2]:64>v?r(A,O,j)+p[3]:n(A,O,j)+p[4],I=0|I,I=u(I,h[v]),I=I+k|0,x=k,k=j,j=u(O,10),O=A,A=I;I=t[1]+w+j|0,t[1]=t[2]+_+k|0,t[2]=t[3]+E+x|0,t[3]=t[4]+m+A|0,t[4]=t[0]+b+O|0,t[0]=I}}).call(e,n(102).Buffer)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);this._opad=s,this._alg=t;var a="sha512"===t?128:64;n=this._key=e.isBuffer(n)?n:new e(n),n.length>a?n=o(t).update(n).digest():n.length<a&&(n=e.concat([n,i],a));for(var u=this._ipad=new e(a),s=this._opad=new e(a),c=0;a>c;c++)u[c]=54^n[c],s[c]=92^n[c];this._hash=o(t).update(u)}var o=n(181),i=new e(128);i.fill(0),t.exports=r,r.prototype.update=function(t,e){return this._hash.update(t,e),this},r.prototype.digest=function(t){var e=this._hash.digest();return o(this._alg).update(this._opad).update(e).digest(t)}}).call(e,n(102).Buffer)},function(t,e,n){var r=n(192);t.exports=function(t,e){e=e||{};var n=r(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},function(t,e,n){(function(e){t.exports=function(t){function n(t,e,n,o,i,a){if("function"==typeof i&&(a=i,i=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var u;try{u=r(t,e,n,o,i)}catch(s){return a(s)}a(void 0,u)})}function r(n,r,o,i,a){if("number"!=typeof o)throw new TypeError("Iterations not a number");if(0>o)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(0>i)throw new TypeError("Bad key length");a=a||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(r)||(r=new e(r));var u,s,c,f=1,l=new e(i),h=new e(r.length+4);r.copy(h,0,0,r.length);for(var d=1;f>=d;d++){h.writeUInt32BE(d,r.length);var p=t.createHmac(a,n).update(h).digest();if(!u&&(u=p.length,c=new e(u),f=Math.ceil(i/u),s=i-(f-1)*u,i>(Math.pow(2,32)-1)*u))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,u);for(var v=1;o>v;v++){p=t.createHmac(a,n).update(p).digest();for(var y=0;u>y;y++)c[y]^=p[y]}var g=(d-1)*u,m=d==f?s:u;c.copy(l,g,0,m)}return l}return{pbkdf2:n,pbkdf2Sync:r}}}).call(e,n(102).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={MessageRecipientStatus:n(194),MessageSenderStatus:n(199),MessageDirection:n(200),PresenceStatus:n(201),GroupType:n(202)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(118),i=r(o),a=n(195),u=r(a),s=new u["default"]({READ:{serverKey:"Read"},TO_BE_READ:{serverKey:"ToBeRead"},DELIVERED:{serverKey:"Delivered"},RECEIVED_ON_CLIENT:{serverKey:"ReceivedOnClient"},NEW:{serverKey:"New"},NA:{key:"NA"}}),c=i["default"].reduce(s.entries,function(t,e){return t[e.key]=e.serverKey,t},{}),f=i["default"].invert(c);s.fromServer=function(t){return f[t]},s.toServer=function(t){return c[t]||f[t]},s.resolve=function(t){return this.isValid(t)?t:this.fromServer(t)},e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(196),i=r(o),a=n(128),u=r(a),s=n(88),c=r(s),f=n(89),l=r(f),h=function(){function t(e){(0,c["default"])(this,t),Array.isArray(e)&&(e=e.reduce(function(t,e){return t[e]={},t},{})),this.keys=[],this.entries=[],this.entriesByKey={};for(var n in e){this[n]=n;var r=(0,u["default"])({key:n},e[n]);this.entriesByKey[n]=r,this.entries.push(r),this.keys.push(n)}(0,i["default"])(this.keys),(0,i["default"])(this.entries),(0,i["default"])(this.entriesByKey)}return(0,l["default"])(t,[{key:"resolve",value:function(t){return t}},{key:"isValid",value:function(t){return!!this.entriesByKey[t]}}]),t}();e["default"]=h,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(197),__esModule:!0}},function(t,e,n){n(198),t.exports=n(4).Object.freeze},function(t,e,n){var r=n(51);n(10)("freeze",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(195),i=r(o),a=new i["default"](["SENDING","SENT","FAILED","NEW","NA"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(195),i=r(o),a=new i["default"](["INCOMING","OUTGOING"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(118),i=r(o),a=n(195),u=r(a),s=new u["default"]({UNKNOWN:{serverKey:"unknown"},AVAILABLE:{serverKey:"available"},UNAVAILABLE:{serverKey:"unavailable"}}),c=i["default"].reduce(s.entries,function(t,e){return t[e.key]=e.serverKey,t},{}),f=i["default"].invert(c);s.fromServer=function(t){return f[t]},s.resolve=function(t){return this.isValid(t)?t:this.fromServer(t)},e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(195),i=r(o),a=new i["default"](["GROUP","ROOM","DISTRIBUTION_LIST"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(116),u=r(a),s={isOneOf:function(t,e,n){return n.includes(e)},isNotEmpty:function(t,e){return!!e},raise:function(t){var e=arguments.length<=1||void 0===arguments[1]?"invalid":arguments[1],n=arguments[2];throw new u["default"](t,e,n)}};(0,i["default"])(s).forEach(function(t){var e=t.replace(/^is([A-Z])/,function(t,e){return e.toLowerCase()}),n=s[t];s[e]=function(t,e,r){for(var o=arguments.length,i=Array(o>3?o-3:0),a=3;o>a;a++)i[a-3]=arguments[a];n.apply(void 0,[t,e,r].concat(i))||s.raise(t,void 0,r)}}),e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return 1===e.length?r.apply(void 0,e):o.apply(void 0,e)}function r(t){var e=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach(function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,o(t,e,n))}}),t}function o(t,e,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+typeof r);return{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e))return r;var n=r.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,y["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,p["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,h["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,y["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,p["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,h["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l=n(2),h=r(l),d=n(5),p=r(d),v=n(16),y=r(v),g=n(132),m=r(g),b=n(128),w=r(b),_=n(57),E=r(_),x=n(93),A=r(x),O=n(78),j=r(O),k=n(87),I=r(k),T=n(108),S=r(T),M=n(88),C=r(M),P=n(89),B=r(P),D=n(111),R=r(D),G=n(112),L=r(G),z=n(136),F=r(z),V=n(106),N=r(V),U=n(118),$=r(U),q=n(119),W=(u=(0,q.decorator)(),s=(0,q.decorator)({memoize:!0}),c=(0,q.decorator)(),f=function(t){function e(){return(0,C["default"])(this,e),(0,R["default"])(this,(0,S["default"])(e).apply(this,arguments))}return(0,L["default"])(e,t),(0,B["default"])(e,[{key:"dispose",value:function(){q.decorator.clear(this.findAll)}},{key:"create",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n,r,o=t.organizationId,i=t.name,a=t.avatarFile,u=t.replayHistory,s=void 0===u?!0:u,c=t.memberIds,f=void 0===c?[]:c,l=t.metadata;return j["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.host.requireUser(),o){t.next=3;break}throw new N["default"].ValidationError("organizationId","required");case 3:return f=f.map(this._resolveModelId.bind(this)),f.includes(this.host.getCurrentUser().id)||f.unshift(this.host.getCurrentUser().id),t.next=7,this.host.api.groups.create({name:i,avatarFile:a,replayHistory:s,memberIds:f,organizationId:o});case 7:if(n=t.sent,r=this.host.models.Group.inject(n),!l){t.next=12;break}return t.next=12,this.host.metadata.update(r.id,l,o);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t,n){var r,o=n.name,u=n.avatarFile,s=n.replayHistory,c=n.memberIds,f=n.metadata;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),c.includes(this.host.getCurrentUser().id)||c.unshift(this.host.getCurrentUser().id),e.next=9,this.host.api.groups.update(t,{name:o,avatarFile:u,replayHistory:s,memberIds:c});case 9:if(r=this.host.models.Group.inject({id:t,name:o,replayHistory:s,memberIds:c}),!f){e.next=13;break}return e.next=13,this.host.metadata.update(t,f,r.organizationId);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n,r,o,u=this,s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(s=$["default"].defaults(s,{ignoreNotFound:!1,bypassCache:!1,includeMembers:!1,includeMetadata:!1}),this.host.requireUser(),n=null,s.bypassCache){e.next=11;break}if(n=this.host.models.Group.get(t),!n){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.groups.find(t);case 13:if(r=e.sent,!r){e.next=18;break}n=this.host.models.Group.inject(r),e.next=20;break;case 18:if(s.ignoreNotFound){e.next=20;break}throw new N["default"].NotFoundError(this.host.models.Group.name,t);case 20:if(!n){e.next=27;break}if(o=[],s.includeMetadata&&o.push(this.host.metadata.find(t,n.organizationId)),s.includeMembers&&o.push.apply(o,(0,A["default"])(n.memberIds.map(function(t){return u.host.users.find(t,{ignoreNotFound:!0})}))),!(o.length>0)){e.next=27;break}return e.next=27,E["default"].all(o);case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=(0,I["default"])(j["default"].mark(function e(){var t,n,r,o,i,a=this,u=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],s=u.includeMembers,c=void 0===s?!1:s,f=u.includeMetadata,l=void 0===f?!1:f;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.host.models.Organization.getAll(),0!=t.length){e.next=5;break}return e.next=4,this.host.organizations.findAll();case 4:t=e.sent;case 5:return e.next=7,this.host.search.query({types:["group"],organizationIds:t.map(function(t){return t.id}),query:{displayName:""},includeMetadata:l});case 7:if(n=e.sent,r=n.map(function(t){return t.entity}),!c){e.next=16;break}if(o=[],i=(0,$["default"])(r).map("memberIds").flatten().uniq().value(),o.push.apply(o,(0,A["default"])(i.map(function(t){return a.host.users.find(t,{ignoreNotFound:!0})}))),!(o.length>0)){e.next=16;break}return e.next=16,E["default"].all(o);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findWithSpecificMembers",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(t));case 2:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(t));case 4:if(t=$["default"].arrayWrap(t).map(this._resolveModelId.bind(this)),$["default"].contain(t,this.host.getCurrentUser().id),n=this.__findLocalWithSpecificMembers(t)){e.next=11;break}return e.next=10,this.findAll();case 10:n=this.__findLocalWithSpecificMembers(t);case 11:return e.abrupt("return",n||null);case 12:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"ensureMembers",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n=this;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));case 2:if(t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));case 4:t.memberIds.forEach(function(t){var e;n.host.models.User.ensureEntityOrCreateTemporaryAndFind({id:t,displayName:"Loading..."},{finder:(e=n.host.users).find.bind(e)})});case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Groups.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Groups.getMulti(t)}},{key:"__findLocalWithSpecificMembers",value:function(t){var e=this.host.models.Group.getAll(),n=$["default"].find(e,function(e){return 0==$["default"].xor(e.memberIds,t).length});return n||null}},{key:"destroy",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),e.next=8,this.host.api.groups.destroy(t);case 8:if(n=e.sent){e.next=11;break}throw new N["default"].NotFoundError(this.host.models.Group.name,t);case 11:return this.host.models.Group.eject(t),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findAllMemberIds",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t){var n;return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),e.next=8,this.httpClient.get("/group/:id/members",{urlParams:{id:t}});case 8:return n=e.sent,e.abrupt("return",n.data);case 10:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addMembers",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t,n){return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=8;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(n));case 8:return this.host.requireUser(),t=this._resolveModelId(t),n=$["default"].arrayWrap(n).map(this._resolveModelId.bind(this)),e.next=13,this.httpClient.post("/group/:id/members",{urlParams:{id:t},data:{members:n}});case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeMembers",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t,n){return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=8;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(n));case 8:return this.host.requireUser(),t=this._resolveModelId(t),n=$["default"].arrayWrap(n).map(this._resolveModelId.bind(this)),e.next=13,this.httpClient.post("/group/:id/members/remove",{urlParams:{id:t},data:{members:n}});case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"addMember",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t,n){return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||n instanceof Object){e.next=8;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.addMembers(t,[n]));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeMember",value:function(){var t=(0,I["default"])(j["default"].mark(function e(t,n){return j["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||n instanceof Object){e.next=8;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.removeMembers(t,[n]));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"reactToBangEvent",value:function(t){switch(t.event){case"added":this.__addedToGroup(t);break;case"removed":this.__removedFromGroup(t)}}},{key:"__addedToGroup",value:function(t){var e=t.caller_entity,n=t.subject_entity,r=t.target_entity;if(e&&e.token&&r&&r.token&&n&&n.token){var o=this.host.injectModel(e),i=this.host.injectModel(n),a=this.host.injectModel((0,w["default"])({organizationId:t.organization_id},r)),u=$["default"].map([o,i],"id");a.memberIds=$["default"].contain.apply($["default"],[a.memberIds||[]].concat((0,A["default"])(u)))}}},{key:"__removedFromGroup",value:function(t){var e=t.subject_entity,n=t.target_entity;if(n&&n.token&&e&&e.token){var r=this.host.models.Group.get(n.token),o=e.token;r&&r.memberIds&&(r.memberIds=$["default"].pull(r.memberIds,o))}}}]),e}(F["default"]),o(f.prototype,"find",[u],(0,m["default"])(f.prototype,"find"),f.prototype),o(f.prototype,"findAll",[s],(0,m["default"])(f.prototype,"findAll"),f.prototype),o(f.prototype,"findWithSpecificMembers",[c],(0,m["default"])(f.prototype,"findWithSpecificMembers"),f.prototype),f);e["default"]=W,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,d["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,l["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,d["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,l["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f=n(2),l=r(f),h=n(5),d=r(h),p=n(16),v=r(p),y=n(132),g=r(y),m=n(128),b=r(m),w=n(78),_=r(w),E=n(87),x=r(E),A=n(108),O=r(A),j=n(88),k=r(j),I=n(89),T=r(I),S=n(111),M=r(S),C=n(112),P=r(C),B=n(136),D=r(B),R=n(119),G=n(106),L=r(G),z=n(118),F=r(z),V=n(207),N=r(V),U=n(208),$=r(U),q=n(204),W=r(q),K=(u=(0,R.decorator)({memoize:!0}),s=(0,R.decorator)(),c=function(t){function e(){return(0,k["default"])(this,e),(0,M["default"])(this,(0,O["default"])(e).apply(this,arguments))}return(0,P["default"])(e,t),(0,T["default"])(e,[{key:"mounted",value:function(){this.host.models.Conversation.on("afterInject",this._onConversationChange),this.host.models.Conversation.on("afterEject",this._onConversationChange)}},{key:"dispose",value:function(){this.host.models.Conversation.off("afterInject",this._onConversationChange),this.host.models.Conversation.off("afterEject",this._onConversationChange),R.decorator.clear(this.findAll)}},{key:"create",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{name:void 0,ttl:void 0,dor:void 0,allowPublicGroups:void 0,pinLock:void 0,settingsRestricted:void 0,autologoutTime:void 0,lifecycleCallback:void 0,groupLifespan:void 0,welcomeEmailSettings:void 0}:arguments[0];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),e.abrupt("return",this.httpClient.post("/organization",{data:n}).then(function(e){var r=e.getHeader("TT-X-Organization-Key"),o=t.host.models.Organization.inject({id:r,name:n.name});return o}));case 2:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){var t,n=this,r=arguments.length<=0||void 0===arguments[0]?{id:void 0,name:void 0,ttl:void 0,dor:void 0,allowPublicGroups:void 0,pinLock:void 0,settingsRestricted:void 0,autologoutTime:void 0,lifecycleCallback:void 0,groupLifespan:void 0,welcomeEmailSettings:void 0,welcomeEmailLogo:void 0,autoSendWelcomeEmail:void 0}:arguments[0];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),t=N["default"].underscoreObject({name:r.name,ttl:r.ttl,dor:r.dor,allowPublicGroups:r.allowPublicGroups,pinLock:r.pinLock,settingsRestricted:r.settingsRestricted,autologoutTime:r.autologoutTime,lifecycleCallback:r.lifecycleCallback,groupLifespan:r.groupLifespan,welcomeEmailSettings:r.welcomeEmailSettings,welcomeEmailLogo:r.welcomeEmailLogo,autoSendWelcomeEmail:r.autoSendWelcomeEmail}),e.abrupt("return",this.httpClient.post("/organization/:id",{urlParams:{id:r.id},data:t}).then(function(e){var o=n.host.models.Organization.inject((0,b["default"])({id:r.id},t));return o}));case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=(0,x["default"])(_["default"].mark(function e(){var t,n=this,r=arguments.length<=0||void 0===arguments[0]?{onlyApproved:!1}:arguments[0];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),e.next=3,this.host.api.organizations.findAllOfUser(this.host.getCurrentUser().id);case 3:return t=e.sent,t=t.map(function(t){return n.host.models.Organization.inject(t)}),r.onlyApproved&&(t=F["default"].filter(t,{pending:!1})),t=F["default"].sortBy(t,function(t){return t.name.toLowerCase()}),t.forEach(function(t){return n.__reloadConversations(t)}),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,x["default"])(_["default"].mark(function e(t){var n,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(o=F["default"].defaults(o,{ignoreNotFound:!1,bypassCache:!1}),this.host.requireUser(),n=void 0,o.bypassCache){e.next=11;break}if(n=this.host.models.Organization.get(t),!n){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.organizations.find(this.host.getCurrentUser().id,t);case 13:if(r=e.sent,!r){e.next=19;break}n=this.host.models.Organization.inject(r),this.__reloadConversations(n),e.next=21;break;case 19:if(o.ignoreNotFound){e.next=21;break}throw new L["default"].NotFoundError(this.host.models.Organization.name,t);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));
return this.host.models.Organization.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Organization.getMulti(t)}},{key:"_onConversationChange",value:function(t,e){this.__reloadConversations(e.organization)}},{key:"__reloadConversations",value:function(t){if(t){var e=F["default"].pick(t,["conversations","unreadCount"]),n=(0,F["default"])(this.host.models.Conversation.getAll()).filter({organizationId:t.id}).orderBy(["lastEventMessageSortNumber","_origIndex"],["desc","asc"]).value(),r=F["default"].sumBy(n,function(t){return t.unreadCount}),o={conversations:n,unreadCount:r},i=!1;F["default"].each(e,function(e,n){(0,$["default"])(e,o[n])||(t[n]=o[n],i=!0)}),i&&this.host.models.Organization.inject(t)}}}]),e}(D["default"]),o(c.prototype,"findAll",[u],(0,g["default"])(c.prototype,"findAll"),c.prototype),o(c.prototype,"find",[s],(0,g["default"])(c.prototype,"find"),c.prototype),o(c.prototype,"_onConversationChange",[W["default"]],(0,g["default"])(c.prototype,"_onConversationChange"),c.prototype),c);e["default"]=K,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){return u["default"].isArray(t)?t.map(function(t){return o(t,e)}):u["default"].isObject(t)?u["default"].transform(t,function(t,n,r){t[e(r)]=o(n,e)},{}):t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a=(r(i),n(118)),u=r(a),s={camelizeKey:u["default"].memoize(u["default"].camelCase),underscoreKey:u["default"].memoize(u["default"].snakeCase),camelizeObject:function(t){return o(t,s.camelizeKey)},underscoreObject:function(t){return o(t,s.underscoreKey)}};e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(209);t.exports=function(t,e,n,o){var i=n?n.call(o,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var a=r(t),u=r(e),s=a.length;if(s!==u.length)return!1;o=o||null;for(var c=Object.prototype.hasOwnProperty.bind(e),f=0;s>f;f++){var l=a[f];if(!c(l))return!1;var h=t[l],d=e[l],p=n?n.call(o,h,d,l):void 0;if(p===!1||void 0===p&&h!==d)return!1}return!0}},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&a(m(t))}function i(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function u(t){for(var e=c(t),n=e.length,r=n&&t.length,o=!!r&&a(r)&&(h(t)||l(t)),u=-1,s=[];++u<n;){var f=e[u];(o&&i(f,r)||v.call(t,f))&&s.push(f)}return s}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||l(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;++r<e;)u[r]=r+"";for(var f in t)c&&i(f,e)||"constructor"==f&&(o||!v.call(t,f))||u.push(f);return u}var f=n(210),l=n(211),h=n(212),d=/^\d+$/,p=Object.prototype,v=p.hasOwnProperty,y=f(Object,"keys"),g=9007199254740991,m=r("length"),b=y?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?u(t):s(t)?y(t):[]}:u;t.exports=b},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function o(t){return i(t)&&h.call(t)==u}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?d.test(f.call(t)):n(t)&&s.test(t)}var u="[object Function]",s=/^\[object .+?Constructor\]$/,c=Object.prototype,f=Function.prototype.toString,l=c.hasOwnProperty,h=c.toString,d=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return i(t)&&v.call(t,"callee")&&(!g.call(t,"callee")||y.call(t)==l)}function o(t){return null!=t&&!("function"==typeof t&&a(t))&&u(m(t))}function i(t){return c(t)&&o(t)}function a(t){var e=s(t)?y.call(t):"";return e==h||e==d}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var f=9007199254740991,l="[object Arguments]",h="[object Function]",d="[object GeneratorFunction]",p=Object.prototype,v=p.hasOwnProperty,y=p.toString,g=p.propertyIsEnumerable,m=n("length");t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function i(t){return a(t)&&p.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null==t?!1:i(t)?v.test(h.call(t)):n(t)&&f.test(t)}var s="[object Array]",c="[object Function]",f=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,d=l.hasOwnProperty,p=l.toString,v=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),g=9007199254740991,m=y||function(t){return n(t)&&o(t.length)&&p.call(t)==s};t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,y["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,p["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,h["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,y["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,p["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,h["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l=n(2),h=r(l),d=n(5),p=r(d),v=n(16),y=r(v),g=n(132),m=r(g),b=n(138),w=r(b),_=n(78),E=r(_),x=n(87),A=r(x),O=n(108),j=r(O),k=n(88),I=r(k),T=n(89),S=r(T),M=n(111),C=r(M),P=n(112),B=r(P),D=n(136),R=r(D),G=n(119),L=n(118),z=r(L),F=n(135),V=r(F),N=n(193),U=n(208),$=r(U),q=n(204),W=r(q),K=new V["default"].MD5,H=(u=(0,G.decorator)(),s=(0,G.decorator)(),c=(0,G.decorator)(),f=function(t){function e(){var t;(0,I["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,C["default"])(this,(t=(0,j["default"])(e)).call.apply(t,[this].concat(r)));return i._fetched=!1,i._throtelled__flushConversationsToReload=i.config.conversationReloadDelay?i._throtelled__flushConversationsToReload=z["default"].throttle(i.__flushConversationsToReload,i.config.conversationReloadDelay,{leading:!1}):i.__flushConversationsToReload,i}return(0,B["default"])(e,t),(0,S["default"])(e,[{key:"mounted",value:function(){this.host.on("message:sending",this._onMessageSending),this.host.on("message:sent",this._onMessageSent),this.host.models.Message.on("afterInject",this._onMessageChange),this.host.models.Message.on("afterEject",this._onMessageChange),this.host.models.Group.on("afterEject",this._onGroupDelete),this.__queuedConversationsToReload=[]}},{key:"dispose",value:function(){this._fetched=!1,this.host.removeListener("message:sending",this._onMessageSending),this.host.removeListener("message:sent",this._onMessageSent),this.host.models.Message.off("afterInject",this._onMessageChange),this.host.models.Message.off("afterEject",this._onMessageChange),this.host.models.Group.off("afterEject",this._onGroupDelete),this.__queuedConversationsToReload=null,this._throtelled__flushConversationsToReload.cancel&&this._throtelled__flushConversationsToReload.cancel()}},{key:"findAll",value:function(){var t=(0,A["default"])(E["default"].mark(function e(){var t,n,r=this;return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._fetched){e.next=2;break}return e.abrupt("return",this.getAll());case 2:return e.next=4,this.host.api.roster.findAll();case 4:return t=e.sent,n=t.map(function(t){var e=r.host.injectModel(t);delete e.$temporary;var n=t.organization_key;return{counterParty:e,organizationId:n}}).map(function(t){var e=t.counterParty,n=t.organizationId,o=r.ensureConversation(e.$entityType,e.id,n);return o._counterPartyAddedOnServer=!0,o}),this._fetched=!0,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"refetch",value:function(){var t=(0,A["default"])(E["default"].mark(function e(){return E["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._fetched=!1,t.abrupt("return",this.findAll());case 2:case"end":return t.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,A["default"])(E["default"].mark(function e(t,n,r){var o,u,s;return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:return o={},r&&(o["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),s=this.ensureConversation(t,n,r),e.prev=16,e.next=19,this.host.api.roster.add(t,n,r);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](16),this.logger.warn("can't add "+n+" "+u);case 24:s._counterPartyAddedOnServer=!0;case 25:case"end":return e.stop()}},e,this,[[16,21]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=(0,A["default"])(E["default"].mark(function e(t,n,r){var o,u;return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:return o={},r&&(o["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),e.prev=15,e.next=18,this.host.api.roster.remove(t,n,r);case 18:this.ejectConversation(t,n,r),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](15),this.logger.warn("can't remove "+n+" "+u);case 24:case"end":return e.stop()}},e,this,[[15,21]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"ensureConversation",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.getConversationKey(t,e,n),o=this.get(t,e,n);return o?(this.host.config.conversationsEnsureEntities&&this.__ensureEntities(o),o):(o=this.host.models.Conversation.createInstance({id:r,counterPartyType:t,counterPartyId:e,organizationId:n,_origIndex:this.host.models.Conversation.getAll().length}),this.host.config.conversationsEnsureEntities&&this.__ensureEntities(o),this.host.models.Conversation.inject(o),this.__notifyOrganizationChange(o.organizationId),o)}},{key:"ejectConversation",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.get(t,e,n);return r&&(this.host.models.Conversation.eject(r),this.__notifyOrganizationChange(r.organizationId)),r}},{key:"reactToIncomingMessageEvent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.host.getCurrentUser().id,n=this.host.models.Message.parseAttrs(t);n.direction=n.senderId==e?N.MessageDirection.OUTGOING:N.MessageDirection.INCOMING,n.groupId?(n.counterPartyType="group",n.counterPartyId=n.groupId):n.recipientId&&(n.counterPartyType="user",n.counterPartyId=n.senderId==e?n.recipientId:n.senderId),n.direction==N.MessageDirection.OUTGOING?n.senderStatus=N.MessageSenderStatus.SENT:n.senderStatus=N.MessageSenderStatus.NA;var r=this.host.conversations.ensureConversation(n.counterPartyType,n.counterPartyId,n.senderOrganizationId);n.conversationId=r.id;var o=this.host.models.Message.createInstance(n);this.host.config.conversationsEnsureEntities&&this.__ensureMessageEntities(o),this.host.models.Message.inject(o),this.emit("message",o),this.__addConversationCounterPartyToServerRosterIfShould(r),this.__queueReload(r),r.emit("message",o),this.__notifyOrganizationChange(r.organizationId),o.senderId!=e&&o.recipientStatus!=N.MessageRecipientStatus.READ&&o.recipientStatus!=N.MessageRecipientStatus.DELIVERED&&this.host.messages.markAsReceived(o)}},{key:"reactToFriendsEvent",value:function(t){var e=t.friend,n=e.action,r=e.organization_id,o=(0,w["default"])(e,["action","organization_id"]),i=r,a=this.host.modelByTypeNS(o.xmlns);if(!a)return void this.logger.error("Class "+o.xmlns+" not found");switch(n){case"add":"group"==a.name&&(o.organizationId=i);var u=this.host.injectModel(o);this.__addedByCounterParty(u,i);break;case"del":this.__removedByCounterParty(a.name,o.token,i);break;default:this.logger.error("friends action not implemented",n,t)}}},{key:"_onMessageSending",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.__ensureConversationFromMessage(t);this.__addConversationCounterPartyToServerRosterIfShould(e),this.__reloadConversation(e),this.__notifyOrganizationChange(e.organizationId)}},{key:"_onMessageSent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);this.__reloadConversation(e),e.emit("message",t)}},{key:"_onMessageChange",value:function(t,e){e.conversation&&this.__queueReload(e.conversation)}},{key:"_onGroupDelete",value:function(t,e){this.ejectConversation("group",e.id,e.organizationId)}},{key:"__queueReload",value:function(t){z["default"].contain(this.__queuedConversationsToReload,t),this._throtelled__flushConversationsToReload()}},{key:"__flushConversationsToReload",value:function(){var t=this;this.__queuedConversationsToReload.forEach(function(e){return t.__reloadConversation(e)}),this.__queuedConversationsToReload.length=0}},{key:"__reloadConversation",value:function(t){var e=z["default"].pick(t,["messages","lastMessage","unreadMessages","unreadCount","lastEventMessageSortNumber"]),n={},r=(0,z["default"])(this.host.models.Message.getAll()).filter({conversationId:t.id}).orderBy(["sortNumber"],["asc"]).value();n.messages=r,n.lastMessage=z["default"].last(r),n.unreadMessages=r.filter(function(t){return t.direction===N.MessageDirection.INCOMING&&(t.recipientStatus===N.MessageRecipientStatus.NEW||t.recipientStatus===N.MessageRecipientStatus.DELIVERED)}),n.unreadCount=n.unreadMessages.length,n.lastEventMessageSortNumber=n.lastMessage&&n.lastMessage.sortNumber||0;var o=!1;z["default"].each(e,function(e,r){(0,$["default"])(e,n[r])||(t[r]=n[r],o=!0)}),o&&(this.host.models.Conversation.inject(t),t.emit("change"),this.emit("change",t))}},{key:"__notifyOrganizationChange",value:function(t){var e=this.host.models.Organization.get(t);e&&e.emit("change")}},{key:"__ensureConversationFromMessage",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);return e}},{key:"__addConversationCounterPartyToServerRosterIfShould",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "conversation" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "conversation" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));t&&(t._counterPartyAddedOnServer||this.add(t.counterPartyType,t.counterPartyId,t.organizationId))}},{key:"getMessageConversationKey",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if(t.groupId)return this.conversationHashForGroupId(t.groupId);var e=t.senderId==this.host.getCurrentUser().id?t.recipientId:t.senderId;return this.conversationHashForUserMessage(e,t.senderOrganizationId,t.recipientOrganizationId)}},{key:"getConversationKey",value:function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?n:arguments[3];if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "senderOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof r)throw new TypeError('Value of argument "recipientOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "senderOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if("string"!=typeof r)throw new TypeError('Value of argument "recipientOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));switch(t){case"user":return this.conversationHashForUserMessage(e,n,r);case"group":return this.conversationHashForGroupId(e);default:throw new Error("type "+t+" not supported in conversation")}}},{key:"conversationHashForUserMessage",value:function(t,e,n){var r=[t,e,n].join(":");return K.b64(r)}},{key:"conversationHashForGroupId",value:function(t){return K.b64(t)}},{key:"findConversationWithUser",value:function(){var t=(0,A["default"])(E["default"].mark(function e(t,n){return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.get(this.host.models.User.name,t,n));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findConversationWithGroup",value:function(){var t=(0,A["default"])(E["default"].mark(function e(t,n){return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.get(this.host.models.Group.name,t,n));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findGroupConversationWithMembers",value:function(){var t=(0,A["default"])(E["default"].mark(function e(t,n){var r;return E["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=z["default"].arrayWrap(t).map(this._resolveModelId.bind(this)),e.next=11,this.host.groups.findWithSpecificMembers(t);case 11:if(r=e.sent,!r){e.next=14;break}return e.abrupt("return",this.get(this.host.models.Group.name,r.id,n));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"get",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.getConversationKey(t,e,n),o=this.host.models.Conversation.get(r);return o||null}},{key:"getAll",value:function(){return this.host.models.Conversation.getAll()}},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Conversation.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Conversation.getMulti(t)}},{key:"__addedByCounterParty",value:function(t,e){if(!(t instanceof Object))throw new TypeError('Value of argument "counterParty" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(t instanceof Object))throw new TypeError('Value of argument "counterParty" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));this.ensureConversation(t.$entityType,t.id,e)}},{key:"__removedByCounterParty",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "entityType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "entityType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));this.ejectConversation(t,e,n)}},{key:"__ensureEntities",value:function(t){var e,n,r=this;this.host.models.Organization.ensureEntityOrCreateTemporaryAndFind({id:t.organizationId,name:"Loading..."},{finder:(e=this.host.organizations).find.bind(e),onMissing:function(){r.logger.info("org "+t.organizationId+" not found, created temporary org"),t.$loadingOrganization=!0},onLoad:function(e){r.logger.info("org "+t.organizationId+" loaded"),t.$loadingOrganization=!1}});var o={id:t.counterPartyId},i=void 0;switch(t.counterPartyType){case"user":o.displayName="Loading...",i=(n=this.host.users).find.bind(n);break;case"group":o.displayName="Loading group...",o.organizationId=t.organizationId,i=(n=this.host.groups).find.bind(n);break;default:throw new Error("unsupported counterPartyType",t.counterPartyType)}this.host.store.store.models[t.counterPartyType].ensureEntityOrCreateTemporaryAndFind(o,{finder:i,onMissing:function(){r.logger.info("entry "+t.counterPartyId+" not found, created temporary on org "+t.organizationId),t.$loadingCounterParty=!0},onLoad:function(e){t.$loadingCounterParty=!1,r.__fireChange("update",t)}}),this.__fireChange("add",t)}},{key:"__ensureMessageEntities",value:function(t){var e,n=this,r=this.host.getCurrentUser().id,o=t.senderId==r?t.recipientId:t.senderId;o&&this.host.models.User.ensureEntityOrCreateTemporaryAndFind({id:o,displayName:"Loading..."},{finder:(e=this.host.users).find.bind(e),onlyPlaceholder:!!t.groupId,onMissing:function(){n.logger.info("message otherUser "+o+" not found, created temporary"),t.$loadingOtherUser=!0},onLoad:function(e){t.$loadingOtherUser=!1,n.__fireChange("update",t.conversation)}})}},{key:"__fireChange",value:function(t,e){}}]),e}(R["default"]),o(f.prototype,"findAll",[u],(0,m["default"])(f.prototype,"findAll"),f.prototype),o(f.prototype,"add",[s],(0,m["default"])(f.prototype,"add"),f.prototype),o(f.prototype,"remove",[c],(0,m["default"])(f.prototype,"remove"),f.prototype),o(f.prototype,"_onMessageSending",[W["default"]],(0,m["default"])(f.prototype,"_onMessageSending"),f.prototype),o(f.prototype,"_onMessageSent",[W["default"]],(0,m["default"])(f.prototype,"_onMessageSent"),f.prototype),
o(f.prototype,"_onMessageChange",[W["default"]],(0,m["default"])(f.prototype,"_onMessageChange"),f.prototype),o(f.prototype,"_onGroupDelete",[W["default"]],(0,m["default"])(f.prototype,"_onGroupDelete"),f.prototype),o(f.prototype,"__flushConversationsToReload",[W["default"]],(0,m["default"])(f.prototype,"__flushConversationsToReload"),f.prototype),f);e["default"]=H,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(108),i=r(o),a=n(88),u=r(a),s=n(89),c=r(s),f=n(111),l=r(f),h=n(112),d=r(h),p=n(136),v=r(p),y=n(118),g=(r(y),n(193)),m=function(t){function e(t,n){(0,u["default"])(this,e);var r=(0,l["default"])(this,(0,i["default"])(e).call(this,t,n));return r._data={},r.host.models.User.on("beforeInject",function(t,e){return r._onUserInjected(e)}),r}return(0,d["default"])(e,t),(0,c["default"])(e,[{key:"reactToPresenceEvent",value:function(t){this.set(t.from,g.PresenceStatus.resolve(t.type))}},{key:"set",value:function(t,e){var n=this.host.models.User.get(t);n&&(n.presence=e),this._data[t]=e}},{key:"get",value:function(t){return t==this.host.getCurrentUser().id?g.PresenceStatus.AVAILABLE:this._data[t]}},{key:"_onUserInjected",value:function(t){t.id in this._data&&(t.presence=this._data[t.id])}}]),e}(v["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,M["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,d["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,M["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,d["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,h=n(2),d=r(h),p=n(16),v=r(p),y=n(132),g=r(y),m=n(216),b=r(m),w=n(174),_=r(w),E=n(17),x=r(E),A=n(220),O=r(A),j=n(53),k=r(j),I=n(78),T=r(I),S=n(5),M=r(S),C=n(87),P=r(C),B=n(108),D=r(B),R=n(88),G=r(R),L=n(89),z=r(L),F=n(111),V=r(F),N=n(112),U=r(N),$=n(136),q=r($),W=n(118),K=r(W),H=n(106),Z=r(H),Y=n(119),X=(u=(0,Y.decorator)(),s=(0,Y.decorator)(),l=f=function(t){function e(){return(0,G["default"])(this,e),(0,V["default"])(this,(0,D["default"])(e).apply(this,arguments))}return(0,U["default"])(e,t),(0,z["default"])(e,[{key:"fullUpdate",value:function(){var t=(0,P["default"])(T["default"].mark(function e(t,n,r){return T["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "entireData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "entireData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:if(r){e.next=14;break}throw new Z["default"].ValidationError("organizationId","required");case 14:if(!(this.host.config.maxMetadataKeyCount>0&&(0,M["default"])(n).length>this.host.config.maxMetadataKeyCount)){e.next=16;break}throw new Z["default"].ValidationError("entireData","invalid","Total number of metadata keys is "+(0,M["default"])(n)+" and should not exceed "+this.host.config.maxMetadataKeyCount);case 16:return this.host.requireUser(),t=this._resolveModelId(t),e.prev=18,e.next=21,this.host.api.metadata.update(t,n,r);case 21:return e.abrupt("return",n);case 24:if(e.prev=24,e.t0=e["catch"](18),!e.t0.response||404!=e.t0.response.status){e.next=30;break}throw new Z["default"].NotFoundError("metadata",t);case 30:throw e.t0;case 31:case"end":return e.stop()}},e,this,[[18,24]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,P["default"])(T["default"].mark(function e(t,n,r){var o,u;return T["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "partialData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "partialData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:if(r){e.next=14;break}throw new Z["default"].ValidationError("organizationId","required");case 14:return e.next=16,this.find(t,r);case 16:return o=e.sent,u=(0,k["default"])({},o,n),e.abrupt("return",this.fullUpdate(t,u,r));case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,P["default"])(T["default"].mark(function e(t,n){var r;return T["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:if(n){e.next=10;break}throw new Z["default"].ValidationError("organizationId","required");case 10:return this.host.requireUser(),t=this._resolveModelId(t),e.prev=12,e.next=15,this.host.api.metadata.find(t,n);case 15:return r=e.sent,this.__injectMetadata(t,n,r),e.abrupt("return",r);case 20:if(e.prev=20,e.t0=e["catch"](12),!e.t0.response||404!=e.t0.response.status){e.next=26;break}throw new Z["default"].NotFoundError("metadata",t);case 26:throw e.t0;case 27:case"end":return e.stop()}},e,this,[[12,20]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findMulti",value:function(){var t=(0,P["default"])(T["default"].mark(function e(t,n){var r,o,u,s,c,f,l,h,d,p,v,y,g,m,w,E;return T["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:if(n){e.next=10;break}throw new Z["default"].ValidationError("organizationId","required");case 10:return this.host.requireUser(),t=K["default"].arrayWrap(t).map(this._resolveModelId.bind(this)),e.prev=12,e.next=15,this.host.api.metadata.findMulti(t,n);case 15:if(r=e.sent,l=(0,O["default"])(r),l&&("function"==typeof l[x["default"]]||Array.isArray(l))){e.next=19;break}throw new TypeError("Expected _Object$entries to be iterable, got "+i(l));case 19:if(l&&("function"==typeof l[x["default"]]||Array.isArray(l))){e.next=21;break}throw new TypeError("Expected _Object$entries to be iterable, got "+a(l));case 21:for(o=!0,u=!1,s=void 0,e.prev=24,c=(0,_["default"])(l);!(o=(f=c.next()).done);o=!0)h=(0,b["default"])(f.value,2),d=h[0],p=h[1],p&&this.__injectMetadata(d,n,p);e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](24),u=!0,s=e.t0;case 32:e.prev=32,e.prev=33,!o&&c["return"]&&c["return"]();case 35:if(e.prev=35,!u){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.abrupt("return",r);case 43:if(e.prev=43,e.t1=e["catch"](12),!e.t1.response||404!=e.t1.response.status){e.next=88;break}if(v={},t&&("function"==typeof t[x["default"]]||Array.isArray(t))){e.next=49;break}throw new TypeError("Expected ids to be iterable, got "+i(t));case 49:if(t&&("function"==typeof t[x["default"]]||Array.isArray(t))){e.next=51;break}throw new TypeError("Expected ids to be iterable, got "+a(t));case 51:y=!0,g=!1,m=void 0,e.prev=54,w=(0,_["default"])(t);case 56:if(y=(E=w.next()).done){e.next=71;break}return d=E.value,e.prev=58,e.next=61,this.find(d,n);case 61:v[d]=e.sent,e.next=68;break;case 64:if(e.prev=64,e.t2=e["catch"](58),e.t2.code==Z["default"].NotFoundError.CODE){e.next=68;break}throw e.t2;case 68:y=!0,e.next=56;break;case 71:e.next=77;break;case 73:e.prev=73,e.t3=e["catch"](54),g=!0,m=e.t3;case 77:e.prev=77,e.prev=78,!y&&w["return"]&&w["return"]();case 80:if(e.prev=80,!g){e.next=83;break}throw m;case 83:return e.finish(80);case 84:return e.finish(77);case 85:return e.abrupt("return",v);case 88:throw e.t1;case 89:case"end":return e.stop()}},e,this,[[12,43],[24,28,32,40],[33,,35,39],[54,73,77,85],[58,64],[78,,80,84]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"__injectMetadata",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(n instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));var r=t+":"+e;this.host.models.Metadata.inject({id:r,data:n,entityId:t,organizationId:e})}}]),e}(q["default"]),f.METADTA_TYPES=["user","group"],c=l,o(c.prototype,"find",[u],(0,g["default"])(c.prototype,"find"),c.prototype),o(c.prototype,"findMulti",[s],(0,g["default"])(c.prototype,"findMulti"),c.prototype),c);e["default"]=X,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(217),i=r(o),a=n(174),u=r(a);e["default"]=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=(0,u["default"])(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i["default"])(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={"default":n(218),__esModule:!0}},function(t,e,n){n(36),n(19),t.exports=n(219)},function(t,e,n){var r=n(60),o=n(33)("iterator"),i=n(30);t.exports=n(4).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){t.exports={"default":n(221),__esModule:!0}},function(t,e,n){n(222),t.exports=n(4).Object.entries},function(t,e,n){var r=n(11),o=n(223)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var r=n(26),o=n(40),i=r.isEnum;t.exports=function(t){return function(e){for(var n,a=o(e),u=r.getKeys(a),s=u.length,c=0,f=[];s>c;)i.call(a,n=u[c++])&&f.push(t?[n,a[n]]:a[n]);return f}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i,a,u=n(132),s=r(u),c=n(78),f=r(c),l=n(57),h=r(l),d=n(5),p=r(d),v=n(87),y=r(v),g=n(108),m=r(g),b=n(88),w=r(b),_=n(89),E=r(_),x=n(111),A=r(x),O=n(112),j=r(O),k=n(136),I=r(k),T=n(119),S=n(106),M=r(S),C=n(118),P=r(C),B=n(207),D=r(B),R={user:"account",distributionList:"distribution_list",group:"group",organization:"organization"},G=P["default"].values(R),L=(i=(0,T.decorator)(),a=function(t){function e(){return(0,w["default"])(this,e),(0,A["default"])(this,(0,m["default"])(e).apply(this,arguments))}return(0,j["default"])(e,t),(0,E["default"])(e,[{key:"query",value:function(){var t=(0,y["default"])(f["default"].mark(function e(t){var n,r,o,i,a,u=this,s=t.types,c=void 0===s?[]:s,l=t.query,d=void 0===l?{}:l,v=t.continuation,y=void 0===v?null:v,g=t.includeDisabled,m=void 0===g?!1:g,b=t.excludeTokens,w=void 0===b?[]:b,_=t.resultsFormat,E=void 0===_?"entities":_,x=t.organizationId,A=void 0===x?null:x,O=t.organizationIds,j=void 0===O?[]:O,k=t.sort,I=void 0===k?[]:k,T=t.includeMetadata,S=void 0===T?!1:T;return f["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=c.length){t.next=2;break}throw new M["default"].ValidationError("types","required","no types specified");case 2:if(c=c.map(function(t){return R[t]}),n=P["default"].difference(c,G),!(n.length>0)){t.next=6;break}throw new M["default"].ValidationError("types","invalid","invalid types: "+n.join(", "));case 6:if(A&&(j=[A]),0!=j.length){t.next=9;break}throw new M["default"].ValidationError("organizationIds","invalid","search must be done in a context of an organization");case 9:return"ids"===E&&(E="tokens"),r={type:c,include_disabled:m,directory:j,results_format:E},y&&(r.continuation=y),I&&I.length&&(r.sort=I),w=P["default"].arrayWrap(w),d&&(0,p["default"])(d).length>0&&(r.bool={must:D["default"].underscoreObject(d)}),t.next=17,this.httpClient.post("/search",{data:r});case 17:if(o=t.sent,i=o.data.results,a=P["default"].eachWithObject(i,function(t,e){var n=t.type,r=t.entity,o=t.organization_id;if(0!=(0,p["default"])(r).length){var i=u.host.injectModel(r,n);if(!w.length||!w.includes(i.id)){if(!i)return void u.logger.warn("no entity for ",t);var a=new u.host.models.SearchResult(i,o);e.push(a)}}},[]),!S){t.next=22;break}return t.delegateYield(f["default"].mark(function e(){var t,n,r;return f["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P["default"].groupBy(a,"organizationId"),n=P["default"].keyBy(a,"entityId"),r=P["default"].transform(t,function(t,e,r){t.push(u.host.metadata.findMulti(P["default"].map(e,"entityId"),r).then(function(t){P["default"].each(t,function(t,e){return n[e].metadata=t})}))},[]),!(r.length>0)){e.next=6;break}return e.next=6,h["default"].all(r);case 6:case"end":return e.stop()}},e,u)})(),"t0",22);case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(I["default"]),o(a.prototype,"query",[i],(0,s["default"])(a.prototype,"query"),a.prototype),a);e["default"]=L,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(128),i=r(o),a=n(138),u=r(a),s=n(88),c=r(s),f=n(89),l=r(f),h=n(118),d=r(h),p=n(226),v=r(p),y=n(230),g=r(y),m=n(207),b=r(m),w=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.logger,o=(0,u["default"])(n,["logger"]);(0,c["default"])(this,t),this.host=e,this.options=o,this.logger=r,this.store=new v["default"]((0,i["default"])({},o,{host:e,logger:r}))}return(0,l["default"])(t,[{key:"defineModels",value:function(){var t=this,e={},n=(0,i["default"])({},this.options,{host:this.host,logger:this.logger});d["default"].each(g["default"],function(r,o){e[o]=r(t,n)}),this.models=e}},{key:"defineModel",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e.replaceKeys=e.replaceKeys||{},d["default"].defaults(e.replaceKeys,{token:"id"});var n=(this.store,this.store.defineModel(t,(0,i["default"])({},e,{beforeCreateInstance:function(t){!t[n.idAttribute]||"serverId"in t||(t.serverId=t[n.idAttribute]),e.beforeCreateInstance&&e.beforeCreateInstance(t)},beforeInject:function(t){var r=n.get(t[n.idAttribute]);!r||"serverId"in t||(t.serverId=r.serverId),e.beforeInject&&e.beforeInject(t)},afterInject:function(t){var n=Date.now();t.$lastModified==n&&(n+=1e-5),t.$lastModified=n,e.afterInject&&e.afterInject(t)},parseAttrs:function(t){var n=b["default"].camelizeObject(t);return d["default"].each(e.replaceKeys,function(t,e){d["default"].replaceKey(n,e,t)}),e.parseAttrs&&(n=e.parseAttrs(n,t)),n}})));return n}},{key:"clear",value:function(){this.store.clear()}}]),t}();e["default"]=w,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=o(t[0]);return t.every(function(t){return o(t)===e})?e.trim()+"[]":"["+t.map(o).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+o(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function i(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=i(t[0]);return t.every(function(t){return i(t)===e})?e.trim()+"[]":"["+t.map(i).join(", ")+"]"}return"Array"}var n=(0,c["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,u["default"])(e))+": "+i(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(2),u=r(a),s=n(5),c=r(s),f=n(16),l=r(f),h=n(78),d=r(h),p=n(87),v=r(p),y=n(128),g=r(y),m=n(227),b=r(m),w=n(53),_=r(w),E=n(88),x=r(E),A=n(89),O=r(A),j=n(118),k=r(j),I=n(120),T=r(I),S=n(229),M=r(S);T["default"].prototype.off=T["default"].prototype.removeListener;var C={idAttribute:"id",parseAttrs:k["default"].identity,relations:{belongsTo:{},hasMany:{}},defaultValues:null,computed:{}},P=function(){function t(e,n){var r=this,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,x["default"])(this,t),this.options=k["default"].defaultsDeep({},o,C),this.idAttribute=this.options.idAttribute,this.name=n,this.store=e,this.entitiesById={},this.entitiesList=[],this.transientAttrsStore={},this.options.relations&&this.__initRelations(),this.__initTransientAttrs(),(0,_["default"])(this.options.computed,{$entityType:{enumerable:!0,get:function(){return n}},$entityClass:{enumerable:!1,get:function(){return r}}}),this.options.computed=k["default"].transform(this.options.computed,function(t,e,n){"function"==typeof e?t[n]={get:e,enumerable:!1}:t[n]=e},{}),this._computedKeys=(0,k["default"])(this.options.computed).keys().without("$entityType","$entityClass","$$transientAttrs").value(),this._writablePropertyKeys=(0,k["default"])(this.options.computed).toPairs().filter(function(t){return t[1].set}).map(k["default"].first).value(),this._relationKeys=(0,k["default"])(this.options.relations).values().map(k["default"].keys).flatten().value()}return(0,O["default"])(t,null,[{key:"create",value:function(t,e,n){return new this(t,e,n)}}]),(0,O["default"])(t,[{key:"__initRelations",value:function(){var t=this,e=k["default"].transform(this.options.relations.belongsTo,function(e,n,r){e[r]={get:function(){return t.store.get(n.type,this[n.foreignKey])},set:function(e){this[n.foreignKey]=t.store.resolveId(n.type,e)}}},{});(0,_["default"])(this.options.computed,e);var n=k["default"].transform(this.options.relations.hasMany,function(e,n,r){e[r]={get:function(){var e=this;if(this.$$transientAttrs.relations||(this.$$transientAttrs.relations={},this.$$transientAttrs.relationsCreated={}),this.$$transientAttrs.relations[r])return this.$$transientAttrs.relations[r];var o=t.store.getAll(n.type).filter(function(r){return r[n.foreignKey]==e[t.options.idAttribute]});return this.$$transientAttrs.relations[r]=o,this.$$transientAttrs.relationsCreated[r]=!0,o},set:function(t){}}},{});(0,_["default"])(this.options.computed,n)}},{key:"__initTransientAttrs",value:function(){var t=this,e=this,n={$$transientAttrs:{enumerable:!1,get:function(){var t=this[e.options.idAttribute];return e.transientAttrsStore[t]||(e.transientAttrsStore[t]={})}}},r={};this.options.transientAttrs&&this.options.transientAttrs.forEach(function(e){t.options.defaultValues&&e in t.options.defaultValues&&(r[e]=(0,M["default"])(t.options.defaultValues[e]),delete t.options.defaultValues[e]),n[e]={get:function(){return e in this.$$transientAttrs?this.$$transientAttrs[e]:e in r?this.$$transientAttrs[e]=r[e]:void 0},set:function(t){this.$$transientAttrs[e]=t}}}),(0,_["default"])(this.options.computed,n)}},{key:"createInstance",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=this;e&&(t=this.parseAttrs(t)),this.options.defaultValues&&k["default"].defaults(t,(0,M["default"])(this.options.defaultValues));var r={};return this._writablePropertyKeys.forEach(function(e){e in t&&(r[e]=t[e],delete t[e])}),(0,b["default"])(t,this.options.computed),(0,_["default"])(t,r),this.options.instanceEvents&&(0,_["default"])(t,T["default"].prototype),(0,_["default"])(t,{toPlainObject:function(t){var e=this,r={};n._computedKeys.forEach(function(t){return r[t]=e[t]});var o=(0,_["default"])({},this,r);return delete o.toPlainObject,delete o.setMaxListeners,delete o.emit,delete o.addListener,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.listeners,delete o.listenerCount,delete o.off,delete o.toPlainObject,delete o._events,delete o._maxListeners,o}}),this.options.beforeCreateInstance&&this.options.beforeCreateInstance(t),t}},{key:"inject",value:function(t){var e=void 0,n=!0,r=this.is(t);if(r){if(e=t,this.entitiesById[this.resolveId(e)])return this.options.beforeInject&&this.options.beforeInject(e),this.emit("beforeInject",this,e),this.options.afterInject&&this.options.afterInject(e),this.emit("afterInject",this,e),e;n=!1}n&&(t=this.parseAttrs(t));var o=this.resolveId(t);if(!this.isValidId(o))throw new Error("'"+this.options.idAttribute+"' is required");return(e=this.entitiesById[o])?(this.options.beforeInject&&this.options.beforeInject(t),this.emit("beforeInject",this,t),(0,_["default"])(e,t)):(e=r?t:this.createInstance(t,!1),this.options.beforeInject&&this.options.beforeInject(t),this.emit("beforeInject",this,t),this.entitiesById[o]=e,this.entitiesList.push(e)),this.__addToHasManyRelationships(e),this.options.afterInject&&this.options.afterInject(e),this.emit("afterInject",this,e),e}},{key:"eject",value:function(t){t=this.resolveId(t);var e=this.entitiesById[t];e&&(this.__removeFromHasManyRelationships(e),delete this.entitiesById[t],k["default"].pull(this.entitiesList,e),t in this.transientAttrsStore&&delete this.transientAttrsStore[t],this.emit("afterEject",this,e))}},{key:"__addToHasManyRelationships",value:function(t){this.__updateRelationsIfNeeded(t,"add")}},{key:"__removeFromHasManyRelationships",value:function(t){this.__updateRelationsIfNeeded(t,"remove")}},{key:"__updateRelationsIfNeeded",value:function(t,e){var n=this,r=this.store.getParentRelationshipsOfModel(this.name);r&&r.forEach(function(r){var o=n.store.get(r.parent,t[r.foreignKey]);o&&o.$$transientAttrs.relationsCreated&&o.$$transientAttrs.relationsCreated[r.relationKey]&&("add"==e?o[r.relationKey].includes(t)||o[r.relationKey].push(t):"remove"==e&&k["default"].pull(o[r.relationKey],t))})}},{key:"ejectAll",value:function(){var t=this;k["default"].eachRight(this.entitiesList,function(e){return t.eject(e)})}},{key:"parseAttrs",value:function(t){var e=this,n=k["default"].pickBy(t,function(t){return e.store.isEntity(t)||e.store.isEntityArray(t)}),r=k["default"].omit(t,k["default"].keys(n)),o=this.options.parseAttrs((0,M["default"])(r)),i=(0,g["default"])({},o,n);return i}},{key:"get",value:function(t){return this.entitiesById[t]}},{key:"getAll",value:function(){return this.entitiesList}},{key:"getMulti",value:function(t){return t.map(this.get.bind(this))}},{key:"resolveId",value:function(t){return this.isValidId(t)?t:t[this.options.idAttribute]}},{key:"isValidId",value:function(t){return"string"==typeof t||"number"==typeof t}},{key:"is",value:function(t){return t&&t.$entityClass==this}},{key:"find",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:throw new"not implemented find";case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"refresh",value:function(){var t=(0,v["default"])(d["default"].mark(function e(t){return d["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+o(t));case 4:throw t=this.resolveId(t),new"not implemented refresh";case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();(0,_["default"])(P.prototype,T["default"].prototype);var B=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,x["default"])(this,t),this.options=n,this.models={},this.__relationsOfHasManyByContainedItem={},["inject","get","getAll","filter","resolveId","is","find","refresh"].forEach(function(t){e[t]=function(n){for(var r,o=arguments.length,i=Array(o>1?o-1:0),a=1;o>a;a++)i[a-1]=arguments[a];return(r=e.models[n])[t].apply(r,i)}})}return(0,O["default"])(t,[{key:"defineModel",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(this.models[t])throw new Error(t+" already defined");n=(0,g["default"])({},this.options,n),this.models[t]=P.create(this,t,n);var r=this.models[t].options.relations.hasMany;return k["default"].isEmpty(r)||k["default"].each(r,function(n,r){e.__relationsOfHasManyByContainedItem[n.type]||(e.__relationsOfHasManyByContainedItem[n.type]=[]),e.__relationsOfHasManyByContainedItem[n.type].push((0,g["default"])({},n,{relationKey:r,parent:t}))}),this.models[t]}},{key:"getParentRelationshipsOfModel",value:function(t){return this.__relationsOfHasManyByContainedItem[t]}},{key:"isEntity",value:function(t){return t&&t.$entityClass&&t.$entityClass.constructor===P}},{key:"isEntityArray",value:function(t){return t&&Array.isArray(t)&&t.some(this.isEntity)}},{key:"clear",value:function(){(0,k["default"])(this.models).values().forEach(function(t){return t.ejectAll()})}}]),t}();e["default"]=B,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(228),__esModule:!0}},function(t,e,n){var r=n(26);t.exports=function(t,e){return r.setDescs(t,e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o),a=function(t){return JSON.parse((0,i["default"])(t))};e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={User:n(231),Group:n(233),Organization:n(234),Message:n(235),MessageStatusPerRecipient:n(236),Event:n(237),Conversation:n(238),SearchResult:n(239),Metadata:n(240)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("user",{transientAttrs:["presence"],replaceKeys:{avatar:"avatarUrl"},defaultValues:{presence:c["default"].UNKNOWN},computed:{metadataByOrganizationId:{enumerable:!0,get:function(){return(0,i["default"])(t.store.getAll("metadata")).filter({entityId:this.id}).keyBy("organizationId").mapValues("data").value()}}},parseAttrs:function(t){return t.presence&&(t.presence=c["default"].resolve(t.presence)||c["default"].UNKNOWN),
t}});return(0,u["default"])(t,n,{before:function(t,e,n){},after:function(t,e){},delayBeforeRefreshing:e.host.config.temporaryEntityDelayBeforeRefreshing}),n};var o=n(118),i=r(o),a=n(232),u=r(a),s=n(201),c=r(s);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){}function i(t,e,n){var r=n.before,i=n.after,s=n.delayBeforeRefreshing;if(null==arguments[2]||null!=arguments[2].before&&"function"!=typeof arguments[2].before||null!=arguments[2].after&&"function"!=typeof arguments[2].after||null!=arguments[2].delayBeforeRefreshing&&"number"!=typeof arguments[2].delayBeforeRefreshing)throw new TypeError("Value of argument 2 violates contract.\n\nExpected:\n{ before: ?Function;\n  after: ?Function;\n  delayBeforeRefreshing: ?number;\n}\n\nGot:\n"+u({before:r,after:i,delayBeforeRefreshing:s}));if(null==arguments[2]||null!=arguments[2].before&&"function"!=typeof arguments[2].before||null!=arguments[2].after&&"function"!=typeof arguments[2].after||null!=arguments[2].delayBeforeRefreshing&&"number"!=typeof arguments[2].delayBeforeRefreshing)throw new TypeError("Value of argument 2 violates contract.\n\nExpected:\n{ before: ?Function;\n  after: ?Function;\n  delayBeforeRefreshing: ?number;\n}\n\nGot:\n"+a({before:r,after:i,delayBeforeRefreshing:s}));t.ensureEntityOrCreateTemporaryAndFind||(t.ensureEntityOrCreateTemporaryAndFind=function(e,n){function r(){var n=this;if(t.host.config.enableEnsureEntityFindMissing&&!w[_(c)]){var r=function(){var r=(0,g["default"])(v["default"].mark(function a(){return v["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c.$temporary){n.next=3;break}return t.logger.info("entity "+e+":"+s+" was already updated elsewhere"),n.abrupt("return");case 3:return n.next=5,o();case 5:delete w[_(c)];case 6:case"end":return n.stop()}},a,n)})),i=n;return function(){return r.apply(i,arguments)}}(),o=function(){var t=(0,g["default"])(v["default"].mark(function r(){return v["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.finder(s,{bypassCache:!0});case 3:delete c.$temporary,u.after(c,i),i.onLoad(c),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),t.next=12;break;case 12:i.onLoad(null);case 13:case"end":return t.stop()}},r,n,[[0,8]])})),e=n;return function(){return t.apply(e,arguments)}}();u.delayBeforeRefreshing?w[_(c)]=setTimeout(r,u.delayBeforeRefreshing):o()}}var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t.host.config.enableEnsureEntityWithTemp||t.host.config.enableEnsureEntityFindMissing){if(i=b["default"].defaults(i,{onLoad:o,onExists:o,onMissing:o,onlyPlaceholder:!1}),!i.finder)throw new Error("finder is missing in ensureEntityOrCreateTemporaryAndFind call");var a=t.store.models[e],u=a.__addEnsureEntityOrCreateTemporaryAndFind__config,s=n[a.idAttribute],c=t.store.get(e,s);if(u.before(n,c,i),c)u.after(c,i),c.$temporary?i.onlyPlaceholder||r():i.onExists(c);else{if(i.onMissing(),c=t.store.inject(e,n),Object.defineProperty(c,"$temporary",{value:!0,configurable:!0}),i.onlyPlaceholder)return c;r()}return c}}),e.__addEnsureEntityOrCreateTemporaryAndFind__config={before:r||o,after:i||o,delayBeforeRefreshing:"undefined"==typeof s?100:s},e.ensureEntityOrCreateTemporaryAndFind=function(n,r){return t.ensureEntityOrCreateTemporaryAndFind(e.name,n,r)}}function a(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,d["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=a(t[0]);return t.every(function(t){return a(t)===e})?e.trim()+"[]":"["+t.map(a).join(", ")+"]"}return"Array"}var n=(0,l["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,c["default"])(e))+": "+a(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}function u(t){if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,d["default"])(t);if(Array.isArray(t)){if(t.length>0){var e=u(t[0]);return t.every(function(t){return u(t)===e})?e.trim()+"[]":"["+t.map(u).join(", ")+"]"}return"Array"}var n=(0,l["default"])(t);if(!n.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";var r=n.map(function(e){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(e)?e:(0,c["default"])(e))+": "+u(t[e])+";"}).join("\n  ");return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+r+"\n}":"{ "+r+"\n}"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),c=r(s),f=n(5),l=r(f),h=n(16),d=r(h),p=n(78),v=r(p),y=n(87),g=r(y);e["default"]=i;var m=n(118),b=r(m),w={},_=function(t){return t.$entityType+":"+t.id};t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){function n(n){var r;t.ensureEntityOrCreateTemporaryAndFind("user",{id:n,displayName:"Loading..."},{onlyPlaceholder:!0,finder:(r=e.host.users).find.bind(r)})}function r(t){t.memberIds&&t.memberIds.forEach(n)}function o(t){t&&t.forEach(n)}var u=t.defineModel("group",{replaceKeys:{organizationKey:"organizationId",members:"memberIds",avatar:"avatarUrl",displayName:"name",numMembers:"memberCount",createdTime:"createdAt"},defaultValues:{memberIds:[],memberCount:0,groupType:a.GroupType.GROUP},validate:function(){s["default"].notEmpty("groupType",this.groupType)},__extractGroupTypeFromAttrs:function(t){return"tigertext:entity:list"==(t.type||t.xmlns)?a.GroupType.DISTRIBUTION_LIST:t.isPublic?a.GroupType.ROOM:null},parseAttrs:function(t){var e=this.__extractGroupTypeFromAttrs(t);return e&&(t.groupType=e),t},beforeCreateInstance:function(t){o(t.memberIds)},afterInject:function(t){t.memberIds&&t.memberIds.length>0&&!t.memberCount&&(t.memberCount=t.memberIds.length)},computed:{metadata:{enumerable:!0,get:function(){var e=t.store.get("metadata",this.id+":"+this.organizationId);return e?e.data:null}},members:{enumerable:!0,get:function(){return this.memberIds.map(function(e){return t.store.get("user",e)})}},conversation:{enumerable:!0,get:function(){return e.host.conversations.get("group",this.id,this.organizationId)}},displayName:{configurable:!0,enumerable:!0,get:function(){return this.name}}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}});return(0,i["default"])(t,u,{before:function(t,e,n){e&&r(e)},after:function(t,e){r(t)},delayBeforeRefreshing:e.host.config.temporaryEntityDelayBeforeRefreshing}),u};var o=n(232),i=r(o),a=n(193),u=n(203),s=r(u);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("organization",{instanceEvents:!0,replaceKeys:{members:"memberCount"},fields:{},transientAttrs:["conversations","unreadCount"],defaultValues:{conversations:[]}});return(0,a["default"])(t,n,{before:function(t,e,n){},after:function(t,e){},delayBeforeRefreshing:e.host.config.temporaryEntityDelayBeforeRefreshing}),n};var o=n(118),i=(r(o),n(232)),a=r(i);t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("message",{replaceKeys:{messageId:"id",clientId:"id",senderToken:"senderId",sender:"senderId",recipientToken:"recipientId",recipient:"recipientId",senderOrganization:"senderOrganizationId",recipientOrganization:"recipientOrganizationId",groupToken:"groupId",status:"recipientStatus",createdTime:"createdAt"},defaultValues:{recipientStatus:r.MessageRecipientStatus.NEW,senderStatus:r.MessageRecipientStatus.NEW,sortNumber:0},fields:{id:{type:"string"},senderStatus:{type:"enum","enum":r.MessageSenderStatus,require:!0},recipientStatus:{type:"enum","enum":r.MessageRecipientStatus,require:!0},direction:{type:"enum","enum":r.MessageDirection,require:!0},counterPartyId:{type:"string",require:!0},counterPartyType:{type:"enum",values:["user","group"],require:!0},createdAt:{type:Date,require:!0}},parseAttrs:function(t){return t.recipientStatus&&(t.recipientStatus=r.MessageRecipientStatus.resolve(t.recipientStatus)),t},relations:{belongsTo:{sender:{type:"user",foreignKey:"senderId"},recipient:{type:"user",foreignKey:"recipientId"},senderOrganization:{type:"organization",foreignKey:"senderOrganizationId"},recipientOrganization:{type:"organization",foreignKey:"recipientOrganizationId"},group:{type:"group",foreignKey:"groupId"},conversation:{type:"conversation",foreignKey:"conversationId"}},hasMany:{statusesPerRecipient:{type:"messageStatusPerRecipient",foreignKey:"messageId"}}},computed:{counterParty:{enumerable:!0,get:function(){return this.counterPartyType&&this.counterPartyId?t.store.get(this.counterPartyType,this.counterPartyId):null},set:function(t){if(t){switch(t.$entityType){case"user":this.recipientId=t.id;break;case"group":this.groupId=t.id;break;default:throw new Error("unsupported counterPartyType '"+t.$entityType+"'")}this.counterPartyId=t.id,this.counterPartyType=t.$entityType}else this.counterPartyId=null,this.counterPartyType=null}}}});return e};var r=n(193);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("messageStatusPerRecipient",{replaceKeys:{accountId:"userId",timestamp:"createdAt"},defaultValues:{status:i["default"].NEW},fields:{userId:{type:String,require:!0},messageId:{type:String,require:!0},recipientStatus:{type:"enum","enum":i["default"],require:!0},createdAt:{type:Date,require:!0}},parseAttrs:function(t){return t.status&&(t.status=i["default"].resolve(t.status)),t},relations:{belongsTo:{message:{type:"message",foreignKey:"messageId"},user:{type:"user",foreignKey:"userId"}}}});return e};var o=n(194),i=r(o);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(53),i=r(o),a=n(138),u=r(a),s=n(88),c=r(s),f=n(89),l=r(f);e["default"]=function(){return function(){function t(e,n,r,o){var a=this;(0,c["default"])(this,t),this.id=e,this.type=n,this.data=r,o&&!function(){var t=o._origData,e=(0,u["default"])(o,["_origData"]);Object.defineProperty(a,"_origData",{get:function(){return t}}),(0,i["default"])(a,e)}()}return(0,l["default"])(t,null,[{key:"is",value:function(t){return t instanceof this}}]),t}()},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("conversation",{instanceEvents:!0,transientAttrs:["messages","lastMessage","unreadCount","unreadMessages","lastEventMessageSortNumber","_counterPartyAddedOnServer"],defaultValues:{lastEventMessageSortNumber:0,messages:[],unreadMessages:[],unreadCount:0},computed:{counterParty:{enumerable:!0,get:function(){return this.counterPartyType&&this.counterPartyId?t.store.get(this.counterPartyType,this.counterPartyId):null},set:function(t){if(t)switch(console.log("set newCounterParty",t),t.$entityType){case"user":case"group":this.counterPartyId=t.id,this.counterPartyType=t.$entityType;break;default:throw new Error("unsupported counterPartyType '"+t.$entityType+"'")}else this.counterPartyId=null,this.counterPartyType=null}}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}});return e};var o=n(118),i=(r(o),n(194));r(i),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(88),i=r(o),a=n(89),u=r(a);e["default"]=function(){return function(){function t(e,n){(0,i["default"])(this,t),this.id="searchResult:"+n+":"+e.id,this.entityType=e.$entityType,this.entityId=e.id,this.entity=e,this.organizationId=n}return(0,u["default"])(t,null,[{key:"is",value:function(t){return t instanceof this}}]),t}()},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("metadata",{fields:{entityType:{type:"string",required:!0},entityId:{type:"string",required:!0},organizationId:{type:"string",required:!0}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}},parseAttrs:function(t,e){return t.data=e.data,t}});return n},t.exports=e["default"]},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,a,u){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,u],f=0;s=new Error(e.replace(/%s/g,function(){return c[f++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(53),i=r(o),a=n(5),u=r(a);e["default"]=function(t){function e(e,n){return t.includes(e,n)||e.push(n),e}t.__tigerconnectJsUtilsEnhanced||(t.__tigerconnectJsUtilsEnhanced=!0,t.mixin({arrayWrap:function(t){return Array.isArray(t)?t:void 0!=t&&null!=t?[t]:[]},eachWithObject:function(e,n,r){return Array.isArray(e)?e.forEach(function(t,o){return n(t,r,o,e)}):t.each(e,function(t,o,i){return n(t,o,r,i,e)}),r},contain:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];return r.forEach(function(n){return e(t,n)}),t},count:function(e){var n=arguments.length<=1||void 0===arguments[1]?t.identity:arguments[1];return e.reduce(function(t,e){return t+(n(e)?1:0)},0)},replaceKey:function(t,e,n){!(n in t)&&e in t&&(t[n]=t[e],delete t[e])},replaceObject:function(e,n){var r=(0,u["default"])(e),o=(0,u["default"])(n),a=t.difference(r,o);(0,i["default"])(e,n),a.forEach(function(t){return delete e[t]})}}))},t.exports=e["default"]},function(t,e,n){(function(t){"use strict";if(n(244),n(431),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0}).call(e,function(){return this}())},function(t,e,n){n(245),n(278),n(284),n(286),n(288),n(290),n(292),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(308),n(309),n(310),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(346),n(347),n(351),n(352),n(354),n(355),n(360),n(361),n(364),n(366),n(368),n(370),n(371),n(372),n(374),n(375),n(377),n(378),n(379),n(380),n(387),n(390),n(391),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(406),n(407),n(408),n(409),n(410),n(411),n(413),n(414),n(415),n(416),n(418),n(419),n(421),n(422),n(424),n(425),n(426),n(429),n(430),t.exports=n(249)},function(t,e,n){"use strict";var r,o=n(246),i=n(247),a=n(252),u=n(251),s=n(258),c=n(259),f=n(261),l=n(262),h=n(263),d=n(253),p=n(264),v=n(257),y=n(260),g=n(265),m=n(267),b=n(269),w=n(270),_=n(271),E=n(268),x=n(255)("__proto__"),A=n(272),O=n(277)(!1),j=Object.prototype,k=Array.prototype,I=k.slice,T=k.join,S=o.setDesc,M=o.getDesc,C=o.setDescs,P={};a||(r=!d(function(){return 7!=S(c("div"),"a",{get:function(){return 7}}).a}),o.setDesc=function(t,e,n){if(r)try{return S(t,e,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(p(t)[e]=n.value),t},o.getDesc=function(t,e){if(r)try{return M(t,e)}catch(n){}return f(t,e)?u(!j.propertyIsEnumerable.call(t,e),t[e]):void 0},o.setDescs=C=function(t,e){p(t);for(var n,r=o.getKeys(e),i=r.length,a=0;i>a;)o.setDesc(t,n=r[a++],e[n]);return t}),i(i.S+i.F*!a,"Object",{getOwnPropertyDescriptor:o.getDesc,defineProperty:o.setDesc,defineProperties:C});var B="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),D=B.concat("length","prototype"),R=B.length,G=function(){var t,e=c("iframe"),n=R,r=">";for(e.style.display="none",s.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+r),t.close(),G=t.F;n--;)delete G.prototype[B[n]];return G()},L=function(t,e){return function(n){var r,o=m(n),i=0,a=[];for(r in o)r!=x&&f(o,r)&&a.push(r);for(;e>i;)f(o,r=t[i++])&&(~O(a,r)||a.push(r));return a}},z=function(){};i(i.S,"Object",{getPrototypeOf:o.getProto=o.getProto||function(t){return t=g(t),f(t,x)?t[x]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?j:null},getOwnPropertyNames:o.getNames=o.getNames||L(D,D.length,!0),create:o.create=o.create||function(t,e){var n;return null!==t?(z.prototype=p(t),n=new z,z.prototype=null,n[x]=t):n=G(),void 0===e?n:C(n,e)},keys:o.getKeys=o.getKeys||L(B,R,!1)});var F=function(t,e,n){if(!(e in P)){for(var r=[],o=0;e>o;o++)r[o]="a["+o+"]";P[e]=Function("F,a","return new F("+r.join(",")+")")}return P[e](t,n)};i(i.P,"Function",{bind:function(t){var e=v(this),n=I.call(arguments,1),r=function(){var o=n.concat(I.call(arguments));return this instanceof r?F(e,o.length,o):h(e,o,t)};return y(e.prototype)&&(r.prototype=e.prototype),r}}),i(i.P+i.F*d(function(){s&&I.call(s)}),"Array",{slice:function(t,e){var n=_(this.length),r=l(this);if(e=void 0===e?n:e,"Array"==r)return I.call(this,t,e);for(var o=w(t,n),i=w(e,n),a=_(i-o),u=Array(a),s=0;a>s;s++)u[s]="String"==r?this.charAt(o+s):this[o+s];return u}}),i(i.P+i.F*(E!=Object),"Array",{join:function(t){return T.call(E(this),void 0===t?",":t)}}),i(i.S,"Array",{isArray:n(274)});var V=function(t){return function(e,n){v(e);var r=E(this),o=_(r.length),i=t?o-1:0,a=t?-1:1;if(arguments.length<2)for(;;){if(i in r){n=r[i],i+=a;break}if(i+=a,t?0>i:i>=o)throw TypeError("Reduce of empty array with no initial value")}for(;t?i>=0:o>i;i+=a)i in r&&(n=e(n,r[i],i,this));return n}},N=function(t){return function(e){return t(this,e,arguments[1])}};i(i.P,"Array",{forEach:o.each=o.each||N(A(0)),map:N(A(1)),filter:N(A(2)),some:N(A(3)),every:N(A(4)),reduce:V(!1),reduceRight:V(!0),indexOf:N(O),lastIndexOf:function(t,e){var n=m(this),r=_(n.length),o=r-1;for(arguments.length>1&&(o=Math.min(o,b(e))),0>o&&(o=_(r+o));o>=0;o--)if(o in n&&n[o]===t)return o;return-1}}),i(i.S,"Date",{now:function(){return+new Date}});var U=function(t){return t>9?t:"0"+t};i(i.P+i.F*(d(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!d(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=0>e?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+U(t.getUTCMonth()+1)+"-"+U(t.getUTCDate())+"T"+U(t.getUTCHours())+":"+U(t.getUTCMinutes())+":"+U(t.getUTCSeconds())+"."+(n>99?n:"0"+U(n))+"Z"}})},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var r=n(248),o=n(249),i=n(250),a=n(254),u=n(256),s="prototype",c=function(t,e,n){var f,l,h,d,p=t&c.F,v=t&c.G,y=t&c.S,g=t&c.P,m=t&c.B,b=v?r:y?r[e]||(r[e]={}):(r[e]||{})[s],w=v?o:o[e]||(o[e]={}),_=w[s]||(w[s]={});v&&(n=e);for(f in n)l=!p&&b&&f in b,h=(l?b:n)[f],d=m&&l?u(h,r):g&&"function"==typeof h?u(Function.call,h):h,b&&!l&&a(b,f,h),w[f]!=h&&i(w,f,d),g&&_[f]!=h&&(_[f]=h)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,t.exports=c},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(246),o=n(251);t.exports=n(252)?function(t,e,n){return r.setDesc(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(253)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(248),o=n(250),i=n(255)("src"),a="toString",u=Function[a],s=(""+u).split(a);n(249).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,a){"function"==typeof n&&(n.hasOwnProperty(i)||o(n,i,t[e]?""+t[e]:s.join(String(e))),n.hasOwnProperty("name")||o(n,"name",e)),t===r?t[e]=n:(a||delete t[e],o(t,e,n))})(Function.prototype,a,function(){return"function"==typeof this&&this[i]||u.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(257);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports=n(248).document&&document.documentElement},function(t,e,n){var r=n(260),o=n(248).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(260);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(266);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(268),o=n(266);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(262);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(269),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),0>t?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(269),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(256),o=n(268),i=n(265),a=n(271),u=n(273);t.exports=function(t){var e=1==t,n=2==t,s=3==t,c=4==t,f=6==t,l=5==t||f;return function(h,d,p){for(var v,y,g=i(h),m=o(g),b=r(d,p,3),w=a(m.length),_=0,E=e?u(h,w):n?u(h,0):void 0;w>_;_++)if((l||_ in m)&&(v=m[_],y=b(v,_,g),t))if(e)E[_]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:E.push(v)}else if(c)return!1;return f?-1:s||c?c:E}}},function(t,e,n){var r=n(260),o=n(274),i=n(275)("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)||(n=void 0),r(n)&&(n=n[i],null===n&&(n=void 0))),new(void 0===n?Array:n)(e)}},function(t,e,n){var r=n(262);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(276)("wks"),o=n(255),i=n(248).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||o)("Symbol."+t))}},function(t,e,n){var r=n(248),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(267),o=n(271),i=n(270);t.exports=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if(u=s[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f;return!t&&-1}}},function(t,e,n){"use strict";var r=n(246),o=n(248),i=n(261),a=n(252),u=n(247),s=n(254),c=n(253),f=n(276),l=n(279),h=n(255),d=n(275),p=n(280),v=n(281),y=n(282),g=n(274),m=n(264),b=n(267),w=n(251),_=r.getDesc,E=r.setDesc,x=r.create,A=v.get,O=o.Symbol,j=o.JSON,k=j&&j.stringify,I=!1,T=d("_hidden"),S=r.isEnum,M=f("symbol-registry"),C=f("symbols"),P="function"==typeof O,B=Object.prototype,D=a&&c(function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=_(B,e);r&&delete B[e],E(t,e,n),r&&t!==B&&E(B,e,r)}:E,R=function(t){var e=C[t]=x(O.prototype);return e._k=t,a&&I&&D(B,t,{configurable:!0,set:function(e){i(this,T)&&i(this[T],t)&&(this[T][t]=!1),D(this,t,w(1,e))}}),e},G=function(t){return"symbol"==typeof t},L=function(t,e,n){return n&&i(C,e)?(n.enumerable?(i(t,T)&&t[T][e]&&(t[T][e]=!1),n=x(n,{enumerable:w(0,!1)})):(i(t,T)||E(t,T,w(1,{})),t[T][e]=!0),D(t,e,n)):E(t,e,n)},z=function(t,e){m(t);for(var n,r=y(e=b(e)),o=0,i=r.length;i>o;)L(t,n=r[o++],e[n]);return t},F=function(t,e){return void 0===e?x(t):z(x(t),e)},V=function(t){var e=S.call(this,t);return e||!i(this,t)||!i(C,t)||i(this,T)&&this[T][t]?e:!0},N=function(t,e){var n=_(t=b(t),e);return!n||!i(C,e)||i(t,T)&&t[T][e]||(n.enumerable=!0),n},U=function(t){for(var e,n=A(b(t)),r=[],o=0;n.length>o;)i(C,e=n[o++])||e==T||r.push(e);return r},$=function(t){for(var e,n=A(b(t)),r=[],o=0;n.length>o;)i(C,e=n[o++])&&r.push(C[e]);return r},q=function(t){if(void 0!==t&&!G(t)){for(var e,n,r=[t],o=1,i=arguments;i.length>o;)r.push(i[o++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),G(e)?void 0:e}),r[1]=e,k.apply(j,r)}},W=c(function(){var t=O();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))});P||(O=function(){if(G(this))throw TypeError("Symbol is not a constructor");return R(h(arguments.length>0?arguments[0]:void 0))},s(O.prototype,"toString",function(){return this._k}),G=function(t){return t instanceof O},r.create=F,r.isEnum=V,r.getDesc=N,r.setDesc=L,r.setDescs=z,r.getNames=v.get=U,r.getSymbols=$,a&&!n(283)&&s(B,"propertyIsEnumerable",V,!0));var K={"for":function(t){return i(M,t+="")?M[t]:M[t]=O(t)},keyFor:function(t){return p(M,t)},useSetter:function(){I=!0},useSimple:function(){I=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=d(t);K[t]=P?e:R(e)}),I=!0,u(u.G+u.W,{Symbol:O}),u(u.S,"Symbol",K),u(u.S+u.F*!P,"Object",{create:F,defineProperty:L,defineProperties:z,getOwnPropertyDescriptor:N,getOwnPropertyNames:U,getOwnPropertySymbols:$}),j&&u(u.S+u.F*(!P||W),"JSON",{stringify:q}),l(O,"Symbol"),l(Math,"Math",!0),l(o.JSON,"JSON",!0)},function(t,e,n){var r=n(246).setDesc,o=n(261),i=n(275)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(246),o=n(267);t.exports=function(t,e){for(var n,i=o(t),a=r.getKeys(i),u=a.length,s=0;u>s;)if(i[n=a[s++]]===e)return n}},function(t,e,n){var r=n(267),o=n(246).getNames,i={}.toString,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.get=function(t){return a&&"[object Window]"==i.call(t)?u(t):o(r(t))}},function(t,e,n){var r=n(246);t.exports=function(t){var e=r.getKeys(t),n=r.getSymbols;if(n)for(var o,i=n(t),a=r.isEnum,u=0;i.length>u;)a.call(t,o=i[u++])&&e.push(o);return e}},function(t,e){t.exports=!1},function(t,e,n){var r=n(247);r(r.S+r.F,"Object",{assign:n(285)})},function(t,e,n){var r=n(246),o=n(265),i=n(268);t.exports=n(253)(function(){var t=Object.assign,e={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=o})?function(t,e){for(var n=o(t),a=arguments,u=a.length,s=1,c=r.getKeys,f=r.getSymbols,l=r.isEnum;u>s;)for(var h,d=i(a[s++]),p=f?c(d).concat(f(d)):c(d),v=p.length,y=0;v>y;)l.call(d,h=p[y++])&&(n[h]=d[h]);return n}:Object.assign},function(t,e,n){var r=n(247);r(r.S,"Object",{is:n(287)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(247);r(r.S,"Object",{setPrototypeOf:n(289).set})},function(t,e,n){var r=n(246).getDesc,o=n(260),i=n(264),a=function(t,e){if(i(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(256)(Function.call,r(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){"use strict";var r=n(291),o={};o[n(275)("toStringTag")]="z",o+""!="[object z]"&&n(254)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(262),o=n(275)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[o])?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(260);n(293)("freeze",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(247),o=n(249),i=n(253);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(260);n(293)("seal",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(260);n(293)("preventExtensions",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(260);n(293)("isFrozen",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(260);n(293)("isSealed",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(260);n(293)("isExtensible",function(t){return function(e){return r(e)?t?t(e):!0:!1}})},function(t,e,n){var r=n(267);n(293)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){var r=n(265);n(293)("getPrototypeOf",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(265);n(293)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){n(293)("getOwnPropertyNames",function(){return n(281).get})},function(t,e,n){var r=n(246).setDesc,o=n(251),i=n(261),a=Function.prototype,u=/^\s*function ([^ (]*)/,s="name";s in a||n(252)&&r(a,s,{configurable:!0,get:function(){var t=(""+this).match(u),e=t?t[1]:"";return i(this,s)||r(this,s,o(5,e)),e}})},function(t,e,n){"use strict";var r=n(246),o=n(260),i=n(275)("hasInstance"),a=Function.prototype;i in a||r.setDesc(a,i,{value:function(t){if("function"!=typeof this||!o(t))return!1;if(!o(this.prototype))return t instanceof this;for(;t=r.getProto(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){"use strict";var r=n(246),o=n(248),i=n(261),a=n(262),u=n(306),s=n(253),c=n(307).trim,f="Number",l=o[f],h=l,d=l.prototype,p=a(r.create(d))==f,v="trim"in String.prototype,y=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():c(e,3);var n,r,o,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,s=e.slice(2),f=0,l=s.length;l>f;f++)if(a=s.charCodeAt(f),48>a||a>o)return NaN;return parseInt(s,r)}}return+e};l(" 0o1")&&l("0b1")&&!l("+0x1")||(l=function(t){
var e=arguments.length<1?0:t,n=this;return n instanceof l&&(p?s(function(){d.valueOf.call(n)}):a(n)!=f)?new h(y(e)):y(e)},r.each.call(n(252)?r.getNames(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(t){i(h,t)&&!i(l,t)&&r.setDesc(l,t,r.getDesc(h,t))}),l.prototype=d,d.constructor=l,n(254)(o,f,l))},function(t,e,n){var r=n(260);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(247),o=n(266),i=n(253),a="	\n\x0B\f\r \u2028\u2029\ufeff",u="["+a+"]",s="",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),l=function(t,e){var n={};n[t]=e(h),r(r.P+r.F*i(function(){return!!a[t]()||s[t]()!=s}),"String",n)},h=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},function(t,e,n){var r=n(247);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(247),o=n(248).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var r=n(247);r(r.S,"Number",{isInteger:n(311)})},function(t,e,n){var r=n(260),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(247);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(247),o=n(311),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,n){var r=n(247);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(247);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(247);r(r.S,"Number",{parseFloat:parseFloat})},function(t,e,n){var r=n(247);r(r.S,"Number",{parseInt:parseInt})},function(t,e,n){var r=n(247),o=n(319),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+i(t-1)*i(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&1e-8>t?t-t*t/2:Math.log(1+t)}},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?0>t?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var o=n(247);o(o.S,"Math",{asinh:r})},function(t,e,n){var r=n(247);r(r.S,"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(247),o=n(323);r(r.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:0>t?-1:1}},function(t,e,n){var r=n(247);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(247),o=Math.exp;r(r.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var r=n(247);r(r.S,"Math",{expm1:n(327)})},function(t,e){t.exports=Math.expm1||function(t){return 0==(t=+t)?t:t>-1e-6&&1e-6>t?t+t*t/2:Math.exp(t)-1}},function(t,e,n){var r=n(247),o=n(323),i=Math.pow,a=i(2,-52),u=i(2,-23),s=i(2,127)*(2-u),c=i(2,-126),f=function(t){return t+1/a-1/a};r(r.S,"Math",{fround:function(t){var e,n,r=Math.abs(t),i=o(t);return c>r?i*f(r/c/u)*c*u:(e=(1+u/a)*r,n=e-(e-r),n>s||n!=n?i*(1/0):i*n)}})},function(t,e,n){var r=n(247),o=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,a=0,u=arguments,s=u.length,c=0;s>a;)n=o(u[a++]),n>c?(r=c/n,i=i*r*r+1,c=n):n>0?(r=n/c,i+=r*r):i+=n;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,e,n){var r=n(247),o=Math.imul;r(r.S+r.F*n(253)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=65535,r=+t,o=+e,i=n&r,a=n&o;return 0|i*a+((n&r>>>16)*a+i*(n&o>>>16)<<16>>>0)}})},function(t,e,n){var r=n(247);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var r=n(247);r(r.S,"Math",{log1p:n(319)})},function(t,e,n){var r=n(247);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(247);r(r.S,"Math",{sign:n(323)})},function(t,e,n){var r=n(247),o=n(327),i=Math.exp;r(r.S+r.F*n(253)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(247),o=n(327),i=Math.exp;r(r.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},function(t,e,n){var r=n(247);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(247),o=n(270),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments,a=r.length,u=0;a>u;){if(e=+r[u++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(65536>e?i(e):i(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(247),o=n(267),i=n(271);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments,a=r.length,u=[],s=0;n>s;)u.push(String(e[s++])),a>s&&u.push(String(r[s]));return u.join("")}})},function(t,e,n){"use strict";n(307)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(342)(!0);n(343)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(269),o=n(266);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return 0>s||s>=c?t?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(283),o=n(247),i=n(254),a=n(250),u=n(261),s=n(344),c=n(345),f=n(279),l=n(246).getProto,h=n(275)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,b,w,_){c(n,e,m);var E,x,A=function(t){if(!d&&t in I)return I[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",j=b==y,k=!1,I=t.prototype,T=I[h]||I[p]||b&&I[b],S=T||A(b);if(T){var M=l(S.call(new t));f(M,O,!0),!r&&u(I,p)&&a(M,h,g),j&&T.name!==y&&(k=!0,S=function(){return T.call(this)})}if(r&&!_||!d&&!k&&I[h]||a(I,h,S),s[e]=S,s[O]=g,b)if(E={values:j?S:A(y),keys:w?S:A(v),entries:j?A("entries"):S},_)for(x in E)x in I||i(I,x,E[x]);else o(o.P+o.F*(d||k),e,E);return E}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(246),o=n(251),i=n(279),a={};n(250)(a,n(275)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(247),o=n(342)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(247),o=n(271),i=n(348),a="endsWith",u=""[a];r(r.P+r.F*n(350)(a),"String",{endsWith:function(t){var e=i(this,t,a),n=arguments,r=n.length>1?n[1]:void 0,s=o(e.length),c=void 0===r?s:Math.min(o(r),s),f=String(t);return u?u.call(e,f,c):e.slice(c-f.length,c)===f}})},function(t,e,n){var r=n(349),o=n(266);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){var r=n(260),o=n(262),i=n(275)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(275)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(o){}}return!0}},function(t,e,n){"use strict";var r=n(247),o=n(348),i="includes";r(r.P+r.F*n(350)(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(247);r(r.P,"String",{repeat:n(353)})},function(t,e,n){"use strict";var r=n(269),o=n(266);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(0>i||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(247),o=n(271),i=n(348),a="startsWith",u=""[a];r(r.P+r.F*n(350)(a),"String",{startsWith:function(t){var e=i(this,t,a),n=arguments,r=o(Math.min(n.length>1?n[1]:void 0,e.length)),s=String(t);return u?u.call(e,s,r):e.slice(r,r+s.length)===s}})},function(t,e,n){"use strict";var r=n(256),o=n(247),i=n(265),a=n(356),u=n(357),s=n(271),c=n(358);o(o.S+o.F*!n(359)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,l=i(t),h="function"==typeof this?this:Array,d=arguments,p=d.length,v=p>1?d[1]:void 0,y=void 0!==v,g=0,m=c(l);if(y&&(v=r(v,p>2?d[2]:void 0,2)),void 0==m||h==Array&&u(m))for(e=s(l.length),n=new h(e);e>g;g++)n[g]=y?v(l[g],g):l[g];else for(f=m.call(l),n=new h;!(o=f.next()).done;g++)n[g]=y?a(f,v,[o.value,g],!0):o.value;return n.length=g,n}})},function(t,e,n){var r=n(264);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},function(t,e,n){var r=n(344),o=n(275)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(291),o=n(275)("iterator"),i=n(344);t.exports=n(249).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e,n){var r=n(275)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){n=!0},i[r]=function(){return a},t(i)}catch(u){}return n}},function(t,e,n){"use strict";var r=n(247);r(r.S+r.F*n(253)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments,n=e.length,r=new("function"==typeof this?this:Array)(n);n>t;)r[t]=e[t++];return r.length=n,r}})},function(t,e,n){"use strict";var r=n(362),o=n(363),i=n(344),a=n(267);t.exports=n(343)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(275)("unscopables"),o=Array.prototype;void 0==o[r]&&n(250)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(365)("Array")},function(t,e,n){"use strict";var r=n(248),o=n(246),i=n(252),a=n(275)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.setDesc(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(247);r(r.P,"Array",{copyWithin:n(367)}),n(362)("copyWithin")},function(t,e,n){"use strict";var r=n(265),o=n(270),i=n(271);t.exports=[].copyWithin||function(t,e){var n=r(this),a=i(n.length),u=o(t,a),s=o(e,a),c=arguments,f=c.length>2?c[2]:void 0,l=Math.min((void 0===f?a:o(f,a))-s,a-u),h=1;for(u>s&&s+l>u&&(h=-1,s+=l-1,u+=l-1);l-- >0;)s in n?n[u]=n[s]:delete n[u],u+=h,s+=h;return n}},function(t,e,n){var r=n(247);r(r.P,"Array",{fill:n(369)}),n(362)("fill")},function(t,e,n){"use strict";var r=n(265),o=n(270),i=n(271);t.exports=[].fill||function(t){for(var e=r(this),n=i(e.length),a=arguments,u=a.length,s=o(u>1?a[1]:void 0,n),c=u>2?a[2]:void 0,f=void 0===c?n:o(c,n);f>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(247),o=n(272)(5),i="find",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(362)(i)},function(t,e,n){"use strict";var r=n(247),o=n(272)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(362)(i)},function(t,e,n){var r=n(246),o=n(248),i=n(349),a=n(373),u=o.RegExp,s=u,c=u.prototype,f=/a/g,l=/a/g,h=new u(f)!==f;!n(252)||h&&!n(253)(function(){return l[n(275)("match")]=!1,u(f)!=f||u(l)==l||"/a/i"!=u(f,"i")})||(u=function(t,e){var n=i(t),r=void 0===e;return this instanceof u||!n||t.constructor!==u||!r?h?new s(n&&!r?t.source:t,e):s((n=t instanceof u)?t.source:t,n&&r?a.call(t):e):t},r.each.call(r.getNames(s),function(t){t in u||r.setDesc(u,t,{configurable:!0,get:function(){return s[t]},set:function(e){s[t]=e}})}),c.constructor=u,u.prototype=c,n(254)(o,"RegExp",u)),n(365)("RegExp")},function(t,e,n){"use strict";var r=n(264);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(246);n(252)&&"g"!=/./g.flags&&r.setDesc(RegExp.prototype,"flags",{configurable:!0,get:n(373)})},function(t,e,n){n(376)("match",1,function(t,e){return function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))}})},function(t,e,n){"use strict";var r=n(250),o=n(254),i=n(253),a=n(266),u=n(275);t.exports=function(t,e,n){var s=u(t),c=""[t];i(function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,n(a,s,c)),r(RegExp.prototype,s,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e,n){n(376)("replace",2,function(t,e,n){return function(r,o){"use strict";var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)}})},function(t,e,n){n(376)("search",1,function(t,e){return function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))}})},function(t,e,n){n(376)("split",2,function(t,e,n){return function(r,o){"use strict";var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)}})},function(t,e,n){"use strict";var r,o=n(246),i=n(283),a=n(248),u=n(256),s=n(291),c=n(247),f=n(260),l=n(264),h=n(257),d=n(381),p=n(382),v=n(289).set,y=n(287),g=n(275)("species"),m=n(383),b=n(384),w="Promise",_=a.process,E="process"==s(_),x=a[w],A=function(t){var e=new x(function(){});return t&&(e.constructor=Object),x.resolve(e)===e},O=function(){function t(e){var n=new x(e);return v(n,t.prototype),n}var e=!1;try{if(e=x&&x.resolve&&A(),v(t,x),t.prototype=o.create(x.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(252)){var r=!1;x.resolve(o.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(i){e=!1}return e}(),j=function(t,e){return i&&t===x&&e===r?!0:y(t,e)},k=function(t){var e=l(t)[g];return void 0!=e?e:t},I=function(t){var e;return f(t)&&"function"==typeof(e=t.then)?e:!1},T=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},S=function(t){try{t()}catch(e){return{error:e}}},M=function(t,e){if(!t.n){t.n=!0;var n=t.c;b(function(){for(var r=t.v,o=1==t.s,i=0,u=function(e){var n,i,a=o?e.ok:e.fail,u=e.resolve,s=e.reject;try{a?(o||(t.h=!0),n=a===!0?r:a(r),n===e.promise?s(TypeError("Promise-chain cycle")):(i=I(n))?i.call(n,u,s):u(n)):s(r)}catch(c){s(c)}};n.length>i;)u(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,o=t.p;C(o)&&(E?_.emit("unhandledRejection",r,o):(e=a.onunhandledrejection)?e({promise:o,reason:r}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},C=function(t){var e,n=t._d,r=n.a||n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(e=r[o++],e.fail||!C(e.promise))return!1;return!0},P=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),M(e,!0))},B=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=I(t))?b(function(){var r={r:n,d:!1};try{e.call(t,u(B,r,1),u(P,r,1))}catch(o){P.call(r,o)}}):(n.v=t,n.s=1,M(n,!1))}catch(r){P.call({r:n,d:!1},r)}}};O||(x=function(t){h(t);var e=this._d={p:d(this,x,w),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(u(B,e,1),u(P,e,1))}catch(n){P.call(e,n)}},n(386)(x.prototype,{then:function(t,e){var n=new T(m(this,x)),r=n.promise,o=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,o.c.push(n),o.a&&o.a.push(n),o.s&&M(o,!1),r},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!O,{Promise:x}),n(279)(x,w),n(365)(w),r=n(249)[w],c(c.S+c.F*!O,w,{reject:function(t){var e=new T(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(!O||A(!0)),w,{resolve:function(t){if(t instanceof x&&j(t.constructor,this))return t;var e=new T(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(O&&n(359)(function(t){x.all(t)["catch"](function(){})})),w,{all:function(t){var e=k(this),n=new T(e),r=n.resolve,i=n.reject,a=[],u=S(function(){p(t,!1,a.push,a);var n=a.length,u=Array(n);n?o.each.call(a,function(t,o){var a=!1;e.resolve(t).then(function(t){a||(a=!0,u[o]=t,--n||r(u))},i)}):r(u)});return u&&i(u.error),n.promise},race:function(t){var e=k(this),n=new T(e),r=n.reject,o=S(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(256),o=n(356),i=n(357),a=n(264),u=n(271),s=n(358);t.exports=function(t,e,n,c){var f,l,h,d=s(t),p=r(n,c,e?2:1),v=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(i(d))for(f=u(t.length);f>v;v++)e?p(a(l=t[v])[0],l[1]):p(t[v]);else for(h=d.call(t);!(l=h.next()).done;)o(h,p,l.value,e)}},function(t,e,n){var r=n(264),o=n(257),i=n(275)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(248),u=n(385).set,s=a.MutationObserver||a.WebKitMutationObserver,c=a.process,f=a.Promise,l="process"==n(262)(c),h=function(){var t,e,n;for(l&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;o=void 0,t&&t.enter()};if(l)i=function(){c.nextTick(h)};else if(s){var d=1,p=document.createTextNode("");new s(h).observe(p,{characterData:!0}),i=function(){p.data=d=-d}}else i=f&&f.resolve?function(){f.resolve().then(h)}:function(){u.call(a,h)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&c.domain};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r,o,i,a=n(256),u=n(263),s=n(258),c=n(259),f=n(248),l=f.process,h=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,v=0,y={},g="onreadystatechange",m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete y[t]},"process"==n(262)(l)?r=function(t){l.nextTick(a(m,t,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=g in c("script")?function(t){s.appendChild(c("script"))[g]=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,n){var r=n(254);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(388);n(389)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(246),o=n(250),i=n(386),a=n(256),u=n(381),s=n(266),c=n(382),f=n(343),l=n(363),h=n(255)("id"),d=n(261),p=n(260),v=n(365),y=n(252),g=Object.isExtensible||p,m=y?"_s":"size",b=0,w=function(t,e){if(!p(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!d(t,h)){if(!g(t))return"F";if(!e)return"E";o(t,h,++b)}return"O"+t[h]},_=function(t,e){var n,r=w(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,o){var f=t(function(t,i){u(t,f,e),t._i=r.create(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=i&&c(i,n,t[o],t)});return i(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[m]=0},"delete":function(t){var e=this,n=_(e,t);if(n){var r=n.n,o=n.p;delete e._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),e._f==n&&(e._f=r),e._l==n&&(e._l=o),e[m]--}return!!n},forEach:function(t){for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!_(this,t)}}),y&&r.setDesc(f.prototype,"size",{get:function(){return s(this[m])}}),f},def:function(t,e,n){var r,o,i=_(t,e);return i?i.v=n:(t._l=i={i:o=w(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[m]++,"F"!==o&&(t._i[o]=i)),t},getEntry:_,setStrong:function(t,e,n){f(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),v(e)}}},function(t,e,n){"use strict";var r=n(248),o=n(247),i=n(254),a=n(386),u=n(382),s=n(381),c=n(260),f=n(253),l=n(359),h=n(279);t.exports=function(t,e,n,d,p,v){var y=r[t],g=y,m=p?"set":"add",b=g&&g.prototype,w={},_=function(t){var e=b[t];i(b,t,"delete"==t?function(t){return v&&!c(t)?!1:e.call(this,0===t?0:t)}:"has"==t?function(t){return v&&!c(t)?!1:e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof g&&(v||b.forEach&&!f(function(){(new g).entries().next()}))){var E,x=new g,A=x[m](v?{}:-0,1)!=x,O=f(function(){x.has(1)}),j=l(function(t){new g(t)});j||(g=e(function(e,n){s(e,g,t);var r=new y;return void 0!=n&&u(n,p,r[m],r),r}),g.prototype=b,b.constructor=g),v||x.forEach(function(t,e){E=1/e===-(1/0)}),(O||E)&&(_("delete"),_("has"),p&&_("get")),(E||A)&&_(m),v&&b.clear&&delete b.clear}else g=d.getConstructor(e,t,p,m),a(g.prototype,n);return h(g,t),w[t]=g,o(o.G+o.W+o.F*(g!=y),w),v||d.setStrong(g,t,p),g}},function(t,e,n){"use strict";var r=n(388);n(389)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(246),o=n(254),i=n(392),a=n(260),u=n(261),s=i.frozenStore,c=i.WEAK,f=Object.isExtensible||a,l={},h=n(389)("WeakMap",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){if(a(t)){if(!f(t))return s(this).get(t);if(u(t,c))return t[c][this._i]}},set:function(t,e){return i.def(this,t,e)}},i,!0,!0);7!=(new h).set((Object.freeze||Object)(l),7).get(l)&&r.each.call(["delete","has","get","set"],function(t){var e=h.prototype,n=e[t];o(e,t,function(e,r){if(a(e)&&!f(e)){var o=s(this)[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})})},function(t,e,n){"use strict";var r=n(250),o=n(386),i=n(264),a=n(260),u=n(381),s=n(382),c=n(272),f=n(261),l=n(255)("weak"),h=Object.isExtensible||a,d=c(5),p=c(6),v=0,y=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);return e?e[1]:void 0},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var i=t(function(t,o){u(t,i,e),t._i=v++,t._l=void 0,void 0!=o&&s(o,n,t[r],t)});return o(i.prototype,{"delete":function(t){return a(t)?h(t)?f(t,l)&&f(t[l],this._i)&&delete t[l][this._i]:y(this)["delete"](t):!1},has:function(t){return a(t)?h(t)?f(t,l)&&f(t[l],this._i):y(this).has(t):!1}}),i},def:function(t,e,n){return h(i(e))?(f(e,l)||r(e,l,{}),e[l][t._i]=n):y(t).set(e,n),t},frozenStore:y,WEAK:l}},function(t,e,n){"use strict";var r=n(392);n(389)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){var r=n(247),o=Function.apply;r(r.S,"Reflect",{apply:function(t,e,n){return o.call(t,e,n)}})},function(t,e,n){var r=n(246),o=n(247),i=n(257),a=n(264),u=n(260),s=Function.bind||n(249).Function.prototype.bind;o(o.S+o.F*n(253)(function(){function t(){}return!(Reflect.construct(function(){},[],t)instanceof t)}),"Reflect",{construct:function(t,e){i(t);var n=arguments.length<3?t:i(arguments[2]);if(t==n){if(void 0!=e)switch(a(e).length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return o.push.apply(o,e),new(s.apply(t,o))}var c=n.prototype,f=r.create(u(c)?c:Object.prototype),l=Function.apply.call(t,f,e);return u(l)?l:f}})},function(t,e,n){var r=n(246),o=n(247),i=n(264);o(o.S+o.F*n(253)(function(){Reflect.defineProperty(r.setDesc({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){i(t);try{return r.setDesc(t,e,n),!0}catch(o){return!1}}})},function(t,e,n){var r=n(247),o=n(246).getDesc,i=n(264);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=o(i(t),e);return n&&!n.configurable?!1:delete t[e]}})},function(t,e,n){"use strict";var r=n(247),o=n(264),i=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(345)(i,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,n){function r(t,e){var n,a,c=arguments.length<3?t:arguments[2];return s(t)===c?t[e]:(n=o.getDesc(t,e))?i(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(a=o.getProto(t))?r(a,e,c):void 0}var o=n(246),i=n(261),a=n(247),u=n(260),s=n(264);a(a.S,"Reflect",{get:r})},function(t,e,n){var r=n(246),o=n(247),i=n(264);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.getDesc(i(t),e)}})},function(t,e,n){var r=n(247),o=n(246).getProto,i=n(264);r(r.S,"Reflect",{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){var r=n(247);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(247),o=n(264),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return o(t),i?i(t):!0}})},function(t,e,n){var r=n(247);r(r.S,"Reflect",{ownKeys:n(405)})},function(t,e,n){var r=n(246),o=n(264),i=n(248).Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.getNames(o(t)),n=r.getSymbols;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(247),o=n(264),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){o(t);try{return i&&i(t),!0}catch(e){return!1}}})},function(t,e,n){function r(t,e,n){var a,f,l=arguments.length<4?t:arguments[3],h=o.getDesc(s(t),e);if(!h){if(c(f=o.getProto(t)))return r(f,e,n,l);h=u(0)}return i(h,"value")?h.writable!==!1&&c(l)?(a=o.getDesc(l,e)||u(0),a.value=n,o.setDesc(l,e,a),!0):!1:void 0===h.set?!1:(h.set.call(l,n),!0)}var o=n(246),i=n(261),a=n(247),u=n(251),s=n(264),c=n(260);a(a.S,"Reflect",{set:r})},function(t,e,n){var r=n(247),o=n(289);o&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var r=n(247),o=n(277)(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(362)("includes")},function(t,e,n){"use strict";var r=n(247),o=n(342)(!0);r(r.P,"String",{at:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(247),o=n(412);r(r.P,"String",{padLeft:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(271),o=n(353),i=n(266);t.exports=function(t,e,n,a){var u=String(i(t)),s=u.length,c=void 0===n?" ":String(n),f=r(e);if(s>=f)return u;""==c&&(c=" ");var l=f-s,h=o.call(c,Math.ceil(l/c.length));return h.length>l&&(h=h.slice(0,l)),a?h+u:u+h}},function(t,e,n){"use strict";var r=n(247),o=n(412);r(r.P,"String",{padRight:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(307)("trimLeft",function(t){return function(){return t(this,1)}})},function(t,e,n){"use strict";n(307)("trimRight",function(t){return function(){return t(this,2)}})},function(t,e,n){var r=n(247),o=n(417)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return o(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){var r=n(246),o=n(247),i=n(405),a=n(267),u=n(251);o(o.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,o=a(t),s=r.setDesc,c=r.getDesc,f=i(o),l={},h=0;f.length>h;)n=c(o,e=f[h++]),e in l?s(l,e,u(0,n)):l[e]=n;return l}})},function(t,e,n){var r=n(247),o=n(420)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){var r=n(246),o=n(267),i=r.isEnum;t.exports=function(t){return function(e){for(var n,a=o(e),u=r.getKeys(a),s=u.length,c=0,f=[];s>c;)i.call(a,n=u[c++])&&f.push(t?[n,a[n]]:a[n]);return f}}},function(t,e,n){var r=n(247),o=n(420)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var r=n(247);r(r.P,"Map",{toJSON:n(423)("Map")})},function(t,e,n){var r=n(382),o=n(291);t.exports=function(t){return function(){if(o(this)!=t)throw TypeError(t+"#toJSON isn't generic");var e=[];return r(this,!1,e.push,e),e}}},function(t,e,n){var r=n(247);r(r.P,"Set",{toJSON:n(423)("Set")})},function(t,e,n){var r=n(246),o=n(247),i=n(256),a=n(249).Array||Array,u={},s=function(t,e){r.each.call(t.split(","),function(t){void 0==e&&t in a?u[t]=a[t]:t in[]&&(u[t]=i(Function.call,[][t],e))})};s("pop,reverse,shift,keys,values,entries",1),s("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),s("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),o(o.S,"Array",u)},function(t,e,n){var r=n(248),o=n(247),i=n(263),a=n(427),u=r.navigator,s=!!u&&/MSIE .\./.test(u.userAgent),c=function(t){return s?function(e,n){return t(i(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(t,e,n){"use strict";var r=n(428),o=n(263),i=n(257);t.exports=function(){for(var t=i(this),e=arguments.length,n=Array(e),a=0,u=r._,s=!1;e>a;)(n[a]=arguments[a++])===u&&(s=!0);return function(){var r,i=this,a=arguments,c=a.length,f=0,l=0;if(!s&&!c)return o(t,n,i);if(r=n.slice(),s)for(;e>f;f++)r[f]===u&&(r[f]=a[l++]);for(;c>l;)r.push(a[l++]);return o(t,r,i)}}},function(t,e,n){t.exports=n(248)},function(t,e,n){var r=n(247),o=n(385);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){n(361);var r=n(248),o=n(250),i=n(344),a=n(275)("iterator"),u=r.NodeList,s=r.HTMLCollection,c=u&&u.prototype,f=s&&s.prototype,l=i.NodeList=i.HTMLCollection=i.Array;c&&!c[a]&&o(c,a,l),f&&!f[a]&&o(f,a,l)},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var o=Object.create((e||i).prototype),a=new p(r||[]);return o._invoke=l(t,n,a),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function a(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){this.arg=t}function f(t){function e(e,n){var r=t[e](n),o=r.value;return o instanceof c?Promise.resolve(o.arg).then(i,a):Promise.resolve(o).then(function(t){return r.value=t,r})}function r(t,n){function r(){return e(t,n)}return o=o?o.then(r,r):new Promise(function(t){t(r())})}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o,i=e.bind(t,"next"),a=e.bind(t,"throw");e.bind(t,"return"),
this._invoke=r}function l(t,e,n){var r=E;return function(i,a){if(r===A)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return y()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===g){n.delegate=null;var s=u.iterator["return"];if(s){var c=o(s,u.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=g;var f=c.arg;if(!f.done)return r=x,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===x?n.sent=a:n.sent=g;else if("throw"===i){if(r===E)throw r=O,a;n.dispatchException(a)&&(i="next",a=g)}else"return"===i&&n.abrupt("return",a);r=A;var c=o(t,e,n);if("normal"===c.type){r=n.done?O:x;var f={value:c.arg,done:n.done};if(c.arg!==j)return f;n.delegate&&"next"===i&&(a=g)}else"throw"===c.type&&(r=O,i="throw",a=c.arg)}}}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function o(){for(;++n<t.length;)if(m.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=g,o.done=!0,o};return r.next=r}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,b="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"==typeof t,_=e.regeneratorRuntime;if(_)return void(w&&(t.exports=_));_=e.regeneratorRuntime=w?t.exports:{},_.wrap=r;var E="suspendedStart",x="suspendedYield",A="executing",O="completed",j={},k=u.prototype=i.prototype;a.prototype=k.constructor=u,u.constructor=a,a.displayName="GeneratorFunction",_.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===a||"GeneratorFunction"===(e.displayName||e.name):!1},_.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u,t.prototype=Object.create(k),t},_.awrap=function(t){return new c(t)},s(f.prototype),_.async=function(t,e,n,o){var i=new f(r(t,e,n,o));return _.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},s(k),k[b]=function(){return this},k.toString=function(){return"[object Generator]"},_.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},_.values=v,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),u=m.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?this.next=o.finallyLoc:this.complete(i),j},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),j}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},j}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(81))},function(t,e,n){function r(t){return n(o(t))}function o(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./node":433,"./node.js":433,"./web":434,"./web.js":434};r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=432},function(t,e,n){"use strict"},function(t,e,n){"use strict";!function(){try{var t=n(152).request().__proto__;t.setNoDelay||(t.setNoDelay=function(){}),t.abort||(t.abort=function(){this.xhr&&this.xhr.abort()})}catch(e){}}()}]);