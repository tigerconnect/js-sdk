var TigerConnect=function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=258)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ConnectionUnavailableError",function(){return b}),n.d(e,"NotFoundError",function(){return I}),n.d(e,"NotSignedInError",function(){return E}),n.d(e,"NotSupportedError",function(){return S}),n.d(e,"PermissionDeniedError",function(){return C}),n.d(e,"RequiresBasicAuthError",function(){return P}),n.d(e,"TargetNotSupportedError",function(){return x}),n.d(e,"ValidationError",function(){return M.a}),n.d(e,"WrongCredentialsError",function(){return N});var r,i,o,s,a,u,c,l,d,h,f,p,v,y,g,m,_=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=(m=Error,_(V,m),V.CODE="connection-unavailable",V),w=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=(y=Error,w(q,y),q.CODE="not-found",q),O=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=(p=Error,O(B,p),B.CODE="not-signed-in",B),T=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S=(h=Error,T(F,h),F.CODE="not-supported",F),A=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=(l=Error,A(L,l),L.CODE="permission-denied",L),R=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),P=(u=Error,R(U,u),U.CODE="requires-basic-auth",U),j=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),x=(s=Error,j(D,s),D.raise=function(t){throw new this(t)},D.CODE="target-not-supported",D),M=n(92),k=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),N=(i=Error,k(z,i),z.CODE="wrong-credentials",z);function z(t){void 0===t&&(t={});for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=i.apply(this,e)||this,o=t.tt_login_attempts_left;return r.code=z.CODE,r.loginAttemptsLeft=void 0===o?null:o,r}function D(t){return s.call(this,"method"+(t?" "+t:"")+" not supported in target web")||this}function U(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=u.apply(this,t)||this;return n.code=U.CODE,n}function L(t,e,n,r){void 0===r&&(r="can't perform action '"+n+"' on "+(t.name||t)+" #"+e);var o=l.call(this,r)||this;return o.code=L.CODE,o.resource=t,o.action=n,o.id=e,o}function F(t){var e=h.call(this,t)||this;return e.code=F.CODE,e}function B(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=p.apply(this,t)||this;return n.code=B.CODE,n}function q(t,e,n){var r=this;return n=n||t+" '"+e+"' not found",(r=y.call(this,n)||this).code=q.CODE,r.resource=t,r.id=e,r}function V(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=m.call(this,"No internet connection")||this;return n.code=V.CODE,n}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return p});var r=n(11),o=n.n(r),s=n(0),a=function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})},u=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},c=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},l=[403,404],i={CONVERSATION_FIND_ALL:"conversations.findAll",DISTRIBUTION_LIST_FIND:"distributionLists.find",ENTITIES_FIND_ALL:"entities.findAll",ESCALATION:"escalation",EVENTS_ACK:"events.ack",EVENTS_CLOSE_ALL_CONNECTIONS:"events.closeAllConnections",GROUP_ADD_MEMBERS:"group.addMembers",GROUP_CREATE:"group.create",GROUP_DESTROY:"group.destroy",GROUP_FIND:"group.find",GROUP_FIND_ALL_MEMBER_IDS:"group.findAllMemberIds",GROUP_UPDATE:"group.update",MESSAGE_FIND:"messages.find",MESSAGE_FIND_RECIPIENT_STATUS:"messages.findRecipientStatus",MESSAGE_FIND_RECIPIENT_STATUS_MULTI:"messages.findRecipientStatusMulti",MESSAGE_FORWARD:"message.forward",MESSAGE_SEND:"message.send",MESSAGE_UPDATE_RECIPIENT_STATUS_MULTI:"messages.updateRecipientStatusMulti",METADATA_FIND:"metadata.find",MUTE_FIND_ALL:"mute.findAll",ORGANIZATION_FIND:"organization.find",ORGANIZATION_FIND_ALL_OF_USER:"organization.findAllOfUser",ROLES_CREATE_P2P_GROUP:"roles.createP2PGroup",SEARCH_QUERY:"search.query",TEAMS_CREATE:"teams.create",TEAMS_FIND:"teams.find",TEAMS_LEAVE:"teams.leave",TEAMS_UPDATE:"teams.update",USER_FIND:"user.find",USER_FIND_ME:"user.findMe"},d={VERSION_TWO:"v2",VERSION_FIVE:"v5"},h=(f.prototype.getVersion=function(t){var e=d.VERSION_TWO,n=d.VERSION_FIVE;return{version:this.config.condensedReplays?n:e}},f);function f(t,e){Object.assign(this,e),this.config=t.config,this.host=t,this.httpClient=t.httpClient}function p(t){var e=void 0===t?{}:t,n=e.fallbackValue,o=void 0===n?null:n,r=e.httpStatusCodes,i=void 0===r?l:r;return function(t,e,n){var r=n.value;return n.value=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return a(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.call.apply(r,c([this],n))];case 1:return[2,t.sent()];case 2:if((e=t.sent()).response&&i.includes(e.response.status))return[2,o];if(e.code===s.PermissionDeniedError.CODE&&i.includes(403))return[2,o];if(e.code===s.WrongCredentialsError.CODE&&i.includes(401))return[2,o];throw e;case 3:return[2]}})})},n}}e.c=h,Object.assign(h.prototype,o.a.prototype)},function(t,x,M){(function(R,P){var j;(function(){var Qi="Expected a function",Zi="__lodash_placeholder__",Ji=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ts="[object Arguments]",es="[object Array]",ns="[object Boolean]",rs="[object Date]",os="[object Error]",is="[object Function]",ss="[object GeneratorFunction]",as="[object Map]",us="[object Number]",cs="[object Object]",ls="[object RegExp]",ds="[object Set]",hs="[object String]",fs="[object Symbol]",ps="[object WeakMap]",vs="[object ArrayBuffer]",ys="[object DataView]",gs="[object Float32Array]",ms="[object Float64Array]",_s="[object Int8Array]",bs="[object Int16Array]",ws="[object Int32Array]",Is="[object Uint8Array]",Os="[object Uint16Array]",Es="[object Uint32Array]",Ts=/\b__p \+= '';/g,Ss=/\b(__p \+=) '' \+/g,As=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cs=/&(?:amp|lt|gt|quot|#39);/g,Rs=/[&<>"']/g,Ps=RegExp(Cs.source),js=RegExp(Rs.source),xs=/<%-([\s\S]+?)%>/g,Ms=/<%([\s\S]+?)%>/g,ks=/<%=([\s\S]+?)%>/g,Ns=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zs=/^\w*$/,Ds=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Us=/[\\^$.*+?()[\]{}|]/g,Ls=RegExp(Us.source),Fs=/^\s+|\s+$/g,Bs=/^\s+/,qs=/\s+$/,Vs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gs=/\{\n\/\* \[wrapped with (.+)\] \*/,Hs=/,? & /,Ws=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ys=/\\(\\)?/g,Ks=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$s=/\w*$/,Xs=/^[-+]0x[0-9a-f]+$/i,Qs=/^0b[01]+$/i,Zs=/^\[object .+?Constructor\]$/,Js=/^0o[0-7]+$/i,ta=/^(?:0|[1-9]\d*)$/,ea=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,na=/($^)/,ra=/['\n\r\u2028\u2029\\]/g,t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+e+"]",r="["+t+"]",o="\\d+",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+e+o+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",a="\\ud83c[\\udffb-\\udfff]",u="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",d="[A-Z\\xc0-\\xd6\\xd8-\\xde]",h="(?:"+i+"|"+s+")",f="(?:"+d+"|"+s+")",p="(?:"+r+"|"+a+")?",v="[\\ufe0e\\ufe0f]?"+p+"(?:\\u200d(?:"+[u,c,l].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*",y="(?:"+["[\\u2700-\\u27bf]",c,l].join("|")+")"+v,g="(?:"+[u+r+"?",r,c,l,"[\\ud800-\\udfff]"].join("|")+")",oa=RegExp("['’]","g"),ia=RegExp(r,"g"),m=RegExp(a+"(?="+a+")|"+g+v,"g"),sa=RegExp([d+"?"+i+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[n,d,"$"].join("|")+")",f+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[n,d+h,"$"].join("|")+")",d+"?"+h+"+(?:['’](?:d|ll|m|re|s|t|ve))?",d+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,y].join("|"),"g"),_=RegExp("[\\u200d\\ud800-\\udfff"+t+"\\ufe0e\\ufe0f]"),aa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ua=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ca=-1,la={};la[gs]=la[ms]=la[_s]=la[bs]=la[ws]=la[Is]=la["[object Uint8ClampedArray]"]=la[Os]=la[Es]=!0,la[ts]=la[es]=la[vs]=la[ns]=la[ys]=la[rs]=la[os]=la[is]=la[as]=la[us]=la[cs]=la[ls]=la[ds]=la[hs]=la[ps]=!1;var da={};da[ts]=da[es]=da[vs]=da[ys]=da[ns]=da[rs]=da[gs]=da[ms]=da[_s]=da[bs]=da[ws]=da[as]=da[us]=da[cs]=da[ls]=da[ds]=da[hs]=da[fs]=da[Is]=da["[object Uint8ClampedArray]"]=da[Os]=da[Es]=!0,da[os]=da[is]=da[ps]=!1;var b={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ha=parseFloat,fa=parseInt,w="object"==typeof R&&R&&R.Object===Object&&R,I="object"==typeof self&&self&&self.Object===Object&&self,pa=w||I||Function("return this")(),O=x&&!x.nodeType&&x,E=O&&"object"==typeof P&&P&&!P.nodeType&&P,va=E&&E.exports===O,T=va&&w.process,S=function(){try{return E&&E.require&&E.require("util").types||T&&T.binding&&T.binding("util")}catch(t){}}(),ya=S&&S.isArrayBuffer,ga=S&&S.isDate,ma=S&&S.isMap,_a=S&&S.isRegExp,ba=S&&S.isSet,wa=S&&S.isTypedArray;function Ia(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Oa(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var s=t[o];e(r,s,n(s),t)}return r}function Ea(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ta(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Sa(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}function Aa(t,e){return!(null==t||!t.length)&&-1<za(t,e,0)}function Ca(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Ra(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Pa(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function ja(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function xa(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Ma(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var A=Fa("length");function ka(t,r,e){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=e,!1}),o}function Na(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function za(t,e,o){return e==e?function(t,e){for(var n=o-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}(t,e):Na(t,Ua,o)}function Da(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function Ua(t){return t!=t}function La(t,e){var n=null==t?0:t.length;return n?qa(t,e)/n:NaN}function Fa(e){return function(t){return null==t?void 0:t[e]}}function C(e){return function(t){return null==e?void 0:e[t]}}function Ba(t,r,o,i,e){return e(t,function(t,e,n){o=i?(i=!1,t):r(o,t,e,n)}),o}function qa(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Va(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ga(e){return function(t){return e(t)}}function Ha(e,t){return Ra(t,function(t){return e[t]})}function Wa(t,e){return t.has(e)}function Ya(t,e){for(var n=-1,r=t.length;++n<r&&-1<za(e,t[n],0););return n}function Ka(t,e){for(var n=t.length;n--&&-1<za(e,t[n],0););return n}var $a=C({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Xa=C({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qa(t){return"\\"+b[t]}function Za(t){return _.test(t)}function Ja(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function tu(e,n){return function(t){return e(n(t))}}function eu(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var s=t[n];s!==e&&s!==Zi||(t[n]=Zi,i[o++]=n)}return i}function nu(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function ru(t){return Za(t)?function(t){for(var e=m.lastIndex=0;m.test(t);)++e;return e}(t):A(t)}function ou(t){return Za(t)?t.match(m)||[]:t.split("")}var iu=C({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),su=function t(e){var n,C=(e=null==e?pa:su.defaults(pa.Object(),e,su.pick(pa,ua))).Array,r=e.Date,o=e.Error,y=e.Function,i=e.Math,O=e.Object,g=e.RegExp,l=e.String,R=e.TypeError,s=C.prototype,a=y.prototype,d=O.prototype,u=e["__core-js_shared__"],c=a.toString,E=d.hasOwnProperty,h=0,f=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",p=d.toString,v=c.call(O),m=pa._,_=g("^"+c.call(E).replace(Us,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=va?e.Buffer:void 0,w=e.Symbol,I=e.Uint8Array,T=b?b.allocUnsafe:void 0,S=tu(O.getPrototypeOf,O),A=O.create,P=d.propertyIsEnumerable,j=s.splice,x=w?w.isConcatSpreadable:void 0,M=w?w.iterator:void 0,k=w?w.toStringTag:void 0,N=function(){try{var t=Nn(O,"defineProperty");return t({},"",{}),t}catch(t){}}(),z=e.clearTimeout!==pa.clearTimeout&&e.clearTimeout,D=r&&r.now!==pa.Date.now&&r.now,U=e.setTimeout!==pa.setTimeout&&e.setTimeout,L=i.ceil,F=i.floor,B=O.getOwnPropertySymbols,q=b?b.isBuffer:void 0,V=e.isFinite,G=s.join,H=tu(O.keys,O),W=i.max,Y=i.min,K=r.now,$=e.parseInt,X=i.random,Q=s.reverse,Z=Nn(e,"DataView"),J=Nn(e,"Map"),tt=Nn(e,"Promise"),et=Nn(e,"Set"),nt=Nn(e,"WeakMap"),rt=Nn(O,"create"),ot=nt&&new nt,it={},st=cr(Z),at=cr(J),ut=cr(tt),ct=cr(et),lt=cr(nt),dt=w?w.prototype:void 0,ht=dt?dt.valueOf:void 0,ft=dt?dt.toString:void 0;function pt(t){if(Ao(t)&&!yo(t)&&!(t instanceof _t)){if(t instanceof mt)return t;if(E.call(t,"__wrapped__"))return lr(t)}return new mt(t)}var vt=function(t){if(!So(t))return{};if(A)return A(t);yt.prototype=t;var e=new yt;return yt.prototype=void 0,e};function yt(){}function gt(){}function mt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function _t(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function It(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new It;++e<n;)this.add(t[e])}function Et(t){var e=this.__data__=new wt(t);this.size=e.size}function Tt(t,e){var n=yo(t),r=!n&&vo(t),o=!n&&!r&&bo(t),i=!n&&!r&&!o&&No(t),s=n||r||o||i,a=s?Va(t.length,l):[],u=a.length;for(var c in t)!e&&!E.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||qn(c,u))||a.push(c);return a}function St(t){var e=t.length;return e?t[be(0,e-1)]:void 0}function At(t,e,n){(void 0===n||ho(t[e],n))&&(void 0!==n||e in t)||xt(t,e,n)}function Ct(t,e,n){var r=t[e];E.call(t,e)&&ho(r,n)&&(void 0!==n||e in t)||xt(t,e,n)}function Rt(t,e){for(var n=t.length;n--;)if(ho(t[n][0],e))return n;return-1}function Pt(t,r,o,i){return Lt(t,function(t,e,n){r(i,t,o(t),n)}),i}function jt(t,e){return t&&Je(e,ri(e),t)}function xt(t,e,n){"__proto__"==e&&N?N(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mt(t,e){for(var n=-1,r=e.length,o=C(r),i=null==t;++n<r;)o[n]=i?void 0:Zo(t,e[n]);return o}function kt(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=e<=t?t:e)),t}function Nt(n,r,o,t,e,i){var s,a=1&r,u=2&r,c=4&r;if(o&&(s=e?o(n,t,e,i):o(n)),void 0!==s)return s;if(!So(n))return n;var l,d,h,f,p,v,y,g,m=yo(n);if(m){if(y=(v=n).length,g=new v.constructor(y),y&&"string"==typeof v[0]&&E.call(v,"index")&&(g.index=v.index,g.input=v.input),s=g,!a)return Ze(n,s)}else{var _=Un(n),b=_==is||_==ss;if(bo(n))return We(n,a);if(_==cs||_==ts||b&&!e){if(s=u||b?{}:Fn(n),!a)return u?(h=n,f=(p=s)&&Je(n,oi(n),p),Je(h,Dn(h),f)):(d=jt(s,l=n),Je(l,zn(l),d))}else{if(!da[_])return e?n:{};s=function(t,e,n){var r,o,i,s,a,u=t.constructor;switch(e){case vs:return Ye(t);case ns:case rs:return new u(+t);case ys:return i=t,s=n?Ye(i.buffer):i.buffer,new i.constructor(s,i.byteOffset,i.byteLength);case gs:case ms:case _s:case bs:case ws:case Is:case"[object Uint8ClampedArray]":case Os:case Es:return Ke(t,n);case as:return new u;case us:case hs:return new u(t);case ls:return(o=new(r=t).constructor(r.source,$s.exec(r))).lastIndex=r.lastIndex,o;case ds:return new u;case fs:return a=t,ht?O(ht.call(a)):{}}}(n,_,a)}}var w=(i=i||new Et).get(n);if(w)return w;i.set(n,s),xo(n)?n.forEach(function(t){s.add(Nt(t,r,o,t,n,i))}):Co(n)&&n.forEach(function(t,e){s.set(e,Nt(t,r,o,e,n,i))});var I=m?void 0:(c?u?Cn:An:u?oi:ri)(n);return Ea(I||n,function(t,e){I&&(t=n[e=t]),Ct(s,e,Nt(t,r,o,e,n,i))}),s}function zt(t,e,n){var r=n.length;if(null==t)return!r;for(t=O(t);r--;){var o=n[r],i=e[o],s=t[o];if(void 0===s&&!(o in t)||!i(s))return!1}return!0}function Dt(t,e,n){if("function"!=typeof t)throw new R(Qi);return tr(function(){t.apply(void 0,n)},e)}function Ut(t,e,n,r){var o=-1,i=Aa,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Ra(e,Ga(n))),r?(i=Ca,s=!1):200<=e.length&&(i=Wa,s=!1,e=new Ot(e));t:for(;++o<a;){var l=t[o],d=null==n?l:n(l);if(l=r||0!==l?l:0,s&&d==d){for(var h=c;h--;)if(e[h]===d)continue t;u.push(l)}else i(e,d,r)||u.push(l)}return u}pt.templateSettings={escape:xs,evaluate:Ms,interpolate:ks,variable:"",imports:{_:pt}},(pt.prototype=gt.prototype).constructor=pt,(mt.prototype=vt(gt.prototype)).constructor=mt,(_t.prototype=vt(gt.prototype)).constructor=_t,bt.prototype.clear=function(){this.__data__=rt?rt(null):{},this.size=0},bt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bt.prototype.get=function(t){var e=this.__data__;if(rt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return E.call(e,t)?e[t]:void 0},bt.prototype.has=function(t){var e=this.__data__;return rt?void 0!==e[t]:E.call(e,t)},bt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&void 0===e?"__lodash_hash_undefined__":e,this},wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=Rt(e,t);return!(n<0||(n==e.length-1?e.pop():j.call(e,n,1),--this.size,0))},wt.prototype.get=function(t){var e=this.__data__,n=Rt(e,t);return n<0?void 0:e[n][1]},wt.prototype.has=function(t){return-1<Rt(this.__data__,t)},wt.prototype.set=function(t,e){var n=this.__data__,r=Rt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},It.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(J||wt),string:new bt}},It.prototype.delete=function(t){var e=Mn(this,t).delete(t);return this.size-=e?1:0,e},It.prototype.get=function(t){return Mn(this,t).get(t)},It.prototype.has=function(t){return Mn(this,t).has(t)},It.prototype.set=function(t,e){var n=Mn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ot.prototype.add=Ot.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ot.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new wt,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!J||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new It(r)}return n.set(t,e),this.size=n.size,this};var Lt=nn(Yt),Ft=nn(Kt,!0);function Bt(t,r){var o=!0;return Lt(t,function(t,e,n){return o=!!r(t,e,n)}),o}function qt(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],s=e(i);if(null!=s&&(void 0===a?s==s&&!ko(s):n(s,a)))var a=s,u=i}return u}function Vt(t,r){var o=[];return Lt(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o}function Gt(t,e,n,r,o){var i=-1,s=t.length;for(n=n||Bn,o=o||[];++i<s;){var a=t[i];0<e&&n(a)?1<e?Gt(a,e-1,n,r,o):Pa(o,a):r||(o[o.length]=a)}return o}var Ht=rn(),Wt=rn(!0);function Yt(t,e){return t&&Ht(t,e,ri)}function Kt(t,e){return t&&Wt(t,e,ri)}function $t(e,t){return Sa(t,function(t){return Oo(e[t])})}function Xt(t,e){for(var n=0,r=(e=qe(e,t)).length;null!=t&&n<r;)t=t[ur(e[n++])];return n&&n==r?t:void 0}function Qt(t,e,n){var r=e(t);return yo(t)?r:Pa(r,n(t))}function Zt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in O(t)?function(t){var e=E.call(t,k),n=t[k];try{var r=!(t[k]=void 0)}catch(t){}var o=p.call(t);return r&&(e?t[k]=n:delete t[k]),o}(t):(e=t,p.call(e));var e}function Jt(t,e){return e<t}function te(t,e){return null!=t&&E.call(t,e)}function ee(t,e){return null!=t&&e in O(t)}function ne(t,e,n){for(var r=n?Ca:Aa,o=t[0].length,i=t.length,s=i,a=C(i),u=1/0,c=[];s--;){var l=t[s];s&&e&&(l=Ra(l,Ga(e))),u=Y(l.length,u),a[s]=!n&&(e||120<=o&&120<=l.length)?new Ot(s&&l):void 0}l=t[0];var d=-1,h=a[0];t:for(;++d<o&&c.length<u;){var f=l[d],p=e?e(f):f;if(f=n||0!==f?f:0,!(h?Wa(h,p):r(c,p,n))){for(s=i;--s;){var v=a[s];if(!(v?Wa(v,p):r(t[s],p,n)))continue t}h&&h.push(p),c.push(f)}}return c}function re(t,e,n){var r=null==(t=Qn(t,e=qe(e,t)))?t:t[ur(wr(e))];return null==r?void 0:Ia(r,t,n)}function oe(t){return Ao(t)&&Zt(t)==ts}function ie(t,e,n,r,o){return t===e||(null==t||null==e||!Ao(t)&&!Ao(e)?t!=t&&e!=e:function(t,e,n,r,o,i){var s=yo(t),a=yo(e),d=s?es:Un(t),u=a?es:Un(e),c=(d=d==ts?cs:d)==cs,l=(u=u==ts?cs:u)==cs,h=d==u;if(h&&bo(t)){if(!bo(e))return!1;c=!(s=!0)}if(h&&!c)return i=i||new Et,s||No(t)?Tn(t,e,n,r,o,i):function(t,e,n,r,o,i,s){switch(d){case ys:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case vs:return!(t.byteLength!=e.byteLength||!i(new I(t),new I(e)));case ns:case rs:case us:return ho(+t,+e);case os:return t.name==e.name&&t.message==e.message;case ls:case hs:return t==e+"";case as:var a=Ja;case ds:var u=1&r;if(a=a||nu,t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Tn(a(t),a(e),r,o,i,s);return s.delete(t),l;case fs:if(ht)return ht.call(t)==ht.call(e)}return!1}(t,e,0,n,r,o,i);if(!(1&n)){var f=c&&E.call(t,"__wrapped__"),p=l&&E.call(e,"__wrapped__");if(f||p)return o(f?t.value():t,p?e.value():e,n,r,i=i||new Et)}return h&&function(t,e,n,r,o,i){var s=1&n,a=An(t),u=a.length;if(u!=An(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:E.call(e,l)))return!1}var d=i.get(t);if(d&&i.get(e))return d==e;var h=!0;i.set(t,e),i.set(e,t);for(var f=s;++c<u;){var p=t[l=a[c]],v=e[l];if(r)var y=s?r(v,p,l,e,t,i):r(p,v,l,t,e,i);if(!(void 0===y?p===v||o(p,v,n,r,i):y)){h=!1;break}f=f||"constructor"==l}if(h&&!f){var g=t.constructor,m=e.constructor;g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(t),i.delete(e),h}(t,e,n,r,o,i=i||new Et)}(t,e,n,r,ie,o))}function se(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=O(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var u=(a=n[o])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var d=new Et;if(r)var h=r(c,l,u,t,e,d);if(!(void 0===h?ie(l,c,3,r,d):h))return!1}}return!0}function ae(t){return!(!So(t)||f&&f in t)&&(Oo(t)?_:Zs).test(cr(t))}function ue(t){return"function"==typeof t?t:null==t?Ri:"object"==typeof t?yo(t)?fe(t[0],t[1]):he(t):Ui(t)}function ce(t){if(!Yn(t))return H(t);var e=[];for(var n in O(t))E.call(t,n)&&"constructor"!=n&&e.push(n);return e}function le(t,e){return t<e}function de(t,r){var o=-1,i=mo(t)?C(t.length):[];return Lt(t,function(t,e,n){i[++o]=r(t,e,n)}),i}function he(e){var n=kn(e);return 1==n.length&&n[0][2]?$n(n[0][0],n[0][1]):function(t){return t===e||se(t,e,n)}}function fe(n,r){return Gn(n)&&Kn(r)?$n(ur(n),r):function(t){var e=Zo(t,n);return void 0===e&&e===r?Jo(t,n):ie(r,e,3)}}function pe(r,o,i,s,a){r!==o&&Ht(o,function(t,e){if(a=a||new Et,So(t))!function(t,e,n,r,o,i,s){var a=Zn(t,n),u=Zn(e,n),c=s.get(u);if(c)At(t,n,c);else{var l=i?i(a,u,n+"",t,e,s):void 0,d=void 0===l;if(d){var h=yo(u),f=!h&&bo(u),p=!h&&!f&&No(u);l=u,h||f||p?l=yo(a)?a:_o(a)?Ze(a):f?We(u,!(d=!1)):p?Ke(u,!(d=!1)):[]:Po(u)||vo(u)?vo(l=a)?l=Vo(a):So(a)&&!Oo(a)||(l=Fn(u)):d=!1}d&&(s.set(u,l),o(l,u,r,i,s),s.delete(u)),At(t,n,l)}}(r,o,e,i,pe,s,a);else{var n=s?s(Zn(r,e),t,e+"",r,o,a):void 0;void 0===n&&(n=t),At(r,e,n)}},oi)}function ve(t,e){var n=t.length;if(n)return qn(e+=e<0?n:0,n)?t[e]:void 0}function ye(t,r,n){var o=-1;return r=Ra(r.length?r:[Ri],Ga(xn())),function(t){var e=t.length;for(t.sort(function(t,e){return function(t,e,n){var r=-1,o=t.criteria,i=e.criteria,s=o.length,a=n.length;for(;++r<s;){var u=$e(o[r],i[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)});e--;)t[e]=t[e].value;return t}(de(t,function(e,t,n){return{criteria:Ra(r,function(t){return t(e)}),index:++o,value:e}}))}function ge(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var s=e[r],a=Xt(t,s);n(a,s)&&Oe(i,qe(s,t),a)}return i}function me(t,e,n,r){var o=r?Da:za,i=-1,s=e.length,a=t;for(t===e&&(e=Ze(e)),n&&(a=Ra(t,Ga(n)));++i<s;)for(var u=0,c=e[i],l=n?n(c):c;-1<(u=o(a,l,u,r));)a!==t&&j.call(a,u,1),j.call(t,u,1);return t}function _e(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;qn(o)?j.call(t,o,1):ke(t,o)}}return t}function be(t,e){return t+F(X()*(e-t+1))}function we(t,e){var n="";if(!t||e<1||9007199254740991<e)return n;for(;e%2&&(n+=t),(e=F(e/2))&&(t+=t),e;);return n}function Ie(t,e){return er(Xn(t,e,Ri),t+"")}function Oe(t,e,n,r){if(!So(t))return t;for(var o=-1,i=(e=qe(e,t)).length,s=i-1,a=t;null!=a&&++o<i;){var u=ur(e[o]),c=n;if(o!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=So(l)?l:qn(e[o+1])?[]:{})}Ct(a,u,c),a=a[u]}return t}var Ee=ot?function(t,e){return ot.set(t,e),t}:Ri,Te=N?function(t,e){return N(t,"toString",{configurable:!0,enumerable:!1,value:Si(e),writable:!0})}:Ri;function Se(t,e,n){var r=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(n=o<n?o:n)<0&&(n+=o),o=n<e?0:n-e>>>0,e>>>=0;for(var i=C(o);++r<o;)i[r]=t[r+e];return i}function Ae(t,r){var o;return Lt(t,function(t,e,n){return!(o=r(t,e,n))}),!!o}function Ce(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,s=t[i];null!==s&&!ko(s)&&(n?s<=e:s<e)?r=1+i:o=i}return o}return Re(t,e,Ri,n)}function Re(t,e,n,r){e=n(e);for(var o=0,i=null==t?0:t.length,s=e!=e,a=null===e,u=ko(e),c=void 0===e;o<i;){var l=F((o+i)/2),d=n(t[l]),h=void 0!==d,f=null===d,p=d==d,v=ko(d);if(s)var y=r||p;else y=c?p&&(r||h):a?p&&h&&(r||!f):u?p&&h&&!f&&(r||!v):!f&&!v&&(r?d<=e:d<e);y?o=l+1:i=l}return Y(i,4294967294)}function Pe(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!ho(a,u)){var u=a;i[o++]=0===s?0:s}}return i}function je(t){return"number"==typeof t?t:ko(t)?NaN:+t}function xe(t){if("string"==typeof t)return t;if(yo(t))return Ra(t,xe)+"";if(ko(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Me(t,e,n){var r=-1,o=Aa,i=t.length,s=!0,a=[],u=a;if(n)s=!1,o=Ca;else if(200<=i){var c=e?null:_n(t);if(c)return nu(c);s=!1,o=Wa,u=new Ot}else u=e?[]:a;t:for(;++r<i;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,s&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),a.push(l)}else o(u,d,n)||(u!==a&&u.push(d),a.push(l))}return a}function ke(t,e){return null==(t=Qn(t,e=qe(e,t)))||delete t[ur(wr(e))]}function Ne(t,e,n,r){return Oe(t,e,n(Xt(t,e)),r)}function ze(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Se(t,r?0:i,r?i+1:o):Se(t,r?i+1:0,r?o:i)}function De(t,e){var n=t;return n instanceof _t&&(n=n.value()),ja(e,function(t,e){return e.func.apply(e.thisArg,Pa([t],e.args))},n)}function Ue(t,e,n){var r=t.length;if(r<2)return r?Me(t[0]):[];for(var o=-1,i=C(r);++o<r;)for(var s=t[o],a=-1;++a<r;)a!=o&&(i[o]=Ut(i[o]||s,t[a],e,n));return Me(Gt(i,1),e,n)}function Le(t,e,n){for(var r=-1,o=t.length,i=e.length,s={};++r<o;){var a=r<i?e[r]:void 0;n(s,t[r],a)}return s}function Fe(t){return _o(t)?t:[]}function Be(t){return"function"==typeof t?t:Ri}function qe(t,e){return yo(t)?t:Gn(t,e)?[t]:ar(Go(t))}var Ve=Ie;function Ge(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&r<=n?t:Se(t,e,n)}var He=z||function(t){return pa.clearTimeout(t)};function We(t,e){if(e)return t.slice();var n=t.length,r=T?T(n):new t.constructor(n);return t.copy(r),r}function Ye(t){var e=new t.constructor(t.byteLength);return new I(e).set(new I(t)),e}function Ke(t,e){var n=e?Ye(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function $e(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,i=ko(t),s=void 0!==e,a=null===e,u=e==e,c=ko(e);if(!a&&!c&&!i&&e<t||i&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&t<e||c&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!u)return-1}return 0}function Xe(t,e,n,r){for(var o=-1,i=t.length,s=n.length,a=-1,u=e.length,c=W(i-s,0),l=C(u+c),d=!r;++a<u;)l[a]=e[a];for(;++o<s;)(d||o<i)&&(l[n[o]]=t[o]);for(;c--;)l[a++]=t[o++];return l}function Qe(t,e,n,r){for(var o=-1,i=t.length,s=-1,a=n.length,u=-1,c=e.length,l=W(i-a,0),d=C(l+c),h=!r;++o<l;)d[o]=t[o];for(var f=o;++u<c;)d[f+u]=e[u];for(;++s<a;)(h||o<i)&&(d[f+n[s]]=t[o++]);return d}function Ze(t,e){var n=-1,r=t.length;for(e=e||C(r);++n<r;)e[n]=t[n];return e}function Je(t,e,n,r){var o=!n;n=n||{};for(var i=-1,s=e.length;++i<s;){var a=e[i],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),o?xt(n,a,u):Ct(n,a,u)}return n}function tn(o,i){return function(t,e){var n=yo(t)?Oa:Pt,r=i?i():{};return n(t,o,xn(e,2),r)}}function en(a){return Ie(function(t,e){var n=-1,r=e.length,o=1<r?e[r-1]:void 0,i=2<r?e[2]:void 0;for(o=3<a.length&&"function"==typeof o?(r--,o):void 0,i&&Vn(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=O(t);++n<r;){var s=e[n];s&&a(t,s,n,o)}return t})}function nn(i,s){return function(t,e){if(null==t)return t;if(!mo(t))return i(t,e);for(var n=t.length,r=s?n:-1,o=O(t);(s?r--:++r<n)&&!1!==e(o[r],r,o););return t}}function rn(u){return function(t,e,n){for(var r=-1,o=O(t),i=n(t),s=i.length;s--;){var a=i[u?s:++r];if(!1===e(o[a],a,o))break}return t}}function on(o){return function(t){var e=Za(t=Go(t))?ou(t):void 0,n=e?e[0]:t.charAt(0),r=e?Ge(e,1).join(""):t.slice(1);return n[o]()+r}}function sn(e){return function(t){return ja(Oi(vi(t).replace(oa,"")),e,"")}}function an(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=vt(r.prototype),n=r.apply(e,t);return So(n)?n:e}}function un(s){return function(t,e,n){var r=O(t);if(!mo(t)){var o=xn(e,3);t=ri(t),e=function(t){return o(r[t],t,r)}}var i=s(t,e,n);return-1<i?r[o?t[i]:i]:void 0}}function cn(u){return Sn(function(o){var i=o.length,t=i,e=mt.prototype.thru;for(u&&o.reverse();t--;){var n=o[t];if("function"!=typeof n)throw new R(Qi);if(e&&!s&&"wrapper"==Pn(n))var s=new mt([],!0)}for(t=s?t:i;++t<i;){var r=Pn(n=o[t]),a="wrapper"==r?Rn(n):void 0;s=a&&Hn(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?s[Pn(a[0])].apply(s,a[3]):1==n.length&&Hn(n)?s[r]():s.thru(n)}return function(){var t=arguments,e=t[0];if(s&&1==t.length&&yo(e))return s.plant(e).value();for(var n=0,r=i?o[n].apply(this,t):e;++n<i;)r=o[n].call(this,r);return r}})}function ln(c,l,d,h,f,p,v,y,g,m){var _=128&l,b=1&l,w=2&l,I=24&l,O=512&l,E=w?void 0:an(c);return function t(){for(var e=arguments.length,n=C(e),r=e;r--;)n[r]=arguments[r];if(I)var o=jn(t),i=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(n,o);if(h&&(n=Xe(n,h,f,I)),p&&(n=Qe(n,p,v,I)),e-=i,I&&e<m){var s=eu(n,o);return gn(c,l,ln,t.placeholder,d,n,s,y,g,m-e)}var a=b?d:this,u=w?a[c]:c;return e=n.length,y?n=function(t,e){for(var n=t.length,r=Y(e.length,n),o=Ze(t);r--;){var i=e[r];t[r]=qn(i,n)?o[i]:void 0}return t}(n,y):O&&1<e&&n.reverse(),_&&g<e&&(n.length=g),this&&this!==pa&&this instanceof t&&(u=E||an(u)),u.apply(a,n)}}function dn(s,a){return function(t,e){return n=t,r=s,o=a(e),i={},Yt(n,function(t,e,n){r(i,o(t),e,n)}),i;var n,r,o,i}}function hn(r,o){return function(t,e){var n;if(void 0===t&&void 0===e)return o;if(void 0!==t&&(n=t),void 0!==e){if(void 0===n)return e;e="string"==typeof t||"string"==typeof e?(t=xe(t),xe(e)):(t=je(t),je(e)),n=r(t,e)}return n}}function fn(r){return Sn(function(t){return t=Ra(t,Ga(xn())),Ie(function(e){var n=this;return r(t,function(t){return Ia(t,n,e)})})})}function pn(t,e){var n=(e=void 0===e?" ":xe(e)).length;if(n<2)return n?we(e,t):e;var r=we(e,L(t/ru(e)));return Za(e)?Ge(ou(r),0,t).join(""):r.slice(0,t)}function vn(r){return function(t,e,n){return n&&"number"!=typeof n&&Vn(t,e,n)&&(e=n=void 0),t=Lo(t),void 0===e?(e=t,t=0):e=Lo(e),function(t,e,n,r){for(var o=-1,i=W(L((e-t)/(n||1)),0),s=C(i);i--;)s[r?i:++o]=t,t+=n;return s}(t,e,n=void 0===n?t<e?1:-1:Lo(n),r)}}function yn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=qo(t),e=qo(e)),n(t,e)}}function gn(t,e,n,r,o,i,s,a,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var d=[t,e,o,l?i:void 0,l?s:void 0,l?void 0:i,l?void 0:s,a,u,c],h=n.apply(void 0,d);return Hn(t)&&Jn(h,d),h.placeholder=r,nr(h,t,e)}function mn(t){var r=i[t];return function(t,e){if(t=qo(t),(e=null==e?0:Y(Fo(e),292))&&V(t)){var n=(Go(t)+"e").split("e");return+((n=(Go(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}var _n=et&&1/nu(new et([,-0]))[1]==1/0?function(t){return new et(t)}:ki;function bn(r){return function(t){var e,n=Un(t);return n==as?Ja(t):n==ds?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(t):Ra(r(e=t),function(t){return[t,e[t]]})}}function wn(t,e,n,r,o,i,s,a){var u=2&e;if(!u&&"function"!=typeof t)throw new R(Qi);var c=r?r.length:0;if(c||(e&=-97,r=o=void 0),s=void 0===s?s:W(Fo(s),0),a=void 0===a?a:Fo(a),c-=o?o.length:0,64&e){var l=r,d=o;r=o=void 0}var h,f,p,v,y,g,m,_,b,w,I,O,E,T=u?void 0:Rn(t),S=[t,e,n,r,o,l,d,i,s,a];if(T&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!s)return;1&r&&(t[2]=e[2],o|=1&n?0:4);var a=e[3];if(a){var u=t[3];t[3]=u?Xe(u,a,e[4]):a,t[4]=u?eu(t[3],Zi):e[4]}(a=e[5])&&(u=t[5],t[5]=u?Qe(u,a,e[6]):a,t[6]=u?eu(t[5],Zi):e[6]),(a=e[7])&&(t[7]=a),128&r&&(t[8]=null==t[8]?e[8]:Y(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(S,T),t=S[0],e=S[1],n=S[2],r=S[3],o=S[4],!(a=S[9]=void 0===S[9]?u?0:t.length:W(S[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)A=8==e||16==e?(I=e,O=a,E=an(w=t),function t(){for(var e=arguments.length,n=C(e),r=e,o=jn(t);r--;)n[r]=arguments[r];var i=e<3&&n[0]!==o&&n[e-1]!==o?[]:eu(n,o);return(e-=i.length)<O?gn(w,I,ln,t.placeholder,void 0,n,i,void 0,void 0,O-e):Ia(this&&this!==pa&&this instanceof t?E:w,this,n)}):32!=e&&33!=e||o.length?ln.apply(void 0,S):(g=n,m=r,_=1&e,b=an(y=t),function t(){for(var e=-1,n=arguments.length,r=-1,o=m.length,i=C(o+n),s=this&&this!==pa&&this instanceof t?b:y;++r<o;)i[r]=m[r];for(;n--;)i[r++]=arguments[++e];return Ia(s,_?g:this,i)});else var A=(f=n,p=1&e,v=an(h=t),function t(){return(this&&this!==pa&&this instanceof t?v:h).apply(p?f:this,arguments)});return nr((T?Ee:Jn)(A,S),t,e)}function In(t,e,n,r){return void 0===t||ho(t,d[n])&&!E.call(r,n)?e:t}function On(t,e,n,r,o,i){return So(t)&&So(e)&&(i.set(e,t),pe(t,e,void 0,On,i),i.delete(e)),t}function En(t){return Po(t)?void 0:t}function Tn(t,e,n,r,o,i){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var c=i.get(t);if(c&&i.get(e))return c==e;var l=-1,d=!0,h=2&n?new Ot:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var f=t[l],p=e[l];if(r)var v=s?r(p,f,l,e,t,i):r(f,p,l,t,e,i);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!Ma(e,function(t,e){if(!Wa(h,e)&&(f===t||o(f,t,n,r,i)))return h.push(e)})){d=!1;break}}else if(f!==p&&!o(f,p,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}function Sn(t){return er(Xn(t,void 0,yr),t+"")}function An(t){return Qt(t,ri,zn)}function Cn(t){return Qt(t,oi,Dn)}var Rn=ot?function(t){return ot.get(t)}:ki;function Pn(t){for(var e=t.name+"",n=it[e],r=E.call(it,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function jn(t){return(E.call(pt,"placeholder")?pt:t).placeholder}function xn(){var t=pt.iteratee||Pi;return t=t===Pi?ue:t,arguments.length?t(arguments[0],arguments[1]):t}function Mn(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function kn(t){for(var e=ri(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Kn(o)]}return e}function Nn(t,e){var n=null==t?void 0:t[e];return ae(n)?n:void 0}var zn=B?function(e){return null==e?[]:(e=O(e),Sa(B(e),function(t){return P.call(e,t)}))}:Bi,Dn=B?function(t){for(var e=[];t;)Pa(e,zn(t)),t=S(t);return e}:Bi,Un=Zt;function Ln(t,e,n){for(var r=-1,o=(e=qe(e,t)).length,i=!1;++r<o;){var s=ur(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&To(o)&&qn(s,o)&&(yo(t)||vo(t))}function Fn(t){return"function"!=typeof t.constructor||Yn(t)?{}:vt(S(t))}function Bn(t){return yo(t)||vo(t)||!!(x&&t&&t[x])}function qn(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ta.test(t))&&-1<t&&t%1==0&&t<e}function Vn(t,e,n){if(!So(n))return!1;var r=typeof e;return!!("number"==r?mo(n)&&qn(e,n.length):"string"==r&&e in n)&&ho(n[e],t)}function Gn(t,e){if(yo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ko(t))||zs.test(t)||!Ns.test(t)||null!=e&&t in O(e)}function Hn(t){var e=Pn(t),n=pt[e];if("function"!=typeof n||!(e in _t.prototype))return!1;if(t===n)return!0;var r=Rn(n);return!!r&&t===r[0]}(Z&&Un(new Z(new ArrayBuffer(1)))!=ys||J&&Un(new J)!=as||tt&&"[object Promise]"!=Un(tt.resolve())||et&&Un(new et)!=ds||nt&&Un(new nt)!=ps)&&(Un=function(t){var e=Zt(t),n=e==cs?t.constructor:void 0,r=n?cr(n):"";if(r)switch(r){case st:return ys;case at:return as;case ut:return"[object Promise]";case ct:return ds;case lt:return ps}return e});var Wn=u?Oo:qi;function Yn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||d)}function Kn(t){return t==t&&!So(t)}function $n(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in O(t))}}function Xn(i,s,a){return s=W(void 0===s?i.length-1:s,0),function(){for(var t=arguments,e=-1,n=W(t.length-s,0),r=C(n);++e<n;)r[e]=t[s+e];e=-1;for(var o=C(s+1);++e<s;)o[e]=t[e];return o[s]=a(r),Ia(i,this,o)}}function Qn(t,e){return e.length<2?t:Xt(t,Se(e,0,-1))}function Zn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Jn=rr(Ee),tr=U||function(t,e){return pa.setTimeout(t,e)},er=rr(Te);function nr(t,e,n){var r,o,i,s=e+"";return er(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(Vs,"{\n/* [wrapped with "+e+"] */\n")}(s,(i=s.match(Gs),r=i?i[1].split(Hs):[],o=n,Ea(Ji,function(t){var e="_."+t[0];o&t[1]&&!Aa(r,e)&&r.push(e)}),r.sort())))}function rr(n){var r=0,o=0;return function(){var t=K(),e=16-(t-o);if(o=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}function or(t,e){var n=-1,r=t.length,o=r-1;for(e=void 0===e?r:e;++n<e;){var i=be(n,o),s=t[i];t[i]=t[n],t[n]=s}return t.length=e,t}var ir,sr,ar=(sr=(ir=io(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(Ds,function(t,e,n,r){o.push(n?r.replace(Ys,"$1"):e||t)}),o},function(t){return 500===sr.size&&sr.clear(),t})).cache,ir);function ur(t){if("string"==typeof t||ko(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function cr(t){if(null!=t){try{return c.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function lr(t){if(t instanceof _t)return t.clone();var e=new mt(t.__wrapped__,t.__chain__);return e.__actions__=Ze(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var dr=Ie(function(t,e){return _o(t)?Ut(t,Gt(e,1,_o,!0)):[]}),hr=Ie(function(t,e){var n=wr(e);return _o(n)&&(n=void 0),_o(t)?Ut(t,Gt(e,1,_o,!0),xn(n,2)):[]}),fr=Ie(function(t,e){var n=wr(e);return _o(n)&&(n=void 0),_o(t)?Ut(t,Gt(e,1,_o,!0),void 0,n):[]});function pr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Fo(n);return o<0&&(o=W(r+o,0)),Na(t,xn(e,3),o)}function vr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=Fo(n),o=n<0?W(r+o,0):Y(o,r-1)),Na(t,xn(e,3),o,!0)}function yr(t){return null!=t&&t.length?Gt(t,1):[]}function gr(t){return t&&t.length?t[0]:void 0}var mr=Ie(function(t){var e=Ra(t,Fe);return e.length&&e[0]===t[0]?ne(e):[]}),_r=Ie(function(t){var e=wr(t),n=Ra(t,Fe);return e===wr(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?ne(n,xn(e,2)):[]}),br=Ie(function(t){var e=wr(t),n=Ra(t,Fe);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?ne(n,void 0,e):[]});function wr(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Ir=Ie(Or);function Or(t,e){return t&&t.length&&e&&e.length?me(t,e):t}var Er=Sn(function(t,e){var n=null==t?0:t.length,r=Mt(t,e);return _e(t,Ra(e,function(t){return qn(t,n)?+t:t}).sort($e)),r});function Tr(t){return null==t?t:Q.call(t)}var Sr=Ie(function(t){return Me(Gt(t,1,_o,!0))}),Ar=Ie(function(t){var e=wr(t);return _o(e)&&(e=void 0),Me(Gt(t,1,_o,!0),xn(e,2))}),Cr=Ie(function(t){var e=wr(t);return e="function"==typeof e?e:void 0,Me(Gt(t,1,_o,!0),void 0,e)});function Rr(e){if(!e||!e.length)return[];var n=0;return e=Sa(e,function(t){if(_o(t))return n=W(t.length,n),!0}),Va(n,function(t){return Ra(e,Fa(t))})}function Pr(t,e){if(!t||!t.length)return[];var n=Rr(t);return null==e?n:Ra(n,function(t){return Ia(e,void 0,t)})}var jr=Ie(function(t,e){return _o(t)?Ut(t,e):[]}),xr=Ie(function(t){return Ue(Sa(t,_o))}),Mr=Ie(function(t){var e=wr(t);return _o(e)&&(e=void 0),Ue(Sa(t,_o),xn(e,2))}),kr=Ie(function(t){var e=wr(t);return e="function"==typeof e?e:void 0,Ue(Sa(t,_o),void 0,e)}),Nr=Ie(Rr),zr=Ie(function(t){var e=t.length,n=1<e?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Pr(t,n)});function Dr(t){var e=pt(t);return e.__chain__=!0,e}function Ur(t,e){return e(t)}var Lr=Sn(function(e){function t(t){return Mt(t,e)}var n=e.length,r=n?e[0]:0,o=this.__wrapped__;return!(1<n||this.__actions__.length)&&o instanceof _t&&qn(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:Ur,args:[t],thisArg:void 0}),new mt(o,this.__chain__).thru(function(t){return n&&!t.length&&t.push(void 0),t})):this.thru(t)}),Fr=tn(function(t,e,n){E.call(t,n)?++t[n]:xt(t,n,1)}),Br=un(pr),qr=un(vr);function Vr(t,e){return(yo(t)?Ea:Lt)(t,xn(e,3))}function Gr(t,e){return(yo(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Ft)(t,xn(e,3))}var Hr=tn(function(t,e,n){E.call(t,n)?t[n].push(e):xt(t,n,[e])}),Wr=Ie(function(t,e,n){var r=-1,o="function"==typeof e,i=mo(t)?C(t.length):[];return Lt(t,function(t){i[++r]=o?Ia(e,t,n):re(t,e,n)}),i}),Yr=tn(function(t,e,n){xt(t,n,e)});function Kr(t,e){return(yo(t)?Ra:de)(t,xn(e,3))}var $r=tn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Xr=Ie(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Vn(t,e[0],e[1])?e=[]:2<n&&Vn(e[0],e[1],e[2])&&(e=[e[0]]),ye(t,Gt(e,1),[])}),Qr=D||function(){return pa.Date.now()};function Zr(t,e,n){return e=n?void 0:e,wn(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function Jr(t,e){var n;if("function"!=typeof e)throw new R(Qi);return t=Fo(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var to=Ie(function(t,e,n){var r=1;if(n.length){var o=eu(n,jn(to));r|=32}return wn(t,r,e,n,o)}),eo=Ie(function(t,e,n){var r=3;if(n.length){var o=eu(n,jn(eo));r|=32}return wn(e,r,t,n,o)});function no(r,n,t){var o,i,s,a,u,c,l=0,d=!1,h=!1,e=!0;if("function"!=typeof r)throw new R(Qi);function f(t){var e=o,n=i;return o=i=void 0,l=t,a=r.apply(n,e)}function p(t){var e=t-c;return void 0===c||n<=e||e<0||h&&s<=t-l}function v(){var t,e=Qr();if(p(e))return y(e);u=tr(v,(t=n-(e-c),h?Y(t,s-(e-l)):t))}function y(t){return u=void 0,e&&o?f(t):(o=i=void 0,a)}function g(){var t=Qr(),e=p(t);if(o=arguments,i=this,c=t,e){if(void 0===u)return function(t){return l=t,u=tr(v,n),d?f(t):a}(c);if(h)return He(u),u=tr(v,n),f(c)}return void 0===u&&(u=tr(v,n)),a}return n=qo(n)||0,So(t)&&(d=!!t.leading,s=(h="maxWait"in t)?W(qo(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),g.cancel=function(){void 0!==u&&He(u),o=c=i=u=void(l=0)},g.flush=function(){return void 0===u?a:y(Qr())},g}var ro=Ie(function(t,e){return Dt(t,1,e)}),oo=Ie(function(t,e,n){return Dt(t,qo(e)||0,n)});function io(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new R(Qi);var s=function(){var t=arguments,e=i?i.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return s.cache=n.set(e,r)||n,r};return s.cache=new(io.Cache||It),s}function so(e){if("function"!=typeof e)throw new R(Qi);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}io.Cache=It;var ao=Ve(function(r,o){var i=(o=1==o.length&&yo(o[0])?Ra(o[0],Ga(xn())):Ra(Gt(o,1),Ga(xn()))).length;return Ie(function(t){for(var e=-1,n=Y(t.length,i);++e<n;)t[e]=o[e].call(this,t[e]);return Ia(r,this,t)})}),uo=Ie(function(t,e){return wn(t,32,void 0,e,eu(e,jn(uo)))}),co=Ie(function(t,e){return wn(t,64,void 0,e,eu(e,jn(co)))}),lo=Sn(function(t,e){return wn(t,256,void 0,void 0,void 0,e)});function ho(t,e){return t===e||t!=t&&e!=e}var fo=yn(Jt),po=yn(function(t,e){return e<=t}),vo=oe(function(){return arguments}())?oe:function(t){return Ao(t)&&E.call(t,"callee")&&!P.call(t,"callee")},yo=C.isArray,go=ya?Ga(ya):function(t){return Ao(t)&&Zt(t)==vs};function mo(t){return null!=t&&To(t.length)&&!Oo(t)}function _o(t){return Ao(t)&&mo(t)}var bo=q||qi,wo=ga?Ga(ga):function(t){return Ao(t)&&Zt(t)==rs};function Io(t){if(!Ao(t))return!1;var e=Zt(t);return e==os||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Po(t)}function Oo(t){if(!So(t))return!1;var e=Zt(t);return e==is||e==ss||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Eo(t){return"number"==typeof t&&t==Fo(t)}function To(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}function So(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ao(t){return null!=t&&"object"==typeof t}var Co=ma?Ga(ma):function(t){return Ao(t)&&Un(t)==as};function Ro(t){return"number"==typeof t||Ao(t)&&Zt(t)==us}function Po(t){if(!Ao(t)||Zt(t)!=cs)return!1;var e=S(t);if(null===e)return!0;var n=E.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==v}var jo=_a?Ga(_a):function(t){return Ao(t)&&Zt(t)==ls},xo=ba?Ga(ba):function(t){return Ao(t)&&Un(t)==ds};function Mo(t){return"string"==typeof t||!yo(t)&&Ao(t)&&Zt(t)==hs}function ko(t){return"symbol"==typeof t||Ao(t)&&Zt(t)==fs}var No=wa?Ga(wa):function(t){return Ao(t)&&To(t.length)&&!!la[Zt(t)]},zo=yn(le),Do=yn(function(t,e){return t<=e});function Uo(t){if(!t)return[];if(mo(t))return Mo(t)?ou(t):Ze(t);if(M&&t[M])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[M]());var e=Un(t);return(e==as?Ja:e==ds?nu:hi)(t)}function Lo(t){return t?(t=qo(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Fo(t){var e=Lo(t),n=e%1;return e==e?n?e-n:e:0}function Bo(t){return t?kt(Fo(t),0,4294967295):0}function qo(t){if("number"==typeof t)return t;if(ko(t))return NaN;if(So(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=So(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Fs,"");var n=Qs.test(t);return n||Js.test(t)?fa(t.slice(2),n?2:8):Xs.test(t)?NaN:+t}function Vo(t){return Je(t,oi(t))}function Go(t){return null==t?"":xe(t)}var Ho=en(function(t,e){if(Yn(e)||mo(e))Je(e,ri(e),t);else for(var n in e)E.call(e,n)&&Ct(t,n,e[n])}),Wo=en(function(t,e){Je(e,oi(e),t)}),Yo=en(function(t,e,n,r){Je(e,oi(e),t,r)}),Ko=en(function(t,e,n,r){Je(e,ri(e),t,r)}),$o=Sn(Mt),Xo=Ie(function(t,e){t=O(t);var n=-1,r=e.length,o=2<r?e[2]:void 0;for(o&&Vn(e[0],e[1],o)&&(r=1);++n<r;)for(var i=e[n],s=oi(i),a=-1,u=s.length;++a<u;){var c=s[a],l=t[c];(void 0===l||ho(l,d[c])&&!E.call(t,c))&&(t[c]=i[c])}return t}),Qo=Ie(function(t){return t.push(void 0,On),Ia(si,void 0,t)});function Zo(t,e,n){var r=null==t?void 0:Xt(t,e);return void 0===r?n:r}function Jo(t,e){return null!=t&&Ln(t,e,ee)}var ti=dn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),t[e]=n},Si(Ri)),ei=dn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),E.call(t,e)?t[e].push(n):t[e]=[n]},xn),ni=Ie(re);function ri(t){return mo(t)?Tt(t):ce(t)}function oi(t){return mo(t)?Tt(t,!0):function(t){if(!So(t))return function(t){var e=[];if(null!=t)for(var n in O(t))e.push(n);return e}(t);var e=Yn(t),n=[];for(var r in t)("constructor"!=r||!e&&E.call(t,r))&&n.push(r);return n}(t)}var ii=en(function(t,e,n){pe(t,e,n)}),si=en(function(t,e,n,r){pe(t,e,n,r)}),ai=Sn(function(e,t){var n={};if(null==e)return n;var r=!1;t=Ra(t,function(t){return t=qe(t,e),r=r||1<t.length,t}),Je(e,Cn(e),n),r&&(n=Nt(n,7,En));for(var o=t.length;o--;)ke(n,t[o]);return n}),ui=Sn(function(t,e){return null==t?{}:ge(n=t,e,function(t,e){return Jo(n,e)});var n});function ci(t,n){if(null==t)return{};var e=Ra(Cn(t),function(t){return[t]});return n=xn(n),ge(t,e,function(t,e){return n(t,e[0])})}var li=bn(ri),di=bn(oi);function hi(t){return null==t?[]:Ha(t,ri(t))}var fi=sn(function(t,e,n){return e=e.toLowerCase(),t+(n?pi(e):e)});function pi(t){return Ii(Go(t).toLowerCase())}function vi(t){return(t=Go(t))&&t.replace(ea,$a).replace(ia,"")}var yi=sn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),gi=sn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),mi=on("toLowerCase"),_i=sn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),bi=sn(function(t,e,n){return t+(n?" ":"")+Ii(e)}),wi=sn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Ii=on("toUpperCase");function Oi(t,e,n){return t=Go(t),void 0===(e=n?void 0:e)?(r=t,aa.test(r)?t.match(sa)||[]:t.match(Ws)||[]):t.match(e)||[];var r}var Ei=Ie(function(t,e){try{return Ia(t,void 0,e)}catch(t){return Io(t)?t:new o(t)}}),Ti=Sn(function(e,t){return Ea(t,function(t){t=ur(t),xt(e,t,to(e[t],e))}),e});function Si(t){return function(){return t}}var Ai=cn(),Ci=cn(!0);function Ri(t){return t}function Pi(t){return ue("function"==typeof t?t:Nt(t,1))}var ji=Ie(function(e,n){return function(t){return re(t,e,n)}}),xi=Ie(function(e,n){return function(t){return re(e,t,n)}});function Mi(r,e,t){var n=ri(e),o=$t(e,n);null!=t||So(e)&&(o.length||!n.length)||(t=e,e=r,r=this,o=$t(e,ri(e)));var i=!(So(t)&&"chain"in t&&!t.chain),s=Oo(r);return Ea(o,function(t){var n=e[t];r[t]=n,s&&(r.prototype[t]=function(){var t=this.__chain__;if(i||t){var e=r(this.__wrapped__);return(e.__actions__=Ze(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,Pa([this.value()],arguments))})}),r}function ki(){}var Ni=fn(Ra),zi=fn(Ta),Di=fn(Ma);function Ui(t){return Gn(t)?Fa(ur(t)):(e=t,function(t){return Xt(t,e)});var e}var Li=vn(),Fi=vn(!0);function Bi(){return[]}function qi(){return!1}var Vi,Gi=hn(function(t,e){return t+e},0),Hi=mn("ceil"),Wi=hn(function(t,e){return t/e},1),Yi=mn("floor"),Ki=hn(function(t,e){return t*e},1),$i=mn("round"),Xi=hn(function(t,e){return t-e},0);return pt.after=function(t,e){if("function"!=typeof e)throw new R(Qi);return t=Fo(t),function(){if(--t<1)return e.apply(this,arguments)}},pt.ary=Zr,pt.assign=Ho,pt.assignIn=Wo,pt.assignInWith=Yo,pt.assignWith=Ko,pt.at=$o,pt.before=Jr,pt.bind=to,pt.bindAll=Ti,pt.bindKey=eo,pt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return yo(t)?t:[t]},pt.chain=Dr,pt.chunk=function(t,e,n){e=(n?Vn(t,e,n):void 0===e)?1:W(Fo(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,i=0,s=C(L(r/e));o<r;)s[i++]=Se(t,o,o+=e);return s},pt.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},pt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=C(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Pa(yo(n)?Ze(n):[n],Gt(e,1))},pt.cond=function(r){var o=null==r?0:r.length,e=xn();return r=o?Ra(r,function(t){if("function"!=typeof t[1])throw new R(Qi);return[e(t[0]),t[1]]}):[],Ie(function(t){for(var e=-1;++e<o;){var n=r[e];if(Ia(n[0],this,t))return Ia(n[1],this,t)}})},pt.conforms=function(t){return e=Nt(t,1),n=ri(e),function(t){return zt(t,e,n)};var e,n},pt.constant=Si,pt.countBy=Fr,pt.create=function(t,e){var n=vt(t);return null==e?n:jt(n,e)},pt.curry=function t(e,n,r){var o=wn(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=t.placeholder,o},pt.curryRight=function t(e,n,r){var o=wn(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=t.placeholder,o},pt.debounce=no,pt.defaults=Xo,pt.defaultsDeep=Qo,pt.defer=ro,pt.delay=oo,pt.difference=dr,pt.differenceBy=hr,pt.differenceWith=fr,pt.drop=function(t,e,n){var r=null==t?0:t.length;return r?Se(t,(e=n||void 0===e?1:Fo(e))<0?0:e,r):[]},pt.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Se(t,0,(e=r-(e=n||void 0===e?1:Fo(e)))<0?0:e):[]},pt.dropRightWhile=function(t,e){return t&&t.length?ze(t,xn(e,3),!0,!0):[]},pt.dropWhile=function(t,e){return t&&t.length?ze(t,xn(e,3),!0):[]},pt.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Vn(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=Fo(n))<0&&(n=o<-n?0:o+n),(r=void 0===r||o<r?o:Fo(r))<0&&(r+=o),r=r<n?0:Bo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},pt.filter=function(t,e){return(yo(t)?Sa:Vt)(t,xn(e,3))},pt.flatMap=function(t,e){return Gt(Kr(t,e),1)},pt.flatMapDeep=function(t,e){return Gt(Kr(t,e),1/0)},pt.flatMapDepth=function(t,e,n){return n=void 0===n?1:Fo(n),Gt(Kr(t,e),n)},pt.flatten=yr,pt.flattenDeep=function(t){return null!=t&&t.length?Gt(t,1/0):[]},pt.flattenDepth=function(t,e){return null!=t&&t.length?Gt(t,e=void 0===e?1:Fo(e)):[]},pt.flip=function(t){return wn(t,512)},pt.flow=Ai,pt.flowRight=Ci,pt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},pt.functions=function(t){return null==t?[]:$t(t,ri(t))},pt.functionsIn=function(t){return null==t?[]:$t(t,oi(t))},pt.groupBy=Hr,pt.initial=function(t){return null!=t&&t.length?Se(t,0,-1):[]},pt.intersection=mr,pt.intersectionBy=_r,pt.intersectionWith=br,pt.invert=ti,pt.invertBy=ei,pt.invokeMap=Wr,pt.iteratee=Pi,pt.keyBy=Yr,pt.keys=ri,pt.keysIn=oi,pt.map=Kr,pt.mapKeys=function(t,r){var o={};return r=xn(r,3),Yt(t,function(t,e,n){xt(o,r(t,e,n),t)}),o},pt.mapValues=function(t,r){var o={};return r=xn(r,3),Yt(t,function(t,e,n){xt(o,e,r(t,e,n))}),o},pt.matches=function(t){return he(Nt(t,1))},pt.matchesProperty=function(t,e){return fe(t,Nt(e,1))},pt.memoize=io,pt.merge=ii,pt.mergeWith=si,pt.method=ji,pt.methodOf=xi,pt.mixin=Mi,pt.negate=so,pt.nthArg=function(e){return e=Fo(e),Ie(function(t){return ve(t,e)})},pt.omit=ai,pt.omitBy=function(t,e){return ci(t,so(xn(e)))},pt.once=function(t){return Jr(2,t)},pt.orderBy=function(t,e,n,r){return null==t?[]:(yo(e)||(e=null==e?[]:[e]),yo(n=r?void 0:n)||(n=null==n?[]:[n]),ye(t,e,n))},pt.over=Ni,pt.overArgs=ao,pt.overEvery=zi,pt.overSome=Di,pt.partial=uo,pt.partialRight=co,pt.partition=$r,pt.pick=ui,pt.pickBy=ci,pt.property=Ui,pt.propertyOf=function(e){return function(t){return null==e?void 0:Xt(e,t)}},pt.pull=Ir,pt.pullAll=Or,pt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?me(t,e,xn(n,2)):t},pt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?me(t,e,void 0,n):t},pt.pullAt=Er,pt.range=Li,pt.rangeRight=Fi,pt.rearg=lo,pt.reject=function(t,e){return(yo(t)?Sa:Vt)(t,so(xn(e,3)))},pt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=xn(e,3);++r<i;){var s=t[r];e(s,r,t)&&(n.push(s),o.push(r))}return _e(t,o),n},pt.rest=function(t,e){if("function"!=typeof t)throw new R(Qi);return Ie(t,e=void 0===e?e:Fo(e))},pt.reverse=Tr,pt.sampleSize=function(t,e,n){return e=(n?Vn(t,e,n):void 0===e)?1:Fo(e),(yo(t)?function(t,e){return or(Ze(t),kt(e,0,t.length))}:function(t,e){var n=hi(t);return or(n,kt(e,0,n.length))})(t,e)},pt.set=function(t,e,n){return null==t?t:Oe(t,e,n)},pt.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Oe(t,e,n,r)},pt.shuffle=function(t){return(yo(t)?function(t){return or(Ze(t))}:function(t){return or(hi(t))})(t)},pt.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n=n&&"number"!=typeof n&&Vn(t,e,n)?(e=0,r):(e=null==e?0:Fo(e),void 0===n?r:Fo(n)),Se(t,e,n)):[]},pt.sortBy=Xr,pt.sortedUniq=function(t){return t&&t.length?Pe(t):[]},pt.sortedUniqBy=function(t,e){return t&&t.length?Pe(t,xn(e,2)):[]},pt.split=function(t,e,n){return n&&"number"!=typeof n&&Vn(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=Go(t))&&("string"==typeof e||null!=e&&!jo(e))&&!(e=xe(e))&&Za(t)?Ge(ou(t),0,n):t.split(e,n):[]},pt.spread=function(r,o){if("function"!=typeof r)throw new R(Qi);return o=null==o?0:W(Fo(o),0),Ie(function(t){var e=t[o],n=Ge(t,0,o);return e&&Pa(n,e),Ia(r,this,n)})},pt.tail=function(t){var e=null==t?0:t.length;return e?Se(t,1,e):[]},pt.take=function(t,e,n){return t&&t.length?Se(t,0,(e=n||void 0===e?1:Fo(e))<0?0:e):[]},pt.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Se(t,(e=r-(e=n||void 0===e?1:Fo(e)))<0?0:e,r):[]},pt.takeRightWhile=function(t,e){return t&&t.length?ze(t,xn(e,3),!1,!0):[]},pt.takeWhile=function(t,e){return t&&t.length?ze(t,xn(e,3)):[]},pt.tap=function(t,e){return e(t),t},pt.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new R(Qi);return So(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),no(t,e,{leading:r,maxWait:e,trailing:o})},pt.thru=Ur,pt.toArray=Uo,pt.toPairs=li,pt.toPairsIn=di,pt.toPath=function(t){return yo(t)?Ra(t,ur):ko(t)?[t]:Ze(ar(Go(t)))},pt.toPlainObject=Vo,pt.transform=function(t,r,o){var e=yo(t),n=e||bo(t)||No(t);if(r=xn(r,4),null==o){var i=t&&t.constructor;o=n?e?new i:[]:So(t)&&Oo(i)?vt(S(t)):{}}return(n?Ea:Yt)(t,function(t,e,n){return r(o,t,e,n)}),o},pt.unary=function(t){return Zr(t,1)},pt.union=Sr,pt.unionBy=Ar,pt.unionWith=Cr,pt.uniq=function(t){return t&&t.length?Me(t):[]},pt.uniqBy=function(t,e){return t&&t.length?Me(t,xn(e,2)):[]},pt.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Me(t,void 0,e):[]},pt.unset=function(t,e){return null==t||ke(t,e)},pt.unzip=Rr,pt.unzipWith=Pr,pt.update=function(t,e,n){return null==t?t:Ne(t,e,Be(n))},pt.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Ne(t,e,Be(n),r)},pt.values=hi,pt.valuesIn=function(t){return null==t?[]:Ha(t,oi(t))},pt.without=jr,pt.words=Oi,pt.wrap=function(t,e){return uo(Be(e),t)},pt.xor=xr,pt.xorBy=Mr,pt.xorWith=kr,pt.zip=Nr,pt.zipObject=function(t,e){return Le(t||[],e||[],Ct)},pt.zipObjectDeep=function(t,e){return Le(t||[],e||[],Oe)},pt.zipWith=zr,pt.entries=li,pt.entriesIn=di,pt.extend=Wo,pt.extendWith=Yo,Mi(pt,pt),pt.add=Gi,pt.attempt=Ei,pt.camelCase=fi,pt.capitalize=pi,pt.ceil=Hi,pt.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=qo(n))==n?n:0),void 0!==e&&(e=(e=qo(e))==e?e:0),kt(qo(t),e,n)},pt.clone=function(t){return Nt(t,4)},pt.cloneDeep=function(t){return Nt(t,5)},pt.cloneDeepWith=function(t,e){return Nt(t,5,e="function"==typeof e?e:void 0)},pt.cloneWith=function(t,e){return Nt(t,4,e="function"==typeof e?e:void 0)},pt.conformsTo=function(t,e){return null==e||zt(t,e,ri(e))},pt.deburr=vi,pt.defaultTo=function(t,e){return null==t||t!=t?e:t},pt.divide=Wi,pt.endsWith=function(t,e,n){t=Go(t),e=xe(e);var r=t.length,o=n=void 0===n?r:kt(Fo(n),0,r);return 0<=(n-=e.length)&&t.slice(n,o)==e},pt.eq=ho,pt.escape=function(t){return(t=Go(t))&&js.test(t)?t.replace(Rs,Xa):t},pt.escapeRegExp=function(t){return(t=Go(t))&&Ls.test(t)?t.replace(Us,"\\$&"):t},pt.every=function(t,e,n){var r=yo(t)?Ta:Bt;return n&&Vn(t,e,n)&&(e=void 0),r(t,xn(e,3))},pt.find=Br,pt.findIndex=pr,pt.findKey=function(t,e){return ka(t,xn(e,3),Yt)},pt.findLast=qr,pt.findLastIndex=vr,pt.findLastKey=function(t,e){return ka(t,xn(e,3),Kt)},pt.floor=Yi,pt.forEach=Vr,pt.forEachRight=Gr,pt.forIn=function(t,e){return null==t?t:Ht(t,xn(e,3),oi)},pt.forInRight=function(t,e){return null==t?t:Wt(t,xn(e,3),oi)},pt.forOwn=function(t,e){return t&&Yt(t,xn(e,3))},pt.forOwnRight=function(t,e){return t&&Kt(t,xn(e,3))},pt.get=Zo,pt.gt=fo,pt.gte=po,pt.has=function(t,e){return null!=t&&Ln(t,e,te)},pt.hasIn=Jo,pt.head=gr,pt.identity=Ri,pt.includes=function(t,e,n,r){t=mo(t)?t:hi(t),n=n&&!r?Fo(n):0;var o=t.length;return n<0&&(n=W(o+n,0)),Mo(t)?n<=o&&-1<t.indexOf(e,n):!!o&&-1<za(t,e,n)},pt.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Fo(n);return o<0&&(o=W(r+o,0)),za(t,e,o)},pt.inRange=function(t,e,n){return e=Lo(e),void 0===n?(n=e,e=0):n=Lo(n),(r=t=qo(t))>=Y(o=e,i=n)&&r<W(o,i);var r,o,i},pt.invoke=ni,pt.isArguments=vo,pt.isArray=yo,pt.isArrayBuffer=go,pt.isArrayLike=mo,pt.isArrayLikeObject=_o,pt.isBoolean=function(t){return!0===t||!1===t||Ao(t)&&Zt(t)==ns},pt.isBuffer=bo,pt.isDate=wo,pt.isElement=function(t){return Ao(t)&&1===t.nodeType&&!Po(t)},pt.isEmpty=function(t){if(null==t)return!0;if(mo(t)&&(yo(t)||"string"==typeof t||"function"==typeof t.splice||bo(t)||No(t)||vo(t)))return!t.length;var e=Un(t);if(e==as||e==ds)return!t.size;if(Yn(t))return!ce(t).length;for(var n in t)if(E.call(t,n))return!1;return!0},pt.isEqual=function(t,e){return ie(t,e)},pt.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?ie(t,e,void 0,n):!!r},pt.isError=Io,pt.isFinite=function(t){return"number"==typeof t&&V(t)},pt.isFunction=Oo,pt.isInteger=Eo,pt.isLength=To,pt.isMap=Co,pt.isMatch=function(t,e){return t===e||se(t,e,kn(e))},pt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,se(t,e,kn(e),n)},pt.isNaN=function(t){return Ro(t)&&t!=+t},pt.isNative=function(t){if(Wn(t))throw new o("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ae(t)},pt.isNil=function(t){return null==t},pt.isNull=function(t){return null===t},pt.isNumber=Ro,pt.isObject=So,pt.isObjectLike=Ao,pt.isPlainObject=Po,pt.isRegExp=jo,pt.isSafeInteger=function(t){return Eo(t)&&-9007199254740991<=t&&t<=9007199254740991},pt.isSet=xo,pt.isString=Mo,pt.isSymbol=ko,pt.isTypedArray=No,pt.isUndefined=function(t){return void 0===t},pt.isWeakMap=function(t){return Ao(t)&&Un(t)==ps},pt.isWeakSet=function(t){return Ao(t)&&"[object WeakSet]"==Zt(t)},pt.join=function(t,e){return null==t?"":G.call(t,e)},pt.kebabCase=yi,pt.last=wr,pt.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return void 0!==n&&(o=(o=Fo(n))<0?W(r+o,0):Y(o,r-1)),e==e?function(t,e){for(var n=o+1;n--;)if(t[n]===e)return n;return n}(t,e):Na(t,Ua,o,!0)},pt.lowerCase=gi,pt.lowerFirst=mi,pt.lt=zo,pt.lte=Do,pt.max=function(t){return t&&t.length?qt(t,Ri,Jt):void 0},pt.maxBy=function(t,e){return t&&t.length?qt(t,xn(e,2),Jt):void 0},pt.mean=function(t){return La(t,Ri)},pt.meanBy=function(t,e){return La(t,xn(e,2))},pt.min=function(t){return t&&t.length?qt(t,Ri,le):void 0},pt.minBy=function(t,e){return t&&t.length?qt(t,xn(e,2),le):void 0},pt.stubArray=Bi,pt.stubFalse=qi,pt.stubObject=function(){return{}},pt.stubString=function(){return""},pt.stubTrue=function(){return!0},pt.multiply=Ki,pt.nth=function(t,e){return t&&t.length?ve(t,Fo(e)):void 0},pt.noConflict=function(){return pa._===this&&(pa._=m),this},pt.noop=ki,pt.now=Qr,pt.pad=function(t,e,n){t=Go(t);var r=(e=Fo(e))?ru(t):0;if(!e||e<=r)return t;var o=(e-r)/2;return pn(F(o),n)+t+pn(L(o),n)},pt.padEnd=function(t,e,n){t=Go(t);var r=(e=Fo(e))?ru(t):0;return e&&r<e?t+pn(e-r,n):t},pt.padStart=function(t,e,n){t=Go(t);var r=(e=Fo(e))?ru(t):0;return e&&r<e?pn(e-r,n)+t:t},pt.parseInt=function(t,e,n){return e=n||null==e?0:e&&+e,$(Go(t).replace(Bs,""),e||0)},pt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Vn(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Lo(t),void 0===e?(e=t,t=0):e=Lo(e)),e<t){var r=t;t=e,e=r}if(n||t%1||e%1){var o=X();return Y(t+o*(e-t+ha("1e-"+((o+"").length-1))),e)}return be(t,e)},pt.reduce=function(t,e,n){var r=yo(t)?ja:Ba,o=arguments.length<3;return r(t,xn(e,4),n,o,Lt)},pt.reduceRight=function(t,e,n){var r=yo(t)?xa:Ba,o=arguments.length<3;return r(t,xn(e,4),n,o,Ft)},pt.repeat=function(t,e,n){return e=(n?Vn(t,e,n):void 0===e)?1:Fo(e),we(Go(t),e)},pt.replace=function(){var t=arguments,e=Go(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pt.result=function(t,e,n){var r=-1,o=(e=qe(e,t)).length;for(o||(o=1,t=void 0);++r<o;){var i=null==t?void 0:t[ur(e[r])];void 0===i&&(r=o,i=n),t=Oo(i)?i.call(t):i}return t},pt.round=$i,pt.runInContext=t,pt.sample=function(t){return(yo(t)?St:function(t){return St(hi(t))})(t)},pt.size=function(t){if(null==t)return 0;if(mo(t))return Mo(t)?ru(t):t.length;var e=Un(t);return e==as||e==ds?t.size:ce(t).length},pt.snakeCase=_i,pt.some=function(t,e,n){var r=yo(t)?Ma:Ae;return n&&Vn(t,e,n)&&(e=void 0),r(t,xn(e,3))},pt.sortedIndex=function(t,e){return Ce(t,e)},pt.sortedIndexBy=function(t,e,n){return Re(t,e,xn(n,2))},pt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Ce(t,e);if(r<n&&ho(t[r],e))return r}return-1},pt.sortedLastIndex=function(t,e){return Ce(t,e,!0)},pt.sortedLastIndexBy=function(t,e,n){return Re(t,e,xn(n,2),!0)},pt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Ce(t,e,!0)-1;if(ho(t[n],e))return n}return-1},pt.startCase=bi,pt.startsWith=function(t,e,n){return t=Go(t),n=null==n?0:kt(Fo(n),0,t.length),e=xe(e),t.slice(n,n+e.length)==e},pt.subtract=Xi,pt.sum=function(t){return t&&t.length?qa(t,Ri):0},pt.sumBy=function(t,e){return t&&t.length?qa(t,xn(e,2)):0},pt.template=function(s,t,e){var n=pt.templateSettings;e&&Vn(s,t,e)&&(t=void 0),s=Go(s),t=Yo({},t,n,In);var a,u,r=Yo({},t.imports,n.imports,In),o=ri(r),i=Ha(r,o),c=0,l=t.interpolate||na,d="__p += '",h=g((t.escape||na).source+"|"+l.source+"|"+(l===ks?Ks:na).source+"|"+(t.evaluate||na).source+"|$","g"),f="//# sourceURL="+(E.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++ca+"]")+"\n";s.replace(h,function(t,e,n,r,o,i){return n=n||r,d+=s.slice(c,i).replace(ra,Qa),e&&(a=!0,d+="' +\n__e("+e+") +\n'"),o&&(u=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=i+t.length,t}),d+="';\n";var p=E.call(t,"variable")&&t.variable;p||(d="with (obj) {\n"+d+"\n}\n"),d=(u?d.replace(Ts,""):d).replace(Ss,"$1").replace(As,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Ei(function(){return y(o,f+"return "+d).apply(void 0,i)});if(v.source=d,Io(v))throw v;return v},pt.times=function(t,e){if((t=Fo(t))<1||9007199254740991<t)return[];var n=4294967295,r=Y(t,4294967295);t-=4294967295;for(var o=Va(r,e=xn(e));++n<t;)e(n);return o},pt.toFinite=Lo,pt.toInteger=Fo,pt.toLength=Bo,pt.toLower=function(t){return Go(t).toLowerCase()},pt.toNumber=qo,pt.toSafeInteger=function(t){return t?kt(Fo(t),-9007199254740991,9007199254740991):0===t?t:0},pt.toString=Go,pt.toUpper=function(t){return Go(t).toUpperCase()},pt.trim=function(t,e,n){if((t=Go(t))&&(n||void 0===e))return t.replace(Fs,"");if(!t||!(e=xe(e)))return t;var r=ou(t),o=ou(e);return Ge(r,Ya(r,o),Ka(r,o)+1).join("")},pt.trimEnd=function(t,e,n){if((t=Go(t))&&(n||void 0===e))return t.replace(qs,"");if(!t||!(e=xe(e)))return t;var r=ou(t);return Ge(r,0,Ka(r,ou(e))+1).join("")},pt.trimStart=function(t,e,n){if((t=Go(t))&&(n||void 0===e))return t.replace(Bs,"");if(!t||!(e=xe(e)))return t;var r=ou(t);return Ge(r,Ya(r,ou(e))).join("")},pt.truncate=function(t,e){var n=30,r="...";if(So(e)){var o="separator"in e?e.separator:o;n="length"in e?Fo(e.length):n,r="omission"in e?xe(e.omission):r}var i=(t=Go(t)).length;if(Za(t)){var s=ou(t);i=s.length}if(i<=n)return t;var a=n-ru(r);if(a<1)return r;var u=s?Ge(s,0,a).join(""):t.slice(0,a);if(void 0===o)return u+r;if(s&&(a+=u.length-a),jo(o)){if(t.slice(a).search(o)){var c,l=u;for(o.global||(o=g(o.source,Go($s.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var d=c.index;u=u.slice(0,void 0===d?a:d)}}else if(t.indexOf(xe(o),a)!=a){var h=u.lastIndexOf(o);-1<h&&(u=u.slice(0,h))}return u+r},pt.unescape=function(t){return(t=Go(t))&&Ps.test(t)?t.replace(Cs,iu):t},pt.uniqueId=function(t){var e=++h;return Go(t)+e},pt.upperCase=wi,pt.upperFirst=Ii,pt.each=Vr,pt.eachRight=Gr,pt.first=gr,Mi(pt,(Vi={},Yt(pt,function(t,e){E.call(pt.prototype,e)||(Vi[e]=t)}),Vi),{chain:!1}),pt.VERSION="4.17.15",Ea(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pt[t].placeholder=pt}),Ea(["drop","take"],function(n,r){_t.prototype[n]=function(t){t=void 0===t?1:W(Fo(t),0);var e=this.__filtered__&&!r?new _t(this):this.clone();return e.__filtered__?e.__takeCount__=Y(t,e.__takeCount__):e.__views__.push({size:Y(t,4294967295),type:n+(e.__dir__<0?"Right":"")}),e},_t.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Ea(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;_t.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:xn(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ea(["head","last"],function(t,e){var n="take"+(e?"Right":"");_t.prototype[t]=function(){return this[n](1).value()[0]}}),Ea(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_t.prototype[t]=function(){return this.__filtered__?new _t(this):this[n](1)}}),_t.prototype.compact=function(){return this.filter(Ri)},_t.prototype.find=function(t){return this.filter(t).head()},_t.prototype.findLast=function(t){return this.reverse().find(t)},_t.prototype.invokeMap=Ie(function(e,n){return"function"==typeof e?new _t(this):this.map(function(t){return re(t,e,n)})}),_t.prototype.reject=function(t){return this.filter(so(xn(t)))},_t.prototype.slice=function(t,e){t=Fo(t);var n=this;return n.__filtered__&&(0<t||e<0)?new _t(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=Fo(e))<0?n.dropRight(-e):n.take(e-t)),n)},_t.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_t.prototype.toArray=function(){return this.take(4294967295)},Yt(_t.prototype,function(d,t){var h=/^(?:filter|find|map|reject)|While$/.test(t),f=/^(?:head|last)$/.test(t),p=pt[f?"take"+("last"==t?"Right":""):t],v=f||/^find/.test(t);p&&(pt.prototype[t]=function(){function t(t){var e=p.apply(pt,Pa([t],n));return f&&s?e[0]:e}var e=this.__wrapped__,n=f?[1]:arguments,r=e instanceof _t,o=n[0],i=r||yo(e);i&&h&&"function"==typeof o&&1!=o.length&&(r=i=!1);var s=this.__chain__,a=!!this.__actions__.length,u=v&&!s,c=r&&!a;if(v||!i)return u&&c?d.apply(this,n):(l=this.thru(t),u?f?l.value()[0]:l.value():l);e=c?e:new _t(this);var l=d.apply(e,n);return l.__actions__.push({func:Ur,args:[t],thisArg:void 0}),new mt(l,s)})}),Ea(["pop","push","shift","sort","splice","unshift"],function(t){var n=s[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);pt.prototype[t]=function(){var e=arguments;if(!o||this.__chain__)return this[r](function(t){return n.apply(yo(t)?t:[],e)});var t=this.value();return n.apply(yo(t)?t:[],e)}}),Yt(_t.prototype,function(t,e){var n=pt[e];if(n){var r=n.name+"";E.call(it,r)||(it[r]=[]),it[r].push({name:e,func:n})}}),it[ln(void 0,2).name]=[{name:"wrapper",func:void 0}],_t.prototype.clone=function(){var t=new _t(this.__wrapped__);return t.__actions__=Ze(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ze(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ze(this.__views__),t},_t.prototype.reverse=function(){if(this.__filtered__){var t=new _t(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_t.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=yo(t),r=e<0,o=n?t.length:0,i=function(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],s=i.size;switch(i.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Y(e,t+s);break;case"takeRight":t=W(t,e-s)}}return{start:t,end:e}}(0,o,this.__views__),s=i.start,a=i.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,d=l.length,h=0,f=Y(u,this.__takeCount__);if(!n||!r&&o==u&&f==u)return De(t,this.__actions__);var p=[];t:for(;u--&&h<f;){for(var v=-1,y=t[c+=e];++v<d;){var g=l[v],m=g.iteratee,_=g.type,b=m(y);if(2==_)y=b;else if(!b){if(1==_)continue t;break t}}p[h++]=y}return p},pt.prototype.at=Lr,pt.prototype.chain=function(){return Dr(this)},pt.prototype.commit=function(){return new mt(this.value(),this.__chain__)},pt.prototype.next=function(){void 0===this.__values__&&(this.__values__=Uo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},pt.prototype.plant=function(t){for(var e,n=this;n instanceof gt;){var r=lr(n);r.__index__=0,r.__values__=void 0,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},pt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _t){var e=t;return this.__actions__.length&&(e=new _t(this)),(e=e.reverse()).__actions__.push({func:Ur,args:[Tr],thisArg:void 0}),new mt(e,this.__chain__)}return this.thru(Tr)},pt.prototype.toJSON=pt.prototype.valueOf=pt.prototype.value=function(){return De(this.__wrapped__,this.__actions__)},pt.prototype.first=pt.prototype.head,M&&(pt.prototype[M]=function(){return this}),pt}();pa._=su,void 0===(j=function(){return su}.call(x,M,x,P))||(P.exports=j)}).call(this)}).call(this,M(7),M(78)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(403)),d=s(n(412)),o=s(n(439)),i=s(n(446));function s(t){return t&&t.__esModule?t:{default:t}}e.default=v,e.clear=u,e.decorator=c;var h=[],f=[];function p(t){return(0,i.default)(t)}function v(a){var u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];u=(0,o.default)({memoize:!1,serializeArguments:p},u);function t(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.serializeArguments(e),o=c[r];if(o)return o;if(u.memoize&&r in l)return d.default.resolve(l[r]);function i(){return delete c[r]}var s=a.apply(this,e).then(function(t){return u.memoize&&(l[r]=t),i(),t},function(t){throw i(),t});return c[r]=s}var c={},l={};return t.__reusePromise__origFn=a,t.__reusePromise__clear=function(){v.clear(t)},t.__reusePromise__promiseMapsByArgs=c,t.__reusePromise__memoizedValuesByArgs=l,h.push(c),f.push(l),t}function a(e){(0,r.default)(e).forEach(function(t){return delete e[t]})}function u(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];void 0===t?(h.forEach(a),f.forEach(a)):(a(t.__reusePromise__promiseMapsByArgs),a(t.__reusePromise__memoizedValuesByArgs))}function c(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(t,e,n){return n.value=v(n.value,r),n}}v.clear=c.clear=u},function(t,e,n){"use strict";n.d(e,"a",function(){return r.a}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return i}),n.d(e,"h",function(){return s}),n.d(e,"i",function(){return a}),n.d(e,"j",function(){return u}),n.d(e,"k",function(){return c.a}),n.d(e,"l",function(){return l.a}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return f}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return I}),n.d(e,"e",function(){return O}),n.d(e,"d",function(){return E});var r=n(5),o=n(93),i=n(33),s=n(14),a=n(29);function u(t){for(var e=0,n=[],r=0,o=t;r<o.length;r++){var i=o[r],s=i[0],a=i[1];if(n.push("const a"+e+" = a['"+s+"']"),n.push("const b"+e+" = b['"+s+"']"),"asc"===a)n.push("if (a"+e+" === undefined && b"+e+" !== undefined) return -1"),n.push("if (a"+e+" !== undefined && b"+e+" === undefined) return 1"),n.push("if (a"+e+" === null && b"+e+" !== null) return -1"),n.push("if (a"+e+" !== null && b"+e+" === null) return 1"),n.push("if (a"+e+" < b"+e+") return -1"),n.push("if (a"+e+" > b"+e+") return 1");else{if("desc"!==a)throw new Error("unsupported sort ordering for field "+s+": "+a);n.push("if (a"+e+" === undefined && b"+e+" !== undefined) return 1"),n.push("if (a"+e+" !== undefined && b"+e+" === undefined) return -1"),n.push("if (a"+e+" === null && b"+e+" !== null) return 1"),n.push("if (a"+e+" !== null && b"+e+" === null) return -1"),n.push("if (a"+e+" < b"+e+") return 1"),n.push("if (a"+e+" > b"+e+") return -1")}e++}return n.push("return 0"),new Function("a","b",n.join("\n"))}var c=n(94),l=n(95),d=n(6);function h(t,e,n){!(n in t)&&e in t&&(t[n]=t[e],delete t[e])}function f(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],i=o[0],s=o[1];!(s in t)&&i in t&&(t[s]=t[i],delete t[i])}return t}var p=n(100),v=n.n(p),y=Object.prototype.hasOwnProperty,g=Symbol("NOT_PROVIDED"),m=(_.prototype.add=function(t,e){var n=v.a.gt(t,e,this.cmp);-1!==n?t.splice(n,0,e):t.push(e)},_.prototype.indexOf=function(t,e,n){var r=n&&y.call(n,"previousValue")?n.previousValue:g,o=t.length;if(r===g||0===this.cmp(e,r)){if(-1!=(i=-1===(i=v.a.gt(t,e,this.cmp))?o-1:i-1)){for(;0<i&&0===this.cmp(t[i-1],e);)i--;for(;i<o&&0===this.cmp(t[i],e);){if(t[i]===e)return i;i++}}}else for(var i=0;i<o;){if(t[i]===e)return i;i++}return-1},_.prototype.remove=function(t,e,n){var r=this.indexOf(t,e,n);return-1!==r&&(t.splice(r,1),!0)},_.prototype.removeAll=function(t,e,n){var r=n&&y.call(n,"previousValue")?n.previousValue:g,o=this.indexOf(t,e,n),i=!1;if(-1!==o)for(var s=r===g||0===this.cmp(e,r);o<t.length&&(!s||0===this.cmp(t[o],e));)t[o]===e?(t.splice(o,1),i=!0):o++;return i},_.prototype.update=function(t,e,n){var r=n&&y.call(n,"previousValue")?n.previousValue:g,o=r===g||0===this.cmp(e,r),i=this.indexOf(t,e,n);if(-1!==i){if(o)return!1;t.splice(i,1)}return-1!==(i=v.a.gt(t,e,this.cmp))?t.splice(i,0,e):t.push(e),!0},_);function _(t){this.cmp=t}encodeURIComponent;var b=n(92),w={isNotEmpty:function(t,e){return!!e},notEmpty:function(t,e,n){w.isNotEmpty(t,e)||(n=n||"expected "+t+" to be provided",w.raise(t,void 0,n))},isOneOf:function(t,e,n){return n.includes(e)},oneOf:function(t,e,n,r){w.isOneOf(t,e,n)||(r=r||"expected "+e+" to be one of ("+n.join(", ")+")",w.raise(t,void 0,r))},raise:function(t,e,n){throw void 0===e&&(e="invalid"),new b.a(t,e,n)}},I=w;function O(){return E(this)}function E(t){return Array.isArray(t)?t:null!=t?[t]:[]}},function(t,e,n){"use strict";var r=n(2),o=n.n(r),i={camelizeKey:o.a.memoize(o.a.camelCase),underscoreKey:o.a.memoize(o.a.snakeCase),camelizeObject:function(t){return s(t,i.camelizeKey)},underscoreObject:function(t){return s(t,i.underscoreKey)}};function s(t,r){return o.a.isArray(t)?t.map(function(t){return s(t,r)}):o.a.isObject(t)?o.a.transform(t,function(t,e,n){t[r(n)]=s(e,r)},{}):t}e.a=i},function(t,e,n){"use strict";function r(t){return t&&/^\+?([0-9]{7,15})$/.test(t.replace(/[-.● ()]/g,""))}function o(t){var e=t.replace(/\D/g,"");return/^\+?1/.test(t)?e.replace(/^(1)(\d{3})(\d{3})(\d{4})/,"+$1 $2 $3 $4"):("1"===e[0]&&(e=e.slice(1)),e.replace(/^(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"))}function i(t){var e=t.replace(/\D/g,"");return"1"===e[0]&&(e=e.slice(1)),e.replace(/^(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}function s(t){return t.replace(/\D/g,"")}function a(t){var e=t.replace(/\D/g,"");return"1"!==e[0]&&(e="1"+e),"+"+e}n.r(e),n.d(e,"isPhone",function(){return r}),n.d(e,"formatPhone",function(){return o}),n.d(e,"formatPhoneWithDash",function(){return i}),n.d(e,"normalizePhone",function(){return s}),n.d(e,"normalizePhoneUS",function(){return a})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.a={WAITING:-1,CONNECTING:0,OPEN:1,CLOSED:2}},function(t,e,n){var o=n(134);t.exports=function(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}},function(t,e,n){var r=n(35),o=n(18),i=n(160),s=n(32).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||s(e,t,{value:i.f(t)})}},function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,l=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(o,i){return new Promise(function(t,e){function n(){void 0!==r&&o.removeListener("error",r),t([].slice.call(arguments))}var r;"error"!==i&&(r=function(t){o.removeListener(i,n),e(t)},o.once("error",r)),o.once(i,n)})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function d(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var o,i,s,a;if(c(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),0<(o=d(t))&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return o.listener=n,r.wrapFn=o}function f(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):v(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(0<e.length&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)l(a,this,e);else{var u=a.length,c=v(a,u);for(n=0;n<u;++n)l(c[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,h(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,r,o,i,s;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(t,e,n){"use strict";var r=n(547);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){var r=n(15),o=n(51),i=n(106),s=n(153),a=r.Symbol,u=o("wks");t.exports=function(t){return u[t]||(u[t]=s&&a[t]||(s?a:i)("Symbol."+t))}},function(t,e,n){"use strict";n.r(e);var r=n(176),o=n.n(r);n.d(e,"isEmail",function(){return o.a})},function(r,t,e){(function(t){function e(t){return t&&t.Math==Math&&t}var n="object";r.exports=e(typeof globalThis==n&&globalThis)||e(typeof window==n&&window)||e(typeof self==n&&self)||e(typeof t==n&&t)||Function("return this")()}).call(this,e(7))},function(t,e,n){var l=n(15),d=n(102).f,h=n(31),f=n(71),p=n(104),v=n(147),y=n(267);t.exports=function(t,e){var n,r,o,i,s,a=t.target,u=t.global,c=t.stat;if(n=u?l:c?l[a]||p(a,{}):(l[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(s=d(n,r))&&s.value:n[r],!y(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;v(i,o)}(t.sham||o&&o.sham)&&h(i,"sham",!0),f(n,r,i,t)}}},function(t,e,n){var r=n(367),o=n(368),i=o;i.v1=r,i.v4=o,t.exports=i},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(199)("wks"),o=n(200),i=n(20).Symbol,s="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=r},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){(function(Dn){Dn.exports=function(){"use strict";var t,o;function m(){return t.apply(null,arguments)}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function u(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function c(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){for(var n in e)_(e,n)&&(t[n]=e[n]);return _(e,"toString")&&(t.toString=e.toString),_(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,r){return ye(t,e,n,r,!0).utc()}function b(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function v(t){if(null==t._isValid){var e=b(t),n=o.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function y(t){var e=p(NaN);return null!=t?f(b(e),t):b(e).userInvalidated=!0,e}o=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var i=m.momentProperties=[];function g(t,e){var n,r,o;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=b(e)),c(e._locale)||(t._locale=e._locale),0<i.length)for(n=0;n<i.length;n++)c(o=e[r=i[n]])||(t[r]=o);return t}var e=!1;function w(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===e&&(e=!0,m.updateOffset(this),e=!1)}function I(t){return t instanceof w||null!=t&&null!=t._isAMomentObject}function O(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function E(t){var e=+t,n=0;return 0!=e&&isFinite(e)&&(n=O(e)),n}function s(t,e,n){var r,o=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0;for(r=0;r<o;r++)(n&&t[r]!==e[r]||!n&&E(t[r])!==E(e[r]))&&s++;return s+i}function T(t){!1===m.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function n(o,i){var s=!0;return f(function(){if(null!=m.deprecationHandler&&m.deprecationHandler(null,o),s){for(var t,e=[],n=0;n<arguments.length;n++){if(t="","object"==typeof arguments[n]){for(var r in t+="\n["+n+"] ",arguments[0])t+=r+": "+arguments[0][r]+", ";t=t.slice(0,-2)}else t=arguments[n];e.push(t)}T(o+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack),s=!1}return i.apply(this,arguments)},i)}var r,S={};function A(t,e){null!=m.deprecationHandler&&m.deprecationHandler(t,e),S[t]||(T(e),S[t]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function R(t,e){var n,r=f({},t);for(n in e)_(e,n)&&(u(t[n])&&u(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)_(t,n)&&!_(e,n)&&u(t[n])&&(r[n]=f({},r[n]));return r}function P(t){null!=t&&this.set(t)}m.suppressDeprecationWarnings=!1,m.deprecationHandler=null,r=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)_(t,e)&&n.push(e);return n};var j={};function x(t,e){var n=t.toLowerCase();j[n]=j[n+"s"]=j[e]=t}function M(t){return"string"==typeof t?j[t]||j[t.toLowerCase()]:void 0}function k(t){var e,n,r={};for(n in t)_(t,n)&&(e=M(n))&&(r[e]=t[n]);return r}var N={};function z(t,e){N[t]=e}function D(t,e,n){var r=""+Math.abs(t),o=e-r.length;return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}var U=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},B={};function q(t,e,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),t&&(B[t]=o),e&&(B[e[0]]=function(){return D(o.apply(this,arguments),e[1],e[2])}),n&&(B[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function V(t,e){return t.isValid()?(e=G(e,t.localeData()),F[e]=F[e]||function(r){var t,o,e,i=r.match(U);for(t=0,o=i.length;t<o;t++)B[i[t]]?i[t]=B[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(t){var e,n="";for(e=0;e<o;e++)n+=C(i[e])?i[e].call(t,r):i[e];return n}}(e),F[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(L.lastIndex=0;0<=n&&L.test(t);)t=t.replace(L,r),L.lastIndex=0,n-=1;return t}var H=/\d/,W=/\d\d/,Y=/\d{3}/,K=/\d{4}/,$=/[+-]?\d{6}/,X=/\d\d?/,Q=/\d\d\d\d?/,Z=/\d\d\d\d\d\d?/,J=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,nt=/\d+/,rt=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,it=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,at={};function ut(t,n,r){at[t]=C(n)?n:function(t,e){return t&&r?r:n}}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var lt={};function dt(t,n){var e,r=n;for("string"==typeof t&&(t=[t]),l(n)&&(r=function(t,e){e[n]=E(t)}),e=0;e<t.length;e++)lt[t[e]]=r}function ht(t,o){dt(t,function(t,e,n,r){n._w=n._w||{},o(t,n._w,n,r)})}function ft(t){return pt(t)?366:365}function pt(t){return t%4==0&&t%100!=0||t%400==0}q("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),q(0,["YY",2],0,function(){return this.year()%100}),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),x("year","y"),z("year",1),ut("Y",rt),ut("YY",X,W),ut("YYYY",tt,K),ut("YYYYY",et,$),ut("YYYYYY",et,$),dt(["YYYYY","YYYYYY"],0),dt("YYYY",function(t,e){e[0]=2===t.length?m.parseTwoDigitYear(t):E(t)}),dt("YY",function(t,e){e[0]=m.parseTwoDigitYear(t)}),dt("Y",function(t,e){e[0]=parseInt(t,10)}),m.parseTwoDigitYear=function(t){return E(t)+(68<E(t)?1900:2e3)};var vt,yt=gt("FullYear",!0);function gt(e,n){return function(t){return null!=t?(_t(this,e,t),m.updateOffset(this,n),this):mt(this,e)}}function mt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function _t(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&pt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),bt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function bt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1==n?pt(t)?29:28:31-n%7%2}vt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},q("M",["MM",2],"Mo",function(){return this.month()+1}),q("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),q("MMMM",0,0,function(t){return this.localeData().months(this,t)}),x("month","M"),z("month",8),ut("M",X),ut("MM",X,W),ut("MMM",function(t,e){return e.monthsShortRegex(t)}),ut("MMMM",function(t,e){return e.monthsRegex(t)}),dt(["M","MM"],function(t,e){e[1]=E(t)-1}),dt(["MMM","MMMM"],function(t,e,n,r){var o=n._locale.monthsParse(t,r,n._strict);null!=o?e[1]=o:b(n).invalidMonth=t});var wt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,It="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Et(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=E(e);else if(!l(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),bt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Tt(t){return null!=t?(Et(this,t),m.updateOffset(this,!0),this):mt(this,"Month")}var St=st,At=st;function Ct(){function t(t,e){return e.length-t.length}var e,n,r=[],o=[],i=[];for(e=0;e<12;e++)n=p([2e3,e]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(t),o.sort(t),i.sort(t),e=0;e<12;e++)r[e]=ct(r[e]),o[e]=ct(o[e]);for(e=0;e<24;e++)i[e]=ct(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Rt(t){var e;if(t<100&&0<=t){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Pt(t,e,n){var r=7+e-n;return-(7+Rt(t,0,r).getUTCDay()-e)%7+r-1}function jt(t,e,n,r,o){var i,s,a=1+7*(e-1)+(7+n-r)%7+Pt(t,r,o);return s=a<=0?ft(i=t-1)+a:a>ft(t)?(i=t+1,a-ft(t)):(i=t,a),{year:i,dayOfYear:s}}function xt(t,e,n){var r,o,i=Pt(t.year(),e,n),s=Math.floor((t.dayOfYear()-i-1)/7)+1;return s<1?r=s+Mt(o=t.year()-1,e,n):s>Mt(t.year(),e,n)?(r=s-Mt(t.year(),e,n),o=t.year()+1):(o=t.year(),r=s),{week:r,year:o}}function Mt(t,e,n){var r=Pt(t,e,n),o=Pt(t+1,e,n);return(ft(t)-r+o)/7}function kt(t,e){return t.slice(e,7).concat(t.slice(0,e))}q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),x("week","w"),x("isoWeek","W"),z("week",5),z("isoWeek",5),ut("w",X),ut("ww",X,W),ut("W",X),ut("WW",X,W),ht(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=E(t)}),q("d",0,"do","day"),q("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),q("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),q("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),x("day","d"),x("weekday","e"),x("isoWeekday","E"),z("day",11),z("weekday",11),z("isoWeekday",11),ut("d",X),ut("e",X),ut("E",X),ut("dd",function(t,e){return e.weekdaysMinRegex(t)}),ut("ddd",function(t,e){return e.weekdaysShortRegex(t)}),ut("dddd",function(t,e){return e.weekdaysRegex(t)}),ht(["dd","ddd","dddd"],function(t,e,n,r){var o=n._locale.weekdaysParse(t,r,n._strict);null!=o?e.d=o:b(n).invalidWeekday=t}),ht(["d","e","E"],function(t,e,n,r){e[r]=E(t)});var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ut=st,Lt=st,Ft=st;function Bt(){function t(t,e){return e.length-t.length}var e,n,r,o,i,s=[],a=[],u=[],c=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),r=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),i=this.weekdays(n,""),s.push(r),a.push(o),u.push(i),c.push(r),c.push(o),c.push(i);for(s.sort(t),a.sort(t),u.sort(t),c.sort(t),e=0;e<7;e++)a[e]=ct(a[e]),u[e]=ct(u[e]),c[e]=ct(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function qt(){return this.hours()%12||12}function Vt(t,e){q(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Gt(t,e){return e._meridiemParse}q("H",["HH",2],0,"hour"),q("h",["hh",2],0,qt),q("k",["kk",2],0,function(){return this.hours()||24}),q("hmm",0,0,function(){return""+qt.apply(this)+D(this.minutes(),2)}),q("hmmss",0,0,function(){return""+qt.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)}),q("Hmm",0,0,function(){return""+this.hours()+D(this.minutes(),2)}),q("Hmmss",0,0,function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)}),Vt("a",!0),Vt("A",!1),x("hour","h"),z("hour",13),ut("a",Gt),ut("A",Gt),ut("H",X),ut("h",X),ut("k",X),ut("HH",X,W),ut("hh",X,W),ut("kk",X,W),ut("hmm",Q),ut("hmmss",Z),ut("Hmm",Q),ut("Hmmss",Z),dt(["H","HH"],3),dt(["k","kk"],function(t,e,n){var r=E(t);e[3]=24===r?0:r}),dt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),dt(["h","hh"],function(t,e,n){e[3]=E(t),b(n).bigHour=!0}),dt("hmm",function(t,e,n){var r=t.length-2;e[3]=E(t.substr(0,r)),e[4]=E(t.substr(r)),b(n).bigHour=!0}),dt("hmmss",function(t,e,n){var r=t.length-4,o=t.length-2;e[3]=E(t.substr(0,r)),e[4]=E(t.substr(r,2)),e[5]=E(t.substr(o)),b(n).bigHour=!0}),dt("Hmm",function(t,e,n){var r=t.length-2;e[3]=E(t.substr(0,r)),e[4]=E(t.substr(r))}),dt("Hmmss",function(t,e,n){var r=t.length-4,o=t.length-2;e[3]=E(t.substr(0,r)),e[4]=E(t.substr(r,2)),e[5]=E(t.substr(o))});var Ht,Wt=gt("Hours",!0),Yt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:It,monthsShort:Ot,week:{dow:0,doy:6},weekdays:Nt,weekdaysMin:Dt,weekdaysShort:zt,meridiemParse:/[ap]\.?m?\.?/i},Kt={},$t={};function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){var e=null;if(!Kt[t]&&void 0!==Dn&&Dn&&Dn.exports)try{e=Ht._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),Zt(e)}catch(t){}return Kt[t]}function Zt(t,e){var n;return t&&((n=c(e)?te(t):Jt(t,e))?Ht=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ht._abbr}function Jt(t,e){if(null===e)return delete Kt[t],null;var n,r=Yt;if(e.abbr=t,null!=Kt[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Kt[t]._config;else if(null!=e.parentLocale)if(null!=Kt[e.parentLocale])r=Kt[e.parentLocale]._config;else{if(null==(n=Qt(e.parentLocale)))return $t[e.parentLocale]||($t[e.parentLocale]=[]),$t[e.parentLocale].push({name:t,config:e}),null;r=n._config}return Kt[t]=new P(R(r,e)),$t[t]&&$t[t].forEach(function(t){Jt(t.name,t.config)}),Zt(t),Kt[t]}function te(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ht;if(!a(t)){if(e=Qt(t))return e;t=[t]}return function(t){for(var e,n,r,o,i=0;i<t.length;){for(e=(o=Xt(t[i]).split("-")).length,n=(n=Xt(t[i+1]))?n.split("-"):null;0<e;){if(r=Qt(o.slice(0,e).join("-")))return r;if(n&&n.length>=e&&s(o,n,!0)>=e-1)break;e--}i++}return Ht}(t)}function ee(t){var e,n=t._a;return n&&-2===b(t).overflow&&(e=n[1]<0||11<n[1]?1:n[2]<1||n[2]>bt(n[0],n[1])?2:n[3]<0||24<n[3]||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||59<n[4]?4:n[5]<0||59<n[5]?5:n[6]<0||999<n[6]?6:-1,b(t)._overflowDayOfYear&&(e<0||2<e)&&(e=2),b(t)._overflowWeeks&&-1===e&&(e=7),b(t)._overflowWeekday&&-1===e&&(e=8),b(t).overflow=e),t}function ne(t,e,n){return null!=t?t:null!=e?e:n}function re(t){var e,n,r,o,i,s,a,u=[];if(!t._d){for(s=t,a=void 0,a=new Date(m.now()),r=s._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()],t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,o,i,s,a,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)i=1,s=4,n=ne(e.GG,t._a[0],xt(ge(),1,4).year),r=ne(e.W,1),((o=ne(e.E,1))<1||7<o)&&(u=!0);else{i=t._locale._week.dow,s=t._locale._week.doy;var c=xt(ge(),i,s);n=ne(e.gg,t._a[0],c.year),r=ne(e.w,c.week),null!=e.d?((o=e.d)<0||6<o)&&(u=!0):null!=e.e?(o=e.e+i,(e.e<0||6<e.e)&&(u=!0)):o=i}r<1||r>Mt(n,i,s)?b(t)._overflowWeeks=!0:null!=u?b(t)._overflowWeekday=!0:(a=jt(n,r,o,i,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(i=ne(t._a[0],r[0]),(t._dayOfYear>ft(i)||0===t._dayOfYear)&&(b(t)._overflowDayOfYear=!0),n=Rt(i,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=u[e]=r[e];for(;e<7;e++)t._a[e]=u[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Rt:function(t,e,n,r,o,i,s){var a;return t<100&&0<=t?(a=new Date(t+400,e,n,r,o,i,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,o,i,s),a}).apply(null,u),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(b(t).weekdayMismatch=!0)}}var oe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ie=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,se=/Z|[+-]\d\d(?::?\d\d)?/,ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ue=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ce=/^\/?Date\((\-?\d+)/i;function le(t){var e,n,r,o,i,s,a=t._i,u=oe.exec(a)||ie.exec(a);if(u){for(b(t).iso=!0,e=0,n=ae.length;e<n;e++)if(ae[e][1].exec(u[1])){o=ae[e][0],r=!1!==ae[e][2];break}if(null==o)return void(t._isValid=!1);if(u[3]){for(e=0,n=ue.length;e<n;e++)if(ue[e][1].exec(u[3])){i=(u[2]||" ")+ue[e][0];break}if(null==i)return void(t._isValid=!1)}if(!r&&null!=i)return void(t._isValid=!1);if(u[4]){if(!se.exec(u[4]))return void(t._isValid=!1);s="Z"}t._f=o+(i||"")+(s||""),pe(t)}else t._isValid=!1}var de=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var he={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fe(t){var e,n,r,o,i,s,a,u,c,l,d=de.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(d){var h=(e=d[4],n=d[3],r=d[2],o=d[5],i=d[6],s=d[7],a=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(e),Ot.indexOf(n),parseInt(r,10),parseInt(o,10),parseInt(i,10)],s&&a.push(parseInt(s,10)),a);if(u=d[1],c=h,l=t,u&&zt.indexOf(u)!==new Date(c[0],c[1],c[2]).getDay()&&(b(l).weekdayMismatch=!0,!(l._isValid=!1)))return;t._a=h,t._tzm=function(t,e,n){if(t)return he[t];if(e)return 0;var r=parseInt(n,10),o=r%100;return(r-o)/100*60+o}(d[8],d[9],d[10]),t._d=Rt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),b(t).rfc2822=!0}else t._isValid=!1}function pe(t){if(t._f!==m.ISO_8601)if(t._f!==m.RFC_2822){t._a=[],b(t).empty=!0;var e,n,r,o,i,s=""+t._i,a=s.length,u=0;for(r=G(t._f,t._locale).match(U)||[],e=0;e<r.length;e++)o=r[e],(n=(s.match((g=t,_(at,y=o)?at[y](g._strict,g._locale):new RegExp(ct(y.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,o){return e||n||r||o})))))||[])[0])&&(0<(i=s.substr(0,s.indexOf(n))).length&&b(t).unusedInput.push(i),s=s.slice(s.indexOf(n)+n.length),u+=n.length),B[o]?(n?b(t).empty=!1:b(t).unusedTokens.push(o),f=o,v=t,null!=(p=n)&&_(lt,f)&&lt[f](p,v._a,v,f)):t._strict&&!n&&b(t).unusedTokens.push(o);b(t).charsLeftOver=a-u,0<s.length&&b(t).unusedInput.push(s),t._a[3]<=12&&!0===b(t).bigHour&&0<t._a[3]&&(b(t).bigHour=void 0),b(t).parsedDateParts=t._a.slice(0),b(t).meridiem=t._meridiem,t._a[3]=(c=t._locale,l=t._a[3],null==(d=t._meridiem)?l:null!=c.meridiemHour?c.meridiemHour(l,d):(null!=c.isPM&&((h=c.isPM(d))&&l<12&&(l+=12),h||12!==l||(l=0)),l)),re(t),ee(t)}else fe(t);else le(t);var c,l,d,h,f,p,v,y,g}function ve(t){var e,n,r,o,i=t._i,s=t._f;return t._locale=t._locale||te(t._l),null===i||void 0===s&&""===i?y({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),I(i)?new w(ee(i)):(d(i)?t._d=i:a(s)?function(t){var e,n,r,o,i;if(0===t._f.length)return b(t).invalidFormat=!0,t._d=new Date(NaN);for(o=0;o<t._f.length;o++)i=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],pe(e),v(e)&&(i+=b(e).charsLeftOver,i+=10*b(e).unusedTokens.length,b(e).score=i,(null==r||i<r)&&(r=i,n=e));f(t,n||e)}(t):s?pe(t):c(o=(e=t)._i)?e._d=new Date(m.now()):d(o)?e._d=new Date(o.valueOf()):"string"==typeof o?(n=e,null===(r=ce.exec(n._i))?(le(n),!1===n._isValid&&(delete n._isValid,fe(n),!1===n._isValid&&(delete n._isValid,m.createFromInputFallback(n)))):n._d=new Date(+r[1])):a(o)?(e._a=h(o.slice(0),function(t){return parseInt(t,10)}),re(e)):u(o)?function(t){if(!t._d){var e=k(t._i);t._a=h([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),re(t)}}(e):l(o)?e._d=new Date(o):m.createFromInputFallback(e),v(t)||(t._d=null),t))}function ye(t,e,n,r,o){var i,s={};return!0!==n&&!1!==n||(r=n,n=void 0),(u(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||a(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=t,s._f=e,s._strict=r,(i=new w(ee(ve(s))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function ge(t,e,n,r){return ye(t,e,n,r,!1)}m.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),m.ISO_8601=function(){},m.RFC_2822=function(){};var me=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:y()}),_e=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:y()});function be(t,e){var n,r;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return ge();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var we=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ie(t){var e=k(t),n=e.year||0,r=e.quarter||0,o=e.month||0,i=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===vt.call(we,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<we.length;++r)if(t[we[r]]){if(n)return!1;parseFloat(t[we[r]])!==E(t[we[r]])&&(n=!0)}return!0}(e),this._milliseconds=+l+1e3*c+6e4*u+1e3*a*60*60,this._days=+s+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=te(),this._bubble()}function Oe(t){return t instanceof Ie}function Ee(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Te(t,n){q(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+D(~~(t/60),2)+n+D(~~t%60,2)})}Te("Z",":"),Te("ZZ",""),ut("Z",it),ut("ZZ",it),dt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ae(it,t)});var Se=/([\+\-]|\d\d)/gi;function Ae(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Se)||["-",0,0],o=60*r[1]+E(r[2]);return 0===o?0:"+"===r[0]?o:-o}function Ce(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(I(t)||d(t)?t.valueOf():ge(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),m.updateOffset(n,!1),n):ge(t).local()}function Re(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Pe(){return!!this.isValid()&&this._isUTC&&0===this._offset}m.updateOffset=function(){};var je=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,xe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Me(t,e){var n,r,o,i,s,a,u=t,c=null;return Oe(t)?u={ms:t._milliseconds,d:t._days,M:t._months}:l(t)?(u={},e?u[e]=t:u.milliseconds=t):(c=je.exec(t))?(n="-"===c[1]?-1:1,u={y:0,d:E(c[2])*n,h:E(c[3])*n,m:E(c[4])*n,s:E(c[5])*n,ms:E(Ee(1e3*c[6]))*n}):(c=xe.exec(t))?(n="-"===c[1]?-1:1,u={y:ke(c[2],n),M:ke(c[3],n),w:ke(c[4],n),d:ke(c[5],n),h:ke(c[6],n),m:ke(c[7],n),s:ke(c[8],n)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(i=ge(u.from),s=ge(u.to),o=i.isValid()&&s.isValid()?(s=Ce(s,i),i.isBefore(s)?a=Ne(i,s):((a=Ne(s,i)).milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0},(u={}).ms=o.milliseconds,u.M=o.months),r=new Ie(u),Oe(t)&&_(t,"_locale")&&(r._locale=t._locale),r}function ke(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ne(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function ze(r,o){return function(t,e){var n;return null===e||isNaN(+e)||(A(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=e,e=n),De(this,Me(t="string"==typeof t?+t:t,e),r),this}}function De(t,e,n,r){var o=e._milliseconds,i=Ee(e._days),s=Ee(e._months);t.isValid()&&(r=null==r||r,s&&Et(t,mt(t,"Month")+s*n),i&&_t(t,"Date",mt(t,"Date")+i*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&m.updateOffset(t,i||s))}Me.fn=Ie.prototype,Me.invalid=function(){return Me(NaN)};var Ue=ze(1,"add"),Le=ze(-1,"subtract");function Fe(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(1+n,"months")-r)))||0}function Be(t){var e;return void 0===t?this._locale._abbr:(null!=(e=te(t))&&(this._locale=e),this)}m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",m.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var qe=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Ve(){return this._locale}function Ge(t,e){return(t%e+e)%e}function He(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function We(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function Ye(t,e){q(0,[t,t.length],0,e)}function Ke(t,e,n,r,o){var i;return null==t?xt(this,r,o).year:(e>(i=Mt(t,r,o))&&(e=i),function(t,e,n,r,o){var i=jt(t,e,n,r,o),s=Rt(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e,n,r,o))}q(0,["gg",2],0,function(){return this.weekYear()%100}),q(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ye("gggg","weekYear"),Ye("ggggg","weekYear"),Ye("GGGG","isoWeekYear"),Ye("GGGGG","isoWeekYear"),x("weekYear","gg"),x("isoWeekYear","GG"),z("weekYear",1),z("isoWeekYear",1),ut("G",rt),ut("g",rt),ut("GG",X,W),ut("gg",X,W),ut("GGGG",tt,K),ut("gggg",tt,K),ut("GGGGG",et,$),ut("ggggg",et,$),ht(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=E(t)}),ht(["gg","GG"],function(t,e,n,r){e[r]=m.parseTwoDigitYear(t)}),q("Q",0,"Qo","quarter"),x("quarter","Q"),z("quarter",7),ut("Q",H),dt("Q",function(t,e){e[1]=3*(E(t)-1)}),q("D",["DD",2],"Do","date"),x("date","D"),z("date",9),ut("D",X),ut("DD",X,W),ut("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),dt(["D","DD"],2),dt("Do",function(t,e){e[2]=E(t.match(X)[0])});var $e=gt("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear"),x("dayOfYear","DDD"),z("dayOfYear",4),ut("DDD",J),ut("DDDD",Y),dt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=E(t)}),q("m",["mm",2],0,"minute"),x("minute","m"),z("minute",14),ut("m",X),ut("mm",X,W),dt(["m","mm"],4);var Xe=gt("Minutes",!1);q("s",["ss",2],0,"second"),x("second","s"),z("second",15),ut("s",X),ut("ss",X,W),dt(["s","ss"],5);var Qe,Ze=gt("Seconds",!1);for(q("S",0,0,function(){return~~(this.millisecond()/100)}),q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,function(){return 10*this.millisecond()}),q(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),q(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),q(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),q(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),q(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),x("millisecond","ms"),z("millisecond",16),ut("S",J,H),ut("SS",J,W),ut("SSS",J,Y),Qe="SSSS";Qe.length<=9;Qe+="S")ut(Qe,nt);function Je(t,e){e[6]=E(1e3*("0."+t))}for(Qe="S";Qe.length<=9;Qe+="S")dt(Qe,Je);var tn=gt("Milliseconds",!1);q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var en=w.prototype;function nn(t){return t}en.add=Ue,en.calendar=function(t,e){var n=t||ge(),r=Ce(n,this).startOf("day"),o=m.calendarFormat(this,r)||"sameElse",i=e&&(C(e[o])?e[o].call(this,n):e[o]);return this.format(i||this.localeData().calendar(o,this,ge(n)))},en.clone=function(){return new w(this)},en.diff=function(t,e,n){var r,o,i;if(!this.isValid())return NaN;if(!(r=Ce(t,this)).isValid())return NaN;switch(o=6e4*(r.utcOffset()-this.utcOffset()),e=M(e)){case"year":i=Fe(this,r)/12;break;case"month":i=Fe(this,r);break;case"quarter":i=Fe(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-o)/864e5;break;case"week":i=(this-r-o)/6048e5;break;default:i=this-r}return n?i:O(i)},en.endOf=function(t){var e;if(void 0===(t=M(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?We:He;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-Ge(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-Ge(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-Ge(e,1e3)-1}return this._d.setTime(e),m.updateOffset(this,!0),this},en.format=function(t){t=t||(this.isUtc()?m.defaultFormatUtc:m.defaultFormat);var e=V(this,t);return this.localeData().postformat(e)},en.from=function(t,e){return this.isValid()&&(I(t)&&t.isValid()||ge(t).isValid())?Me({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},en.fromNow=function(t){return this.from(ge(),t)},en.to=function(t,e){return this.isValid()&&(I(t)&&t.isValid()||ge(t).isValid())?Me({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},en.toNow=function(t){return this.to(ge(),t)},en.get=function(t){return C(this[t=M(t)])?this[t]():this},en.invalidAt=function(){return b(this).overflow},en.isAfter=function(t,e){var n=I(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=M(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},en.isBefore=function(t,e){var n=I(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=M(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},en.isBetween=function(t,e,n,r){var o=I(t)?t:ge(t),i=I(e)?e:ge(e);return!!(this.isValid()&&o.isValid()&&i.isValid())&&("("===(r=r||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===r[1]?this.isBefore(i,n):!this.isAfter(i,n))},en.isSame=function(t,e){var n,r=I(t)?t:ge(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=M(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},en.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},en.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},en.isValid=function(){return v(this)},en.lang=qe,en.locale=Be,en.localeData=Ve,en.max=_e,en.min=me,en.parsingFlags=function(){return f({},b(this))},en.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:N[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=k(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(C(this[t=M(t)]))return this[t](e);return this},en.startOf=function(t){var e;if(void 0===(t=M(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?We:He;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ge(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=Ge(e,6e4);break;case"second":e=this._d.valueOf(),e-=Ge(e,1e3)}return this._d.setTime(e),m.updateOffset(this,!0),this},en.subtract=Le,en.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},en.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},en.toDate=function(){return new Date(this.valueOf())},en.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||9999<n.year()?V(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(n,"Z")):V(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},en.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+o)},en.toJSON=function(){return this.isValid()?this.toISOString():null},en.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},en.unix=function(){return Math.floor(this.valueOf()/1e3)},en.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},en.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},en.year=yt,en.isLeapYear=function(){return pt(this.year())},en.weekYear=function(t){return Ke.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},en.isoWeekYear=function(t){return Ke.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},en.quarter=en.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},en.month=Tt,en.daysInMonth=function(){return bt(this.year(),this.month())},en.week=en.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},en.isoWeek=en.isoWeeks=function(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},en.weeksInYear=function(){var t=this.localeData()._week;return Mt(this.year(),t.dow,t.doy)},en.isoWeeksInYear=function(){return Mt(this.year(),1,4)},en.date=$e,en.day=en.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-r,"d")):r},en.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},en.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,n,r=(e=t,n=this.localeData(),"string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?r:r-7)},en.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},en.hour=en.hours=Wt,en.minute=en.minutes=Xe,en.second=en.seconds=Ze,en.millisecond=en.milliseconds=tn,en.utcOffset=function(t,e,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:Re(this);if("string"==typeof t){if(null===(t=Ae(it,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=Re(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!e||this._changeInProgress?De(this,Me(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,m.updateOffset(this,!0),this._changeInProgress=null)),this},en.utc=function(t){return this.utcOffset(0,t)},en.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Re(this),"m")),this},en.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ae(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},en.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ge(t).utcOffset():0,(this.utcOffset()-t)%60==0)},en.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},en.isLocal=function(){return!!this.isValid()&&!this._isUTC},en.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},en.isUtc=Pe,en.isUTC=Pe,en.zoneAbbr=function(){return this._isUTC?"UTC":""},en.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},en.dates=n("dates accessor is deprecated. Use date instead.",$e),en.months=n("months accessor is deprecated. Use month instead",Tt),en.years=n("years accessor is deprecated. Use year instead",yt),en.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),en.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=ve(t))._a){var e=t._isUTC?p(t._a):ge(t._a);this._isDSTShifted=this.isValid()&&0<s(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var rn=P.prototype;function on(t,e,n,r){var o=te(),i=p().set(r,e);return o[n](i,t)}function sn(t,e,n){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return on(t,e,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=on(t,r,n,"month");return o}function an(t,e,n,r){e=("boolean"==typeof t||(n=e=t,t=!1),l(e)&&(n=e,e=void 0),e||"");var o,i=te(),s=t?i._week.dow:0;if(null!=n)return on(e,(n+s)%7,r,"day");var a=[];for(o=0;o<7;o++)a[o]=on(e,(o+s)%7,r,"day");return a}rn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return C(r)?r.call(e,n):r},rn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},rn.invalidDate=function(){return this._invalidDate},rn.ordinal=function(t){return this._ordinal.replace("%d",t)},rn.preparse=nn,rn.postformat=nn,rn.relativeTime=function(t,e,n,r){var o=this._relativeTime[n];return C(o)?o(t,e,n,r):o.replace(/%d/i,t)},rn.pastFuture=function(t,e){var n=this._relativeTime[0<t?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)},rn.set=function(t){var e,n;for(n in t)C(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},rn.months=function(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||wt).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months.standalone},rn.monthsShort=function(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[wt.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},rn.monthsParse=function(t,e,n){var r,o,i;if(this._monthsParseExact)return function(t,e,n){var r,o,i,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(o=vt.call(this._shortMonthsParse,s))?o:null:-1!==(o=vt.call(this._longMonthsParse,s))?o:null:"MMM"===e?-1!==(o=vt.call(this._shortMonthsParse,s))||-1!==(o=vt.call(this._longMonthsParse,s))?o:null:-1!==(o=vt.call(this._longMonthsParse,s))||-1!==(o=vt.call(this._shortMonthsParse,s))?o:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},rn.monthsRegex=function(t){return this._monthsParseExact?(_(this,"_monthsRegex")||Ct.call(this),t?this._monthsStrictRegex:this._monthsRegex):(_(this,"_monthsRegex")||(this._monthsRegex=At),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},rn.monthsShortRegex=function(t){return this._monthsParseExact?(_(this,"_monthsRegex")||Ct.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(_(this,"_monthsShortRegex")||(this._monthsShortRegex=St),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},rn.week=function(t){return xt(t,this._week.dow,this._week.doy).week},rn.firstDayOfYear=function(){return this._week.doy},rn.firstDayOfWeek=function(){return this._week.dow},rn.weekdays=function(t,e){var n=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?kt(n,this._week.dow):t?n[t.day()]:n},rn.weekdaysMin=function(t){return!0===t?kt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},rn.weekdaysShort=function(t){return!0===t?kt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},rn.weekdaysParse=function(t,e,n){var r,o,i;if(this._weekdaysParseExact)return function(t,e,n){var r,o,i,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(o=vt.call(this._weekdaysParse,s))?o:null:"ddd"===e?-1!==(o=vt.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=vt.call(this._minWeekdaysParse,s))?o:null:"dddd"===e?-1!==(o=vt.call(this._weekdaysParse,s))||-1!==(o=vt.call(this._shortWeekdaysParse,s))||-1!==(o=vt.call(this._minWeekdaysParse,s))?o:null:"ddd"===e?-1!==(o=vt.call(this._shortWeekdaysParse,s))||-1!==(o=vt.call(this._weekdaysParse,s))||-1!==(o=vt.call(this._minWeekdaysParse,s))?o:null:-1!==(o=vt.call(this._minWeekdaysParse,s))||-1!==(o=vt.call(this._weekdaysParse,s))||-1!==(o=vt.call(this._shortWeekdaysParse,s))?o:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},rn.weekdaysRegex=function(t){return this._weekdaysParseExact?(_(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(_(this,"_weekdaysRegex")||(this._weekdaysRegex=Ut),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},rn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(_(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(_(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Lt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},rn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(_(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(_(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},rn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},rn.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},Zt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===E(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),m.lang=n("moment.lang is deprecated. Use moment.locale instead.",Zt),m.langData=n("moment.langData is deprecated. Use moment.localeData instead.",te);var un=Math.abs;function cn(t,e,n,r){var o=Me(e,n);return t._milliseconds+=r*o._milliseconds,t._days+=r*o._days,t._months+=r*o._months,t._bubble()}function ln(t){return t<0?Math.floor(t):Math.ceil(t)}function dn(t){return 4800*t/146097}function hn(t){return 146097*t/4800}function fn(t){return function(){return this.as(t)}}var pn=fn("ms"),vn=fn("s"),yn=fn("m"),gn=fn("h"),mn=fn("d"),_n=fn("w"),bn=fn("M"),wn=fn("Q"),In=fn("y");function On(t){return function(){return this.isValid()?this._data[t]:NaN}}var En=On("milliseconds"),Tn=On("seconds"),Sn=On("minutes"),An=On("hours"),Cn=On("days"),Rn=On("months"),Pn=On("years"),jn=Math.round,xn={ss:44,s:45,m:45,h:22,d:26,M:11};var Mn=Math.abs;function kn(t){return(0<t)-(t<0)||+t}function Nn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Mn(this._milliseconds)/1e3,r=Mn(this._days),o=Mn(this._months);e=O((t=O(n/60))/60),n%=60,t%=60;var i=O(o/12),s=o%=12,a=r,u=e,c=t,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=kn(this._months)!==kn(d)?"-":"",p=kn(this._days)!==kn(d)?"-":"",v=kn(this._milliseconds)!==kn(d)?"-":"";return h+"P"+(i?f+i+"Y":"")+(s?f+s+"M":"")+(a?p+a+"D":"")+(u||c||l?"T":"")+(u?v+u+"H":"")+(c?v+c+"M":"")+(l?v+l+"S":"")}var zn=Ie.prototype;return zn.isValid=function(){return this._isValid},zn.abs=function(){var t=this._data;return this._milliseconds=un(this._milliseconds),this._days=un(this._days),this._months=un(this._months),t.milliseconds=un(t.milliseconds),t.seconds=un(t.seconds),t.minutes=un(t.minutes),t.hours=un(t.hours),t.months=un(t.months),t.years=un(t.years),this},zn.add=function(t,e){return cn(this,t,e,1)},zn.subtract=function(t,e){return cn(this,t,e,-1)},zn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=M(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+dn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(hn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},zn.asMilliseconds=pn,zn.asSeconds=vn,zn.asMinutes=yn,zn.asHours=gn,zn.asDays=mn,zn.asWeeks=_n,zn.asMonths=bn,zn.asQuarters=wn,zn.asYears=In,zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12):NaN},zn._bubble=function(){var t,e,n,r,o,i=this._milliseconds,s=this._days,a=this._months,u=this._data;return 0<=i&&0<=s&&0<=a||i<=0&&s<=0&&a<=0||(i+=864e5*ln(hn(a)+s),a=s=0),u.milliseconds=i%1e3,t=O(i/1e3),u.seconds=t%60,e=O(t/60),u.minutes=e%60,n=O(e/60),u.hours=n%24,a+=o=O(dn(s+=O(n/24))),s-=ln(hn(o)),r=O(a/12),a%=12,u.days=s,u.months=a,u.years=r,this},zn.clone=function(){return Me(this)},zn.get=function(t){return t=M(t),this.isValid()?this[t+"s"]():NaN},zn.milliseconds=En,zn.seconds=Tn,zn.minutes=Sn,zn.hours=An,zn.days=Cn,zn.weeks=function(){return O(this.days()/7)},zn.months=Rn,zn.years=Pn,zn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,n,r,o,i,s,a,u,c,l,d,h=this.localeData(),f=(n=!t,r=h,o=Me(e=this).abs(),i=jn(o.as("s")),s=jn(o.as("m")),a=jn(o.as("h")),u=jn(o.as("d")),c=jn(o.as("M")),l=jn(o.as("y")),(d=i<=xn.ss&&["s",i]||i<xn.s&&["ss",i]||s<=1&&["m"]||s<xn.m&&["mm",s]||a<=1&&["h"]||a<xn.h&&["hh",a]||u<=1&&["d"]||u<xn.d&&["dd",u]||c<=1&&["M"]||c<xn.M&&["MM",c]||l<=1&&["y"]||["yy",l])[2]=n,d[3]=0<+e,d[4]=r,function(t,e,n,r,o){return o.relativeTime(e||1,!!n,t,r)}.apply(null,d));return t&&(f=h.pastFuture(+this,f)),h.postformat(f)},zn.toISOString=Nn,zn.toString=Nn,zn.toJSON=Nn,zn.locale=Be,zn.localeData=Ve,zn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nn),zn.lang=qe,q("X",0,0,"unix"),q("x",0,0,"valueOf"),ut("x",rt),ut("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),dt("x",function(t,e,n){n._d=new Date(E(t))}),m.version="2.24.0",t=ge,m.fn=en,m.min=function(){return be("isBefore",[].slice.call(arguments,0))},m.max=function(){return be("isAfter",[].slice.call(arguments,0))},m.now=function(){return Date.now?Date.now():+new Date},m.utc=p,m.unix=function(t){return ge(1e3*t)},m.months=function(t,e){return sn(t,e,"months")},m.isDate=d,m.locale=Zt,m.invalid=y,m.duration=Me,m.isMoment=I,m.weekdays=function(t,e,n){return an(t,e,n,"weekdays")},m.parseZone=function(){return ge.apply(null,arguments).parseZone()},m.localeData=te,m.isDuration=Oe,m.monthsShort=function(t,e){return sn(t,e,"monthsShort")},m.weekdaysMin=function(t,e,n){return an(t,e,n,"weekdaysMin")},m.defineLocale=Jt,m.updateLocale=function(t,e){if(null!=e){var n,r,o=Yt;null!=(r=Qt(t))&&(o=r._config),(n=new P(e=R(o,e))).parentLocale=Kt[t],Kt[t]=n,Zt(t)}else null!=Kt[t]&&(null!=Kt[t].parentLocale?Kt[t]=Kt[t].parentLocale:null!=Kt[t]&&delete Kt[t]);return Kt[t]},m.locales=function(){return r(Kt)},m.weekdaysShort=function(t,e,n){return an(t,e,n,"weekdaysShort")},m.normalizeUnits=M,m.relativeTimeRounding=function(t){return void 0===t?jn:"function"==typeof t&&(jn=t,!0)},m.relativeTimeThreshold=function(t,e){return void 0!==xn[t]&&(void 0===e?xn[t]:(xn[t]=e,"s"===t&&(xn.ss=e-1),!0))},m.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},m.prototype=en,m.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},m}()}).call(this,n(78)(t))},function(t,e,n){var r=n(22);t.exports=!r(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";function r(t){return o(function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||57344<=r?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t))}function o(t){for(var e=new Uint8Array(t),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(e[r]);return n}function i(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),o=0;o<n;o++){var i=e.charCodeAt(o);r[o]=i}return r}n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},function(t,e,u){"use strict";u.r(e),u.d(e,"downloadFile",function(){return r}),u.d(e,"loadLocalFilePathWithFileReader",function(){return h}),u.d(e,"saveByteArray",function(){return f});var c=u(28),l=u(0),n=function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})},d=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};function r(t){var i=t.attachmentContentType,s=t.blob,a=t.fileName;return n(this,void 0,void 0,function(){var e,n,r,o;return d(this,function(t){switch(t.label){case 0:return(e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&navigator.userAgent.match("chrome")?[4,h(s)]:[3,2];case 1:return n=t.sent(),r=Object(c.b)(n),f(a,r,i),[3,3];case 2:e?(o=window.URL.createObjectURL(s),window.open(o,"_blank")):(0,u(527).saveAs)(s,a),t.label=3;case 3:return[3,5];case 4:l.TargetNotSupportedError.raise(),t.label=5;case 5:return[2]}})})}function h(r){return new Promise(function(t,e){var n=new FileReader;n.addEventListener("load",function(){t(n.result)},!1),n.addEventListener("error",function(t){e(t)},!1),n.readAsDataURL(r)})}function f(t,e,n){var r=new FileReader,o=new Blob([e],{type:n});r.fileName=t,r.onload=function(t){window.open(r.result,"_blank")},r.readAsDataURL(o)}},function(t,e,n){"use strict";var r=n(539);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){var r=n(26),o=n(32),i=n(50);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(26),o=n(144),i=n(34),s=n(70),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(i(t),e=s(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function r(t){if(!t)return t;var e=t.split("T")[0];if(e.includes("-")){var n=e.split("-"),r=n[0];return[n[1],n[2],r].join("/")}if(e.includes("/")){var o=e.split("/");return[o[0],o[1],r=o[2]].join("/")}return t}function o(t){if(!t||!parseInt(t))return"";var e=parseInt(t),n=Math.floor(e/86400),r=e%86400,o=new Date(0);o.setSeconds(r);var i=o.toISOString().substr(11,8).split(":").map(function(t){return parseInt(t)}),s=i[0],a=i[1],u=i[2]+" sec";return(a||s||n)&&(u=a+" min "+u),(s||n)&&(u=s+24*n+" hr "+u),u}n.r(e),n.d(e,"formatDob",function(){return r}),n.d(e,"secondsToDurationFormat",function(){return o})},function(t,e,n){var r=n(23);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){t.exports=n(15)},function(t,N,e){"use strict";(function(t){var a=e(347),i=e(348),s=e(164);function n(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=d.prototype:(null===t&&(t=new d(e)),t.length=e),t}function d(t,e,n){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(t,e,n);if("number"!=typeof t)return r(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return o(this,t)}function r(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),d.TYPED_ARRAY_SUPPORT?(t=e).__proto__=d.prototype:t=l(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!d.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),o=(t=u(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(d.isBuffer(e)){var n=0|h(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):l(t,e);if("Buffer"===e.type&&s(e.data))return l(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function o(t,e){if(c(e),t=u(t,e<0?0:0|h(e)),!d.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|h(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function f(t,e){if(d.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return x(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return M(t).length;default:if(r)return x(t).length;e=(""+e).toLowerCase(),r=!0}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=d.from(e,r)),d.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,d.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var l=-1;for(i=n;i<a;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(a<n+u&&(n=a-u),i=n;0<=i;i--){for(var d=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){d=!1;break}if(d)return i}return-1}function g(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function m(t,e,n,r){return k(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,u,c=t[o],l=null,d=239<c?4:223<c?3:191<c?2:1;if(o+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,d=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function b(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function I(t,e,n){var r,o=t.length;(!e||e<0)&&(e=0),(!n||n<0||o<n)&&(n=o);for(var i="",s=e;s<n;++s)i+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return i}function O(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function E(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,o,i){if(!d.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function S(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function A(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function C(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,o){return o||C(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,o){return o||C(t,0,n,8),i.write(t,e,n,r,52,8),n+8}N.Buffer=d,N.SlowBuffer=function(t){return+t!=t&&(t=0),d.alloc(+t)},N.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),N.kMaxLength=n(),d.poolSize=8192,d._augment=function(t){return t.__proto__=d.prototype,t},d.from=function(t,e,n){return r(null,t,e,n)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(t,e,n){return o=e,i=n,c(r=t),r<=0?u(null,r):void 0!==o?"string"==typeof i?u(null,r).fill(o,i):u(null,r).fill(o):u(null,r);var r,o,i},d.allocUnsafe=function(t){return o(null,t)},d.allocUnsafeSlow=function(t){return o(null,t)},d.isBuffer=function(t){return!(null==t||!t._isBuffer)},d.compare=function(t,e){if(!d.isBuffer(t)||!d.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=d.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var i=t[n];if(!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},d.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?_(this,0,t):function(t,e,n){var r,o,i,s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return b(this,e,n);case"latin1":case"binary":return w(this,e,n);case"base64":return r=this,i=n,0===(o=e)&&i===r.length?a.fromByteArray(r):a.fromByteArray(r.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},d.prototype.equals=function(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===d.compare(this,t)},d.prototype.inspect=function(){var t="",e=N.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},d.prototype.compare=function(t,e,n,r,o){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=e)return 0;if(o<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=t.slice(e,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},d.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},d.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},d.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},d.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o,i,s,a,u,c,l,d,h,f=this.length-e;if((void 0===n||f<n)&&(n=f),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var p=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return d=e,h=n,k(x(t,(l=this).length-d),l,d,h);case"ascii":return m(this,t,e,n);case"latin1":case"binary":return m(this,t,e,n);case"base64":return a=this,u=e,c=n,k(M(t),a,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=e,s=n,k(function(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(t,(o=this).length-i),o,i,s);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),d.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=d.prototype;else{var o=e-t;n=new d(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},d.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},d.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var r=this[t+--e],o=1;0<e&&(o*=256);)r+=this[t+--e]*o;return r},d.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},d.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},d.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var r=e,o=1,i=this[t+--r];0<r&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},d.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),i.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),i.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),i.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),i.read(this,t,!1,52,8)},d.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},d.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+n},d.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},d.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},d.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},d.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):A(this,t,e,!0),e+4},d.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},d.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);T(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},d.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);T(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;0<=--i&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},d.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},d.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},d.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):A(this,t,e,!0),e+4},d.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},d.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},d.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},d.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},d.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},d.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;0<=o;--o)t[o+e]=this[o+n];else if(i<1e3||!d.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},d.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(i=e;i<n;++i)this[i]=t;else{var s=d.isBuffer(t)?t:x(new d(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function x(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(e-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function M(t){return a.toByteArray(function(t){if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(j,"")).length<2)return"";for(var e;t.length%4!=0;)t+="=";return t}(t))}function k(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,e(7))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){var r=n(59);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r=n(530);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,p,v){"use strict";(function(t){v.d(p,"b",function(){return a}),v.d(p,"a",function(){return d});function e(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function i(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var n=v(99),r=t.navigator&&t.navigator.userAgent,o=!!r&&r.includes("Trident/"),s=!!r&&/\/([0-9]|1[0-2])[.\d]* Mobile\/[0-9A-F]* Safari/.test(r),a=!(o||s||!t.fetch||!t.Headers||!t.Response||!t.AbortController),u=Object(n.c)()?n.a:n.b,c=t.fetch,l=(f.prototype.get=function(t){return this._headers.get(t)},f),d=(h.prototype.fetch=function(){return e(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return this.isAborted?[2]:[4,c((n=this).url,{headers:this.headers,credentials:this.withCredentials?"include":"same-origin",signal:this.controller.signal,cache:"no-store"})];case 1:return(e=n.response=t.sent()).body.on?(this._emitStart(),[4,this._streamBody()]):[3,3];case 2:return t.sent(),[3,6];case 3:return"getReader"in e.body?(this._emitStart(),[4,this._readBody()]):[3,5];case 4:return t.sent(),[3,6];case 5:throw new Error("Cannot read from response.body, lacks 'getReader' or 'on' property");case 6:return[2]}})})},h.prototype._emitStart=function(){var t=this.response,e=t.headers,n=t.status,r=t.statusText;this.onStart({contentType:e.get("Content-Type"),headers:new l(e),status:n,statusText:r})},h.prototype._streamBody=function(){return e(this,void 0,void 0,function(){var o=this;return i(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,e){function n(){r||(r=!0,t())}var r=!1;o._stream=o.response.body.on("data",function(t){var e=t.toString("utf8");o.onProgress(e)}).on("close",n).on("end",n).on("error",function(t){return e(t)})})];case 1:return t.sent(),[2]}})})},h.prototype._readBody=function(){return e(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:this._reader=this.response.body.getReader(),e=!1,t.label=1;case 1:return e||this.isAborted?[3,3]:[4,this._reader.read()];case 2:return(n=t.sent()).done?e=!0:(r=this.textDecoder.decode(n.value,{stream:!0}),this.onProgress(r)),[3,1];case 3:return[2]}})})},h.prototype.abort=function(){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(this.isAborted)return[2];if(this.isAborted=!0,!this._reader)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._reader.cancel()];case 2:case 3:return t.sent(),[3,4];case 4:this._reader=null,t.label=5;case 5:return this._stream&&(this._stream.destroy(),this._stream=null),this.controller.abort(),[2]}})})},h);function h(t){var e=t.headers,n=t.onProgress,r=t.onStart,o=t.url,i=t.withCredentials;this.controller=new AbortController,this.headers=new Headers(e),this.isAborted=!1,this.onProgress=n,this.onStart=r,this.response=null,this.textDecoder=new u,this.url=o,this.withCredentials=i,this._reader=null,this._stream=null}function f(t){this._headers=t}}).call(this,v(7))},function(t,e,n){var r=n(103),o=n(43);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(108),o=Math.min;t.exports=function(t){return 0<t?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(43);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(77),o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=d;var i=n(54);i.inherits=n(38);var s=n(168),a=n(171);i.inherits(d,s);for(var u=o(a.prototype),c=0;c<u.length;c++){var l=u[c];d.prototype[l]||(d.prototype[l]=a.prototype[l])}function d(t){if(!(this instanceof d))return new d(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var v=n(20),y=n(24),g=n(83),m=n(48),_=function(t,e,n){var r,o,i,s=t&_.F,a=t&_.G,u=t&_.S,c=t&_.P,l=t&_.B,d=t&_.W,h=a?y:y[e]||(y[e]={}),f=h.prototype,p=a?v:u?v[e]:(v[e]||{}).prototype;for(r in a&&(n=e),n)(o=!s&&p&&void 0!==p[r])&&r in h||(i=o?p[r]:n[r],h[r]=a&&"function"!=typeof p[r]?n[r]:l&&o?g(i,v):d&&p[r]==i?function(r){function t(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)}return t.prototype=r.prototype,t}(i):c&&"function"==typeof i?g(Function.call,i):i,c&&((h.virtual||(h.virtual={}))[r]=i,t&_.R&&f&&!f[r]&&m(f,r,i)))};_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128,t.exports=_},function(t,e,n){var r=n(85),o=n(202);t.exports=n(60)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,a],l=0;(u=new Error(e.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(15),o=n(104),i=n(72),s=r["__core-js_shared__"]||o("__core-js_shared__",{});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:i?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(15),o=n(111),i=Function.call;t.exports=function(t,e,n){return o(i,r[t].prototype[e],n)}},function(t,e,n){var r=n(32).f,o=n(18),i=n(13)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,n,e){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,e(36).Buffer)},function(t,e,n){var r=n(370),o=n(381),i=n(195),s=n(19),a=n(392);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?s(t)?o(t[0],t[1]):r(t):a(t)}},function(t,e,n){var r=n(187)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(86)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var c=n(231),l=n(232);t.exports=function(t,e,n,r){var o=!n;n=n||{};for(var i=-1,s=e.length;++i<s;){var a=e[i],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),o?l(n,a,u):c(n,a,u)}return n}},function(t,e,n){(function(e){!function(){"use strict";t.exports=function(t){return(t instanceof e?t:new e(t.toString(),"binary")).toString("base64")}}()}).call(this,n(36).Buffer)},function(d,t,e){(function(t){function m(){return r.Date.now()}var o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,e="object"==typeof t&&t&&t.Object===Object&&t,n="object"==typeof self&&self&&self.Object===Object&&self,r=e||n||Function("return this")(),c=Object.prototype.toString,_=Math.max,b=Math.min;function l(r,n,t){var o,i,s,a,u,c,l=0,d=!1,h=!1,e=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function f(t){var e=o,n=i;return o=i=void 0,l=t,a=r.apply(n,e)}function p(t){var e=t-c;return void 0===c||n<=e||e<0||h&&s<=t-l}function v(){var t,e=m();if(p(e))return y(e);u=setTimeout(v,(t=n-(e-c),h?b(t,s-(e-l)):t))}function y(t){return u=void 0,e&&o?f(t):(o=i=void 0,a)}function g(){var t=m(),e=p(t);if(o=arguments,i=this,c=t,e){if(void 0===u)return function(t){return l=t,u=setTimeout(v,n),d?f(t):a}(c);if(h)return u=setTimeout(v,n),f(c)}return void 0===u&&(u=setTimeout(v,n)),a}return n=I(n)||0,w(t)&&(d=!!t.leading,s=(h="maxWait"in t)?_(I(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),g.cancel=function(){void 0!==u&&clearTimeout(u),o=c=i=u=void(l=0)},g.flush=function(){return void 0===u?a:y(m())},g}function w(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function I(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&"[object Symbol]"==c.call(e))return NaN;var e;if(w(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=w(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var r=s.test(t);return r||a.test(t)?u(t.slice(2),r?2:8):i.test(t)?NaN:+t}d.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return w(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),l(t,e,{leading:r,maxWait:e,trailing:o})}}).call(this,e(7))},function(t,e,n){"use strict";var p=n(560);t.exports=function(t,e,n,r){var o=n?n.call(r,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=p(t),s=p(e),a=i.length;if(a!==s.length)return!1;r=r||null;for(var u=Object.prototype.hasOwnProperty.bind(e),c=0;c<a;c++){var l=i[c];if(!u(l))return!1;var d=t[l],h=e[l],f=n?n.call(r,d,h,l):void 0;if(!1===f||void 0===f&&d!==h)return!1}return!0}},function(t,e,n){"use strict";var r=n(564);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o=n(23);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var a=n(15),r=n(51),u=n(31),c=n(18),l=n(104),o=n(146),i=n(105),s=i.get,d=i.enforce,h=String(o).split("toString");r("inspectSource",function(t){return o.call(t)}),(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||u(n,"name",e),d(n).source=h.join("string"==typeof e?e:"")),t!==a?(o?!s&&t[e]&&(i=!0):delete t[e],i?t[e]=n:u(t,e,n)):i?t[e]=n:l(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&s(this).source||o.call(this)})},function(t,e){t.exports=!1},function(t,e,n){var r=n(51),o=n(106),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(149),o=n(109);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports={}},function(t,e,n){"use strict";(function(a){!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,r)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return a.nextTick(function(){t.apply(null,o)})}}}:t.exports=a}).call(this,n(37))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(181);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(19),o=n(121),i=n(384),s=n(388);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(84);t.exports=function(r,o,t){if(i(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(39),o=n(410),i=n(411),s=Object.defineProperty;e.f=n(60)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(27),o=n(135),i=n(465),s=n(469);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e,n){var r=n(227);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(137)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(541),o=n(544)(r);t.exports=o},function(t,e,n){"use strict";var r,o,i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=(o=Error,i(a,o),a.CODE="validation",a);function a(t,e,n){void 0===e&&(e="invalid"),void 0===n&&(n=t+" is "+e);var r=o.call(this,n)||this;return r.code=a.CODE,r.name=t,r.reason=e,r}e.a=s},function(t,e,n){"use strict";n.r(e),n.d(e,"allContentTypes",function(){return l}),n.d(e,"allExtensions",function(){return d}),n.d(e,"getMimeEntryByContentType",function(){return h}),n.d(e,"getMimeEntryByExtension",function(){return f});for(var r={},o={},i=0,s=[{ext:"csv",mime:"text/csv"},{ext:"csv",mime:"text/plain"},{ext:"doc",mime:"application/msword"},{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:"gif",mime:"image/gif"},{ext:"gz",mime:"application/gzip"},{ext:"gz",mime:"application/x-gzip"},{ext:"gz",mime:"application/x-compressed"},{ext:"jpg",mime:"image/jpeg"},{ext:"jpeg",mime:"image/jpeg"},{ext:"m4a",mime:"audio/m4a"},{ext:"m4a",mime:"audio/x-m4a"},{ext:"m4a",mime:"audio/mp4"},{ext:"m4v",mime:"video/x-m4v"},{ext:"mov",mime:"video/quicktime"},{ext:"mp3",mime:"audio/mpeg"},{ext:"mp3",mime:"audio/mp3"},{ext:"mp3",mime:"audio/mpeg3"},{ext:"mp3",mime:"audio/x-mpeg"},{ext:"mp3",mime:"audio/x-mpeg-3"},{ext:"mp3",mime:"video/mpeg"},{ext:"mp3",mime:"video/x-mpeg"},{ext:"mp4",mime:"video/mp4"},{ext:"pdf",mime:"application/pdf"},{ext:"png",mime:"image/png"},{ext:"ppsx",mime:"application/vnd.openxmlformats-officedocument.presentationml.slideshow"},{ext:"ppt",mime:"application/vnd.ms-powerpoint"},{ext:"ppt",mime:"application/ms-powerpoint"},{ext:"ppt",mime:"application/mspowerpoint"},{ext:"ppt",mime:"application/powerpoint"},{ext:"ppt",mime:"application/x-mspowerpoint"},{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:"svg",mime:"image/svg+xml"},{ext:"txt",mime:"text/plain"},{ext:"wav",mime:"audio/wav"},{ext:"wav",mime:"audio/wave"},{ext:"wav",mime:"audio/x-pn-wav"},{ext:"wav",mime:"audio/x-wav"},{ext:"xls",mime:"application/vnd.ms-excel"},{ext:"xls",mime:"application/excel"},{ext:"xls",mime:"application/x-excel"},{ext:"xls",mime:"application/x-msexcel"},{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:"zip",mime:"application/zip"}];i<s.length;i++){var a=s[i],u=a.ext,c=a.mime;r[c]||(r[c]=[]),r[c].push(a),o[u]||(o[u]=[]),o[u].push(a)}var l=Object.keys(r),d=Object.keys(o);function h(t){return r[t]}function f(t){return t&&"."===t[0]&&(t=t.slice(1)),o[t]}},function(t,e,n){"use strict";e.a=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return n&&n.configurable}},function(t,e,n){"use strict";e.a=function(t){return void 0!==t?JSON.parse(JSON.stringify(t)):null}},function(t,e,n){"use strict";var r=n(369);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(r,o,i){(function(t){var e,n;function l(t){var e,n,r,o="",i=-1;if(t&&t.length)for(r=t.length;(i+=1)<r;)e=t.charCodeAt(i),n=i+1<r?t.charCodeAt(i+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),i+=1),e<=127?o+=String.fromCharCode(e):e<=2047?o+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o}function C(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function R(t,e){return t<<e|t>>>32-e}function s(t,e){for(var n,r=e?"0123456789ABCDEF":"0123456789abcdef",o="",i=0,s=t.length;i<s;i+=1)n=t.charCodeAt(i),o+=r.charAt(n>>>4&15)+r.charAt(15&n);return o}function c(t){var e,n=32*t.length,r="";for(e=0;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return r}function v(t){var e,n=32*t.length,r="";for(e=0;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function y(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;e<o;e+=1)r[e]=0;for(e=0;e<n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function d(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;e<o;e+=1)r[e]=0;for(e=0;e<n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return r}function g(t,e){var n,r,o,i,s,a,u,c,l=e.length,d=Array();for(i=(a=Array(Math.ceil(t.length/2))).length,n=0;n<i;n+=1)a[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;0<a.length;){for(s=Array(),n=o=0;n<a.length;n+=1)o=(o<<16)+a[n],o-=(r=Math.floor(o/l))*l,(0<s.length||0<r)&&(s[s.length]=r);d[d.length]=o,a=s}for(u="",n=d.length-1;0<=n;n--)u+=e.charAt(d[n]);for(c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=u.length;n<c;n+=1)u=e[0]+u;return u}function m(t,e){var n,r,o,i="",s=t.length;for(e=e||"=",n=0;n<s;n+=3)for(o=t.charCodeAt(n)<<16|(n+1<s?t.charCodeAt(n+1)<<8:0)|(n+2<s?t.charCodeAt(n+2):0),r=0;r<4;r+=1)8*n+6*r>8*t.length?i+=e:i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63);return i}n={VERSION:"1.0.6",Base64:function(){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="=",f=!0;this.encode=function(t){var e,n,r,o="",i=t.length;for(h=h||"=",t=f?l(t):t,e=0;e<i;e+=3)for(r=t.charCodeAt(e)<<16|(e+1<i?t.charCodeAt(e+1)<<8:0)|(e+2<i?t.charCodeAt(e+2):0),n=0;n<4;n+=1)o+=8*i<8*e+6*n?h:d.charAt(r>>>6*(3-n)&63);return o},this.decode=function(t){var e,n,r,o,i,s,a,u,c="",l=[];if(!t)return t;for(e=u=0,t=t.replace(new RegExp("\\"+h,"gi"),"");n=(a=d.indexOf(t.charAt(e+=1))<<18|d.indexOf(t.charAt(e+=1))<<12|(i=d.indexOf(t.charAt(e+=1)))<<6|(s=d.indexOf(t.charAt(e+=1))))>>16&255,r=a>>8&255,o=255&a,l[u+=1]=64===i?String.fromCharCode(n):64===s?String.fromCharCode(n,r):String.fromCharCode(n,r,o),e<t.length;);return c=l.join(""),f?function(t){var e,n,r,o,i,s,a=[];if(e=n=r=o=i=0,t&&t.length)for(s=t.length,t+="";e<s;)n+=1,(r=t.charCodeAt(e))<128?(a[n]=String.fromCharCode(r),e+=1):191<r&&r<224?(o=t.charCodeAt(e+1),a[n]=String.fromCharCode((31&r)<<6|63&o),e+=2):(o=t.charCodeAt(e+1),i=t.charCodeAt(e+2),a[n]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),e+=3);return a.join("")}(c):c},this.setPad=function(t){return h=t||h,this},this.setTab=function(t){return d=t||d,this},this.setUTF8=function(t){return"boolean"==typeof t&&(f=t),this}},CRC32:function(t){var e,n,r,o=0,i=0;for(t=l(t),e=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o^=-1,n=0,r=t.length;n<r;n+=1)i=255&(o^t.charCodeAt(n)),o=o>>>8^"0x"+e.substr(9*i,8);return(-1^o)>>>0},MD5:function(t){var n=!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase,r=t&&"string"==typeof t.pad?t.pad:"=",a=!t||"boolean"!=typeof t.utf8||t.utf8;function o(t){return v(u(y(t=a?l(t):t),8*t.length))}function i(t,e){var n,r,o,i,s;for(t=a?l(t):t,e=a?l(e):e,16<(n=y(t)).length&&(n=u(n,8*t.length)),r=Array(16),o=Array(16),s=0;s<16;s+=1)r[s]=909522486^n[s],o[s]=1549556828^n[s];return i=u(r.concat(y(e)),512+8*e.length),v(u(o.concat(i),640))}function u(t,e){var n,r,o,i,s,a=1732584193,u=-271733879,c=-1732584194,l=271733878;for(t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e,n=0;n<t.length;n+=16)a=p(a=f(a=f(a=f(a=f(a=h(a=h(a=h(a=h(a=d(a=d(a=d(a=d(r=a,o=u,i=c,s=l,t[n+0],7,-680876936),u=d(u,c=d(c,l=d(l,a,u,c,t[n+1],12,-389564586),a,u,t[n+2],17,606105819),l,a,t[n+3],22,-1044525330),c,l,t[n+4],7,-176418897),u=d(u,c=d(c,l=d(l,a,u,c,t[n+5],12,1200080426),a,u,t[n+6],17,-1473231341),l,a,t[n+7],22,-45705983),c,l,t[n+8],7,1770035416),u=d(u,c=d(c,l=d(l,a,u,c,t[n+9],12,-1958414417),a,u,t[n+10],17,-42063),l,a,t[n+11],22,-1990404162),c,l,t[n+12],7,1804603682),u=d(u,c=d(c,l=d(l,a,u,c,t[n+13],12,-40341101),a,u,t[n+14],17,-1502002290),l,a,t[n+15],22,1236535329),c,l,t[n+1],5,-165796510),u=h(u,c=h(c,l=h(l,a,u,c,t[n+6],9,-1069501632),a,u,t[n+11],14,643717713),l,a,t[n+0],20,-373897302),c,l,t[n+5],5,-701558691),u=h(u,c=h(c,l=h(l,a,u,c,t[n+10],9,38016083),a,u,t[n+15],14,-660478335),l,a,t[n+4],20,-405537848),c,l,t[n+9],5,568446438),u=h(u,c=h(c,l=h(l,a,u,c,t[n+14],9,-1019803690),a,u,t[n+3],14,-187363961),l,a,t[n+8],20,1163531501),c,l,t[n+13],5,-1444681467),u=h(u,c=h(c,l=h(l,a,u,c,t[n+2],9,-51403784),a,u,t[n+7],14,1735328473),l,a,t[n+12],20,-1926607734),c,l,t[n+5],4,-378558),u=f(u,c=f(c,l=f(l,a,u,c,t[n+8],11,-2022574463),a,u,t[n+11],16,1839030562),l,a,t[n+14],23,-35309556),c,l,t[n+1],4,-1530992060),u=f(u,c=f(c,l=f(l,a,u,c,t[n+4],11,1272893353),a,u,t[n+7],16,-155497632),l,a,t[n+10],23,-1094730640),c,l,t[n+13],4,681279174),u=f(u,c=f(c,l=f(l,a,u,c,t[n+0],11,-358537222),a,u,t[n+3],16,-722521979),l,a,t[n+6],23,76029189),c,l,t[n+9],4,-640364487),u=f(u,c=f(c,l=f(l,a,u,c,t[n+12],11,-421815835),a,u,t[n+15],16,530742520),l,a,t[n+2],23,-995338651),c,l,t[n+0],6,-198630844),u=p(u=p(u=p(u=p(u,c=p(c,l=p(l,a,u,c,t[n+7],10,1126891415),a,u,t[n+14],15,-1416354905),l,a,t[n+5],21,-57434055),c=p(c,l=p(l,a=p(a,u,c,l,t[n+12],6,1700485571),u,c,t[n+3],10,-1894986606),a,u,t[n+10],15,-1051523),l,a,t[n+1],21,-2054922799),c=p(c,l=p(l,a=p(a,u,c,l,t[n+8],6,1873313359),u,c,t[n+15],10,-30611744),a,u,t[n+6],15,-1560198380),l,a,t[n+13],21,1309151649),c=p(c,l=p(l,a=p(a,u,c,l,t[n+4],6,-145523070),u,c,t[n+11],10,-1120210379),a,u,t[n+2],15,718787259),l,a,t[n+9],21,-343485551),a=C(a,r),u=C(u,o),c=C(c,i),l=C(l,s);return Array(a,u,c,l)}function c(t,e,n,r,o,i){return C(R(C(C(e,t),C(r,i)),o),n)}function d(t,e,n,r,o,i,s){return c(e&n|~e&r,t,e,o,i,s)}function h(t,e,n,r,o,i,s){return c(e&r|n&~r,t,e,o,i,s)}function f(t,e,n,r,o,i,s){return c(e^n^r,t,e,o,i,s)}function p(t,e,n,r,o,i,s){return c(n^(e|~r),t,e,o,i,s)}this.hex=function(t){return s(o(t),n)},this.b64=function(t){return m(o(t),r)},this.any=function(t,e){return g(o(t),e)},this.raw=function(t){return o(t)},this.hex_hmac=function(t,e){return s(i(t,e),n)},this.b64_hmac=function(t,e){return m(i(t,e),r)},this.any_hmac=function(t,e,n){return g(i(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(n=t),this},this.setPad=function(t){return r=t||r,this},this.setUTF8=function(t){return"boolean"==typeof t&&(a=t),this}},SHA1:function(t){var e=!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase,n=t&&"string"==typeof t.pad?t.pad:"=",a=!t||"boolean"!=typeof t.utf8||t.utf8;function r(t){return c(u(d(t=a?l(t):t),8*t.length))}function o(t,e){var n,r,o,i,s;for(t=a?l(t):t,e=a?l(e):e,16<(n=d(t)).length&&(n=u(n,8*t.length)),r=Array(16),o=Array(16),i=0;i<16;i+=1)r[i]=909522486^n[i],o[i]=1549556828^n[i];return s=u(r.concat(d(e)),512+8*e.length),c(u(o.concat(s),672))}function u(t,e){var n,r,o,i,s,a,u,c,l,d,h,f,p,v=Array(80),y=1732584193,g=-271733879,m=-1732584194,_=271733878,b=-1009589776;for(t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e,n=0;n<t.length;n+=16){for(i=y,s=g,a=m,u=_,c=b,r=0;r<80;r+=1)v[r]=r<16?t[n+r]:R(v[r-3]^v[r-8]^v[r-14]^v[r-16],1),o=C(C(R(y,5),(h=g,f=m,p=_,(d=r)<20?h&f|~h&p:d<40?h^f^p:d<60?h&f|h&p|f&p:h^f^p)),C(C(b,v[r]),(l=r)<20?1518500249:l<40?1859775393:l<60?-1894007588:-899497514)),b=_,_=m,m=R(g,30),g=y,y=o;y=C(y,i),g=C(g,s),m=C(m,a),_=C(_,u),b=C(b,c)}return Array(y,g,m,_,b)}this.hex=function(t){return s(r(t),e)},this.b64=function(t){return m(r(t),n)},this.any=function(t,e){return g(r(t),e)},this.raw=function(t){return r(t)},this.hex_hmac=function(t,e){return s(o(t,e))},this.b64_hmac=function(t,e){return m(o(t,e),n)},this.any_hmac=function(t,e,n){return g(o(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(e=t),this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(a=t),this}},SHA256:function(t){t&&"boolean"==typeof t.uppercase&&t.uppercase;var E,n=t&&"string"==typeof t.pad?t.pad:"=",a=!t||"boolean"!=typeof t.utf8||t.utf8;function r(t,e){return c(u(d(t=e?l(t):t),8*t.length))}function o(t,e){t=a?l(t):t,e=a?l(e):e;var n,r=0,o=d(t),i=Array(16),s=Array(16);for(16<o.length&&(o=u(o,8*t.length));r<16;r+=1)i[r]=909522486^o[r],s[r]=1549556828^o[r];return n=u(i.concat(d(e)),512+8*e.length),c(u(s.concat(n),768))}function T(t,e){return t>>>e|t<<32-e}function S(t,e){return t>>>e}function u(t,e){var n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],O=new Array(64);for(t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e,l=0;l<t.length;l+=16){for(n=I[0],r=I[1],o=I[2],i=I[3],s=I[4],a=I[5],u=I[6],c=I[7],d=0;d<64;d+=1)O[d]=d<16?t[d+l]:C(C(C(T(p=O[d-2],17)^T(p,19)^S(p,10),O[d-7]),T(w=O[d-15],7)^T(w,18)^S(w,3)),O[d-16]),h=C(C(C(C(c,T(b=s,6)^T(b,11)^T(b,25)),(_=s)&a^~_&u),E[d]),O[d]),f=C(T(m=n,2)^T(m,13)^T(m,22),(v=n)&(y=r)^v&(g=o)^y&g),c=u,u=a,a=s,s=C(i,h),i=o,o=r,r=n,n=C(h,f);I[0]=C(n,I[0]),I[1]=C(r,I[1]),I[2]=C(o,I[2]),I[3]=C(i,I[3]),I[4]=C(s,I[4]),I[5]=C(a,I[5]),I[6]=C(u,I[6]),I[7]=C(c,I[7])}return I}this.hex=function(t){return s(r(t,a))},this.b64=function(t){return m(r(t,a),n)},this.any=function(t,e){return g(r(t,a),e)},this.raw=function(t){return r(t,a)},this.hex_hmac=function(t,e){return s(o(t,e))},this.b64_hmac=function(t,e){return m(o(t,e),n)},this.any_hmac=function(t,e,n){return g(o(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(a=t),this},E=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){t&&"boolean"==typeof t.uppercase&&t.uppercase;var G,n=t&&"string"==typeof t.pad?t.pad:"=",a=!t||"boolean"!=typeof t.utf8||t.utf8;function r(t){return c(u(d(t=a?l(t):t),8*t.length))}function o(t,e){t=a?l(t):t,e=a?l(e):e;var n,r=0,o=d(t),i=Array(32),s=Array(32);for(32<o.length&&(o=u(o,8*t.length));r<32;r+=1)i[r]=909522486^o[r],s[r]=1549556828^o[r];return n=u(i.concat(d(e)),1024+8*e.length),c(u(s.concat(n),1536))}function u(t,e){var n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O,E=new Array(80),T=new Array(16),S=[new H(1779033703,-205731576),new H(-1150833019,-2067093701),new H(1013904242,-23791573),new H(-1521486534,1595750129),new H(1359893119,-1377402159),new H(-1694144372,725511199),new H(528734635,-79577749),new H(1541459225,327033209)],A=new H(0,0),C=new H(0,0),R=new H(0,0),P=new H(0,0),j=new H(0,0),x=new H(0,0),M=new H(0,0),k=new H(0,0),N=new H(0,0),z=new H(0,0),D=new H(0,0),U=new H(0,0),L=new H(0,0),F=new H(0,0),B=new H(0,0),q=new H(0,0),V=new H(0,0);for(void 0===G&&(G=[new H(1116352408,-685199838),new H(1899447441,602891725),new H(-1245643825,-330482897),new H(-373957723,-2121671748),new H(961987163,-213338824),new H(1508970993,-1241133031),new H(-1841331548,-1357295717),new H(-1424204075,-630357736),new H(-670586216,-1560083902),new H(310598401,1164996542),new H(607225278,1323610764),new H(1426881987,-704662302),new H(1925078388,-226784913),new H(-2132889090,991336113),new H(-1680079193,633803317),new H(-1046744716,-815192428),new H(-459576895,-1628353838),new H(-272742522,944711139),new H(264347078,-1953704523),new H(604807628,2007800933),new H(770255983,1495990901),new H(1249150122,1856431235),new H(1555081692,-1119749164),new H(1996064986,-2096016459),new H(-1740746414,-295247957),new H(-1473132947,766784016),new H(-1341970488,-1728372417),new H(-1084653625,-1091629340),new H(-958395405,1034457026),new H(-710438585,-1828018395),new H(113926993,-536640913),new H(338241895,168717936),new H(666307205,1188179964),new H(773529912,1546045734),new H(1294757372,1522805485),new H(1396182291,-1651133473),new H(1695183700,-1951439906),new H(1986661051,1014477480),new H(-2117940946,1206759142),new H(-1838011259,344077627),new H(-1564481375,1290863460),new H(-1474664885,-1136513023),new H(-1035236496,-789014639),new H(-949202525,106217008),new H(-778901479,-688958952),new H(-694614492,1432725776),new H(-200395387,1467031594),new H(275423344,851169720),new H(430227734,-1194143544),new H(506948616,1363258195),new H(659060556,-544281703),new H(883997877,-509917016),new H(958139571,-976659869),new H(1322822218,-482243893),new H(1537002063,2003034995),new H(1747873779,-692930397),new H(1955562222,1575990012),new H(2024104815,1125592928),new H(-2067236844,-1578062990),new H(-1933114872,442776044),new H(-1866530822,593698344),new H(-1538233109,-561857047),new H(-1090935817,-1295615723),new H(-965641998,-479046869),new H(-903397682,-366583396),new H(-779700025,566280711),new H(-354779690,-840897762),new H(-176337025,-294727304),new H(116418474,1914138554),new H(174292421,-1563912026),new H(289380356,-1090974290),new H(460393269,320620315),new H(685471733,587496836),new H(852142971,1086792851),new H(1017036298,365543100),new H(1126000580,-1676669620),new H(1288033470,-885112138),new H(1501505948,-60457430),new H(1607167915,987167468),new H(1816402316,1246189591)]),r=0;r<80;r+=1)E[r]=new H(0,0);for(t[e>>5]|=128<<24-(31&e),t[31+(e+128>>10<<5)]=e,o=t.length,r=0;r<o;r+=32){for(W(R,S[0]),W(P,S[1]),W(j,S[2]),W(x,S[3]),W(M,S[4]),W(k,S[5]),W(N,S[6]),W(z,S[7]),n=0;n<16;n+=1)E[n].h=t[r+2*n],E[n].l=t[r+2*n+1];for(n=16;n<80;n+=1)Y(B,E[n-2],19),K(q,E[n-2],29),$(V,E[n-2],6),U.l=B.l^q.l^V.l,U.h=B.h^q.h^V.h,Y(B,E[n-15],1),Y(q,E[n-15],8),$(V,E[n-15],7),D.l=B.l^q.l^V.l,D.h=B.h^q.h^V.h,v=E[n],y=U,g=E[n-7],m=D,_=E[n-16],b=(65535&y.l)+(65535&g.l)+(65535&m.l)+(65535&_.l),w=(y.l>>>16)+(g.l>>>16)+(m.l>>>16)+(_.l>>>16)+(b>>>16),I=(65535&y.h)+(65535&g.h)+(65535&m.h)+(65535&_.h)+(w>>>16),O=(y.h>>>16)+(g.h>>>16)+(m.h>>>16)+(_.h>>>16)+(I>>>16),v.l=65535&b|w<<16,v.h=65535&I|O<<16;for(n=0;n<80;n+=1)L.l=M.l&k.l^~M.l&N.l,L.h=M.h&k.h^~M.h&N.h,Y(B,M,14),Y(q,M,18),K(V,M,9),U.l=B.l^q.l^V.l,U.h=B.h^q.h^V.h,Y(B,R,28),K(q,R,2),K(V,R,7),D.l=B.l^q.l^V.l,D.h=B.h^q.h^V.h,F.l=R.l&P.l^R.l&j.l^P.l&j.l,F.h=R.h&P.h^R.h&j.h^P.h&j.h,i=A,s=z,a=U,u=L,c=G[n],l=E[n],d=(65535&s.l)+(65535&a.l)+(65535&u.l)+(65535&c.l)+(65535&l.l),h=(s.l>>>16)+(a.l>>>16)+(u.l>>>16)+(c.l>>>16)+(l.l>>>16)+(d>>>16),f=(65535&s.h)+(65535&a.h)+(65535&u.h)+(65535&c.h)+(65535&l.h)+(h>>>16),p=(s.h>>>16)+(a.h>>>16)+(u.h>>>16)+(c.h>>>16)+(l.h>>>16)+(f>>>16),i.l=65535&d|h<<16,i.h=65535&f|p<<16,X(C,D,F),W(z,N),W(N,k),W(k,M),X(M,x,A),W(x,j),W(j,P),W(P,R),X(R,A,C);X(S[0],S[0],R),X(S[1],S[1],P),X(S[2],S[2],j),X(S[3],S[3],x),X(S[4],S[4],M),X(S[5],S[5],k),X(S[6],S[6],N),X(S[7],S[7],z)}for(r=0;r<8;r+=1)T[2*r]=S[r].h,T[2*r+1]=S[r].l;return T}function H(t,e){this.h=t,this.l=e}function W(t,e){t.h=e.h,t.l=e.l}function Y(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function K(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function $(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function X(t,e,n){var r=(65535&e.l)+(65535&n.l),o=(e.l>>>16)+(n.l>>>16)+(r>>>16),i=(65535&e.h)+(65535&n.h)+(o>>>16),s=(e.h>>>16)+(n.h>>>16)+(i>>>16);t.l=65535&r|o<<16,t.h=65535&i|s<<16}this.hex=function(t){return s(r(t))},this.b64=function(t){return m(r(t),n)},this.any=function(t,e){return g(r(t),e)},this.raw=function(t){return r(t)},this.hex_hmac=function(t,e){return s(o(t,e))},this.b64_hmac=function(t,e){return m(o(t,e),n)},this.any_hmac=function(t,e,n){return g(o(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(a=t),this}},RMD160:function(t){t&&"boolean"==typeof t.uppercase&&t.uppercase;var n=t&&"string"==typeof t.pad?t.pa:"=",a=!t||"boolean"!=typeof t.utf8||t.utf8,O=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],T=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],S=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function r(t){return u(c(y(t=a?l(t):t),8*t.length))}function o(t,e){t=a?l(t):t,e=a?l(e):e;var n,r,o=y(t),i=Array(16),s=Array(16);for(16<o.length&&(o=c(o,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return r=c(i.concat(y(e)),512+8*e.length),u(c(s.concat(r),672))}function u(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function c(t,e){var n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m=1732584193,_=4023233417,b=2562383102,w=271733878,I=3285377520;for(t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e,i=t.length,o=0;o<i;o+=16){for(s=d=m,a=h=_,u=f=b,c=p=w,l=v=I,r=0;r<=79;r+=1)n=C(R(n=C(n=C(n=C(s,A(r,a,u,c)),t[o+O[r]]),0<=(g=r)&&g<=15?0:16<=g&&g<=31?1518500249:32<=g&&g<=47?1859775393:48<=g&&g<=63?2400959708:64<=g&&g<=79?2840853838:"rmd160_K1: j out of range"),T[r]),l),s=l,l=c,c=R(u,10),u=a,a=n,n=C(R(n=C(n=C(n=C(d,A(79-r,h,f,p)),t[o+E[r]]),0<=(y=r)&&y<=15?1352829926:16<=y&&y<=31?1548603684:32<=y&&y<=47?1836072691:48<=y&&y<=63?2053994217:64<=y&&y<=79?0:"rmd160_K2: j out of range"),S[r]),v),d=v,v=p,p=R(f,10),f=h,h=n;n=C(_,C(u,p)),_=C(b,C(c,v)),b=C(w,C(l,d)),w=C(I,C(s,h)),I=C(m,C(a,f)),m=n}return[m,_,b,w,I]}function A(t,e,n,r){return 0<=t&&t<=15?e^n^r:16<=t&&t<=31?e&n|~e&r:32<=t&&t<=47?(e|~n)^r:48<=t&&t<=63?e&r|n&~r:64<=t&&t<=79?e^(n|~r):"rmd160_f: j out of range"}this.hex=function(t){return s(r(t))},this.b64=function(t){return m(r(t),n)},this.any=function(t,e){return g(r(t),e)},this.raw=function(t){return r(t)},this.hex_hmac=function(t,e){return s(o(t,e))},this.b64_hmac=function(t,e){return m(o(t,e),n)},this.any_hmac=function(t,e,n){return g(o(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return this},this.setPad=function(t){return void 0!==t&&(n=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(a=t),this}}},o&&"object"==typeof t&&t&&t.global,void 0===(e=function(){return n}.call(o,i,o,r))||(r.exports=e)}).call(this,i(7))},function(t,e,n){"use strict";var r=n(551);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,i,u){"use strict";(function(t){u.d(i,"a",function(){return e}),u.d(i,"c",function(){return n}),u.d(i,"b",function(){return r});var e=t.TextDecoder;function n(){if(!e||"undefined"==typeof TextEncoder)return!1;try{return"test"===(new e).decode((new TextEncoder).encode("test"),{stream:!0})}catch(t){}return!1}function s(t,e,n){if(1===n)return 128>>e<=t&&t<<e<=2047;if(2===n)return 2048>>e<=t&&t<<e<=55295||57344>>e<=t&&t<<e<=65535;if(3===n)return 65536>>e<=t&&t<<e<=1114111;throw new Error("Invalid octetsCount")}function a(t,e){if(6===t)return 15<e>>6?3:31<e?2:1;if(12===t)return 15<e?3:2;if(18===t)return 3;throw new Error}var r=(o.prototype.decode=function(t){for(var e="",n=this.bitsNeeded,r=this.codePoint,o=0;o<t.length;o+=1){var i=t[o];0!==n&&(i<128||191<i||!s(r<<6|63&i,n-6,a(n,r)))&&(n=0,r=65533,e+=String.fromCharCode(r)),0===n?(r=0<=i&&i<=127?(n=0,i):192<=i&&i<=223?(n=6,31&i):224<=i&&i<=239?(n=12,15&i):240<=i&&i<=247?(n=18,7&i):(n=0,65533),0===n||s(r,n,a(n,r))||(n=0,r=65533)):(n-=6,r=r<<6|63&i),0===n&&(r<=65535?e+=String.fromCharCode(r):(e+=String.fromCharCode(55296+(r-65535-1>>10)),e+=String.fromCharCode(56320+(r-65535-1&1023))))}return this.bitsNeeded=n,this.codePoint=r,e},o);function o(){this.bitsNeeded=0,this.codePoint=0}}).call(this,u(7))},function(t,e){function c(t,e){return t===e?0:e<t?1:-1}function o(t,e,n){var r=i(t,e,n=n||c);return-1===r?-1:0===n(t[r],e)?r:-1}function i(t,e,n){n=n||c;for(var r=t.length,o=r-1,i=0,s=-1;i<=o&&0<=i&&o<r;){var a=n(t[s=Math.floor((o+i)/2)],e);if(0===a)return s;0<=a?o=s-1:i=s+1}return s}e.add=function(t,e,n){n=n||c;for(var r=t.push(e)-1;r;){if(0<n(e,t[r-1]))return;t[r]=t[r-1],t[r-1]=e,r--}},e.remove=function(t,e,n){var r=o(t,e,n);return-1!==r&&(t.splice(r,1),!0)},e.has=function(t,e,n){return-1<o(t,e,n)},e.eq=o,e.lte=function(t,e,n){var r=i(t,e,n=n||c);if(-1===r)return-1;for(;0<=r;r--)if(n(t[r],e)<=0)return r;return-1},e.lt=function(t,e,n){var r=i(t,e,n=n||c);if(-1===r)return-1;for(;0<=r;r--)if(n(t[r],e)<0)return r;return-1},e.gte=function(t,e,n){var r=i(t,e,n=n||c);if(-1===r)return-1;for(;r<t.length;r++)if(0<=n(t[r],e))return r;return-1},e.gt=function(t,e,n){var r=i(t,e,n=n||c);if(-1===r)return-1;for(;r<t.length;r++)if(0<n(t[r],e))return r;return-1},e.nearest=function(t,e,n){n=n||c;for(var r=t.length,o=r-1,i=0,s=-1,a=1;i<=o&&0<=i&&o<r;){var u=n(t[s=Math.floor((o+i)/2)],e);if(0===u)return s;if(0<=u){if(1===a)a=0;else if(2===a)return Math.abs(t[s]-e)>Math.abs(t[s-1]-e)?s-1:s;o=s-1}else{if(1===a)a=2;else if(0===a)return s;i=s+1}}return s}},function(t,e,n){"use strict";function a(t){return t.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+32)})}n.d(e,"a",function(){return o});function l(){}function r(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function c(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var d=(h.prototype.get=function(t){return this._map[a(t)]},h),s=(u.prototype.open=function(t,e){this._abort(!0);var o=this,i=this._xhr,s=1,n=0;function r(){if(1===s){var e="",n=void 0,r=0;if("contentType"in i)r=200,e="OK",n=i.contentType;else try{r=i.status,e=i.statusText,n=i.getResponseHeader("Content-Type")}catch(t){e="",n=void(r=0)}0!==r&&(s=2,o.readyState=2,o.status=r,o.statusText=e,o._contentType=n,o.onreadystatechange())}}function a(){if(r(),2===s||3===s){s=3;var t="";try{t=i.responseText}catch(t){}o.readyState=3,o.responseText=t,o.onprogress()}}function u(){a(),1!==s&&2!==s&&3!==s||(s=4,0!==n&&(clearTimeout(n),n=0),o.readyState=4,o.onreadystatechange())}this._abort=function(t){0!==o._sendTimeout&&(clearTimeout(o._sendTimeout),o._sendTimeout=0),1!==s&&2!==s&&3!==s||(s=4,i.onload=l,i.onerror=l,i.onabort=l,i.onprogress=l,i.onreadystatechange=l,i.abort(),0!==n&&(clearTimeout(n),n=0),t||(o.readyState=4,o.onreadystatechange())),s=0};var c=function(){n=setTimeout(function(){c()},500),3===i.readyState&&a()};i.onload=u,i.onerror=u,i.onabort=u,"sendAsBinary"in XMLHttpRequest.prototype||"mozAnon"in XMLHttpRequest.prototype||(i.onprogress=a),i.onreadystatechange=function(){i&&(4===i.readyState?u():3===i.readyState?a():2===i.readyState&&r())},"contentType"in i&&(e+=(-1===e.indexOf("?")?"?":"&")+"padding=true"),i.open(t,e,!0),"readyState"in i&&(n=setTimeout(function(){c()},0))},u.prototype.abort=function(){this._abort(!1)},u.prototype.getResponseHeader=function(t){return this._contentType},u.prototype.setRequestHeader=function(t,e){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(t,e)},u.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders?this._xhr.getAllResponseHeaders():""},u.prototype.send=function(){if("ontimeout"in XMLHttpRequest.prototype||!document||!document.readyState||"complete"===document.readyState){var t=this._xhr;t.withCredentials=this.withCredentials,t.responseType=this.responseType;try{t.send(void 0)}catch(e){throw e}}else{var e=this;e._sendTimeout=setTimeout(function(){e._sendTimeout=0,e.send()},4)}},u),o=(i.prototype.fetch=function(){return r(this,void 0,void 0,function(){var n,e,r,o,i,s,a,u=this;return c(this,function(t){switch(t.label){case 0:if(this.isAborted)return[2];for(e=new Promise(function(t){n=t}),this.xhr.open("GET",this.url),this.xhr.onprogress=function(){var t=u.xhr.responseText.slice(u.offset);u.offset+=t.length,u.onProgress(t)},this.xhr.onreadystatechange=function(){if(u.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED){var t=u.xhr.getResponseHeader("Content-Type"),e=u.xhr.getAllResponseHeaders();u.onStart({contentType:t,headers:new d(e),status:u.xhr.status,statusText:u.xhr.statusText})}else u.xhr.readyState===XMLHttpRequest.DONE&&n()},this.xhr.withCredentials=this.withCredentials,this.xhr.responseType="text",r=0,o=Object.entries(this.headers);r<o.length;r++)i=o[r],s=i[0],a=i[1],this.xhr.setRequestHeader(s,a);return this.xhr.send(),[4,e];case 1:return t.sent(),[2]}})})},i.prototype.abort=function(){return r(this,void 0,void 0,function(){return c(this,function(t){return this.isAborted||(this.isAborted=!0,this.xhr.abort()),[2]})})},i);function i(t){var e=t.headers,n=t.onProgress,r=t.onStart,o=t.url,i=t.withCredentials;this.headers=e,this.isAborted=!1,this.offset=0,this.onProgress=n,this.onStart=r,this.url=o,this.withCredentials=i,this.xhr=new s(new XMLHttpRequest)}function u(t){this.withCredentials=!1,this.responseType="",this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=l,this.onreadystatechange=l,this._contentType="",this._xhr=t,this._sendTimeout=0,this._abort=l}function h(t){for(var e=Object.create(null),n=t.split("\r\n"),r=0;r<n.length;r+=1){var o=n[r].split(": "),i=o.shift(),s=o.join(": ");e[a(i)]=s}this._map=e}},function(t,e,n){var r=n(26),o=n(68),i=n(50),s=n(42),a=n(70),u=n(18),c=n(144),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=a(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,n){var r=n(22),o=n(69),i="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(15),o=n(31);t.exports=function(e,n){try{o(r,e,n)}catch(t){r[e]=n}return n}},function(t,e,n){var r,o,i,s=n(264),a=n(15),u=n(23),c=n(31),l=n(18),d=n(73),h=n(74),f=a.WeakMap;if(s){var p=new f,v=p.get,y=p.has,g=p.set;r=function(t,e){return g.call(p,t,e),e},o=function(t){return v.call(p,t)||{}},i=function(t){return y.call(p,t)}}else{var m=d("state");h[m]=!0,r=function(t,e){return c(t,m,e),e},o=function(t){return l(t,m)?t[m]:{}},i=function(t){return l(t,m)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(n){return function(t){var e;if(!u(t)||(e=o(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(149),o=n(109).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(268);t.exports=function(r,o,t){if(i(r),void 0===o)return r;switch(t){case 0:return function(){return r.call(o)};case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}},function(t,e,n){var r=n(69);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){function r(){}var o=n(34),i=n(269),s=n(109),a=n(74),u=n(270),c=n(145),l=n(73)("IE_PROTO"),d=function(){var t,e=c("iframe"),n=s.length;for(e.style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),d=t.F;n--;)delete d.prototype[s[n]];return d()};t.exports=Object.create||function(t,e){var n;return null!==t?(r.prototype=o(t),n=new r,r.prototype=null,n[l]=t):n=d(),void 0===e?n:i(n,e)},a[l]=!0},function(t,e,n){var r=n(302);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(13)("match");t.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,"/./"[e](n)}catch(e){}}return!1}},function(t,e,n){var r=n(36),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s),i(o,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r=n(19);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},function(t,e,n){var r=n(186);t.exports=function(t,e){return!(null==t||!t.length)&&-1<r(t,e,0)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var o=n(80),i=n(57);t.exports=function(t,e){for(var n=0,r=(e=o(e,t)).length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}},function(t,e,n){var r=n(19),o=n(383),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(123);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(406),o=n(201);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(197),o=n(123);t.exports=function(t){return r(o(t))}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){var r=n(199)("keys"),o=n(200);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(59),o=n(20).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(85).f,o=n(81),i=n(21)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var o=n(84);function r(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=o(n),this.reject=o(r)}t.exports.f=function(t){return new r(t)}},function(t,e,n){var r=n(27);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},function(t,e,n){var r=n(213);t.exports=function(t,e){return!(null==t||!t.length)&&-1<r(t,e,0)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var o=n(88),i=n(62);t.exports=function(t,e){for(var n=0,r=(e=o(e,t)).length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}},function(t,e,n){var r=n(27),o=n(464),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(225),o=n(226),i=n(228),s=n(229),a=n(230);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e){t.exports=function(e,n){return function(t){return e(n(t))}}},function(t,e,n){var r=n(545),o=n(194);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,o,i){"use strict";(function(t){var e=i(11),u=i.n(e),c=i(8),l=i(257),d=i(41),h=i(101),n=(r.prototype.addEventListener=function(t,e){this._events.on(t,e)},r.prototype.removeEventListener=function(t,e){this._events.removeListener(t,e)},r.prototype.dispatchEvent=function(t){t&&t.type&&this._events.emit(t.type,t)},r.prototype.start=function(){return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:return this.readyState!==c.a.WAITING?[2]:[4,this._esRequest.start()];case 1:return t.sent(),[2]}})})},r.prototype.close=function(){this.readyState!==c.a.CLOSED&&(this._esRequest.close(),this._esRequest.onFinish(new Error("Connection closed by caller")))},r.CLOSED=c.a.CLOSED,r.CONNECTING=c.a.CONNECTING,r.OPEN=c.a.OPEN,r.FetchRequest=d.a,r.XHRRequest=h.a,r.isFetchSupported=d.b,r);function r(t,e){var n=this,r=void 0===e?{}:e,o=r.RequestClass,i=r.headers,s=r.lastEventId,a=r.withCredentials;this.CLOSED=c.a.CLOSED,this.CONNECTING=c.a.CONNECTING,this.OPEN=c.a.OPEN,this.FetchRequest=d.a,this.XHRRequest=h.a,this.isFetchSupported=d.b,this._events=new u.a,this.onerror=void 0,this.onmessage=void 0,this.onopen=void 0,this.readyState=c.a.WAITING,this.url=t=String(t),this.withCredentials=a,o=o||(d.b?d.a:h.a),this._esRequest=new l.a({RequestClass:o,dispatchEvent:function(t){return n.dispatchEvent(t)},headers:i,lastEventId:s,onError:function(t){return n.onerror&&n.onerror(t)},onMessage:function(t){return n.onmessage&&n.onmessage(t)},onOpen:function(t){return n.onopen&&n.onopen(t)},onReadyStateChange:function(t){n.readyState=t},url:t,withCredentials:a})}t.EventSource,o.a=n}).call(this,i(7))},function(d,t,h){(function(t){for(var r=h(366),e="undefined"==typeof window?t:window,n=["moz","webkit"],o="AnimationFrame",i=e["request"+o],s=e["cancel"+o]||e["cancelRequest"+o],a=0;!i&&a<n.length;a++)i=e[n[a]+"Request"+o],s=e[n[a]+"Cancel"+o]||e[n[a]+"CancelRequest"+o];if(!i||!s){var u=0,c=0,l=[];i=function(t){if(0===l.length){var e=r(),n=Math.max(0,1e3/60-(e-u));u=n+e,setTimeout(function(){for(var t=l.slice(0),e=l.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return l.push({handle:++c,callback:t,cancelled:!1}),c},s=function(t){for(var e=0;e<l.length;e++)l[e].handle===t&&(l[e].cancelled=!0)}}d.exports=function(t){return i.call(e,t)},d.exports.cancel=function(){s.apply(e,arguments)},d.exports.polyfill=function(t){(t=t||e).requestAnimationFrame=i,t.cancelAnimationFrame=s}}).call(this,h(7))},function(t,e){t.exports=function(e){return function(t){return"/"===t.url[0]&&(t.url=e+t.url),t}}},function(t,e,n){var r,o;void 0===(o="function"==typeof(r=function(){var e=0;function t(t,e,n){this.fields={},"function"==typeof e&&(n=e,e=null),t&&this.append(t,n),this.setBoundary(e)}function a(t,e,n,r){this.data=t,this.contentType=e,this.filename=n,this.headers=r}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}return t.prototype={constructor:t,availableTypes:["multipart","form-encoded"],setType:function(t){return this.typeOverride=-1!==this.availableTypes.indexOf(t)?t:null,this},getType:function(){var t=this.typeOverride;if(-1!==this.availableTypes.indexOf(t))return t;for(var e in this.fields)if(this.fields.hasOwnProperty(e)&&(this.fields[e],1)&&this.fields[e].contentType)return"multipart";return"form-encoded"},append:function(t,e,n){var r,o,i,s,a;if("string"==typeof t&&2<=arguments.length)return this.setField.apply(this,arguments);if("function"==typeof e&&(i=n,n=e,e=i),"function"==typeof n&&(s=1,a=function(){--s||n()}),h(t))for(i=0;i<t.length;i++)o=t[i],s++,this.setField(o.name,o.value,!1!==e,null,a);else for(r in t)if(t.hasOwnProperty(r))if(h(o=t[r]))for(i=0;i<o.length;i++)s++,this.setField(r,o[i],!0===e,null,a);else s++,this.setField(r,o,!1!==e,null,a);return s&&a(),this},setField:function(t,e,n,r,o){var i=this.fields;return t+="",window.File&&e instanceof window.File||window.Blob&&e instanceof window.Blob?this.setFileField.apply(this,arguments):("function"==typeof n&&(o=n,n=!0),e&&e.nodeType&&e.nodeName&&e.getAttribute?e=e.value:h(e)||e&&(e instanceof a||e.contentType&&e.data)||(e+=""),t.match(/\[\]$/g)&&(n=!1),!1===n&&i.hasOwnProperty(t)?(h(i[t])||(i[t]=[i[t]]),i[t].push(e)):i[t]=e,"function"==typeof o&&o(),this)},setFileField:function(t,e,n,r,o){var i=this,s=new FileReader;return"function"==typeof n&&(o=n,n=!0),s.onloadend=function(){i.setField(t,new a(function(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return e}(s.result),e.type,e.name,r||e.headers),!1!==n),"function"==typeof o&&o(),e=o=i=s=null},s.readAsArrayBuffer(e),this},setBoundary:function(t){return this.boundary=(t||Math.random().toString(36).substring(2)+(++e).toString(36))+"",this},toString:function(t){var e,n,r,o,i,s,a,u,c,l=this.getType(),d="";for(n in this.boundary||this.setBoundary(),t&&this.append(t),this.fields)if(this.fields.hasOwnProperty(n))for(e=h(r=this.fields[n])?r:[r],a=0;a<e.length;a++){if(s=e[a],"multipart"===l){if(u=s.headers,o=null,s.contentType&&(o=s.contentType,s=s.data),i="--"+this.boundary+'\r\nContent-Disposition: form-data; name="'+n+'"',e[a].filename&&(i+='; filename="'+e[a].filename+'"'),i+="\r\n",o&&(i+="Content-type: "+o+"\r\n"),u)for(c in u)u.hasOwnProperty(c)&&(i+=c+": "+u[c]+"\r\n");i+="\r\n"+s+"\r\n"}else"form-encoded"===l&&(i=encodeURIComponent(n)+"="+encodeURIComponent(s)+"&");d+=i}return"multipart"===l?d+="--"+this.boundary+"--\r\n":"form-encoded"===l&&(d=d.substring(0,d.length-1)),d},getData:function(){var t,e,n=this.toString();if("multipart"!==this.getType())return n;t=n.length,e=new Uint8Array(t);for(var r=0;r<t;r++)e[r]=255&n.charCodeAt(r);return e},getContentType:function(t){return"multipart"===this.getType()?"multipart/form-data; "+(t?"charset=utf-8; ":"")+"boundary="+this.boundary:"application/x-www-form-encoded"}},{RequestBody:t,RequestField:a}})?r.apply(e,[]):r)||(t.exports=o)},function(t,e,n){var r=n(524);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(26),o=n(22),i=n(145);t.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(15),o=n(23),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},function(t,e,n){var r=n(51);t.exports=r("native-function-to-string",Function.toString)},function(t,e,n){var a=n(18),u=n(265),c=n(102),l=n(32);t.exports=function(t,e){for(var n=u(e),r=l.f,o=c.f,i=0;i<n.length;i++){var s=n[i];a(t,s)||r(t,s,o(e,s))}}},function(t,e,n){function r(t){return"function"==typeof t?t:void 0}var o=n(35),i=n(15);t.exports=function(t,e){return arguments.length<2?r(o[t])||r(i[t]):o[t]&&o[t][e]||i[t]&&i[t][e]}},function(t,e,n){var s=n(18),a=n(42),u=n(150).indexOf,c=n(74);t.exports=function(t,e){var n,r=a(t),o=0,i=[];for(n in r)!s(c,n)&&s(r,n)&&i.push(n);for(;e.length>o;)s(r,n=e[o++])&&(~u(i,n)||i.push(n));return i}},function(t,e,n){function r(a){return function(t,e,n){var r,o=u(t),i=c(o.length),s=l(n,i);if(a&&e!=e){for(;s<i;)if((r=o[s++])!=r)return!0}else for(;s<i;s++)if((a||s in o)&&o[s]===e)return a||s||0;return!a&&-1}}var u=n(42),c=n(44),l=n(266);t.exports={includes:r(!0),indexOf:r(!1)}},function(t,e,n){function r(f){var p=1==f,v=2==f,y=3==f,g=4==f,m=6==f,_=5==f||m;return function(t,e,n,r){for(var o,i,s=I(t),a=w(s),u=b(e,n,3),c=O(a.length),l=0,d=r||E,h=p?d(t,c):v?d(t,0):void 0;l<c;l++)if((_||l in a)&&(i=u(o=a[l],l,s),f))if(p)h[l]=i;else if(i)switch(f){case 3:return!0;case 5:return o;case 6:return l;case 2:T.call(h,o)}else if(g)return!1;return m?-1:y||g?g:h}}var b=n(111),w=n(103),I=n(45),O=n(44),E=n(152),T=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},function(t,e,n){var r=n(23),o=n(112),i=n(13)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(22);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(t,e,n){var r=n(13),o=n(113),i=n(31),s=r("unscopables"),a=Array.prototype;null==a[s]&&i(a,s,o(null)),t.exports=function(t){a[s][t]=!0}},function(t,e,n){"use strict";var r,o,i,s=n(156),a=n(31),u=n(18),c=n(13),l=n(72),d=c("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):h=!0),null==r&&(r={}),l||u(r,d)||a(r,d,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,e,n){var r=n(18),o=n(45),i=n(73),s=n(277),a=i("IE_PROTO"),u=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=o(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){"use strict";var o=n(70),i=n(32),s=n(50);t.exports=function(t,e,n){var r=o(e);r in t?i.f(t,r,s(0,n)):t[r]=n}},function(t,e,n){var o=n(69),i=n(13)("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:s?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){function r(a){return function(t){for(var e,n=l(t),r=c(n),o=r.length,i=0,s=[];i<o;)e=r[i++],u&&!d.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var u=n(26),c=n(75),l=n(42),d=n(68).f;t.exports={entries:r(!0),values:r(!1)}},function(t,e,n){e.f=n(13)},function(t,e,n){"use strict";var o=n(339);function s(){}var i=null,a={};function u(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==s&&f(t,this)}function c(t,e){for(;3===t._i;)t=t._j;if(u._l&&u._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);var n,r;n=t,r=e,o(function(){var t=1===n._i?r.onFulfilled:r.onRejected;if(null!==t){var e=function(t,e){try{return t(e)}catch(t){return i=t,a}}(t,n._j);e===a?d(r.promise,i):l(r.promise,e)}else 1===n._i?l(r.promise,n._j):d(r.promise,n._j)})}function l(t,e){if(e===t)return d(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,a}}(e);if(n===a)return d(t,i);if(n===t.then&&e instanceof u)return t._i=3,t._j=e,void r(t);if("function"==typeof n)return void f(n.bind(e),t)}t._i=1,t._j=e,r(t)}function d(t,e){t._i=2,t._j=e,u._m&&u._m(t,e),r(t)}function r(t){if(1===t._h&&(c(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)c(t,t._k[e]);t._k=null}}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1,r=function(t){try{t(function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,d(e,t))})}catch(t){return i=t,a}}(t);n||r!==a||(n=!0,d(e,i))}(t.exports=u)._l=null,u._m=null,u._n=s,u.prototype.then=function(t,e){if(this.constructor!==u)return o=t,i=e,new(r=this).constructor(function(t,e){var n=new u(s);n.then(t,e),c(r,new h(o,i,n))});var r,o,i,n=new u(s);return c(this,new h(t,e,n)),n}},function(t,e,n){},function(t,e,n){"use strict";!function(){try{var t=n(345).request().constructor.prototype;t.setNoDelay||(t.setNoDelay=function(){}),t.abort||(t.abort=function(){this.xhr&&this.xhr.abort()})}catch(t){}}()},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,a,e){(function(t){a.fetch=s(t.fetch)&&s(t.ReadableStream),a.writableStream=s(t.WritableStream),a.abortController=s(t.AbortController),a.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),a.blobConstructor=!0}catch(t){}var e;function n(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function r(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var o=void 0!==t.ArrayBuffer,i=o&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}a.arraybuffer=a.fetch||o&&r("arraybuffer"),a.msstream=!a.fetch&&i&&r("ms-stream"),a.mozchunkedarraybuffer=!a.fetch&&o&&r("moz-chunked-arraybuffer"),a.overrideMimeType=a.fetch||!!n()&&s(n().overrideMimeType),a.vbArray=s(t.VBArray),e=null}).call(this,e(7))},function(t,n,r){(function(c,l,d){var h=r(165),t=r(38),f=r(167),a=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=n.IncomingMessage=function(t,e,n,r){var o=this;if(f.Readable.call(o),o._mode=n,o.headers={},o.rawHeaders=[],o.trailers={},o.rawTrailers=[],o.on("end",function(){c.nextTick(function(){o.emit("close")})}),"fetch"===n){if(o._fetchResponse=e,o.url=e.url,o.statusCode=e.status,o.statusMessage=e.statusText,e.headers.forEach(function(t,e){o.headers[e.toLowerCase()]=t,o.rawHeaders.push(e,t)}),h.writableStream){var i=new WritableStream({write:function(n){return new Promise(function(t,e){o._destroyed?e():o.push(new l(n))?t():o._resumeFetch=t})},close:function(){d.clearTimeout(r),o._destroyed||o.push(null)},abort:function(t){o._destroyed||o.emit("error",t)}});try{return void e.body.pipeTo(i).catch(function(t){d.clearTimeout(r),o._destroyed||o.emit("error",t)})}catch(t){}}var s=e.body.getReader();!function e(){s.read().then(function(t){if(!o._destroyed){if(t.done)return d.clearTimeout(r),void o.push(null);o.push(new l(t.value)),e()}}).catch(function(t){d.clearTimeout(r),o._destroyed||o.emit("error",t)})}()}else if(o._xhr=t,o._pos=0,o.url=t.responseURL,o.statusCode=t.status,o.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===o.headers[n]&&(o.headers[n]=[]),o.headers[n].push(e[2])):void 0!==o.headers[n]?o.headers[n]+=", "+e[2]:o.headers[n]=e[2],o.rawHeaders.push(e[1],e[2])}}),o._charset="x-user-defined",!h.overrideMimeType){var a=o.rawHeaders["mime-type"];if(a){var u=a.match(/;\s*charset=([^;])(;|$)/);u&&(o._charset=u[1].toLowerCase())}o._charset||(o._charset="utf-8")}};t(e,f.Readable),e.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},e.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==a.DONE)break;try{n=new d.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new l(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var r=n.substr(t._pos);if("x-user-defined"===t._charset){for(var o=new l(r.length),i=0;i<r.length;i++)o[i]=255&r.charCodeAt(i);t.push(o)}else t.push(r,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==a.DONE||!e.response)break;n=e.response,t.push(new l(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==a.LOADING||!n)break;t.push(new l(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==a.LOADING)break;var s=new d.MSStreamReader;s.onprogress=function(){s.result.byteLength>t._pos&&(t.push(new l(new Uint8Array(s.result.slice(t._pos)))),t._pos=s.result.byteLength)},s.onload=function(){t.push(null)},s.readAsArrayBuffer(n)}t._xhr.readyState===a.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,r(37),r(36).Buffer,r(7))},function(t,e,n){(((e=t.exports=n(168)).Stream=e).Readable=e).Writable=n(171),e.Duplex=n(46),e.Transform=n(173),e.PassThrough=n(356)},function(x,t,M){"use strict";(function(t,v){var y=M(77);x.exports=l;var s,g=M(164);l.ReadableState=i,M(11).EventEmitter;function m(t,e){return t.listeners(e).length}var o=M(169),f=M(116).Buffer,p=t.Uint8Array||function(){},e=M(54);e.inherits=M(38);var n=M(349),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var a,u=M(350),r=M(170);e.inherits(l,o);var c=["error","close","destroy","pause","resume"];function i(t,e){t=t||{};var n=e instanceof(s=s||M(46));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=t.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a=a||M(172).StringDecoder,this.decoder=new a(t.encoding),this.encoding=t.encoding)}function l(t){if(s=s||M(46),!(this instanceof l))return new l(t);this._readableState=new i(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function d(t,e,n,r,o){var i,s,a,u,c,l,d,h=t._readableState;return null===e?(h.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,w(t)}}(t,h)):(o||(a=h,l=u=e,f.isBuffer(l)||l instanceof p||"string"==typeof u||void 0===u||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),i=c),i?t.emit("error",i):h.objectMode||e&&0<e.length?("string"==typeof e||h.objectMode||Object.getPrototypeOf(e)===f.prototype||(s=e,e=f.from(s)),r?h.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):b(t,h,e,!0):h.ended?t.emit("error",new Error("stream.push() after EOF")):(h.reading=!1,h.decoder&&!n?(e=h.decoder.write(e),h.objectMode||0!==e.length?b(t,h,e,!1):O(t,h)):b(t,h,e,!1))):r||(h.reading=!1)),!(d=h).ended&&(d.needReadable||d.length<d.highWaterMark||0===d.length)}function b(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&w(t)),O(t,e)}function h(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(8388608<=(n=t)?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?y.nextTick(I,t):I(t))}function I(t){_("emit readable"),t.emit("readable"),A(t)}function O(t,e){e.readingMore||(e.readingMore=!0,y.nextTick(E,t,e))}function E(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function T(t){_("readable nexttick read 0"),t.read(0)}function S(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?s=e.buffer.shift():!t||t>=e.length?(s=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):(n=t,r=e.buffer,o=e.decoder,n<r.head.data.length?(i=r.head.data.slice(0,n),r.head.data=r.head.data.slice(n)):i=n===r.head.data.length?r.shift():o?function(t,e){var n=e.head,r=1,o=n.data;for(t-=o.length;n=n.next;){var i=n.data,s=t>i.length?i.length:t;if(s===i.length?o+=i:o+=i.slice(0,t),0==(t-=s)){s===i.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=i.slice(s);break}++r}return e.length-=r,o}(n,r):function(t,e){var n=f.allocUnsafe(t),r=e.head,o=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var i=r.data,s=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,s),0==(t-=s)){s===i.length?(++o,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=i.slice(s);break}++o}return e.length-=o,n}(n,r),s=i),s);var n,r,o,i,s}function R(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,y.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function j(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),l.prototype.destroy=r.destroy,l.prototype._undestroy=r.undestroy,l.prototype._destroy=function(t,e){this.push(null),e(t)},l.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=f.from(t,e),e=""),n=!0),d(this,t,e,!1,n)},l.prototype.unshift=function(t){return d(this,t,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){return a=a||M(172).StringDecoder,this._readableState.decoder=new a(t),this._readableState.encoding=t,this},l.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):w(this),null;if(0===(t=h(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,o=e.needReadable;return _("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",o=!0),e.ended||e.reading?_("reading or ended",o=!1):o&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=h(n,e))),null===(r=0<t?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},l.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(r,t){var o=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,t);var e=t&&!1===t.end||r===v.stdout||r===v.stderr?p:s;function s(){_("onend"),r.end()}i.endEmitted?y.nextTick(e):o.once("end",e),r.on("unpipe",function t(e,n){_("onunpipe"),e===o&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,_("cleanup"),r.removeListener("close",h),r.removeListener("finish",f),r.removeListener("drain",a),r.removeListener("error",d),r.removeListener("unpipe",t),o.removeListener("end",s),o.removeListener("end",p),o.removeListener("data",l),u=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())});var n,a=(n=o,function(){var t=n._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&m(n,"data")&&(t.flowing=!0,A(n))});r.on("drain",a);var u=!1,c=!1;function l(t){_("ondata"),(c=!1)!==r.write(t)||c||((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==j(i.pipes,r))&&!u&&(_("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++,c=!0),o.pause())}function d(t){_("onerror",t),p(),r.removeListener("error",d),0===m(r,"error")&&r.emit("error",t)}function h(){r.removeListener("finish",f),p()}function f(){_("onfinish"),r.removeListener("close",h),p()}function p(){_("unpipe"),o.unpipe(r)}return o.on("data",l),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?g(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(r,"error",d),r.once("close",h),r.once("finish",f),r.emit("pipe",o),i.flowing||(_("pipe resume"),o.resume()),r},l.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var s=j(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},l.prototype.addListener=l.prototype.on=function(t,e){var n=o.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):y.nextTick(T,this))}return n},l.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(_("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,y.nextTick(S,t,e))),this},l.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var n=this,r=this._readableState,o=!1;for(var t in e.on("end",function(){if(_("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),e.on("data",function(t){_("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t||(r.objectMode||t&&t.length)&&(n.push(t)||(o=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var i=0;i<c.length;i++)e.on(c[i],this.emit.bind(this,c[i]));return this._read=function(t){_("wrapped _read",t),o&&(o=!1,e.resume())},this},Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=C}).call(this,M(7),M(37))},function(t,e,n){t.exports=n(11).EventEmitter},function(t,e,n){"use strict";var i=n(77);function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return r||o?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(s,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(O,t,E){"use strict";(function(t,e,n){var g=E(77);function d(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(void 0),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}O.exports=l;var a,h=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:g.nextTick;l.WritableState=c;var r=E(54);r.inherits=E(38);var o,i={deprecate:E(354)},s=E(169),m=E(116).Buffer,_=n.Uint8Array||function(){},u=E(170);function b(){}function c(t,e){a=a||E(46),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=t.writableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n,r,o,i,s,a,u=t._writableState,c=u.sync,l=u.writecb;if((a=u).writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,e)n=t,o=c,i=e,s=l,--(r=u).pendingcb,o?(g.nextTick(s,i),g.nextTick(I,n,r),n._writableState.errorEmitted=!0,n.emit("error",i)):(s(i),n._writableState.errorEmitted=!0,n.emit("error",i),I(n,r));else{var d=v(u);d||u.corked||u.bufferProcessing||!u.bufferedRequest||p(t,u),c?h(f,t,u,d,l):f(t,u,d,l)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function l(t){if(a=a||E(46),!(o.call(l,this)||this instanceof a))return new l(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function w(t,e,n,r,o,i,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function f(t,e,n,r){var o,i;n||(o=t,0===(i=e).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),e.pendingcb--,r(),I(t,e)}function p(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),i=e.corkedRequestsFree;i.entry=n;for(var s=0,a=!0;n;)(o[s]=n).isBuf||(a=!1),n=n.next,s+=1;o.allBuffers=a,w(t,e,!0,e.length,o,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new d(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,l=n.callback;if(w(t,e,!1,e.objectMode?1:u.length,u,c,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function y(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),I(e,n)})}function I(t,e){var n,r,o=v(e);return o&&(n=t,(r=e).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,g.nextTick(y,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),o}r.inherits(l,s),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===l&&t&&t._writableState instanceof c}})):o=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,n){var r,o,i,s,a,u,c,l,d,h,f,p=this._writableState,v=!1,y=!p.objectMode&&(r=t,m.isBuffer(r)||r instanceof _);return y&&!m.isBuffer(t)&&(f=t,t=m.from(f)),"function"==typeof e&&(n=e,e=null),e=y?"buffer":e||p.defaultEncoding,"function"!=typeof n&&(n=b),p.ended?(l=this,d=n,h=new Error("write after end"),l.emit("error",h),g.nextTick(d,h)):(y||(o=this,i=p,a=n,c=!(u=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||i.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),g.nextTick(a,c),u=!1),u))&&(p.pendingcb++,v=function(t,e,n,r,o,i){if(!n){var s=(u=r,c=o,(a=e).objectMode||!1===a.decodeStrings||"string"!=typeof u||(u=m.from(u,c)),u);r!==s&&(n=!0,o="buffer",r=s)}var a,u,c,l=e.objectMode?1:r.length;e.length+=l;var d=e.length<e.highWaterMark;if(d||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,l,r,o,i);return d}(this,p,y,t,e,n)),v},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||p(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r,o,i,s=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||(r=this,i=n,(o=s).ending=!0,I(r,o),i&&(o.finished?g.nextTick(i):r.once("finish",i)),o.ended=!0,r.writable=!1)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=u.destroy,l.prototype._undestroy=u.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,E(37),E(352).setImmediate,E(7))},function(t,e,n){"use strict";var r=n(355).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=d,e=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}(e.StringDecoder=i).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},i.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=s(e[r]);return 0<=o?(0<o&&(t.lastNeed=o-1),o):--r<n||-2===o?0:0<=(o=s(e[r]))?(0<o&&(t.lastNeed=o-2),o):--r<n||-2===o?0:0<=(o=s(e[r]))?(0<o&&(2===o?o=0:t.lastNeed=o-3),o):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=i;var r=n(46),o=n(54);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){a(n,t,e)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=n(38),o.inherits(i,r),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(i,t,e){(function(t){var e,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);e=function(){return n.getRandomValues(r),r}}if(!e){var o=new Array(16);e=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}i.exports=e}).call(this,e(7))},function(t,e){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=o;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}},function(t,e,n){"use strict";var r=/.+\@.+\..+/;t.exports=function(t){return r.test(t)}},function(t,E,T){"use strict";(function(l){function t(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function m(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function _(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var r,s,e=T(1),n=T(96),b=T.n(n),o=T(64),a=T.n(o),i=T(97),u=T.n(i),c=T(14),d=T(6),h=T(5),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(){return(w=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=e.b.VERSION_TWO,v=e.a.USER_FIND,y=e.a.USER_FIND_ME,g=new u.a.MD5,I=(s=e.c,f(O,s),O.getSignInAuthHeader=function(t,e,n){var r=[t,e,n].join(":");return"XMPP-Simple "+a()(r)},O.prototype.getAnonymousAuthHeader=function(t){var e=this.config.signUpHashKey,n=this.config.signUpHashSalt,r=[e,n,t].join(":"),o=g.hex(r),i=[o.substr(0,2),o.substr(o.length-2)].join(""),s=[this.config.productKey,e,n,t,i].join(":");return"XMPP-Anonymous "+a()(s)},O.prototype.getSignInAuthHeader=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.constructor).getSignInAuthHeader.apply(t,e)},O.prototype.checkLogin=function(r,o){return m(this,void 0,void 0,function(){var e,n;return _(this,function(t){switch(t.label){case 0:return e={Authorization:this.getAnonymousAuthHeader(o.udid)},n={device:o.udid,tt_product_version:this.config.partnerName},Object(d.isPhone)(r)?n.phones=Object(d.normalizePhoneUS)(r):n.emails=r,[4,this.httpClient.get("/v4/login_check",{headers:e,query:n})];case 1:return[2,t.sent()]}})})},O.prototype.signUp=function(r){return m(this,void 0,void 0,function(){var e,n;return _(this,function(t){switch(t.label){case 0:return e={Authorization:this.getAnonymousAuthHeader(r.udid)},n={primary_email:r.email,unique_id:r.email,password:r.password,push_routing:this.config.pushAgent,product:this.config.productKey,country_code:r.countryCode,device_id:r.udid,version:this.config.version},[4,this.httpClient.post("/v2/signup",{headers:e,data:n})];case 1:return[2,t.sent()]}})})},O.prototype.signIn=function(u,c){return m(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return _(this,function(t){switch(t.label){case 0:return e={device_id:c.udid,metadata:{device_type:"js_sdk",device_version:"12.4.0",tt_product_version:this.config.partnerName,user_agent:l.navigator&&l.navigator.userAgent},push_routing:this.config.pushAgent,version:this.config.version,want_condensed_replays:this.config.wantCondensedReplays,want_processing_events:this.config.wantCondensedReplays},[4,this.httpClient.post("/v5/login",{headers:u,data:e})];case 1:return(n=t.sent()).data&&n.data.settings&&(r=n.data.settings,o=r.condensed_replays,i=void 0!==o&&o,s=r.processing_events,a=void 0!==s&&s,this.host.configure({condensedReplays:i,processingEvents:a})),[2,n]}})})},O.prototype.signOut=function(){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/logout")];case 1:return[2,t.sent()]}})})},O.prototype.lookup=function(o){return m(this,void 0,void 0,function(){var e,n,r;return _(this,function(t){switch(t.label){case 0:return e=s.prototype.getVersion.call(this,v).version,n=void 0===e?p:e,r={display_name:o},Object(c.isEmail)(o)?r.email_address=o:Object(d.isPhone)(o)&&(r.phone_number=Object(d.normalizePhoneUS)(o)),[4,this.httpClient.post("/:version/user_lookup/:id",{urlParams:{id:o,version:n},data:r})];case 1:return[2,t.sent().data]}})})},O.prototype.wipe=function(e){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/wipe",{data:{},query:{token:e}})];case 1:return[2,t.sent()]}})})},O.prototype.find=function(o,t){var i=(void 0===t?{}:t).organizationId;return m(this,void 0,void 0,function(){var e,n,r;return _(this,function(t){switch(t.label){case 0:return e=s.prototype.getVersion.call(this,v).version,n=void 0===e?p:e,Object(c.isEmail)(o)&&(o=o.toLowerCase()),r=i?{"TT-X-Organization-Key":i}:null,[4,this.httpClient.get("/:version/user/:id",{headers:r,urlParams:{id:o,version:n},query:{render_metadata:!0}})];case 1:return[2,t.sent().data]}})})},O.prototype.findMe=function(t){var o=(void 0===t?{}:t).organizationId;return m(this,void 0,void 0,function(){var e,n,r;return _(this,function(t){switch(t.label){case 0:return e=s.prototype.getVersion.call(this,y).version,n=void 0===e?p:e,r=o?{"TT-X-Organization-Key":o}:null,[4,this.httpClient.get("/:version/user",{headers:r,query:{render_metadata:!0},urlParams:{version:n}})];case 1:return[2,t.sent().data]}})})},O.prototype.update=function(r,t){var e=t.firstName,o=void 0===e?void 0:e,n=t.lastName,i=void 0===n?void 0:n,s=t.displayName,a=void 0===s?void 0:s,u=t.status,c=void 0===u?void 0:u,l=t.dnd,d=void 0===l?void 0:l,h=t.dndText,f=void 0===h?void 0:h,p=t.avatarFile,v=void 0===p?void 0:p,y=t.removeAvatar,g=void 0===y?void 0:y;return m(this,void 0,void 0,function(){var e,n;return _(this,function(t){switch(t.label){case 0:return e={},g?e.avatar=null:v&&(e.avatar=v),n=b.a.call({first_name:o,last_name:i,display_name:a,status:c,dnd:d,dnd_text:f},function(t,e){return void 0===t}),[4,this.httpClient.post("/v2/user/:id/settings",{urlParams:{id:r},data:n,files:e})];case 1:return t.sent(),[2,w({id:r},v&&v.preview?{avatarUrl:v.preview}:null)]}})})},O.prototype.updatePassword=function(n,r,o,i){return m(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return e={Authorization:this.getSignInAuthHeader(i,n,r)},[4,this.httpClient.post("/v2/user/:id/password",{urlParams:{id:n},headers:e,data:{password:o}})];case 1:return[2,t.sent()]}})})},O.prototype.setAutoForward=function(e,n,t){var r=t.dnd,o=t.receiverId;return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/organization/:organizationId",{urlParams:{userId:e,organizationId:n},data:{dnd:r,dnd_auto_forward_receiver:o}})];case 1:return[2,t.sent()]}})})},O.prototype.removeAutoForward=function(e,n){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/user/:userId/organization/:organizationId/dnd_auto_forward_receiver",{urlParams:{userId:e,organizationId:n}})];case 1:return[2,t.sent()]}})})},O.prototype.setAwayMessage=function(e,n,t){var r=t.dnd,o=t.dndText;return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/user/:userId/organization/:organizationId",{urlParams:{userId:e,organizationId:n},data:{network:{patient:{dnd:r,dnd_text:o}}}})];case 1:return t.sent(),[2]}})})},O.prototype.setEulaAccepted=function(e,n,r){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/organization/:organizationId",{urlParams:{userId:e,organizationId:n},data:{eula:!r}})];case 1:return[2,t.sent()]}})})},O.prototype.getPreferences=function(e){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v2/user/:userId/preferences",{urlParams:{userId:e}})];case 1:return[2,t.sent().data]}})})},O.prototype.editPreferences=function(t){var e=t.organizationId,n=t.quickReplies,r=t.userId;return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/preferences",{headers:{"TT-X-Organization-Key":e},data:h.a.underscoreObject({quickReplies:n}),urlParams:{userId:r}})];case 1:return[2,t.sent().data]}})})},t([Object(e.d)({httpStatusCodes:[400]})],O.prototype,"lookup",null),t([Object(e.d)()],O.prototype,"find",null),t([Object(e.d)()],O.prototype,"getPreferences",null),t([Object(e.d)()],O.prototype,"editPreferences",null),O);function O(){return null!==s&&s.apply(this,arguments)||this}E.a=I}).call(this,T(7))},function(t,e,n){var r=n(179),o=n(180),i=n(182),s=n(183),a=n(184);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(79),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(79);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(79);t.exports=function(t){return-1<r(this.__data__,t)}},function(t,e,n){var o=n(79);t.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var s=n(372),a=n(189);t.exports=function t(e,n,r,o,i){return e===n||(null==e||null==n||!a(e)&&!a(n)?e!=e&&n!=n:s(e,n,r,o,t,i))}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(e,n){return function(t){return e(n(t))}}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(119);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||n.test(t))&&-1<t&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(400);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(82);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(126),o=Math.min;t.exports=function(t){return 0<t?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(20),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";function _(){return this}var b=n(204),w=n(47),I=n(417),O=n(48),E=n(81),T=n(61),S=n(418),A=n(129),C=n(421),R=n(21)("iterator"),P=!([].keys&&"next"in[].keys());t.exports=function(t,e,n,r,o,i,s){S(n,e,r);function a(t){if(!P&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}}var u,c,l,d=e+" Iterator",h="values"==o,f=!1,p=t.prototype,v=p[R]||p["@@iterator"]||o&&p[o],y=v||a(o),g=o?h?a("entries"):y:void 0,m="Array"==e&&p.entries||v;if(m&&(l=C(m.call(new t)))!==Object.prototype&&l.next&&(A(l,d,!0),b||E(l,R)||O(l,R,_)),h&&v&&"values"!==v.name&&(f=!0,y=function(){return v.call(this)}),b&&!s||!P&&!f&&p[R]||O(p,R,y),T[e]=y,T[d]=_,o)if(u={values:h?y:a("values"),keys:i?y:a("keys"),entries:g},s)for(c in u)c in p||I(p,c,u[c]);else w(w.P+w.F*(P||f),e,u);return u}},function(t,e){t.exports=!0},function(t,e,n){var r=n(20).document;t.exports=r&&r.documentElement},function(t,e,n){var o=n(82),i=n(21)("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:s?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var o=n(39),i=n(84),s=n(21)("species");t.exports=function(t,e){var n,r=o(t).constructor;return void 0===r||null==(n=o(r)[s])?e:i(n)}},function(t,e,n){function r(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}}function o(t){r.call(t.data)}var i,s,a,u=n(83),c=n(432),l=n(205),d=n(128),h=n(20),f=h.process,p=h.setImmediate,v=h.clearImmediate,y=h.MessageChannel,g=h.Dispatch,m=0,_={};p&&v||(p=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return _[++m]=function(){c("function"==typeof t?t:Function(t),e)},i(m),m},v=function(t){delete _[t]},"process"==n(82)(f)?i=function(t){f.nextTick(u(r,t,1))}:g&&g.now?i=function(t){g.now(u(r,t,1))}:y?(a=(s=new y).port2,s.port1.onmessage=o,i=u(a.postMessage,a,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(i=function(t){h.postMessage(t+"","*")},h.addEventListener("message",o,!1)):i="onreadystatechange"in d("script")?function(t){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),r.call(t)}}:function(t){setTimeout(u(r,t,1),0)}),t.exports={set:p,clear:v}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(39),o=n(59),i=n(130);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!==t&&"object"===r(t)}},function(t,e,n){var r=n(213);t.exports=function(t,e){return!(null==t||!t.length)&&-1<r(t,e,0)}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var c=n(456),l=n(457);t.exports=function t(e,n,r,o,i){var s=-1,a=e.length;for(r=r||l,i=i||[];++s<a;){var u=e[s];0<n&&r(u)?1<n?t(u,n-1,r,o,i):c(i,u):o||(i[i.length]=u)}return i}},function(t,e,n){var r=n(459),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(){return!1}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var u=n(461),c=Math.max;t.exports=function(i,s,a){return s=c(void 0===s?i.length-1:s,0),function(){for(var t=arguments,e=-1,n=c(t.length-s,0),r=Array(n);++e<n;)r[e]=t[s+e];e=-1;for(var o=Array(s+1);++e<s;)o[e]=t[e];return o[s]=a(r),u(i,this,o)}}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(463),o=n(224);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(89),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(89);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(89);t.exports=function(t){return-1<r(this.__data__,t)}},function(t,e,n){var o=n(89);t.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var o=n(232),i=n(227),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var r=t[e];s.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}},function(t,e,n){var r=n(472);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(137)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(137)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){t.exports=function(){return!1}},function(t,e,n){var s=n(509),a=n(133);t.exports=function t(e,n,r,o,i){return e===n||(null==e||null==n||!a(e)&&!a(n)?e!=e&&n!=n:s(e,n,r,o,t,i))}},function(t,e,n){var r=n(87);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}}},function(t,e,n){var r=n(186);t.exports=function(t,e){return!(null==t||!t.length)&&-1<r(t,e,0)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){t.exports=n(559)},function(t,e,n){var r,o,i;r=this,o=-1,i={onVisible:function(n){var t=i.isSupported();if(!t||!i.hidden())return n(),t;var r=i.change(function(t,e){i.hidden()||(i.unbind(r),n())});return r},change:function(t){if(!i.isSupported())return!1;var e=o+=1;return i._callbacks[e]=t,i._listen(),e},unbind:function(t){delete i._callbacks[t]},afterPrerendering:function(n){var t=i.isSupported();if(!t||"prerender"!=i.state())return n(),t;var r=i.change(function(t,e){"prerender"!=e&&(i.unbind(r),n())});return r},hidden:function(){return!(!i._doc.hidden&&!i._doc.webkitHidden)},state:function(){return i._doc.visibilityState||i._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==i._doc.hidden||void 0!==i._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(t){var e=i.state();for(var n in i._callbacks)i._callbacks[n].call(i._doc,t,e)},_listen:function(){if(!i._init){var t="visibilitychange";i._doc.webkitVisibilityState&&(t="webkit"+t);function e(){i._change.apply(i,arguments)}i._doc.addEventListener?i._doc.addEventListener(t,e):i._doc.attachEvent(t,e),i._init=!0}}},t.exports?t.exports=i:r.Visibility=i},function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o="undefined"!=typeof window?window:"undefined"==typeof self?void console.warn("Using browser-only version of superagent in non-browser environment"):self;var i=e(448),s=e(449),a=e(450),u=e(211),c=e(451),l=e(453);function d(){}t.exports=function(t,e){return"function"==typeof e?new n.Request("GET",t).end(e):1===arguments.length?new n.Request("GET",t):new n.Request(t,e)};var h=n=t.exports;n.Request=_,h.getXHR=function(){if(o.XMLHttpRequest&&(!o.location||"file:"!==o.location.protocol||!o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var f="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function p(t){if(!u(t))return t;var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&v(e,n,t[n]);return e.join("&")}function v(e,n,t){if(void 0!==t)if(null!==t)if(Array.isArray(t))t.forEach(function(t){v(e,n,t)});else if(u(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&v(e,"".concat(n,"[").concat(r,"]"),t[r]);else e.push(encodeURIComponent(n)+"="+encodeURIComponent(t));else e.push(encodeURIComponent(n))}function y(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;i<s;++i)-1===(n=(e=o[i]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function g(t){return/[/+]json($|[^-\w])/.test(t)}function m(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,n,r,o,i=t.split(/\r?\n/),s={},a=0,u=i.length;a<u;++a)-1!==(e=(n=i[a]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),o=f(n.slice(e+1)),s[r]=o);return s}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function _(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,n=null;try{n=new m(r)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,r.xhr?(e.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,e.status=r.xhr.status?r.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),r.callback(e)}r.emit("response",n);try{r._isResponseOK(n)||(t=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=n,t.status=n.status,r.callback(t,n)):r.callback(null,n)})}function b(t,e,n){var r=h("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}h.serializeObject=p,h.parseString=y,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":p,"application/json":s},h.parse={"application/x-www-form-urlencoded":y,"application/json":JSON.parse},c(m.prototype),m.prototype._parseBody=function(t){var e=h.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&g(this.type)&&(e=h.parse["application/json"]),e&&t&&(0<t.length||t instanceof Object)?e(t):null)},m.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot ".concat(e," ").concat(n," (").concat(this.status,")"),o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},h.Response=m,i(_.prototype),a(_.prototype),_.prototype.type=function(t){return this.set("Content-Type",h.types[t]||t),this},_.prototype.accept=function(t){return this.set("Accept",h.types[t]||t),this},_.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"===r(e)&&null!==e&&(n=e,e=""),n=n||{type:"function"==typeof btoa?"basic":"auto"};return this._auth(t,e,n,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},_.prototype.query=function(t){return"string"!=typeof t&&(t=p(t)),t&&this._query.push(t),this},_.prototype.attach=function(t,e,n){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},_.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},_.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},_.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},_.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},_.prototype.buffer=_.prototype.ca,_.prototype.ca=_.prototype.agent,_.prototype.pipe=_.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},_.prototype._isHost=function(t){return t&&"object"===r(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},_.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||d,this._finalizeQueryString(),this._end()},_.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},_.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var n=this;this.xhr=h.getXHR();var r=this.xhr,t=this._formData||this._data;this._setTimeouts(),r.onreadystatechange=function(){var t=r.readyState;if(2<=t&&n._responseTimeoutTimer&&clearTimeout(n._responseTimeoutTimer),4===t){var e;try{e=r.status}catch(t){e=0}if(!e){if(n.timedout||n._aborted)return;return n.crossDomainError()}n.emit("end")}};function e(t,e){0<e.total&&(e.percent=e.loaded/e.total*100,100===e.percent&&clearTimeout(n._uploadTimeoutTimer)),e.direction=t,n.emit("progress",e)}if(this.hasListeners("progress"))try{r.addEventListener("progress",e.bind(null,"download")),r.upload&&r.upload.addEventListener("progress",e.bind(null,"upload"))}catch(n){}r.upload&&this._setUploadTimeout();try{this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0)}catch(n){return this.callback(n)}if(this._withCredentials&&(r.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof t&&!this._isHost(t)){var o=this._header["content-type"],i=this._serializer||h.serialize[o?o.split(";")[0]:""];!i&&g(o)&&(i=h.serialize["application/json"]),i&&(t=i(t))}for(var s in this.header)null!==this.header[s]&&Object.prototype.hasOwnProperty.call(this.header,s)&&r.setRequestHeader(s,this.header[s]);this._responseType&&(r.responseType=this._responseType),this.emit("request",this),r.send(void 0===t?null:t)},h.agent=function(){return new l},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(r){l.prototype[r.toLowerCase()]=function(t,e){var n=new h.Request(r,t);return this._setDefaults(n),e&&n.end(e),n}}),l.prototype.del=l.prototype.delete,h.get=function(t,e,n){var r=h("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},h.head=function(t,e,n){var r=h("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},h.options=function(t,e,n){var r=h("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},h.del=b,h.delete=b,h.patch=function(t,e,n){var r=h("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},h.post=function(t,e,n){var r=h("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},h.put=function(t,e,n){var r=h("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e,n){var r=n(454),o=n(216),i=n(460),s=n(462),a=i(function(t,e){return s(t)?r(t,o(e,1,s,!0)):[]});t.exports=a},function(t,e,n){var i=n(215),s=n(470),a=n(490),u=n(88),c=n(63),l=n(494),r=n(496),d=n(234),o=r(function(e,t){var n={};if(null==e)return n;var r=!1;t=i(t,function(t){return t=u(t,e),r=r||1<t.length,t}),c(e,d(e),n),r&&(n=s(n,7,l));for(var o=t.length;o--;)a(n,t[o]);return n});t.exports=o},function(t,e,n){var r=n(498)(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});t.exports=r},function(t,e,n){"use strict";var r=n(537);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(566);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(570);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,N,z){"use strict";(function(A){var t=z(2),C=z.n(t),e=z(253),o=z.n(e),n=z(40),i=z.n(n),r=z(254),s=z.n(r),a=z(30),u=z.n(a),c=z(255),l=z.n(c),d=z(12),h=z.n(d),f=z(67),p=z.n(f),v=z(98),y=z.n(v),g=z(11),m=z.n(g),_=z(4),b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},w={computed:{},defaultValues:null,idAttribute:"id",methods:{},parseAttrs:C.a.identity,relations:{belongsTo:{},hasMany:{}}},R=Symbol("NOT_PROVIDED"),I=0,P={initRelations:!(A.duplicateDebug={initRelations:{},outOfOrderElements:[],setHighestSortNumber:{conversationId:null},updateRelations:{}}),updateRelationsAdd:!1,updateRelationsRemove:!1};function j(t,e){return"organization"===t&&"conversations"===e}function x(t,e,n){for(var r=(void 0===n?{}:n).previousValue,o=[],i={},s=[],a=0,u=!1,c=1/0,l=0;l<t.length;l++){var d=t[l],h=d._origIndex,f=d.id,p=d.highestSortNumber,v={_origIndex:h,id:f,highestSortNumber:p,sortNumber:d.sortNumber};if(o.push(v),i[f]=(i[f]||0)+1,1<i[f]&&a++,r&&r.id===f&&r.highestSortNumber===p&&c<p||!r&&c<p){u=!0;var y=t[l-1],g=y._origIndex,m=y.id,_=y.highestSortNumber,b=y.sortNumber;s.push({_origIndex:g,id:m,highestSortNumber:_,sortNumber:b}),s.push(v)}c=p}return{copy:o,duplicateCount:a,outOfOrder:u,outOfOrderElements:s}}function M(t,e,n,r,o){for(var i=void 0===o?{}:o,s=i.action,a=i.previousValue,u=i.source,c=[],l={},d=0,h=0,f=n;h<f.length;h++){var p=f[h],v=p._origIndex,y=p.id,g=p.highestSortNumber,m=p.sortNumber;c.push({_origIndex:v,id:y,highestSortNumber:g,sortNumber:m}),l[y]=(l[y]||0)+1,1<l[y]&&d++}return 0<e||0<d?(v=r._origIndex,y=r.id,g=r.highestSortNumber,m=r.sortNumber,console.error(s+"\n"+u+"\nBefore duplicate count: "+e+"\nAfter duplicate count: "+d,"\nBefore elements ("+t.length+"): ",t,"\nAfter elements ("+c.length+"): ",c,"\nElement info: ",{_origIndex:v,id:y,highestSortNumber:g,sortNumber:m}),a&&console.error("Previous value",{_origIndex:a._origIndex,id:a.id,highestSortNumber:a.highestSortNumber,sortNumber:a.sortNumber}),console.log(new Error("Duplicate items stack trace")),{logged:!0,currCopy:c,counts:l}):{logged:!1,currCopy:c,counts:l}}function k(t,e,n,r){var o=void 0===r?{}:r,i=o.action,s=o.previousValue,a=o.source,u=e._origIndex,c=e.id,l=e.highestSortNumber,d=e.sortNumber;0===I&&e.$entityClass.emit("displayInfoDialog","We have automatically corrected a Conversation Store problem, please reach out to Mike O to help us debug it further."),A.duplicateDebug.outOfOrderElements[I]=t,console.error(i+"\n"+a+"\n\nBefore elements (also saved in window.duplicateDebug.outOfOrderElements["+I+++"]): ",t,"\nOut of order elements: ",n,"\nElement info: ",{_origIndex:u,id:c,highestSortNumber:l,sortNumber:d}),s&&console.error("Previous value",{_origIndex:s._origIndex,id:s.id,highestSortNumber:s.highestSortNumber,sortNumber:s.sortNumber}),console.log(new Error("Elements out of order stack trace"))}var O=(E.create=function(t,e,n){return new this(t,e,n)},E.prototype.__initRelations=function(){var r=this,E=this,t=C.a.transform(this.options.relations.belongsTo,function(t,e,n){t[n]={get:function(){return E.store.get(e.type,this[e.foreignKey])},set:function(t){this[e.foreignKey]=E.store.resolveId(e.type,t)}}},{});Object.assign(this.options.computed,t);var e=C.a.transform(this.options.relations.hasMany,function(t,e,m){var _=e.filter,b=e.foreignKey,n=e.sortBy,w=e.type,I=r.__getSorted(n),O=r.options;t[m]={get:function(){if(this.$$transientAttrs.relations||(this.$$transientAttrs.relations={}),this.$$transientAttrs.relations[m])return this.$$transientAttrs.relations[m];var t=[],e=E.store.models[w];if(e.hasManySortFields)for(var n=0,r=e.getAll();n<r.length;n++){var o=r[n];if(o[b]===this[E.idAttribute]&&(!_||_(o,this))){var i=C.a.has(this.previousHasManySortValues,o[this.idAttribute])?this.previousHasManySortValues[o[this.idAttribute]]:R;e.previousHasManySortValues[o[e.idAttribute]]=C.a.pick(o,e.hasManySortFields);var s=O.host,a=[],u=0;if(s.config.condensedReplays&&j(E.name,m)){var c=x(t,0,{previousValue:i===R?void 0:i}),l=c.copy,d=c.duplicateCount,h=c.outOfOrder,f=c.outOfOrderElements;a=l,u=d,h&&(k(a,o,f,{action:"__initRelations - "+(i===R?"sorted.add":"sorted.update"),previousValue:i===R?void 0:i,source:"Elements are out of order in "+E.name+"."+m}),t.sort(I.cmp))}if(i===R?I.add(t,o):I.update(t,o,{previousValue:i}),s.config.condensedReplays&&!P.initRelations&&j(E.name,m)){var p=M(a,u,t,o,{action:"__initRelations - "+(i===R?"sorted.add":"sorted.update"),previousValue:i===R?void 0:i,source:"There are duplicates in "+E.name+"."+m}),v=p.logged,y=p.currCopy,g=p.counts;(P.initRelations=v)&&(A.duplicateDebug.initRelations={beforeElements:a,afterElements:y,counts:g})}}}return this.$$transientAttrs.relations[m]=t},set:function(t){}}},{});Object.assign(this.options.computed,e)},E.prototype.__getSorted=function(t){void 0===t&&(t=[[this.idAttribute,"asc"]]);var e=Object(_.j)(t);return new _.b(e)},E.prototype.__initTransientAttrs=function(){var t=this,e=this,r={$$transientAttrs:{enumerable:!1,get:function(){var t=this[e.idAttribute];return e.transientAttrsStore[t]||(e.transientAttrsStore[t]={})}}},o={};this.options.transientAttrs&&this.options.transientAttrs.forEach(function(n){t.options.defaultValues&&n in t.options.defaultValues&&(o[n]=Object(_.l)(t.options.defaultValues[n]),delete t.options.defaultValues[n]),r[n]={get:function(){return n in this.$$transientAttrs?this.$$transientAttrs[n]:n in o?this.$$transientAttrs[n]=o[n]:void 0},set:function(t){var e=A.duplicateDebug.setHighestSortNumber;"conversation"!==this.$entityType||"highestSortNumber"!==n||Object.isFrozen(e)||(e.conversationId=this.id,e.highestSortNumber=t,e.stackTrace=new Error("Set Conversation.highestSortNumber")),this.$$transientAttrs[n]=t}}}),Object.assign(this.options.computed,r)},E.prototype.createInstance=function(t,e){void 0===e&&(e=!0),e&&(t=this.parseAttrs(t));var n=t[this.idAttribute];if(this.entitiesById[n]||this.entitiesByServerId[n])throw new Error("called createInstance on an existing instance");return this.__wireInstance(t)},E.prototype.__wireInstance=function(e){var o=this;this.options.defaultValues&&C.a.defaults(e,Object(_.l)(this.options.defaultValues));var n={};this._writablePropertyKeys.forEach(function(t){Object(_.k)(e,t)&&(n[t]=e[t],delete e[t])}),Object.defineProperties(e,this.options.computed),Object.assign(e,n),this.options.instanceEvents&&Object.assign(e,m.a.prototype),Object.assign(e,this.options.methods),Object.assign(e,{toPlainObject:function(t){var e=this,n={};o._computedKeys.forEach(function(t){return n[t]=e[t]});var r=Object.assign({},this,n);return delete r.setMaxListeners,delete r.emit,delete r.addListener,delete r.on,delete r.once,delete r.removeListener,delete r.removeAllListeners,delete r.listeners,delete r.listenerCount,delete r.off,delete r.toPlainObject,delete r._events,delete r._maxListeners,r}});var t=e[this.idAttribute];return!t||"serverId"in e||(e.serverId=t),this.options.beforeCreateInstance&&this.options.beforeCreateInstance(e),e},E.prototype.inject=function(t){var e,n;if(this.is(t)){if(n=t,e=this.resolveId(n),this.entitiesById[e]){if(this.__beforeInject(n),this.__register(e,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),"conversation"===n.$entityType){var r=A.duplicateDebug.setHighestSortNumber;Object.isFrozen(r)||null===r.conversationId||(r.conversationId!==n.id?(Object.freeze(r),console.error("Injected a different conversation after setting Conversation.highestSortNumber.\nCheck `window.duplicateDebug.setHighestSortNumber` for details.")):r.conversationId=null)}return n}Object.isFrozen(A.duplicateDebug.setHighestSortNumber)||"conversation"!==n.$entityType||(A.duplicateDebug.setHighestSortNumber.conversationId=null)}if(!n&&(t=this.parseAttrs(t),e=this.resolveId(t),!this.isValidId(e)))throw new Error("'"+this.idAttribute+"' is required");var o=!1,i=this.entitiesById[e]||this.entitiesByServerId[e];return n?(i||(o=!0),this.__beforeInject(n)):i?(n=i,this.__beforeInject(t,n),Object.assign(n,t)):(o=!0,n=this.__wireInstance(t),this.__beforeInject(n)),this.__register(e,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),o&&(this.options.afterCreate&&this.options.afterCreate(n),this.emit("afterCreate",this,n)),n},E.prototype.__beforeInject=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1];!o||"serverId"in r||(r.serverId=o.serverId),this.options.beforeInject&&(t=this.options).beforeInject.apply(t,e),this.emit("beforeInject",this,r)},E.prototype.replaceExisting=function(t,e){var n=(void 0===e?{}:e).instance,r=this.options.idAttribute;if(this.is(t))throw new Error("cannot call replaceExisting() on an instance; should be plain object");if(n&&!this.is(n))throw new Error("provided 'instance' option is not an instance of this model");t=this.parseAttrs(t);var o=this.resolveId(t);if(!this.isValidId(o))throw new Error("'"+r+"' is required");var i,s=o;if(n){var a=this.resolveId(n);s!==a&&(this.entitiesById[s]?(this.eject(n),n=null):s=a)}if(n||(n=this.entitiesById[s]||this.entitiesByServerId[s])&&(s=n[r]),n){var u={};for(var c in t)u[c]=!0;this.__beforeInject(t,n);for(var l=0,d=Object.getOwnPropertyNames(n);l<d.length;l++){var h=d[l];!u[h]&&Object(_.k)(n,h)&&delete n[h]}Object.assign(n,t),n[r]=s,n.serverId=o,this.__wireInstance(n)}else i=!0,n=this.__wireInstance(t),this.__beforeInject(n);return this.__register(s,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),i&&(this.options.afterCreate&&this.options.afterCreate(n),this.emit("afterCreate",this,n)),n},E.prototype.eject=function(t){t=this.resolveId(t);var e=this.entitiesById[t]||this.entitiesByServerId[t];e&&(this.emit("beforeEject",this,e),this.__removeFromHasManyRelationships(e),this.__unregister(t,e),this.emit("afterEject",this,e))},E.prototype.__register=function(t,e){this.entitiesById[t]!==e&&(this.entitiesById[t]=e,this.entitiesList.push(e));var n=this.previousServerIds[t],r=e.serverId;n&&n!==r&&(delete this.entitiesByServerId[n],r===t?delete this.previousServerIds[t]:(this.entitiesByServerId[r]=e,this.previousServerIds[t]=r)),n||r===t||(this.entitiesByServerId[r]=e,this.previousServerIds[t]=r)},E.prototype.__unregister=function(t,e){delete this.entitiesById[t],C.a.pull(this.entitiesList,e),t in this.transientAttrsStore&&delete this.transientAttrsStore[t];var n=this.previousServerIds[t];n&&(delete this.entitiesByServerId[n],delete this.previousServerIds[t])},E.prototype.injectPlaceholder=function(t){var e=t.token||t[this.idAttribute];if(this.get(e))return this.inject(t);var n=this.createInstance(t);return Object.defineProperty(n,"$placeholder",{value:!0,configurable:!0}),this.inject(n)},E.prototype.removePlaceholder=function(t){var e=t.entity,n=t.attrs;e&&e.$placeholder&&(n?(delete e.$placeholder,delete e.$notFound):Object.defineProperty(e,"$notFound",{value:!0,configurable:!0}),this.inject(e))},E.prototype.touch=function(t){var e;t=this.resolveId(t),(this.entitiesById[t]||this.entitiesByServerId[t])&&this.inject(((e={})[this.idAttribute]=t,e))},E.prototype.__addToHasManyRelationships=function(t){this.__updateRelationsIfNeeded(t,"add")},E.prototype.__removeFromHasManyRelationships=function(t){this.__updateRelationsIfNeeded(t,"remove")},E.prototype.__updateRelationsIfNeeded=function(O,E){var T=this,t=this.store.getParentRelationshipsOfModel(this.name);if(t){this.hasManySortFields||(this.hasManySortFields=h.a.call(i.a.call(t.map(function(t){var e=t.sortBy;return e&&e.map(function(t){return t[0]})}).filter(Boolean)).concat([this.idAttribute])));var S=C.a.has(this.previousHasManySortValues,O[this.idAttribute])?this.previousHasManySortValues[O[this.idAttribute]]:R;this.previousHasManySortValues[O[this.idAttribute]]=C.a.pick(O,this.hasManySortFields),t.forEach(function(t){var e=t.filter,n=t.foreignKey,r=t.relationKey,o=t.sortBy,i=t.sorted,s=T.store.get(t.parent,O[n]);if(s&&s.$$transientAttrs.relations&&s.$$transientAttrs.relations[r]){var a=!1;if("remove"===E||e&&!e(O,s))if(o){var u=[],c=0;if((b=T.options.host).config.condensedReplays&&j(t.parent,r)){var l=x(s[r],0,{previousValue:S===R?void 0:S}),d=l.copy,h=l.duplicateCount,f=l.outOfOrder,p=l.outOfOrderElements;u=d,c=h,f&&(k(u,O,p,{action:"__updateRelationsIfNeeded action:remove - sorted.remove",previousValue:S===R?void 0:S,source:"Elements are out of order in "+t.parent+"."+r}),s[r].sort(i.cmp))}if(a=S===R?i.remove(s[r],O):i.remove(s[r],O,{previousValue:S}),b.config.condensedReplays&&!P.updateRelationsRemove&&j(t.parent,r)){var v=M(u,c,s[r],O,{action:"__updateRelationsIfNeeded action:remove - sorted.remove",previousValue:S===R?void 0:S,source:"There are duplicates in "+t.parent+"."+r}),y=v.logged,g=v.currCopy,m=v.counts;(P.updateRelationsRemove=y)&&(A.duplicateDebug.updateRelations.remove={beforeElements:u,afterElements:g,counts:m})}}else{var _=s[r].indexOf(O);-1!==_&&(s[r].splice(_,1),a=!0)}else if("add"===E)if(o){var b;if(u=[],c=0,(b=T.options.host).config.condensedReplays&&j(t.parent,r)){var w=x(s[r],0,{previousValue:S===R?void 0:S});d=w.copy,h=w.duplicateCount,f=w.outOfOrder,p=w.outOfOrderElements,u=d,c=h,f&&(k(u,O,p,{action:"__updateRelationsIfNeeded action:add - sorted.update",previousValue:S===R?void 0:S,source:"Elements are out of order in "+t.parent+"."+r}),s[r].sort(i.cmp))}if(a=S===R?i.update(s[r],O):i.update(s[r],O,{previousValue:S}),b.config.condensedReplays&&!P.updateRelationsAdd&&j(t.parent,r)){var I=M(u,c,s[r],O,{action:"__updateRelationsIfNeeded action:add - sorted.update",previousValue:S===R?void 0:S,source:"There are duplicates in "+t.parent+"."+r});y=I.logged,g=I.currCopy,m=I.counts,(P.updateRelationsAdd=y)&&(A.duplicateDebug.updateRelations.add={beforeElements:u,afterElements:g,counts:m})}}else s[r].includes(O)||(s[r].push(O),a=!0);s.$$transientAttrs.$$wasUpdatedByRelation||(s.$$transientAttrs.$$wasUpdatedByRelation=a)}})}},E.prototype.ejectAll=function(){for(;0<this.entitiesList.length;)this.eject(this.entitiesList[0])},E.prototype.parseAttrs=function(t){var e=this,n=C.a.pickBy(t,function(t){return e.store.isEntity(t)||e.store.isEntityArray(t)}),r=C.a.pick(t,this.options.transientAttrs),o=C.a.omit(t,Object.keys(n),this.options.transientAttrs),i=this.options.parseAttrs(Object(_.l)(o));return b(b(b({},i),n),r)},E.prototype.getAll=function(){return this.entitiesList},E.prototype.getMulti=function(t){return t.map(this.get)},E.prototype.resolveId=function(t){return this.isValidId(t)?t:t[this.idAttribute]},E.prototype.isValidId=function(t){return"string"==typeof t||"number"==typeof t},E.prototype.is=function(t){return t&&t.$entityClass===this},E);function E(t,e,n){var r=this;void 0===n&&(n={}),this.get=function(t){return r.entitiesById[t]||r.entitiesByServerId[t]||null},this.options=C.a.defaultsDeep({},n,w),this.idAttribute=this.options.idAttribute,this.name=e,this.store=t,this.entitiesById={},this.entitiesByServerId={},this.entitiesList=[],this.hasManySortFields=null,this.previousHasManySortValues={},this.previousServerIds={},this.transientAttrsStore={},this.options.relations&&this.__initRelations(),this.__initTransientAttrs(),Object.assign(this.options.computed,{$entityType:{enumerable:!0,value:e,writable:!1},$entityClass:{enumerable:!1,value:this,writable:!1}}),this.options.computed=C.a.transform(this.options.computed,function(t,e,n){t[n]="function"==typeof e?{get:e,enumerable:!1}:e},{}),this._computedKeys=y.a.call(s.a.call(this.options.computed),"$entityType","$entityClass","$$transientAttrs"),this._writablePropertyKeys=u.a.call(o.a.call(l.a.call(this.options.computed),function(t){return t[1].set}),C.a.first),this._relationKeys=i.a.call(u.a.call(p.a.call(this.options.relations),C.a.keys))}Object.assign(O.prototype,m.a.prototype);var T=(S.prototype.defineModel=function(i,t){var s=this;if(void 0===t&&(t={}),this.models[i])throw new Error(i+" already defined");t=b(b({},this.options),t),this.models[i]=O.create(this,i,t);var e=this.models[i].options.relations.hasMany;return C.a.isEmpty(e)||C.a.each(e,function(t,e){var n=t.sortBy,r=t.type,o=s.models[i].__getSorted(n);s.__relationsOfHasManyByContainedItem[r]||(s.__relationsOfHasManyByContainedItem[r]=[]),s.__relationsOfHasManyByContainedItem[r].push(b(b({},t),{relationKey:e,sorted:o,parent:i}))}),this.models[i]},S.prototype.getParentRelationshipsOfModel=function(t){return this.__relationsOfHasManyByContainedItem[t]},S.prototype.isEntity=function(t){return t&&t.$entityClass&&t.$entityClass.constructor===O},S.prototype.isEntityArray=function(t){return t&&Array.isArray(t)&&t.some(this.isEntity)},S.prototype.clear=function(){C.a.values(this.models).forEach(function(t){return t.ejectAll()})},S);function S(t){var i=this;void 0===t&&(t={}),this.options=t,this.models={},this.__relationsOfHasManyByContainedItem={},["filter","get","getAll","inject","injectPlaceholder","is","resolveId"].forEach(function(o){i[o]=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=i.models[t])[o].apply(e,n)}})}N.a=T}).call(this,z(7))},function(t,e,n){"use strict";var r=n(574);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(56);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(577);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t){t.exports=JSON.parse('{"name":"tigerconnect","private":true,"version":"12.4.0","description":"JS (web and node) SDK for TigerConnect","homepage":"https://tigerconnect.github.io/js-sdk/","repository":"tigerconnect/js-sdk","author":{"name":"TigerConnect Developers","email":"developersupport@tigerconnect.com","url":"https://tigerconnect.github.io/js-sdk/"},"main":"lib/index.js","keywords":["tigerconnect","tigertext","communications","messenger","sdk"],"scripts":{"build:clean":"rimraf lib dist","build:js":"babel -d lib/ src/","build:travis":"run-s lint coverage:test build","build:webpack":"webpack","build:webpack:node":"webpack --target node","build":"run-p build:clean build:webpack","build:node":"run-s build:webpack:node","coverage":"run-s coverage:clean coverage:test coverage:report:html","coverage:check":"nyc check-coverage","coverage:clean":"rimraf .nyc_output","coverage:open":"open-cli coverage/index.html","coverage:report":"run-s coverage:report:*","coverage:report:codecov":"nyc report --reporter=lcov > coverage.lcov && codecov","coverage:report:html":"rimraf coverage && nyc report --reporter=html","coverage:test":"cross-env jest --collectCoverage test/**/*.test.ts  > coverage.lcov && codecov","coverage:travis":"run-s coverage:test coverage:report coverage:check","deploy:docs":"gulp npm:publish:docs:prepare","deps":"npm-check -s","deps:update":"npm-check -u","lint":"eslint ./src --ext .js,.ts,.tsx","lint:fix":"eslint ./src --ext .js,.ts,.tsx --fix","test":"mocha \\"test/**/*.test.js\\"","watch":"run-s build:clean && gulp build:js && run-p watch:js watch:webpack","watch:js":"gulp watch:js","watch:test":"npm test -- -w","watch:webpack":"webpack --watch","test:jest":"jest test/**/*.test.ts --watch","tsc":"tsc --project tsconfig.json"},"husky":{"hooks":{"pre-commit":"lint-staged","pre-push":"./hooks/pre-push"}},"lint-staged":{"*":["pretty-quick --staged"]},"jest":{"collectCoverageFrom":["src/**/*.ts","!<rootDir>/node_modules/**","!<rootDir>/src/**/*.d.ts"],"coverageThreshold":{"global":{"statements":10,"branches":3,"lines":11,"functions":12}}},"dependencies":{"@tigerconnect/node-fetch":"^2.6.0-tc1","@types/node":"^14.11.5","abortcontroller-polyfill":"^1.3.0","btoa":"^1.1.2","events":"^3.1.0","file-saver":"^1.3.3","file-type":"^4.0.0","humanize-list":"^1.0.1","invariant":"^2.2.2","is-email":"^1.0.0","jshashes":"^1.0.7","lodash":"^4.17.15","lodash-bound":"^1.1.2","lodash.throttle":"^4.1.1","maltypart":"^1.5.0","mime":"^1.6.0","moment":"^2.24.0","promise":"^8.0.3","raf":"^3.4.0","request":"^2.88.0","reuse-promise":"^1.1.0","shallowequal":"^0.2.2","sorted-array-functions":"^1.1.0","superagent":"^5.1.0","superagent-prefix":"0.0.2","tslint":"^6.1.3","uuid":"^3.0.0","visibilityjs":"^2.0.2"},"devDependencies":{"@babel/core":"^7.11.6","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-proposal-decorators":"^7.10.5","@babel/plugin-proposal-function-bind":"^7.11.5","@babel/plugin-proposal-object-rest-spread":"^7.11.0","@babel/plugin-syntax-flow":"^7.10.4","@babel/plugin-transform-flow-strip-types":"^7.10.4","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","@babel/preset-es2015":"^7.0.0-beta.53","@babel/preset-typescript":"^7.10.4","@babel/register":"^7.11.5","@types/events":"^3.0.0","@types/jest":"^26.0.14","@types/lodash":"^4.14.161","@types/twilio-video":"^2.7.1","@typescript-eslint/eslint-plugin":"^4.3.0","@typescript-eslint/parser":"^4.3.0","assets-webpack-plugin":"^4.0.0","awesome-typescript-loader":"^5.2.1","babel-eslint":"^10.1.0","babel-jest":"^26.3.0","babel-loader":"^8.1.0","babel-plugin-istanbul":"^6.0.0","busboy":"^0.2.14","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-deep-match":"^1.2.1","codecov":"^3.6.5","core-js":"^3.2.1","cross-env":"^3.2.4","decache":"^4.1.0","dom-storage":"^2.0.2","eslint":"^7.10.0","eslint-config-prettier":"^6.11.0","eslint-config-react-app":"^5.2.1","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-import":"^2.22.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-prettier":"^3.1.4","eslint-plugin-react":"^7.21.2","eslint-plugin-react-hooks":"^4.1.2","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-changed":"^4.0.1","gulp-debug":"^4.0.0","gulp-file":"^0.4.0","gulp-if":"^3.0.0","gulp-load-plugins":"^2.0.1","gulp-plumber":"^1.2.1","gulp-uglify":"^3.0.2","gulp-watch":"^5.0.1","husky":"^3.0.3","jest":"^26.4.2","jsdom":"^15.1.1","jsdom-global":"^3.0.2","json-loader":"^0.5.4","lint-staged":"^10.3.0","lodash-webpack-plugin":"^0.11.2","mocha":"^7.2.0","mocha-clean":"^1.0.0","nock":"^9.0.2","npm-check":"^5.9.0","npm-run-all":"^4.0.2","nyc":"^15.1.0","open-cli":"^5.0.0","performance-now":"^2.0.0","prettier":"^2.1.2","pretty-quick":"^3.0.2","promisify-child-process":"^3.1.1","rimraf":"^2.5.4","sinon":"^7.4.1","sinon-chai":"^3.3.0","source-map-loader":"^1.1.0","strip-loader":"^0.1.2","timekeeper":"1.0.0","tslint-loader":"^3.5.4","typescript":"^4.0.3","watch":"^1.0.1","webpack":"^4.44.2","webpack-cli":"^3.3.12","webpack-node-externals":"^1.5.4","yargs":"^6.4.0"},"eslintConfig":{"extends":["react-app","prettier"],"globals":{"__SDK_VERSION__":"readonly","__DEV__":"readonly"},"plugins":["react","prettier"],"rules":{"prettier/prettier":"error"}},"prettier":{"arrowParens":"always","bracketSpacing":true,"jsxBracketSameLine":false,"jsxSingleQuote":false,"printWidth":100,"proseWrap":"always","quoteProps":"as-needed","semi":true,"singleQuote":true,"tabWidth":2,"trailingComma":"es5","useTabs":false},"license":{"type":"Commercial","url":"https://tigerconnect.com/terms/end-user-terms-use-license-agreement/"}}')},function(t,e,n){"use strict";for(var r={},o=0,i=["\n","\r"," ",":"];o<i.length;o++){var s=i[o];r[s]=s.charCodeAt(0)}function a(t){this.type=t,this.target=void 0}function u(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function h(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var c,l,d,f,m=r,p=((c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(A,f=a),A),_=n(8),b=((d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(S,l=a),S),w=-1,I=0,O=1,E=2,T=3,v=/^text\/event-stream?(\s*charset=utf-8)?$/i,y=(g.prototype.start=function(){return u(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d=this;return h(this,function(t){switch(t.label){case 0:if(this.onReadyStateChange(_.a.CONNECTING),this.currentState=_.a.CONNECTING,n=(e=this).url,r=e.withCredentials,"data:"!==n.slice(0,5)&&"blob:"!==n.slice(0,5)&&(n+=-1===n.indexOf("?")?"?":"&",n+="lastEventId="+encodeURIComponent(this.lastEventId)),(o={}).Accept="text/event-stream",this.headers)for(i=0,s=Object.entries(this.headers);i<s.length;i++)a=s[i],u=a[0],c=a[1],o[u]=c;t.label=1;case 1:return t.trys.push([1,3,,4]),this.request=new this.RequestClass({headers:o,onProgress:function(t){return d.onProgress(t)},onStart:function(t){return d.onStart(t)},url:n,withCredentials:r}),[4,this.request.fetch()];case 2:throw t.sent(),new Error("Connection closed by server");case 3:return l=t.sent(),this.request.isAborted?[2]:(this.close(),this.onFinish(l),[3,4]);case 4:return[2]}})})},g.prototype.onStart=function(t){var e=t.contentType,n=t.headers,r=t.status,o=t.statusText;if(this.currentState===_.a.CONNECTING)if(200===r&&e&&v.test(e)){this.currentState=_.a.OPEN,this.onReadyStateChange(_.a.OPEN);var i=new p("open",{headers:n,status:r,statusText:o});this.dispatchEvent(i),this.onOpen(i)}else{var s="";s=200!==r?"EventSource's response has a status "+r+" "+(o=o&&o.replace(/\s+/g," "))+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+(e?"-":e.replace(/\s+/g," "))+". Aborting the connection.";var a=new p("error",{headers:n,message:s,status:r,statusText:o});this.close(),this.dispatchEvent(a),this.onError(a)}},g.prototype.onProgress=function(t){if(this.currentState===_.a.OPEN){for(var e=this.parserState,n=e.dataBuffer,r=e.eventTypeBuffer,o=e.fieldStart,i=e.lastEventIdBuffer,s=e.state,a=e.textBuffer,u=e.valueStart,c=-1,l=0;l<t.length;l+=1)(f=t.charCodeAt(l))!==m["\n"]&&f!==m["\r"]||(c=l);var d=(-1!==c?a:"")+t.slice(0,c+1);a=(-1===c?a:"")+t.slice(c+1);for(var h=0;h<d.length;h+=1){var f=d.charCodeAt(h);if(s!==w||f!==m["\n"])if(s===w&&(s=I),f===m["\n"]||f===m["\r"]){if(s!==I){s===O&&(u=h+1);var p=d.slice(o,u-1),v=u<h&&d.charCodeAt(u)===m[" "]?1:0,y=d.slice(u+v,h);"data"===p?(n+="\n",n+=y):"id"===p?i=y:"event"===p&&(r=y)}if(s===I){if(""!==n){this.lastEventId=i,""===r&&(r="message");var g=new b(r,{data:n.slice(1),lastEventId:i});if(this.dispatchEvent(g),"message"===r&&this.onMessage(g),this.currentState===_.a.CLOSED)return}r=n=""}s=f===m["\r"]?w:I}else s===I&&(o=h,s=O),s===O?f===m[":"]&&(u=h+1,s=E):s===E&&(s=T);else s=I}this.parserState={dataBuffer:n,eventTypeBuffer:r,fieldStart:o,lastEventIdBuffer:i,state:s,textBuffer:a,valueStart:u}}},g.prototype.onFinish=function(t){var e=new a("error");t&&(e.message=t.message,e.stack=t.stack),this.dispatchEvent(e),this.onError(e)},g.prototype.close=function(){return u(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return this.currentState=_.a.CLOSED,this.onReadyStateChange(_.a.CLOSED),!this.request||this.request.isAborted?[3,2]:[4,this.request.abort()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},g);function g(t){var e=t.RequestClass,n=t.dispatchEvent,r=t.headers,o=t.lastEventId,i=void 0===o?"":o,s=t.onError,a=t.onMessage,u=t.onOpen,c=t.onReadyStateChange,l=t.url,d=t.withCredentials;this.RequestClass=e,this.dispatchEvent=n,this.headers=r,this.lastEventId=i,this.onError=s,this.onMessage=a,this.onOpen=u,this.onReadyStateChange=c,this.url=l,this.withCredentials=d,this.currentState=_.a.WAITING,this.parserState={dataBuffer:"",eventTypeBuffer:"",fieldStart:0,lastEventIdBuffer:i,state:I,textBuffer:"",valueStart:0},this.request=void 0}function S(t,e){var n=l.call(this,t)||this;return n.data=e.data,n.lastEventId=e.lastEventId,n}function A(t,e){var n=e.headers,r=e.message,o=e.status,i=e.statusText,s=f.call(this,t)||this;return s.headers=n,s.message=r,s.status=o,s.statusText=i,s}e.a=y},function(t,n,r){"use strict";r.r(n),function(t){r.d(n,"Client",function(){return e}),t._babelPolyfill||!1===t._tcShouldPolyfill?r(343):r(259),r(344)("./web");var e=r(582).TigerConnectClient}.call(this,r(7))},function(t,e,n){"use strict";var r=(0,n(260).getGlobals)();n(261),n(271),n(286),n(289),n(293),n(296),n(299),n(303),n(306),n(309),!(window&&window.navigator.userAgent.includes("Trident/"))&&"undefined"!=typeof Promise&&"finally"in Promise.prototype||(n(338).enable(),r.Promise=n(340)),n(341),n(342)},function(e,t,n){"use strict";(function(t){e.exports={getGlobals:function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}}}).call(this,n(7))},function(t,e,n){t.exports=n(262)},function(t,e,n){n(263);var r=n(52);t.exports=r("Array","find")},function(t,e,n){"use strict";var r=n(16),o=n(151).find,i=n(154),s=!0;"find"in[]&&Array(1).find(function(){s=!1}),r({target:"Array",proto:!0,forced:s},{find:function(t){return o(this,t,1<arguments.length?arguments[1]:void 0)}}),i("find")},function(t,e,n){var r=n(15),o=n(146),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o.call(i))},function(t,e,n){var r=n(148),o=n(107),i=n(110),s=n(34);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(s(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(108),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){function r(t,e){var n=a[s(t)];return n==c||n!=u&&("function"==typeof e?o(e):!!e)}var o=n(22),i=/#|\.prototype\./,s=r.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=r.data={},u=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(26),s=n(32),a=n(34),u=n(75);t.exports=r?Object.defineProperties:function(t,e){a(t);for(var n,r=u(e),o=r.length,i=0;i<o;)s.f(t,n=r[i++],e[n]);return t}},function(t,e,n){var r=n(148);t.exports=r("document","documentElement")},function(t,e,n){t.exports=n(272)},function(t,e,n){n(273),n(280);var r=n(35);t.exports=r.Array.from},function(t,e,n){"use strict";var o=n(274).charAt,r=n(105),i=n(275),s=r.set,a=r.getterFor("String Iterator");i(String,"String",function(t){s(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=a(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=o(n,r),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){function r(a){return function(t,e){var n,r,o=String(c(t)),i=u(e),s=o.length;return i<0||s<=i?a?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===s||(r=o.charCodeAt(i+1))<56320||57343<r?a?o.charAt(i):n:a?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}var u=n(108),c=n(43);t.exports={codeAt:r(!1),charAt:r(!0)}},function(t,e,n){"use strict";function g(){return this}var m=n(16),_=n(276),b=n(156),w=n(278),I=n(53),O=n(31),E=n(71),r=n(13),T=n(72),S=n(76),o=n(155),A=o.IteratorPrototype,C=o.BUGGY_SAFARI_ITERATORS,R=r("iterator");t.exports=function(t,e,n,r,o,i,s){_(n,e,r);function a(t){if(t===o&&v)return v;if(!C&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}}var u,c,l,d=e+" Iterator",h=!1,f=t.prototype,p=f[R]||f["@@iterator"]||o&&f[o],v=!C&&p||a(o),y="Array"==e&&f.entries||p;if(y&&(u=b(y.call(new t)),A!==Object.prototype&&u.next&&(T||b(u)===A||(w?w(u,A):"function"!=typeof u[R]&&O(u,R,g)),I(u,d,!0,!0),T&&(S[d]=g))),"values"==o&&p&&"values"!==p.name&&(h=!0,v=function(){return p.call(this)}),T&&!s||f[R]===v||O(f,R,v),S[e]=v,o)if(c={values:a("values"),keys:i?v:a("keys"),entries:a("entries")},s)for(l in c)!C&&!h&&l in f||E(f,l,c[l]);else m({target:e,proto:!0,forced:C||h},c);return c}},function(t,e,n){"use strict";function o(){return this}var i=n(155).IteratorPrototype,s=n(113),a=n(50),u=n(53),c=n(76);t.exports=function(t,e,n){var r=e+" Iterator";return t.prototype=s(i,{next:a(1,n)}),u(t,r,!1,!0),c[r]=o,t}},function(t,e,n){var r=n(22);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,n){var o=n(34),i=n(279);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(n){}return function(t,e){return o(t),i(e),r?n.call(t,e):t.__proto__=e,t}}():void 0)},function(t,e,n){var r=n(23);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(16),o=n(281);r({target:"Array",stat:!0,forced:!n(285)(function(t){Array.from(t)})},{from:o})},function(t,e,n){"use strict";var h=n(111),f=n(45),p=n(282),v=n(283),y=n(44),g=n(157),m=n(284);t.exports=function(t){var e,n,r,o,i=f(t),s="function"==typeof this?this:Array,a=arguments.length,u=1<a?arguments[1]:void 0,c=void 0!==u,l=0,d=m(i);if(c&&(u=h(u,2<a?arguments[2]:void 0,2)),null==d||s==Array&&v(d))for(n=new s(e=y(i.length));l<e;l++)g(n,l,c?u(i[l],l):i[l]);else for(o=d.call(i),n=new s;!(r=o.next()).done;l++)g(n,l,c?p(o,u,[r.value,l],!0):r.value);return n.length=l,n}},function(t,e,n){var i=n(34);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var r=n(13),o=n(76),i=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[i]===t)}},function(t,e,n){var r=n(158),o=n(76),i=n(13)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var o=n(13)("iterator"),i=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){i=!0}};s[o]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}},function(t,e,n){t.exports=n(287)},function(t,e,n){n(288);var r=n(52);t.exports=r("Array","includes")},function(t,e,n){"use strict";var r=n(16),o=n(150).includes,i=n(154);r({target:"Array",proto:!0},{includes:function(t){return o(this,t,1<arguments.length?arguments[1]:void 0)}}),i("includes")},function(t,e,n){t.exports=n(290)},function(t,e,n){n(291);var r=n(35);t.exports=r.Object.assign},function(t,e,n){var r=n(16),o=n(292);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(t,e,n){"use strict";var h=n(26),r=n(22),f=n(75),p=n(110),v=n(68),y=n(45),g=n(103),o=Object.assign;t.exports=!o||r(function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||"abcdefghijklmnopqrst"!=f(o({},e)).join("")})?function(t,e){for(var n=y(t),r=arguments.length,o=1,i=p.f,s=v.f;o<r;)for(var a,u=g(arguments[o++]),c=i?f(u).concat(i(u)):f(u),l=c.length,d=0;d<l;)a=c[d++],h&&!s.call(u,a)||(n[a]=u[a]);return n}:o},function(t,e,n){t.exports=n(294)},function(t,e,n){n(295);var r=n(35);t.exports=r.Object.entries},function(t,e,n){var r=n(16),o=n(159).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},function(t,e,n){t.exports=n(297)},function(t,e,n){n(298);var r=n(35);t.exports=r.Object.values},function(t,e,n){var r=n(16),o=n(159).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},function(t,e,n){t.exports=n(300)},function(t,e,n){n(301);var r=n(52);t.exports=r("String","endsWith")},function(t,e,n){"use strict";var r=n(16),s=n(44),a=n(114),u=n(43),o=n(115),c="".endsWith,l=Math.min;r({target:"String",proto:!0,forced:!o("endsWith")},{endsWith:function(t){var e=String(u(this));a(t);var n=1<arguments.length?arguments[1]:void 0,r=s(e.length),o=void 0===n?r:l(s(n),r),i=String(t);return c?c.call(e,i,o):e.slice(o-i.length,o)===i}})},function(t,e,n){var r=n(23),o=n(69),i=n(13)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){t.exports=n(304)},function(t,e,n){n(305);var r=n(52);t.exports=r("String","includes")},function(t,e,n){"use strict";var r=n(16),o=n(114),i=n(43);r({target:"String",proto:!0,forced:!n(115)("includes")},{includes:function(t){return!!~String(i(this)).indexOf(o(t),1<arguments.length?arguments[1]:void 0)}})},function(t,e,n){t.exports=n(307)},function(t,e,n){n(308);var r=n(52);t.exports=r("String","startsWith")},function(t,e,n){"use strict";var r=n(16),o=n(44),i=n(114),s=n(43),a=n(115),u="".startsWith,c=Math.min;r({target:"String",proto:!0,forced:!a("startsWith")},{startsWith:function(t){var e=String(s(this));i(t);var n=o(c(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){t.exports=n(310),n(333),n(334),n(335),n(336),n(337)},function(t,e,n){n(311),n(313),n(315),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332);var r=n(35);t.exports=r.Symbol},function(t,e,n){"use strict";function c(t){if(!s(t))return!1;var e=t[u];return void 0!==e?!!e:i(t)}var r=n(16),o=n(22),i=n(112),s=n(23),l=n(45),d=n(44),h=n(157),f=n(152),a=n(312),u=n(13)("isConcatSpreadable"),p=!o(function(){var t=[];return t[u]=!1,t.concat()[0]!==t}),v=a("concat");r({target:"Array",proto:!0,forced:!p||!v},{concat:function(t){var e,n,r,o,i,s=l(this),a=f(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(c(i=-1===e?s:arguments[e])){if(9007199254740991<u+(o=d(i.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,u++)n in i&&h(a,u,i[n])}else{if(9007199254740991<=u)throw TypeError("Maximum allowed index exceeded");h(a,u++,i)}return a.length=u,a}})},function(t,e,n){var r=n(22),o=n(13)("species");t.exports=function(e){return!r(function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,n){var r=n(71),o=n(314),i=Object.prototype;o!==i.toString&&r(i,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r=n(158),o={};o[n(13)("toStringTag")]="z",t.exports="[object z]"!==String(o)?function(){return"[object "+r(this)+"]"}:o.toString},function(t,e,n){"use strict";function r(t,e){var n=J[t]=w(W.prototype);return V(n,{type:"Symbol",tag:t,description:e}),l||(n.description=e),n}function o(e,t){y(e);var n=m(t),r=I(n).concat(lt(n));return F(r,function(t){l&&!ct.call(n,t)||ut(e,t,n[t])}),e}function i(t,e){var n=m(t),r=_(e,!0);if(n!==H||!f(J,r)||f(tt,r)){var o=$(n,r);return!o||!f(J,r)||f(n,B)&&n[B][r]||(o.enumerable=!0),o}}function s(t){var e=Q(m(t)),n=[];return F(e,function(t){f(J,t)||f(M,t)||n.push(t)}),n}var a=n(16),u=n(15),c=n(72),l=n(26),d=n(153),h=n(22),f=n(18),p=n(112),v=n(23),y=n(34),g=n(45),m=n(42),_=n(70),b=n(50),w=n(113),I=n(75),O=n(107),E=n(316),T=n(110),S=n(102),A=n(32),C=n(68),R=n(31),P=n(71),j=n(51),x=n(73),M=n(74),k=n(106),N=n(13),z=n(160),D=n(10),U=n(53),L=n(105),F=n(151).forEach,B=x("hidden"),q=N("toPrimitive"),V=L.set,G=L.getterFor("Symbol"),H=Object.prototype,W=u.Symbol,Y=u.JSON,K=Y&&Y.stringify,$=S.f,X=A.f,Q=E.f,Z=C.f,J=j("symbols"),tt=j("op-symbols"),et=j("string-to-symbol-registry"),nt=j("symbol-to-string-registry"),rt=j("wks"),ot=u.QObject,it=!ot||!ot.prototype||!ot.prototype.findChild,st=l&&h(function(){return 7!=w(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=$(H,e);r&&delete H[e],X(t,e,n),r&&t!==H&&X(H,e,r)}:X,at=d&&"symbol"==typeof W.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ut=function(t,e,n){t===H&&ut(tt,e,n),y(t);var r=_(e,!0);return y(n),f(J,r)?(n.enumerable?(f(t,B)&&t[B][r]&&(t[B][r]=!1),n=w(n,{enumerable:b(0,!1)})):(f(t,B)||X(t,B,b(1,{})),t[B][r]=!0),st(t,r,n)):X(t,r,n)},ct=function(t){var e=_(t,!0),n=Z.call(this,e);return!(this===H&&f(J,e)&&!f(tt,e))&&(!(n||!f(this,e)||!f(J,e)||f(this,B)&&this[B][e])||n)},lt=function(t){var e=t===H,n=Q(e?tt:m(t)),r=[];return F(n,function(t){!f(J,t)||e&&!f(H,t)||r.push(J[t])}),r};d||(P((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=k(t),n=function(t){this===H&&n.call(tt,t),f(this,B)&&f(this[B],e)&&(this[B][e]=!1),st(this,e,b(1,t))};return l&&it&&st(H,e,{configurable:!0,set:n}),r(e,t)}).prototype,"toString",function(){return G(this).tag}),C.f=ct,A.f=ut,S.f=i,O.f=E.f=s,T.f=lt,l&&(X(W.prototype,"description",{configurable:!0,get:function(){return G(this).description}}),c||P(H,"propertyIsEnumerable",ct,{unsafe:!0})),z.f=function(t){return r(N(t),t)}),a({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:W}),F(I(rt),function(t){D(t)}),a({target:"Symbol",stat:!0,forced:!d},{for:function(t){var e=String(t);if(f(et,e))return et[e];var n=W(e);return et[e]=n,nt[n]=e,n},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(f(nt,t))return nt[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!d,sham:!l},{create:function(t,e){return void 0===e?w(t):o(w(t),e)},defineProperty:ut,defineProperties:o,getOwnPropertyDescriptor:i}),a({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:s,getOwnPropertySymbols:lt}),a({target:"Object",stat:!0,forced:h(function(){T.f(1)})},{getOwnPropertySymbols:function(t){return T.f(g(t))}}),Y&&a({target:"JSON",stat:!0,forced:!d||h(function(){var t=W();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))})},{stringify:function(t){for(var e,n,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if(n=e=r[1],(v(e)||void 0!==t)&&!at(t))return p(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!at(e))return e}),r[1]=e,K.apply(Y,r)}}),W.prototype[q]||R(W.prototype,q,W.prototype.valueOf),U(W,"Symbol"),M[B]=!0},function(t,e,n){var r=n(42),o=n(107).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(r(t))}},function(t,e,n){n(10)("asyncIterator")},function(t,e,n){"use strict";var r=n(16),o=n(26),i=n(15),s=n(18),a=n(23),u=n(32).f,c=n(147),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};c(h,l);var f=h.prototype=l.prototype;f.constructor=h;var p=f.toString,v="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=p.call(t);if(s(d,t))return"";var n=v?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},function(t,e,n){n(10)("hasInstance")},function(t,e,n){n(10)("isConcatSpreadable")},function(t,e,n){n(10)("iterator")},function(t,e,n){n(10)("match")},function(t,e,n){n(10)("matchAll")},function(t,e,n){n(10)("replace")},function(t,e,n){n(10)("search")},function(t,e,n){n(10)("species")},function(t,e,n){n(10)("split")},function(t,e,n){n(10)("toPrimitive")},function(t,e,n){n(10)("toStringTag")},function(t,e,n){n(10)("unscopables")},function(t,e,n){n(53)(Math,"Math",!0)},function(t,e,n){var r=n(15);n(53)(r.JSON,"JSON",!0)},function(t,e,n){n(10)("asyncDispose")},function(t,e,n){n(10)("dispose")},function(t,e,n){n(10)("observable")},function(t,e,n){n(10)("patternMatch")},function(t,e,n){n(10)("replaceAll")},function(t,e,n){"use strict";var s=n(161),a=[ReferenceError,TypeError,RangeError],u=!1;function c(){u=!1,s._l=null,s._m=null}function l(e,t){return t.some(function(t){return e instanceof t})}e.disable=c,e.enable=function(r){r=r||{},u&&c(),u=!0;var n=0,o=0,i={};s._l=function(t){var e;2===t._i&&i[t._o]&&(i[t._o].logged?(e=t._o,i[e].logged&&(r.onHandled?r.onHandled(i[e].displayId,i[e].error):i[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+i[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+i[e].displayId+".")))):clearTimeout(i[t._o].timeout),delete i[t._o])},s._m=function(t,e){0===t._h&&(t._o=n++,i[t._o]={displayId:null,error:e,timeout:setTimeout(function(t){var e,n;(r.allRejections||l(i[t].error,r.whitelist||a))&&(i[t].displayId=o++,r.onUnhandled?(i[t].logged=!0,r.onUnhandled(i[t].displayId,i[t].error)):(i[t].logged=!0,e=i[t].displayId,n=i[t].error,console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((n&&(n.stack||n))+"").split("\n").forEach(function(t){console.warn("  "+t)})))}.bind(null,t._o),l(e,a)?100:2e3),logged:!1})}}},function(h,t,e){"use strict";(function(t){function e(t){r.length||n(),r[r.length]=t}h.exports=e;var n,r=[],o=0;function i(){for(;o<r.length;){var t=o;if(o+=1,r[t].call(),1024<o){for(var e=0,n=r.length-o;e<n;e++)r[e]=r[e+o];r.length-=o,o=0}}r.length=0,o=0}var s,a,u,c=void 0!==t?t:self,l=c.MutationObserver||c.WebKitMutationObserver;function d(r){return function(){var t=setTimeout(n,0),e=setInterval(n,50);function n(){clearTimeout(t),clearInterval(e),r()}}}n="function"==typeof l?(s=1,a=new l(i),u=document.createTextNode(""),a.observe(u,{characterData:!0}),function(){s=-s,u.data=s}):d(i),e.requestFlush=n,e.makeRequestCallFromTimer=d}).call(this,e(7))},function(t,e,n){"use strict";var u=n(161);t.exports=u;var r=l(!0),o=l(!1),i=l(null),s=l(void 0),a=l(0),c=l("");function l(t){var e=new u(u._n);return e._i=1,e._j=t,e}u.resolve=function(n){if(n instanceof u)return n;if(null===n)return i;if(void 0===n)return s;if(!0===n)return r;if(!1===n)return o;if(0===n)return a;if(""===n)return c;if("object"==typeof n||"function"==typeof n)try{var t=n.then;if("function"==typeof t)return new u(t.bind(n))}catch(n){return new u(function(t,e){e(n)})}return l(n)},u.all=function(t){var a=Array.prototype.slice.call(t);return new u(function(r,o){if(0===a.length)return r([]);var i=a.length;function s(e,t){if(t&&("object"==typeof t||"function"==typeof t)){if(t instanceof u&&t.then===u.prototype.then){for(;3===t._i;)t=t._j;return 1===t._i?s(e,t._j):(2===t._i&&o(t._j),void t.then(function(t){s(e,t)},o))}var n=t.then;if("function"==typeof n)return void new u(n.bind(t)).then(function(t){s(e,t)},o)}a[e]=t,0==--i&&r(a)}for(var t=0;t<a.length;t++)s(t,a[t])})},u.reject=function(n){return new u(function(t,e){e(n)})},u.race=function(t){return new u(function(e,n){t.forEach(function(t){u.resolve(t).then(e,n)})})},u.prototype.catch=function(t){return this.then(null,t)}},function(n,r,o){(function(p){var t,e;void 0===(e="function"==typeof(t=function(){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}var e,n,u=(t(f,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,o=n.length;r<o;r++)if(n[r]===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){var n=this;if(e.type in this.listeners){for(var t=function(t){setTimeout(function(){return t.call(n,e)})},r=this.listeners[e.type],o=0,i=r.length;o<i;o++)t(r[o]);return!e.defaultPrevented}}}]),f),c=(function(){throw new TypeError("Super expression must either be null or a function")}(),t(h,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),a(i(h.prototype),"dispatchEvent",this).call(this,t)}}]),h),l=(t(d,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),d);function d(){r(this,d),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}function h(){var t,e,n;return r(this,h),(e=this,t=!(n=i(h).call(this))||"object"!=typeof n&&"function"!=typeof n?s(e):n).listeners||u.call(s(t)),Object.defineProperty(s(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(t),"onabort",{value:null,writable:!0,configurable:!0}),t}function f(){r(this,f),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),e="undefined"!=typeof self?self:p,((n=e).__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),1):"function"==typeof n.Request&&!n.Request.prototype.hasOwnProperty("signal")||!n.AbortController)&&(e.AbortController=l,e.AbortSignal=c)})?t.call(r,o,r,n):t)||(n.exports=e)}).call(this,o(7))},function(t,e,n){"use strict";var _;_="undefined"!=typeof self?self:this,function(a){var u={};if(u.searchParams="URLSearchParams"in _,u.iterable="Symbol"in _&&"iterator"in Symbol,u.blob="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch(t){return!1}}(),u.formData="FormData"in _,u.arrayBuffer="ArrayBuffer"in _,u.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return u.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function l(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:u.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:u.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u.arrayBuffer&&u.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,n,r=i(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=s(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=r(t),e=o(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},c.prototype.delete=function(t){delete this.map[r(t)]},c.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},c.prototype.set=function(t,e){this.map[r(t)]=o(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},c.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},u.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t,e){var n,r,o=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),-1<f.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(t){var o=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");o.append(decodeURIComponent(n),decodeURIComponent(r))}}),o}function y(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];y.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},a.DOMException=_.DOMException;try{new a.DOMException}catch(t){a.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function m(o,s){return new Promise(function(r,t){var e=new p(o,s);if(e.signal&&e.signal.aborted)return t(new a.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function n(){i.abort()}i.onload=function(){var t,o,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",o=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();o.append(n,r)}}),o)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var n="response"in i?i.response:i.responseText;r(new y(n,e))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.onabort=function(){t(new a.DOMException("Aborted","AbortError"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&u.blob&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),e.signal&&(e.signal.addEventListener("abort",n),i.onreadystatechange=function(){4===i.readyState&&e.signal.removeEventListener("abort",n)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})}m.polyfill=!0,_.fetch||(_.fetch=m,_.Headers=c,_.Request=p,_.Response=y),a.Headers=c,a.Request=p,a.Response=y,a.fetch=m}({})},function(t,e,n){"use strict";if(!("find"in Array.prototype))throw new Error("Missing polyfill for Array.find");if(!("from"in Array))throw new Error("Missing polyfill for Array.from");if(!("includes"in Array.prototype))throw new Error("Missing polyfill for Array.includes");if(!("assign"in Object))throw new Error("Missing polyfill for Object.assign");if(!("entries"in Object))throw new Error("Missing polyfill for Object.entries");if(!("values"in Object))throw new Error("Missing polyfill for Object.values");if(!("endsWith"in String.prototype))throw new Error("Missing polyfill for String.endsWith");if(!("includes"in String.prototype))throw new Error("Missing polyfill for String.includes");if("undefined"==typeof Symbol)throw new Error("Missing polyfill for Symbol");if("undefined"==typeof Promise)throw new Error("Missing polyfill for Promise");if(!("finally"in Promise.prototype))throw new Error("Missing polyfill for Promise.finally");if("undefined"==typeof AbortController)throw new Error("Missing polyfill for AbortController");if("undefined"==typeof fetch)throw new Error("Missing polyfill for fetch");if("undefined"==typeof Headers)throw new Error("Missing polyfill for Headers (part of fetch polyfill)");if("undefined"==typeof Request)throw new Error("Missing polyfill for Request (part of fetch polyfill)");if("undefined"==typeof Response)throw new Error("Missing polyfill for Response (part of fetch polyfill)")},function(t,e,n){var r={"./node":162,"./node.ts":162,"./web":163,"./web.ts":163};function o(t){var e=i(t);return n(e)}function i(t){if(n.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(r)},o.resolve=i,(t.exports=o).id=344},function(t,n,o){(function(u){var c=o(346),t=o(166),l=o(358),e=o(359),d=o(360),r=n;r.request=function(t,e){t="string"==typeof t?d.parse(t):l(t);var n=-1===u.location.protocol.search(/^https?:$/)?"http:":"",r=t.protocol||n,o=t.hostname||t.host,i=t.port,s=t.path||"/";o&&-1!==o.indexOf(":")&&(o="["+o+"]"),t.url=(o?r+"//"+o:"")+(i?":"+i:"")+s,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var a=new c(t);return e&&a.on("response",e),a},r.get=function(t,e){var n=r.request(t,e);return n.end(),n},r.ClientRequest=c,r.IncomingMessage=t.IncomingMessage,r.Agent=function(){},r.Agent.defaultMaxSockets=4,r.globalAgent=new r.Agent,r.STATUS_CODES=e,r.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,o(7))},function(i,t,a){(function(u,c,l){var d=a(165),t=a(38),e=a(166),s=a(167),h=a(357),n=e.IncomingMessage,f=e.readyStates,r=i.exports=function(e){var t,n=this;s.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new u(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var r,o,i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!d.abortController)t=!(i=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!d.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=(r=t,o=i,d.fetch&&o?"fetch":d.mozchunkedarraybuffer?"moz-chunked-arraybuffer":d.msstream?"ms-stream":d.arraybuffer&&r?"arraybuffer":d.vbArray&&r?"text:vbarray":"text"),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};t(r,s.Writable),r.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===o.indexOf(n)&&(this._headers[n]={name:t,value:e})},r.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},r.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},r.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=d.arraybuffer?h(u.concat(e._body)):d.blobConstructor?new c.Blob(e._body.map(function(t){return h(t)}),{type:(r["content-type"]||{}).value||""}):u.concat(e._body).toString());var o=[];if(Object.keys(r).forEach(function(t){var e=r[t].name,n=r[t].value;Array.isArray(n)?n.forEach(function(t){o.push([e,t])}):o.push([e,n])}),"fetch"===e._mode){var i=null;if(d.abortController){var s=new AbortController;i=s.signal,e._fetchAbortController=s,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=c.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}c.fetch(e._opts.url,{method:e._opts.method,headers:o,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:i}).then(function(t){e._fetchResponse=t,e._connect()},function(t){c.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var a=e._xhr=new c.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(t){return void l.nextTick(function(){e.emit("error",t)})}"responseType"in a&&(a.responseType=e._mode.split(":")[0]),"withCredentials"in a&&(a.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(a.timeout=t.requestTimeout,a.ontimeout=function(){e.emit("requestTimeout")}),o.forEach(function(t){a.setRequestHeader(t[0],t[1])}),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(n)}catch(t){return void l.nextTick(function(){e.emit("error",t)})}}}},r.prototype._onXHRProgress=function(){!function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}(this._xhr)||this._destroyed||(this._response||this._connect(),this._response._onXHRProgress())},r.prototype._connect=function(){var e=this;e._destroyed||(e._response=new n(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},r.prototype._write=function(t,e,n){this._body.push(t),n()},r.prototype.abort=r.prototype.destroy=function(){this._destroyed=!0,c.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},r.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),s.Writable.prototype.end.call(this,t,e,n)},r.prototype.flushHeaders=function(){},r.prototype.setTimeout=function(){},r.prototype.setNoDelay=function(){},r.prototype.setSocketKeepAlive=function(){};var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,a(36).Buffer,a(7),a(37))},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-d(t)},e.toByteArray=function(t){var e,n,r,o,i,s=t.length;o=d(t),i=new l(3*s/4-o),n=0<o?s-4:s;var a=0;for(e=0;e<n;e+=4,3)r=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],i[a++]=r>>16&255,i[a++]=r>>8&255,i[a++]=255&r;return 2===o?(r=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,i[a++]=255&r):1===o&&(r=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,i[a++]=r>>8&255,i[a++]=255&r),i},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(h(t,s,a<s+16383?a:s+16383));return 1==r?(e=t[n-1],o+=u[e>>2],o+=u[e<<4&63],o+="=="):2==r&&(e=(t[n-2]<<8)+t[n-1],o+=u[e>>10],o+=u[e>>4&63],o+=u[e<<2&63],o+="="),i.push(o),i.join("")};for(var u=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)u[o]=r[o],c[r.charCodeAt(o)]=o;function d(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function h(t,e,n){for(var r,o,i=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(u[(o=r)>>18&63]+u[o>>12&63]+u[o>>6&63]+u[63&o]);return i.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?o-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;0<l;i=256*i+t[e+d],d+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+t[e+d],d+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=c}return(f?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,d=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+d?h/u:h*Math.pow(2,1-d))*u&&(s++,u/=2),l<=s+d?(a=0,s=l):1<=s+d?(a=(e*u-1)*Math.pow(2,o),s+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,o),s=0));8<=o;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*v}},function(t,e){},function(t,e,n){"use strict";var s=n(116).Buffer,r=n(351);function o(){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.head=null,this.tail=null,this.length=0}t.exports=(o.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},o.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},o.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},o.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r=s.allocUnsafe(t>>>0),o=this.head,i=0;o;)e=r,n=i,o.data.copy(e,n),i+=o.data.length,o=o.next;return r},o),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,o,i){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}o.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},o.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},o.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},o.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},o._unrefActive=o.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(353),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(7))},function(t,e,n){(function(t,f){!function(n){"use strict";if(!n.setImmediate){var o,r,e,i,t,s=1,a={},u=!1,c=n.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(n);l=l&&l.setTimeout?l:n,o="[object process]"==={}.toString.call(n.process)?function(t){f.nextTick(function(){h(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(i="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),function(t){n.postMessage(i+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){e.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):function(t){setTimeout(h,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return a[s]=r,o(s),s++},l.clearImmediate=d}function d(t){delete a[t]}function h(t){if(u)setTimeout(h,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(37))},function(t,e,n){(function(n){function r(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,n(7))},function(t,e,n){var r=n(36),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=i;var r=n(173),o=n(54);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}o.inherits=n(38),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var o=n(36).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(o.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,r=0;r<n;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t};var o=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){"use strict";var M=n(361),k=n(362);function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=i,e.resolve=function(t,e){return i(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},e.format=function(t){return k.isString(t)&&(t=i(t)),t instanceof A?t.format():A.prototype.format.call(t)},e.Url=A;var N=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,z=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),D=["'"].concat(o),U=["%","/","?",";","#"].concat(D),L=["/","?","#"],F=/^[+a-z0-9A-Z_-]{0,63}$/,B=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},V={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},H=n(363);function i(t,e,n){if(t&&k.isObject(t)&&t instanceof A)return t;var r=new A;return r.parse(t,e,n),r}A.prototype.parse=function(t,e,n){if(!k.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var s=t=i.join(o);if(s=s.trim(),!n&&1===t.split("#").length){var a=z.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?H.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=N.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(n||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&V[u]||(s=s.substr(2),this.slashes=!0)}if(!V[u]&&(l||u&&!G[u])){for(var d,h,f=-1,p=0;p<L.length;p++)-1!==(v=s.indexOf(L[p]))&&(-1===f||v<f)&&(f=v);for(-1!==(h=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(d=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(d)),f=-1,p=0;p<U.length;p++){var v;-1!==(v=s.indexOf(U[p]))&&(-1===f||v<f)&&(f=v)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),m=(p=0,g.length);p<m;p++){var _=g[p];if(_&&!_.match(F)){for(var b="",w=0,I=_.length;w<I;w++)127<_.charCodeAt(w)?b+="x":b+=_[w];if(!b.match(F)){var O=g.slice(0,p),E=g.slice(p+1),T=_.match(B);T&&(O.push(T[1]),E.unshift(T[2])),E.length&&(s="/"+E.join(".")+s),this.hostname=O.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=M.toASCII(this.hostname));var S=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+S,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!q[c])for(p=0,m=D.length;p<m;p++){var C=D[p];if(-1!==s.indexOf(C)){var R=encodeURIComponent(C);R===C&&(R=escape(C)),s=s.split(C).join(R)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var j=s.indexOf("?");if(-1!==j?(this.search=s.substr(j),this.query=s.substr(j+1),e&&(this.query=H.parse(this.query)),s=s.slice(0,j)):e&&(this.search="",this.query={}),s&&(this.pathname=s),G[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var x=this.search||"";this.path=S+x}return this.href=this.format(),this},A.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&k.isObject(this.query)&&Object.keys(this.query).length&&(i=H.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||G[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},A.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},A.prototype.resolveObject=function(t){if(k.isString(t)){var e=new A;e.parse(t,!1,!0),t=e}for(var n=new A,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(n[u]=t[u])}return G[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!G[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var d=c[l];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||V[t.protocol])n.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",p=n.search||"";n.path=f+p}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=y||v||n.host&&t.pathname,m=g,_=n.pathname&&n.pathname.split("/")||[],b=(h=t.pathname&&t.pathname.split("/")||[],n.protocol&&!G[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),g=g&&(""===h[0]||""===_[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=h;else if(h.length)(_=_||[]).pop(),_=_.concat(h),n.search=t.search,n.query=t.query;else if(!k.isNullOrUndefined(t.search))return b&&(n.hostname=n.host=_.shift(),(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=t.search,n.query=t.query,k.isNull(n.pathname)&&k.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=_.slice(-1)[0],I=(n.host||t.host||1<_.length)&&("."===w||".."===w)||""===w,O=0,E=_.length;0<=E;E--)"."===(w=_[E])?_.splice(E,1):".."===w?(_.splice(E,1),O++):O&&(_.splice(E,1),O--);if(!g&&!m)for(;O--;)_.unshift("..");!g||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),I&&"/"!==_.join("/").substr(-1)&&_.push("");var T,S=""===_[0]||_[0]&&"/"===_[0].charAt(0);return b&&(n.hostname=n.host=S?"":_.length?_.shift():"",(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(g=g||n.host&&_.length)&&!S&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),k.isNull(n.pathname)&&k.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},A.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,f,p){(function(l,d){var h;!function(){f&&f.nodeType,l&&l.nodeType;var t="object"==typeof d&&d;t.global!==t&&t.window!==t&&t.self;var e,g=2147483647,n=/^xn--/,r=/[^\x20-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,i={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,_=String.fromCharCode;function b(t){throw new RangeError(i[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";return 1<n.length&&(r=n[0]+"@",t=n[1]),r+s((t=t.replace(o,".")).split("."),e).join(".")}function w(t){for(var e,n,r=[],o=0,i=t.length;o<i;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function I(t){return s(t,function(t){var e="";return 65535<t&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+_(t)}).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?m(t/700):t>>1,t+=m(t/e);455<t;r+=36)t=m(t/35);return m(r+36*t/(t+38))}function u(t){var e,n,r,o,i,s,a,u,c,l,d,h=[],f=t.length,p=0,v=128,y=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)128<=t.charCodeAt(r)&&b("not-basic"),h.push(t.charCodeAt(r));for(o=0<n?n+1:0;o<f;){for(i=p,s=1,a=36;f<=o&&b("invalid-input"),(36<=(u=(d=t.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)||u>m((g-p)/s))&&b("overflow"),p+=u*s,!(u<(c=a<=y?1:y+26<=a?26:a-y));a+=36)s>m(g/(l=36-c))&&b("overflow"),s*=l;y=E(p-i,e=h.length+1,0==i),m(p/e)>g-v&&b("overflow"),v+=m(p/e),p%=e,h.splice(p++,0,v)}return I(h)}function c(t){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y=[];for(h=(t=w(t)).length,e=128,i=72,s=n=0;s<h;++s)(d=t[s])<128&&y.push(_(d));for(r=o=y.length,o&&y.push("-");r<h;){for(a=g,s=0;s<h;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>m((g-n)/(f=r+1))&&b("overflow"),n+=(a-e)*f,e=a,s=0;s<h;++s)if((d=t[s])<e&&++n>g&&b("overflow"),d==e){for(u=n,c=36;!(u<(l=c<=i?1:i+26<=c?26:c-i));c+=36)v=u-l,p=36-l,y.push(_(O(l+v%p,0))),u=m(v/p);y.push(_(O(u,0))),i=E(n,f,r==o),n=0,++r}++n,++e}return y.join("")}e={version:"1.4.1",ucs2:{decode:w,encode:I},decode:u,encode:c,toASCII:function(t){return a(t,function(t){return r.test(t)?"xn--"+c(t):t})},toUnicode:function(t){return a(t,function(t){return n.test(t)?u(t.slice(4).toLowerCase()):t})}},void 0===(h=function(){return e}.call(f,p,f,l))||(l.exports=h)}()}).call(this,p(78)(t),p(7))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(364),e.encode=e.stringify=n(365)},function(t,e,n){"use strict";t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a,u,c=t.length;0<s&&s<c&&(c=s);for(var l=0;l<c;++l){var d,h,f,p,v=t[l].replace(i,"%20"),y=v.indexOf(n);h=0<=y?(d=v.substr(0,y),v.substr(y+1)):(d=v,""),f=decodeURIComponent(d),p=decodeURIComponent(h),a=o,u=f,Object.prototype.hasOwnProperty.call(a,u)?g(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o};var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function i(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(n,r,o,t){return r=r||"&",o=o||"=",null===n&&(n=void 0),"object"==typeof n?a(u(n),function(t){var e=encodeURIComponent(i(t))+o;return s(n[t])?a(n[t],function(t){return e+encodeURIComponent(i(t))}).join(r):e+encodeURIComponent(i(n[t]))}).join(r):t?encodeURIComponent(i(t))+o+encodeURIComponent(i(n)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(a,t,e){(function(s){(function(){var t,e,n,r,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:null!=s&&s.hrtime?(a.exports=function(){return(t()-o)/1e6},e=s.hrtime,r=(t=function(){var t;return 1e9*(t=e())[0]+t[1]})(),i=1e9*s.uptime(),o=r-i):n=Date.now?(a.exports=function(){return Date.now()-n},Date.now()):(a.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(this)}).call(this,e(37))},function(t,e,n){var r=n(174),f=n(175),o=r(),p=[1|o[0],o[1],o[2],o[3],o[4],o[5]],v=16383&(o[6]<<8|o[7]),y=0,g=0;t.exports=function(t,e,n){var r=e&&n||0,o=e||[],i=void 0!==(t=t||{}).clockseq?t.clockseq:v,s=void 0!==t.msecs?t.msecs:(new Date).getTime(),a=void 0!==t.nsecs?t.nsecs:g+1,u=s-y+(a-g)/1e4;if(u<0&&void 0===t.clockseq&&(i=i+1&16383),(u<0||y<s)&&void 0===t.nsecs&&(a=0),1e4<=a)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=s,v=i;var c=(1e4*(268435455&(s+=122192928e5))+(g=a))%4294967296;o[r++]=c>>>24&255,o[r++]=c>>>16&255,o[r++]=c>>>8&255,o[r++]=255&c;var l=s/4294967296*1e4&268435455;o[r++]=l>>>8&255,o[r++]=255&l,o[r++]=l>>>24&15|16,o[r++]=l>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var d=t.node||p,h=0;h<6;++h)o[r+h]=d[h];return e||f(o)}},function(t,e,n){var s=n(174),a=n(175);t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||a(o)}},function(t,e,n){var r=n(55),o=n(395),i=n(396);t.exports=function(t,e){return i(t,o(r(e)))}},function(t,e,n){var r=n(371),o=n(380),i=n(191);t.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?i(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},function(t,e,n){var f=n(178),p=n(185);t.exports=function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var u=(a=n[o])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var d=new f;if(r)var h=r(c,l,u,t,e,d);if(!(void 0===h?p(l,c,3,r,d):h))return!1}}return!0}},function(t,e,n){var v=n(178),y=n(373),g=n(375),m=n(376),_=n(188),b=n(19),w=n(378),I=n(379),O="[object Object]",E=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,o,i){var s=b(t),a=b(e),u=s?"[object Array]":_(t),c=a?"[object Array]":_(e),l=(u="[object Arguments]"==u?O:u)==O,d=(c="[object Arguments]"==c?O:c)==O,h=u==c;if(h&&w(t)){if(!w(e))return!1;l=!(s=!0)}if(h&&!l)return i=i||new v,s||I(t)?y(t,e,n,r,o,i):g(t,e,u,n,r,o,i);if(!(1&n)){var f=l&&E.call(t,"__wrapped__"),p=d&&E.call(e,"__wrapped__");if(f||p)return o(f?t.value():t,p?e.value():e,n,r,i=i||new v)}return!!h&&(i=i||new v,m(t,e,n,r,o,i))}},function(t,e,n){var y=n(117),g=n(374),m=n(118);t.exports=function(t,e,n,r,o,i){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var c=i.get(t);if(c&&i.get(e))return c==e;var l=-1,d=!0,h=2&n?new y:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var f=t[l],p=e[l];if(r)var v=s?r(p,f,l,e,t,i):r(f,p,l,t,e,i);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!g(e,function(t,e){if(!m(h,e)&&(f===t||o(f,t,n,r,i)))return h.push(e)})){d=!1;break}}else if(f!==p&&!o(f,p,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var _=n(377),b=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,o,i){var s=1&n,a=_(t),u=a.length;if(u!=_(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:b.call(e,l)))return!1}var d=i.get(t);if(d&&i.get(e))return d==e;var h=!0;i.set(t,e),i.set(e,t);for(var f=s;++c<u;){var p=t[l=a[c]],v=e[l];if(r)var y=s?r(v,p,l,e,t,i):r(p,v,l,t,e,i);if(!(void 0===y?p===v||o(p,v,n,r,i):y)){h=!1;break}f=f||"constructor"==l}if(h&&!f){var g=t.constructor,m=e.constructor;g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(t),i.delete(e),h}},function(t,e,n){var r=n(187)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(){return!1}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(190),s=n(56);t.exports=function(t){for(var e=s(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,i(o)]}return e}},function(t,e,n){var o=n(185),i=n(382),s=n(389),a=n(121),u=n(190),c=n(191),l=n(57);t.exports=function(n,r){return a(n)&&u(r)?c(l(n),r):function(t){var e=i(t,n);return void 0===e&&e===r?s(t,n):o(r,e,3)}}},function(t,e,n){var o=n(120);t.exports=function(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(385),i=/^\./,s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(t){var o=[];return i.test(t)&&o.push(""),t.replace(s,function(t,e,n,r){o.push(n?r.replace(a,"$1"):e||t)}),o});t.exports=o},function(t,e,n){var r=n(386);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(387);function a(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var s=function(){var t=arguments,e=i?i.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return s.cache=n.set(e,r)||n,r};return s.cache=new(a.Cache||r),s}a.Cache=r,t.exports=a},function(t,e,n){var r=n(179),o=n(180),i=n(182),s=n(183),a=n(184);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(390),o=n(391);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var a=n(80),u=n(192),c=n(19),l=n(193),d=n(194),h=n(57);t.exports=function(t,e,n){for(var r=-1,o=(e=a(e,t)).length,i=!1;++r<o;){var s=h(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&d(o)&&l(s,o)&&(c(t)||u(t))}},function(t,e,n){var r=n(393),o=n(394),i=n(121),s=n(57);t.exports=function(t){return i(t)?r(s(t)):o(t)}},function(t,e){t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(120);t.exports=function(e){return function(t){return r(t,e)}}},function(t,e){t.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},function(t,e,n){var r=n(58),o=n(55),i=n(397),s=n(402);t.exports=function(t,n){if(null==t)return{};var e=r(s(t),function(t){return[t]});return n=o(n),i(t,e,function(t,e){return n(t,e[0])})}},function(t,e,n){var u=n(120),c=n(398),l=n(80);t.exports=function(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var s=e[r],a=u(t,s);n(a,s)&&c(i,l(s,t),a)}return i}},function(t,e,n){var d=n(399),h=n(80),f=n(193),p=n(119),v=n(57);t.exports=function(t,e,n,r){if(!p(t))return t;for(var o=-1,i=(e=h(e,t)).length,s=i-1,a=t;null!=a&&++o<i;){var u=v(e[o]),c=n;if(o!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=p(l)?l:f(e[o+1])?[]:{})}d(a,u,c),a=a[u]}return t}},function(t,e,n){var o=n(196),i=n(181),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var r=t[e];s.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}},function(t,e,n){var r=n(401),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){t.exports={default:n(404),__esModule:!0}},function(t,e,n){n(405),t.exports=n(24).Object.keys},function(t,e,n){var r=n(122),o=n(124);n(409)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){var s=n(81),a=n(125),u=n(407)(!1),c=n(127)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),o=0,i=[];for(n in r)n!=c&&s(r,n)&&i.push(n);for(;e.length>o;)s(r,n=e[o++])&&(~u(i,n)||i.push(n));return i}},function(t,e,n){var u=n(125),c=n(198),l=n(408);t.exports=function(a){return function(t,e,n){var r,o=u(t),i=c(o.length),s=l(n,i);if(a&&e!=e){for(;s<i;)if((r=o[s++])!=r)return!0}else for(;s<i;s++)if((a||s in o)&&o[s]===e)return a||s||0;return!a&&-1}}},function(t,e,n){var r=n(126),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var o=n(47),i=n(24),s=n(86);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],r={};r[t]=e(n),o(o.S+o.F*s(function(){n(1)}),"Object",r)}},function(t,e,n){t.exports=!n(60)&&!n(86)(function(){return 7!=Object.defineProperty(n(128)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(59);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports={default:n(413),__esModule:!0}},function(t,e,n){n(414),n(415),n(422),n(426),n(437),n(438),t.exports=n(24).Promise},function(t,e){},function(t,e,n){"use strict";var r=n(416)(!0);n(203)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var u=n(126),c=n(123);t.exports=function(a){return function(t,e){var n,r,o=String(c(t)),i=u(e),s=o.length;return i<0||s<=i?a?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===s||(r=o.charCodeAt(i+1))<56320||57343<r?a?o.charAt(i):n:a?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){t.exports=n(48)},function(t,e,n){"use strict";var r=n(419),o=n(202),i=n(129),s={};n(48)(s,n(21)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,r){function o(){}var i=r(39),s=r(420),a=r(201),u=r(127)("IE_PROTO"),c=function(){var t,e=r(128)("iframe"),n=a.length;for(e.style.display="none",r(205).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c.prototype[a[n]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(o.prototype=i(t),n=new o,o.prototype=null,n[u]=t):n=c(),void 0===e?n:s(n,e)}},function(t,e,n){var s=n(85),a=n(39),u=n(124);t.exports=n(60)?Object.defineProperties:function(t,e){a(t);for(var n,r=u(e),o=r.length,i=0;i<o;)s.f(t,n=r[i++],e[n]);return t}},function(t,e,n){var r=n(81),o=n(122),i=n(127)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){n(423);for(var r=n(20),o=n(48),i=n(61),s=n(21)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=r[c],d=l&&l.prototype;d&&!d[s]&&o(d,s,c),i[c]=i.Array}},function(t,e,n){"use strict";var r=n(424),o=n(425),i=n(61),s=n(125);t.exports=n(203)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";function r(){}function l(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e}function o(c,n){if(!c._n){c._n=!0;var r=c._c;I(function(){for(var a=c._v,u=1==c._s,t=0,e=function(t){var e,n,r=u?t.ok:t.fail,o=t.resolve,i=t.reject,s=t.domain;try{r?(u||(2==c._h&&k(c),c._h=1),!0===r?e=a:(s&&s.enter(),e=r(a),s&&s.exit()),e===t.promise?i(S("Promise-chain cycle")):(n=l(e))?n.call(e,o,i):o(e)):i(a)}catch(t){i(t)}};r.length>t;)e(r[t++]);c._c=[],c._n=!1,n&&!c._h&&x(c)})}}function i(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),o(e,!0))}var s,a,u,c,d=n(204),h=n(20),f=n(83),p=n(206),v=n(47),y=n(59),g=n(84),m=n(427),_=n(428),b=n(207),w=n(208).set,I=n(433)(),O=n(130),E=n(209),T=n(210),S=h.TypeError,A=h.process,C=h.Promise,R="process"==p(A),P=a=O.f,j=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(21)("species")]=function(t){t(r,r)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(r)instanceof e}catch(t){}}(),x=function(i){w.call(h,function(){var t,e,n,r=i._v,o=M(i);if(o&&(t=E(function(){R?A.emit("unhandledRejection",r,i):(e=h.onunhandledrejection)?e({promise:i,reason:r}):(n=h.console)&&n.error&&n.error("Unhandled promise rejection",r)}),i._h=R||M(i)?2:1),i._a=void 0,o&&t.e)throw t.v})},M=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if((e=n[r++]).fail||!M(e.promise))return!1;return!0},k=function(e){w.call(h,function(){var t;R?A.emit("rejectionHandled",e):(t=h.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(n=l(t))?I(function(){var e={_w:r,_d:!1};try{n.call(t,f(N,e,1),f(i,e,1))}catch(t){i.call(e,t)}}):(r._v=t,r._s=1,o(r,!1))}catch(t){i.call({_w:r,_d:!1},t)}}};j||(C=function(t){m(this,C,"Promise","_h"),g(t),s.call(this);try{t(f(N,this,1),f(i,this,1))}catch(t){i.call(this,t)}},(s=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(434)(C.prototype,{then:function(t,e){var n=P(b(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=R?A.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&o(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new s;this.promise=t,this.resolve=f(N,t,1),this.reject=f(i,t,1)},O.f=P=function(t){return t===C||t===c?new u(t):a(t)}),v(v.G+v.W+v.F*!j,{Promise:C}),n(129)(C,"Promise"),n(435)("Promise"),c=n(24).Promise,v(v.S+v.F*!j,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),v(v.S+v.F*(d||!j),"Promise",{resolve:function(t){return T(d&&this===c?C:this,t)}}),v(v.S+v.F*!(j&&n(436)(function(t){C.all(t).catch(r)})),"Promise",{all:function(t){var s=this,e=P(s),a=e.resolve,u=e.reject,n=E(function(){var r=[],o=0,i=1;_(t,!1,function(t){var e=o++,n=!1;r.push(void 0),i++,s.resolve(t).then(function(t){n||(n=!0,r[e]=t,--i||a(r))},u)}),--i||a(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=P(e),r=n.reject,o=E(function(){_(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var h=n(83),f=n(429),p=n(430),v=n(39),y=n(198),g=n(431),m={},_={};(e=t.exports=function(t,e,n,r,o){var i,s,a,u,c=o?function(){return t}:g(t),l=h(n,r,e?2:1),d=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(p(c)){for(i=y(t.length);d<i;d++)if((u=e?l(v(s=t[d])[0],s[1]):l(t[d]))===m||u===_)return u}else for(a=c.call(t);!(s=a.next()).done;)if((u=f(a,l,s.value,e))===m||u===_)return u}).BREAK=m,e.RETURN=_},function(t,e,n){var i=n(39);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var r=n(61),o=n(21)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(206),o=n(21)("iterator"),i=n(61);t.exports=n(24).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var a=n(20),u=n(208).set,c=a.MutationObserver||a.WebKitMutationObserver,l=a.process,d=a.Promise,h="process"==n(82)(l);t.exports=function(){function t(){var t,e;for(h&&(t=l.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?o():r=void 0,t}}r=void 0,t&&t.enter()}var n,r,o;if(h)o=function(){l.nextTick(t)};else if(c){var e=!0,i=document.createTextNode("");new c(t).observe(i,{characterData:!0}),o=function(){i.data=e=!e}}else if(d&&d.resolve){var s=d.resolve();o=function(){s.then(t)}}else o=function(){u.call(a,t)};return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,o()),r=e}}},function(t,e,n){var o=n(48);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:o(t,r,e[r]);return t}},function(t,e,n){"use strict";var r=n(20),o=n(24),i=n(85),s=n(60),a=n(21)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];s&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(21)("iterator"),s=!1;try{var r=[7][i]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var r=[7],o=r[i]();o.next=function(){return{done:n=!0}},r[i]=function(){return o},t(r)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(47),o=n(24),i=n(20),s=n(207),a=n(210);r(r.P+r.R,"Promise",{finally:function(e){var n=s(this,o.Promise||i.Promise),t="function"==typeof e;return this.then(t?function(t){return a(n,e()).then(function(){return t})}:e,t?function(t){return a(n,e()).then(function(){throw t})}:e)}})},function(t,e,n){"use strict";var r=n(47),o=n(130),i=n(209);r(r.S,"Promise",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";e.__esModule=!0;var r,o=(r=n(440))&&r.__esModule?r:{default:r};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports={default:n(441),__esModule:!0}},function(t,e,n){n(442),t.exports=n(24).Object.assign},function(t,e,n){var r=n(47);r(r.S+r.F,"Object",{assign:n(443)})},function(t,e,n){"use strict";var h=n(124),f=n(444),p=n(445),v=n(122),y=n(197),o=Object.assign;t.exports=!o||n(86)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||Object.keys(o({},e)).join("")!=r})?function(t,e){for(var n=v(t),r=arguments.length,o=1,i=f.f,s=p.f;o<r;)for(var a,u=y(arguments[o++]),c=i?h(u).concat(i(u)):h(u),l=c.length,d=0;d<l;)s.call(u,a=c[d++])&&(n[a]=u[a]);return n}:o},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports={default:n(447),__esModule:!0}},function(t,e,n){var r=n(24),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){((t.exports=n).default=n).stable=r,n.stableStringify=r;var c=[];function n(t,e,n){!function t(e,n,r,o){var i;if("object"==typeof e&&null!==e){for(i=0;i<r.length;i++)if(r[i]===e)return o[n]="[Circular]",void c.push([o,n,e]);if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)t(e[i],i,r,e);else{var s=Object.keys(e);for(i=0;i<s.length;i++){var a=s[i];t(e[a],a,r,e)}}r.pop()}}(t,"",[],void 0);for(var r=JSON.stringify(t,e,n);0!==c.length;){var o=c.pop();o[0][o[1]]=o[2]}return r}function l(t,e){return t<e?-1:e<t?1:0}function r(t,e,n){for(var r=function t(e,n,r,o){var i;if("object"==typeof e&&null!==e){for(i=0;i<r.length;i++)if(r[i]===e)return o[n]="[Circular]",void c.push([o,n,e]);if("function"==typeof e.toJSON)return;if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)t(e[i],i,r,e);else{var s={},a=Object.keys(e).sort(l);for(i=0;i<a.length;i++){var u=a[i];t(e[u],u,r,e),s[u]=e[u]}if(void 0===o)return s;c.push([o,n,e]),o[n]=s}r.pop()}}(t,"",[],void 0)||t,o=JSON.stringify(r,e,n);0!==c.length;){var i=c.pop();i[0][i[1]]=i[2]}return o}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(211);function i(t){if(t)return function(t){for(var e in i.prototype)Object.prototype.hasOwnProperty.call(i.prototype,e)&&(t[e]=i.prototype[e]);return t}(t)}(t.exports=i).prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},i.prototype.parse=function(t){return this._parser=t,this},i.prototype.responseType=function(t){return this._responseType=t,this},i.prototype.serialize=function(t){return this._serializer=t,this},i.prototype.timeout=function(t){if(!t||"object"!==r(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},i.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&500<=e.status&&501!==e.status)return!0;if(t){if(t.code&&-1!==s.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(t,e){var o=this;if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(n,r){i.on("abort",function(){var t=new Error("Aborted");t.code="ABORTED",t.status=o.status,t.method=o.method,t.url=o.url,r(t)}),i.end(function(t,e){t?r(t):n(e)})})}return this._fullfilledPromise.then(t,e)},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.use=function(t){return t(this),this},i.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},i.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):200<=t.status&&t.status<300)},i.prototype.getHeader=i.prototype.get=function(t){return this._header[t.toLowerCase()]},i.prototype.set=function(t,e){if(o(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},i.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},i.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(o(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.field(t,e[r]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(r("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},i.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},i.prototype.redirects=function(t){return this._maxRedirects=t,this},i.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(t){var e=o(t),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&o(this._data))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this._data[r]=t[r]);else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||n||this.type("json"),this},i.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},i.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(0<=e){var n=this.url.substring(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.warn("Unsupported")},i.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error("".concat(t+e,"ms exceeded"));r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(t,e,n){"use strict";var o=n(452);function r(t){if(t)return function(t){for(var e in r.prototype)Object.prototype.hasOwnProperty.call(r.prototype,e)&&(t[e]=r.prototype[e]);return t}(t)}(t.exports=r).prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=o.type(e);var n=o.params(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(this[r]=n[r]);this.links={};try{t.link&&(this.links=o.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},function(t,e,n){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t,e,n){"use strict";function o(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(r){o.prototype[r]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._defaults.push({fn:r,args:e}),this}}),o.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t.args))})},t.exports=o},function(t,e,n){var f=n(131),p=n(212),v=n(214),y=n(215),g=n(455),m=n(132);t.exports=function(t,e,n,r){var o=-1,i=p,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=y(e,g(n))),r?(i=v,s=!1):200<=e.length&&(i=m,s=!1,e=new f(e));t:for(;++o<a;){var l=t[o],d=null==n?l:n(l);if(l=r||0!==l?l:0,s&&d==d){for(var h=c;h--;)if(e[h]===d)continue t;u.push(l)}else i(e,d,r)||u.push(l)}return u}},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(458),o=n(218),i=n(27),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(s&&t&&t[s])}},function(t,e,n){var r=n(217).Symbol;t.exports=r},function(n,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(this,e(7))},function(t,e,n){var r=n(219),o=n(220),i=n(221);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(222),o=n(133);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(223),o=n(87);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(466),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(i,function(t,e,n,r){o.push(n?r.replace(s,"$1"):e||t)}),o});t.exports=o},function(t,e,n){var r=n(467);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(468);function a(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var s=function(){var t=arguments,e=i?i.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var r=o.apply(this,t);return s.cache=n.set(e,r)||n,r};return s.cache=new(a.Cache||r),s}a.Cache=r,t.exports=a},function(t,e,n){var r=n(225),o=n(226),i=n(228),s=n(229),a=n(230);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e){t.exports=function(t){return t}},function(t,e,n){var g=n(136),m=n(471),_=n(231),b=n(474),w=n(475),I=n(477),O=n(478),E=n(479),T=n(481),S=n(233),A=n(234),C=n(235),R=n(483),P=n(484),j=n(485),x=n(27),M=n(237),k=n(488),N=n(87),z=n(489),D=n(90),U={};U["[object Arguments]"]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U["[object Object]"]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U["[object Function]"]=U["[object WeakMap]"]=!1,t.exports=function n(r,o,i,t,e,s){var a,u=1&o,c=2&o,l=4&o;if(i&&(a=e?i(r,t,e,s):i(r)),void 0!==a)return a;if(!N(r))return r;var d=x(r);if(d){if(a=R(r),!u)return O(r,a)}else{var h=C(r),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(M(r))return I(r,u);if("[object Object]"==h||"[object Arguments]"==h||f&&!e){if(a=c||f?{}:j(r),!u)return c?T(r,w(a,r)):E(r,b(a,r))}else{if(!U[h])return e?r:{};a=P(r,h,u)}}var p=(s=s||new g).get(r);if(p)return p;s.set(r,a),z(r)?r.forEach(function(t){a.add(n(t,o,i,t,r,s))}):k(r)&&r.forEach(function(t,e){a.set(e,n(t,o,i,e,r,s))});var v=l?c?A:S:c?keysIn:D,y=d?void 0:v(r);return m(y||r,function(t,e){y&&(t=r[e=t]),_(a,e,n(t,o,i,e,r,s))}),a}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(473),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(63),o=n(90);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(63),o=n(476);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,s,a){(function(t){var e=a(217),n=s&&!s.nodeType&&s,r=n&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===n?e.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=i?i(n):new t.constructor(n);return t.copy(r),r}}).call(this,a(78)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e=e||Array(r);++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(63),o=n(480);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(63),o=n(482);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(){return[]}},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(486),o=n(236),i=n(487);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){function r(t){if(!o(t))return{};if(i)return i(t);s.prototype=t;var e=new s;return s.prototype=void 0,e}var o=n(87),i=Object.create;function s(){}t.exports=r},function(t,e){t.exports=function(){return!1}},function(t,e){t.exports=function(){return!1}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(88),o=n(491),i=n(492),s=n(62);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[s(o(e))]}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(134),o=n(493);t.exports=function(t,e){return e.length<2?t:r(t,o(e,0,-1))}},function(t,e){t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(n=o<n?o:n)<0&&(n+=o),o=n<e?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},function(t,e,n){var r=n(495);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){var r=n(223),o=n(236),i=n(133),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(t,e,n){var r=n(497),o=n(220),i=n(221);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(216);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var s=n(499),a=n(500),u=n(506),c=n(27);t.exports=function(o,i){return function(t,e){var n=c(t)?s:a,r=i?i():{};return n(t,o,u(e,2),r)}}},function(t,e){t.exports=function(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var s=t[o];e(r,s,n(s),t)}return r}},function(t,e,n){var s=n(501);t.exports=function(t,r,o,i){return s(t,function(t,e,n){r(i,t,o(t),n)}),i}},function(t,e,n){var r=n(502),o=n(505)(r);t.exports=o},function(t,e,n){var r=n(503),o=n(90);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(504)();t.exports=r},function(t,e){t.exports=function(u){return function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var a=i[u?s:++r];if(!1===e(o[a],a,o))break}return t}}},function(t,e,n){var a=n(222);t.exports=function(i,s){return function(t,e){if(null==t)return t;if(!a(t))return i(t,e);for(var n=t.length,r=s?n:-1,o=Object(t);(s?r--:++r<n)&&!1!==e(o[r],r,o););return t}}},function(t,e,n){var r=n(507),o=n(516),i=n(219),s=n(27),a=n(521);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?s(t)?o(t[0],t[1]):r(t):a(t)}},function(t,e,n){var r=n(508),o=n(515),i=n(240);t.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?i(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},function(t,e,n){var f=n(136),p=n(238);t.exports=function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var u=(a=n[o])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var d=new f;if(r)var h=r(c,l,u,t,e,d);if(!(void 0===h?p(l,c,3,r,d):h))return!1}}return!0}},function(t,e,n){var v=n(136),y=n(510),g=n(512),m=n(513),_=n(235),b=n(27),w=n(237),I=n(514),O="[object Object]",E=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,o,i){var s=b(t),a=b(e),u=s?"[object Array]":_(t),c=a?"[object Array]":_(e),l=(u="[object Arguments]"==u?O:u)==O,d=(c="[object Arguments]"==c?O:c)==O,h=u==c;if(h&&w(t)){if(!w(e))return!1;l=!(s=!0)}if(h&&!l)return i=i||new v,s||I(t)?y(t,e,n,r,o,i):g(t,e,u,n,r,o,i);if(!(1&n)){var f=l&&E.call(t,"__wrapped__"),p=d&&E.call(e,"__wrapped__");if(f||p)return o(f?t.value():t,p?e.value():e,n,r,i=i||new v)}return!!h&&(i=i||new v,m(t,e,n,r,o,i))}},function(t,e,n){var y=n(131),g=n(511),m=n(132);t.exports=function(t,e,n,r,o,i){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var c=i.get(t);if(c&&i.get(e))return c==e;var l=-1,d=!0,h=2&n?new y:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var f=t[l],p=e[l];if(r)var v=s?r(p,f,l,e,t,i):r(f,p,l,t,e,i);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!g(e,function(t,e){if(!m(h,e)&&(f===t||o(f,t,n,r,i)))return h.push(e)})){d=!1;break}}else if(f!==p&&!o(f,p,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var _=n(233),b=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,o,i){var s=1&n,a=_(t),u=a.length;if(u!=_(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:b.call(e,l)))return!1}var d=i.get(t);if(d&&i.get(e))return d==e;var h=!0;i.set(t,e),i.set(e,t);for(var f=s;++c<u;){var p=t[l=a[c]],v=e[l];if(r)var y=s?r(v,p,l,e,t,i):r(p,v,l,t,e,i);if(!(void 0===y?p===v||o(p,v,n,r,i):y)){h=!1;break}f=f||"constructor"==l}if(h&&!f){var g=t.constructor,m=e.constructor;g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(t),i.delete(e),h}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(239),s=n(90);t.exports=function(t){for(var e=s(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,i(o)]}return e}},function(t,e,n){var o=n(238),i=n(9),s=n(517),a=n(135),u=n(239),c=n(240),l=n(62);t.exports=function(n,r){return a(n)&&u(r)?c(l(n),r):function(t){var e=i(t,n);return void 0===e&&e===r?s(t,n):o(r,e,3)}}},function(t,e,n){var r=n(518),o=n(519);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var a=n(88),u=n(218),c=n(27),l=n(520),d=n(224),h=n(62);t.exports=function(t,e,n){for(var r=-1,o=(e=a(e,t)).length,i=!1;++r<o;){var s=h(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&d(o)&&l(s,o)&&(c(t)||u(t))}},function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&-1<t&&t%1==0&&t<e}},function(t,e,n){var r=n(522),o=n(523),i=n(135),s=n(62);t.exports=function(t){return i(t)?r(s(t)):o(t)}},function(t,e){t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(134);t.exports=function(e){return function(t){return r(t,e)}}},function(t,e,n){var f=n(131),p=n(212),v=n(214),y=n(132),g=n(525),m=n(526);t.exports=function(t,e,n){var r=-1,o=p,i=t.length,s=!0,a=[],u=a;if(n)s=!1,o=v;else if(200<=i){var c=e?null:g(t);if(c)return m(c);s=!1,o=y,u=new f}else u=e?[]:a;t:for(;++r<i;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,s&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),a.push(l)}else o(u,d,n)||(u!==a&&u.push(d),a.push(l))}return a}},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r,o=o||function(a){"use strict";if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=a.document,u=function(){return a.URL||a.webkitURL||a},c=t.createElementNS("http://www.w3.org/1999/xhtml","a"),l="download"in c,d=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(t){(a.setImmediate||a.setTimeout)(function(){throw t},0)},p=function(t){setTimeout(function(){"string"==typeof t?u().revokeObjectURL(t):t.remove()},4e4)},v=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},r=function(t,n,e){e||(t=v(t));function r(){!function(t,e){for(var n=(e=[].concat(e)).length;n--;){var r=t["on"+e[n]];if("function"==typeof r)try{r.call(t,t)}catch(t){f(t)}}}(i,"writestart progress write writeend".split(" "))}var o,i=this,s="application/octet-stream"===t.type;if(i.readyState=i.INIT,l)return o=u().createObjectURL(t),void setTimeout(function(){var t,e;c.href=o,c.download=n,t=c,e=new MouseEvent("click"),t.dispatchEvent(e),r(),p(o),i.readyState=i.DONE});!function(){if((h||s&&d)&&a.FileReader){var e=new FileReader;return e.onloadend=function(){var t=h?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(t,"_blank")||(a.location.href=t),t=void 0,i.readyState=i.DONE,r()},e.readAsDataURL(t),i.readyState=i.INIT}o=o||u().createObjectURL(t),s?a.location.href=o:a.open(o,"_blank")||(a.location.href=o),i.readyState=i.DONE,r(),p(o)}()},e=r.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=v(t)),navigator.msSaveOrOpenBlob(t,e)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(t,e,n){return new r(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=o:null!==n(528)&&null!==n(529)&&(void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(t,e,n){var r=n(531);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var c=n(532),l=n(533);t.exports=function t(e,n,r,o,i){var s=-1,a=e.length;for(r=r||l,i=i||[];++s<a;){var u=e[s];0<n&&r(u)?1<n?t(u,n-1,r,o,i):c(i,u):o||(i[i.length]=u)}return i}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(534),o=n(192),i=n(19),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(s&&t&&t[s])}},function(t,e,n){var r=n(535).Symbol;t.exports=r},function(t,e,n){var r=n(536),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(n,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(this,e(7))},function(t,e,n){var r=n(538);t.exports=function(t){return null!=t&&t.length?r(t,0,-1):[]}},function(t,e){t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(n=o<n?o:n)<0&&(n+=o),o=n<e?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},function(t,e,n){var r=n(58),o=n(55),i=n(540),s=n(19);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},function(t,e,n){var s=n(91),a=n(138);t.exports=function(t,r){var o=-1,i=a(t)?Array(t.length):[];return s(t,function(t,e,n){i[++o]=r(t,e,n)}),i}},function(t,e,n){var r=n(542),o=n(56);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(543)();t.exports=r},function(t,e){t.exports=function(u){return function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var a=i[u?s:++r];if(!1===e(o[a],a,o))break}return t}}},function(t,e,n){var a=n(138);t.exports=function(i,s){return function(t,e){if(null==t)return t;if(!a(t))return i(t,e);for(var n=t.length,r=s?n:-1,o=Object(t);(s?r--:++r<n)&&!1!==e(o[r],r,o););return t}}},function(t,e,n){var r=n(546),o=n(119);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(548);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var f=n(117),p=n(241),v=n(242),y=n(118),g=n(549),m=n(550);t.exports=function(t,e,n){var r=-1,o=p,i=t.length,s=!0,a=[],u=a;if(n)s=!1,o=v;else if(200<=i){var c=e?null:g(t);if(c)return m(c);s=!1,o=y,u=new f}else u=e?[]:a;t:for(;++r<i;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,s&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),a.push(l)}else o(u,d,n)||(u!==a&&u.push(d),a.push(l))}return a}},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(552),o=n(554),i=n(558),s=o(function(t,e){return i(t)?r(t,e):[]});t.exports=s},function(t,e,n){var f=n(117),p=n(241),v=n(242),y=n(58),g=n(553),m=n(118);t.exports=function(t,e,n,r){var o=-1,i=p,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=y(e,g(n))),r?(i=v,s=!1):200<=e.length&&(i=m,s=!1,e=new f(e));t:for(;++o<a;){var l=t[o],d=null==n?l:n(l);if(l=r||0!==l?l:0,s&&d==d){for(var h=c;h--;)if(e[h]===d)continue t;u.push(l)}else i(e,d,r)||u.push(l)}return u}},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,e,n){var r=n(195),o=n(555),i=n(557);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){var u=n(556),c=Math.max;t.exports=function(i,s,a){return s=c(void 0===s?i.length-1:s,0),function(){for(var t=arguments,e=-1,n=c(t.length-s,0),r=Array(n);++e<n;)r[e]=t[s+e];e=-1;for(var o=Array(s+1);++e<s;)o[e]=t[e];return o[s]=a(r),u(i,this,o)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(138),o=n(189);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){function r(s){return s.every=function(t,e,n){s._time(),n||(n=e,e=null);var r=o+=1;return s._timers[r]={visible:t,hidden:e,callback:n},s._run(r,!1),s.isSupported()&&s._listen(),r},s.stop=function(t){return!!s._timers[t]&&(s._stop(t),delete s._timers[t],!0)},s._timers={},s._time=function(){s._timed||(s._timed=!0,s._wasHidden=s.hidden(),s.change(function(){s._stopRun(),s._wasHidden=s.hidden()}))},s._run=function(t,e){var n,r=s._timers[t];if(s.hidden()){if(null===r.hidden)return;n=r.hidden}else n=r.visible;function o(){r.last=new Date,r.callback.call(a)}if(e){var i=new Date-r.last;i<n?r.delay=setTimeout(function(){r.id=setInterval(o,n),o()},n-i):(r.id=setInterval(o,n),o())}else r.id=setInterval(o,n)},s._stop=function(t){var e=s._timers[t];clearInterval(e.id),clearTimeout(e.delay),delete e.id,delete e.delay},s._stopRun=function(t){var e=s.hidden(),n=s._wasHidden;if(e&&!n||!e&&n)for(var r in s._timers)s._stop(r),s._run(r,!e)},s}var a,o;a=window,o=-1,t.exports?t.exports=r(n(244)):r(a.Visibility||n(244))},function(t,e,n){var r=n(561),u=n(562),c=n(563),o=/^\d+$/,l=Object.prototype.hasOwnProperty,i=r(Object,"keys"),s=("length",function(t){return null==t?void 0:t.length});function d(t,e){return e=null==e?9007199254740991:e,-1<(t="number"==typeof t||o.test(t)?+t:-1)&&t%1==0&&t<e}function h(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}function a(t){for(var e=function(t){if(null==t)return[];f(t)||(t=Object(t));var e=t.length;e=e&&h(e)&&(c(t)||u(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,i=Array(e),s=0<e;++r<e;)i[r]=r+"";for(var a in t)s&&d(a,e)||"constructor"==a&&(o||!l.call(t,a))||i.push(a);return i}(t),n=e.length,r=n&&t.length,o=!!r&&h(r)&&(c(t)||u(t)),i=-1,s=[];++i<n;){var a=e[i];(o&&d(a,r)||l.call(t,a))&&s.push(a)}return s}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var p=i?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&null!=(e=t)&&h(s(e))?a(t):f(t)?i(t):[]}:a;t.exports=p},function(t,e){var s=/^\[object .+?Constructor\]$/,n=Object.prototype,a=Function.prototype.toString,r=n.hasOwnProperty,u=n.toString,c=RegExp("^"+a.call(r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t,e){var n,r,o,i=null==t?void 0:t[e];return null!=(n=i)&&(o=typeof(r=n),!r||"object"!=o&&"function"!=o||"[object Function]"!=u.call(r)?n&&"object"==typeof n&&s.test(n):c.test(a.call(n)))?i:void 0}},function(t,e){var n=Object.prototype,o=n.hasOwnProperty,i=n.toString,s=n.propertyIsEnumerable;t.exports=function(t){return!!t&&"object"==typeof t&&null!=(e=t)&&"number"==typeof(r=e.length)&&-1<r&&r%1==0&&r<=9007199254740991&&(typeof e,!("[object Function]"==(n="")||"[object GeneratorFunction]"==n))&&o.call(t,"callee")&&(!s.call(t,"callee")||"[object Arguments]"==i.call(t));var e,n,r}},function(t,e){var n=/^\[object .+?Constructor\]$/;function r(t){return!!t&&"object"==typeof t}var o,i,s,a,u,c=Object.prototype,l=Function.prototype.toString,d=c.hasOwnProperty,h=c.toString,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=("isArray",null!=(s=i=null==(o=Array)?void 0:o.isArray)&&(u=typeof(a=s),!a||"object"!=u&&"function"!=u||"[object Function]"!=h.call(a)?r(s)&&n.test(s):f.test(l.call(s)))?i:void 0)||function(t){return r(t)&&("number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=9007199254740991)&&"[object Array]"==h.call(t);var e};t.exports=p},function(t,e,n){var r=n(565),o=n(56);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(58);t.exports=function(e,t){return r(t,function(t){return e[t]})}},function(t,e,n){var r=n(196),o=n(567)(function(t,e,n){r(t,n,e)});t.exports=o},function(t,e,n){var s=n(568),a=n(569),u=n(55),c=n(19);t.exports=function(o,i){return function(t,e){var n=c(t)?s:a,r=i?i():{};return n(t,o,u(e,2),r)}}},function(t,e){t.exports=function(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var s=t[o];e(r,s,n(s),t)}return r}},function(t,e,n){var s=n(91);t.exports=function(t,r,o,i){return s(t,function(t,e,n){r(i,t,o(t),n)}),i}},function(t,e,n){t.exports=n(571)},function(t,e,n){var r=n(572),o=n(91),i=n(573),s=n(19);t.exports=function(t,e){return(s(t)?r:o)(t,i(e))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(575),o=n(576),i=n(55),s=n(19);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}},function(t,e,n){var i=n(91);t.exports=function(t,r){var o=[];return i(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o}},function(t,e,n){var r=n(578)(n(56));t.exports=r},function(t,e,n){var r=n(579),o=n(188),i=n(580),s=n(581);t.exports=function(n){return function(t){var e=o(t);return"[object Map]"==e?i(t):"[object Set]"==e?s(t):r(t,n(t))}}},function(t,e,n){var r=n(58);t.exports=function(e,t){return r(t,function(t){return[t,e[t]]})}},function(t,e){t.exports=function(){return[]}},function(t,e){t.exports=function(){return[]}},function(t,e,n){"use strict";n.r(e),n.d(e,"TigerConnectClient",function(){return th});var m={};n.r(m),n.d(m,"Calls",function(){return Te}),n.d(m,"Conversations",function(){return Ae}),n.d(m,"DistributionLists",function(){return je}),n.d(m,"Entities",function(){return Ne}),n.d(m,"Escalations",function(){return Le}),n.d(m,"Events",function(){return Ge}),n.d(m,"Groups",function(){return Ze}),n.d(m,"Messages",function(){return cn}),n.d(m,"MessageTemplates",function(){return hn}),n.d(m,"Metadata",function(){return yn}),n.d(m,"Mute",function(){return bn}),n.d(m,"Notifications",function(){return In}),n.d(m,"Organizations",function(){return An}),n.d(m,"Patients",function(){return Rn}),n.d(m,"QRCode",function(){return jn}),n.d(m,"Reporting",function(){return Dn}),n.d(m,"Roles",function(){return Bn}),n.d(m,"RoleTags",function(){return Vn}),n.d(m,"Roster",function(){return $n}),n.d(m,"Scheduler",function(){return Zn}),n.d(m,"ScheduledMessages",function(){return er}),n.d(m,"Search",function(){return ir}),n.d(m,"Teams",function(){return hr}),n.d(m,"Twilio",function(){return pr}),n.d(m,"TypingStatus",function(){return yr}),n.d(m,"UserRoles",function(){return mr}),n.d(m,"Users",function(){return _r.a}),n.d(m,"VirtualWaitingRoom",function(){return Ir});var _={};n.r(_),n.d(_,"AllowedSendersReason",function(){return vo}),n.d(_,"ConversationAnchorPoints",function(){return yo}),n.d(_,"EscalationChangeAction",function(){return go}),n.d(_,"EscalationStatus",function(){return mo}),n.d(_,"GroupType",function(){return _o}),n.d(_,"MessagePriority",function(){return bo}),n.d(_,"MessageRecipientStatus",function(){return Oo}),n.d(_,"MessageSenderStatus",function(){return Eo}),n.d(_,"MessageSubType",function(){return To}),n.d(_,"MessageType",function(){return So}),n.d(_,"Networks",function(){return Ao}),n.d(_,"PatientCareCardActionType",function(){return Co}),n.d(_,"PatientCareCardType",function(){return Ro}),n.d(_,"PatientCareCardUIType",function(){return Po}),n.d(_,"PresenceStatus",function(){return jo}),n.d(_,"ProcessingActionTypes",function(){return xo}),n.d(_,"SearchType",function(){return Mo}),n.d(_,"TypingContext",function(){return ko}),n.d(_,"VideoCallMemberStatus",function(){return No}),n.d(_,"VisibilityType",function(){return zo});var b={};n.r(b),n.d(b,"Calls",function(){return ua}),n.d(b,"Conversations",function(){return Ua}),n.d(b,"DistributionLists",function(){return Va}),n.d(b,"Entities",function(){return Ha}),n.d(b,"Escalations",function(){return Ya}),n.d(b,"EventRouter",function(){return $a}),n.d(b,"Events",function(){return au}),n.d(b,"Forums",function(){return cu}),n.d(b,"Groups",function(){return hu}),n.d(b,"Messages",function(){return mu}),n.d(b,"MessageTemplates",function(){return wu}),n.d(b,"Metadata",function(){return Eu}),n.d(b,"Mute",function(){return Cu}),n.d(b,"NotificationRouter",function(){return Ru}),n.d(b,"Notifications",function(){return Mu}),n.d(b,"Organizations",function(){return Uu}),n.d(b,"Patients",function(){return qu}),n.d(b,"Presence",function(){return jc}),n.d(b,"Products",function(){return Mc}),n.d(b,"Roles",function(){return Dc}),n.d(b,"RoleTags",function(){return Fc}),n.d(b,"ScheduledMessages",function(){return Vc}),n.d(b,"Search",function(){return ql}),n.d(b,"Teams",function(){return Gl}),n.d(b,"TypingStatus",function(){return $l}),n.d(b,"UserRoles",function(){return Zl}),n.d(b,"Users",function(){return rd}),n.d(b,"VirtualWaitingRoom",function(){return sd});var i={};n.r(i),n.d(i,"Call",function(){return ad}),n.d(i,"CallLogEntry",function(){return ud}),n.d(i,"Conversation",function(){return cd}),n.d(i,"DistributionList",function(){return ld}),n.d(i,"EscalationExecution",function(){return dd}),n.d(i,"EscalationExecutionChange",function(){return hd}),n.d(i,"EscalationPolicy",function(){return fd}),n.d(i,"Group",function(){return pd}),n.d(i,"GroupMembersChange",function(){return vd}),n.d(i,"Message",function(){return yd}),n.d(i,"MessageStatusPerRecipient",function(){return gd}),n.d(i,"MessageTemplate",function(){return md}),n.d(i,"Metadata",function(){return _d}),n.d(i,"Mute",function(){return bd}),n.d(i,"Organization",function(){return xd}),n.d(i,"Patient",function(){return Md}),n.d(i,"PatientContact",function(){return kd}),n.d(i,"Product",function(){return Nd}),n.d(i,"ProductRoles",function(){return Ld}),n.d(i,"Role",function(){return Fd}),n.d(i,"RoleTag",function(){return Bd}),n.d(i,"ScheduledMessage",function(){return qd}),n.d(i,"Team",function(){return Vd}),n.d(i,"TeamRequest",function(){return Gd}),n.d(i,"User",function(){return zl}),n.d(i,"UserRoles",function(){return Hd}),n.d(i,"VirtualWaitingRoom",function(){return Wd}),n.d(i,"VirtualWaitingRoomVisit",function(){return Yd});function u(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function c(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function a(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function l(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function r(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function d(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function h(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function o(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function s(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function f(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function p(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function v(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function y(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function g(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function w(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function I(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function O(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function E(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function T(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function S(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function A(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function C(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function R(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function P(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function j(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function x(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function M(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function k(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function N(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function z(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function D(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function U(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function L(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function F(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function B(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function q(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function V(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function G(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function H(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function W(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Y(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function K(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function $(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function X(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Q(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Z(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function J(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function tt(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function et(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function nt(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function rt(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function ot(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function it(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function st(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function at(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function ut(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function ct(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function lt(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var dt,ht,ft,pt,vt,yt,gt,mt,_t,bt,wt,It,Ot,Et,Tt,St,At,Ct,Rt,Pt,jt,xt,Mt,kt,Nt,zt,Dt,Ut,Lt,Ft,Bt,qt,Vt,Gt,Ht,Wt,Yt,Kt,$t,Xt,Qt,Zt,Jt,te,ee,ne,re,oe,ie,se,ae,ue,ce,le,de=n(11),he=n.n(de),fe=n(49),pe=n.n(fe),ve=n(2),ye=n.n(ve),ge=n(140),me=n.n(ge),_e=n(17),be=n.n(_e),we=n(1),Ie=n(5),Oe=(dt=function(t,e){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}dt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ee=function(){return(Ee=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Te=(le=we.c,Oe(Qr,le),Qr.prototype.start=function(o){return u(this,void 0,void 0,function(){var e,n,r;return c(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/voip_call",{data:Ie.a.underscoreObject(o),headers:{"TT-X-Organization-Key":o.organizationId}})];case 1:return e=t.sent(),n=Object(ve.get)(e,"data.disabled_participants",{}),(r=Ie.a.camelizeObject(e.data)).disabledParticipants=n,[2,r]}})})},Qr.prototype.end=function(r,o,t){var i=t.callId,s=t.payload,a=t.reason;return u(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=Object(ve.get)(s,"disabledParticipants",{}),(n=Ie.a.underscoreObject({payload:s,reason:a,callId:i})).payload.disabled_participants=e,[4,this.httpClient.post("/v2/voip_call/"+r+"/end",{data:n,headers:{"TT-X-Organization-Key":o}})];case 1:return t.sent(),[2]}})})},Qr.prototype.join=function(e,n){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v2/voip_call/"+e,{headers:{"TT-X-Organization-Key":n}})];case 1:return[2,t.sent().data]}})})},Qr.prototype.answer=function(r,o,t){var i=t.callId,s=t.payload;return u(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=Object(ve.get)(s,"disabledParticipants",{}),(n=Ie.a.underscoreObject({callId:i,payload:Ee(Ee({},s),{reason:"answered",callId:i}),reason:"answered",type:"call_answered",roomName:r})).payload.disabled_participants=e,[4,this.httpClient.post("/v2/voip_call/"+r+"/answer",{data:n,headers:{"TT-X-Organization-Key":o}})];case 1:return[2,t.sent().data]}})})},Qr.prototype.invite=function(r,o,t){var i=t.callId,s=t.payload,a=t.recipients;return u(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=Object(ve.get)(s,"disabledParticipants",{}),(n=Ie.a.underscoreObject({callId:i,payload:s,recipients:a})).payload.disabled_participants=e,[4,this.httpClient.post("/v2/voip_call/"+r+"/add_participants",{data:n,headers:{"TT-X-Organization-Key":o}})];case 1:return t.sent(),[2]}})})},Qr.prototype.state=function(r,o,t){var i=t.callId,s=t.payload;return u(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=Object(ve.get)(s,"disabledParticipants",{}),(n=Ie.a.underscoreObject({callId:i,payload:Ee(Ee({},s),{callId:i})})).payload.disabled_participants=e,[4,this.httpClient.post("/v2/voip_call/"+r+"/state",{data:n,headers:{"TT-X-Organization-Key":o}})];case 1:return t.sent(),[2]}})})},Qr.prototype.log=function(t){var n=t.network,r=t.organizationId,o=t.page;return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e={network:n,size:10},o&&(e.page=o),[4,this.httpClient.get("/v2/call_log",{headers:{"TT-X-Organization-Key":r},query:e})];case 1:return[2,t.sent().data]}})})},Qr),Se=(ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ae=(ue=we.c,Se(Xr,ue),Xr.prototype.find=function(e){return a(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v5/conversation/:id",{urlParams:{id:e}})];case 1:return[2,t.sent().data]}})})},Xr.prototype.updateConversationStatus=function(n,r,t){var e=void 0===t?{}:t,o=e.highestSortNumber,i=e.lowestSortNumber;return a(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return e={status:r},o&&(e.highest_sort_number=o),i&&(e.lowest_sort_number=i),[4,this.httpClient.post("/v5/conversation/:id/status",{urlParams:{id:n},data:e})];case 1:return[2,t.sent().data]}})})},Xr.prototype.fetchTimeline=function(e,n,r,t){var o=t.continuation,i=t.markAsDelivered,s=void 0===i||i;return a(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/conversation/:id/timeline",{urlParams:{id:e},data:{anchor_point:n,continuation:o,mark_as_delivered:s,max_items:r}})];case 1:return[2,t.sent().data]}})})},Xr),Ce=(ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Re=we.b.VERSION_TWO,Pe=we.a.DISTRIBUTION_LIST_FIND,je=(se=we.c,Ce($r,se),$r.prototype.batch=function(t){var n=t.ids,r=t.operation,o=t.organizationId;return d(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.patch("/v5/dist_list",{data:{ids:n,operation:r},headers:e})];case 1:return t.sent(),[2]}})})},$r.prototype.create=function(t){var n=t.adminOnly,r=t.members,o=t.name,i=t.network,s=t.organizationId;return d(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":s},[4,this.httpClient.post("/v5/dist_list",{data:{admin_only:n,members:r,name:o,network:i},headers:e})];case 1:return[2,t.sent().data]}})})},$r.prototype.delete=function(n,r){return d(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.del("/v5/dist_list/:id",{headers:e,urlParams:{id:n}})];case 1:return t.sent(),[2]}})})},$r.prototype.find=function(o,t){var i=(void 0===t?{}:t).organizationId;return d(this,void 0,void 0,function(){var e,n,r;return h(this,function(t){switch(t.label){case 0:return e=se.prototype.getVersion.call(this,Pe).version,n=void 0===e?Re:e,r={},i&&(r["TT-X-Organization-Key"]=i),[4,this.httpClient.get("/:version/dist_list/:id",{headers:r,urlParams:{id:o,version:n}})];case 1:return[2,t.sent().data]}})})},$r.prototype.findMemberIds=function(i,s,t){var a=(void 0===t?{}:t).continuation;return d(this,void 0,void 0,function(){var e,n,r,o;return h(this,function(t){switch(t.label){case 0:return e=se.prototype.getVersion.call(this,Pe).version,n=void 0===e?Re:e,r={"TT-X-Organization-Key":s},o="/:version/dist_list/:id/members",a&&(o+="/?continuation=:continuation"),[4,this.httpClient.get(o,{headers:r,urlParams:{continuation:a,id:i,version:n}})];case 1:return[2,t.sent().data]}})})},$r.prototype.membersBatch=function(t){var n=t.id,r=t.members,o=t.operation,i=t.organizationId;return d(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":i},[4,this.httpClient.patch("/v5/dist_list/:id/members",{data:{members:r,operation:o},headers:e,urlParams:{id:n}})];case 1:return[2,t.sent().data]}})})},$r.prototype.update=function(t){var n=t.adminOnly,r=t.id,o=t.name,i=t.organizationId;return d(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":i},[4,this.httpClient.put("/v5/dist_list/:id",{data:{admin_only:n,name:o},headers:e,urlParams:{id:r}})];case 1:return[2,t.sent().data]}})})},r([Object(we.d)()],$r.prototype,"delete",null),r([Object(we.d)()],$r.prototype,"find",null),r([Object(we.d)()],$r.prototype,"findMemberIds",null),r([Object(we.d)()],$r.prototype,"membersBatch",null),r([Object(we.d)()],$r.prototype,"update",null),$r),xe=(ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Me=we.b.VERSION_TWO,ke=we.a.ENTITIES_FIND_ALL,Ne=(oe=we.c,xe(Kr,oe),Kr.prototype.findMulti=function(t){var i=t.users,s=t.metadata,a=t.organizationId;return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){var e,n,r,o;return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:return e=oe.prototype.getVersion.call(this,ke).version,n=void 0===e?Me:e,r={"TT-X-Organization-Key":a},o={render_owner_object:"true"},[4,this.httpClient.post("/:version/entities_bulk",{urlParams:{version:n},data:{users:i,metadata:s},headers:r,query:o})];case 1:return[2,t.sent().data]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(we.d)()],Kr.prototype,"findMulti",null),Kr),ze=(re=function(t,e){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}re(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),De=we.b.VERSION_TWO,Ue=we.a.ESCALATION,Le=(ne=we.c,ze(Yr,ne),Yr.prototype.escalateMessage=function(r){return s(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return e=ne.prototype.getVersion.call(this,Ue).version,n=void 0===e?De:e,[4,this.httpClient.post("/:version/message/:messageId/escalation",{urlParams:{version:n,messageId:r}})];case 1:return[2,t.sent().data]}})})},Yr.prototype.acknowledge=function(r,t){var o=t.messageId,i=t.userTokens;return s(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return e=ne.prototype.getVersion.call(this,Ue).version,n=void 0===e?De:e,[4,this.httpClient.post("/:version/message/:messageId/escalation/:escalationId/confirm",{urlParams:{version:n,escalationId:r,messageId:o},data:{confirm_as:i}})];case 1:return[2,t.sent().data]}})})},Yr.prototype.cancel=function(r){return s(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return e=ne.prototype.getVersion.call(this,Ue).version,n=void 0===e?De:e,[4,this.httpClient.del("/:version/message/:messageId/escalation",{urlParams:{version:n,messageId:r}})];case 1:return t.sent(),[2]}})})},Yr.prototype.skip=function(r,t){var o=t.messageId,i=t.userTokens;return s(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return e=ne.prototype.getVersion.call(this,Ue).version,n=void 0===e?De:e,[4,this.httpClient.post("/:version/message/:messageId/escalation/:escalationId/skip",{urlParams:{version:n,escalationId:r,messageId:o},data:{skip_as:i}})];case 1:return[2,t.sent().data]}})})},o([Object(we.d)()],Yr.prototype,"escalateMessage",null),o([Object(we.d)()],Yr.prototype,"acknowledge",null),o([Object(we.d)()],Yr.prototype,"cancel",null),o([Object(we.d)()],Yr.prototype,"skip",null),Yr),Fe=(ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Be=we.b.VERSION_TWO,qe=we.a.EVENTS_ACK,Ve=we.a.EVENTS_CLOSE_ALL_CONNECTIONS,Ge=(te=we.c,Fe(Wr,te),Wr.prototype.ack=function(r){return p(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=te.prototype.getVersion.call(this,qe).version,n=void 0===e?Be:e,[4,this.httpClient.post("/:version/events/ack",{urlParams:{version:n},data:{events:r}})];case 1:return t.sent(),[2]}})})},Wr.prototype.closeAllConnections=function(){return p(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=te.prototype.getVersion.call(this,Ve).version,n=void 0===e?Be:e,[4,this.httpClient.del("/:version/events",{urlParams:{version:n}})];case 1:return t.sent(),[2]}})})},Wr),He=(Jt=function(t,e){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),We=we.b.VERSION_TWO,Ye=we.a.GROUP_ADD_MEMBERS,Ke=we.a.GROUP_CREATE,$e=we.a.GROUP_DESTROY,Xe=we.a.GROUP_FIND,Qe=we.a.GROUP_UPDATE,Ze=(Zt=we.c,He(Hr,Zt),Hr.prototype.create=function(t){var a=t.avatarFile,u=t.description,c=t.excludeCreator,e=t.isPublic,l=void 0!==e&&e,n=t.memberIds,d=void 0===n?[]:n,h=t.metadata,f=t.name,p=t.organizationId,r=t.renderEntity,v=void 0===r||r,o=t.replayHistory,y=void 0!==o&&o;return g(this,void 0,void 0,function(){var e,n,r,o,i,s;return w(this,function(t){switch(t.label){case 0:return e=Zt.prototype.getVersion.call(this,Ke).version,n=void 0===e?We:e,r={},o={is_public:l,members:d.join(","),metadata:h,name:f,replay_history:y},i={},s={exclude_creator:c,render_entity:v},a&&(i.avatar=a),u&&(o.description=u),p&&(r["TT-X-Organization-Key"]=p),[4,this.httpClient.post("/:version/group",{urlParams:{version:n},query:s,headers:r,data:o,files:i})];case 1:return[2,t.sent().data]}})})},Hr.prototype.update=function(a,t){var e=t.name,u=void 0===e?void 0:e,n=t.avatarFile,c=void 0===n?void 0:n,r=t.replayHistory,l=void 0===r?void 0:r,d=t.memberIds;return g(this,void 0,void 0,function(){var e,n,r,o,i,s;return w(this,function(t){switch(t.label){case 0:return e=Zt.prototype.getVersion.call(this,Qe).version,n=void 0===e?We:e,r={},o={},void 0!==u&&(r.name=u),void 0!==d&&(r.members=d.join(",")),void 0!==l&&(r.replay_history=l),c&&(o.avatar=c),[4,this.httpClient.post("/:version/group/:id",{urlParams:{id:a,version:n},data:r,files:o})];case 1:return i=t.sent(),s=i.getHeader("TT-X-Group-Avatar"),[2,{id:a,avatarUrl:s}]}})})},Hr.prototype.find=function(r){return g(this,void 0,void 0,function(){var e,n;return w(this,function(t){switch(t.label){case 0:return e=Zt.prototype.getVersion.call(this,Xe).version,n=void 0===e?We:e,[4,this.httpClient.get("/:version/group/:id",{urlParams:{id:r,version:n},query:{render_metadata:"true"}})];case 1:return[2,t.sent().data]}})})},Hr.prototype.findAllMemberIds=function(e){return g(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/:version/group/:id/members",{urlParams:{id:e,version:We}})];case 1:return[2,t.sent().data]}})})},Hr.prototype.destroy=function(r){return g(this,void 0,void 0,function(){var e,n;return w(this,function(t){switch(t.label){case 0:return e=Zt.prototype.getVersion.call(this,$e).version,n=void 0===e?We:e,[4,this.httpClient.del("/:version/group/:id",{urlParams:{id:r,version:n}})];case 1:return t.sent(),[2,!0]}})})},Hr.prototype.addMembers=function(r,o){return g(this,void 0,void 0,function(){var e,n;return w(this,function(t){switch(t.label){case 0:return e=Zt.prototype.getVersion.call(this,Ye).version,n=void 0===e?We:e,[4,this.httpClient.post("/:version/group/:id/members",{urlParams:{id:r,version:n},data:{members:o}})];case 1:return[2,t.sent().data]}})})},Hr.prototype.removeMembers=function(e,n){return g(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/group/:id/members/remove",{urlParams:{id:e},data:{members:n}})];case 1:return t.sent(),[2]}})})},y([Object(we.d)()],Hr.prototype,"find",null),y([Object(we.d)()],Hr.prototype,"findAllMemberIds",null),y([Object(we.d)()],Hr.prototype,"destroy",null),Hr),Je=n(14),tn=(Qt=function(t,e){return(Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),en=function(){return(en=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nn=we.b.VERSION_FIVE,rn=we.b.VERSION_TWO,on=we.a.MESSAGE_FIND,sn=we.a.MESSAGE_FORWARD,an=we.a.MESSAGE_SEND,un=we.a.MESSAGE_UPDATE_RECIPIENT_STATUS_MULTI,cn=(Xt=we.c,tn(Gr,Xt),Gr.prototype.send=function(t){var d=t.attachment,h=t.body,f=t.conversationId,p=t.counterPartyId,v=t.deleteOnRead,y=t.escalate,g=t.localId,m=t.metadata,_=t.priority,b=t.recipientOrganizationId,w=t.senderOrganizationId,I=t.ttl;return O(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l;return E(this,function(t){switch(t.label){case 0:e=Xt.prototype.getVersion.call(this,an).version,r={body:h},o={},i={},(n=void 0===e?rn:e)===rn?(Object(Je.isEmail)(p)&&(p=p.toLowerCase()),r.recipient=p,o.response_format="message",b=b||w,w&&(r.sender_organization=w),b&&(r.recipient_organization=b)):n===nn&&(r.conversation_id=f),m&&(r.data=m.map(function(t){return en(en({},t),{payload:JSON.stringify(t.payload)})})),d&&(i.attachment=d),v&&(r.dor=v),y&&(r.escalate=y),void 0!==_&&(r.priority=_),I&&(r.ttl=I),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.httpClient.post("/:version/message",{urlParams:{version:n},data:r,files:i,query:o,requestId:g,timeout:!d})];case 2:return s=t.sent(),a=s.headers["tt-x-message-id"],this.config.condensedReplays&&s.data.last_message&&a!==s.data.last_message.message_id?[4,this.host.api.messages.find(a)]:[3,4];case 3:(u=t.sent())&&(s.data.last_message=u.message),t.label=4;case 4:return[2,s.data];case 5:return 304!==(c=t.sent()).status?[2,Promise.reject(c)]:(l=c.response.headers["TT-X-Message-Id".toLowerCase()])?[2,{message_id:l}]:[2,Promise.reject(c)];case 6:return[2]}})})},Gr.prototype.destroy=function(e){return O(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.httpClient.del("/v2/message/:id",{urlParams:{id:e}})];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},Gr.prototype.forward=function(i,s,t){var a=t.conversationId,u=t.localId,c=t.metadata,l=t.priority,d=t.recipientOrganizationId,h=t.senderOrganizationId;return O(this,void 0,void 0,function(){var e,n,r,o;return E(this,function(t){switch(t.label){case 0:return e=Xt.prototype.getVersion.call(this,sn).version,r={},(n=void 0===e?rn:e)===rn?(r.recipient=s,d=d||h,h&&(r.sender_organization=h),d&&(r.recipient_organization=d)):n===nn&&(r.conversation_id=a),c&&(r.data=c.map(function(t){return en(en({},t),{payload:JSON.stringify(t.payload)})})),void 0!==l&&(r.priority=l),[4,this.httpClient.post("/:version/message/:id/forward",{urlParams:{id:i,version:n},data:r,requestId:u})];case 1:return o=t.sent(),n===rn?[2,{message_id:o.getHeader("TT-X-Message-Id")}]:[2,o.data]}})})},Gr.prototype.find=function(r){return O(this,void 0,void 0,function(){var e,n;return E(this,function(t){switch(t.label){case 0:return e=Xt.prototype.getVersion.call(this,on).version,n=void 0===e?rn:e,[4,this.httpClient.get("/:version/message/:id",{urlParams:{id:r,version:n}})];case 1:return[2,t.sent().data]}})})},Gr.prototype.findRecipientStatus=function(e){return O(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/:version/message/:id/status",{urlParams:{id:e,version:rn}})];case 1:return[2,t.sent().data]}})})},Gr.prototype.findRecipientStatusMulti=function(e){return O(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/:version/get_bulk_message_status",{urlParams:{version:rn},data:{messages:e}})];case 1:return[2,t.sent().data.bulk_message_statuses]}})})},Gr.prototype.updateRecipientStatusMulti=function(r){return O(this,void 0,void 0,function(){var e,n;return E(this,function(t){switch(t.label){case 0:return e=Xt.prototype.getVersion.call(this,un).version,n=void 0===e?rn:e,[4,this.httpClient.post("/:version/message/status",{urlParams:{version:n},data:r})];case 1:return[2,t.sent().data]}})})},Gr.prototype.createAttachmentTokens=function(e){return void 0===e&&(e=20),O(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/attachment_tokens_bulk",{data:{count:e,expire_after_sec:43200,expire_after_used_sec:5}})];case 1:return[2,t.sent().data]}})})},I([Object(we.d)()],Gr.prototype,"find",null),I([Object(we.d)()],Gr.prototype,"findRecipientStatus",null),Gr),ln=($t=function(t,e){return($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}$t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),dn=function(){return(dn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},hn=(Kt=we.c,ln(Vr,Kt),Vr.prototype.batch=function(t){var n=t.ids,r=t.operation,o=t.organizationId;return S(this,void 0,void 0,function(){var e;return A(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.patch("/v5/message_template",{data:{ids:n,operation:r},headers:e})];case 1:return t.sent(),[2]}})})},Vr.prototype.create=function(t){var r=t.attachment,o=t.body,i=t.network,s=t.organizationId,a=t.repository,u=t.title;return S(this,void 0,void 0,function(){var e,n;return A(this,function(t){switch(t.label){case 0:return e={},n={"TT-X-Organization-Key":s},r&&(e.attachment=r),[4,this.httpClient.post("/v5/message_template",{files:e,data:{body:o,network:i,repository:a,template_label:u},headers:n,timeout:!r})];case 1:return[2,t.sent().data]}})})},Vr.prototype.delete=function(n,r){return S(this,void 0,void 0,function(){var e;return A(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.del("/v5/message_template/:id",{headers:e,urlParams:{id:n}})];case 1:return t.sent(),[2]}})})},Vr.prototype.downloadTemplateFile=function(t){var r=t.templateId,o=t.fileName,i=t.organizationId;return S(this,void 0,void 0,function(){var e,n;return A(this,function(t){return e={"TT-X-Organization-Key":i},n="/v5/message_template/"+r+"/attachment/"+o,[2,this.httpClient.downloadFileBlob(n,{headers:e})]})})},Vr.prototype.find=function(n,r){return S(this,void 0,void 0,function(){var e;return A(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.get("/v5/message_template/:id",{headers:e,urlParams:{id:n}})];case 1:return[2,t.sent().data]}})})},Vr.prototype.update=function(t){var r=t.attachment,o=t.body,i=t.id,s=t.organizationId,a=t.repository,u=t.title;return S(this,void 0,void 0,function(){var e,n;return A(this,function(t){switch(t.label){case 0:return e={},n={"TT-X-Organization-Key":s},r&&(e.attachment=r),[4,this.httpClient.put("/v5/message_template/:id",{files:e,data:dn(dn({},e.attachment?null:{attachment:r}),{body:o,repository:a,template_label:u}),headers:n,timeout:!r,urlParams:{id:i}})];case 1:return[2,t.sent().data]}})})},T([Object(we.d)()],Vr.prototype,"delete",null),T([Object(we.d)()],Vr.prototype,"downloadTemplateFile",null),T([Object(we.d)()],Vr.prototype,"find",null),T([Object(we.d)()],Vr.prototype,"update",null),Vr),fn=(Yt=function(t,e){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Yt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pn=we.b.VERSION_TWO,vn=we.a.METADATA_FIND,yn=(Wt=we.c,fn(qr,Wt),qr.prototype.update=function(e,n,r){return C(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/metadata/:id",{urlParams:{id:e},data:n,headers:{"TT-X-Organization-Key":r}})];case 1:return t.sent(),[2]}})})},qr.prototype.find=function(r,o){return C(this,void 0,void 0,function(){var e,n;return R(this,function(t){switch(t.label){case 0:return e=Wt.prototype.getVersion.call(this,vn).version,n=void 0===e?pn:e,[4,this.httpClient.get("/:version/metadata/:id",{urlParams:{id:r,version:n},headers:{"TT-X-Organization-Key":o}})];case 1:return[2,t.sent().data]}})})},qr),gn=(Ht=function(t,e){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mn=we.b.VERSION_TWO,_n=we.a.MUTE_FIND_ALL,bn=(Gt=we.c,gn(Br,Gt),Br.prototype.findAll=function(){return j(this,void 0,void 0,function(){var e,n;return x(this,function(t){switch(t.label){case 0:return e=Gt.prototype.getVersion.call(this,_n).version,n=void 0===e?mn:e,[4,this.httpClient.get("/:version/mute",{urlParams:{version:n}})];case 1:return[2,t.sent().data]}})})},Br.prototype.unmuteAll=function(){return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/mute")];case 1:return t.sent(),[2]}})})},Br.prototype.muteUser=function(e,n,r,t){var o=(void 0===t?{}:t).recipientOrganizationId,i=void 0===o?r:o;return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/mute/p2p",{data:{sender_token:e,sender_organization:r,receiver_organization:i,duration:n.toString()}})];case 1:return t.sent(),[2]}})})},Br.prototype.unmuteUser=function(e,n,t){var r=(void 0===t?{}:t).recipientOrganizationId,o=void 0===r?n:r;return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/mute/p2p",{headers:{"TT-X-Sender-Token":e,"TT-X-Sender-Organization":n,"TT-X-Receiver-Organization":o}})];case 1:return t.sent(),[2]}})})},Br.prototype.muteGroup=function(e,n,r){return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/mute/group/:groupId",{urlParams:{groupId:e},data:{duration:n.toString(),receiver_organization:r}})];case 1:return t.sent(),[2]}})})},Br.prototype.unmuteGroup=function(e,n){return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/mute/group/:groupId",{urlParams:{groupId:e},headers:{"TT-X-Receiver-Organization":n}})];case 1:return t.sent(),[2]}})})},Br.prototype.muteOrganization=function(e,n){return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/mute/organization/:organizationId",{urlParams:{organizationId:e},data:{duration:n.toString(),receiver_organization:e}})];case 1:return t.sent(),[2]}})})},Br.prototype.unmuteOrganization=function(e){return j(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/mute/organization/:organizationId",{urlParams:{organizationId:e},headers:{"TT-X-Receiver-Organization":e}})];case 1:return t.sent(),[2]}})})},P([Object(we.d)()],Br.prototype,"muteUser",null),P([Object(we.d)()],Br.prototype,"unmuteUser",null),P([Object(we.d)()],Br.prototype,"muteGroup",null),P([Object(we.d)()],Br.prototype,"unmuteGroup",null),P([Object(we.d)()],Br.prototype,"muteOrganization",null),P([Object(we.d)()],Br.prototype,"unmuteOrganization",null),Br),wn=(Vt=function(t,e){return(Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Vt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),In=(qt=we.c,wn(Fr,qt),Fr.prototype.closeAllConnections=function(n,r){return M(this,void 0,void 0,function(){var e;return k(this,function(t){switch(t.label){case 0:return e=this.httpClient.getAuthHeaders({key:n,secret:r}),[4,this.httpClient.del("/v2/events/simple_notifications",{headers:e})];case 1:return t.sent(),[2]}})})},Fr.prototype.signIn=function(){return M(this,void 0,void 0,function(){var e,n,r;return k(this,function(t){switch(t.label){case 0:return[4,this.host.httpClient.post("/v2/events/simple_notifications/key")];case 1:return e=t.sent(),n=e.getHeader("TT-X-Api-Key"),r=e.getHeader("TT-X-Api-Secret"),[2,{key:n,secret:r}]}})})},Fr.prototype.signOut=function(n,r){return M(this,void 0,void 0,function(){var e;return k(this,function(t){return e=this.httpClient.getAuthHeaders({key:n,secret:r}),[2,this.httpClient.post("/v2/logout",{headers:e})]})})},Fr),On=(Bt=function(t,e){return(Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),En=we.b.VERSION_TWO,Tn=we.a.ORGANIZATION_FIND_ALL_OF_USER,Sn=we.a.ORGANIZATION_FIND,An=(Ft=we.c,On(Lr,Ft),Lr.prototype.find=function(r,o){return z(this,void 0,void 0,function(){var e,n;return D(this,function(t){switch(t.label){case 0:return e=Ft.prototype.getVersion.call(this,Sn).version,n=void 0===e?En:e,[4,this.httpClient.get("/:version/user/:userId/organization/:id",{urlParams:{version:n,userId:r,id:o}})];case 1:return[2,t.sent().data]}})})},Lr.prototype.findAllOfUser=function(r){return z(this,void 0,void 0,function(){var e,n;return D(this,function(t){switch(t.label){case 0:return e=Ft.prototype.getVersion.call(this,Tn).version,n=void 0===e?En:e,[4,this.httpClient.get("/:version/user/:userId/organization",{urlParams:{version:n,userId:r}})];case 1:return[2,t.sent().data]}})})},Lr.prototype.getPreferences=function(e){return z(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v2/organization/:organizationId/preferences",{urlParams:{organizationId:e}})];case 1:return[2,t.sent().data]}})})},Lr.prototype.editPreferences=function(t){var e=t.organizationId,n=t.quickReplies;return z(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/organization/:organizationId/preferences",{headers:{"TT-X-Organization-Key":e},data:Ie.a.underscoreObject({network:{patient:{quickReplies:n}}}),urlParams:{organizationId:e}})];case 1:return[2,t.sent().data]}})})},N([Object(we.d)()],Lr.prototype,"find",null),N([Object(we.d)()],Lr.prototype,"findAllOfUser",null),N([Object(we.d)()],Lr.prototype,"getPreferences",null),N([Object(we.d)()],Lr.prototype,"editPreferences",null),Lr),Cn=(Lt=function(t,e){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Rn=(Ut=we.c,Cn(Ur,Ut),Ur.prototype.create=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient",{data:Ie.a.underscoreObject(Object(ve.omit)(e,"organizationId")),headers:{"TT-X-Organization-Key":e.organizationId}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.delete=function(e,n){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v5/patient/:id",{urlParams:{id:e},headers:{"TT-X-Organization-Key":n}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.update=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/:id",{data:Ie.a.underscoreObject(Object(ve.omit)(e,["organizationId","patientId"])),headers:{"TT-X-Organization-Key":e.organizationId},urlParams:{id:e.patientId}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.createContact=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/:patient_id/contact",{data:Ie.a.underscoreObject(Object(ve.omit)(e,["organizationId","patientId"])),headers:{"TT-X-Organization-Key":e.organizationId},urlParams:{patient_id:e.patientId}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.deleteContact=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v5/patient/:patient_id/contact/:contact_id",{urlParams:{contact_id:e.contactId,patient_id:e.patientId},headers:{"TT-X-Organization-Key":e.organizationId}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.updateContact=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/:patient_id/contact/:contact_id",{data:Ie.a.underscoreObject(Object(ve.omit)(e,["organizationId","patientId","contactId"])),headers:{"TT-X-Organization-Key":e.organizationId},urlParams:{patient_id:e.patientId,contact_id:e.contactId}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.login=function(u,c,l,d){return U(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return L(this,function(t){switch(t.label){case 0:return e={want_condensed_replays:this.config.wantCondensedReplays,want_processing_events:this.config.wantCondensedReplays},c?(e.auth={access_token:c},l&&(e.auth.dob=l)):l&&(e.auth={dob:l}),Array.isArray(d)&&(e.session_tokens=Ie.a.underscoreObject(d)),[4,this.httpClient.post("/v5/patient/login/:linkToken",{urlParams:{linkToken:u},data:e})];case 1:return(n=t.sent()).data&&(r=n.data,o=r.condensed_replays,i=void 0!==o&&o,s=r.processing_events,a=void 0!==s&&s,this.host.configure({condensedReplays:i,processingEvents:a})),[2,n.data]}})})},Ur.prototype.loginCheck=function(n,r){return U(this,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return e={},Array.isArray(r)&&(e.session_tokens=Ie.a.underscoreObject(r)),[4,this.httpClient.post("/v5/patient/login_check/:linkToken",{urlParams:{linkToken:n},data:e})];case 1:return[2,t.sent().data]}})})},Ur.prototype.requestAccessToken=function(e){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/request_access_token/:linkToken",{urlParams:{linkToken:e},data:{}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.csvUpload=function(e,n){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/csv/upload",{data:n,headers:{"TT-X-Organization-Key":e}})];case 1:return[2,t.sent().data]}})})},Ur.prototype.getWhiteLabel=function(n){return U(this,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v5/patient/white_label/:organizationId",{urlParams:{organizationId:n},headers:{"TT-X-Organization-Key":n}})];case 1:return e=t.sent(),[2,Ie.a.camelizeObject(e.data)]}})})},Ur.prototype.setWhiteLabel=function(e,n){return U(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/white_label/:organizationId",{urlParams:{organizationId:e},headers:{"TT-X-Organization-Key":e},data:Ie.a.underscoreObject(n)})];case 1:return[2,t.sent()]}})})},Ur),Pn=(Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Dt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),jn=(zt=we.c,Pn(Dr,zt),Dr.prototype.create=function(){return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){var e;return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:return e=this.httpClient.getAuthHeaders(),[4,this.httpClient.get("/v2/qr_login_code/",{headers:e})];case 1:return[2,t.sent().data.qr_key]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(we.d)()],Dr.prototype,"create",null),Dr),xn=(Nt=function(t,e){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Nt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mn=["messageId","sender.name","sender.title","sender.department","sender.mrn","senderRoleDisplayName","recipient.name","recipient.title","recipient.department","recipient.mrn","recipientRoleDisplayName","group.name","distributionList.name","sentTimestamp","attachment.hasAttachment","recalledTimestamp","forwardedMessageId","expireTimestamp","dndAutoForwardedFrom"],kn={script:"(doc['deliveredTimestamp'].empty ? '' : _source.deliveredTimestamp < _source.sentTimestamp ? _source.sentTimestamp : _source.deliveredTimestamp)"},Nn={script:"(doc['readTimestamp'].empty ? '' :_source.readTimestamp < _source.sentTimestamp ? _source.sentTimestamp : _source.readTimestamp)"},zn=["sender.title","recipient.title","sender.department","sender.mrn","recipient.mrn","senderRoleDisplayName","recipient.department","recipientRoleDisplayName","sender.username","recipient.username","sender.verifiedEmails","recipient.verifiedEmails","sender.unverifiedEmails","recipient.unverifiedEmails","sender.verifiedPhones","recipient.verifiedPhones","sender.unverifiedPhones","recipient.unverifiedPhones","group.groupId","group.name","distributionList.distributionListId","distributionList.name","forwardedMessageId","messageId"],Dn=(kt=we.c,xn(zr,kt),zr.prototype.fetchTransactions=function(a,t){var u=t.page,c=t.size,l=t.startDate,d=t.endDate,h=t.query;return F(this,void 0,void 0,function(){var e,n,r,o,i,s;return B(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":a},n=u*c-c,r=a,i=(o=h)&&h.split(" ").join("*"),s=[{range:{sentTimestamp:{from:l,to:d}}},{match:{"sender.organization.orgId":r}},{constant_score:{filter:{missing:{field:"message.hideMessage"}}}},{bool:{should:[{query_string:{query:"*"+i+"*",fields:["sender.name","recipient.name"]}},{multi_match:{query:o,fields:zn}}]}}],[4,this.httpClient.post("/v2/report/messages",{headers:e,data:{from:n,size:c,fields:Mn,script_fields:{deliveredTimestamp:kn,readTimestamp:Nn},sort:{sentTimestamp:{order:"desc"}},query:{bool:{must:s}}}})];case 1:return[2,t.sent()]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(we.d)()],zr.prototype,"fetchTransactions",null),zr),Un=(Mt=function(t,e){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Mt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ln=we.b.VERSION_TWO,Fn=we.a.ROLES_CREATE_P2P_GROUP,Bn=(xt=we.c,Un(Nr,xt),Nr.prototype.createP2PGroup=function(t){var l=t.createdByUserId,d=t.name,e=t.replayHistory,h=void 0!==e&&e,n=t.memberIds,f=void 0===n?[]:n,p=t.organizationId;return V(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c;return G(this,function(t){switch(t.label){case 0:return e=xt.prototype.getVersion.call(this,Fn).version,n=void 0===e?Ln:e,r={"TT-X-Organization-Key":p},o={created_by:l,members:f,name:d,replay_history:h},[4,this.httpClient.post("/:version/role_group",{urlParams:{version:n},headers:r,data:o})];case 1:return i=t.sent(),s=i.data,a=s.conversation_id,u=s.metadata,c=i.data.token,[2,{conversationId:a,memberIds:f,metadata:u,name:d,organizationId:p,token:c}]}})})},Nr.prototype.find=function(n,r){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.get("/v2/role/:id",{urlParams:{id:n},headers:e})];case 1:return[2,t.sent().data]}})})},Nr.prototype.createRole=function(t){var o=t.description,i=t.escalationPolicy,s=t.name,a=t.noOwnersMessage,u=t.openAssignment,c=t.organizationId,l=t.ownerRequired,d=t.owners,h=t.replayHistory,f=t.tagColor,p=t.tagName,v=t.tagToken;return V(this,void 0,void 0,function(){var e,n,r;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":c},n={display_name:s,open_assignment:u?"1":"0",replay_history:h},void 0!==o&&(n.description=o),void 0!==i&&(n.escalation_policy=i),void 0!==a&&(n.no_owners_message=a),void 0!==l&&(n.owner_required=l?"1":"0"),void 0!==d&&(n.owners=d),void 0!==f&&(n.tag_color=f),void 0!==p&&(n.tag_name=p),void 0!==v&&(n.tag_id=v),[4,this.httpClient.post("/v2/role",{headers:e,data:n})];case 1:return(r=t.sent()).token=r.headers["tt-x-role-token"],[2,r]}})})},Nr.prototype.updateRole=function(o,t){var i=t.description,s=t.name,a=t.noOwnersMessage,u=t.openAssignment,c=t.organizationId,l=t.ownerRequired,d=t.owners,h=t.replayHistory,f=t.tagColor,p=t.tagName,v=t.tagToken,y=t.escalationPolicy;return V(this,void 0,void 0,function(){var e,n,r;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":c},n={},void 0!==i&&(n.description=i),void 0!==s&&(n.display_name=s),void 0!==a&&(n.no_owners_message=a),void 0!==y&&(n.escalation_policy=y),void 0!==u&&(n.open_assignment=u?"1":"0"),void 0!==l&&(n.owner_required=l?"1":"0"),void 0!==d&&(n.owners=d),void 0!==h&&(n.replay_history=h),void 0!==f&&(n.tag_color=f),void 0!==v&&(n.tag_id=v),void 0!==p&&(n.tag_name=p),[4,this.httpClient.put("/v2/role/:token",{urlParams:{token:o},headers:e,data:n})];case 1:return(r=t.sent()).token=o,[2,r]}})})},Nr.prototype.deleteRole=function(n,r){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.del("/v2/role/:token",{urlParams:{token:r},headers:e})];case 1:return[2,t.sent()]}})})},Nr.prototype.findSavedRoles=function(n,r){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.get("/v2/user/:userId/saved_roles",{urlParams:{userId:n},headers:e})];case 1:return[2,t.sent().data]}})})},Nr.prototype.saveRole=function(n,r,o){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.post("/v2/user/:userId/saved_roles",{urlParams:{userId:r},data:{role_id:n},headers:e})];case 1:return[2,t.sent()]}})})},Nr.prototype.removeSavedRole=function(n,r,o){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.del("/v2/user/:userId/saved_roles/:roleId",{urlParams:{userId:r,roleId:n},headers:e})];case 1:return[2,t.sent()]}})})},Nr.prototype.optIn=function(n,r,o){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.post("/v2/role/:roleId/members/:userId",{urlParams:{roleId:n,userId:r},headers:e})];case 1:return[2,t.sent()]}})})},Nr.prototype.optOut=function(n,r,o){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.del("/v2/role/:roleId/members/:userId",{urlParams:{roleId:n,userId:r},headers:e})];case 1:return[2,t.sent()]}})})},Nr.prototype.saveAwayResponse=function(n,r,o){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.post("/v2/role/:roleId/away",{urlParams:{roleId:n},headers:e,data:{status:o}})];case 1:return[2,t.sent()]}})})},Nr.prototype.removeAwayResponse=function(n,r){return V(this,void 0,void 0,function(){var e;return G(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.del("/v2/role/:roleId/away",{urlParams:{roleId:n},headers:e})];case 1:return[2,t.sent()]}})})},q([Object(we.d)()],Nr.prototype,"find",null),q([Object(we.d)()],Nr.prototype,"findSavedRoles",null),Nr),qn=(jt=function(t,e){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Vn=(Pt=we.c,qn(kr,Pt),kr.prototype.findAll=function(n){return H(this,void 0,void 0,function(){var e;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.get("/v2/role/tags",{headers:e})];case 1:return[2,t.sent().data]}})})},kr.prototype.createOrUpdateTag=function(r,o,i,s){return H(this,void 0,void 0,function(){var e,n;return W(this,function(t){switch(t.label){case 0:return e={color:r,name:o,organizationId:i},s?[4,this.updateTag(s,e)]:[3,2];case 1:return n=t.sent(),[3,4];case 2:return[4,this.createTag(e)];case 3:n=t.sent(),t.label=4;case 4:return[2,n]}})})},kr.prototype.createTag=function(t){var r=t.color,o=t.name,i=t.organizationId;return H(this,void 0,void 0,function(){var e,n;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":i},[4,this.httpClient.post("/v2/tags",{data:{color:r,name:o},headers:e})];case 1:return(n=t.sent()).token=n.headers["tt-x-tag-id"],[2,n]}})})},kr.prototype.updateTag=function(r,t){var o=t.color,i=t.name,s=t.organizationId;return H(this,void 0,void 0,function(){var e,n;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":s},[4,this.httpClient.put("/v2/tags/:token",{urlParams:{token:r},data:{color:o,name:i},headers:e})];case 1:return(n=t.sent()).token=r,[2,n]}})})},kr.prototype.destroy=function(n,r){return H(this,void 0,void 0,function(){var e;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.del("/v2/tags/:token",{urlParams:{token:r},headers:e})];case 1:return[2,t.sent().data]}})})},kr.prototype.findColors=function(n){return H(this,void 0,void 0,function(){var e;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.get("/v2/tag/color_list/:organizationId",{urlParams:{organizationId:n},headers:e})];case 1:return[2,t.sent().data]}})})},kr.prototype.findTag=function(n,r){return H(this,void 0,void 0,function(){var e;return W(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.get("/v2/tags/:tagId",{urlParams:{tagId:r},headers:e})];case 1:return[2,t.sent().data]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(we.d)()],kr.prototype,"findAll",null),kr),Gn=(Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Hn=we.b.VERSION_TWO,Wn=we.b.VERSION_FIVE,Yn=["user","distributionList"],Kn=we.a.CONVERSATION_FIND_ALL,$n=(Ct=we.c,Gn(Mr,Ct),Mr.prototype.findAll=function(s){return void 0===s&&(s={organizationId:null}),Y(this,void 0,void 0,function(){var e,n,r,o,i;return K(this,function(t){switch(t.label){case 0:return e=Ct.prototype.getVersion.call(this,Kn).version,o={render_metadata:"true"},(n=void 0===e?Hn:e)===Wn&&(r=s.organizationId,o.mark_as_delivered="true",o.paginated="true",o.organization_id=r||void 0),[4,this.httpClient.get("/:version/roster",{query:o,urlParams:{version:n}})];case 1:return(i=t.sent()).data.continuation?[4,this._findAllPaginated(i.data.continuation,r,i.data.items)]:[3,3];case 2:return[2,t.sent()];case 3:return[2,i.data.items||i.data]}})})},Mr.prototype._findAllPaginated=function(n,r,o){return Y(this,void 0,void 0,function(){var e;return K(this,function(t){switch(t.label){case 0:return null===n?[2,o]:[4,this.httpClient.get("/v5/roster",{query:{render_metadata:"true",mark_as_delivered:"true",paginated:"true",continuation:encodeURI(n),organization_id:r||void 0}})];case 1:return e=t.sent(),o=o.concat(e.data.items),[2,this._findAllPaginated(e.data.continuation,r,o)]}})})},Mr.prototype.add=function(r,o,i){return Y(this,void 0,void 0,function(){var e,n;return K(this,function(t){switch(t.label){case 0:return ye.a.includes(Yn,r)?(e={},i&&(e["TT-X-Organization-Key"]=i),n=this.__typeToNS(r),[4,this.httpClient.post("/v2/roster",{headers:e,data:{entity:o,type:n}})]):[2];case 1:return t.sent(),[2]}})})},Mr.prototype.remove=function(r,o,i){return Y(this,void 0,void 0,function(){var e,n;return K(this,function(t){switch(t.label){case 0:return ye.a.includes(Yn,r)?(e={},n=this.__typeToNS(r),i&&(e["TT-X-Organization-Key"]=i,e["TT-X-Type"]=n),[4,this.httpClient.del("/v2/roster/:counterPartyId",{headers:e,urlParams:{counterPartyId:o},data:{type:n}})]):[2];case 1:return t.sent(),[2]}})})},Mr.prototype.__typeToNS=function(t){return Xn[t]},Mr),Xn={user:"tigertext:entity:account",distributionList:"tigertext:entity:list"},Qn=(At=function(t,e){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}At(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zn=(St=we.c,Qn(xr,St),xr.prototype.findIntegrationIds=function(n){return $(this,void 0,void 0,function(){var e;return X(this,function(t){switch(t.label){case 0:return e={Accept:"*","TT-X-Organization-Key":n},[4,this.httpClient.post("/v1/integrations/scheduler/configs/info/org",{headers:e,data:{org:n}})];case 1:return[2,t.sent().data]}})})},xr.prototype.sendCsvSchedule=function(s,a,u,c){return $(this,void 0,void 0,function(){var e,n,r,o,i;return X(this,function(t){switch(t.label){case 0:e={"Content-Type":"text/csv","TT-X-Organization-Key":u,"TT-X-Integration-Id":s,"TT-X-Timezone":c},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.httpClient.post("/v1/integrations/scheduler/webhook/csv",{data:a,headers:e})];case 2:return o=t.sent(),n=o.data,r=o.status,[3,4];case 3:return 400!==(i=t.sent()).status?[2,Promise.reject(i)]:(n=i.response&&(i.response.body||i.response.text),r=i.status,[3,4]);case 4:return[2,{json:n,status:r}]}})})},xr.prototype.findCsv=function(n,r){return $(this,void 0,void 0,function(){var e;return X(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.post("/v1/integrations/scheduler/webhook/csv/download",{headers:e,data:{org:n,id:r},resFormat:"text"})];case 1:return[2,t.sent()]}})})},xr.prototype.clearSchedule=function(n,r){return $(this,void 0,void 0,function(){var e;return X(this,function(t){switch(t.label){case 0:return e={Accept:"*","TT-X-Organization-Key":n},[4,this.httpClient.post("/v1/integrations/scheduler/configs/truncate",{headers:e,data:{id:r}})];case 1:return[2,t.sent().status]}})})},xr),Jn=(Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),tr=function(){return(tr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},er=(Et=we.c,Jn(jr,Et),jr.prototype.batch=function(t){var n=t.ids,r=t.operation,o=t.organizationId;return Z(this,void 0,void 0,function(){var e;return J(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.patch("/v5/schedule_message",{data:{ids:n,operation:r},headers:e})];case 1:return t.sent(),[2]}})})},jr.prototype.create=function(t){var r=t.attachment,o=t.body,i=t.end_date,s=t.network,a=t.no_reply,u=t.organizationId,c=t.recipients,l=t.repeating,d=t.send_now,h=t.start_date,f=t.start_time,p=t.template_id,v=t.timezone_name;return Z(this,void 0,void 0,function(){var e,n;return J(this,function(t){switch(t.label){case 0:return e={},n={"TT-X-Organization-Key":u},r&&(e.attachment=r),[4,this.httpClient.post("/v5/schedule_message",{files:e,data:tr(tr(tr(tr(tr(tr(tr(tr({},e.attachment?null:{attachment:r}),{body:o}),l?{end_date:i}:null),{network:s,no_reply:a,recipients:c}),l?{repeating:l}:null),{send_now:d,start_date:h,start_time:f}),p?{template_id:p}:null),{timezone_name:v}),headers:n,timeout:!(r||p)})];case 1:return[2,t.sent().data]}})})},jr.prototype.delete=function(n,r){return Z(this,void 0,void 0,function(){var e;return J(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.del("/v5/schedule_message/:id",{headers:e,urlParams:{id:n}})];case 1:return t.sent(),[2]}})})},jr.prototype.downloadScheduledMessageFile=function(t){var r=t.scheduleId,o=t.fileName,i=t.organizationId;return Z(this,void 0,void 0,function(){var e,n;return J(this,function(t){return e={"TT-X-Organization-Key":i},n="/v5/schedule_message/"+r+"/attachment/"+o,[2,this.httpClient.downloadFileBlob(n,{headers:e})]})})},jr.prototype.find=function(t){var n=t.id,r=t.organizationId,o=t.isHistoryCategory;return Z(this,void 0,void 0,function(){var e;return J(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.get("/v5/schedule_message/:id?history="+o,{headers:e,urlParams:{id:n}})];case 1:return[2,t.sent().data]}})})},jr.prototype.findCoarseTimezone=function(n,r){return Z(this,void 0,void 0,function(){var e;return J(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.get("/v5/timezone/:timezone",{headers:e,urlParams:{timezone:n}})];case 1:return[2,t.sent().data]}})})},jr.prototype.update=function(t){var r=t.attachment,o=t.body,i=t.end_date,s=t.id,a=t.organizationId,u=t.repeating,c=t.start_date,l=t.start_time,d=t.template_id,h=t.timezone_name;return Z(this,void 0,void 0,function(){var e,n;return J(this,function(t){switch(t.label){case 0:return e={},n={"TT-X-Organization-Key":a},r&&(e.attachment=r),[4,this.httpClient.put("/v5/schedule_message/:id",{files:e,data:tr(tr(tr(tr(tr(tr(tr({},e.attachment?null:{attachment:r}),{body:o}),u?{end_date:i}:null),u?{repeating:u}:null),{start_date:c,start_time:l}),d?{template_id:d}:null),{timezone_name:h}),headers:n,timeout:!(r||d),urlParams:{id:s}})];case 1:return[2,t.sent().data]}})})},Q([Object(we.d)()],jr.prototype,"delete",null),Q([Object(we.d)()],jr.prototype,"downloadScheduledMessageFile",null),Q([Object(we.d)()],jr.prototype,"find",null),Q([Object(we.d)()],jr.prototype,"update",null),jr),nr=(Ot=function(t,e){return(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),rr=we.b.VERSION_TWO,or=we.a.SEARCH_QUERY,ir=(It=we.c,nr(Pr,It),Pr.prototype.query=function(r){return tt(this,void 0,void 0,function(){var e,n;return et(this,function(t){switch(t.label){case 0:return e=It.prototype.getVersion.call(this,or).version,n=void 0===e?rr:e,[4,this.httpClient.post("/:version/search",{data:r,urlParams:{version:n}})];case 1:return[2,t.sent().data]}})})},Pr.prototype.patientQuery=function(e){return tt(this,void 0,void 0,function(){return et(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v5/patient/search",{data:e})];case 1:return[2,t.sent().data]}})})},Pr),sr=(wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ar=we.b.VERSION_TWO,ur=we.a.TEAMS_CREATE,cr=we.a.TEAMS_FIND,lr=we.a.TEAMS_LEAVE,dr=we.a.TEAMS_UPDATE,hr=(bt=we.c,sr(Rr,bt),Rr.prototype.find=function(r,t){var o=t.organizationId;return nt(this,void 0,void 0,function(){var e,n;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,cr).version,n=void 0===e?ar:e,[4,this.httpClient.get("/:version/team/:team_id",{headers:{"TT-X-Organization-Key":o},urlParams:{team_id:r,version:n}})];case 1:return[2,t.sent().data]}})})},Rr.prototype.create=function(t){var s=t.avatar,e=t.canMembersLeave,a=void 0===e||e,n=t.canRequestToJoin,u=void 0===n||n,c=t.description,l=t.displayName,r=t.memberIds,d=void 0===r?[]:r,h=t.organizationId;return nt(this,void 0,void 0,function(){var e,n,r,o,i;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,ur).version,n=void 0===e?ar:e,r={},o={can_members_leave:a,can_request_to_join:u,display_name:l,members:d},i={},s&&(i.avatar=s),c&&(o.description=c),h&&(r["TT-X-Organization-Key"]=h),[4,this.httpClient.post("/:version/team",{urlParams:{version:n},headers:r,data:o,files:i})];case 1:return[2,t.sent().data]}})})},Rr.prototype.update=function(t){var s=t.avatar,e=t.canMembersLeave,a=void 0===e||e,n=t.canRequestToJoin,u=void 0===n||n,c=t.description,l=t.displayName,d=t.id,r=t.memberIds,h=void 0===r?[]:r,f=t.organizationId;return nt(this,void 0,void 0,function(){var e,n,r,o,i;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,dr).version,n=void 0===e?ar:e,r={},o={can_members_leave:a,can_request_to_join:u,display_name:l,members:h},i={},s&&(i.avatar=s),c&&(o.description=c),f&&(r["TT-X-Organization-Key"]=f),[4,this.httpClient.post("/:version/team/:id",{urlParams:{id:d,version:n},headers:r,data:o,files:i})];case 1:return[2,t.sent().data]}})})},Rr.prototype.delete=function(r,t){var o=t.organizationId;return nt(this,void 0,void 0,function(){var e,n;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,ur).version,n=void 0===e?ar:e,[4,this.httpClient.del("/:version/team/:id",{headers:{"TT-X-Organization-Key":o},urlParams:{version:n,id:r}})];case 1:return[2,t.sent().status]}})})},Rr.prototype.requestToJoin=function(r,t){var o=t.organizationId,i=t.requestedById;return nt(this,void 0,void 0,function(){var e,n;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,ur).version,n=void 0===e?ar:e,[4,this.httpClient.post("/:version/team/:id/request",{headers:{"TT-X-Organization-Key":o},urlParams:{id:r,version:n},data:{requested_by:i}})];case 1:return[2,t.sent().status]}})})},Rr.prototype.updateJoinRequest=function(r,t){var o=t.organizationId,i=t.teamId,s=t.handledAsId,a=t.status;return nt(this,void 0,void 0,function(){var e,n;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,ur).version,n=void 0===e?ar:e,[4,this.httpClient.post("/:version/team/:team_id/request/:request_id",{headers:{"TT-X-Organization-Key":o},urlParams:{version:n,team_id:i,request_id:r},data:{handled_as:s,status:a}})];case 1:return[2,t.sent()]}})})},Rr.prototype.leave=function(r,t){var o=t.organizationId;return nt(this,void 0,void 0,function(){var e,n;return rt(this,function(t){switch(t.label){case 0:return e=bt.prototype.getVersion.call(this,lr).version,n=void 0===e?ar:e,[4,this.httpClient.post("/:version/team/:team_id/leave",{headers:{"TT-X-Organization-Key":o},urlParams:{team_id:r,version:n},data:{}})];case 1:return[2,t.sent().status]}})})},Rr),fr=(_t=function(t,e){return(_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pr=(mt=we.c,fr(Cr,mt),Cr.prototype.getTwilioNumbers=function(n,r){return ot(this,void 0,void 0,function(){var e;return it(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.post("/v2/twilio/numbers",{headers:e,data:{area_code:r}})];case 1:return[2,t.sent().data]}})})},Cr.prototype.assignPagerNumber=function(n,r,o){return ot(this,void 0,void 0,function(){var e;return it(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.post("/v2/user/:roleToken/organization/:organizationId/pagers?process_number=true",{headers:e,urlParams:{organizationId:n,roleToken:o},data:{pager_numbers:r}})];case 1:return[2,t.sent()]}})})},Cr.prototype.removePagerNumber=function(n,r,o){return ot(this,void 0,void 0,function(){var e;return it(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":n},[4,this.httpClient.del("/v2/user/:roleToken/organization/:organizationId/pagers/:number?process_number=true",{headers:e,urlParams:{organizationId:n,roleToken:o,number:r}})];case 1:return[2,t.sent()]}})})},Cr),vr=(gt=function(t,e){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),yr=(yt=we.c,vr(Ar,yt),Ar.prototype.startTyping=function(n,r,o){return st(this,void 0,void 0,function(){var e;return at(this,function(t){switch(t.label){case 0:return e={recipient:n},r&&r!==this.host.currentUserId&&(e.proxy_token=r),[4,this.httpClient.post("/v2/message/typing",{data:e,headers:{"TT-X-Organization-Key":o}})];case 1:return t.sent(),[2]}})})},Ar.prototype.stopTyping=function(e,n){return st(this,void 0,void 0,function(){return at(this,function(t){switch(t.label){case 0:return n?[4,this.httpClient.del("/v2/message/typing/:recipientId/:senderId",{urlParams:{recipientId:e,senderId:n}})]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,this.httpClient.del("/v2/message/typing/:recipientId",{urlParams:{recipientId:e}})];case 3:t.sent(),t.label=4;case 4:return[2]}})})},Ar),gr=(vt=function(t,e){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}vt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mr=(pt=we.c,gr(Sr,pt),Sr.prototype.findAll=function(e,n){return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/v2/user/:userId/organization/:organizationId/roles",{urlParams:{userId:e,organizationId:n}})];case 1:return[2,t.sent().data.roles]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(we.d)()],Sr.prototype,"findAll",null),Sr),_r=n(177),br=(ft=function(t,e){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wr=window.location.href.includes("FAKE-VISIT"),Ir=(ht=we.c,br(Tr,ht),Tr.prototype.findAll=function(n){return ct(this,void 0,void 0,function(){var e;return lt(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/vwr/v1/rooms",{headers:{"TT-X-Organization-Key":n}})];case 1:return e=t.sent(),[2,Ie.a.camelizeObject(e.data)]}})})},Tr.prototype.find=function(r,o){return ct(this,void 0,void 0,function(){var e,n;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.get("/vwr/v1/room/:id",{headers:e,urlParams:{id:r}})];case 1:return n=t.sent(),[2,Ie.a.camelizeObject(n.data)]}})})},Tr.prototype.create=function(o,t){var i=t.staff,s=t.name;return ct(this,void 0,void 0,function(){var e,n,r;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},n=Ie.a.underscoreObject({staff:i,name:s}),[4,this.httpClient.post("/vwr/v1/room",{headers:e,data:n})];case 1:return r=t.sent(),[2,Ie.a.camelizeObject(r.data)]}})})},Tr.prototype.update=function(o,i,t){var s=t.staff,a=t.name,u=t.status,c=t.version;return ct(this,void 0,void 0,function(){var e,n,r;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":i},n=Ie.a.underscoreObject({staff:s,name:a,status:u,version:c}),[4,this.httpClient.put("/vwr/v1/room/:id",{headers:e,urlParams:{id:o},data:n})];case 1:return r=t.sent(),[2,Ie.a.camelizeObject(r.data)]}})})},Tr.prototype.delete=function(r,o){return ct(this,void 0,void 0,function(){var e,n;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.del("/vwr/v1/room/:id",{headers:e,urlParams:{id:r}})];case 1:return n=t.sent(),[2,Ie.a.camelizeObject(n.data)]}})})},Tr.prototype.getVisitInfo=function(n){return ct(this,void 0,void 0,function(){var e;return lt(this,function(t){switch(t.label){case 0:return[4,this.httpClient.get("/vwr/v1/visit/join?join_id=:joinId",{urlParams:{joinId:n}})];case 1:return e=t.sent(),[2,Ie.a.camelizeObject(e.data)]}})})},Tr.prototype.createVisit=function(t){var n=t.firstName,r=t.lastName,o=t.mobilePhone,i=t.visitReason,s=t.joinId;return ct(this,void 0,void 0,function(){var e;return lt(this,function(t){switch(t.label){case 0:return[4,this.httpClient.post("/vwr/v1/visit/join?join_id=:joinId",{data:Ie.a.underscoreObject({firstName:n,lastName:r,mobilePhone:o,visitReason:i,processingEvents:!0,condensedReplays:!0}),urlParams:{joinId:s}})];case 1:return e=t.sent(),[2,Ie.a.camelizeObject(e.data)]}})})},Tr.prototype.editVisit=function(t){var r=t.visitId,o=t.firstName,i=t.lastName,s=t.mobilePhone,a=t.visitReason,u=t.createResources;return ct(this,void 0,void 0,function(){var e,n;return lt(this,function(t){switch(t.label){case 0:return wr?[2,{groupId:"g123456",conversationId:"c123456",accountId:"a123456"}]:(e=Ie.a.underscoreObject({visitId:r,firstName:o,lastName:i,mobilePhone:s,visitReason:a,createResources:u}),[4,this.httpClient.put("/vwr/v1/room/join",{data:e})]);case 1:return n=t.sent(),[2,Ie.a.camelizeObject(n.data)]}})})},Tr.prototype.cleanupVisits=function(t){var n=t.type,r=t.roomId,o=t.organizationId;return ct(this,void 0,void 0,function(){var e;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.put("/vwr/v1/room/:roomId/cleanup",{headers:e,data:{type:n},urlParams:{roomId:r}})];case 1:return t.sent(),[2]}})})},Tr.prototype.findAllVisits=function(r,o){return ct(this,void 0,void 0,function(){var e,n;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":o},[4,this.httpClient.get("/vwr/v1/room/:roomId/visits",{headers:e,urlParams:{roomId:r}})];case 1:return n=t.sent(),[2,Ie.a.camelizeObject(n.data)]}})})},Tr.prototype.informProvider=function(r,t){var o=t.roomId,i=t.visitId,s=t.accountToken;return ct(this,void 0,void 0,function(){var e,n;return lt(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.post("/vwr/v1/room/:roomId/visit/:visitId/provider/:accountToken",{headers:e,urlParams:{roomId:o,visitId:i,accountToken:s}})];case 1:return n=t.sent(),[2,Ie.a.camelizeObject(n.data)]}})})},ut([Object(we.d)()],Tr.prototype,"findAll",null),ut([Object(we.d)()],Tr.prototype,"find",null),ut([Object(we.d)()],Tr.prototype,"create",null),ut([Object(we.d)()],Tr.prototype,"update",null),ut([Object(we.d)()],Tr.prototype,"delete",null),ut([Object(we.d)()],Tr.prototype,"getVisitInfo",null),ut([Object(we.d)()],Tr.prototype,"createVisit",null),ut([Object(we.d)()],Tr.prototype,"editVisit",null),ut([Object(we.d)()],Tr.prototype,"informProvider",null),Tr),Or=n(0),Er={CONSUMER_ORGANIZATION_ID:"UpM28mnfW65vJkbqEATtKvxm",BASE_URLS:{local:"http://localhost:8888",productionOauth:"http://52.41.133.15:8000/tigertextapi"},ADMIN_URLS:{},CN_URLS:{},FORGOT_PASSWORD_URLS:{},ROLES_URLS:{},CLOUDFRONT:{development:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},production:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},tt:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},ihis:{avatar:"",groupAvatar:""}},CONFIG_DEFAULT:{adminFeatureBranch:null,apiEnv:"production",assetDomain:"assets.tigerconnect.com",autoAckSuccessfullyHandledEvents:!0,autoSignOutOnBrowserUnload:!0,baseUrl:null,botUsers:[],clearTypingStatusThrottleDelay:2e3,clearTypingStatusTimeout:8e3,cloudfrontDomain:"cloudfront.net",cloudfront:{},condensedReplays:!1,consumerOrganizationId:"UpM28mnfW65vJkbqEATtKvxm",detectBangReplayTimeout:1e3,events:{autoAck:!1,autoDeliver:!1,canConfirm:!0,closeAfterMessages:!1,heartbeat:!0,hidden:!1,includeDistributionListEvents:!0,isTyping:!0,keepAlive:!1,msgDeliveryDelay:0,multiOrg:!0,noOfflineMessages:!1,renderMetadata:!0},eventCollectionInterval:50,eventDrainTimeout:4e3,eventsAutoReconnect:!0,eventsAutoReconnectDelay:2e3,eventsAutoReconnectMaxDelay:16e3,eventsClearRetryHistoryInterval:6e4,eventsDebugging:!1,eventsHeartbeatIntervalVisible:12e3,eventsHeartbeatIntervalInvisible:3e4,eventsOpenTimeout:6e3,flushAckInterval:1e3,flushAckMaxConnections:2,flushAckMaxEvents:50,flushFindRecipientStatusInterval:150,flushFindRecipientStatusMaxCount:20,flushSetMessageStatusInterval:1e3,flushSetMessageStatusMaxCount:500,keepConversationsForAllForums:!1,localAdminUrl:null,localCnUrl:null,localRolesUrl:null,logLevel:"error",manuallyRequestEventQueueBatch:!1,maxEventBatch:50,maxMetadataKeyCount:11,organizationRostersChangeThrottleDelay:500,placeholderEntityAllowLoading:!0,placeholderEntityDelayBeforeRefreshing:100,processingEvents:!1,productKey:"bc1oOf3DZXbnaNZ2LCWZGvSg",pushAgent:"consumer",rolesFeatureBranch:null,serviceLogLevels:{},signUpHashKey:"21d2ff3ffbf",signUpHashSalt:"%(xx*&x$&*%&",ttRoute:null,version:"1.0",wantCondensedReplays:!0}};function Tr(){return null!==ht&&ht.apply(this,arguments)||this}function Sr(){return null!==pt&&pt.apply(this,arguments)||this}function Ar(){return null!==yt&&yt.apply(this,arguments)||this}function Cr(){return null!==mt&&mt.apply(this,arguments)||this}function Rr(){return null!==bt&&bt.apply(this,arguments)||this}function Pr(){return null!==It&&It.apply(this,arguments)||this}function jr(){return null!==Et&&Et.apply(this,arguments)||this}function xr(){return null!==St&&St.apply(this,arguments)||this}function Mr(){return null!==Ct&&Ct.apply(this,arguments)||this}function kr(){return null!==Pt&&Pt.apply(this,arguments)||this}function Nr(){return null!==xt&&xt.apply(this,arguments)||this}function zr(){var t=null!==kt&&kt.apply(this,arguments)||this;return t.generateLookerEmbed=function(r,o){return F(t,void 0,void 0,function(){var e,n;return B(this,function(t){switch(t.label){case 0:return e={"TT-X-Organization-Key":r},[4,this.httpClient.post("/v2/looker",{headers:e,data:{dashboard_type:o}})];case 1:return[2,(n=t.sent().data)&&n.looker_url]}})})},t}function Dr(){return null!==zt&&zt.apply(this,arguments)||this}function Ur(){return null!==Ut&&Ut.apply(this,arguments)||this}function Lr(){return null!==Ft&&Ft.apply(this,arguments)||this}function Fr(){return null!==qt&&qt.apply(this,arguments)||this}function Br(){return null!==Gt&&Gt.apply(this,arguments)||this}function qr(){return null!==Wt&&Wt.apply(this,arguments)||this}function Vr(){return null!==Kt&&Kt.apply(this,arguments)||this}function Gr(){return null!==Xt&&Xt.apply(this,arguments)||this}function Hr(){return null!==Zt&&Zt.apply(this,arguments)||this}function Wr(){return null!==te&&te.apply(this,arguments)||this}function Yr(){return null!==ne&&ne.apply(this,arguments)||this}function Kr(){return null!==oe&&oe.apply(this,arguments)||this}function $r(){return null!==se&&se.apply(this,arguments)||this}function Xr(){return null!==ue&&ue.apply(this,arguments)||this}function Qr(){return null!==le&&le.apply(this,arguments)||this}["stag","uat"].forEach(function(t){Er.BASE_URLS[t]="https://"+t+"-devapi.tigertext.me",Er.FORGOT_PASSWORD_URLS[t]="https://"+t+"-forget.tigertext.com",Er.CN_URLS[t]="https://"+t+"-console.tigertext.me",Er.ADMIN_URLS[t]="https://"+t+"-console.tigertext.me/app/admin",Er.ROLES_URLS[t]="/"+t+"/app/roles/index.html"}),["ihis","prod","prod-a","prod-c","production","tt"].forEach(function(t){Er.BASE_URLS[t]="https://api.tigertext.me",Er.FORGOT_PASSWORD_URLS[t]="https://forget.tigertext.com",Er.CN_URLS[t]="https://home.tigertext.com",Er.ADMIN_URLS[t]="https://home.tigertext.com/app/admin",Er.ROLES_URLS[t]="/app/roles/index.html"}),["prod-a","prod-c"].forEach(function(t){var e=t.replace("prod-","");Er.BASE_URLS[t]="https://"+e+"-api.tigertext.me"}),["ihis"].forEach(function(t){Er.CN_URLS[t]="https://"+t+".tigertext.com",Er.ADMIN_URLS[t]="https://"+t+".tigertext.com/app/admin"}),["prod-dr"].forEach(function(t){Er.BASE_URLS[t]="https://"+t+"-api.tigertext.me",Er.CN_URLS[t]="https://"+t+".tigertext.com",Er.ADMIN_URLS[t]="https://"+t+".tigertext.com/app/admin",Er.ROLES_URLS[t]="/"+t+"/app/roles/index.html"});var Zr=Er,Jr=(ro.prototype.setLevel=function(t){this.level=t.toLowerCase()},ro),to=Jr,eo=["debug","log","info","warn","error"],no=eo.reduce(function(t,e,n){return t[e]=n,t},{});function ro(t){var e=t.name,n=t.level;this.name=e,this.level=n}eo.forEach(function(n){var r=no[n];Jr.prototype[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r>=no[this.level]&&(t=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(["["+this.name+"]"],t),Function.prototype.apply.call(console[n],console,t))}});var oo,io,so,ao,uo,co=(uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),lo=function(){return(lo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ho=(Jo.prototype.resolve=function(t){return t||this.defaultValue},Jo.prototype.isValid=function(t){return!!this.entriesByKey[t]},Jo),fo=ho,po=(co(Zo,ao=ho),Zo.prototype.mapEnumKeyToServerValue=function(){return this._mapEnumKeyToServerValue||(this._mapEnumKeyToServerValue=ye.a.transform(this.entries,function(t,e){return t[e.key]=e.serverValue},{}))},Zo.prototype.mapServerValueToEnumKey=function(){return this._mapServerValueToEnumKey||(this._mapServerValueToEnumKey=ye.a.invert(this.mapEnumKeyToServerValue()))},Zo.prototype.fromServer=function(t){return this.mapServerValueToEnumKey()[t]},Zo.prototype.toServer=function(t){return this.mapEnumKeyToServerValue()[this.resolve(t)]},Zo.prototype.resolve=function(t){return(this.isValid(t)?t:this.fromServer(t))||this.defaultValue},Zo),vo=new fo(["CONTACTS_MESSAGING_BLOCKED_BY_ADMIN","CONVERSATION_NOT_FULLY_LOADED","CONVERSATION_WITH_ROLE_YOU_ARE_CURRENTLY_IN","COUNTER_PARTY_IS_TIGERPAGE","COUNTER_PARTY_NOT_FULLY_LOADED","COUNTER_PARTY_TYPE_NOT_SUPPORTED","GROUP_HAS_NO_MEMBERS","GROUP_MEMBERS_NOT_LOADED","IS_ROLE_ASSIGNMENT_GROUP","NO_COUNTER_PARTY","ORGANIZATION_DOES_NOT_EXIST","USER_IS_NOT_IN_THIS_ROLE_CONVERSATION","USER_IS_NOT_MEMBER_OF_GROUP","NONE"]),yo=new po({CONTINUATION:{serverValue:"continuation"},CONVERSATION_END:{serverValue:"conversation_end"},FIRST_UNREAD_ITEM:{serverValue:"first_unread_item"}}),go=new po({ACKNOWLEDGED:{serverValue:"escalation_acknowledged"},CANCELLED:{serverValue:"escalation_cancelled"},INITIATED:{serverValue:"escalation_initiated"},MEMBER_ADDED:{serverValue:"escalation_member_added"},NO_RESPONSE:{serverValue:"escalation_no_response"}}),mo=new po({ACKNOWLEDGED:{serverValue:"confirmed"},CANCELLED:{serverValue:"cancelled"},IN_PROGRESS:{serverValue:"in_progress"},NO_RESPONSE:{serverValue:"no_response"}}),_o=new fo(["ACTIVATED_TEAM","ESCALATION","FORUM","GROUP","INTRA_TEAM","PATIENT_CARE","PATIENT_MESSAGING","ROLE_ASSIGNMENT","ROLE_P2P"]),bo=new po({LOW:{serverValue:-1},NORMAL:{serverValue:0},HIGH:{serverValue:1}},{defaultValue:"NORMAL"}),wo=new po({NA:{key:"NA"},NEW:{serverValue:"New"},DELIVERED:{serverValue:"Delivered"},READ:{serverValue:"Read"},ACKNOWLEDGED:{serverValue:"Confirmed"}},{defaultValue:"NA"}),Io=((oo={})[wo.NA]=0,oo[wo.NEW]=1,oo[wo.DELIVERED]=2,oo[wo.READ]=3,oo[wo.ACKNOWLEDGED]=4,oo),Oo=wo,Eo=new fo(["SENDING","SENT","FAILED","RETRYING","NEW","NA"]),To=new po({EMPTY_ROLE_NOTIFICATION:{serverValue:"empty_role_notification"},NA:{key:"NA"},ROLE_AWAY_NOTIFICATION:{serverValue:"role_away_notification"},SCHEDULE_MESSAGE:{serverValue:"schedule_message"},SMS_OPT_IN_NOTIFICATION:{serverValue:"sms_optin_notification"},SMS_OPT_OUT_NOTIFICATION:{serverValue:"sms_optout_notification"},SYSTEM:{serverValue:"system"},TEAM_REQUEST:{serverValue:"team_request"},USER_AWAY_NOTIFICATION:{serverValue:"user_away_notification"}},{defaultValue:"NA"}),So=new fo(["CALL_CHANGE","ESCALATION_EXECUTION_CHANGE","GROUP_MEMBERSHIP_CHANGE","HIGHER_CONTINUATION","LOWER_CONTINUATION","USER_SENT"]),Ao=new fo(["PATIENT","PROVIDER"]),Co=new po({ADD_MEMBERS:{serverValue:"add_members"}},{defaultValue:"NA"}),Ro=new po({ADMIT:{serverValue:"admit"},DISCHARGE:{serverValue:"discharge"},LAB:{serverValue:"lab"},TRANSFER:{serverValue:"transfer"}},{defaultValue:"NA"}),Po=new po({ACTION:{serverValue:"ehr_action_item"},HEADER:{serverValue:"ehr_header"},ITEM:{serverValue:"table_item"},TEXT:{serverValue:"ehr_text_view"}},{defaultValue:"NA"}),jo=new po({UNKNOWN:{serverValue:"unknown"},AVAILABLE:{serverValue:"available"},UNAVAILABLE:{serverValue:"unavailable"}}),xo=new po({CONVERSATION_MESSAGE_STATUS:{serverValue:"conversation_message_status"},GROUP_REPLAY:{serverValue:"group_replay"},MESSAGE_REPLAY:{serverValue:"message_replay"},OFFLINE:{serverValue:"offline"},ORGANIZATION_MESSAGE_STATUS:{serverValue:"organization_message_status"},ORGANIZATION_REPLAY:{serverValue:"organization_replay"},ROLE_OPT_IN:{serverValue:"optin"},ROLE_OPT_OUT:{serverValue:"optout"}}),Mo=new po({DISTRIBUTION_LIST_MEMBER:{serverValue:"dist_list_member"},DISTRIBUTION_LIST:{serverValue:"distribution_list"},FORUM:{serverValue:"public_group"},GROUP:{serverValue:"group"},MESSAGE_TEMPLATE:{serverValue:"message_template"},ORGANIZATION:{serverValue:"organization"},PATIENT_DISTRIBUTION_LIST:{serverValue:"patient_distribution_list"},PATIENT:{serverValue:"patient_account"},SCHEDULED_MESSAGE:{serverValue:"schedule_message"},TAG:{serverValue:"tag"},TEAM:{serverValue:"team"},USER:{serverValue:"account"}}),ko=new fo(["GLOBAL","GROUP","ORGANIZATION"],{valueFn:function(t){return t.toLowerCase()}}),No={CONNECTED:"Connected",NOTCONNECTED:"Not Connected",LEFTCALL:"Left call",MISSED:"Missed call",DECLINED:"Declined call",RINGING:"Ringing...",UNAVAILABLE:"Unavailable"},zo=new fo(["VISIBLE","HIDDEN","PRERENDER"]),Do=n(139).a,Uo=new fo(["ONLINE","OFFLINE","CONNECTING","UNREACHABLE"]),Lo=(so=function(t,e){return(so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}so(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Fo=(io=he.a,Lo(Qo,io),Qo.prototype.createEventSource=function(r,t){var o=this,e=t.auth,n=void 0===e?this.httpClient.getAuth():e,i=t.features,s=t.onOpen,a=t.onMessage,u=t.onError,c=/https?:/.test(r)?r:this.config.baseUrl+r,l=this.httpClient.getAuthHeaders(n,i);"TT-Route-Xmpp"===this.config.ttRoute&&(l["TT-Route-Xmpp"]="true"),i&&(l["TT-X-Features"]=i);var d=new Do(c,{headers:l}),h=!1,f=!1,p=!1,v=function(){p||(p=!0,d.removeEventListener("open",v),s&&s())},y=function(t){if(!h){h=!0,d.removeEventListener("error",y);var e,n=t?t.status:void 0;401===n?(e=new Or.WrongCredentialsError,o.emit("auth:invalid")):403===n?(e=new Or.PermissionDeniedError(r,"403","get"),o.emit("auth:invalid")):t&&t.message&&t.stack?(e=new Error(t.message)).stack=t.stack:e=f?new Error("EventSource connection closed"+(n?": status "+n:"")):new Error("Could not establish EventSource connection"+(n?": status "+n:"")),n&&(e.status=n),o.httpClient.networkStatus!==Uo.OFFLINE&&o.httpClient._setNetworkStatus(Uo.UNREACHABLE),u&&u(e)}};return d.addEventListener("open",v),d.addEventListener("error",y),d.addEventListener("message",function(t){var e=!f;f||(f=!0,o.httpClient._setNetworkStatus(Uo.ONLINE)),a&&a(t,{isFirstMessage:e})}),d},Qo),Bo=n(64),qo=n.n(Bo),Vo=n(3),Go=n(245),Ho=n.n(Go),Wo=n(141),Yo=n.n(Wo),Ko=n(142),$o=n(28),Xo=n(93);function Qo(t){var e=t.config,n=t.httpClient,r=t.logger,o=io.call(this)||this;return o.config=e,o.httpClient=n,o.logger=r,o}function Zo(){return null!==ao&&ao.apply(this,arguments)||this}function Jo(t,e){for(var n in void 0===e&&(e={}),Array.isArray(t)&&(t=t.reduce(function(t,e){return t[e]={},t},{})),this.keys=[],this.entries=[],this.entriesByKey={},this.defaultValue=e.defaultValue||null,t){this[n]=e.valueFn?e.valueFn(n):n;var r=lo({key:n},t[n]);this.entriesByKey[n]=r,this.entries.push(r),this.keys.push(n)}Object.freeze(this.keys),Object.freeze(this.entries),Object.freeze(this.entriesByKey)}function ti(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function ei(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}for(var ni,ri,oi=function(n,t){return ti(this,void 0,void 0,function(){var e;return ei(this,function(t){switch(t.label){case 0:return e="",[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,function(h){var t=this;return Promise.resolve().then(function(){return ti(t,void 0,void 0,function(){var o,i,s,a,u,c,e,n,r,l,d;return ei(this,function(t){switch(t.label){case 0:o=[],s=i=0,(c=new FileReader).addEventListener("load",function(){return a&&a(c.result)},!1),c.addEventListener("error",function(t){return u&&u(t)},!1),e=function(){var e,n,r;return ei(this,function(t){switch(t.label){case 0:return 0<s?[4,new Promise(function(t){return setTimeout(t,100)})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e=s+1048576,n=h.slice(s,e),s=e,[4,new Promise(function(t,e){a=t,u=e,c.readAsArrayBuffer(n)})];case 3:return r=t.sent(),o.push(r),i+=r.byteLength,[2]}})},t.label=1;case 1:return s<h.size?[5,e()]:[3,3];case 2:return t.sent(),[3,1];case 3:for(n=new Uint8Array(i),r=s=0,l=o;r<l.length;r++)d=l[r],n.set(new Uint8Array(d),s),s+=d.byteLength;return[2,{fieldValue:Object($o.a)(n.buffer),mimetype:h.type||"application/octet-stream",filename:h.name}]}})})})}(n)];case 3:e=t.sent(),t.label=4;case 4:return[2,e]}})})},ii=function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})},si=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},ai=["application/json","text/plain"],ui=(mi.prototype.appendField=function(d,h){return void 0===h&&(h=""),ii(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l;return si(this,function(t){if(Array.isArray(h))for(n=e=0,r=h;n<r.length;n++){if(o=r[n],"data"===d&&"object"==typeof o){if(i=o.mimetype,s=void 0===i?"application/json":i,a=o.namespace,u=o.payload,c=void 0===u?"":u,!a)throw new Error("Missing namespace on data["+e+"] object");l={"TT-X-Namespace":a},this._appendParsedField(d,{fieldValue:String(c),mimetype:s,filename:null,headers:l})}else this.appendField(d,o);e++}else h&&h.nodeType&&h.nodeName&&h.getAttribute&&(h=h.value),"object"==typeof h?this._appendParsedField(d,{fieldValue:JSON.stringify(h),mimetype:"application/json"}):this._appendParsedField(d,{fieldValue:String(h),mimetype:"text/plain"});return[2]})})},mi.prototype._appendParsedField=function(t,e){var n=e.fieldValue,r=e.filename,o=e.headers,i=e.mimetype,s=this.body.fields;r?r=Object($o.c)(r):n=Object($o.c)(n),ai.includes(i)&&(i+='; charset="utf-8"');var a=new Ko.RequestField(n,i,r,o);s.hasOwnProperty(t)?(Array.isArray(s[t])||(s[t]=[s[t]]),s[t].push(a)):s[t]=a},mi.prototype.appendFile=function(n,r){return ii(this,void 0,void 0,function(){var e;return si(this,function(t){switch(t.label){case 0:return e="",r?[4,oi(r,this.fileIdx++)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return this._appendParsedField(n,e),[2]}})})},mi.prototype.getContentType=function(){return this.body.getContentType()},mi.prototype.getPayload=function(){return ii(this,void 0,void 0,function(){var e;return si(this,function(t){return e=this.body.getData(),[2,new Blob([e])]})})},mi),ci=function(){return(ci=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},li=function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})},di=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},hi=[Or.PermissionDeniedError.CODE,Or.WrongCredentialsError.CODE],fi=(gi.prototype.mounted=function(){this._prefixBaseUrl=Yo()(this.config.baseUrl)},gi.prototype._contentType=function(t){switch(t){case"json":return"application/json";case"event-stream":return"text/event-stream";case"text":default:return"plain/text"}},gi.prototype.getAuth=function(t){return this._auth},gi.prototype.setAuth=function(t){this._auth=t},gi.prototype.removeAuth=function(){this._auth=null},Object.defineProperty(gi.prototype,"isSignedIn",{get:function(){return!!this._auth},enumerable:!1,configurable:!0}),gi.prototype.getAuthForKeyAndSecret=function(t,e){return t&&e?qo()(t+":"+e):null},gi.prototype.getAuthHeaders=function(t){if(void 0===t&&(t=this._auth),!t)return{};var e={};if(t.key&&t.secret)e.Authorization="Basic "+this.getAuthForKeyAndSecret(t.key,t.secret);else{if(!t.bearerToken||!t.udid)return{};e.Authorization="Bearer "+t.bearerToken,e["X-Device-ID"]=t.udid}return e},gi.prototype.isUnauthorizedError=function(t){return t&&hi.includes(t.code)},gi.prototype.downloadFileBlob=function(h,t){var f=this,e=(void 0===t?{}:t).headers,p=void 0===e?{}:e;return new Promise(function(t,e){var n=new XMLHttpRequest,r=f.config.baseUrl+h;n.open("GET",r,!0);for(var o=0,i=Object.entries(f.getAuthHeaders());o<i.length;o++){var s=i[o],a=s[0],u=s[1];n.setRequestHeader(a,u)}for(var c=0,l=Object.entries(p);c<l.length;c++){var d=l[c];a=d[0],u=d[1],n.setRequestHeader(a,u)}n.responseType="blob",n.onreadystatechange=function(){4===n.readyState&&(n.status<200||299<n.status?e(new Error("Failed downloading "+r+". Status = "+n.status)):t(n.response))},n.send(null)})},gi.prototype.downloadToFile=function(t,e){Or.TargetNotSupportedError.raise()},gi.prototype._watchNetworkConnection=function(){var t=this;this.networkStatus=navigator.onLine?Uo.ONLINE:Uo.OFFLINE,window.addEventListener("online",function(){t.config.eventsAutoReconnect?t._setNetworkStatus(Uo.CONNECTING):t._setNetworkStatus(Uo.ONLINE)}),window.addEventListener("offline",function(){t._setNetworkStatus(Uo.OFFLINE)})},gi.prototype._setNetworkStatus=function(t){var e=this.networkStatus;t!==e&&(this.networkStatus=t,this.emit("networkStatus:change",{networkStatus:t,previousStatus:e}))},gi),pi=function(_){fi.prototype[_]=function(g,m){return void 0===m&&(m={}),li(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y=this;return di(this,function(t){switch(t.label){case 0:if((m=ye.a.defaults(m||{},{reqFormat:"json",resFormat:"json",withCredentials:!0,withHeaders:!0})).urlParams&&(g=g.replace(/:([\w-]+)/g,function(t,e){var n=m.urlParams[e];return void 0!==n?encodeURIComponent(n):":"+e})),this.logger&&this.logger.info("start",_.toUpperCase(),g,m),(e=ci(ci({},m.headers),"TT-Route-Xmpp"===this.config.ttRoute?{"TT-Route-Xmpp":"true"}:null)).Accept=e.Accept||this._contentType(m.resFormat),m.requestId&&(e["Request-ID"]=m.requestId),"Authorization"in e||Object.assign(e,this.getAuthHeaders(m.auth)),n=Ho.a[_](g).use(this._prefixBaseUrl).query(m.query||{}),m.withCredentials&&(n=n.withCredentials()),!1!==m.retry&&(n=n.retry(m.retryCount||3)),!1!==m.timeout&&(n=n.timeout(!0===m.timeout?1e4:m.timeout)),(o=m.files&&Object.entries(m.files))&&0<o.length?(r=new ui,e["Content-Type"]=r.getContentType()):e["Content-Type"]=e["Content-Type"]||this._contentType(m.reqFormat),m.withHeaders&&(n=n.set(e)),!r)return[3,3];if(i=[],m.data)for(s=0,a=Object.entries(m.data);s<a.length;s++)u=a[s],f=u[0],c=u[1],i.push(r.appendField(f,c));for(l=0,d=o;l<d.length;l++)h=d[l],f=h[0],p=h[1],i.push(r.appendFile(f,p));return[4,Promise.all(i)];case 1:return t.sent(),[4,r.getPayload(r)];case 2:return v=t.sent(),n=n.send(v),[3,4];case 3:n=n.send(m.data),t.label=4;case 4:return[2,new Promise(function(a,u){n.end(function(t,e){var n=(e||{}).headers;if(t)if(y.logger&&y.logger.info("error",_.toUpperCase(),g,t),t.status)if(401===t.status)u(new Or.WrongCredentialsError(n));else if(403===t.status){var r=(m.urlParams||{}).userId,o=void 0===r?"403":r;u(new Or.PermissionDeniedError(g,o,_,ye.a.get(e,"body.error.message")))}else u(t);else u(new Or.ConnectionUnavailableError);else switch(m.resFormat){case"json":var i=e.body||{};"reply"in i&&(i=i.reply);var s={data:i,headers:n,getHeader:function(t){return n[t.toLowerCase()]},status:e.status};y.logger&&y.logger.info("success",_.toUpperCase(),g,s),a(s);break;default:y.logger&&y.logger.info("success",_.toUpperCase(),g,e.text?e.text.substr(0,80)+"...":"[null]"),a(e.text)}})})]}})})}},vi=0,yi=["get","post","put","patch","del"];vi<yi.length;vi++)pi(yi[vi]);function gi(t){var e=this,n=t.config,r=t.logger;this.downloadFileBlobAndUrl=function(n){return li(e,void 0,void 0,function(){var e;return di(this,function(t){switch(t.label){case 0:return[4,this.downloadFileBlob(n)];case 1:return[2,{blob:e=t.sent(),get url(){return this._url||(this._url=URL.createObjectURL(e))}}]}})})},this.config=n,this.logger=r,this._prefixBaseUrl=Yo()(this.config.baseUrl),this._watchNetworkConnection()}function mi(){this.body=new Ko.RequestBody,this.fileIdx=0,this.body.setType("multipart")}ni=fi.prototype.get,ri=Object(Vo.decorator)(ni),fi.prototype.get=function(t,e){return void 0===e&&(e={}),e.reusePromise?ri.call(this,t,e):ni.call(this,t,e)},Object.assign(fi.prototype,he.a.prototype);function _i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function bi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function wi(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Ii(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Oi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Ei(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Ti(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Si(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Ai(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Ci(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Ri(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Pi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function ji(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function xi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Mi(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function ki(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Ni(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function zi(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Di(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Ui(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Li(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function Fi(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Bi(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function qi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Vi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Gi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function Hi(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function Wi(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Yi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Ki(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function $i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Xi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Qi(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Zi(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Ji(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function ts(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function es(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function ns(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function rs(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function os(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function is(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var ss,as,us,cs,ls,ds,hs,fs,ps,vs,ys,gs,ms,_s,bs,ws,Is,Os,Es,Ts,Ss,As,Cs,Rs,Ps,js,xs,Ms,ks,Ns,zs,Ds,Us,Ls,Fs,Bs,qs,Vs,Gs=fi,Hs=n(246),Ws=n.n(Hs),Ys=n(9),Ks=n.n(Ys),$s=n(247),Xs=n.n($s),Qs=n(248),Zs=n.n(Qs),Js=n(143),ta=n.n(Js),ea=n(4),na=(Vs=function(t,e){return(Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Vs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ra=(qs=de.EventEmitter,na(ac,qs),ac.prototype._resolveModelIdWithTypes=function(t,e){if(!t)return null;if("string"==typeof t){var n=this._resolveEntity(t);if(!n)return t;t=n}return ea.c.oneOf("thing",t.$entityType,Object(ea.d)(e)),t.serverId||t.id||null},ac.prototype._resolveEntity=function(t,e){e=e?Object(ea.d)(e):this.host.allModelEntityTypes,"object"==typeof t&&(t.$entityType&&(ea.c.oneOf("thing",t.$entityType,e),e=[t.$entityType]),t=t.id);for(var n=0,r=e;n<r.length;n++){var o=r[n],i=this.host.modelsByEntityType[o].get(t);if(i)return i}return null},ac.prototype.mounted=function(){},ac.prototype.dispose=function(){},ac),oa=(Bs=function(t,e){return(Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Bs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ia=function(){return(ia=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sa={bandwidthProfile:{video:{mode:"collaboration",renderDimensions:{high:{height:1080,width:1920},standard:{height:720,width:1280},low:{height:540,width:960}}}},dominantSpeaker:!0,maxAudioBitrate:24e3,networkQuality:{local:1,remote:1},preferredVideoCodecs:[{codec:"VP8",simulcast:!0}],audio:!1,video:!1},aa=[No.CONNECTED,No.RINGING],ua=(oa(sc,Fs=ra),sc.prototype.start=function(t){var A=t.dataTrack,e=t.isVideo,C=void 0===e||e,n=t.metadata,R=void 0===n?{}:n,P=t.networkType,j=t.organizationId,x=t.participantIds,M=t.twilioOptions,k=t.userId;return _i(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O,E,T,S=this;return bi(this,function(t){switch(t.label){case 0:if(!j)throw new Or.ValidationError("organizationId","required");if(!x)throw new Or.ValidationError("participantIds","required");if(!x.length)throw new Or.ValidationError("participantIds array","required");if(!P)throw new Or.ValidationError("networkType","required");if(!Ks()(this.host,"config.twilioVideo"))throw new Or.ValidationError("Twilio config","required");return e=this.host,n=e.api,r=e.users,o=e.groups,i=this._getUserInfo(k,j),s=x.filter(function(t){return t!==i.id}),[4,Promise.all(s.map(function(e){return _i(S,void 0,void 0,function(){return bi(this,function(t){return[2,r.find(e,j)]})})}))];case 1:return a=t.sent(),u=Zs()(a,function(t){return t.isPatient||t.isPatientContact}),c=u[0],l=u[1],d=c.reduce(function(t,e){var n;return ia(ia({},t),((n={})[e.isPatient?"p_id":"pc_id"]=e.id,n))},{}),h=c[0]||l[0],f=i.id+"+"+h.id,[4,o.findAllWithSpecificMembers(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(s,[i.id]),j)];case 2:return 1===(y=t.sent()).length?(p={id:y[0].id,type:"group"},v=p.id):y.length||1!==s.length||(p={id:s[0],type:"account"}),g=ia(ia({},d),{callId:f,callerId:i.id,date:(new Date).toISOString(),groupId:v,identity:i.id,isVideo:C,metadata:R,name:i.displayName,networkType:P,orgId:j,participantsTokens:s,recipientToken:h.id,roleTokens:this._getRoleTokens(a,j)}),[4,n.calls.start({organization:j,recipients:s,payload:Ie.a.underscoreObject(g),context:p||{}})];case 3:return m=t.sent(),_=m.accessToken,b=m.roomName,w=m.disabledParticipants,I=void 0===w?{}:w,[4,this._connectTwilioRoom(_,b,A,M)];case 4:return O=t.sent(),E=this.host.models.Call.inject(ia(ia({},O),{accessToken:_,id:b,payload:g,roomName:b})),"patient"===P&&Object.keys(I).length?[4,n.calls.state(b,j,{callId:f,payload:{callState:"disabled_participants",disabledParticipants:I}})]:[3,6];case 5:t.sent(),t.label=6;case 6:return[4,this._initMemberStatuses(E,O.room.participants)];case 7:return T=t.sent(),[2,this.host.models.Call.inject(ia(ia({},E),{membersStatuses:T}))]}})})},sc.prototype.startWithGroup=function(t){var i=t.groupId,e=t.isVideo,s=void 0===e||e,n=t.metadata,a=void 0===n?{}:n,u=t.twilioOptions,c=t.userId;return _i(this,void 0,void 0,function(){var e,n,r,o;return bi(this,function(t){switch(t.label){case 0:if(!i)throw new Or.ValidationError("groupId","required");return[4,this.host.groups.find(i)];case 1:if(!(e=t.sent())||!e.hasCurrentUserOrRole)throw new Or.NotFoundError("group",i);return n=e.groupType,r=e.memberIds,o=e.organizationId,[2,this.start({isVideo:s,metadata:a,networkType:"PATIENT_MESSAGING"===n?"patient":"provider",organizationId:o,participantIds:r,twilioOptions:u,userId:c})]}})})},sc.prototype.decline=function(o,i){return _i(this,void 0,void 0,function(){var e,n,r;return bi(this,function(t){switch(t.label){case 0:return n=(e=i||{}).metadata,r=e.userId,[4,this.end(o,{metadata:n,reason:"declined",userId:r})];case 1:return[2,t.sent()]}})})},sc.prototype.end=function(h,f){return _i(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d;return bi(this,function(t){switch(t.label){case 0:if(n=(e=f||{}).metadata,r=e.reason,o=void 0===r?"ended":r,i=e.userId,s=this._resolveModelId(h),!(a=this._resolveEntity(s,"call")))return[2];if(u=a.callId,c=a.organizationId,l=a.id,d=this._getUserInfo(i,c),!c)throw new Or.ValidationError("organizationId","required");if(!o)throw new Or.ValidationError("reason","required");if(!l)throw new Or.ValidationError("roomName","required");if(!u)throw new Or.ValidationError("callId","required");return a.room&&a.room.disconnect(),this.host.models.Call.eject(a),this._clearTimers(),this.emit("closed"),[4,this.host.api.calls.end(l,c,{callId:u,payload:{callId:u,metadata:n,reason:o,userToken:d.id},reason:o,type:"call_ended",roomName:l})];case 1:return[2,t.sent()]}})})},sc.prototype.join=function(v,y){return _i(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p;return bi(this,function(t){switch(t.label){case 0:if(n=(e=y||{}).dataTrack,r=e.metadata,o=e.twilioOptions,i=this._resolveModelId(v),s=this._resolveEntity(i,"call"),a=s.callId,u=s.organizationId,c=s.payload.recipientToken,l=s.id,!u)throw new Or.ValidationError("organizationId","required");if(!l)throw new Or.ValidationError("roomName","required");if(!Ks()(this.host,"config.twilioVideo"))throw new Or.ValidationError("Twilio config","required");return this._incomingCallTimeout&&clearTimeout(this._incomingCallTimeout),[4,this.host.api.calls.join(l,u)];case 1:return d=t.sent(),h=Ie.a.camelizeObject(d).accessToken,[4,this.host.api.calls.answer(l,u,{payload:{recipientToken:c,roomName:l,userToken:this.host.currentUserId},callId:a})];case 2:return t.sent(),[4,this._connectTwilioRoom(h,l,n,o)];case 3:return f=t.sent(),[4,this._initMemberStatuses(s,f.room.participants)];case 4:return p=t.sent(),r?[4,this.updateMetadata(s,r)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2,this.host.models.Call.inject(ia(ia(ia({},s),f),{accessToken:h,membersStatuses:p}))]}})})},sc.prototype.inviteUser=function(b,w,I){return _i(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_=this;return bi(this,function(t){switch(t.label){case 0:if(n=(e=I||{}).metadata,r=e.userId,o=e.pfData,i=this._resolveModelId(b),s=this._resolveEntity(i,"call"),!w)throw new Or.ValidationError("invitedMemberId","required");return a=s.callId,u=s.membersStatuses,c=s.organizationId,l=s.payload,d=s.id,h=this.host.users,f=this._getUserInfo(r,c),p=u,[4,this._ringAndTrackMember(s,w)];case 1:return t.sent(),p[w]=No.RINGING,v=Object.entries(u).filter(function(t){t[0];var e=t[1];return aa.includes(e)}).map(function(t){return t[0]}),y=Object.entries(u).filter(function(t){return t[0],t[1]===No.CONNECTED}).map(function(t){return t[0]}),[4,Promise.all(v.map(function(e){return _i(_,void 0,void 0,function(){return bi(this,function(t){return[2,h.find(e,c)]})})}))];case 2:return g=t.sent(),m=ia(ia(ia({},Xs()(l,"groupId")),o),{metadata:n,name:Ks()(s,"payload.name")+" (Group Call)",connectedParticipants:y,participantsTokens:v,callerId:f.id,identity:f.id,roleTokens:this._getRoleTokens(g,c)}),[4,this.host.api.calls.invite(d,c,{callId:a,payload:m,recipients:[w]})];case 3:return t.sent(),[4,this.host.api.calls.state(d,c,{callId:a,payload:{callState:"participants_updated",inviteInitiator:f.id,newParticipants:[w],roleTokens:{}}})];case 4:return t.sent(),[2,this.host.models.Call.inject(ia(ia({},s),{membersStatuses:p}))]}})})},sc.prototype.invitePatient=function(o,i,s){return _i(this,void 0,void 0,function(){var e,n,r;return bi(this,function(t){switch(t.label){case 0:return n=(e=s||{}).metadata,r=e.userId,[4,this.inviteUser(o,i,{metadata:n,userId:r,pfData:{p_id:i}})];case 1:return[2,t.sent()]}})})},sc.prototype.invitePatientContact=function(o,i,s){return _i(this,void 0,void 0,function(){var e,n,r;return bi(this,function(t){switch(t.label){case 0:return n=(e=s||{}).metadata,r=e.userId,[4,this.inviteUser(o,i,{metadata:n,userId:r,pfData:{pc_id:i}})];case 1:return[2,t.sent()]}})})},sc.prototype.updateMetadata=function(r,o){return _i(this,void 0,void 0,function(){var e,n;return bi(this,function(t){switch(t.label){case 0:return e=this._resolveModelId(r),n=this._resolveEntity(e,"call"),[4,this.host.api.calls.state(n.id,n.organizationId,{callId:n.callId,payload:{callState:"metadata_update",metadata:o}})];case 1:return t.sent(),[2]}})})},sc.prototype.log=function(t){var s=t.network,a=t.organizationId,u=t.page;return _i(this,void 0,void 0,function(){var e,n,r,o,i=this;return bi(this,function(t){switch(t.label){case 0:if(!a)throw new Or.ValidationError("organizationId","required");if(!s)throw new Or.ValidationError("network","required");return[4,this.host.api.calls.log({network:s,organizationId:a,page:u})];case 1:return e=t.sent(),n=Ie.a.camelizeObject(e),r=n.metadata,o=n.results,[2,{metadata:r,results:o.map(function(t){return i.host.models.CallLogEntry.inject(t)})}]}})})},sc.prototype.reactToVoipSSE=function(t){var e=t.data,n=t.type;e=Ie.a.camelizeObject(Object(ea.l)(e));var r=n.split(":")[1],o={answered:this._handleAnsweredCall,ended:this._handleEndedCall,incoming:this._handleIncomingCall,state:this._handleCallStateChange};if(o[r]){var i=o[r].bind(this)(e);i&&this.emit(r,i)}},sc.prototype._handleAnsweredCall=function(t){var e=t.roomName,n=this._resolveEntity(e,"call");if(n)return this._clearCallState(n),!0},sc.prototype._handleEndedCall=function(t){var e=t.payload,n=e.reason,r=e.userToken,o=t.roomName,i=this._resolveEntity(o,"call");if(i){var s=i.membersStatuses,a=i.payload.callerId,u=i.room,c=this.host.currentUserId,l=t.reason||n||"",d=s;return u||a!==r?r===c||["declined","ended","unanswered"].includes(l)&&u&&("declined"===l&&(d[r]=No.DECLINED),Object.entries(d).filter(function(t){var e=t[0],n=t[1];return aa.includes(n)&&![r,c].includes(e)}).length<1)?this._clearCallState(i):this.host.models.Call.inject(ia(ia({},i),{membersStatuses:d})):this._clearCallState(i)}},sc.prototype._handleIncomingCall=function(t){var e=this,n=this.host.models.Call.inject(Object.assign(t,{callStatus:"incoming"}));return this._incomingCallTimeout=window.setTimeout(function(){e.end(n,{reason:"unanswered"})},this._providerRingLimit),n},sc.prototype._handleCallStateChange=function(t){var n=this,e=t.roomName,r=this._resolveEntity(e,"call");if(r){var o=r.payload,i=r.membersStatuses,s=t.payload,a=s.callState,u=s.disabledParticipants,c=s.metadata;if("metadata_update"===a)o.metadata=ia(ia({},o.metadata),c);else if("disabled_participants"===a&&u){o.disabledParticipants=u;var l=Object.entries(u).reduce(function(t,e){return t[e[0]]=No.UNAVAILABLE,t},{});i=ia(ia({},i),l)}else"participants_updated"===a&&Ks()(t,"payload.newParticipants",[]).forEach(function(e){return _i(n,void 0,void 0,function(){return bi(this,function(t){switch(t.label){case 0:return e!==this.host.currentUserId?[3,1]:(i[this.host.currentUserId]=No.CONNECTED,[3,3]);case 1:return e&&r.membersStatuses[e]!==No.UNAVAILABLE?(i[e]=No.RINGING,[4,this._ringAndTrackMember(r,e)]):[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})});return this.host.models.Call.inject(ia(ia({},r),{payload:o,membersStatuses:i}))}},sc.prototype._getUserInfo=function(e,n){var t=this.host.currentUser;if(!e||e===t.id)return t;var r=Ks()(t,"roles",[]).find(function(t){return t.botUserId===e&&t.organizationId===n});if(!r)throw new Or.NotFoundError("user",e);return{id:r.botUserId,displayName:r.displayName}},sc.prototype._initMemberStatuses=function(p,v){return _i(this,void 0,void 0,function(){var i,e,s,a,n,r,o,u,c,l,d,h,f=this;return bi(this,function(t){switch(t.label){case 0:return i=Array.from(v.values()).map(function(t){return t.identity}),e=this.host,s=e.currentUserId,a=e.users,n=Ks()(p,"memberIds",[]),r=ta()(n.concat(i).concat(s)),o=["pId","pcId"].map(function(t){return Ks()(p,"payload."+t)}).filter(function(t){return t}),u=Ws()(o,r),c=ta()(r.concat(u)).reduce(function(t,e){var n,r=e;if(p.membersStatuses[r])return t;var o="RINGING";return i.includes(r)||r===s?o="CONNECTED":Ks()(p,"payload.disabledParticipants["+r+"]",!1)?o="UNAVAILABLE":u.includes(r)&&(o="NOTCONNECTED"),ia(ia({},t),((n={})[r]=No[o],n))},{}),l=ia(ia({},p.membersStatuses),c),d=Math.max((new Date).valueOf()-new Date(p.payload.date).valueOf(),0),[4,this._getRingTimeLimit(p.organizationId,Ks()(p,"payload.networkType","patient"))];case 1:return h=t.sent(),n.forEach(function(i){return _i(f,void 0,void 0,function(){var e,n,r,o=this;return bi(this,function(t){switch(t.label){case 0:return l[i]!==No.RINGING?[2]:[4,a.find(i,p.organizationId)];case 1:return e=t.sent(),(n=e.isPatient||e.isPatientContact)&&-1===h||(r=n?h:this._providerRingLimit)<=d||this._ringTimeouts.push(window.setTimeout(function(){var t=o._resolveModelId(p),e=o._resolveEntity(t,"call");e&&e.membersStatuses[i]===No.RINGING&&o._emitMemberStatusUpdate(e,i,No.MISSED)},r-d)),[2]}})})}),[2,l]}})})},sc.prototype._emitMemberStatusUpdate=function(t,e,n){var r,o=this,i=this._resolveModelId(t);if(t=this._resolveEntity(i,"call")){var s=t.membersStatuses,a=ia(ia({},void 0===s?{}:s),((r={})[e]=n,r)),u=this.host.models.Call.inject(ia(ia({},t),{membersStatuses:a}));this.emit("memberUpdate",u),Object.entries(a).filter(function(t){var e=t[0],n=t[1];return aa.includes(n)&&o.host.currentUserId!==e}).length<1&&this._clearCallState(u)}},sc.prototype._clearCallState=function(t){var e=t.room;this._clearTimers(),e&&(e.off("participantConnected",this._twilioParticipantStatusChange.bind(this,t.id,"connected")),e.off("participantDisconnected",this._twilioParticipantStatusChange.bind(this,t.id,"disconnected")),this.end(t,{reason:"ended"}))},sc.prototype._clearTimers=function(){this._ringTimeouts.forEach(clearTimeout),this._incomingCallTimeout&&clearTimeout(this._incomingCallTimeout)},sc.prototype._connectTwilioRoom=function(i,s,a,u){return _i(this,void 0,void 0,function(){var e,n,r,o=this;return bi(this,function(t){switch(t.label){case 0:return e=[],n={},a&&e.push(a),[4,this.host.config.twilioVideo.connect(i,ia(ia(ia({},sa),u),{tracks:e}))];case 1:return(r=t.sent()).on("participantConnected",this._twilioParticipantStatusChange.bind(this,s,"connected")),r.on("participantDisconnected",this._twilioParticipantStatusChange.bind(this,s,"disconnected")),a&&(this._dataTrackPublished={},this._dataTrackPublished.promise=new Promise(function(t,e){o._dataTrackPublished.resolve=t,o._dataTrackPublished.reject=e}),r.localParticipant.on("trackPublished",function(t){t.track===a&&o._dataTrackPublished.resolve()}),r.localParticipant.on("trackPublicationFailed",function(t,e){e===a&&o._dataTrackPublished.reject(t)}),n.sendDataMessage=function(t){var e=void 0;try{e=JSON.stringify(t)}catch(t){console.error(t)}e&&o._dataTrackPublished.promise.then(function(){return a.send(e)})}),[2,ia(ia({},n),{room:r})]}})})},sc.prototype._twilioParticipantStatusChange=function(t,e,n){var r=n.identity,o=this._resolveModelId(t),i=this._resolveEntity(o,"call"),s="connected"===e?No.CONNECTED:No.LEFTCALL;this._emitMemberStatusUpdate(i,r,s)},sc.prototype._ringAndTrackMember=function(s,a){return _i(this,void 0,void 0,function(){var e,n,r,o,i=this;return bi(this,function(t){switch(t.label){case 0:return[4,this.host.users.find(a,s.organizationId)];case 1:return e=t.sent(),n=e.isPatient||e.isPatientContact,[4,this._getRingTimeLimit(s.organizationId,Ks()(s,"payload.networkType","patient"))];case 2:return r=t.sent(),n&&-1===r||(o=n?r:this._providerRingLimit,this._ringTimeouts.push(window.setTimeout(function(){var t=i._resolveModelId(s);i._resolveEntity(t,"call").membersStatuses[a]===No.RINGING&&i._emitMemberStatusUpdate(s,a,No.MISSED)},o))),[2]}})})},sc.prototype._getRoleTokens=function(t,r){return t.filter(function(t){return t.roles&&t.roles.length}).reduce(function(t,e){var n;return ia(ia({},t),((n={})[e.id]=void e.roles.filter(function(t){return t.organizationId===r}).map(function(t){return t.botUserId}),n))},{})},sc.prototype._getRingTimeLimit=function(n,r){return _i(this,void 0,void 0,function(){var e;return bi(this,function(t){switch(t.label){case 0:return"patient"!==r?[2,this._providerRingLimit]:[4,this.host.organizations.find(n)];case 1:return[2,1e3*(void 0===(e=t.sent().pfVideoCallLinkTtl)?60:e)]}})})},sc),ca=n(40),la=n.n(ca),da=n(249),ha=n.n(da),fa=n(30),pa=n.n(fa),va=n(12),ya=n.n(va),ga=n(98),ma=n.n(ga),_a=n(25),ba=n.n(_a),wa=n(97),Ia=n.n(wa),Oa=n(6),Ea=n(33),Ta=(Ls=function(t,e){return(Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ls(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Sa=function(){return(Sa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Aa=new Ia.a.MD5,Ca=[So.ESCALATION_EXECUTION_CHANGE,So.GROUP_MEMBERSHIP_CHANGE],Ra=Oo.toServer(Oo.DELIVERED),Pa=((ss={})[go.ACKNOWLEDGED]="Acknowledged",ss[go.CANCELLED]="Cancelled",ss[go.INITIATED]="Initiated",ss[go.MEMBER_ADDED]="Added",ss[go.NO_RESPONSE]="ended with No Response",ss),ja=[_o.GROUP,_o.FORUM,_o.ROLE_ASSIGNMENT,_o.ROLE_P2P],xa={ADD:"added",JOIN:"joined",LEAVE:"left",REMOVE:"removed",DENY:"declined"},Ma={ADD:"to",REMOVE:"from",DENY:"to join"},ka=((as={})[_o.ACTIVATED_TEAM]="group",as[_o.ESCALATION]="escalation",as[_o.FORUM]="forum",as[_o.GROUP]="group",as[_o.PATIENT_CARE]="care team",as[_o.ROLE_P2P]="conversation",as[_o.PATIENT_MESSAGING]="group",as[_o.INTRA_TEAM]="team",as),Na=[Oo.NEW,Oo.DELIVERED],za=Oo.toServer(Oo.READ),Da={OPT_IN:"opted into",OPT_OUT:"opted out of"},Ua=(Ta(ic,Us=ra),ic.prototype.mounted=function(){this.__escalationEnabledOrganizations=[],this.__queuedConversationsToReload=[],this._convByConvHandle={},this._fetched=!1,this._roleConversationsProcessingEvent={},this._rolesFriendsEventPromise=null,this.host.on("message:sending",this._onSendingMessage),this.host.on("message:sent",this._onSentMessage),this.host.models.Group.on("afterEject",this._onRemoveGroup),this.host.models.Group.on("afterInject",this._onChangeGroup),this.host.models.Team.on("afterEject",this._onRemoveTeam),this.host.models.Message.on("afterInject",this._onChangeMessage),this.host.models.Message.on("afterEject",this._onRemoveMessage),this.host.models.Organization.on("afterInject",this._onChangeOrganization)},ic.prototype.dispose=function(){this._convByConvHandle={},this._fetched=!1,this._rolesFriendsEventPromise=null,this.__escalationEnabledOrganizations=[],this.__queuedConversationsToReload=[],this.host.removeListener("message:sending",this._onSendingMessage),this.host.removeListener("message:sent",this._onSentMessage),this.host.models.Group.removeListener("afterEject",this._onRemoveGroup),this.host.models.Group.removeListener("afterInject",this._onChangeGroup),this.host.models.Team.removeListener("afterEject",this._onRemoveTeam),this.host.models.Message.removeListener("afterInject",this._onChangeMessage),this.host.models.Message.removeListener("afterEject",this._onRemoveMessage),this.host.models.Organization.removeListener("afterInject",this._onChangeOrganization)},ic.prototype.clearTimeline=function(t,e){var n=(void 0===e?{}:e).emit,r=void 0===n||n,o=this._resolveEntity(t,"conversation");if(!o)throw new Or.NotFoundError(this.host.models.Conversation.name,t);t=this._resolveModelId(t),this.clearMessageStatuses(o,{emit:!1});for(var i=o.higherContinuation,s=o.lowerContinuation,a=0,u=0,c=o.timeline;u<c.length;u++){var l=c[u];l.isEphemeral||(l.inTimeline=!1,a+=1)}return o.isLive=!1,i.itemsEstimate=null,s.itemsEstimate=null,r&&this.emit("clearTimeline",t),this.config.condensedReplays?this.host.models.Conversation.inject(o):this.__reloadConversation(o,{notify:!1}),a},ic.prototype.fetchTimeline=function(w,t){var e=void 0===t?{}:t,n=e.anchorPoint,I=void 0===n?yo.CONVERSATION_END:n,O=e.continuation,r=e.fetchAllItems,E=void 0!==r&&r,o=e.markAsDelivered,T=void 0===o||o,i=e.maxItems,S=void 0===i?15:i;return Ii(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b;return Oi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(w,"conversation")))throw new Or.NotFoundError(this.host.models.Conversation.name,w);return w=this._resolveModelId(w),this.config.condensedReplays?[4,this._fetchTimelineCR(w,{anchorPoint:I,continuation:O,conversation:e,fetchAllItems:E,markAsDelivered:T,maxItems:S})]:[3,2];case 1:return[2,t.sent()];case 2:if(I!==yo.CONTINUATION&&e.isLive&&(!E&&e.timeline.length>=S||e.lowerContinuation&&0===e.lowerContinuation.itemsEstimate))return[2,0];if(n=e.content,r=e.timeline,o=e.firstUnreadMessage,i=n.length,s=0,a=[],u=i-S,c=i,I===yo.CONVERSATION_END)this.clearTimeline(e,{emit:!1});else if(I===yo.FIRST_UNREAD_ITEM){for(this.clearTimeline(e,{emit:!1}),v=-1,l=0,d=n;l<d.length&&(b=d[l],c=++v,o!==b);l++);c<n.length&&(c=Math.min(c+S,n.length))}else if(I===yo.CONTINUATION)if(h=r[0]?r[0].sortNumber:1/0,f=r[r.length-1]?r[r.length-1].sortNumber:0,0===(p="LOWER"===O?h:f))c-=S;else for(v=-1,y=0,g=n;y<g.length&&(b=g[y],c=++v,!("HIGHER"===O&&b.sortNumber>p))&&!("LOWER"===O&&b.sortNumber>=p);y++);for(I!==yo.CONVERSATION_END&&(I===yo.CONTINUATION&&"HIGHER"===O?i=(u=c)+S:(c===n.length-1&&(c+=1),u=(i=c)-S)),i=Math.min(i,n.length+1),u=Math.max(u,0),a.push.apply(a,n.slice(u,i)),m=0,_=a;m<_.length;m++)(b=_[m]).inTimeline||(b.inTimeline=!0,this.host.models.Message.inject(b),s+=1);return[2,s]}})})},ic.prototype._fetchTimelineCR=function(I,t){var e=void 0===t?{}:t,n=e.anchorPoint,O=void 0===n?yo.CONVERSATION_END:n,E=e.continuation,T=e.conversation,r=e.fetchAllItems,S=void 0!==r&&r,o=e.markAsDelivered,A=void 0===o||o,i=e.maxItems,C=void 0===i?15:i;return Ii(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w;return Oi(this,function(t){switch(t.label){case 0:return O!==yo.CONTINUATION&&T.isLive&&(!S&&T.timeline.length>=C||T.lowerContinuation&&0===T.lowerContinuation.itemsEstimate)?[2,0]:(O===yo.CONVERSATION_END?this.clearTimeline(T,{emit:!1}):O===yo.FIRST_UNREAD_ITEM&&(T.firstUnreadMessage=null,this.clearTimeline(T,{emit:!1})),[4,this.host.api.conversations.fetchTimeline(I,yo.toServer(O),C,{continuation:E,markAsDelivered:A})]);case 1:for(e=t.sent(),n=e.direction,r=e.higher_continuation,o=e.lower_continuation,i=e.max_items,s=e.timeline,a=T.higherContinuation,u=T.lowerContinuation,c=null,i&&(C=i),l=0,d=s;l<d.length;l++)h=d[l],"tigertext:iq:bang"===(f=h.xmlns)?(p=h.bang_id||""+h.sort_number)?this.host.groups.__handleBang({data:h,eventId:p,alwaysAddToTimeline:!0}):this.logger.warn("Skipping bang with no event id"):"tigertext:iq:message"===f||"tigertext:iq:group_message"===f?(h.conversation_id||(h.conversation_id=I),(v=this._reactToMessageEventCR({data:h,injectConversation:!1}).message).inTimeline=!0,v.isOutgoing||(y={id:v.id+":"+v.counterPartyId,messageId:v.id,status:Oo.resolve(h.status),userId:this.host.currentUserId},this.host.models.MessageStatusPerRecipient.inject(y)),v.senderStatus=Eo.SENT,g=this.host.models.Message.inject(v),c=c||g):this.logger.warn("Skipping timeline entry with unrecognized xmlns: "+f);return"Higher"!==n&&"Initial"!==n||(b=0===s.length||s.length<C?0:1,O===yo.CONVERSATION_END&&(b=0),1===b&&"Initial"===n&&(m=s[s.length-1],_=T.lastMessage,O===yo.FIRST_UNREAD_ITEM&&c&&!c.isUnread?b=0:_&&m.message_id===_.id&&(b=_.isUnread?1:0)),a={continuation:{higher_continuation:r},itemsEstimate:b}),"Lower"!==n&&"Initial"!==n||(b=0===s.length||s.length<C?0:1,u={continuation:{lower_continuation:o},itemsEstimate:b}),w=s.length,T.isLive=0===a.itemsEstimate,T.higherContinuation=a,T.lowerContinuation=u,this.host.models.Conversation.inject(T),O===yo.CONTINUATION||void 0===T.lowestSortNumber?[3,3]:[4,this.markAsDelivered(T.id)];case 2:t.sent(),t.label=3;case 3:return[2,w]}})})},ic.prototype.findAll=function(n){return void 0===n&&(n={}),Ii(this,void 0,void 0,function(){var e;return Oi(this,function(t){switch(t.label){case 0:return n=ye.a.defaults(n,{includeMutes:!0}),this.config.condensedReplays&&(n.includeMutes=!1),this._fetched?[2,this.getAll()]:[4,Promise.all([this.host.api.roster.findAll(),n.includeMutes?this.host.mute.findAll():Promise.resolve()])];case 1:return e=t.sent()[0],this.config.condensedReplays?[2,this._processFindAllCR(e)]:[2,this._processFindAll(e)]}})})},ic.prototype.findAllForOrganization=function(n){return Ii(this,void 0,void 0,function(){var e;return Oi(this,function(t){switch(t.label){case 0:if(n=this._resolveModelIdWithTypes(n,"organization"),!this.config.condensedReplays)throw new Or.NotSupportedError("findAllForOrganization() may not be called if this.config.condensedReplays=false");return this._fetched?[2,this.getAllForOrganization(n)]:[4,this.host.api.roster.findAll({organizationId:n})];case 1:return e=t.sent(),[2,this._processFindAllCR(e)]}})})},ic.prototype._processFindAllCR=function(t){for(var e=[],n=[],r={counterParty:"full",groupMembers:"full",organization:"placeholder"},o=0;o<t.length;o++){var i=(c=t[o]).entity;if(i){var s=this.host.modelNameByEntityType(i.type);"user"===s?n.push({rawConversation:c,origIndex:o}):s&&e.push({rawConversation:c,origIndex:o})}}for(var a=0,u=n;a<u.length;a++){var c=(f=u[a]).rawConversation;o=f.origIndex,f.conversation=this.__injectConversation(c,{origIndex:o})}for(var l=0,d=e;l<d.length;l++)c=(f=d[l]).rawConversation,o=f.origIndex,f.conversation=this.__injectConversation(c,{hasCurrentUser:!0,origIndex:o});for(var h=[];0<e.length||0<n.length;){var f,p=(f=0===e.length?n.shift():0===n.length||e[0].origIndex<n[0].origIndex?e.shift():n.shift()).conversation;this.__ensureEntities(p,r),h.push(p)}return this._fetched=!0,h},ic.prototype._processFindAll=function(t){for(var e=[],n=[],r=[],o=0;o<t.length;o++){var i=(g=t[o]).organization_key,s=g.type,a=Ei(g,["organization_key","type"]),u=this.host.modelNameByTypeNS(s);if(a.organizationId=i,"user"===(g={entityAttrs:a,entityType:u,organizationId:i,origIndex:o}).entityType)g.counterParty=this.__injectCounterParty(g),r.push(g);else if(g.entityType){if("group"===u&&(g.groupType=this.host.groups.__extractGroupTypeFromAttrs(a)),g.groupType===_o.FORUM)delete a.members;else if(g.groupType===_o.PATIENT_MESSAGING&&g.entityAttrs&&g.entityAttrs.metadata){var c=g.entityAttrs,l=c.avatar,d=c.metadata,h=d.patient_id,f=d.patient_contact_id;this.host.models.User.injectPlaceholder({id:f||h,avatar:l,metadata:d})}n.push(g)}}for(var p=0,v=n;p<v.length;p++)(g=v[p]).counterParty=this.__injectCounterParty(Sa(Sa({},g),{hasCurrentUser:!0})),e.push(g);for(var y=[];0<e.length||0<r.length;){var g,m=(g=0===e.length?r.shift():0===r.length||e[0].origIndex<r[0].origIndex?e.shift():r.shift()).conversationId,_=g.counterParty,b=g.lastMessage,w=g.muted,I=(i=g.organizationId,u=g.entityType,g.groupType),O="group"===u&&I&&"PATIENT_MESSAGING"===I?Ao.PATIENT:Ao.PROVIDER;delete _.$placeholder;var E=void 0;this.host.config.condensedReplays&&b&&b.sort_number&&(E=b.sort_number);var T=this.ensureConversation(_.$entityType,_.id,i,{conversationId:m,ensureEntities:{counterParty:"full",groupMembers:"full",organization:"placeholder"},highestSortNumber:E,muted:w,network:O});T._counterPartyAddedOnServer=!0,y.push(T)}return this._fetched=!0,y},ic.prototype.find=function(a,u){return void 0===u&&(u={}),Ii(this,void 0,void 0,function(){var e,n,r,o,i,s;return Oi(this,function(t){switch(t.label){case 0:return u=ye.a.defaultsDeep(u,{ensureEntities:{counterParty:"full",escalationExecution:"full",groupMembers:"placeholder",messageCounterParties:"full",organization:"placeholder",touchOnRelatedEntityLoad:!1}}),this.config.condensedReplays?(e=this.getById(a))&&e.$localOnly?[3,2]:[4,this.host.api.conversations.find(a)]:[3,3];case 1:if(!(n=t.sent()))throw new Or.NotFoundError(this.host.models.Conversation.name,a);if(!(e=this.__injectConversation(n)))throw new Or.NotFoundError(this.host.models.Conversation.name,a);t.label=2;case 2:return[3,6];case 3:return r=u.groupId,o=u.organizationId,i=u.includeMutes,s=r&&o?this.getConversationKey("group",r,o):a,(e=this.getById(s))?[3,5]:[4,this.findAll({includeMutes:i})];case 4:t.sent(),e=this.getById(s),t.label=5;case 5:if(!e)throw new Or.NotFoundError(this.host.models.Conversation.name,a);t.label=6;case 6:return u.ensureEntities?[4,this.__ensureEntities(e,u.ensureEntities)]:[3,8];case 7:t.sent(),t.label=8;case 8:return[2,e]}})})},ic.prototype.__injectConversation=function(t,e){var n,r=void 0===e?{}:e,o=r.hasCurrentUser,i=r.highestSortNumber,s=r.origIndex,a=void 0===s?this.host.models.Conversation.getAll().length:s,u=t.conversation_id,c=t.entity,l=t.first_expiring_unread_message,d=t.in_progress_escalation_count,h=t.last_message,f=t.lowest_sort_number,p=t.muted,v=t.organization_id,y=t.unread_message_count,g=t.unread_priority_message_count,m=this.getById(u);if(m)n=m.counterParty,v=m.organizationId;else{if(v=v||t.organization_key,!p&&c&&c.muted&&(p=c.muted,delete c.muted),c&&(n=this.__injectCounterParty({conversationId:u,entityAttrs:c,entityType:c.$entityType,hasCurrentUser:o,organizationId:v})),!n)return null;delete n.$placeholder,m=m||this.host.models.Conversation.createInstance({id:u,counterParty:n,organizationId:v,_origIndex:a})}var _=n.id,b=n.$entityType,w=n.groupType;if("group"!==b||w!==_o.FORUM||n.hasCurrentUser||(h=null),l?(h&&(h.message_id===l.message_id?l=h:(l.senderId=h.sender_token,l.senderOrganizationId=h.sender_organization)),m.firstExpiringUnreadMessage=this._ensureFirstExpiringUnreadMessage({rawFirstExpiringUnreadMessage:l,conversationId:u,counterParty:n})):null===l&&(m.firstExpiringUnreadMessage=null),void 0!==h){var I=h?this._ensureLastMessage({rawLastMessage:h,conversationId:u,counterParty:n}):null;if(I&&I.isEphemeral&&(!(O=m.lastEphemeralMessage)||I.sortNumber>O.sortNumber)&&(m.lastEphemeralMessage=I),m.lastEphemeralMessage){var O=m.lastEphemeralMessage;(!I||O.sortNumber>I.sortNumber)&&(I=O)}m.lastMessage=I,void 0===i&&h&&h.sort_number&&(i=h.sort_number)}m._counterPartyAddedOnServer=!0,c&&c.metadata&&(m.metadata=c.metadata),void 0!==i&&i>m.highestSortNumber&&(m.highestSortNumber=i),void 0!==f&&0!==f&&(m.lowestSortNumber=f),void 0!==d&&(m.inProgressEscalationCount=d),void 0!==p&&(m.muted=p),m._markingAsRead&&(void 0===i||i<=m._markingAsReadSortNumber)||(void 0!==y&&(m.unreadCount=y),void 0!==g&&(m.unreadPriorityCount=g)),this.host.models.Conversation.inject(m);var E=this.getConversationKey(b,_,v);return this._convByConvHandle[E]=m},ic.prototype.refetch=function(){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){return this._fetched=!1,[2,this.findAll()]})})},ic.prototype._ensureLastMessage=function(t){var e=t.rawLastMessage,n=t.conversationId,r=t.counterParty,o=e.message_id,i=Ei(e,["message_id"]);if(!o)return null;var s=this.host.messages.getById(o);return s?(s.shouldEnsureRecipientStatus=!0,s.senderStatus=Eo.SENT,this.host.models.Message.inject(s)):(i.senderStatus=Eo.SENT,i.id=o,i.shouldEnsureRecipientStatus=!0,i.conversationId=n,i.counterParty=r,s=this.host.models.Message.injectPlaceholder(i)),s},ic.prototype._ensureFirstExpiringUnreadMessage=function(t){var e=t.rawFirstExpiringUnreadMessage,n=t.conversationId,r=t.counterParty,o=e.expire_in,i=e.message_id,s=Ei(e,["expire_in","message_id"]);if(i){var a=this.host.messages.getById(i);return a?(a.shouldEnsureRecipientStatus=!0,a.expireIn=o,this.host.models.Message.inject(a)):(s.id=i,s.shouldEnsureRecipientStatus=!0,s.expireIn=o,s.conversationId=n,s.counterParty=r,a=this.host.models.Message.injectPlaceholder(s)),a}return null},ic.prototype.markAsDelivered=function(o){return Ii(this,void 0,void 0,function(){var e,n,r;return Oi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(o,"conversation")))throw new Or.NotFoundError(this.host.models.Conversation.name,o);if(o=this._resolveModelId(o),!this.config.condensedReplays)return[3,5];n=e.highestSortNumber,r=e.lowestSortNumber,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.conversations.updateConversationStatus(o,Ra,{highestSortNumber:n,lowestSortNumber:r})];case 2:return t.sent(),e.lowestSortNumber=null,[3,4];case 3:return t.sent(),this.logger.warn("failed to mark conversation "+o+" as delivered"),[3,4];case 4:return this.host.models.Conversation.inject(e),[3,6];case 5:return[2,this.host.messages.markAsDelivered(e.messages)];case 6:return[2]}})})},ic.prototype.markAsRead=function(o,i){return void 0===i&&(i={}),Ii(this,void 0,void 0,function(){var e,n,r;return Oi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(o,"conversation")))throw new Or.NotFoundError(this.host.models.Conversation.name,o);if(o=this._resolveModelId(o),!this.config.condensedReplays)return[3,5];if(n=e.highestSortNumber,r=e.unreadCount,!e._markingAsRead){if(0===r)return[2];e._markingAsRead=!0,e._markingAsReadSortNumber=n,e._markingAsReadExpiration=(new Date).getTime()+3e4,this.__reloadConversation(e)}if(i.localOnly)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.conversations.updateConversationStatus(o,za,{highestSortNumber:n})];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.logger.warn("failed to mark conversation "+o+" as read"),[3,4];case 4:return[3,6];case 5:return[2,this.host.messages.markAsRead(e.markableAsReadMessages,i)];case 6:return[2]}})})},ic.prototype.add=function(r,o,i){return Ii(this,void 0,void 0,function(){var e,n;return Oi(this,function(t){switch(t.label){case 0:e=this.ensureConversation(r,o,i),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.roster.add(r,o,i)];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),this.logger.warn("can't add "+o+" "+r,n),[3,4];case 4:return e._counterPartyAddedOnServer=!0,[2]}})})},ic.prototype.remove=function(i){return Ii(this,void 0,void 0,function(){var e,n,r,o;return Oi(this,function(t){switch(t.label){case 0:if(i=this._resolveModelId(i),!(e=this._resolveEntity(i,"conversation")))throw new Or.NotFoundError(this.host.models.Conversation.name,i);n=e.counterPartyId,r=e.counterPartyType,o=e.organizationId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.roster.remove(r,n,o)];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.logger.warn("can't remove conversation "+i),[3,4];case 4:return[2]}})})},ic.prototype.ensureConversation=function(t,e,n,r){void 0===r&&(r={});var o=(r=ye.a.defaultsDeep(r,{ensureEntities:{counterParty:!1,organization:!1,messageCounterParties:!1,groupMembers:!1,touchOnRelatedEntityLoad:!0}})).conversationId,i=this.getConversationKey(t,e,n);if(this.config.condensedReplays&&!o){var s=this._convByConvHandle[i];s&&(o=s.id)}o=o||i;var a=this.getById(o);if(a){this.__ensureEntities(a,r.ensureEntities);var u=!1;return this.config.condensedReplays&&void 0!==r.highestSortNumber&&(a.highestSortNumber=r.highestSortNumber,u=!0),this.config.condensedReplays&&void 0!==r.muted&&(a.muted=r.muted,u=!0),this._convByConvHandle[i]=a,u&&this.host.models.Conversation.inject(a),a}var c={id:o,counterPartyType:t,counterPartyId:e,organizationId:n,_origIndex:this.host.models.Conversation.getAll().length};r.highestSortNumber&&(c.highestSortNumber=r.highestSortNumber),r.muted&&(c.muted=r.muted),r.network&&(c.network=r.network);var l=this.host.models.Group.get(e);l&&l.groupType===_o.PATIENT_MESSAGING&&(c.network=Ao.PATIENT);var d=this.host.metadata.get(e,n);if(d){var h=d.data;c.metadata=h}return a=this.host.models.Conversation.createInstance(c),this.__ensureEntities(a,r.ensureEntities),this.host.models.Conversation.inject(a),this._convByConvHandle[i]=a},ic.prototype.__ejectConversation=function(t){var e=this.getById(t);if(e){var n=e.counterPartyType,r=e.counterPartyId,o=e.organizationId,i=this.getConversationKey(n,r,o);delete this._convByConvHandle[i],this.host.models.Conversation.eject(e),this.__queuedConversationsToReload=this.__queuedConversationsToReload.filter(function(t){return t.id!==e.id})}return e},ic.prototype.reactToMessageEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToMessageEventCR({data:e});else{var n=this._reactToMessageEvent({data:e}),r=n.message,o=n.conversation;this.host.models.Message.inject(r),this.emit("message",r),o&&(this.__addConversationCounterPartyToServerRosterIfShould(o),o.emit("message",r),this.config.condensedReplays&&o._markingAsRead&&r.sortNumber>o._markingAsReadSortNumber&&this.__clearOptimisticStatus([o])),Io[r.markedRecipientStatus]<Io[Oo.DELIVERED]&&this.host.messages.markAsReceived(r,{})}},ic.prototype.reactToMessageEventCR=function(t){var e=t.data,n={},r=this._reactToMessageEventCR({data:e}),o=r.message,i=r.conversation;this.emit("message",o),i&&(this.__addConversationCounterPartyToServerRosterIfShould(i),i.emit("message",o)),n.queue=!0,this.host.messages.markAsReceived(o,n)},ic.prototype._reactToMessageEvent=function(t){var e=t.data,n=t.conversationId,r=void 0===n?null:n;e=Object(ea.l)(e);var o=this.host.currentUserId,i=e.recipient_status;i=i||[];var s={status:e.status,timestamp:e.created_time};e.team_request&&this.host.teams.__injectTeamRequest(e.team_request);var a=this.host.models.Message.parseAttrs(e);a.messageType=So.USER_SENT;var u=!0;if(a.groupId)a.counterPartyType="group",a.counterPartyId=a.groupId;else if(a.recipientId){if(this.host.distributionLists.getById(a.recipientId))a.counterPartyType="distributionList";else if(this.host.users.getById(a.recipientId))a.counterPartyType="user";else{u=!1;var c=this.host.messages._looksLikeDistributionListMessage(a);a.counterPartyType=c?"distributionList":"user"}a.counterPartyId="distributionList"===a.counterPartyType||a.senderId===o?a.recipientId:a.senderId}var l=this.host.messages._isMessageOutgoing(a);"distributionList"!==a.counterPartyType&&(s.account_id=l?a.recipientId:this.host.currentUserId,s.account_id&&i.push(s)),a.senderStatus=Eo.SENT;var d=u&&this.ensureConversation(a.counterPartyType,a.counterPartyId,a.recipientOrganizationId,{conversationId:r,ensureEntities:{counterParty:"placeholder",groupMembers:"placeholder",organization:"placeholder"}});a.conversationId=d?d.id:null;var h=this.host.models.Message.get(a.id);if(h){var f=a.body,p=a.escalationExecutionId,v=a.isForwardedFromPatientNetwork,y=a.originalSender,g=a.patientDetails,m=a.priority,_=a.sortNumber,b=a.sortSeries;h.body=f,h.escalationExecutionId=p||null,h.isForwardedFromPatientNetwork=v,h.originalSender=y,h.patientDetails=g,h.priority=m,h.shouldEscalate=!1,h.sortNumber=_,h.sortSeries=b}else h=this.host.models.Message.createInstance(a,!1);var w=h.senderId===o?h.recipientId:h.senderId;w&&"distributionList"!==h.counterPartyType&&this.__ensureMessageCounterParty(d,w,{messageCounterParties:this.host.currentlyServingOfflineMessages?"placeholder":"full",touchOnRelatedEntityLoad:!0});for(var I=0,O=i;I<O.length;I++){var E=O[I];this.config.condensedReplays||this.host.messages.__injectMessageStatus(h,E)}return"group"!==a.counterPartyType&&!this.config.condensedReplays||(h.shouldEnsureRecipientStatus=!0),h.inTimeline=!(!d||!d.isLive),{message:h,conversation:d}},ic.prototype._reactToMessageEventCR=function(t){var e=void 0===t?{}:t,n=e.data,r=void 0===n?{}:n,o=e.injectConversation,i=void 0===o||o;r=Object(ea.l)(r);var s,a=this.host.currentUserId,u=r.first_expiring_unread_message,c=r.last_message,l=(r.type,r.unread_message_count),d=r.unread_priority_message_count,h=(r.xmlns,Ei(r,["first_expiring_unread_message","last_message","type","unread_message_count","unread_priority_message_count","xmlns"]));h.team_request&&this.host.teams.__injectTeamRequest(h.team_request),c&&(c.conversation_id=h.conversation_id,s=c.sort_number,c.is_group&&!c.group_token&&(c.group_token=c.recipient_token),c.message_id===h.client_id&&(h.attachmentName=c.attachment_name)),h.is_group&&!h.group_token&&(h.group_token=h.recipient_token);var f=this.host.models.Message.parseAttrs(h);if(f.messageType=So.USER_SENT,f.groupId)f.counterPartyType="group",f.counterPartyId=f.groupId;else if(f.recipientId){if(this.host.distributionLists.getById(f.recipientId))f.counterPartyType="distributionList";else if(this.host.users.getById(f.recipientId))f.counterPartyType="user";else{var p=this.host.messages._looksLikeDistributionListMessage(f);f.counterPartyType=p?"distributionList":"user"}f.counterPartyId="distributionList"===f.counterPartyType||f.senderId===a?f.recipientId:f.senderId}f.senderStatus=Eo.SENT;var v,y=this.host.models.Message.get(f.id);if(y?this.host.models.Message.inject(Sa({shouldEscalate:!1},f)):y=this.host.models.Message.inject(f),i){var g={conversation_id:y.conversationId,entity:this._resolveEntity(f.counterPartyId,f.counterPartyType),first_expiring_unread_message:u,last_message:c,organization_id:y.__organizationId,unread_message_count:l,unread_priority_message_count:d};if(c&&c.sort_number<y.sortNumber?(s=y.sortNumber,g.last_message={message_id:y.id},(v=this.__injectConversation(g,{highestSortNumber:s}))&&this._ensureLastMessage({rawLastMessage:c,conversationId:v.id,counterParty:v.counterParty})):v=this.__injectConversation(g,{highestSortNumber:s}),c&&c.message_id&&v&&v.isLive){var m=this.host.models.Message.get(c.message_id);m&&!m.inTimeline&&(m.inTimeline=!0,this.host.models.Message.inject(m))}}else v=this.host.conversations.getById(h.conversation_id);var _=y.senderId===a?y.recipientId:y.senderId,b="group"!==y.counterPartyType||y.counterParty&&"FORUM"===y.counterParty.groupType;return _&&"distributionList"!==y.counterPartyType&&b&&this.__ensureMessageCounterParty(v,_,{messageCounterParties:this.host.currentlyServingOfflineMessages?"placeholder":"full",touchOnRelatedEntityLoad:!0}),y.inTimeline=!!y.isEphemeral||!(!v||!v.isLive),y.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(y),{conversation:v,message:y}},ic.prototype.reactToFriendsEventCR=function(t){var e=t.data,n=t.eventId,r=(e=Object(ea.l)(e)).action,o=(e.xmlns,Ei(e,["action","xmlns"])),i=o.entity,s=o.organization_id||o.organization_key,a=i.metadata,u=i.id||i.token;if("group"===i&&"del"===r&&!a){var c=this.host.models.Group.get(o.token),l=this.getById(c.conversation.id);return this.__removeFriend({conversation:l,entityType:i,id:o.token,organizationId:s}),l&&this.__clearOptimisticStatus([l]),void this.emit("friends",Sa(Sa({action:r},l.entity),{organizationId:s}))}if(i.type){var d=this.host.modelNameByEntityType(i.type);if(a&&"patient_messaging"===a.feature_service&&"string"==typeof a.is_patient_contact&&(a.is_patient_contact="true"===a.is_patient_contact),i.organizationId=s,"group"===d&&a&&"role"===a.feature_service&&"role_assignment"===a.meta_type)this._rolesFriendsEventPromise=this.host.roles.reactToFriendsEventCR({action:r,attrs:i,id:n});else{var h=o.conversation_id,f=o.last_message,p=o.lowest_sort_number,v=this.getById(h);if("add"===r||"update"===r){v&&"update"===r&&this.clearMessageStatuses(v);var y=f&&f.sort_number?f.sort_number:void 0,g=!1,m=ye.a.get(e,"entity.is_public")||ye.a.get(e,"entity.metadata.team");if((void 0===y||m)&&"add"===r)if("group"===d){if(i.proxied_members&&i.proxied_members[this.host.currentUserId])for(var _=this.host.models.Product.getAll()[0],b=0,w=i.proxied_members[this.host.currentUserId];b<w.length;b++){var I=w[b];if(_.rolesOptingIn.includes(I.token)){g=!0;break}}y=g?1:this.host.messages.__getNextSortNumber(s)}else y=v?v.highestSortNumber:1;var O=v&&v.lastMessage;if("add"===r){var E="group"===d&&this.host.groups.__extractGroupTypeFromAttrs(i);E!==_o.GROUP&&E!==_o.FORUM||(i.members=null),this.__injectCounterParty({entityAttrs:i,entityType:d,groupType:E,hasCurrentUser:!0,isPlaceholder:!0,organizationId:s}),v=this.__injectConversation(o,{highestSortNumber:y}),O&&!f&&this.find(h),this.clearTimeline(v)}else"update"===r&&(v=this.__injectConversation(o,{highestSortNumber:y}),O&&!f&&this.find(h));p&&this.markAsDelivered(v)}else"del"===r?this.__removeFriend({attrs:i,entityType:d,id:u,organizationId:s}):this.logger.error("friends action not implemented",r,e);v&&this.__clearOptimisticStatus([v]),this.emit("friends",Sa({action:r},i))}}},ic.prototype.reactToFriendsEvent=function(t){var e=t.data,n=t.id;if(this.config.condensedReplays)this.reactToFriendsEventCR({data:e,eventId:n});else{var r=(e=Object(ea.l)(e)).friend,o=r.action,i=r.organization_id,s=Ei(r,["action","organization_id"]),a=s.metadata,u=s.token,c=this.host.modelNameByTypeNS(s.xmlns);if(c)if("group"===c&&a&&"role"===a.feature_service&&"role_assignment"===a.meta_type)this._rolesFriendsEventPromise=this.host.roles.reactToFriendsEvent({data:e,id:n});else{if("add"===o){var l="group"===c&&this.host.groups.__extractGroupTypeFromAttrs(s);l!==_o.GROUP&&l!==_o.FORUM||(s.members=null);var d=l===_o.PATIENT_MESSAGING?"PATIENT":"PROVIDER";this.__injectCounterParty({entityAttrs:s,entityType:c,groupType:l,hasCurrentUser:!0,isPlaceholder:!0,organizationId:i});var h="group"===c?this.host.messages.__getNextSortNumber(i):1;this.ensureConversation(c,u,i,{highestSortNumber:h,network:d})}else"del"===o?this.__removeFriend({attrs:s,entityType:c,id:u,organizationId:i}):this.logger.error("friends action not implemented",o,e);this.emit("friends",Sa({action:o},s))}}},ic.prototype.reactToUpdateTeamRequestEvent=function(t){var e=t.data,n=(e=Object(ea.l)(e)).team_request;n&&this.host.teams.__injectTeamRequest(n)},ic.prototype.reactToUpdateEventCR=function(t){var e=t.data,n=(e=Object(ea.l)(e)).entity,r=e.organization_id,o=n.metadata,i=n.token,s=n.type;n.organizationId=r,this._sanitizeGroupAttrs(n);var a=this.host.modelNameByEntityType(s),u=this.host.groups.__extractGroupTypeFromAttrs(n);if(o&&r&&i&&ja.includes(u)&&this.host.metadata.__injectMetadata(i,r,o),o&&o.feature_service&&"role"===o.feature_service){if("group"===a&&o.target_id)return this.__injectTargetEntity(o,r);this.host.roles.reactToUpdateEventCR({entity:n})}this.host.injectModel(n,s)},ic.prototype.reactToUpdateEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToUpdateEventCR({data:e});else{var n=(e=Object(ea.l)(e)).metadata,r=e.organization_key,o=e.token,i=e.type;this._sanitizeGroupAttrs(e);var s=this.host.modelNameByTypeNS(i),a=this.host.groups.__extractGroupTypeFromAttrs(e);if(n&&r&&o&&ja.includes(a)&&this.host.metadata.__injectMetadata(o,r,n),n&&n.feature_service&&"role"===n.feature_service){if("group"===s&&n.target_id)return this.__injectTargetEntity(n,r);this.host.roles.reactToUpdateEvent({data:e})}var u=Ei(e,[]);this.host.injectModel(u,i)}},ic.prototype.__queueReload=function(t){this.__queuedConversationsToReload.includes(t)||this.__queuedConversationsToReload.push(t),this.__flushConversationsToReload()},ic.prototype.hasPendingReloads=function(){return this.__queuedConversationsToReload&&0<this.__queuedConversationsToReload.length},ic.prototype.__updateTimeline=function(t){for(var e=t.content,n=t.timeline,r=n.length=0,o=e;r<o.length;r++){var i=o[r];i.inTimeline&&n.push(i)}this.host.models.Conversation.inject(t)},ic.prototype.__reloadConversation=function(t,e){var n=(void 0===e?{}:e).notify,r=void 0===n||n;if(this.config.condensedReplays)return this.__reloadConversationCR(t);var o=t.content,i=t.higherContinuation,s=t.lowerContinuation,a=t.markableAsReadMessages,u=t.messages,c=t.timeline,l=[],d=[],h=0,f=null,p=null,v=null;a.length=0,u.length=0;for(var y=-1,g=c.length=0,m=o;g<m.length;g++){var _=m[g];y++;var b=_.escalationExecution,w=_.inTimeline,I=_.isOutgoing,O=_.isUnread,E=_.markedRecipientStatus,T=_.messageType,S=_.priority;w&&(null===f&&(f=y),p=y,c.push(_)),T===So.USER_SENT?(u.push(_),I||!O||v||(v=_),b&&"IN_PROGRESS"===b.status&&h++,Na.includes(E)&&a.push(_),I||(O&&(l.push(_),S===bo.HIGH&&d.push(_)),t.lastIncomingMessageSortNumber=_.sortNumber)):Ca.includes(T)&&(t.lastBangMessageSortNumber=_.sortNumber)}s.itemsEstimate=f,i.itemsEstimate=null===p?null:o.length-1-p,t.isLive=0===i.itemsEstimate||0===o.length;var A=0<u.length?u[u.length-1]:null,C=A||ye.a.last(o.filter(function(t){return t.messageType===So.GROUP_MEMBERSHIP_CHANGE&&t.groupMembersChange&&"ADD"===t.groupMembersChange.action}));if(t.firstUnreadMessage=v,t.inProgressEscalationCount=h,t.lastMessage=A,t.unreadCount=l.length,t.unreadPriorityCount=d.length,t.highestSortNumber=C&&C.sortNumber||t.lastConversationSortNumber||0,r){var R=t.counterPartyType,P=t.counterPartyId,j=t.organizationId,x=this.getConversationKey(R,P,j);this._convByConvHandle[x]=t,this.host.models.Conversation.inject(t)}},ic.prototype.__reloadConversationCR=function(t){var e=t._markingAsRead,n=t._markingAsReadSortNumber,r=t.content,o=t.higherContinuation,i=t.messages,s=t.timeline,a=[],u=[],c=null;i.length=0;for(var l=s.length=0,d=r;l<d.length;l++){var h=d[l],f=h.inTimeline,p=h.isOutgoing,v=h.isUnread,y=h.messageType,g=h.priority,m=h.sortNumber;f&&s.push(h),y===So.USER_SENT?(i.push(h),!p&&v&&(c=c||h,e&&m<=n||(a.push(h),g===bo.HIGH&&u.push(h)))):Ca.includes(y)&&(t.lastBangMessageSortNumber=h.sortNumber)}t.firstUnreadMessage=c,t.highestSortNumber=t.highestSortNumber||0,t.isLive=0===o.itemsEstimate||0===r.length,e&&(t.unreadCount=a.length,t.unreadPriorityCount=u.length);var _=t.counterPartyType,b=t.counterPartyId,w=t.organizationId,I=this.getConversationKey(_,b,w);this._convByConvHandle[I]=t,this.host.models.Conversation.inject(t)},ic.prototype.__addConversationCounterPartyToServerRosterIfShould=function(t){if(t&&!t._counterPartyAddedOnServer){var e=t.organization;e&&!e.$placeholder&&this.add(t.counterPartyType,t.counterPartyId,t.organizationId)}},ic.prototype.addMembershipChangeLog=function(t){var e,n,r=t.action,o=t.actionTime,i=t.actor,s=t.alwaysAddToTimeline,a=t.createdAt,u=t.group,c=t.id,l=t.memberIds,d=t.members,h=t.removedFromGroup,f=void 0!==h&&h,p=t.sortNumber,v=i.id,y=u.id,g=u.organizationId,m=this.host.currentUser,_=this.get("group",y,g);if(this.config.condensedReplays){if(!_)return;e=_.id}else e=this.getConversationKey("group",y,g);n=!!s||!f&&!!_&&_.isLive;var b=this.host.models.GroupMembersChange.inject({id:"groupMembersChange:"+c,action:r,actionTime:o,actor:i,memberIds:l,members:d});this.host.models.Message.inject({body:this.__generateGroupMembershipChangeBody(t),conversationId:e,counterPartyId:y,counterPartyType:"group",createdAt:a,groupId:y,groupMembersChange:b,id:"bang:"+c,inTimeline:n,isOutgoing:!1,messageType:So.GROUP_MEMBERSHIP_CHANGE,recipient:m,senderId:v,sortNumber:p}),"OPT_IN"!==r&&"OPT_OUT"!==r||this.host.roles.refresh(g)},ic.prototype.__generateGroupMembershipChangeBody=function(t){var n=this,e=t.action,r=t.actor,o=t.group,i=t.members,s=o.groupType,a=xa[e]||Da[e],u=r.id===this.host.currentUserId?"You":r.displayName,c=Ma[e]||"",l=null;return(e in Ma||e in Da)&&(l=ha.a.call(la.a.call(i.map(function(t,e){return[t.id===n.host.currentUserId?"You":t.displayName,(e===i.length-2?" and":",")+" "]}))).join("")),e in Da?[l,a,u].filter(Boolean).join(" "):[u,a,l,c,"this",ka[s]].filter(Boolean).join(" ")},ic.prototype.addCallChangeLog=function(t){var e=t.caller,n=t.callee.id,r=t.conversationId,o=t.createdAt,i=t.duration,s=t.group.id,a=t.id,u=t.organizationId,c=t.sortNumber,l=t.userStartTime,d=this.config.condensedReplays?r:this.getConversationKey("group",s,u),h=l?ba()(l).format("h:mm A"):"",f=e.id===this.host.currentUser.id;this.host.models.Message.inject({body:(f?"Outgoing":"Incoming")+" Video Call "+h+" ("+Object(Ea.secondsToDurationFormat)(i)+")",conversationId:d,counterPartyId:n,counterPartyType:"group",createdAt:o,groupId:n,id:"bang:"+a,inTimeline:!0,isOutgoing:!1,messageType:So.CALL_CHANGE,recipient:this.host.currentUser,senderId:e?e.id:null,sortNumber:c})},ic.prototype.addEscalationExecutionChangeLog=function(t){var e,n=t.action,r=t.actionTime,o=t.actor,i=t.alwaysAddToTimeline,s=t.createdAt,a=t.escalationExecution,u=t.group,c=t.members,l=t.id,d=t.sortNumber,h=u.id,f=u.organizationId,p=this.host.currentUser,v=this.get("group",h,f),y=v?v.id:null;if(!v){if(this.config.condensedReplays)return;y=this.getConversationKey("group",h,f)}e=!!i||!!v&&v.isLive;var g=this.host.models.EscalationExecutionChange.inject({id:"escalationExecutionChange:"+l,action:n,actionTime:r,actor:o,members:c});this.host.models.Message.inject({body:this.__generateGroupEscalationChangeBody(t,a),conversationId:y,counterPartyId:h,counterPartyType:"group",createdAt:s,escalationExecutionChange:g,escalationExecutionId:a?a.id:null,groupId:h,id:"bang:"+l,inTimeline:e,isOutgoing:!1,messageType:So.ESCALATION_EXECUTION_CHANGE,recipient:p,senderId:o?o.id:null,sortNumber:d})},ic.prototype.__generateGroupEscalationChangeBody=function(t,e){var n=t.action,r=t.actor,o=t.members,i=Pa[n],s=e&&e.displayId||"";return s.startsWith("#")&&(s=s.slice(1,s.length)),""!==s&&(s+=" "),n===go.MEMBER_ADDED?i+" "+o[0].displayName+" to this escalation":n!==go.INITIATED&&r&&r.displayName?"Escalation "+s+i+" by "+r.displayName:"Escalation "+s+i},ic.prototype.getMessageConversationKey=function(t){if(t.groupId)return this.conversationHashForListEntityId(t.groupId);if(t.distributionListId)return this.conversationHashForListEntityId(t.distributionListId);var e=t.senderId===this.host.currentUserId?t.recipientId:t.senderId;return this.conversationHashForUserMessage(e,t.senderOrganizationId,t.recipientOrganizationId)},ic.prototype.getConversationKey=function(t,e,n,r){switch(void 0===r&&(r=n),t){case"user":return this.conversationHashForUserMessage(e,n,r);case"distributionList":case"group":case"team":return this.conversationHashForListEntityId(e);default:throw new Error("type "+t+" not supported in conversation")}},ic.prototype.conversationHashForUserMessage=function(t,e,n){void 0===n&&(n=e);var r=[t,e,n].join(":");return Aa.b64(r)},ic.prototype.conversationHashForListEntityId=function(t){return Aa.b64(t)},ic.prototype.conversationHashForGroupId=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.conversationHashForListEntityId.apply(this,t)},ic.prototype.conversationHashForDistributionListId=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.conversationHashForListEntityId.apply(this,t)},ic.prototype.looksLikeConversationHandle=function(t){return/^[a-zA-Z0-9/+=]{24}$/.test(t)},ic.prototype.findConversationWithUser=function(e,n){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){return[2,this.get(this.host.models.User.name,e,n)]})})},ic.prototype.findConversationWithGroup=function(e,n){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){return[2,this.get(this.host.models.Group.name,e,n)]})})},ic.prototype.findAllGroupConversationsWithMembers=function(a,u,t){var e=void 0===t?{}:t,n=e.exact,c=void 0===n||n,r=e.includeCurrentUser,l=void 0===r||r,o=e.includeForums,d=void 0===o||o,i=e.includeRoles,h=void 0===i||i,s=e.localOnly,f=void 0!==s&&s,p=e.senderId,v=void 0===p?null:p;return Ii(this,void 0,void 0,function(){var e,n,r,o,i,s;return Oi(this,function(t){switch(t.label){case 0:return[4,this.resolveMembers(Object(ea.d)(a))];case 1:return a=(a=t.sent()).map(this._resolveModelId),[4,this.host.groups.findAllWithSpecificMembers(a,u,{exact:c,includeCurrentUser:l,includeForums:d,includeRoles:h,localOnly:f,senderId:v})];case 2:for(e=t.sent(),n=[],r=0,o=e;r<o.length;r++)i=o[r],(s=this.get(this.host.models.Group.name,i.id,u))&&n.push(s);return[2,n]}})})},ic.prototype.findLocalRoleP2PConversation=function(t,e){var n,r;t=this.host.roles.__resolveRoleId(t),e=this.host.roles.__resolveRoleId(e);var o=this.host.models.User.get(t),i=this.host.models.User.get(e);if(i&&i.isRoleBot&&i.botRole)r=this.host.roles._roleP2PConversations[e];else{if(!(o&&o.isRoleBot&&o.botRole))return null;r=this.host.roles._roleP2PConversations[t]}if(r)for(var s=0,a=r;s<a.length;s++){var u=a[s],c=u.$lastModified,l=u.counterParty,d=l.p2pRecipient,h=l.p2pSender;if(d&&h){var f=this.host.roles.__resolveRoleId(d.id),p=this.host.roles.__resolveRoleId(h.id);(f===t&&p===e||f===e&&p===t)&&(!n||n.$lastModified<c)&&(n=u)}}return n},ic.prototype.resolveMembers=function(e){return Ii(this,void 0,void 0,function(){var n=this;return Oi(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return Ii(n,void 0,void 0,function(){return Oi(this,function(t){switch(t.label){case 0:if(!Object(Je.isEmail)(e)&&!Object(Oa.isPhone)(e))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.users.find(e)];case 2:return[2,t.sent().id];case 3:return t.sent(),[2,e];case 4:return[2,e]}})})}))];case 1:return[2,t.sent()]}})})},ic.prototype.selectConversation=function(i,t){var e=void 0===t?{}:t,n=e.anchorPoint,s=void 0===n?yo.CONVERSATION_END:n,r=e.fetchAllItems,a=void 0!==r&&r,o=e.markAsDelivered,u=void 0===o||o,c=e.markAsRead,l=void 0===c||c,d=e.maxItemsPerBatch,h=e.minItemsToFetch,f=void 0===h?20:h;return Ii(this,void 0,void 0,function(){var e,n,r,o;return Oi(this,function(t){switch(t.label){case 0:if(i=this._resolveModelId(i),!(e=this._resolveEntity(i,"conversation")))throw new Or.NotFoundError(this.host.models.Conversation.name,i);if(s===yo.CONTINUATION)throw new Error("Cannot call selectConversation() with anchorPoint='CONTINUATION'");return this.config.condensedReplays?[4,this._selectConversationCR(i,{anchorPoint:s,conversation:e,fetchAllItems:a,markAsDelivered:u,markAsRead:l,maxItemsPerBatch:d,minItemsToFetch:f})]:[3,2];case 1:return[2,t.sent()];case 2:return r=n=0,[4,this.fetchTimeline(i,{anchorPoint:s,markAsDelivered:u,maxItems:f})];case 3:return n=r+t.sent(),0<e.markableAsReadMessages.length?e.firstUnreadMessage=e.markableAsReadMessages[0]:e.firstUnreadMessage=null,o=e.firstUnreadMessage,l&&0<e.unreadCount&&this.markAsRead(i,{localOnly:!0}),[4,this._fetchContinuations(i,{addedMessages:n,conversation:e,fetchAllItems:a,markAsDelivered:u,minItemsToFetch:f})];case 4:return n=t.sent(),l&&this.markAsRead(i),[2,{addedMessages:n,previousFirstUnreadMessage:o}]}})})},ic.prototype._selectConversationCR=function(i,t){var s=t.anchorPoint,a=t.conversation,e=t.fetchAllItems,u=void 0!==e&&e,c=t.markAsDelivered,l=t.markAsRead,d=t.minItemsToFetch,n=t.maxItemsPerBatch,h=void 0===n?d:n;return Ii(this,void 0,void 0,function(){var e,n,r,o;return Oi(this,function(t){switch(t.label){case 0:return e=l&&0<a.unreadCount,n=0,e&&this.markAsRead(i,{localOnly:!0}),r=n,[4,this.fetchTimeline(i,{anchorPoint:s,fetchAllItems:u,markAsDelivered:c,maxItems:h})];case 1:return n=r+t.sent(),[4,this._fetchContinuations(i,{addedMessages:n,conversation:a,fetchAllItems:u,markAsDelivered:c,maxItemsPerBatch:h,minItemsToFetch:d})];case 2:return n=t.sent(),o=a.firstUnreadMessage,e&&this.markAsRead(i),this.__ensureEntities(a,{messageCounterParties:"full"}),[2,{addedMessages:n,previousFirstUnreadMessage:o}]}})})},ic.prototype._fetchContinuations=function(r,t){var e=void 0===t?{}:t,n=e.addedMessages,o=void 0===n?0:n,i=e.conversation,s=e.fetchAllItems,a=void 0!==s&&s,u=e.markAsDelivered,c=void 0===u||u,l=e.minItemsToFetch,d=void 0===l?20:l;return e.maxItemsPerBatch,Ii(this,void 0,void 0,function(){var e,n;return Oi(this,function(t){switch(t.label){case 0:if(0===o)return[2,0];t.label=1;case 1:return(a||o<d)&&0<i.higherContinuation.itemsEstimate?(e=o,[4,this.fetchTimeline(r,{anchorPoint:yo.CONTINUATION,markAsDelivered:c,continuation:i.higherContinuation.continuation,fetchAllItems:a})]):[3,3];case 2:return o=e+t.sent(),[3,1];case 3:return(a||o<d)&&0<i.lowerContinuation.itemsEstimate?(n=o,[4,this.fetchTimeline(r,{anchorPoint:yo.CONTINUATION,markAsDelivered:c,continuation:i.lowerContinuation.continuation,fetchAllItems:a})]):[3,5];case 4:return o=n+t.sent(),[3,3];case 5:return[2,o]}})})},ic.prototype.getWithUser=function(t,e,n){var r,o=(void 0===n?{}:n).createIfNotFound,i=void 0!==o&&o;if(t=this._resolveModelId(t),e=this._resolveModelId(e),this.config.condensedReplays){var s=this.host.users.getById(t);if(s&&s.profileByOrganizationId&&s.profileByOrganizationId[e]){var a=s.profileByOrganizationId[e].conversationId;a&&(r=this.getById(a))}}else{var u=this.conversationHashForUserMessage(t,e);r=this.getById(u)}return!r&&i&&(r=this.ensureConversation("user",t,e)),r||null},ic.prototype.getWithListEntity=function(t,e,n){var r,o=void 0===n?{createIfNotFound:!1}:n,i=o.createIfNotFound,s=void 0!==i&&i,a=o.organizationId,u=o.conversationId,c=void 0===u?null:u;if(e=this._resolveModelId(e),this.config.condensedReplays)c&&(r=this.getById(c));else{var l=this.conversationHashForListEntityId(e);r=this.getById(l)}if(!r&&s){var d=this._resolveEntity(e,t);if(!d)throw new Error("Entity required when using createIfNotFound");a=d.organizationId,r=this.ensureConversation(t,e,a,{conversationId:c}),this.config.condensedReplays&&!c&&(r.$localOnly=!0)}return r},ic.prototype.getWithGroup=function(t){return this.getWithListEntity("group",t)},ic.prototype.getWithDistributionList=function(t){return this.getWithListEntity("distributionList",t)},ic.prototype.get=function(t,e,n){var r=this.getConversationKey(t,e,n);return(this.config.condensedReplays?this._convByConvHandle[r]:this.host.models.Conversation.get(r))||null},ic.prototype.getAll=function(){return this.host.models.Conversation.getAll()},ic.prototype.getById=function(t){return this.host.models.Conversation.get(t)},ic.prototype.getMultiById=function(t){return this.host.models.Conversation.getMulti(t)},ic.prototype.getAllForOrganization=function(t){var e=this._resolveEntity(t,"organization");return e?e.conversations:null},ic.prototype.__ensureEntities=function(o,i){return void 0===i&&(i={}),Ii(this,void 0,void 0,function(){var e,n,r;return Oi(this,function(t){switch(t.label){case 0:if(e=[],n=Promise.resolve(),i.counterParty&&(n=this.__ensureCounterParty(o,i),e.push(n)),i.escalationExecution&&e.push(this.__ensureEscalationExecution(o,n,i)),i.messageCounterParties&&e.push(this.__ensureMessageCounterParties(o,i)),i.organization&&e.push(this.__ensureOrganization(o,i)),0===(e=e.filter(Boolean)).length)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.all(e)];case 2:return t.sent(),i.onLoad&&i.onLoad(),this.host.models.Conversation.inject(o),[3,4];case 3:return r=t.sent(),console.error(r),[3,4];case 4:return[2]}})})},ic.prototype.__ensureOrganization=function(r,o){return void 0===o&&(o={}),Ii(this,void 0,void 0,function(){var n=this;return Oi(this,function(t){switch(t.label){case 0:return[4,this.host.organizations._findAll()];case 1:return t.sent(),this.host.models.Organization.shouldEnsure(r.organization,"full"!==o.organization)?[4,new Promise(function(t,e){n.host.models.Organization.ensureEntity(r.organizationId,{onlyPlaceholder:"placeholder"===o.organization,onMissing:function(){n.logger.info("org "+r.organizationId+" not found, created placeholder org"),r.$loadingOrganization=!0,t()},onLoad:function(){n.logger.info("org "+r.organizationId+" loaded"),r.$loadingOrganization=!1,o.touchOnRelatedEntityLoad&&n.host.models.Conversation.inject(r)},onFinish:t})})]:[2,null];case 2:return t.sent(),[2]}})})},ic.prototype.__ensureCounterParty=function(s,a){return void 0===a&&(a={}),Ii(this,void 0,void 0,function(){var n,r,o,i=this;return Oi(this,function(t){if(a=Sa({},a),"group"===s.counterPartyType&&s.counterParty&&s.counterParty.groupType===_o.ROLE_P2P&&(a.counterParty="full",a.groupMembers="full"),!(n=this.host.modelsByEntityType[s.counterPartyType]).shouldEnsure(s.counterParty,"full"!==a.counterParty,{groupMembersOnlyPlaceholder:"full"!==a.groupMembers}))return[2,null];switch(r={},s.counterPartyType){case"user":break;case"group":case"distributionList":r.organizationId=s.organizationId;break;default:throw new Error("unsupported counterPartyType",s.counterPartyType)}return o=function(t){if("group"===n.name&&"placeholder"!==a.counterParty&&a.groupMembers)return i.host.groups.ensureMembers(t,{onlyPlaceholder:"placeholder"===a.groupMembers})},[2,new Promise(function(e,t){n.ensureEntity(s.counterPartyId,{attrs:r,onlyPlaceholder:"placeholder"===a.counterParty,onMissing:function(){i.logger.info("entry "+s.counterPartyId+" not found, created placeholder on org "+s.organizationId),s.$loadingCounterParty=!0},onLoad:function(){s.$loadingCounterParty=!1,a.touchOnRelatedEntityLoad&&i.host.models.Conversation.inject(s)},onFinish:function(t){t&&o(t),e()}})})]})})},ic.prototype.__ensureEscalationExecution=function(o,i,t){return void 0===t&&(t={}),Ii(this,void 0,void 0,function(){var e,n,r;return Oi(this,function(t){switch(t.label){case 0:return[4,i];case 1:return t.sent(),e=o.counterPartyType,(n=o.counterParty)&&"group"===e?(r=n.escalationExecution,n.groupType===_o.ESCALATION&&r?[4,this.host.escalations.ensureEscalationExecution(r)]:[2]):[2];case 2:return t.sent(),[2]}})})},ic.prototype.__ensureMessageCounterParties=function(e,n){var r=this;void 0===n&&(n={});var t=ma.a.call(ya.a.call(pa.a.call(e.messages,"senderId").filter(Boolean)),this.host.currentUserId,e.counterPartyId);return Promise.all(t.map(function(t){return r.__ensureMessageCounterParty(e,t,n)}))},ic.prototype.__ensureMessageCounterParty=function(n,r,o){var i=this;void 0===o&&(o={});var t=this.host.models.User.get(r);return this.host.models.User.shouldEnsure(t,"full"!==o.messageCounterParties)?new Promise(function(t,e){i.host.models.User.ensureEntity(r,{onlyPlaceholder:"placeholder"===o.messageCounterParties,onMissing:function(){var t=n?"entry "+n.counterPartyId+" not found, created placeholder on org "+n.organizationId:"counterParty "+r+" not found";i.logger.info(t)},onLoad:function(){n&&o.touchOnRelatedEntityLoad&&i.host.models.Conversation.inject(n)},onFinish:t})}):null},ic.prototype._setAllowedSenders=function(t){var e=t.counterParty,n=t.counterPartyType,r=t.organization,o=this.host.currentUser,i=[o];if(!r)return t.allowedSenders=[],void(t.allowedSendersReason=vo.ORGANIZATION_DOES_NOT_EXIST);if(o.contactsMessagingBlocked&&r.isContacts)return t.allowedSenders=[],void(t.allowedSendersReason=vo.CONTACTS_MESSAGING_BLOCKED_BY_ADMIN);if(!n)return t.allowedSenders=i,void(t.allowedSendersReason=vo.CONVERSATION_NOT_FULLY_LOADED);if(!e)return t.allowedSenders=[],void(t.allowedSendersReason=vo.NO_COUNTER_PARTY);switch(n){case"user":return e.$placeholder?(t.allowedSenders=[],void(t.allowedSendersReason=vo.COUNTER_PARTY_NOT_FULLY_LOADED)):"TigerPage"===e.displayName?(t.allowedSenders=[],void(t.allowedSendersReason=vo.COUNTER_PARTY_IS_TIGERPAGE)):(t.allowedSenders=i,void(t.allowedSendersReason=vo.NONE));case"distributionList":return t.allowedSenders=i,void(t.allowedSendersReason=vo.NONE);case"group":var s=e.createdByRole,a=e.createdByUser,u=e.groupType,c=e.p2pRecipient,l=e.p2pSender,d=e.targetRole,h=e.targetUser,f=e.members,p=e.proxiedMembers,v=r.allowedSenders;if(u===_o.FORUM)return t.allowedSenders=i,void(t.allowedSendersReason=vo.NONE);if(u===_o.ROLE_ASSIGNMENT)return t.allowedSenders=[],void(t.allowedSendersReason=vo.IS_ROLE_ASSIGNMENT_GROUP);if(u===_o.ROLE_P2P&&c&&l){var y=[],g=s&&s.botUser,m=d&&d.botUser;!g||f&&f.includes(g)?!a||f&&f.includes(a)||y.push(a):y.push(g),!m||f&&f.includes(m)?!h||f&&f.includes(h)||y.push(h):y.push(m),0<y.length&&(f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(f||[],y))}else if(e.$placeholder)return t.allowedSenders=[],void(t.allowedSendersReason=vo.COUNTER_PARTY_NOT_FULLY_LOADED);if(!f)return t.allowedSenders=[],void(t.allowedSendersReason=vo.GROUP_MEMBERS_NOT_LOADED);if(0===f.length)return t.allowedSenders=[],void(t.allowedSendersReason=vo.GROUP_HAS_NO_MEMBERS);for(var _=[],b=0,w=v;b<w.length;b++){var I=w[b],O="role"===I.$entityType?I.botUser:I;if(f.includes(O)){var E=O.id,T=p&&p[E];if(T){for(var S=!1,A=0,C=T;A<C.length;A++)C[A].token===E&&(S=!0);if(!S)continue}_.push(I)}}return 0===_.length?(t.allowedSenders=_,void(t.allowedSendersReason=vo.USER_IS_NOT_MEMBER_OF_GROUP)):u!==_o.ROLE_P2P?(t.allowedSenders=_,void(t.allowedSendersReason=vo.NONE)):l&&_.includes(l)?c===o||o.roles.includes(c)?(t.allowedSenders=[],void(t.allowedSendersReason=vo.CONVERSATION_WITH_ROLE_YOU_ARE_CURRENTLY_IN)):(t.allowedSenders=[l],void(t.allowedSendersReason=vo.NONE)):(t.allowedSenders=[],void(t.allowedSendersReason=vo.USER_IS_NOT_IN_THIS_ROLE_CONVERSATION));default:return t.allowedSenders=[],void(t.allowedSendersReason=vo.COUNTER_PARTY_TYPE_NOT_SUPPORTED)}},ic.prototype.reactToProcessingStart=function(t){var e=t.data,n=(e=Object(ea.l)(e)).action_type,r=e.conversation_id,o=e.entity,i=e.organization_id,s=o.token||o.id,a=xo.resolve(n);if(this.host.products._addProcessingEvent({actionType:a,entity:Sa({id:s},o)}),a===xo.ROLE_OPT_OUT)this._roleConversationsProcessingEvent[s]=this.host.roles._roleConversations[s];else if(a===xo.ORGANIZATION_MESSAGE_STATUS||a===xo.ORGANIZATION_REPLAY){var u=this.host.organizations.getById(i);if(!u)return;u._markingAsReadConversations&&this.__clearOptimisticStatus(u._markingAsReadConversations)}else if(a===xo.GROUP_REPLAY){var c=void 0;if(r&&(c=this.getById(r)),!c)return;this.__clearOptimisticStatus([c])}else if(a===xo.ROLE_OPT_IN||a===xo.ROLE_OPT_OUT){var l=this.host.roles._roleConversations[s];if(!l)return;this.__clearOptimisticStatus(l)}},ic.prototype.reactToProcessingStop=function(t){var e=t.data,n=(e=Object(ea.l)(e)).action_type,r=e.conversation_id,o=e.entity,i=e.organization_id;!r&&o.conversation_id&&(r=o.conversation_id,delete o.conversation_id),!i&&o.organization_key&&(i=o.organization_key,delete o.organization_key);var s=o.token||o.id,a=xo.resolve(n);if(a===xo.GROUP_REPLAY){var u=void 0;if(r&&(u=this.getById(r)),!u)return;this.clearTimeline(u),this.__clearOptimisticStatus([u])}else if(a===xo.ROLE_OPT_IN||a===xo.ROLE_OPT_OUT){this.clearTimelineForAllRoleConversations(a,s);var c=this.host.roles._roleConversations[s];if(!c)return void this.host.products._removeProcessingEvent({actionType:a,entity:Sa({id:s},o)});this.__clearOptimisticStatus(c)}else if(a===xo.ORGANIZATION_MESSAGE_STATUS)this.clearMessageStatusesForOrganization(i);else if(a===xo.CONVERSATION_MESSAGE_STATUS){if(u=void 0,r&&(u=this.getById(r)),!u)return;this.clearMessageStatuses(u)}if(a===xo.ORGANIZATION_MESSAGE_STATUS||a===xo.ORGANIZATION_REPLAY){var l=this.host.organizations.getById(i);if(!l)return;l._markingAsReadConversations&&this.__clearOptimisticStatus(l._markingAsReadConversations)}this.host.products._removeProcessingEvent({actionType:a,entity:Sa({id:s},o)})},ic.prototype.__clearOptimisticStatus=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];r._markingAsRead&&(r._markingAsRead=!1,r._markingAsReadSortNumber=null,r._markingAsReadExpiration=null,this.host.models.Conversation.inject(r))}},ic.prototype.clearTimelineForAllRoleConversations=function(t,e){var n;if(n=t===xo.ROLE_OPT_OUT?this._roleConversationsProcessingEvent[e]:this.host.roles._roleConversations[e])for(var r=0,o=n;r<o.length;r++){var i=o[r];this.clearTimeline(i)}},ic.prototype.clearMessageStatusesForOrganization=function(t){var e=this.host.organizations.getById(t);if(e){var n=e.conversations;if(n)for(var r=0,o=n;r<o.length;r++){var i=o[r];this.clearMessageStatuses(i)}}},ic.prototype.clearMessageStatuses=function(t,e){for(var o=this,n=(void 0===e?{}:e).emit,r=void 0===n||n,i=t.timeline,s=0,a=i;s<a.length;s++){var u=a[s];u.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(u)}return setTimeout(function(){for(var t=0,e=i;t<e.length;t++){var n=e[t];if(!o.host.messages._pendingFindRecipientStatuses)return;var r=o.host.messages._pendingFindRecipientStatuses[n.id];r&&r()}},0),r&&this.emit("clearMessageStatuses",i),i.length},ic.prototype.mute=function(e,n){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){switch(t.label){case 0:return[4,this.host.mute.muteConversation(e,n)];case 1:return t.sent(),[2]}})})},ic.prototype.unmute=function(e){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){switch(t.label){case 0:return[4,this.host.mute.unmuteConversation(e)];case 1:return t.sent(),[2]}})})},ic.prototype.unmuteAll=function(){return Ii(this,void 0,void 0,function(){return Oi(this,function(t){switch(t.label){case 0:return[4,this.host.mute.unmuteAll()];case 1:return t.sent(),[2]}})})},wi([Object(Vo.decorator)()],ic.prototype,"findAll",null),wi([Object(Vo.decorator)()],ic.prototype,"add",null),wi([Object(Vo.decorator)()],ic.prototype,"remove",null),ic),La=(Ds=function(t,e){return(Ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ds(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Fa=function(){return(Fa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ba=["display_name"].join(","),qa=["name"].join(","),Va=(La(oc,zs=ra),oc.prototype.mounted=function(){this._fetched=!1},oc.prototype.dispose=function(){this._fetched=!1},oc.prototype.addMembers=function(t){var e=t.id,n=t.members,r=t.organizationId;return Si(this,void 0,void 0,function(){return Ai(this,function(t){switch(t.label){case 0:if(!e)throw new Or.ValidationError("id","required");if(!Array.isArray(n))throw new Or.ValidationError("members","required","members must be an array");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.membersBatch({id:e,members:n,operation:"add",organizationId:r})];case 1:return t.sent(),[2]}})})},oc.prototype.batchDelete=function(t){var n=t.ids,r=t.organizationId;return Si(this,void 0,void 0,function(){var e=this;return Ai(this,function(t){switch(t.label){case 0:if(!Array.isArray(n))throw new Or.ValidationError("ids","required","ids must be an array");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.batch({ids:n,operation:"destroy",organizationId:r})];case 1:return t.sent(),[2,n.map(function(t){return e.host.models.DistributionList.inject({$deleted:!0,id:t})})]}})})},oc.prototype.create=function(t){var n=t.adminOnly,r=t.members,o=t.name,e=t.network,i=void 0===e?"patient":e,s=t.organizationId;return Si(this,void 0,void 0,function(){var e;return Ai(this,function(t){switch(t.label){case 0:if(this._validate({adminOnly:n,members:r,name:o,organizationId:s,shouldCheckId:!1}),!1===["patient"].includes(i))throw new Or.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.distributionLists.create({adminOnly:n,members:r,name:o,network:i,organizationId:s})];case 1:return e=t.sent(),[2,this.host.models.DistributionList.inject(Fa({conversationId:e.conversation_id,organizationId:e.organization_id},e.entity))]}})})},oc.prototype.delete=function(e,n){return Si(this,void 0,void 0,function(){return Ai(this,function(t){switch(t.label){case 0:return this._validate({id:e,organizationId:n,shouldCheckInvalid:!1}),[4,this.host.api.distributionLists.delete(e,n)];case 1:return t.sent(),[2,this.host.models.DistributionList.inject({$deleted:!0,id:e})]}})})},oc.prototype.find=function(r,o){return void 0===o&&(o={}),Si(this,void 0,void 0,function(){var e,n;return Ai(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{ignoreNotFound:!1,bypassCache:!1,includeMembers:!1,includeMetadata:!1}),this.host.requireUser(),e=null,!o.bypassCache&&(e=this.host.models.DistributionList.get(r))?[2,e]:[4,this.host.api.distributionLists.find(r,{organizationId:o.organizationId})];case 1:if(n=t.sent())delete(e=this.config.condensedReplays||n.entity?this.host.models.DistributionList.inject(Fa({conversationId:n.conversation_id,organizationId:n.organization_id},n.entity)):this.host.models.DistributionList.inject(n)).$placeholder;else if(!o.ignoreNotFound)throw new Or.NotFoundError(this.host.models.DistributionList.name,r);return[2,e]}})})},oc.prototype.findAll=function(){return Si(this,void 0,void 0,function(){var e,n,r;return Ai(this,function(t){switch(t.label){case 0:return this._fetched?[2,this.getAll()]:0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return[4,this.host.search.query({types:["distributionList"],organizationIds:e.map(function(t){return t.id}),query:{displayName:""},followContinuations:!0})];case 3:return n=t.sent().results,r=n.map(function(t){return t.entity}),this._fetched=!0,[2,r]}})})},oc.prototype.getAll=function(){return this.host.models.DistributionList.getAll()},oc.prototype.getById=function(t){return this.host.models.DistributionList.get(t)},oc.prototype.getMultiById=function(t){return this.host.models.DistributionList.getMulti(t)},oc.prototype.removeMembers=function(t){var e=t.id,n=t.members,r=t.organizationId;return Si(this,void 0,void 0,function(){return Ai(this,function(t){switch(t.label){case 0:if(!e)throw new Or.ValidationError("id","required");if(!Array.isArray(n))throw new Or.ValidationError("members","required","members must be an array");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.membersBatch({id:e,members:n,operation:"remove",organizationId:r})];case 1:return t.sent(),[2]}})})},oc.prototype.search=function(t){var i=t.continuation,e=t.network,s=void 0===e?"patient":e,a=t.organizationId,n=t.query,u=void 0===n?"":n,r=t.sortBy,c=void 0===r?"name":r,o=t.sortOrder,l=void 0===o?"asc":o,d=t.types,h=void 0===d?[Mo.PATIENT_DISTRIBUTION_LIST]:d;return Si(this,void 0,void 0,function(){var e,n,r,o;return Ai(this,function(t){switch(t.label){case 0:return[4,this.host.search.query({continuation:i,network:s,organizationId:a,query:(r={},r[qa]=u,r),returnFields:[],sort:(o={},o[c]=l,o),types:h})];case 1:return e=t.sent(),n=this._processSearchResults(e.results),[2,{metadata:e.metadata,results:n}]}})})},oc.prototype.findMembers=function(s,t){var e=void 0===t?{}:t,a=e.continuation,n=e.network,u=void 0===n?"patient":n,c=e.organizationId,r=e.query,l=void 0===r?"":r,o=e.sortBy,d=void 0===o?["display_name"]:o,i=e.sortOrder,h=void 0===i?["asc"]:i;return Si(this,void 0,void 0,function(){var e,n,r,o,i;return Ai(this,function(t){switch(t.label){case 0:if(!s)throw new Or.ValidationError("id","required");if(!c)throw new Or.ValidationError("organizationId","required");if(d.length!==h.length)throw new Or.ValidationError("sortBy","invalid","sortBy and sortOrder must be the same length");for(e={},n=0;n<d.length;n++)e[d[n]]=h[n];return[4,this.host.search.query({continuation:a,network:u,organizationId:c,query:(i={},i[Ba]=l,i.dist_list_token=s,i),returnFields:[],sort:e,types:[Mo.DISTRIBUTION_LIST_MEMBER]})];case 1:return r=t.sent(),o=this._processSearchResults(r.results),[2,{metadata:r.metadata,results:o}]}})})},oc.prototype.findMemberIds=function(s,a,t){var u=(void 0===t?{}:t).continuation;return Si(this,void 0,void 0,function(){var e,n,r,o,i;return Ai(this,function(t){switch(t.label){case 0:if(!s)throw new Or.ValidationError("id","required");if(!a)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.findMemberIds(s,a,{continuation:u})];case 1:return e=t.sent(),n=e.members,r=void 0===n?[]:n,o=e.metadata,i=r.map(function(t){return t.token}),[2,{metadata:o,results:i}]}})})},oc.prototype.update=function(t){var n=t.adminOnly,r=t.id,o=t.name,i=t.organizationId;return Si(this,void 0,void 0,function(){var e;return Ai(this,function(t){switch(t.label){case 0:return this._validate({adminOnly:n,name:o,id:r,organizationId:i}),[4,this.host.api.distributionLists.update({adminOnly:n,id:r,name:o,organizationId:i})];case 1:return e=t.sent(),[2,this.host.models.DistributionList.inject(Fa({conversationId:e.conversation_id,organizationId:e.organization_id},e.entity))]}})})},oc.prototype._processSearchResults=function(t){return t.map(function(t){return t.entity}).filter(function(t){return!t.$deleted})},oc.prototype._validate=function(t){var e=t.adminOnly,n=t.id,r=(t.members,t.name),o=t.organizationId,i=t.shouldCheckId,s=void 0===i||i,a=t.shouldCheckInvalid,u=void 0===a||a;if(s&&!n)throw new Or.ValidationError("id","required");if(!o)throw new Or.ValidationError("organizationId","required");if(u){if(void 0!==e&&"boolean"!=typeof e)throw new Or.ValidationError("adminOnly","invalid","adminOnly must be a boolean value");if(r&&(0===r.length||60<r.length))throw new Or.ValidationError("name","invalid","name must be less than 60 alphanumeric characters")}},Ti([Object(Vo.decorator)()],oc.prototype,"find",null),Ti([Object(Vo.decorator)()],oc.prototype,"findAll",null),Ti([Object(Vo.decorator)()],oc.prototype,"search",null),oc),Ga=(Ns=function(t,e){return(Ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ns(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ha=(Ga(rc,ks=ra),rc.prototype.findMulti=function(A,C){return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O,E,T,S=this;return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:if(!C)throw new Or.ValidationError("organizationId","required");return A=ye.a.uniq(Object(ea.d)(A).map(this._resolveModelId)),e=ye.a.chunk(A,10),n=e.map(function(t){return S.host.api.entities.findMulti({users:t,metadata:t,organizationId:C})}),[4,Promise.all(n)];case 1:for(r=t.sent(),o={},i=0,s=r;i<s.length;i++){if(a=s[i],u=a.users,c=a.metadata,u)for(l=0,d=u;l<d.length;l++)for(h=d[l],f=0,p=Object.entries(h);f<p.length;f++)v=p[f],O=v[0],y=v[1],o[O]={entity:y};if(c)for(g=0,m=c;g<m.length;g++)for(_=m[g],b=0,w=Object.entries(_);b<w.length;b++)I=w[b],O=I[0],E=I[1],(T=o[O])&&(T.metadata=E)}return[2,Object.values(o)]}})})},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(Vo.decorator)()],rc.prototype,"findMulti",null),rc),Wa=(Ms=function(t,e){return(Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ms(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ya=(Wa(nc,xs=ra),nc.prototype.escalateMessage=function(o){return Ri(this,void 0,void 0,function(){var e,n,r;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(o,"message")))throw new Or.NotFoundError(this.host.models.Message.name,o);return[4,this.host.api.escalations.escalateMessage(e.serverId)];case 1:return n=t.sent(),r=(n||{}).escalation,[2,this._updateEscalation(r)]}})})},nc.prototype.acknowledge=function(u){return Ri(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(u,"escalationExecution")))throw new Or.NotFoundError(this.host.models.EscalationExecution.name,u);return u=e.id,n=e.originalMessageId,r=this.host,o=r.currentUser,i=r.currentUserId,(s=o.roles.map(function(t){return t.botUserId})).push(i),[4,this.host.api.escalations.acknowledge(u,{messageId:n,userTokens:s})];case 1:return a=t.sent(),[2,this.host.models.EscalationExecution.inject(a)]}})})},nc.prototype.cancel=function(r){return Ri(this,void 0,void 0,function(){var e,n;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(r,"escalationExecution")))throw new Or.NotFoundError(this.host.models.EscalationExecution.name,r);return n=e.originalMessageId,[4,this.host.api.escalations.cancel(n)];case 1:return t.sent(),[2]}})})},nc.prototype.ensureEscalationExecution=function(i){return Ri(this,void 0,void 0,function(){var e,n,r,o;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(i,"escalationExecution")))throw new Or.NotFoundError(this.host.models.EscalationExecution.name,i);return n=e.carbonCopyMessageId,r=e.originalMessageId,o=[],n&&o.push(n),r&&o.push(r),[4,this.host.messages.ensureRecipientStatusMulti(o)];case 1:return t.sent(),[2]}})})},nc.prototype.skip=function(u){return Ri(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(u,"escalationExecution")))throw new Or.NotFoundError(this.host.models.EscalationExecution.name,u);return u=e.id,n=e.originalMessageId,r=this.host,o=r.currentUser,i=r.currentUserId,(s=o.roles.map(function(t){return t.botUserId})).push(i),[4,this.host.api.escalations.skip(u,{messageId:n,userTokens:s})];case 1:return a=t.sent(),[2,this.host.models.EscalationExecution.inject(a)]}})})},nc.prototype.removeEscalationGroup=function(r){return Ri(this,void 0,void 0,function(){var e,n;return Pi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(r,"escalationExecution")))throw new Or.NotFoundError(this.host.models.EscalationExecution.name,r);return n=e.groupId,[4,this.host.api.groups.destroy(n)];case 1:if(!t.sent())throw new Or.NotFoundError(this.host.models.Group.name,n);return[2]}})})},nc.prototype.reactToEscalationsEvent=function(t){var e=t.data;this._updateEscalation(e.escalation)},nc.prototype._updateEscalation=function(t,e){var n=(void 0===e?{}:e).inGroupInject,r=void 0!==n&&n,o={};t&&t.display_name&&(o=this.host.models.EscalationExecution.inject(t));var i=o.id,s=o.carbonCopyMessage,a=o.groupId,u=o.organizationId,c=o.originalMessage;return c&&this.host.models.Message.inject({escalationExecutionId:i,id:c.id}),s&&this.host.models.Message.inject({escalationExecutionId:i,id:s.id}),a&&!r&&this.host.models.Group.inject({id:a,escalationExecutionId:i,organizationId:u}),o},nc.prototype.getAll=function(){return this.host.models.EscalationExecution.getAll()},nc.prototype.getById=function(t){return this.host.models.EscalationExecution.get(t)},Ci([Object(Vo.decorator)()],nc.prototype,"escalateMessage",null),Ci([Object(Vo.decorator)()],nc.prototype,"acknowledge",null),Ci([Object(Vo.decorator)()],nc.prototype,"cancel",null),Ci([Object(Vo.decorator)()],nc.prototype,"skip",null),Ci([Object(Vo.decorator)()],nc.prototype,"removeEscalationGroup",null),nc),Ka=(js=function(t,e){return(js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}js(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$a=(Ka(ec,Ps=ra),ec.prototype.emit=function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t):this.logger.info("unhandled event: "+t.type,t.data)},ec),Xa=n(65),Qa=n.n(Xa),Za=(tc.is=function(t){return t instanceof this},tc),Ja=(Rs=function(t,e){return(Rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Rs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),tu=function(){return(tu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},eu=["message:is_typing","presence","remote_wipe","sse:heartbeat"],nu=["message:is_typing","presence","sse:heartbeat"],ru=["00000000-0000-0000-0000-000000000001"],ou=["remote_wipe"],iu={autoDeliver:"auto-deliver",canConfirm:"can-confirm",closeAfterMessages:"close-after-messages",heartbeat:"heartbeat_5",hidden:"hidden",includeDistributionListEvents:"dl_sender_event",isTyping:"is-typing",keepAlive:"keep_alive_15_1",msgDeliveryDelay:"msg_delivery_delay",multiOrg:"multi-org",noOfflineMessages:"no-offline-messages",renderMetadata:"render_metadata",singleConversation:"single_conversation"},su={events:{allowManualRequestBatch:!0,basicAuthParam:"auth_basic",features:null,requiresBasicAuth:!1,routerName:"eventRouter",url:"/events"},simpleNotifications:{allowManualRequestBatch:!1,basicAuthParam:"auth",features:{heartbeat:!0},requiresBasicAuth:!0,routerName:"notificationRouter",url:"/events/simple_notifications"}},au=(Ja(Ju,Cs=ra),Ju.prototype.mounted=function(){this._throttled_flushQueuedAcks=Qa()(this._flushQueuedAcks,this.config.flushAckInterval,{leading:!1}),this.__allEvents=[],this._connectionRetryCount=0,this._eventQueue=[],this._eventQueueDeferred=!1,this._eventQueueIsManual=!1,this._eventQueueTimeout=null,this._heartbeatInterval=this.config.eventsHeartbeatIntervalVisible,this._heartbeatTimeout=null,this._lastHeartbeatTime=null,this._openTimeout=null,this._pendingAckConnections=0,this._processedEventIds={},this._queuedAcks=[],this._reconnectWhenQueuesAreEmpty=!1,this._reconnectWhenQueuesAreEmpty=!1,this._retryHistoryTimeout=null,this._visibilityState=zo.VISIBLE,this.isConnected=!1,this.isOpen=!1;var t=n(243);this.visibilityListenerId=t.change(this._onVisibilityChange)},Ju.prototype.dispose=function(){this._throttled_flushQueuedAcks.cancel&&this._throttled_flushQueuedAcks.cancel(),this.disconnect({source:"EventsService cleanup"}),null!==this.visibilityListenerId&&(n(243).unbind(this.visibilityListenerId),this.visibilityListenerId=null)},Object.defineProperty(Ju.prototype,"_autoAck",{get:function(){return"events"===this.endpointType&&this.config.autoAckSuccessfullyHandledEvents},enumerable:!1,configurable:!0}),Object.defineProperty(Ju.prototype,"hasConnection",{get:function(){return!!this.eventSource},enumerable:!1,configurable:!0}),Object.defineProperty(Ju.prototype,"isSignedIn",{get:function(){return!!this._auth},enumerable:!1,configurable:!0}),Object.defineProperty(Ju.prototype,"router",{get:function(){return this.host[this.routerName]},enumerable:!1,configurable:!0}),Ju.prototype.setAuth=function(t){this._auth=tu({basicAuthParam:this.basicAuthParam},t)},Ju.prototype.removeAuth=function(){this._auth=null},Ju.prototype.getAuth=function(){return this._auth},Ju.prototype.connect=function(){var i=this;if(!this.isSignedIn)throw this._cancelSessionTimers({source:"Connection attempt while not signed in"}),new Or.NotSignedInError;if(this.requiresBasicAuth&&(!this._auth.key||!this._auth.secret))throw this._cancelSessionTimers({source:"Connection attempt without valid authorization"}),new Or.RequiresBasicAuthError;if(this.eventSource)throw new Error("Already connected to EventSource");for(var t=[],e=0,n=Object.entries(this.features||this.config.events);e<n.length;e++){var r=n[e],o=r[0],s=r[1];if(s||0===s){var a=iu[o],u=!0===s?a:a+":"+s;t.push(u)}}var c=t.join(",");this.logger.info("connecting "+this.endpointType+". networkStatus="+this.httpClient.networkStatus+" features="+c);var l,d=!this._watchingNetworkConnection;if(this.httpClient.networkStatus!==Uo.OFFLINE&&d&&this.httpClient._setNetworkStatus(Uo.CONNECTING),this._watchNetworkConnection(),this.httpClient.networkStatus===Uo.OFFLINE)throw new Error("Cannot connect while network is offline, but will autoconnect when online");this._isClosed=!1,this._isHeartbeatTimeout=!1,this._reconnectWhenQueuesAreEmpty=!1;var h=this._requestedClose=!1,f=!1;this._openTimeout=setTimeout(function(){i._openTimeout=null,f=!0,l.close()},this.config.eventsOpenTimeout),this.eventSource=l=this.host.eventSourceClient.createEventSource(this.url,{auth:this._auth,features:c,onOpen:function(){i.logger.info("open"),i._cancelSessionTimers({source:"Event source opened"}),i._setHeartbeatTimeout(),h=!0,i.isOpen=!0,i.emit("opened")},onMessage:function(t,e){var n=e.isFirstMessage;i._setHeartbeatTimeout(),n&&(i._setRetryHistoryTimeout(),i.isConnected=!0,i.emit("connected")),i._queueEvent(t)},onError:function(t){var e=!!t&&i.httpClient.isUnauthorizedError(t),n=i._isHeartbeatTimeout,r=i.httpClient.networkStatus,o=i._requestedClose;n?t=new Error("No activity within "+i._heartbeatInterval+" milliseconds; reconnecting"):f&&(t=new Error("Open timed out after "+i.config.eventsOpenTimeout+" milliseconds; reconnecting")),i.logger.info("error",t,t.message||"",t.code||"",void 0!==t.status?t.status:""),i.__allEvents.push({clientDisconnect:{error:{code:t.code,message:t.message,status:t.status},hasConnected:h,isHeartbeatTimeout:n,isUnauthorized:e,networkStatus:r,openTimedOut:f,requestedClose:o,timestamp:new Date}}),o||(e?i.disconnect({isRecoverable:!1,source:"Unauthorized during eventSource error handling"}):r!==Uo.OFFLINE&&(h||0!==i._connectionRetryCount||(i._connectionRetryCount=1),i._disconnectAndRetry()))}}),this.eventSource.start()},Ju.prototype._scheduleConnectRetry=function(){var t=this;this._cancelSessionTimers({source:"Scheduling connection retry"}),this.logger.info("scheduleConnectRetry",this._connectionRetryCount);var e=Math.min(this.config.eventsAutoReconnectDelay*this._connectionRetryCount,this.config.eventsAutoReconnectMaxDelay);this._scheduleConnectRetryTimeout=setTimeout(function(){return t.connect()},e),this._connectionRetryCount++},Ju.prototype._watchNetworkConnection=function(){this._watchingNetworkConnection||(this._watchingNetworkConnection=!0,this.host.on("networkStatus:change",this.onNetworkStatusChanged))},Ju.prototype._unwatchNetworkConnection=function(){this._watchingNetworkConnection&&(this.host.removeListener("networkStatus:change",this.onNetworkStatusChanged),this._watchingNetworkConnection=!1)},Ju.prototype._cancelSessionTimers=function(t){var e=(void 0===t?{}:t).source;this._heartbeatTimeout&&(clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=null),this._openTimeout&&(clearTimeout(this._openTimeout),this._openTimeout=null),this._scheduleConnectRetryTimeout&&(this.__allEvents.push({cancelSessionTimer:{source:e,timestamp:new Date}}),clearTimeout(this._scheduleConnectRetryTimeout),this._scheduleConnectRetryTimeout=null),null!==this._eventQueueTimeout&&(clearTimeout(this._eventQueueTimeout),this._eventQueueTimeout=null)},Ju.prototype._setHeartbeatTimeout=function(t){var e=this;this._heartbeatTimeout&&clearTimeout(this._heartbeatTimeout),void 0!==t&&(this._heartbeatInterval=t),this._heartbeatTimeout=setTimeout(function(){e._heartbeatTimeout=null,e._isHeartbeatTimeout=!0,0===e._connectionRetryCount&&(e._connectionRetryCount=1),e._disconnectAndRetry()},this._heartbeatInterval)},Ju.prototype._cancelRetryHistoryTimeout=function(){this._retryHistoryTimeout&&(clearTimeout(this._retryHistoryTimeout),this._retryHistoryTimeout=null)},Ju.prototype._setRetryHistoryTimeout=function(){var t=this;this._retryHistoryTimeout&&clearTimeout(this._retryHistoryTimeout),this._retryHistoryTimeout=setTimeout(function(){t._retryHistoryTimeout=null,t._connectionRetryCount=0},this.config.eventsClearRetryHistoryInterval)},Ju.prototype.reconnect=function(){this._connectionRetryCount=0,this.disconnect({unwatchNetwork:!1,source:"Reconnect"}),this.connect()},Ju.prototype._disconnectAndRetry=function(){var t=this;this.__allEvents.push({eventsDisconnectAndRetry:{eventQueueLength:this._eventQueue.length,pendingAckConnections:this._pendingAckConnections,queuedAcksLength:this._queuedAcks.length,connectionRetryCount:this._connectionRetryCount,timestamp:new Date}}),this.disconnect({clearQueues:!1,unwatchNetwork:!1,source:"Disconnect and retry"}),this.config.eventsAutoReconnect&&(this._reconnectWhenQueuesAreEmpty=!0),this.config.eventsAutoReconnect&&0===this._eventQueue.length&&0===this._pendingAckConnections&&0===this._queuedAcks.length?this._scheduleConnectRetry():this.config.eventsAutoReconnect&&(this._scheduleConnectRetryTimeout=setTimeout(function(){return t.connect()},this.config.eventDrainTimeout)),0<this._eventQueue.length&&this._scheduleEventQueue({immediate:!0}),(0<this._pendingAckConnections||0<this._queuedAcks.length)&&this._flushQueuedAcks()},Ju.prototype.disconnect=function(t){var e=void 0===t?{}:t,n=e.clearQueues,r=void 0===n||n,o=e.isRecoverable,i=void 0===o||o,s=e.unwatchNetwork,a=void 0===s||s,u=e.source;if(this.__allEvents.push({eventsDisconnect:{clearQueues:r,source:u,unwatchNetwork:a}}),this._cancelSessionTimers({source:"Disconnect"}),this._cancelRetryHistoryTimeout(),a&&this._unwatchNetworkConnection(),this.eventSource){var c=this.eventSource;this.eventSource=null,this._requestedClose=!0,this._isClosed||(this._isClosed=!0,c.close()),this.emit("disconnected",{isRecoverable:i})}this.isConnected=!1,this.isOpen=!1,r&&(this._eventQueue=[],this._queuedAcks=[])},Ju.prototype._queueEvent=function(t){var e=t.data;if(e){if(ou.some(function(t){return e.includes(t)})){var n=void 0;try{n=JSON.parse(e)}catch(t){return this.logger.error("error parsing SSE payload: <"+e+">"),void this._disconnectAndRetry()}var r=Object.keys(n.event)[0].replace("tigertext:iq:","");if(ou.includes(r)){this.disconnect({source:"Immediate event "+r});var o=n.event_id;return void this._processImmediateEvent(o,e)}}this._eventQueue.push(e),this._scheduleEventQueue()}},Ju.prototype._handleEvent=function(t){var e=t.event_id;if(this._autoAck||!this._processedEventIds[e]||ru.includes(e)){var n=Object.keys(t.event)[0],r=n.replace("tigertext:iq:",""),o=t.event[n];!this.config.eventsDebugging&&nu.includes(r)||this.__allEvents.push(t),"sse:heartbeat"===r&&(this._lastHeartbeatTime=Date.now()),this.logger.debug("incoming",r,o);var i=new Za(e,r,o);try{this.router.emit(i),this.emit("event",i),this._autoAck?eu.includes(r)||this.__queueAck(e):this._processedEventIds[e]=!0}catch(t){this.logger.error("error in event "+r,t,t.stack,{data:o}),this.disconnect({isRecoverable:!1,source:"Error in event "+r})}}},Ju.prototype.__queueAck=function(t){var e;t=Object(ea.d)(t),(e=this._queuedAcks).push.apply(e,t),this._throttled_flushQueuedAcks()},Ju.prototype.ack=function(r){return ji(this,void 0,void 0,function(){var e,n;return xi(this,function(t){switch(t.label){case 0:this.host.requireUser(),e=!1,r=Object(ea.d)(r),this.logger.log("ack",r),this._pendingAckConnections++,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.events.ack(r)];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),e=this.httpClient.isUnauthorizedError(n),this.logger.warn("some events not acked",r),[3,4];case 4:return this._pendingAckConnections--,e&&(this.logger.warn("no longer authorized, terminating session"),this.disconnect({isRecoverable:!1,source:"Unauthorized during ack"})),[2]}})})},Object.defineProperty(Ju.prototype,"url",{get:function(){var t=su[this.endpointType].url;return"/"+("events"===this.endpointType&&this.config.condensedReplays?"v5":"v2")+t},enumerable:!1,configurable:!0}),Ju),uu=(As=function(t,e){return(As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}As(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),cu=(uu(Zu,Ss=ra),Zu.prototype.mounted=function(){this._fetched=!1},Zu.prototype.dispose=function(){this._fetched=!1},Zu.prototype.create=function(t){var s=t.avatarFile,a=t.description,e=t.memberIds,u=void 0===e?[]:e,c=t.metadata,l=t.name,d=t.organizationId,n=t.replayHistory,h=void 0===n||n,r=t.senderId,f=void 0===r?this.host.currentUserId:r;return ki(this,void 0,void 0,function(){var e,n,r,o,i=this;return Ni(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!d)throw new Or.ValidationError("organizationId","required");return[4,Promise.all(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}([f],u).map(this.host.roles.__resolveRoleId).filter(Boolean).map(function(t){return i._resolveModelIdWithTypes(t,"user")}).map(function(t){return i.host.users.findOrCreate(t,{organizationId:d})}))];case 1:return e=t.sent(),n=ya.a.call(e),u=n.map(function(t){return i._resolveModelIdWithTypes(t,"user")}),[4,this.host.api.groups.create({avatarFile:s,description:a,excludeCreator:!1,isPublic:!0,memberIds:u,metadata:c,name:l,organizationId:d,replayHistory:h})];case 2:return r=t.sent(),o=this.config.condensedReplays&&r.entity?this.host.conversations.__injectCounterParty({conversationId:r.conversation_id,entityAttrs:r.entity,entityType:"group",hasCurrentUser:!0,organizationId:r.organization_id}):this.host.models.Group.inject(r),c&&this.host.metadata.__injectMetadata(o.id,d,c),[2,o]}})})},Zu.prototype.find=function(r,o){return void 0===o&&(o={}),ki(this,void 0,void 0,function(){var e,n;return Ni(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),e=null,o.bypassCache?[3,2]:!(e=this.host.models.Group.get(r))||e.$placeholder?[3,2]:[4,this.host.groups.__ensureEntitiesLoaded(e.id,o)];case 1:return t.sent(),[2,e];case 2:return[4,this.host.groups.__find(r)];case 3:if(n=t.sent(),e=this.host.models.Group.get(r),n)return e?[4,this.host.groups.__ensureEntitiesLoaded(e.id,o)]:[3,5];if(!o.ignoreNotFound)throw new Or.NotFoundError(this.host.models.Group.name,r);return[2,e];case 4:t.sent(),t.label=5;case 5:return[2,e]}})})},Zu.prototype.findAll=function(t){var e=(void 0===t?{}:t).bypassCache,o=void 0!==e&&e;return ki(this,void 0,void 0,function(){var e,n,r;return Ni(this,function(t){switch(t.label){case 0:return!o&&this._fetched?[2,this.getAll()]:0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return[4,this.host.search.query({types:["forum"],organizationIds:e.map(function(t){return t.id}),query:{displayName:""},followContinuations:!0})];case 3:return n=t.sent().results,r=n.map(function(t){return t.entity}),this._fetched=!0,[2,r]}})})},Zu.prototype.getAll=function(){return this.host.models.Group.getAll().filter(function(t){return t.isPublic})},Zu.prototype.getById=function(t){return this.host.models.Group.get(t)},Zu.prototype.join=function(e){return ki(this,void 0,void 0,function(){return Ni(this,function(t){return[2,this.host.groups.addMembers(e,[this.host.currentUserId])]})})},Mi([Object(Vo.decorator)()],Zu.prototype,"find",null),Mi([Object(Vo.decorator)()],Zu.prototype,"findAll",null),Zu),lu=(Ts=function(t,e){return(Ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ts(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),du=function(){return(du=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},hu=(lu(Qu,Es=ra),Qu.prototype.mounted=function(){this._fetched=!1,this._groupMemberIds={},this._userGroups={},this._userState={},this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onRemoveConversation),this.host.models.Group.on("afterInject",this._onChangeGroup),this.host.models.Group.on("afterEject",this._onRemoveGroup),this.host.models.Metadata.on("afterInject",this._onChangeMetadata),this.host.models.Metadata.on("afterEject",this._onChangeMetadata),this.host.models.User.on("afterInject",this._onChangeUser),this.host.models.User.on("afterEject",this._onRemoveUser)},Qu.prototype.dispose=function(){this._fetched=!1,this._groupMemberIds={},this._userGroups={},this._userState={},this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onRemoveConversation),this.host.models.Group.removeListener("afterInject",this._onChangeGroup),this.host.models.Group.removeListener("afterEject",this._onRemoveGroup),this.host.models.Metadata.removeListener("afterInject",this._onChangeMetadata),this.host.models.Metadata.removeListener("afterEject",this._onChangeMetadata),this.host.models.User.removeListener("afterInject",this._onChangeUser),this.host.models.User.removeListener("afterEject",this._onRemoveUser)},Qu.prototype.create=function(t){var a=t.avatarFile,u=t.description,e=t.isPatientGroup,c=void 0!==e&&e,n=t.isTeamActivation,l=void 0!==n&&n,r=t.memberIds,d=void 0===r?[]:r,h=t.metadata,f=t.name,p=t.organizationId,o=t.replayHistory,v=void 0!==o&&o,i=t.senderId,y=void 0===i?this.host.currentUserId:i;return Di(this,void 0,void 0,function(){var e,n,r,o,i,s=this;return Ui(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!p)throw new Or.ValidationError("organizationId","required");return[4,Promise.all(Li([y],d).map(this.host.roles.__resolveRoleId).filter(Boolean).map(function(t){return s._resolveModelIdWithTypes(t,["user","team"])}).map(function(t){var e=s._resolveEntity(t);return"team"===Object(ve.get)(e,"$entityType")?e:s.host.users.findOrCreate(t,{organizationId:p})}))];case 1:return e=t.sent(),n=ya.a.call(e),d=n.map(function(t){return s._resolveModelIdWithTypes(t,["user","team"])}),r=this._shouldExcludeSender(p,d,y),f||c||l||(f=this._getGroupName(n)),[4,this.host.api.groups.create({avatarFile:a,description:u,excludeCreator:r,memberIds:d,metadata:h,name:f,organizationId:p,replayHistory:v})];case 2:return o=t.sent(),this.config.condensedReplays&&o.entity?(i=this.host.conversations.__injectCounterParty({conversationId:o.conversation_id,entityAttrs:o.entity,entityType:"group",organizationId:o.organization_id}),this.host.conversations.__injectConversation(du(du({},o),{entity:i}))):i=this.host.models.Group.inject(o),h?(this.host.metadata.__injectMetadata(i.id,p,h),[3,5]):[3,3];case 3:return this.config.condensedReplays?[3,5]:[4,this.host.metadata.find(i.id,p)];case 4:t.sent(),t.label=5;case 5:return[2,i]}})})},Qu.prototype.createPatientGroup=function(t){var e=t.metadata,n=t.name,r=t.organizationId,o=t.recipientId,i=t.senderId;return this.create({isPatientGroup:!0,metadata:e,name:n,organizationId:r,memberIds:Li([i],o)})},Qu.prototype._shouldExcludeSender=function(t,e,n){var r,o,i=this.host.models.User.get(n);return!!((o=r=i)&&"user"===o.$entityType&&r.isRoleBot&&i.botRole&&0<i.botRole.members.length)&&!e.includes(i.botRole.memberIds[0])},Qu.prototype._getGroupName=function(t,e){return void 0===e&&(e=!1),t.map(function(t){var e=t.displayName,n=t.firstName;return t.isRoleBot||"role"===t.$entityType||"team"===t.$entityType?e:n||(Object(Je.isEmail)(e)||Object(Oa.isPhone)(e)?e:"")}).filter(Boolean).join(", ")+(e?" ####":"")||"Group"},Qu.prototype.update=function(o,t){var i=t.name,s=t.avatarFile,a=t.replayHistory,u=t.memberIds,c=t.metadata;return Di(this,void 0,void 0,function(){var e,n,r;return Ui(this,function(t){switch(t.label){case 0:return this.host.requireUser(),o=this._resolveModelId(o),e={},void 0!==i&&(e.name=i),void 0!==a&&(e.replayHistory=a),void 0!==u&&(e.memberIds=u.map(this.host.roles.__resolveRoleId)),[4,this.host.api.groups.update(o,{name:i,avatarFile:s,replayHistory:a,memberIds:u})];case 1:return void 0!==(n=t.sent()).avatarUrl&&(e.avatarUrl=n.avatarUrl),r=this.host.models.Group.inject(du({id:o},e)),c?[4,this.host.metadata.update(o,c,r.organizationId)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2,r]}})})},Qu.prototype.find=function(r,o){return void 0===o&&(o={}),Di(this,void 0,void 0,function(){var e,n;return Ui(this,function(t){switch(t.label){case 0:return o=Object(ve.defaults)(o,{bypassCache:!1,ignoreNotFound:!1,includeMembers:!1}),this.host.requireUser(),e=null,o.bypassCache?[3,2]:!(e=this.host.models.Group.get(r))||e.$placeholder?[3,2]:[4,this.__ensureEntitiesLoaded(e.id,o)];case 1:return t.sent(),[2,e];case 2:return[4,this.__find(r)];case 3:if(n=t.sent(),e=this.host.models.Group.get(r),n)return e?[4,this.__ensureEntitiesLoaded(e.id,o)]:[3,5];if(!o.ignoreNotFound)throw new Or.NotFoundError(this.host.models.Group.name,r);return[2,e];case 4:t.sent(),t.label=5;case 5:return[2,e]}})})},Qu.prototype.__find=function(s){return Di(this,void 0,void 0,function(){var e,n,r,o,i;return Ui(this,function(t){switch(t.label){case 0:return e=this.host.models.Group.get(s),[4,this.host.api.groups.find(s)];case 1:return n=t.sent(),this.config.condensedReplays&&n&&n.entity?(r=n.entity,e=this.host.conversations.__injectCounterParty({conversationId:n.conversation_id,entityAttrs:r,entityType:"group",organizationId:n.organization_id}),this.host.models.Group.removePlaceholder({entity:e,attrs:r}),[2,r]):(n&&(this.__removeForumMembers(n),o=n.metadata,e=this.host.models.Group.inject(n),i=e.organizationId,o&&i&&this.host.metadata.__injectMetadata(s,i,o)),this.host.models.Group.removePlaceholder({entity:e,attrs:n}),[2,n])}})})},Qu.prototype.__removeForumMembers=function(t){var e=t.members,n=this.__extractGroupTypeFromAttrs(t);n===_o.FORUM?e&&0===e.length&&delete t.members:n===_o.ROLE_ASSIGNMENT||e||(t.members=[])},Qu.prototype.__extractGroupTypeFromAttrs=function(t){var e=t.id||t.token,n=t.organizationId||t.organization_key,r=n?this.host.metadata.get(e,n):null,o=t.metadata||(r?r.data:null),i=_o.GROUP;if(o&&"role_assignment"===o.meta_type)i=_o.ROLE_ASSIGNMENT;else if(o&&"role"===o.feature_service)i=_o.ROLE_P2P;else if(o&&"escalation"===o.feature_service)i=_o.ESCALATION;else if(o&&"patient_care"===o.feature_service)i=_o.PATIENT_CARE;else if(o&&"patient_messaging"===o.feature_service)i=_o.PATIENT_MESSAGING;else if(o&&"teams"===o.feature_service){var s=o.meta_type;"activated_team"===s?i=_o.ACTIVATED_TEAM:"intra_team"===s&&(i=_o.INTRA_TEAM)}else(t.isPublic||t.is_public)&&(i=_o.FORUM);return i},Qu.prototype.__ensureEntitiesLoaded=function(r,o){return Di(this,void 0,void 0,function(){var e,n;return Ui(this,function(t){switch(t.label){case 0:return e=this.host.models.Group.get(r),n=[this.ensureMetadata(e)],o.includeMembers&&n.push(this.ensureMembers(e)),[4,Promise.all(n)];case 1:return t.sent(),[2]}})})},Qu.prototype.findAll=function(t){var e=(void 0===t?{}:t).includeMembers,g=void 0!==e&&e;return Di(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y;return Ui(this,function(t){switch(t.label){case 0:return this._fetched?[2,this.getAll()]:0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return[4,this.host.search.query({types:["group"],organizationIds:e.map(function(t){return t.id}),query:{displayName:""},followContinuations:!0})];case 3:if(n=t.sent().results,r=n.map(function(t){return t.entity}),!g)return[3,5];for(o={},i=0,s=r;i<s.length;i++)for(a=s[i],v=a.organizationId,y=a.memberIds,u=0,c=y;u<c.length;u++)l=c[u],o[v]||(o[v]=[]),o[v].includes(l)||o[v].push(l);for(d=[],h=0,f=Object.entries(o);h<f.length;h++)p=f[h],v=p[0],y=p[1],d.push(this.host.users.ensureUsers(y,v));return[4,Promise.all(d)];case 4:t.sent(),t.label=5;case 5:return this._fetched=!0,[2,r]}})})},Qu.prototype.findAllWithSpecificMembers=function(n,r,o){return Di(this,void 0,void 0,function(){var e;return Ui(this,function(t){switch(t.label){case 0:return r=this._resolveModelId(r),n=Object(ea.d)(n).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),e=this.__findAllLocalWithSpecificMembers(n,r,o),o&&o.localOnly||0!==e.length?[3,2]:[4,this.findAll()];case 1:t.sent(),e=this.__findAllLocalWithSpecificMembers(n,r,o),t.label=2;case 2:return[2,e]}})})},Qu.prototype.ensureMembers=function(i,s){return void 0===s&&(s={}),Di(this,void 0,void 0,function(){var e,n,r,o;return Ui(this,function(t){switch(t.label){case 0:return e=i.groupType===_o.ROLE_ASSIGNMENT,i.memberIds?[3,5]:i.groupType!==_o.FORUM?[3,2]:[4,this.findAllMemberIds(i.id)];case 1:return(n=t.sent())&&this.host.models.Group.inject({id:i.id,members:n}),[3,5];case 2:return e?[3,5]:[3,3];case 3:return[4,this.__find(i.id)];case 4:t.sent(),t.label=5;case 5:return r=s.attrs?du({},s.attrs):{},o=e&&!i.memberIds?[]:i.memberIds,r.organizationId=i.organizationId,[4,this.ensureMembersWithIds(i.id,o,du(du({},s),{attrs:r}))];case 6:return t.sent(),[2]}})})},Qu.prototype.ensureMembersWithIds=function(n,r,o){return void 0===o&&(o={}),Di(this,void 0,void 0,function(){var e=this;return Ui(this,function(t){switch(t.label){case 0:return this.host.requireUser(),0===(r=Object(ve.without)(r,this.host.currentUserId)).length?[2]:(o=Object(ve.defaults)(o,{onlyPlaceholder:!1}),[4,Promise.all(r.map(function(t){return e.__ensureMember(t,o)}).filter(Boolean))]);case 1:return 0<t.sent().length&&this.host.models.Group.touch(n),[2]}})})},Qu.prototype.__ensureMember=function(t,e){if(void 0===e&&(e={}),!this.host.models.User.shouldEnsure(t,e.onlyPlaceholder))return null;var n=this.host.models.User.get(t);return n&&e.attrs&&this.host.models.User.injectPlaceholder(du({id:n.id},e.attrs)),this.host.models.User.waitForEnsuredEntity(t,e)},Qu.prototype.ensureMetadata=function(o){return Di(this,void 0,void 0,function(){var e,n,r;return Ui(this,function(t){switch(t.label){case 0:return e=o.groupType,n=o.id,(r=o.organizationId)&&this.host.metadata.get(n,r)?[3,3]:e!==_o.FORUM&&e!==_o.ROLE_ASSIGNMENT?[3,1]:[3,3];case 1:return[4,this.__find(n)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Qu.prototype.getAll=function(){return this.host.models.Group.getAll()},Qu.prototype.getById=function(t){return this.host.models.Group.get(t)},Qu.prototype.getMultiById=function(t){return this.host.models.Group.getMulti(t)},Qu.prototype.__findAllLocalWithSpecificMembers=function(t,e,n){var r=void 0===n?{}:n,o=r.exact,i=void 0===o||o,s=r.includeCurrentUser,a=void 0===s||s,u=r.includeForums,c=void 0===u||u,l=r.includeRoles,d=void 0===l||l,h=r.senderId,f=void 0===h?null:h,p=this.host,v=p.currentUser,y=p.currentUserId,g=v.roles.map(function(t){return t.botUserId});f&&g.includes(f)?(t=t.slice()).push(f,y):a&&!t.includes(y)&&(t=t.slice()).push(y);for(var m=t.includes(y),_=t.length,b=[],w=0,I=this.host.models.Group.getAll();w<I.length;w++){var O=I[w];if(c||O.groupType!==_o.FORUM){var E=O.memberIds;if(O.organizationId===e&&E){for(var T=!0,S=0,A=t;S<A.length;S++){var C=A[S];if(!E.includes(C)){T=!1;break}}if(T){if(i){if(!f&&!m)continue;var R=_;if(d)for(var P=0,j=g;P<j.length;P++){var x=j[P];O.memberIds.includes(x)&&R++}if(R!==O.memberIds.length)continue}b.push(O)}}}}return b},Qu.prototype.destroy=function(e){return Di(this,void 0,void 0,function(){return Ui(this,function(t){switch(t.label){case 0:return this.host.requireUser(),e=this._resolveModelId(e),[4,this.host.api.groups.destroy(e)];case 1:if(!t.sent())throw new Or.NotFoundError(this.host.models.Group.name,e);return[2]}})})},Qu.prototype.findAllMemberIds=function(e){return Di(this,void 0,void 0,function(){return Ui(this,function(t){return this.host.requireUser(),e=this._resolveModelId(e),[2,this.host.api.groups.findAllMemberIds(e)]})})},Qu.prototype.addMembers=function(s,a){return Di(this,void 0,void 0,function(){var e,n,r,o,i;return Ui(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),s=this._resolveModelId(s),a=Object(ea.d)(a).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),(e=this.getById(s))&&e.groupType===_o.ROLE_P2P)throw new Or.PermissionDeniedError("role p2p group",e.id,"add users");return e?"FORUM"!==e.groupType||e.memberIds?[3,2]:(n=e,[4,this.findAllMemberIds(s)]):[3,3];case 1:n.memberIds=t.sent(),t.label=2;case 2:a=Object(ve.difference)(a,e.memberIds),t.label=3;case 3:return 0===a.length?[2]:[4,this.host.api.groups.addMembers(s,a)];case 4:return r=t.sent(),this.config.condensedReplays?(o=this.host.conversations.getById(r.conversation_id))?[3,6]:[4,this.host.api.conversations.find(r.conversation_id)]:[3,7];case 5:if(!(i=t.sent()))throw new Or.NotFoundError(this.host.models.Conversation.name,s);o=this.host.conversations.__injectConversation(i),t.label=6;case 6:r.unread_message_count&&(o.unreadCount=r.unread_message_count),r.unread_priority_message_count&&(o.unreadPriorityCount=r.unread_priority_message_count),this.host.models.Conversation.inject(o),t.label=7;case 7:return[2]}})})},Qu.prototype.removeMembers=function(a,u){return Di(this,void 0,void 0,function(){var e,n,r,o,i,s;return Ui(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),a=this._resolveModelId(a),u=Object(ea.d)(u).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),!(e=this.getById(a)))return[3,3];if(n=e.groupType,r=e.id,o=e.p2pSender,i=o&&"role"===o.$entityType&&o.botUserId,n===_o.ROLE_P2P&&i&&u.includes(i))throw new Or.PermissionDeniedError("role p2p group",r,"remove an on-duty user");return"FORUM"!==n||e.memberIds?[3,2]:(s=e,[4,this.findAllMemberIds(a)]);case 1:s.memberIds=t.sent(),t.label=2;case 2:u=Object(ve.intersection)(u,e.memberIds),t.label=3;case 3:return 0===u.length?[2]:[4,this.host.api.groups.removeMembers(a,u)];case 4:return t.sent(),[2]}})})},Qu.prototype.addMember=function(e,n){return Di(this,void 0,void 0,function(){return Ui(this,function(t){return[2,this.addMembers(e,[n])]})})},Qu.prototype.removeMember=function(e,n){return Di(this,void 0,void 0,function(){return Ui(this,function(t){return[2,this.removeMembers(e,[n])]})})},Qu.prototype.leave=function(f){return Di(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h;return Ui(this,function(t){switch(t.label){case 0:return f=this._resolveModelId(f),(e=this.getById(f))?(n=this.host,r=n.currentUser,o=n.currentUserId,i=e.groupType,s=e.p2pSender,a=e.memberIds,u=r.roles.map(function(t){return t.botUserId}),c=[o],i!==_o.FORUM?[3,2]:[4,this.findAllMemberIds(f)]):[2];case 1:a=t.sent(),t.label=2;case 2:if(i===_o.ROLE_P2P&&s)c=["user"===s.$entityType?s.id:s.botUserId];else if(a)for(l=0,d=a;l<d.length;l++)h=d[l],u.includes(h)&&c.push(h);return[4,this.removeMembers(f,c)];case 3:return t.sent(),[2]}})})},Qu.prototype.reactToBangEvent=function(t){var e=t.data,n=(e=Object(ea.l)(e)).bang_id||""+e.sort_number;return this.__handleBang({data:e,eventId:n,alwaysAddToTimeline:!1})},Qu.prototype.__handleBang=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=void 0!==r&&r,i=e.event;"added"===i?this.__addedToGroup({data:e,eventId:n,alwaysAddToTimeline:o}):"removed"===i?this.__removedFromGroup({data:e,eventId:n,alwaysAddToTimeline:o}):"teams_request_accepted"===i?this.__acceptedToTeam({data:e,eventId:n,alwaysAddToTimeline:o}):"teams_request_declined"===i||"teams_request_declined_full"===i?this.__deniedToTeam({data:e,eventId:n,alwaysAddToTimeline:o}):go.fromServer(i)?this.__handleEscalationBang({data:e,eventId:n,alwaysAddToTimeline:o}):"ended_voip_call"===i&&this.__handleEndedCall({data:e,eventId:n,alwaysAddToTimeline:o})},Qu.prototype.__handleEndedCall=function(t){var _=t.data,b=t.eventId,w=t.alwaysAddToTimeline;return Di(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m;return Ui(this,function(t){switch(t.label){case 0:e=_.participants_duration,n=_.caller_entity,r=_.conversation_id,o=_.created_on,i=_.organization_id,s=_.sort_number,a=_.subject_entity,u=_.target_entity;try{c=JSON.parse(e)}catch(t){return[2]}return!c||Object(ve.isEmpty)(c)||Object(ve.isEmpty)(c[this.host.currentUserId])?[2]:(l=c[this.host.currentUserId],d=l.duration,h=l.start_time,d&&Object(ve.get)(n,"token")&&Object(ve.get)(u,"token")?(f=[n,u].map(function(t){var e=t.display_name,n=t.token,r=t.type;return{displayName:e,id:n,organizationId:i,type:r}}),p=f[0],(v=f[1]).type.includes("group")?(y=this.host.models.Group.get(v.id),[3,3]):[3,1]):[2]);case 1:return v.type.includes("account")?[4,this.findAllWithSpecificMembers([v.id,p.id],i)]:[3,3];case 2:g=t.sent(),m=1===g.length&&2===g[0].memberCount,y=m&&g[0],t.label=3;case 3:return y&&this.host.conversations.addCallChangeLog({action:"CALL_ENDED",alwaysAddToTimeline:w,callee:v,callEntity:a,caller:p,conversationId:r,createdAt:o,duration:d,group:y,id:b,organizationId:i,sortNumber:+s,userStartTime:h}),[2]}})})},Qu.prototype.__addedToGroup=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=e.caller_entity,i=e.subject_entity,s=e.target_entity,a=e.organization_id;if(o&&o.token&&s&&s.token&&i&&i.token){i&&!i.display_name&&(r=!1);var u=this.host.models.Group.get(s.token);if(u){var c,l={displayName:o.display_name,id:o.token,organizationId:a,type:"user"},d={displayName:i.display_name,id:i.token,organizationId:a,type:"user"},h=this.host.models.User.get(l.id),f={action:c=h&&h.isRoleBot||o.metadata&&"role"===o.metadata.feature_service?"OPT_IN":d.id===l.id?"JOIN":"ADD",actionTime:e.action_time||e.created_on,actor:l,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[d],memberIds:[d.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(f),"OPT_IN"!=c&&u.memberIds&&u.memberIds.includes(d.id)||(this.host.models.Group.touch(u),this.emit("membership:change",f))}}},Qu.prototype.__removedFromGroup=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=e.caller_entity,i=e.subject_entity,s=e.target_entity,a=e.organization_id,u=!1;if(o&&o.token&&s&&s.token&&i&&i.token){var c=this.host.models.Group.get(s.token);if(c){if(e.reason&&("leave_org"===e.reason||"delete_account"===e.reason)&&(e.reason_subject_token||e.subject_entity.token)){u=!(r=!1);var l=e.reason_subject_token||e.subject_entity.token;this.host.models.User.inject({id:l,removedFromOrg:!0})}var d,h={displayName:o.display_name,id:o.token,organizationId:a,type:"user"},f={displayName:i.display_name,id:i.token,organizationId:a,type:"user"},p=this.host.models.User.get(h.id),v={action:d=p&&p.isRoleBot||o.metadata&&"role"===o.metadata.feature_service?"OPT_OUT":f.id===h.id?"LEAVE":"REMOVE",actionTime:e.action_time||e.created_on,actor:h,alwaysAddToTimeline:r,createdAt:e.created_on,group:c,id:n,members:[f],memberIds:[f.id],removedFromGroup:u,sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(v),"OPT_OUT"!=d&&c.memberIds&&!c.memberIds.includes(f.id)||this.emit("membership:change",v)}}},Qu.prototype.__acceptedToTeam=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=e.caller_entity,i=e.subject_entity,s=e.target_entity,a=e.organization_id;if(o&&o.token&&s&&s.token&&i&&i.token){var u=this.host.models.Group.get(s.token);if(u){var c={displayName:e.action_user_name,id:e.action_user_id,organizationId:a,type:"user"},l={displayName:o.display_name,id:o.token,organizationId:a,type:"user"},d={action:"ADD",actionTime:e.action_time||e.created_on,actor:c,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[l],memberIds:[l.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(d)}}},Qu.prototype.__deniedToTeam=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=e.caller_entity,i=e.subject_entity,s=e.target_entity,a=e.organization_id;if(o&&o.token&&s&&s.token&&i&&i.token){var u=this.host.models.Group.get(s.token);if(u){var c={displayName:e.action_user_name,id:e.action_user_id,organizationId:a,type:"user"},l={displayName:o.display_name,id:o.token,organizationId:a,type:"user"},d={action:"DENY",actionTime:e.action_time||e.created_on,actor:c,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[l],memberIds:[l.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(d)}}},Qu.prototype.__handleEscalationBang=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,o=e.caller_entity,i=e.subject_entity,s=e.target_entity,a=e.organization_id;if(i.token&&s.token){var u=this.host.models.Group.get(s.token);u=u||this.host.models.Group.injectPlaceholder({id:s.token,organizationId:a});var c=go.resolve(e.event),l=this.host.models.EscalationExecution.get(i.token);l=(l=l||u.escalationExecution)||(c===go.MEMBER_ADDED?null:this.host.models.EscalationExecution.inject({id:i.token,organizationId:a}));var d=e.action_user_name,h=e.action_time||e.created_on,f=null,p=null;c===go.INITIATED?f={displayName:o.display_name,id:o.token,organizationId:a,type:"user"}:c===go.MEMBER_ADDED?p=[{displayName:e.member_name,id:e.member_id,organizationId:a,type:"user"}]:c!==go.NO_RESPONSE&&(f={displayName:d,id:null,organizationId:a,type:"user"});var v={action:c,actionTime:h,actor:f,alwaysAddToTimeline:r,createdAt:e.created_on,escalationExecution:l,group:u,members:p,id:n,sortNumber:+e.sort_number};this.host.conversations.addEscalationExecutionChangeLog(v)}},Qu.prototype._setMembership=function(t){var e=this.host.currentUser.roles.reduce(function(t,e){var n=e.botUserId;return n&&(t[n]=!0),t},{});if(t.hasCurrentUserOrRole=!1,t.memberIds)for(var n=0,r=t.memberIds;n<r.length;n++){var o=r[n];if(o===this.host.currentUserId||e[o])return void(t.hasCurrentUserOrRole=!0)}},zi([Object(Vo.decorator)()],Qu.prototype,"find",null),zi([Object(Vo.decorator)()],Qu.prototype,"__find",null),zi([Object(Vo.decorator)()],Qu.prototype,"__ensureEntitiesLoaded",null),zi([Object(Vo.decorator)()],Qu.prototype,"findAll",null),zi([Object(Vo.decorator)()],Qu.prototype,"findAllWithSpecificMembers",null),zi([Object(Vo.decorator)()],Qu.prototype,"findAllMemberIds",null),Qu),fu=n(29),pu=(Os=function(t,e){return(Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Os(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vu=function(){return(vu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yu=["escalationExecutionId","id","serverId"],gu=["distributionList","group","user"],mu=(pu(Xu,Is=ra),Xu.prototype.mounted=function(){this._throttled_flushFindRecipientStatusesQueue=this.config.flushFindRecipientStatusInterval?Qa()(this.__flushFindRecipientStatusesQueue,this.config.flushFindRecipientStatusInterval,{leading:!1}):this.__flushFindRecipientStatusesQueue,this._throttled_flushSetMessageStatusesQueue=this.config.flushSetMessageStatusInterval?Qa()(this.__flushSetMessageStatusesQueue,this.config.flushSetMessageStatusInterval,{leading:!1}):this.__flushSetMessageStatusesQueue,this._attachmentTokens=[],this._pendingFindRecipientStatuses={},this._queuedFindRecipientStatuses=[],this._queuedSetMessageStatuses={deliveredIds:[],readIds:[]},this.host.on("tick",this._onTick),this.host.models.MessageStatusPerRecipient.on("afterInject",this._onChangeMessageStatus),this.host.models.MessageStatusPerRecipient.on("afterEject",this._onChangeMessageStatus)},Xu.prototype.dispose=function(){this._attachmentTokens=null,this._pendingFindRecipientStatuses=null,this._queuedFindRecipientStatuses=null,this._queuedSetMessageStatuses=null,this._downloadAttachmentBlobAndUrl&&Vo.decorator.clear(this._downloadAttachmentBlobAndUrl),this.downloadAttachmentUrl&&Vo.decorator.clear(this.downloadAttachmentUrl),this.downloadAttachment&&Vo.decorator.clear(this.downloadAttachment),this._throttled_flushFindRecipientStatusesQueue.cancel&&this._throttled_flushFindRecipientStatusesQueue.cancel(),this._throttled_flushSetMessageStatusesQueue.cancel&&this._throttled_flushSetMessageStatusesQueue.cancel(),this.host.removeListener("tick",this._onTick),this.host.models.MessageStatusPerRecipient.removeListener("afterInject",this._onChangeMessageStatus),this.host.models.MessageStatusPerRecipient.removeListener("afterEject",this._onChangeMessageStatus)},Xu.prototype.send=function(c,l,d){return void 0===d&&(d={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u;return qi(this,function(t){switch(t.label){case 0:if(this.config.condensedReplays)throw new Error("the send() method has been deprecated in favor of sendToUser(), sendToGroup(), etc.");return Array.isArray(c)?[4,this.__resolveSender(d)]:[3,2];case 1:return t.sent(),[2,this.sendToGroupOfUsers(c,l,d)];case 2:return[4,this.__resolveCounterPartyEntityAndOrganizationId(c,d.senderOrganizationId||d.organizationId)];case 3:return e=t.sent(),n=e.counterParty,r=e.organizationId,ea.c.notEmpty("counterPartyId",n,"counterPartyId not found"),r?d=vu(vu({},ye.a.omit(d,"organizationId","senderOrganizationId","recipientOrganizationId")),{organizationId:r}):r=d.organizationId,[4,this.__resolveSender(d)];case 4:return o=t.sent(),i=function(t){return t&&"user"===t.$entityType},(s=function(t){return i(t)&&t.isRoleBot})(n)||i(n)&&s(o)?[2,this.sendToRole(c,l,d)]:(a=n.groupType,u=n.memberIds,a!==_o.FORUM||u&&u.includes(this.host.currentUserId)?[3,6]:[4,this.host.forums.join(n)]);case 5:t.sent(),t.label=6;case 6:return[2,this.__sendToCounterParty(n,l,d)]}})})},Xu.prototype.__resolveSender=function(o){return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return e=this.__resolveSenderId(o),n=o.senderOrganizationId||o.organizationId,e===this.host.currentUserId?[2,this.host.currentUser]:(n||ea.c.raise("senderOrganizationId","missing","When senderId is provided, senderOrganizationId or organizationId must also be provided"),[4,this.host.users.find(e,{organizationId:n})]);case 1:return(r=t.sent())||ea.c.raise("senderId","invalid","The provided senderId was not found"),r.isRoleBot||ea.c.raise("senderId","invalid","senderId must be either the current user or a role"),[4,this.host.roles.find(e,n)];case 2:return t.sent(),[2,r]}})})},Xu.prototype.__resolveSenderId=function(t){void 0===t&&(t={});var e=t.senderId;return e=e?(e=this._resolveModelId(e),this.host.roles.__resolveRoleId(e)):this.host.currentUserId,t.senderId=e},Xu.prototype.__resolveCounterPartyEntityAndOrganizationId=function(o,i){return void 0===i&&(i=null),Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return"string"==typeof o&&(o=this.host.roles.__resolveRoleId(o)),e=this._resolveEntity(o,Gi(gu,["conversation"])),n=i,e?[3,2]:this.host.conversations.looksLikeConversationHandle(o)?[4,this.host.conversations.find(o)]:[3,2];case 1:(r=t.sent())&&(e=r.counterParty,n=r.organizationId),t.label=2;case 2:return e?[3,4]:[4,this.__resolveRemoteCounterPartyEntity(o,n)];case 3:e=t.sent(),t.label=4;case 4:return e&&(e.organizationId&&"user"!==e.$entityType&&(n=e.organizationId),"conversation"===e.$entityType&&(e=e.counterParty)),[2,{counterParty:e,organizationId:n}]}})})},Xu.prototype.__resolveRemoteCounterPartyEntity=function(u,c){return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a=this;return qi(this,function(t){switch(t.label){case 0:e=null,u=this.host.roles.__resolveRoleId(u),n=ye.a.compact([function(){return Bi(a,void 0,void 0,function(){return qi(this,function(t){return[2,this.host.users.findOrCreate(u,{organizationId:c})]})})},function(){return Bi(a,void 0,void 0,function(){return qi(this,function(t){return[2,this.host.groups.find(u)]})})},function(){return Bi(a,void 0,void 0,function(){return qi(this,function(t){return[2,this.host.distributionLists.find(u)]})})}]),r=0,o=n,t.label=1;case 1:if(!(r<o.length))return[3,6];i=o[r],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,i()];case 3:return(e=t.sent())?[3,6]:[3,5];case 4:if((s=t.sent()).code!==Or.NotFoundError.CODE)throw s;return[3,5];case 5:return r++,[3,1];case 6:return[2,e]}})})},Xu.prototype.__sendToCounterParty=function(h,f,t){var p=t.organizationId,e=t.senderOrganizationId,v=void 0===e?p:e,n=t.recipientOrganizationId,y=void 0===n?v:n,g=Vi(t,["organizationId","senderOrganizationId","recipientOrganizationId"]);return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d;return qi(this,function(t){switch(t.label){case 0:e=h.$entityType,n=h.serverId,this.host.requireUser(),ea.c.oneOf("counterPartyType",e,["user","group","distributionList"]),ea.c.notEmpty("counterPartyId",n),v=this.__ensureOrganization(v),y=y||v,g=this.__normalizeSendOptions(g,{counterParty:h,senderOrganizationId:v}),r=this.__createNewMessage(h,f,vu({organizationId:p,senderOrganizationId:v,recipientOrganizationId:y},g)),this.host.events.deferEventQueue(),this.host.models.Message.inject(r),this.host.emit("message:sending",r),o=g.attachmentFiles,i=g.deleteOnRead,s=g.escalate,a=g.metadata,u=g.priority,c=g.ttl,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.host.api.messages.send({attachment:ye.a.head(o),body:f,counterPartyId:n,deleteOnRead:i,escalate:s,localId:r?r.id:be.a.v4(),metadata:a,priority:bo.toServer(u),recipientOrganizationId:y,senderOrganizationId:v,ttl:c})];case 2:return l=t.sent(),[4,this.__retrieveSentMessage(l,{instance:r})];case 3:return r=t.sent(),this.host.emit("message:sent",r),[3,5];case 4:return d=t.sent(),this.logger.error("error while sending message",d),r.senderStatus=Eo.FAILED,this.host.models.Message.inject(r),[3,5];case 5:return this.host.events.resumeEventQueue(),[2,r]}})})},Xu.prototype.__createNewMessage=function(t,e,n){var r,o=n.conversationId,i=n.isForwarded,s=void 0!==i&&i,a=n.organizationId,u=n.senderOrganizationId,c=void 0===u?a:u,l=n.recipientOrganizationId,d=void 0===l?c:l,h=Vi(n,["conversationId","isForwarded","organizationId","senderOrganizationId","recipientOrganizationId"]),f=h.attachmentFiles,p=h.deleteOnRead,v=h.escalate,y=h.metadata,g=h.originalMetadata,m=h.priority,_=h.senderId,b=h.ttl,w=t.$entityType,I=t.serverId;this.host.requireUser(),ea.c.oneOf("counterPartyType",w,["user","group","distributionList"]),ea.c.notEmpty("counterPartyId",I),o&&(r=this.host.conversations.getById(o));var O=(r=r||this.host.conversations.ensureConversation(w,I,c)).isLive,E=this.__getNextSortNumber(c,{conversation:r}),T=_&&_!==this.host.currentUserId?_:void 0,S=e;"distributionList"===w&&(e="["+t.displayName+"]: "+e);var A=this.host.models.Message.createInstance({$synced:!1,body:e,conversationId:r.id,counterPartyId:I,counterPartyType:w,createdAt:new Date,currentSenderRoleId:T,deleteOnRead:p,id:be.a.v4(),inTimeline:O,isForwarded:s,isOutgoing:!0,messageType:So.USER_SENT,metadata:y,originalMetadata:g,priority:m,recipientOrganizationId:d,senderId:this.host.currentUserId,senderOrganizationId:c,senderStatus:Eo.SENDING,shouldEscalate:v,sortNumber:E,ttl:b});return A._originalBody=S,f&&(A.attachments=f.map(this.__generateAttachmentDescriptor)),"group"===w?A.groupId=I:"user"===w?A.recipientId=I:"distributionList"===w&&(A.distributionListId=I),this.config.condensedReplays||(A.markedRecipientStatus=Oo.READ),A},Xu.prototype.__normalizeSendOptions=function(t,e){var n=t.attachmentFile,r=t.attachmentFiles,o=t.deleteOnRead,i=t.escalate,s=t.metadata,a=t.originalMetadata,u=t.priority,c=t.senderId,l=t.ttl,d=e.counterParty,h=e.senderOrganizationId;s=this.__normalizeMetadata({metadata:s,organizationId:h,senderId:c}),r=Object(ea.d)(r||n),!ye.a.isEmpty(r)&&1<r.length&&ea.c.raise("attachmentFiles","invalid","currently only a single attachment is supported");var f=this.host.models.Organization.get(h);void 0===l&&(l=f?f.messageTimeToLive:-1),!o&&f&&(o=f.deleteOnRead);var p=d.groupType,v=d.p2pRecipient;return p===_o.ROLE_P2P&&v&&v.escalationPolicy&&v.escalationPolicy.alwaysEscalate&&(i=!0,u=bo.NORMAL),{attachmentFiles:r,deleteOnRead:o,escalate:i,metadata:s,originalMetadata:a,priority:u,senderId:c,ttl:l}},Xu.prototype.__ensureOrganization=function(t){return t||(this.host.config.defaultOrganizationId?this.host.config.defaultOrganizationId:void ea.c.raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)"))},Xu.prototype.__normalizeMetadata=function(t){var e=t.metadata,n=(t.organizationId,t.senderId);if(e=e||[],e=Object(ea.d)(e),n!==this.host.currentUserId){var r=this.host.roles.getById(n),o=r.roleTag;e.push({namespace:"tigertext:message:role:sender",payload:{token:n,display_name:r.displayName,tag_id:o?o.tagId:"",tag_color:o?o.color.replace("#","0x"):"",tag_name:o?o.name:""}})}return 0<e.length?e.map(function(t){return vu({mimetype:"application/json"},t)}):void 0},Xu.prototype.__getNextSortNumber=function(t,e){var n=(void 0===e?{}:e).conversation,r=this.host.models.Organization.get(t);r&&!n&&(n=r.conversations[0]);var o=r&&r.highestSortNumber||0,i=n&&n.lastBangMessageSortNumber||0;return Math.max(o,i)+1},Xu.prototype.previewMessage=function(t,e){void 0===e&&(e={});for(var n=this._resolveMessage(t),r={},o=0,i=Object.entries(n);o<i.length;o++){var s=i[o],a=s[0],u=s[1];Object(ea.k)(n,a)&&!yu.includes(a)&&(r[a]=u)}r=vu(vu(vu({},r),{id:be.a.v4(),conversationId:null}),e),this.__setForwardedMessageProperties({origMessage:n,organizationId:n.__organizationId,message:r});for(var c=this.host.models.Message.inject(r),l=0,d=n.statusesPerRecipient;l<d.length;l++){var h=d[l],f=h.userId||h.distributionListId,p=c.id+":"+f;this.host.models.MessageStatusPerRecipient.inject(vu(vu({},h),{id:p,messageId:c.id}))}return c},Xu.prototype.endPreviewMessage=function(t){var e=this._resolveMessage(t);if(e){for(var n=0,r=e.statusesPerRecipient;n<r.length;n++){var o=r[n];this.host.models.MessageStatusPerRecipient.eject(o)}this.host.models.Message.eject(e)}},Xu.prototype.sendToUser=function(f,p,v){return void 0===v&&(v={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h;return qi(this,function(t){switch(t.label){case 0:if(!this.host.config.condensedReplays)return[2,this.send(f,p,v)];if(e=v.organizationId,n=v.senderId,r=void 0===n?this.host.currentUserId:n,o=v.groupName,i=v.groupMetadata,!e)throw new Error("organizationId is required");return f=this._resolveModelIdWithTypes(f,"user"),(s=this._resolveEntity(f,"user"))&&s.profileByOrganizationId&&s.profileByOrganizationId[e]?[3,2]:[4,this.host.users.findOrCreate(f,{organizationId:e})];case 1:s=t.sent(),t.label=2;case 2:return[4,this.__resolveRoleBotId(r,e)];case 3:return a=t.sent(),u=a.isRole,c=a.roleBotId,u?[4,this.__prepareRoleP2PGroup(e,f,c,o,{groupMetadata:i})]:[3,5];case 4:return l=t.sent(),[2,this.sendToGroup(l,p,vu(vu({},v),{organizationId:e,senderId:r}))];case 5:if(d=s&&s.profileByOrganizationId[e],!(h=d&&d.conversationId))throw new Error("conversationId not found for p2p message");return this.host.conversations.getById(h)||this.host.models.Conversation.inject({counterPartyId:s.id,counterPartyType:s.$entityType,id:h,organizationId:e}),[2,this.sendToConversation(h,p,v)]}})})},Xu.prototype.sendToGroup=function(n,r,o){return void 0===o&&(o={}),Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:return this.config.condensedReplays?(n=this._resolveModelId(n),(e=this._resolveEntity(n,"group"))?[3,2]:[4,this.host.groups.find(n)]):[2,this.send(n,r,o)];case 1:e=t.sent(),t.label=2;case 2:if(!e||!e.conversationId)throw new Error("group conversationId not found");return this.host.conversations.getById(e.conversationId)||this.host.models.Conversation.inject({counterPartyId:e.id,counterPartyType:e.$entityType,id:e.conversationId,organizationId:e.organizationId}),[2,this.sendToConversation(e.conversationId,r,o)]}})})},Xu.prototype.sendToRole=function(l,d,h){return void 0===h&&(h={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c;return qi(this,function(t){switch(t.label){case 0:if(e=h.organizationId,n=h.senderId,r=void 0===n?this.host.currentUserId:n,o=h.groupMetadata,i=h.groupName,!this.host.config.condensedReplays)return[3,2];if(!e)throw new Error("organizationId is required");return[4,this.__resolveRoleBotId(l,e)];case 1:if(s=t.sent(),a=s.isRole,u=s.roleBotId,!a)throw new Error("recipient must be a role");l=u,t.label=2;case 2:return[4,this.__prepareRoleP2PGroup(e,l,r,i,{groupMetadata:o})];case 3:return c=t.sent(),[2,this.sendToGroup(c,d,vu(vu({},h),{organizationId:e,senderId:r}))]}})})},Xu.prototype.sendToPatient=function(c,l,d){return void 0===d&&(d={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u;return qi(this,function(t){switch(t.label){case 0:if(d.groupMetadata,e=d.organizationId,n=d.senderId,r=void 0===n?this.host.currentUserId:n,o=Vi(d,["groupMetadata","organizationId","senderId"]),d=vu(vu({},o),{organizationId:e,senderId:r}),this.host.config.condensedReplays&&!e)throw new Error("organizationId is required");if(i=c&&1===c.length?c[0]:c,!(a=this._resolveEntity(i,"user")))throw new Error("user could not be resolved");return s=a.isPatientContact?this.host.patients._createPatientContactGroupMetadata(a):this.host.patients._createPatientGroupMetadata(a),[4,this.host.groups.createPatientGroup({organizationId:e,recipientId:c,senderId:r,metadata:s})];case 1:return u=t.sent(),this.host.metadata.__injectMetadata(u.id,e,s),[2,this.sendToGroup(u,l,vu(vu({},d),{organizationId:e,senderId:r}))]}})})},Xu.prototype.__resolveRoleBotId=function(o,i){return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:o=this.host.roles.__resolveRoleId(o);try{n=this._resolveModelIdWithTypes(o,"role"),e=!!this._resolveEntity(n,"role")}catch(t){e=!1}return e?[3,3]:(r=this._resolveEntity(o,"user"))&&r.profileByOrganizationId&&r.profileByOrganizationId[i]?[3,2]:[4,this.host.users.find(o,{organizationId:i})];case 1:r=t.sent(),t.label=2;case 2:r&&r.isRoleBot&&(e=!0),t.label=3;case 3:return[2,{isRole:e,roleBotId:o}]}})})},Xu.prototype.sendToConversation=function(w,I,O){return void 0===O&&(O={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b;return qi(this,function(t){switch(t.label){case 0:if(!this.host.config.condensedReplays)return[2,this.send(w,I,O)];if(w=this._resolveModelIdWithTypes(w,"conversation"),!(e=this.host.conversations.getById(w)))throw new Or.NotFoundError(this.host.models.Conversation.name,w);return[4,this.__resolveSender(O)];case 1:return n=t.sent(),r=e.counterPartyId,o=e.counterPartyType,i=e.organizationId,s=this._resolveEntity(r,o),this.host.requireUser(),a=s.groupType,u=s.memberIds,a!==_o.FORUM||u&&u.includes(this.host.currentUserId)?[3,3]:[4,this.host.forums.join(s)];case 2:t.sent(),t.label=3;case 3:l=c=i,O=this.__normalizeSendOptions(O,{counterParty:s,senderOrganizationId:c,senderId:n.id}),d=this.__createNewMessage(s,I,vu({conversationId:w,organizationId:i,senderOrganizationId:c,recipientOrganizationId:l},O)),this.host.events.deferEventQueue(),this.host.models.Message.inject(d),this.host.emit("message:sending",d),h=O.attachmentFiles,f=O.deleteOnRead,p=O.escalate,v=O.metadata,y=O.priority,g=O.ttl,t.label=4;case 4:return t.trys.push([4,7,,8]),[4,this.host.api.messages.send({attachment:ye.a.head(h),body:I,conversationId:e.id,deleteOnRead:f,escalate:p,localId:d?d.id:be.a.v4(),metadata:v,priority:bo.toServer(y),senderOrganizationId:c,ttl:g})];case 5:return m=t.sent(),_=m.last_message?m.last_message:m,[4,this.__retrieveSentMessage(_,{instance:d})];case 6:return(d=t.sent()).unreadMessageCount&&(e.unreadCount=d.unreadMessageCount),d.unreadPriorityMessageCount&&(e.unreadPriorityCount=d.unreadPriorityMessageCount),e.lastMessage=d,e.highestSortNumber=d.sortNumber?d.sortNumber:this.__getNextSortNumber(c,{conversation:e}),e.isLive=!0,e.timeline.push(d),this.host.models.Conversation.inject(e),d.inTimeline=!0,this.host.models.Message.inject(d),this.host.emit("message:sent",d),[3,8];case 7:return b=t.sent(),this.logger.error("error while sending message",b),d.senderStatus=Eo.FAILED,this.host.models.Message.inject(d),[3,8];case 8:return this.host.events.resumeEventQueue(),[2,d]}})})},Xu.prototype.sendToDistributionList=function(r,o,i){return void 0===i&&(i={}),Bi(this,void 0,void 0,function(){var e,n;return qi(this,function(t){switch(t.label){case 0:return this.config.condensedReplays?(r=this._resolveModelIdWithTypes(r,"distributionList"),(e=this._resolveEntity(r,"distributionList"))?[3,2]:[4,this.host.distributionLists.find(r)]):[2,this.send(r,o,i)];case 1:e=t.sent(),t.label=2;case 2:if(!e||!e.conversationId)throw new Error("distributionList conversationId not found");return(n=this.host.conversations.getById(e.conversationId))||(n=this.host.models.Conversation.inject({counterPartyId:e.id,counterPartyType:e.$entityType,id:e.conversationId,organizationId:e.organizationId})),[2,this.sendToConversation(n.id,o,i)]}})})},Xu.prototype.sendToGroupOfUsers=function(r,o,t){void 0===t&&(t={});var i=t.groupMetadata,s=t.groupName,a=t.isTeamActivation,u=t.organizationId,c=t.senderId,l=Vi(t,["groupMetadata","groupName","isTeamActivation","organizationId","senderId"]);return Bi(this,void 0,void 0,function(){var e,n;return qi(this,function(t){switch(t.label){case 0:return[4,this.__prepareGroupForUsers(u,r,c,s,a,{groupMetadata:i})];case 1:return e=t.sent(),this.config.condensedReplays?(n=e.conversationId,[4,this.host.conversations.find(n)]):[3,3];case 2:return t.sent(),[2,this.sendToConversation(n,o,vu(vu({},l),{organizationId:u,senderId:c}))];case 3:return[2,this.sendToGroup(e,o,vu(vu({},l),{organizationId:u,senderId:c}))]}})})},Xu.prototype.__prepareGroupForUsers=function(t,e,n,r,o,i){var s=(void 0===i?{}:i).groupMetadata;return 0===e.length&&ea.c.raise("memberIds","required"),this.host.groups.create({isTeamActivation:o,memberIds:e,metadata:s,name:r,organizationId:t,senderId:n})},Xu.prototype.__prepareRoleP2PGroup=function(n,r,o,i,t){var s=(void 0===t?{}:t).groupMetadata;return Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:return(e=this.host.conversations.findLocalRoleP2PConversation(r,o))?[2,e.counterParty]:[4,this.host.roles.createP2PGroup({metadata:s,name:i,organizationId:n,recipientId:r,senderId:o})];case 1:return[2,t.sent()]}})})},Xu.prototype.recall=function(r){return Bi(this,void 0,void 0,function(){var e,n;return qi(this,function(t){switch(t.label){case 0:return this.host.requireUser(),e=Object(ea.d)(r).filter(Boolean),n=e.map(this.__recallSingle.bind(this)),[4,Promise.all(n)];case 1:return t.sent(),[2]}})})},Xu.prototype.__recallSingle=function(n){return Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveMessage(n)))return[3,4];if(e.senderId!==this.host.currentUserId)throw new Or.PermissionDeniedError(e,e.serverId,"recall");return!1!==e.$synced&&e.serverId?[3,1]:(this.host.models.Message.eject(e),[3,3]);case 1:return[4,this.host.api.messages.destroy(e.serverId)];case 2:t.sent(),this.host.models.Message.eject(e),t.label=3;case 3:return[3,6];case 4:return[4,this.host.api.messages.destroy(n)];case 5:t.sent(),t.label=6;case 6:return[2]}})})},Xu.prototype.retrySend=function(o){return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!(e=this._resolveMessage(o)))throw new Or.NotFoundError(this.host.models.Message.name,o);return n=e.isForwarded,e.senderStatus!==Eo.FAILED&&ea.c.raise("message","invalid","Message to retry must be in a FAILED senderStatus and sent from current user"),this.host.events.deferEventQueue(),e.senderStatus=Eo.RETRYING,this.host.models.Message.inject(e),this.host.emit("message:sending",e),n?[4,this.__retryApiForward(e)]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,this.__retryApiSend(e)];case 3:e=t.sent(),t.label=4;case 4:return this.config.condensedReplays&&(r=this.host.conversations.getById(e.conversationId),e.unreadMessageCount&&(r.unreadCount=e.unreadMessageCount),e.unreadPriorityMessageCount&&(r.unreadPriorityCount=e.unreadPriorityMessageCount),r.lastMessage=e,r.highestSortNumber=e.sortNumber,this.host.models.Conversation.inject(r)),this.host.events.resumeEventQueue(),[2,e]}})})},Xu.prototype.resend=function(m,t){var e=void 0===t?{}:t,_=e.priority,n=e.retrieveMessage,b=void 0!==n&&n,w=e.senderId;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g;return qi(this,function(t){switch(t.label){case 0:return e=this._resolveMessage(m),void 0===_&&(_=e.priority),void 0===w&&(w=e.senderId),n=e.attachments,r=e.body,o=e.conversationId,i=e.counterParty,s=e.counterPartyId,a=e.deleteOnRead,u=e.isForwarded,c=e.metadata,l=e.originalMessageId,d=e.recipientOrganizationId,h=e.ttl,u?this.config.condensedReplays?[2,this.forwardToConversation(l,o,{organizationId:d,priority:_})]:[2,this.forward(l,s,{organizationId:d,priority:_,retrieveMessage:b,senderId:w})]:[3,1];case 1:if(f=[],c=c.filter(function(t){return"tigertext:message:role:sender"!==t.namespace}),!n)return[3,5];p=0,v=n,t.label=2;case 2:return p<v.length?(y=v[p],[4,this._downloadAttachmentBlobAndUrl(m,y.id)]):[3,5];case 3:(g=t.sent().blob).name=y.name,f.push(g),t.label=4;case 4:return p++,[3,2];case 5:return this.config.condensedReplays?[2,this.sendToConversation(o,r,{attachmentFiles:f,deleteOnRead:a,organizationId:d,priority:_,metadata:c,senderId:w,ttl:h})]:[2,this.__sendToCounterParty(i,r,{attachmentFiles:f,deleteOnRead:a,organizationId:d,priority:_,senderId:w,metadata:c,ttl:h})]}})})},Xu.prototype.forwardToConversation=function(I,O,E){return void 0===E&&(E={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w;return qi(this,function(t){switch(t.label){case 0:if(!this.config.condensedReplays)return[2,this.forward(I,O,E)];if(e=E.metadata,n=void 0===e?[]:e,r=E.priority,o=E.senderId,i=void 0===o?this.host.currentUserId:o,!(s=this.host.conversations.getById(O)))throw new Error("conversation not found");if(this.host.requireUser(),!(a=this._resolveMessage(I)))throw new Or.NotFoundError(this.host.models.Message.name,I);if(u=a.attachments,c=a.body,!(l=a.serverId))throw new Error("original message was not sent");i=this.__resolveSenderId({senderId:i}),void 0===r&&(r=a.priority),d=s.counterPartyId,h=s.counterPartyType,f=s.organizationId,p=this._resolveEntity(d,h),v=f,y=ye.a.get(a,"originalMetadata"),g={metadata:n,priority:r,senderId:i,originalMetadata:y},g=this.__normalizeSendOptions(g,{counterParty:p,senderOrganizationId:v}),n=g.metadata,(m=this.__createNewMessage(p,c,vu({conversationId:O,organizationId:f,isForwarded:!0},g))).attachments=u,this.__setForwardedMessageProperties({origMessage:a,organizationId:f,message:m}),this.host.events.deferEventQueue(),this.host.models.Message.inject(m),this.host.emit("message:sending",m),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.host.api.messages.forward(l,null,{conversationId:O,localId:m.id,metadata:n,priority:bo.toServer(r)})];case 2:return _=t.sent(),[4,this.__retrieveSentMessage(_.message,{instance:m})];case 3:return(b=t.sent()).unreadMessageCount&&(s.unreadCount=b.unreadMessageCount),b.unreadPriorityMessageCount&&(s.unreadPriorityCount=b.unreadPriorityMessageCount),this.host.models.Conversation.inject(s),this.host.emit("message:sent",b),[3,5];case 4:return w=t.sent(),this.logger.error("error while forwarding message",w),m.senderStatus=Eo.FAILED,this.host.models.Message.inject(m),[3,5];case 5:return this.host.events.resumeEventQueue(),[2,m]}})})},Xu.prototype.forwardToUser=function(v,y){for(var g=[],t=2;t<arguments.length;t++)g[t-2]=arguments[t];return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p;return qi(this,function(t){switch(t.label){case 0:if(!this.config.condensedReplays)return[2,this.forward.apply(this,Gi([v,y],g))];if(e=g[0],r=(n=void 0===e?{}:e).organizationId,o=n.senderId,i=void 0===o?this.host.currentUserId:o,s=n.groupName,a=n.groupMetadata,!r)throw new Error("organizationId is required");return y=this._resolveModelIdWithTypes(y,"user"),(u=this._resolveEntity(y,"user"))&&u.profileByOrganizationId&&u.profileByOrganizationId[r]?[3,2]:[4,this.host.users.find(y,{organizationId:r})];case 1:u=t.sent(),t.label=2;case 2:return[4,this.__resolveRoleBotId(i,r)];case 3:return c=t.sent(),l=c.isRole,d=c.roleBotId,l?[4,this.__prepareRoleP2PGroup(r,y,d,s,{groupMetadata:a})]:[3,5];case 4:return h=t.sent(),[2,this.forwardToGroup(v,h,vu(vu({},n),{organizationId:r,senderId:i}))];case 5:if(f=u&&u.profileByOrganizationId[r],!(p=f&&f.conversationId))throw new Error("conversationId not found for p2p message");return this.host.conversations.getById(p)||this.host.models.Conversation.inject({counterPartyId:u.id,counterPartyType:u.$entityType,id:p,organizationId:r}),[2,this.forwardToConversation.apply(this,Gi([v,p],g))]}})})},Xu.prototype.forwardToGroup=function(n,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];return Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:return this.config.condensedReplays?(r=this._resolveModelId(r),(e=this._resolveEntity(r,"group"))?[3,2]:[4,this.host.groups.find(r)]):[2,this.forward.apply(this,Gi([n,r],o))];case 1:e=t.sent(),t.label=2;case 2:if(!e||!e.conversationId)throw new Error("group "+r+" not found");return this.host.conversations.getById(e.conversationId)||this.host.models.Conversation.inject({counterPartyId:e.id,counterPartyType:e.$entityType,id:e.conversationId,organizationId:e.organizationId}),[2,this.forwardToConversation.apply(this,Gi([n,e.conversationId],o))]}})})},Xu.prototype.forwardToDistributionList=function(n,r,o){return void 0===o&&(o={}),Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:return this.config.condensedReplays?(r=this._resolveModelId(r),(e=this._resolveEntity(r,"distributionList"))?[3,2]:[4,this.host.distributionLists.find(r)]):[2,this.forward(n,r,o)];case 1:e=t.sent(),t.label=2;case 2:if(!e||!e.conversationId)throw new Error("distributionList "+r+" not found");return this.host.conversations.getById(e.conversationId)||this.host.models.Conversation.inject({counterPartyId:e.id,counterPartyType:e.$entityType,id:e.conversationId,organizationId:e.organizationId}),[2,this.forwardToConversation(n,e.conversationId,o)]}})})},Xu.prototype.forwardToGroupOfUsers=function(r,o,t){void 0===t&&(t={});var i=t.groupMetadata,s=t.groupName,a=t.organizationId,u=t.senderId,c=Vi(t,["groupMetadata","groupName","organizationId","senderId"]);return Bi(this,void 0,void 0,function(){var e,n;return qi(this,function(t){switch(t.label){case 0:return[4,this.__prepareGroupForUsers(a,o,u,s,!1,{groupMetadata:i})];case 1:return e=t.sent(),this.config.condensedReplays?(n=e.conversationId,[4,this.host.conversations.find(n)]):[3,3];case 2:return t.sent(),[2,this.forwardToConversation(r,n,vu(vu({},c),{organizationId:a,senderId:u}))];case 3:return[2,this.forwardToGroup(r,e,vu(vu({},c),{organizationId:a,senderId:u}))]}})})},Xu.prototype.forwardToRole=function(l,d,h){return void 0===h&&(h={}),Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c;return qi(this,function(t){switch(t.label){case 0:if(e=h.organizationId,n=h.senderId,r=void 0===n?this.host.currentUserId:n,o=h.groupMetadata,i=h.groupName,!this.host.config.condensedReplays)return[3,2];if(!e)throw new Error("organizationId is required");return[4,this.__resolveRoleBotId(d,e)];case 1:if(s=t.sent(),a=s.isRole,u=s.roleBotId,!a)throw new Error("recipient must be a role");d=u,t.label=2;case 2:return[4,this.__prepareRoleP2PGroup(e,d,r,i,{groupMetadata:o})];case 3:return c=t.sent(),[2,this.forwardToGroup(l,c.id,vu(vu({},h),{organizationId:e,senderId:r}))]}})})},Xu.prototype.forward=function(b,w,t){var e=void 0===t?{}:t,I=e.organizationId,n=e.senderOrganizationId,O=void 0===n?I:n,r=e.recipientOrganizationId,E=void 0===r?O:r,T=e.groupMetadata,S=e.groupName,o=e.metadata,A=void 0===o?[]:o,C=(e.preferExistingGroup,e.priority),i=e.retrieveMessage,R=void 0!==i&&i,s=e.senderId,P=void 0===s?this.host.currentUserId:s;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_=this;return qi(this,function(t){switch(t.label){case 0:if(this.config.condensedReplays)throw new Error("the forward() method has been deprecated in favor of forwardToUser(), forwardToGroup(), etc.");if(this.host.requireUser(),!(e=this._resolveMessage(b)))throw new Or.NotFoundError(this.host.models.Message.name,b);if(n=e.attachments,r=e.body,!(o=e.serverId))throw new Error("original message was not sent");return P=this.__resolveSenderId({senderId:P}),Array.isArray(w)?(i=w.map(function(t){return _._resolveModelIdWithTypes(t,["user","role"])}),[4,this.__prepareGroupForUsers(I,i,P,S,!1,{groupMetadata:T})]):[3,2];case 1:f=t.sent(),w=f.id,t.label=2;case 2:return void 0===C&&(C=e.priority),[4,this.__resolveCounterPartyEntityAndOrganizationId(w,O)];case 3:return s=t.sent(),a=s.counterParty,(u=s.organizationId)&&(O=E=u),E=E||O,a&&(w=a.serverId),[4,this.__resolveSender({organizationId:I,senderId:P,senderOrganizationId:O})];case 4:return c=t.sent(),l=function(t){return t&&"user"===t.$entityType},d=function(t){return l(t)&&t.isRoleBot},h=ye.a.get(e,"originalMetadata"),d(a)||l(a)&&d(c)?[4,this.__prepareRoleP2PGroup(I,a.id,P,S,{groupMetadata:T})]:[3,6];case 5:f=t.sent(),w=(a=f).id,t.label=6;case 6:ea.c.notEmpty("entityId",w,"entityId not found"),p={metadata:A,priority:C,senderId:P,originalMetadata:h},p=this.__normalizeSendOptions(p,{counterParty:a,senderOrganizationId:O}),A=p.metadata,(v=this.__createNewMessage(a,r,vu({organizationId:I,senderOrganizationId:O,recipientOrganizationId:E,isForwarded:!0},p))).attachments=n,this.__setForwardedMessageProperties({origMessage:e,organizationId:I,message:v}),this.host.events.deferEventQueue(),this.host.models.Message.inject(v),this.host.emit("message:sending",v),t.label=7;case 7:return t.trys.push([7,12,,13]),[4,this.host.api.messages.forward(o,w,{localId:v.id,metadata:A,priority:bo.toServer(C),recipientOrganizationId:E,senderOrganizationId:O})];case 8:return y=t.sent(),g=y.message_id,R?[4,this.find(g,{instance:v,replace:!0})]:[3,10];case 9:return v=t.sent(),[3,11];case 10:v.senderStatus=Eo.SENT,v.serverId=g,v.$synced=void 0,this.host.models.Message.inject(v),t.label=11;case 11:return this.host.emit("message:sent",v),[3,13];case 12:return m=t.sent(),this.logger.error("error while forwarding message",m),v.senderStatus=Eo.FAILED,this.host.models.Message.inject(v),[3,13];case 13:return this.host.events.resumeEventQueue(),[2,v]}})})},Xu.prototype.__setForwardedMessageProperties=function(t){var e=t.origMessage,n=t.organizationId,r=t.message,o=e.createdAt,i=e.currentSenderRole,s=e.originalForwardedMessageCreatedAt,a=e.originalMessageId,u=e.originalSender,c=e.originalSenderRole,l=e.sender,d=e.senderRole,h=e.serverId,f=e.subType;return r.originalForwardedMessageCreatedAt||(r.originalForwardedMessageCreatedAt=s||o),r.originalMessageId||(r.originalMessageId=a||h),r.originalSender?r.originalSender=u:l&&(r.originalSender={displayName:l.displayName,id:l.id,organizationId:n}),r.originalSenderRole||(f===To.ROLE_AWAY_NOTIFICATION&&i?r.originalSenderRole={$entityType:"role",botUserId:i.botUserId,displayName:i.displayName,id:i.id,organizationId:n}:c?r.originalSenderRole=vu({},c):d&&(r.originalSenderRole=vu({},d))),r.subType||(r.subType=f),r},Xu.prototype.reactToMessageStatusEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToMessageStatusEventCR({data:e});else{var n=(e=Object(ea.l)(e)).client_id,r=e.is_recalled,o=this.host.models.Message.get(n);o&&(r?this.host.models.Message.eject(o):(this.__injectMessageStatus(o,e),Io[o.markedRecipientStatus]<Io[Oo.DELIVERED]&&this.markAsReceived(o)))}},Xu.prototype.reactToMessageStatusEventCR=function(t){var e=t.data,n=(e=Object(ea.l)(e)).client_id,r=e.is_recalled,o=e.is_unread,i=this.host.models.Message.get(n);if(i){e.conversation_id||(e.conversation_id=i.conversationId);var s=this.host.conversations.getById(e.conversation_id);s&&(r?this.host.models.Message.eject(i):(i.shouldEnsureRecipientStatus=!0,void 0!==o&&(i.isUnread=o),this.host.models.Message.inject(i),s._markingAsReadSortNumber&&i.sortNumber>=s._markingAsReadSortNumber&&this.host.conversations.__clearOptimisticStatus([s])),this.host.conversations.__injectConversation(e))}},Xu.prototype.__injectMessageStatus=function(t,e){if(t){var n=e.account_id||e.accountId,r={createdAt:e.timestamp||e.createdAt,id:t.id+":"+n,messageId:t.id,status:Oo.resolve(e.status)};return"distributionList"===t.counterPartyType?r.distributionListId=n:(r.userId=n,this.host.models.User.ensureEntity(n,{onlyPlaceholder:!0})),this.host.models.MessageStatusPerRecipient.inject(r)}},Xu.prototype._findCR=function(a,t){var e=void 0===t?{}:t,n=e.includeCounterParty,u=void 0===n||n,r=e.includeStatuses,c=void 0===r||r,l=e.instance,o=e.replace,d=void 0!==o&&o;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s;return qi(this,function(t){switch(t.label){case 0:return this.host.requireUser(),[4,this.host.api.messages.find(a)];case 1:return(e=t.sent())&&(n=e.message)?(n.conversationId=e.conversation_id,l&&d&&this.__setDefaultAttributes(n,{instance:l}),u?(r=n.recipient_token,o=n.sender_organization,[4,this.__lookupCounterParty(r,{organizationId:o})]):[3,3]):[2,null];case 2:if(!(i=t.sent()))return[2,null];n.counterParty=i,n.conversationHandle||(n.conversationHandle=this.host.conversations.getConversationKey(i.$entityType,i.serverId,o)),t.label=3;case 3:return(s=d?this.host.models.Message.replaceExisting(n,{instance:l}):this.host.models.Message.inject(n)).$synced=void 0,c?[4,this.findRecipientStatus(s,{queue:!1})]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2,s]}})})},Xu.prototype.find=function(s,t){var e=void 0===t?{}:t,n=e.includeCounterParty,a=void 0===n||n,r=e.includeStatuses,u=void 0===r||r,c=e.instance,o=e.replace,l=void 0!==o&&o;return Bi(this,void 0,void 0,function(){var e,n,r,o,i;return qi(this,function(t){switch(t.label){case 0:return this.config.condensedReplays?[4,this._findCR(s,{includeCounterParty:a,includeStatuses:u,instance:c,replace:l})]:[3,2];case 1:return[2,t.sent()];case 2:return this.host.requireUser(),[4,this.host.api.messages.find(s)];case 3:return(e=t.sent())?(c&&l&&this.__setDefaultAttributes(e,{instance:c}),a?(n=e.recipient_token,r=e.sender_organization,[4,this.__lookupCounterParty(n,{organizationId:r})]):[3,5]):[2,null];case 4:if(!(o=t.sent()))return[2,null];e.counterParty=o,this.config.condensedReplays||e.conversationId||(e.conversationId=this.host.conversations.getConversationKey(o.$entityType,o.serverId,r)),t.label=5;case 5:return(i=l?this.host.models.Message.replaceExisting(e,{instance:c}):this.host.models.Message.inject(e)).$synced=void 0,u?[4,this.findRecipientStatus(i,{queue:!1})]:[3,7];case 6:t.sent(),t.label=7;case 7:return[2,i]}})})},Xu.prototype.findAttachment=function(o,i){return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return e=this._resolveMessage(o),n=!1,e?[3,2]:(n=!0,[4,this.find(o,{includeStatuses:!1,includeCounterParty:!1})]);case 1:e=t.sent(),t.label=2;case 2:return e?!(r=this.__getMessageAttachment(e,i))||r.isLocal||n||"name"in r?[3,4]:[4,this.find(o,{includeStatuses:!1,includeCounterParty:!1})]:[2,null];case 3:e=t.sent(),(r=this.__getMessageAttachment(e,i)).name||(r.name=null),t.label=4;case 4:return[2,r]}})})},Xu.prototype.getById=function(t){return this.host.models.Message.get(t)},Xu.prototype.getMultiById=function(t){return this.host.models.Message.getMulti(t)},Xu.prototype.__lookupCounterParty=function(d,t){var h=(void 0===t?{}:t).organizationId;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l=this;return qi(this,function(t){switch(t.label){case 0:for(e=[{model:this.host.models.User,finder:function(){return l.host.users.find(d,{organizationId:h})}},{model:this.host.models.Group,finder:function(){return l.host.groups.find(d)}},{model:this.host.models.DistributionList,finder:function(){return l.host.distributionLists.find(d)}}],n=0,r=e;n<r.length;n++)if(o=r[n].model,u=o.get(d))return[2,u];i=0,s=e,t.label=1;case 1:if(!(i<s.length))return[3,6];a=s[i].finder,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,a()];case 3:return(u=t.sent())?[2,u]:[3,5];case 4:if((c=t.sent()).code!==Or.NotFoundError.CODE)throw c;return[3,5];case 5:return i++,[3,1];case 6:return[2,null]}})})},Xu.prototype._isMessageOutgoing=function(t){var e=t.counterParty,n=t.counterPartyType,r=t.currentSenderRole,o=t.senderId;if(!o)return!1;for(var i=this.host,s=i.currentUser,a=i.currentUserId,u=e||{},c=u.groupType,l=u.members,d=u.p2pRecipient,h=u.p2pSender,f="group"===n&&c===_o.ROLE_P2P,p=s.roles,v=[a],y=[],g=0,m=0,_=p;m<_.length;m++){var b=_[m].botUserId;v.push(b)}if(l){for(var w=0,I=l;w<I.length;w++){var O=I[w],E=O.botRole;O.isRoleBot&&E&&!y.includes(E)&&y.push(E)}f&&(h&&(E=h.botRole,h.isRoleBot&&E&&!y.includes(E)&&y.push(E)),d&&(E=d.botRole,d.isRoleBot&&E&&!y.includes(E)&&y.push(E)));for(var T=0,S=y;T<S.length;T++){var A=S[T];p.includes(A)&&g++}}return f?!(d===s&&o===a&&!r)&&(!(!h||o!==h.id&&o!==h.botUserId)||p.includes(r)&&(1===g||r===h)):"distributionList"===n||p.includes(r)||v.includes(o)},Xu.prototype._setRecipientStatus=function(t){for(var e,n,r=t.__organizationId,o=t._markingAsStatus,i=t.conversation,s=t.counterParty,a=t.counterPartyType,u=t.createdAt,c=t.deleteOnRead,l=t.expiresAt,d=t.isOutgoing,h=t.messageType,f=t.senderId,p=t.statusesPerRecipient,v=t.ttl,y=this.host,g=y.currentUser,m=y.currentUserId,_=s||{},b=_.groupType,w=_.p2pRecipient,I=[],O=[],E=[m],T=0,S=g.roles;T<S.length;T++){var A=S[T];A.organizationId===r&&E.push(A.botUserId)}for(var C=f&&E.includes(f),R=[],P=Oo.READ,j=Oo.NEW,x=b===_o.ROLE_P2P&&w===g,M=0,k=p;M<k.length;M++){var N=(L=k[M]).userId;(q=E.includes(N))&&R.push(N)}for(var z=1<R.length,D=0,U=p;D<U.length;D++){var L,F=(L=U[D]).distributionListId,B=(N=L.userId,L.status),q=E.includes(N);x||!(!d&&q)&&!(d&&(F||!q))||z&&N===m||O.push(B),(x||C&&E.includes(f))&&(Io[j]<Io[B]&&(j=B),Io[j]<Io[Oo.READ]&&(j=Oo.READ)),!q||x||C&&f===N||I.push(B)}if(0<O.length){n=O[0];for(var V=1;V<O.length;V++){var G=O[V];0===R.length?Io[n]<Io[G]&&(n=G):Io[n]>Io[G]&&(n=G)}}else n=j;if(e=P,0<I.length)for(var H=0,W=I;H<W.length;H++)G=W[H],Io[e]>Io[G]&&(e=G);if(this.config.condensedReplays&&i&&i._markingAsRead&&i._markingAsReadSortNumber>=t.sortNumber&&(n=Oo.READ),o){var Y=!1;Io[n]<Io[o]&&(n=o,Y=!0),!this.config.condensedReplays&&d&&Io[e]<Io[o]&&(e=o,Y=!0),Y||this.config.condensedReplays||(t._markingAsStatus=void 0)}if(c&&"user"===a&&n===Oo.READ){var K=Date.now()+6e4;(!l||K<l)&&(l=K)}else l||void 0===v||(l=u.getTime()+60*v*1e3);t.expiresAt=l,this.config.condensedReplays?t.isUnread=!t.isEphemeral&&t.isUnread:(t.isUnread=!t.isEphemeral&&h===So.USER_SENT&&!d&&-1===this.compareRecipientStatus(n,Oo.READ),t.markedRecipientStatus=e),t.ttl=v},Xu.prototype.compareRecipientStatus=function(t,e){return Oo.isValid(t)&&(t=Io[t]),Oo.isValid(e)&&(e=Io[e]),e<t?1:t===e?0:t<e?-1:void 0},Xu.prototype.__getMessageAttachment=function(t,e){var n=this._resolveMessage(t);return n?(e=e.toString(),n.attachments?ye.a.find(n.attachments,{id:e}):null):null},Xu.prototype.__getAttachmentPath=function(t,e){return"/"+this.host.api.messages.getVersion().version+"/message/"+t+"/attachment/"+e},Xu.prototype.downloadAttachmentUrl=function(t,e){return this._downloadAttachmentBlobAndUrl(t,e).then(function(t){return t.url})},Xu.prototype.downloadAttachmentBlobAndUrl=function(t,e){return this._downloadAttachmentBlobAndUrl(t,e)},Xu.prototype.downloadAttachmentUrlWithToken=function(t,e){return this._downloadAttachmentBlobAndUrlWithToken(t,e).then(function(t){return t.url})},Xu.prototype.downloadAttachment=function(i,s,t){var a=(void 0===t?{}:t).fileName;return Bi(this,void 0,void 0,function(){var e,n,r,o;return qi(this,function(t){switch(t.label){case 0:return e=this._resolveMessage(i),n=void 0,(r=this.__getMessageAttachment(i,s))&&r.isLocal?(n=r.localFile,[3,3]):[3,1];case 1:return[4,this._downloadAttachmentBlobAndUrl(e.serverId,s)];case 2:n=t.sent().blob,t.label=3;case 3:return(a=a||r.name)||(a="Attachment",e.sender.$placeholder||(a+=" from "+e.sender.displayName),a+=" at "+ba()(e.createdAt).format("YYYY-MM-DD h-mma"),(o=function(r){var t=r.provideDefault,e=void 0!==t&&t;return function(){var t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(r,["provideDefault"]).mime,e=Object(Xo.getMimeEntryByContentType)(t);if(e){var n=e[0];return{ext:n="."+n,mime:t}}}()||(e?{ext:".bin",mime:"application/octet-stream"}:void 0)}({mime:r.contentType}))&&(a+=o.ext)),[4,Object(fu.downloadFile)({attachmentContentType:r.contentType,blob:n,fileName:a})];case 4:return t.sent(),[3,6];case 5:Or.TargetNotSupportedError.raise(),t.label=6;case 6:return[2]}})})},Xu.prototype._downloadAttachmentBlobAndUrl=function(o,i){return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return i=i.toString(),e=this._resolveMessage(o),[4,this.findAttachment(o,i)];case 1:if(!(n=t.sent()))throw new Or.NotFoundError("MessageAttachment",e.serverId+":"+i);return n.isLocal&&n.localFile instanceof Blob?[4,n.localPathPromise]:[3,3];case 2:return t.sent(),[2,{blob:n.localFile,url:URL.createObjectURL(n.localFile)}];case 3:return r=this.__getAttachmentPath(e.serverId,i),[2,this.httpClient.downloadFileBlobAndUrl(r)];case 4:return[3,6];case 5:Or.TargetNotSupportedError.raise(),t.label=6;case 6:return[2]}})})},Xu.prototype._downloadAttachmentBlobAndUrlWithToken=function(i,s){return Bi(this,void 0,void 0,function(){var e,n,r,o;return qi(this,function(t){switch(t.label){case 0:return s=s.toString(),e=this._resolveMessage(i),[4,this.findAttachment(i,s)];case 1:if(!(n=t.sent()))throw new Or.NotFoundError("MessageAttachment",e.serverId+":"+s);return n.isLocal&&n.localFile instanceof Blob?[4,n.localPathPromise]:[3,3];case 2:return r=t.sent(),[2,{blob:n.localFile,url:r}];case 3:return[4,this.getAttachmentUrlWithToken(e.serverId,s)];case 4:return o=t.sent(),[2,this.httpClient.downloadFileBlobAndUrl(o)];case 5:return[3,7];case 6:Or.TargetNotSupportedError.raise(),t.label=7;case 7:return[2]}})})},Xu.prototype.downloadAttachmentToFile=function(t,r,o){return Bi(this,void 0,void 0,function(){var e,n;return qi(this,function(t){switch(t.label){case 0:return[3,2];case 1:if(!(e=t.sent()))throw new Or.NotFoundError("MessageAttachment",(void 0).serverId+":"+r);if(/(\/|\\)$/.test(o)){if(!e.name)throw new Error("missing file name in downloadAttachmentToFile(..., dest)");o+=e.name}return n=this.__getAttachmentPath((void 0).serverId,r),[2,this.httpClient.downloadToFile(n,o)];case 2:Or.TargetNotSupportedError.raise(),t.label=3;case 3:return[2]}})})},Xu.prototype.getMessageCount=function(){return this.host.models.Message.getAll().length},Xu.prototype.getTotalUnreadCount=function(){var t=this.host.models.Product.getAll()[0];return t?t.unreadCount:0},Xu.prototype.getTotalUnreadPriorityCount=function(){var t=this.host.models.Product.getAll()[0];return t?t.unreadPriorityCount:0},Xu.prototype.markAsRead=function(s,t){var e=void 0===t?{}:t,n=e.localOnly,a=void 0!==n&&n,r=e.queue,u=void 0===r?this.host.currentlyServingOfflineMessages:r;return Bi(this,void 0,void 0,function(){var e,n,r,o,i;return qi(this,function(t){if(s=ea.e.call(s).map(this._resolveModelId),0===(e=ya.a.call(s)).length)return[2];if(this.config.condensedReplays||!a)return u?[2,this.__queueSetMessageStatuses({readIds:e})]:[2,this.__setMessagesStatus({readIds:e})];for(n=this.host.models.Message.getMulti(e),r=0,o=n;r<o.length;r++)(i=o[r])&&(i._markingAsStatus=Oo.READ,this.host.models.Message.inject(i));return[2]})})},Xu.prototype.markAsDelivered=function(n,r){return void 0===r&&(r={}),Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){return r=ye.a.defaults(r,{queue:this.host.currentlyServingOfflineMessages}),n=ea.e.call(n).map(this._resolveModelId),0===(e=ya.a.call(n)).length?[2]:r.queue?[2,this.__queueSetMessageStatuses({deliveredIds:e})]:[2,this.__setMessagesStatus({deliveredIds:e})]})})},Xu.prototype.markAsReceived=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bi(this,void 0,void 0,function(){return qi(this,function(t){return[2,this.markAsDelivered.apply(this,e)]})})},Xu.prototype.__queueSetMessageStatuses=function(t){var n=t.deliveredIds,r=t.readIds;return Bi(this,void 0,void 0,function(){var e;return qi(this,function(t){return e=this._queuedSetMessageStatuses,n&&(e.deliveredIds=ye.a.union(e.deliveredIds,n)),r&&(e.readIds=ye.a.union(e.readIds,r)),e.deliveredIds.length+e.readIds.length>=this.config.flushSetMessageStatusMaxCount?(this.logger.log("reached "+this.config.flushSetMessageStatusMaxCount+" -- flushing"),[2,this.__flushSetMessageStatusesQueue()]):(this._throttled_flushSetMessageStatusesQueue(),[2])})})},Xu.prototype.__setMessagesStatus=function(t){var e=t.deliveredIds,E=void 0===e?[]:e,n=t.readIds,T=void 0===n?[]:n;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O;return qi(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),E=E.map(this._resolveModelId),T=T.map(this._resolveModelId),e=ya.a.call(E),n=ya.a.call(T),e=this.config.condensedReplays?ye.a.difference(e,n):(r=this.host.models.Message.getMulti(e).filter(function(t){return t&&Io[t.markedRecipientStatus]>=Io[Oo.DELIVERED]}),o=r.map(function(t){return t.id}),i=this.host.models.Message.getMulti(n).filter(function(t){return t&&Io[t.markedRecipientStatus]>=Io[Oo.READ]}),s=i.map(function(t){return t.id}),n=ye.a.difference(n,s),ye.a.difference(e,n,o)),a={},0<e.length&&(a.delivered=e),0<n.length)for(a.read=n,b=this.host.models.Message.getMulti(n),u=0,c=b;u<c.length;u++)(O=c[u])&&(O._markingAsStatus=Oo.READ,this.host.models.Message.inject(O));if(0===Object.keys(a).length)return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.messages.updateRecipientStatusMulti(a)];case 2:if(l=t.sent(),this.config.condensedReplays)for(d=0,h=Object.entries(l);d<h.length;d++)f=h[d],p=f[0],v=f[1],y=v.unread_message_count,g=v.unread_priority_message_count,(m=this.host.models.Conversation.get(p))&&(m.unreadMessageCount=y,m.unreadPriorityMessageCount=g,this.host.models.Conversation.inject(m));return[3,4];case 3:for(_=t.sent(),b=this.host.models.Message.getMulti(n),w=0,I=b;w<I.length;w++)(O=I[w])&&O._markingAsStatus&&(O._markingAsStatus=void 0,this.host.models.Message.inject(O));return[2,Promise.reject(_)];case 4:return[2,!0]}})})},Xu.prototype.setMessageTTLInMinutes=function(t,e){var n=this._resolveMessage(t);if(n){var r=ba()().add(e,"minute").toDate().getTime();this.host.models.Message.inject({id:n.id,ttl:e,expiresAt:r})}},Xu.prototype._clearOptimisticMarkAsReadState=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var e=0,n=this.host.organizations.getAll();e<n.length;e++)for(var r=n[e].__markingAsReadConversations,o=!1;!o&&0<r.length;){var i=r[0],s=this.host.conversations.getById(i.id);if(!s)return;s._markingAsReadExpiration<t?(s._markingAsRead=!1,s._markingAsReadSortNumber=null,s._markingAsReadExpiration=null,this.host.models.Conversation.inject(s),this.host.conversations.find(s.id,{ensureEntities:!1})):o=!0}},Xu.prototype.ensureRecipientStatus=function(d,t){var e=void 0===t?{}:t,n=e.includeUsers,h=void 0===n||n,r=e.queue,f=void 0===r||r;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l;return qi(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),d=this._resolveModelId(d),!(e=this._resolveMessage(d)))return[2,null];if(n=e.counterPartyType,r=e.senderStatus,o=e.shouldEnsureRecipientStatus,i=e.statusesPerRecipient,r===Eo.SENDING)return[2,null];if("distributionList"===n)return[2,null];if(!o&&0<i.length){if(s=!1,h)for(a=0,u=i;a<u.length;a++)u[a].user||(s=!0);if(!s)return[2,i]}return f?[4,this.__queueFindRecipientStatuses([{id:d,includeUsers:h}])]:[3,2];case 1:return l=t.sent(),c=l[0],[3,4];case 2:return[4,this.__findRecipientStatus(d,{includeUsers:h})];case 3:c=t.sent(),t.label=4;case 4:return[2,c]}})})},Xu.prototype.findRecipientStatus=function(o,t){var e=void 0===t?{}:t,n=e.includeUsers,i=void 0!==n&&n,r=e.queue,s=void 0===r||r;return Bi(this,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return this.host.requireUser(),(e=this._resolveMessage(o))?e.senderStatus===Eo.SENDING||"distributionList"===e.counterPartyType?[2,null]:(o=this._resolveModelId(o),s?[4,this.__queueFindRecipientStatuses([{id:o,includeUsers:i}])]:[3,2]):[2,null];case 1:return r=t.sent(),n=r[0],[3,4];case 2:return[4,this.__findRecipientStatus(o,{includeUsers:i})];case 3:n=t.sent(),t.label=4;case 4:return[2,n]}})})},Xu.prototype.ensureRecipientStatusMulti=function(b,t){var e=void 0===t?{}:t,n=e.includeUsers,w=void 0===n||n,r=e.queue,I=void 0===r||r;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_;return qi(this,function(t){switch(t.label){case 0:for(b=ea.e.call(b).map(this._resolveModelId),e=ya.a.call(b),n=[],r={},o=0,i=e;o<i.length;o++){if(_=i[o],p={id:_,includeUsers:w},s=this._resolveMessage(_),a=!0,s&&(u=s.shouldEnsureRecipientStatus,c=s.statusesPerRecipient,!u&&0<c.length&&(a=!1,w)))for(l=0,d=c;l<d.length;l++)d[l].user||(a=!0);a?n.push(p):r[p.id]=s.statusesPerRecipient}return 0===n.length?[2]:I?[4,this.__queueFindRecipientStatuses(n)]:[3,2];case 1:return h=t.sent(),[3,4];case 2:return[4,this.__findRecipientStatusMulti(n)];case 3:h=t.sent(),t.label=4;case 4:if(h)for(f=0;f<n.length;f++)h.length>f&&(p=n[f],v=h[f],r[p.id]=v);for(y=[],g=0,m=e;g<m.length;g++)_=m[g],y.push(r[_]);return[2,y]}})})},Xu.prototype.findRecipientStatusMulti=function(a,t){var e=void 0===t?{}:t,n=e.includeUsers,u=void 0!==n&&n,r=e.queue,c=void 0!==r&&r;return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s;return qi(this,function(t){for(a=ea.e.call(a).map(this._resolveModelId),e=ya.a.call(a),n=[],r=0,o=e;r<o.length;r++)i=o[r],s={id:i,includeUsers:u},n.push(s);return 0===n.length?[2]:c?[2,this.__queueFindRecipientStatuses(n)]:[2,this.__findRecipientStatusMulti(n)]})})},Xu.prototype.__queueFindRecipientStatuses=function(a){return Bi(this,void 0,void 0,function(){var u,e,c,n,r,o,i,s;return qi(this,function(t){switch(t.label){case 0:for(u=[],e=function(t,e){var n,r,o=!0;u.push(new Promise(function(t,e){n=t,r=e}));for(var i=0,s=c._queuedFindRecipientStatuses;i<s.length;i++){var a=s[i];if(t===a.id){a.includeUsers=a.includeUsers||e,a.onCompletes.push(n),a.onErrors.push(r),o=!1;break}}o&&c._queuedFindRecipientStatuses.push({id:t,includeUsers:e,onCompletes:[n],onErrors:[r]})},c=this,n=0,r=a;n<r.length;n++)o=r[n],i=o.id,s=o.includeUsers,e(i,s);return this._queuedFindRecipientStatuses.length>=this.config.flushFindRecipientStatusMaxCount?(this.logger.log("reached "+this.config.flushFindRecipientStatusMaxCount+" -- flushing"),this.__flushFindRecipientStatusesQueue()):0<this._queuedFindRecipientStatuses.length&&this._throttled_flushFindRecipientStatusesQueue(),[4,Promise.all(u)];case 1:return[2,t.sent()]}})})},Xu.prototype.__flushFindRecipientStatusesQueue=function(){return Bi(this,void 0,void 0,function(){var d,h,f,e,n,r;return qi(this,function(t){switch(t.label){case 0:if(0===this._queuedFindRecipientStatuses.length)return[2];d=this._queuedFindRecipientStatuses,this._queuedFindRecipientStatuses=[],t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,this.__findRecipientStatusMulti(d)];case 2:return f=t.sent(),[3,5];case 3:return e=t.sent(),h=e,[3,5];case 4:for(n=function(t){var e;f&&f.length>t&&(e=f[t]);var n=d[t],r=n.onCompletes,o=n.onErrors;if(h)for(var i=function(t){setTimeout(function(){return t(h)},0)},s=0,a=o;s<a.length;s++)i(a[s]);else for(var u=function(t){setTimeout(function(){return t(e)},0)},c=0,l=r;c<l.length;c++)u(l[c])},r=0;r<d.length;r++)n(r);return[7];case 5:return[2]}})})},Xu.prototype.__findRecipientStatus=function(v,t){var y=t.includeUsers;return Bi(this,void 0,void 0,function(){var n,e,r,o,i,s,a,u,c,l,d,h,f,p=this;return qi(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),n=this._resolveMessage(v),e=!1,this._pendingFindRecipientStatuses[n.id])return[2,null];t.label=1;case 1:return t.trys.push([1,,3,4]),o=new Promise(function(t,e){p._pendingFindRecipientStatuses[n.id]=function(){return t(null)}}),[4,Promise.race([o,this.host.api.messages.findRecipientStatus(n.serverId)])];case 2:return r=t.sent(),[3,4];case 3:return delete this._pendingFindRecipientStatuses[n.id],[7];case 4:if(!r)return[2,null];if(r.is_recalled)return this.host.models.Message.eject(n),[2,null];for(i=0,s=r.statuses;i<s.length;i++)a=s[i],this.__injectMessageStatus(n,a);if(!y)return[3,6];for(u=n.recipientOrganizationId,c=n.statusesPerRecipient,l=[],d=0,h=c;d<h.length;d++)(f=h[d].userId)&&l.push(f);return[4,this.host.users.ensureUsers(l,u)];case 5:t.sent(),e=!0,t.label=6;case 6:return n.shouldEnsureRecipientStatus&&(n.shouldEnsureRecipientStatus=!1,e=!0),e&&this.host.models.Message.inject(n),!this.config.condensedReplays&&Io[n.markedRecipientStatus]<Io[Oo.DELIVERED]&&this.markAsReceived(n),[2,n.statusesPerRecipient]}})})},Xu.prototype.__findRecipientStatusMulti=function(L){return Bi(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,I,O,d,E,h,f,p,v,y,g,m,_,b,w,T,S,A,C,R,P,j,x,M,k,N,z,D,U;return qi(this,function(t){switch(t.label){case 0:for(this.host.requireUser(),e={},n=L,L=[],r=0,o=n;r<o.length;r++)i=o[r],D=i.id,_=i.includeUsers,M=this._resolveMessage(D),a=(s=M||{}).counterParty,u=s.serverId,c={id:D,includeUsers:_,message:M},L.push(c),u&&(this._pendingFindRecipientStatuses[u]||a&&"distributionList"===a.$entityType||(c.id=u,e[u]=!0));l=ye.a.chunk(Object.keys(e),20),I={},O={},d=function(e){var n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w;return qi(this,function(t){switch(t.label){case 0:n=void 0,t.label=1;case 1:for(t.trys.push([1,,3,4]),r={},o=function(t){E._pendingFindRecipientStatuses[t]=function(){r[t]=!0}},i=0,s=e;i<s.length;i++)h=s[i],o(h);return[4,E.host.api.messages.findRecipientStatusMulti(e)];case 2:for(a=t.sent(),n=[],u=0,c=a;u<c.length;u++)v=c[u],h=v.client_id,r[h]||n.push(v);return[3,4];case 3:for(l=0,d=e;l<d.length;l++)h=d[l],delete E._pendingFindRecipientStatuses[h];return[7];case 4:if(!n)return[2,{value:[]}];for(f=0,p=n;f<p.length;f++)if(v=p[f],y=v.client_id,g=v.statuses,m=E.host.models.Message.get(y),v.is_recalled)E.host.models.Message.eject(m),O[y]=!0;else if(g&&0<g.length){for(_=0,b=g;_<b.length;_++)w=b[_],E.__injectMessageStatus(m,w);I[y]=m}return[2]}})},E=this,h=0,f=l,t.label=1;case 1:return h<f.length?(p=f[h],[5,d(p)]):[3,4];case 2:if("object"==typeof(v=t.sent()))return[2,v.value];t.label=3;case 3:return h++,[3,1];case 4:y=0,g=L,t.label=5;case 5:if(!(y<g.length))return[3,9];if(m=g[y],_=m.includeUsers,M=m.message,b=!1,!M||O[M.serverId])return[3,8];if(w=M.recipientOrganizationId,T=M.shouldEnsureRecipientStatus,S=M.statusesPerRecipient,!_)return[3,7];for(A=[],C=0,R=S;C<R.length;C++)(P=R[C].userId)&&A.push(P);return[4,this.host.users.ensureUsers(A,w)];case 6:t.sent(),b=!0,t.label=7;case 7:T&&(M.shouldEnsureRecipientStatus=!1,b=!0),b&&this.host.models.Message.inject(M),t.label=8;case 8:return y++,[3,5];case 9:if(!this.config.condensedReplays)for(j=0,x=Object.values(I);j<x.length;j++)M=x[j],Io[M.markedRecipientStatus]<Io[Oo.DELIVERED]&&this.markAsReceived(M);for(k=[],N=0,z=L;N<z.length;N++)D=z[N].id,U=I[D],k.push(U?U.statusesPerRecipient:null);return[2,k]}})})},Fi([Object(Vo.decorator)()],Xu.prototype,"__prepareGroupForUsers",null),Fi([Object(Vo.decorator)()],Xu.prototype,"__prepareRoleP2PGroup",null),Fi([Object(Vo.decorator)({serializeArguments:function(t){return t[0]}})],Xu.prototype,"find",null),Fi([Object(Vo.decorator)({memoize:!0})],Xu.prototype,"downloadAttachmentUrl",null),Fi([Object(Vo.decorator)({memoize:!0})],Xu.prototype,"downloadAttachmentBlobAndUrl",null),Fi([Object(Vo.decorator)()],Xu.prototype,"downloadAttachment",null),Fi([Object(Vo.decorator)({memoize:!0})],Xu.prototype,"_downloadAttachmentBlobAndUrl",null),Fi([Object(Vo.decorator)({serializeArguments:function(t){return"object"==typeof t[0]?t[0].id:t[0]}})],Xu.prototype,"findRecipientStatus",null),Fi([Object(Vo.decorator)({serializeArguments:function(t){return t[0].map(function(t){return"object"==typeof t?t.id:t}).join(":")}})],Xu.prototype,"findRecipientStatusMulti",null),Xu),_u=(ws=function(t,e){return(ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ws(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bu=["template_label"].join(","),wu=(_u($u,bs=ra),$u.prototype.batchDelete=function(t){var n=t.ids,r=t.organizationId;return Wi(this,void 0,void 0,function(){var e=this;return Yi(this,function(t){switch(t.label){case 0:if(!Array.isArray(n))throw new Or.ValidationError("ids","required","ids must be an array");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.messageTemplates.batch({ids:n,operation:"destroy",organizationId:r})];case 1:return t.sent(),[2,n.map(function(t){return e.host.models.MessageTemplate.inject({$deleted:!0,id:t})})]}})})},$u.prototype.create=function(t){var o=t.attachment,i=t.body,e=t.network,s=void 0===e?"patient":e,a=t.organizationId,n=t.repository,u=void 0===n?"personal":n,c=t.title;return Wi(this,void 0,void 0,function(){var e,n,r;return Yi(this,function(t){switch(t.label){case 0:if(e=c?c.trim():"",n=i?i.trim():"",this._validate({body:n,organizationId:a,repository:u,shouldCheckId:!1,title:e}),!1===["patient"].includes(s))throw new Or.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.messageTemplates.create({attachment:o,body:n,network:s,organizationId:a,repository:u,title:e})];case 1:return r=t.sent(),[2,this.host.models.MessageTemplate.inject(r)]}})})},$u.prototype.delete=function(e,n){return Wi(this,void 0,void 0,function(){return Yi(this,function(t){switch(t.label){case 0:return this._validate({id:e,organizationId:n,shouldCheckInvalid:!1}),[4,this.host.api.messageTemplates.delete(e,n)];case 1:return t.sent(),[2,this.host.models.MessageTemplate.inject({$deleted:!0,id:e})]}})})},$u.prototype.downloadTemplateFile=function(t){var n=t.templateId,r=t.fileName,o=t.organizationId;return Wi(this,void 0,void 0,function(){var e;return Yi(this,function(t){switch(t.label){case 0:return[4,this.host.api.messageTemplates.downloadTemplateFile({templateId:n,fileName:r,organizationId:o})];case 1:return e=t.sent(),[4,Object(fu.downloadFile)({attachmentContentType:e.type,blob:e,fileName:r})];case 2:return t.sent(),[2]}})})},$u.prototype.find=function(n,r){return Wi(this,void 0,void 0,function(){var e;return Yi(this,function(t){switch(t.label){case 0:return this._validate({id:n,organizationId:r,shouldCheckInvalid:!1}),[4,this.host.api.messageTemplates.find(n,r)];case 1:return e=t.sent(),[2,this.host.models.MessageTemplate.inject(e)]}})})},$u.prototype.getAll=function(){return this.host.models.MessageTemplate.getAll()},$u.prototype.getById=function(t){return this.host.models.MessageTemplate.get(t)},$u.prototype.search=function(t){var i=t.continuation,e=t.network,s=void 0===e?"patient":e,a=t.organizationId,n=t.query,u=void 0===n?"":n,r=t.repository,c=void 0===r?"personal":r,o=t.sortBy,l=void 0===o?"title":o,d=t.sortOrder,h=void 0===d?"asc":d;return Wi(this,void 0,void 0,function(){var e,n,r,o;return Yi(this,function(t){switch(t.label){case 0:return[4,this.host.search.query({continuation:i,network:s,organizationId:a,query:(r={},r[bu]=u,r.repository=c,r),returnFields:[],sort:(o={},o[l]=h,o),types:["messageTemplate"]})];case 1:return e=t.sent(),n=this._processSearchResults(e.results),[2,{metadata:e.metadata,results:n}]}})})},$u.prototype.update=function(t){var o=t.attachment,i=t.body,s=t.id,a=t.organizationId,u=t.repository,c=t.title;return Wi(this,void 0,void 0,function(){var e,n,r;return Yi(this,function(t){switch(t.label){case 0:return e=c?c.trim():"",n=i?i.trim():"",this._validate({body:n,id:s,organizationId:a,repository:u,title:e}),[4,this.host.api.messageTemplates.update({attachment:o,body:n,id:s,organizationId:a,repository:u,title:e})];case 1:return r=t.sent(),[2,this.host.models.MessageTemplate.inject(r)]}})})},$u.prototype._processSearchResults=function(t){return t.map(function(t){return t.entity}).filter(function(t){return!t.$deleted})},$u.prototype._validate=function(t){var e=t.body,n=t.id,r=(t.network,t.organizationId),o=t.repository,i=t.shouldCheckId,s=void 0===i||i,a=t.shouldCheckInvalid,u=void 0===a||a,c=t.title;if(s&&!n)throw new Or.ValidationError("id","required");if(!r)throw new Or.ValidationError("organizationId","required");if(u){if(!e||0===e.trim().length)throw new Or.ValidationError("body","invalid","body must be at least 1 character");if(!o||!["general","personal"].includes(o))throw new Or.ValidationError("repository","invalid",'repository must be either "general" or "personal"');if(!c||0===c.trim().length||60<c.trim().length)throw new Or.ValidationError("title","invalid","title must be between 1 and 60 characters")}},Hi([Object(Vo.decorator)()],$u.prototype,"downloadTemplateFile",null),Hi([Object(Vo.decorator)()],$u.prototype,"find",null),Hi([Object(Vo.decorator)()],$u.prototype,"search",null),$u),Iu=(_s=function(t,e){return(_s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ou=function(){return(Ou=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Eu=(Iu(Ku,ms=ra),Ku.prototype.fullUpdate=function(s,a,u){return $i(this,void 0,void 0,function(){var e,n,r,o,i;return Xi(this,function(t){switch(t.label){case 0:if(!u)throw new Or.ValidationError("organizationId","required");if(0<this.host.config.maxMetadataKeyCount&&Object.keys(a).length>this.host.config.maxMetadataKeyCount)throw new Or.ValidationError("entireData","invalid","Total number of metadata keys is "+Object.keys(a)+" and should not exceed "+this.host.config.maxMetadataKeyCount);for(e=0,n=Object.entries(a);e<n.length;e++)if(r=n[e],o=r[0],"string"!=typeof r[1])throw new Or.ValidationError("value","invalid","Value for metadata key "+o+" must be a string");this.host.requireUser(),s=this._resolveModelId(s),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.metadata.update(s,a,u)];case 2:return t.sent(),this.__injectMetadata(s,u,a),[2,a];case 3:if((i=t.sent()).response&&404===i.response.status)throw new Or.NotFoundError("metadata",s);return[2,Promise.reject(i)];case 4:return[2]}})})},Ku.prototype.update=function(r,o,i){return $i(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:if(!i)throw new Or.ValidationError("organizationId","required");return[4,this.find(r,i,{bypassCache:!0})];case 1:return e=t.sent(),n=Object.assign({},e,o),[2,this.fullUpdate(r,n,i)]}})})},Ku.prototype.find=function(r,o,i){return void 0===i&&(i={}),$i(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:if(!o)throw new Or.ValidationError("organizationId","required");if(i=ye.a.defaults(i,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),r=this._resolveModelId(r),!i.bypassCache&&(e=this.get(r,o)))return[2,e];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.metadata.find(r,o)];case 2:return e=t.sent(),this.__injectMetadata(r,o,e),[2,e];case 3:if(!(n=t.sent()).response||404!==n.response.status)return[2,Promise.reject(n)];if(!i.ignoreNotFound)throw new Or.NotFoundError("metadata",r);return[3,4];case 4:return[2]}})})},Ku.prototype.findMulti=function(i,s,a){return void 0===a&&(a={}),$i(this,void 0,void 0,function(){var e,n,r,o=this;return Xi(this,function(t){switch(t.label){case 0:if(!s)throw new Or.ValidationError("organizationId","required");return this.host.requireUser(),i=ye.a.uniq(Object(ea.d)(i).map(this._resolveModelId)),e=ye.a.chunk(i,20),n=e.map(function(t){return o.__findMultiPaged(t,s,a)}),[4,Promise.all(n)];case 1:return r=t.sent(),[2,ye.a.assign.apply(ye.a,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}([{}],r))]}})})},Ku.prototype.__findMultiPaged=function(h,f,t){return void 0===t&&(t={}),$i(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d;return Xi(this,function(t){switch(t.label){case 0:return[4,this.host.api.entities.findMulti({users:[],metadata:h,organizationId:f})];case 1:for(e=t.sent().metadata,n={},r=0,o=e;r<o.length;r++)for(i=o[r],s=0,a=Object.entries(i);s<a.length;s++)u=a[s],c=u[0],(l=u[1])&&(d=this.__injectMetadata(c,f,l),n[c]=d);return[2,n]}})})},Ku.prototype.get=function(t,e){var n="metadata:"+t+":"+e;return this.host.models.Metadata.get(n)||null},Ku.prototype.__injectMetadata=function(t,e,n){var r="metadata:"+t+":"+e;return this.host.models.Metadata.inject({id:r,data:n,entityId:t,organizationId:e})},Ki([Object(Vo.decorator)()],Ku.prototype,"find",null),Ki([Object(Vo.decorator)()],Ku.prototype,"findMulti",null),Ku),Tu=(gs=function(t,e){return(gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}gs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Su={account:"user",group:"group"},Au=new Set(Object.keys(Su)),Cu=(Tu(Yu,ys=ra),Yu.prototype.mounted=function(){this._fetched=!1,this._muteEntriesByConversationHandle={}},Yu.prototype.dispose=function(){this._fetched=!1,this._muteEntriesByConversationHandle=null},Yu.prototype.findAll=function(){return Qi(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Zi(this,function(t){switch(t.label){case 0:return this._fetched?[3,2]:[4,this.host.api.mute.findAll()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)o=r[n],Au.has(o.sender_type)&&(i=this._parseMuteEntry(o),s=i.conversationId,a=i.entry,this._addEntry(s,a));this._fetched=!0,t.label=2;case 2:return[2,Object.values(this._muteEntriesByConversationHandle)]}})})},Yu.prototype._removeAllEntries=function(){if(this.config.condensedReplays)for(var t=0,e=this.host.conversations.getAll();t<e.length;t++){var n=e[t];n.muted&&this._removeEntry(n.id)}else for(var r=0,o=Object.keys(this._muteEntriesByConversationHandle);r<o.length;r++){var i=o[r];this._removeEntry(i)}},Yu.prototype._getByConversationHandle=function(t){var e=this._muteEntriesByConversationHandle[t];return e?e.expiresAt<Date.now()?(delete this._muteEntriesByConversationHandle[t],null):e:null},Yu.prototype.unmuteAll=function(){return Qi(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.host.api.mute.unmuteAll()];case 1:return t.sent(),this._removeAllEntries(),[2]}})})},Yu.prototype.muteConversation=function(i,s){return Qi(this,void 0,void 0,function(){var e,n,r,o;return Zi(this,function(t){switch(t.label){case 0:if(this.__validateDurationInMinutes(s),i=this._resolveModelId(i),!(e=this._resolveEntity(i,"conversation")))throw new Error("conversation "+i+" not found");return i=e.id,n=e.counterPartyId,r=e.counterPartyType,o=e.organizationId,"user"!==r?[3,2]:[4,this.host.api.mute.muteUser(n,s,o,{recipientOrganizationId:o})];case 1:return t.sent(),this._addEntry(i,{durationInMinutes:s,organizationId:o}),[3,4];case 2:return"group"!==r?[3,4]:[4,this.host.api.mute.muteGroup(n,s,o)];case 3:t.sent(),this._addEntry(i,{durationInMinutes:s,organizationId:o}),t.label=4;case 4:return[2]}})})},Yu.prototype.unmuteConversation=function(i){return Qi(this,void 0,void 0,function(){var e,n,r,o;return Zi(this,function(t){switch(t.label){case 0:if(!(e=this._resolveEntity(i,"conversation")))throw new Error("conversation "+i+" not found");return i=e.id,n=e.counterPartyId,r=e.counterPartyType,o=e.organizationId,"user"!==r?[3,2]:[4,this.host.api.mute.unmuteUser(n,o,{recipientOrganizationId:o})];case 1:return t.sent(),this._removeEntry(i),[3,4];case 2:return"group"!==r?[3,4]:[4,this.host.api.mute.unmuteGroup(n,o)];case 3:t.sent(),this._removeEntry(i),t.label=4;case 4:return[2]}})})},Yu.prototype.reactToMuteEvent=function(t){var e=t.data;if((e=Object(ea.l)(e)).token===this.host.currentUser.id){var n=e.action;if("clear"!==n){var r=this._parseMuteEntry(e),o=r.conversationId,i=r.entry;"add"===n?this._addEntry(o,i):this._removeEntry(o)}else this._removeAllEntries()}},Yu.prototype.getById=function(t){return t.startsWith("mute:")||(t="mute:"+t),this.host.models.Mute.get(t)},Yu.prototype.__validateDurationInMinutes=function(t){(t<0||525600<t||t%1!=0)&&ea.c.raise("durationInMinutes","invalid","should be a positive integer from 1 to 525600 (1 year)")},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(Vo.decorator)()],Yu.prototype,"findAll",null),Yu),Ru=((vs=function(t,e){return(vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}vs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Wu,ps=ra),Wu.prototype.emit=function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t):this.logger.info("unhandled event: "+t.type,t.data)},Wu),Pu=n(95),ju=(fs=function(t,e){return(fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}fs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),xu=function(){return(xu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Mu=(ju(Hu,hs=ra),Hu.prototype.mounted=function(){this.events.mounted(),this.events.on("connected",this._emitConnected),this.events.on("disconnected",this._emitDisconnected),this.events.on("event",this._emitEvent)},Hu.prototype.dispose=function(){this.events.removeListener("connected",this._emitConnected),this.events.removeListener("disconnected",this._emitDisconnected),this.events.removeListener("event",this._emitEvent),this.events.dispose()},Hu.prototype.signIn=function(){return Ji(this,void 0,void 0,function(){var e,n,r;return ts(this,function(t){switch(t.label){case 0:if(!(e=this.host.getAuth())||!e.key||!e.secret)throw new Or.RequiresBasicAuthError;return this.emit("signingIn"),this.events.isSignedIn?[3,2]:[4,this.host.api.notifications.signIn(e.key,e.secret)];case 1:n=t.sent(),this.events.setAuth(n),t.label=2;case 2:return r=this.events.getAuth(),this.emit("signedIn",r),[2,r]}})})},Hu.prototype.signOut=function(t){var e=(void 0===t?{}:t).fromServer,o=void 0!==e&&e;return Ji(this,void 0,void 0,function(){var e,n,r;return ts(this,function(t){switch(t.label){case 0:if(!(e=this.events.getAuth()))return[2,!1];this.emit("signingOut",{fromServer:o}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.notifications.signOut(e.key,e.secret)];case 2:return t.sent(),n=!0,[3,4];case 3:return r=t.sent(),this.httpClient.isUnauthorizedError(r)?(n=!0,[3,4]):[2,Promise.reject(r)];case 4:return n&&this.events.removeAuth(),this.emit("signedOut",{fromServer:o,signedOut:n}),[2,n]}})})},Object.defineProperty(Hu.prototype,"isSignedIn",{get:function(){return this.events.isSignedIn},enumerable:!1,configurable:!0}),Hu.prototype.authenticate=function(e,n){return Ji(this,void 0,void 0,function(){return ts(this,function(t){return this.events.setAuth({key:e,secret:n}),[2]})})},Hu.prototype.connect=function(){return this.events.connect()},Hu.prototype.disconnect=function(t){var e=(void 0===t?{}:t).source;return this.events.disconnect({source:e})},Hu.prototype.reconnect=function(){return this.events.reconnect()},Object.defineProperty(Hu.prototype,"hasConnection",{get:function(){return this.events.hasConnection},enumerable:!1,configurable:!0}),Object.defineProperty(Hu.prototype,"isConnected",{get:function(){return this.events.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(Hu.prototype,"isOpen",{get:function(){return this.events.isOpen},enumerable:!1,configurable:!0}),Hu.prototype.reactToMessageEvent=function(t){var e=t.data;e=Object(Pu.a)(e);var n=this.host.models.Message.createInstance(xu(xu({},e),{id:be.a.v4()}));this.emit("unread:change",n.unreadMessageCount),this.emit("message",n)},Hu.prototype.reactToMessageStatusEvent=function(t){this.emit("unread:change",t.unread_message_count)},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(Vo.decorator)({serializeArguments:function(t){return""}})],Hu.prototype,"signOut",null),Hu),ku=n(66),Nu=n.n(ku),zu=(ds=function(t,e){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ds(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Du=function(){return(Du=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Uu=(zu(Gu,ls=ra),Gu.prototype.mounted=function(){this._deferConversationChanges=!1,this._lastMyRoles=[],this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onChangeConversation),this.host.models.User.on("afterInject",this._onChangeUser)},Gu.prototype.dispose=function(){this._deferConversationChanges=!1,this._lastMyRoles=[],this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onChangeConversation),this.host.models.User.removeListener("afterInject",this._onChangeUser),Vo.decorator.clear(this._findAll)},Gu.prototype.create=function(r){return void 0===r&&(r={allowPublicGroups:void 0,autologoutTime:void 0,deleteOnRead:void 0,groupLifespan:void 0,lifecycleCallback:void 0,name:void 0,pinLock:void 0,settingsRestricted:void 0,ttl:void 0,welcomeEmailSettings:void 0}),ns(this,void 0,void 0,function(){var n=this;return rs(this,function(t){return this.host.requireUser(),[2,this.httpClient.post("/v2/organization",{data:r}).then(function(t){var e=t.getHeader("TT-X-Organization-Key");return n.host.models.Organization.inject({id:e,name:r.name})})]})})},Gu.prototype.update=function(r){return void 0===r&&(r={allowPublicGroups:void 0,autologoutTime:void 0,autoSendWelcomeEmail:void 0,deleteOnRead:void 0,groupLifespan:void 0,id:void 0,lifecycleCallback:void 0,name:void 0,pinLock:void 0,settingsRestricted:void 0,ttl:void 0,welcomeEmailLogo:void 0,welcomeEmailSettings:void 0}),ns(this,void 0,void 0,function(){var e,n=this;return rs(this,function(t){return this.host.requireUser(),e=Ie.a.underscoreObject({allowPublicGroups:r.allowPublicGroups,autologoutTime:r.autologoutTime,autoSendWelcomeEmail:r.autoSendWelcomeEmail,dor:r.deleteOnRead,groupLifespan:r.groupLifespan,lifecycleCallback:r.lifecycleCallback,name:r.name,pinLock:r.pinLock,settingsRestricted:r.settingsRestricted,ttl:r.ttl,welcomeEmailLogo:r.welcomeEmailLogo,welcomeEmailSettings:r.welcomeEmailSettings}),[2,this.httpClient.post("/v2/organization/:id",{urlParams:{id:r.id},data:e}).then(function(t){return n.host.models.Organization.inject(Du({id:r.id},e))})]})})},Gu.prototype.findAll=function(t){var e=void 0===t?{}:t,n=e.filter,r=void 0===n?{onlyApproved:!1}:n,o=e.findRoles,i=void 0===o||o;return ns(this,void 0,void 0,function(){var e,n=this;return rs(this,function(t){switch(t.label){case 0:return this.host.requireUser(),[4,this._findAll()];case 1:return e=t.sent(),i?[4,this.host.userRoles.findAll()]:[3,3];case 2:t.sent(),t.label=3;case 3:return r.onlyApproved&&(e=ye.a.filter(e,{pending:!1})),(e=ye.a.sortBy(e,function(t){return t.name.toLowerCase()})).forEach(function(t){return n.__reloadConversations(t)}),[2,e]}})})},Gu.prototype.refreshAll=function(){return ns(this,void 0,void 0,function(){var e;return rs(this,function(t){switch(t.label){case 0:return Vo.decorator.clear(this._findAll),[4,this._findAll()];case 1:return e=t.sent(),[4,this.host.userRoles.refreshAll()];case 2:return t.sent(),[2,e]}})})},Gu.prototype._findAll=function(){return ns(this,void 0,void 0,function(){var e,n,r,o,i,s;return rs(this,function(t){switch(t.label){case 0:return[4,this.host.api.organizations.findAllOfUser(this.host.currentUserId)];case 1:for(e=t.sent(),n=[],r=0,o=e;r<o.length;r++)i=o[r],s=this.host.models.Organization.inject(i),this.host.models.Organization.removePlaceholder({entity:s,attrs:i}),n.push(s);return[2,n]}})})},Gu.prototype.find=function(r,o){return void 0===o&&(o={}),ns(this,void 0,void 0,function(){var e,n;return rs(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),o.bypassCache||!(e=this.host.models.Organization.get(r))||e.$placeholder?[4,this.host.api.organizations.find(this.host.currentUserId,r)]:[2,e];case 1:return n=t.sent(),[4,this.host.userRoles.findAll({organizationId:r})];case 2:if(t.sent(),n)e=this.host.models.Organization.inject(n),this.__reloadConversations(e);else if(!o.ignoreNotFound)throw new Or.NotFoundError(this.host.models.Organization.name,r);return[2,e]}})})},Gu.prototype._getAllowedSenders=function(t){var e=t.id,n=[],r=this.host.currentUser;if(r){for(var o=0,i=r.roles;o<i.length;o++){var s=i[o];s.organizationId===e&&n.push(s)}n.push(r)}return n},Gu.prototype.getPendingEulas=function(){return ns(this,void 0,void 0,function(){var e,n;return rs(this,function(t){switch(t.label){case 0:return[4,this._findAll()];case 1:return e=t.sent(),n=e.filter(function(t){return t.eulaEnabled&&!t.isEulaAccepted}).reduce(function(t,e){var n=e.id,r=e.eulaUrl;return t[r]?t[r].push(n):t[r]=[n],t},{}),[2,Object.entries(n).map(function(t){return{url:t[0],organizationIds:t[1]}})]}})})},Gu.prototype.findEulaContent=function(e){return ns(this,void 0,void 0,function(){return rs(this,function(t){switch(t.label){case 0:return e=e.replace("http://","https://"),[4,this.httpClient.get(e,{withCredentials:!1,withHeaders:!1,resFormat:"text"})];case 1:return[2,t.sent()]}})})},Gu.prototype.getSettingValue=function(t,e){t=this._resolveModelId(t);var n=this.getById(t);return n?n.getSettingValue(e):null},Gu.prototype.getAll=function(){return this.host.models.Organization.getAll()},Gu.prototype.getById=function(t){return this.host.models.Organization.get(t)},Gu.prototype.getMultiById=function(t){return this.host.models.Organization.getMulti(t)},Gu.prototype.__reloadConversations=function(t){if(t){for(var e=0,n=0,r=0,o=0,i=0,s=0,a=0,u=0,c=t.conversations;u<c.length;u++){var l=c[u],d=l.highestSortNumber,h=l.unreadCount,f=l.unreadPriorityCount,p=l.lastIncomingMessageSortNumber,v=l.shouldDisplay,y=l.metadata;v&&(e=Math.max(e,d),y&&"patient_messaging"===y.feature_service?(n+=h,i+=f,o+=h,a+=f):(r+=h,s+=f),!this.config.condensedReplays&&p&&(!t.lastIncomingMessageSortNumber||t.lastIncomingMessageSortNumber<p)&&(t.lastIncomingMessageSortNumber=p))}t.highestSortNumber=e,t.unreadCount=r+n,t.unreadPriorityCount=s+i,t.networks.provider.unreadCount=r,t.networks.provider.unreadPriorityCount=s,t.networks.patient.unreadCount=n,t.networks.patient.unreadPriorityCount=i,t.networks.virtualWaitingRoom.unreadCount=o,t.networks.virtualWaitingRoom.unreadPriorityCount=a,this.host.models.Organization.inject(t),t.emit("change")}},Gu.prototype.reactToOrganizationPreferencesEvent=function(t){this.emit("preferences:change",Ie.a.camelizeObject(t))},es([Object(Vo.decorator)()],Gu.prototype,"findAll",null),es([Object(Vo.decorator)()],Gu.prototype,"refreshAll",null),es([Object(Vo.decorator)({memoize:!0})],Gu.prototype,"_findAll",null),es([Object(Vo.decorator)()],Gu.prototype,"find",null),Gu),Lu=(cs=function(t,e){return(cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}cs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Fu=function(){return(Fu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bu=["patient","user"],qu=(Lu(Vu,us=ra),Vu.prototype.create=function(t){var n=t.contacts,r=t.dob,o=t.firstName,i=t.lastName,s=t.mrn,a=t.organizationId,u=t.phoneNumber,c=t.gender;return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!s)throw new Or.ValidationError("mrn","required");if(!o)throw new Or.ValidationError("firstName","required");if(!i)throw new Or.ValidationError("lastName","required");if(!u)throw new Or.ValidationError("phoneNumber","required");if(!Object(Oa.isPhone)(u))throw new Or.ValidationError("phoneNumber","not a valid format");if(!r)throw new Or.ValidationError("dob","required");if(!/^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/.test(r))throw new Or.ValidationError("dob","not a valid format of YYYY-MM-DD");if(!c)throw new Or.ValidationError("gender","required");if(!a)throw new Or.ValidationError("organizationId","required");return n&&n.length&&function(t){if(2<t.length)throw new Or.ValidationError("contacts count","larger than 2");for(var e=0;e<t.length;e++){var n=t[e],r=n.firstName,o=n.lastName,i=n.phoneNumber,s=n.relation;if(!r)throw new Or.ValidationError("contact firstName","required");if(!o)throw new Or.ValidationError("contact lastName","required");if(!i)throw new Or.ValidationError("contact phoneNumber","required");if(!s)throw new Or.ValidationError("contact relation","required")}if(2===t.length&&Object(ve.isEqual)(t[0],t[1]))throw new Or.ValidationError("contacts being unique","required")}(n),[4,this.host.api.patients.create({contacts:function(t){return void 0===t&&(t=[]),t.map(function(t){var e=t.phoneNumber,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["phoneNumber"]);return Fu(Fu({},n),{phoneNumber:Object(Oa.normalizePhone)(e)})})}(n),dob:r,firstName:o,gender:c,lastName:i,mrn:s,organizationId:a,phoneNumber:Object(Oa.normalizePhone)(u)})];case 1:return e=t.sent(),[2,this.host.models.User.inject(e.entity)]}})})},Vu.prototype.update=function(t){var n=t.currentEditVersion,r=t.dob,o=t.firstName,i=t.patientId,s=t.lastName,a=t.organizationId,u=t.phoneNumber,c=t.gender;return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("currentEditVersion","required");if(!a)throw new Or.ValidationError("organizationId","required");if(!i)throw new Or.ValidationError("patientId","required");return[4,this.host.api.patients.update({dob:r,editVersion:uc(n),firstName:o,gender:c,patientId:i,lastName:s,organizationId:a,phoneNumber:Object(Oa.normalizePhone)(u)})];case 1:return e=t.sent(),[2,this.host.models.User.inject(e.entity)]}})})},Vu.prototype.delete=function(n,r){return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");return(e=this.host.models.Patient.get(n))&&this.host.models.Patient.eject(e),[4,this.host.api.patients.delete(n,r)];case 1:return t.sent(),[2]}})})},Vu.prototype.createContact=function(t){var n=t.firstName,r=t.lastName,o=t.organizationId,i=t.patientId,s=t.phoneNumber,a=t.relation;return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!i)throw new Or.ValidationError("patientId","required");if(!n)throw new Or.ValidationError("firstName","required");if(!r)throw new Or.ValidationError("lastName","required");if(!s)throw new Or.ValidationError("phoneNumber","required");if(!Object(Oa.isPhone)(s))throw new Or.ValidationError("phoneNumber","not a valid format");if(!a)throw new Or.ValidationError("relation","required");if(!o)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.patients.createContact({firstName:n,lastName:r,organizationId:o,patientId:i,phoneNumber:Object(Oa.normalizePhone)(s),relation:a})];case 1:return e=t.sent(),[2,this.host.models.User.inject(e.entity)]}})})},Vu.prototype.updateContact=function(t){var n=t.contactId,r=t.currentEditVersion,o=t.firstName,i=t.lastName,s=t.organizationId,a=t.patientId,u=t.phoneNumber,c=t.relation;return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("currentEditVersion","required");if(!s)throw new Or.ValidationError("organizationId","required");if(!a)throw new Or.ValidationError("patientId","required");if(!n)throw new Or.ValidationError("contactId","required");if(!o)throw new Or.ValidationError("firstName","required");if(!i)throw new Or.ValidationError("lastName","required");if(!u)throw new Or.ValidationError("phoneNumber","required");if(!Object(Oa.isPhone)(u))throw new Or.ValidationError("phoneNumber","not a valid format");if(!c)throw new Or.ValidationError("relation","required");return[4,this.host.api.patients.updateContact({contactId:n,editVersion:uc(r),firstName:o,lastName:i,organizationId:s,patientId:a,phoneNumber:Object(Oa.normalizePhone)(u),relation:c})];case 1:return e=t.sent(),[2,this.host.models.User.inject(e.entity)]}})})},Vu.prototype.deleteContact=function(t){var n=t.contactId,r=t.organizationId,o=t.patientId;return os(this,void 0,void 0,function(){var e;return is(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("contactId","required");if(!r)throw new Or.ValidationError("organizationId","required");if(!o)throw new Or.ValidationError("patientId","required");return[4,this.host.api.patients.deleteContact({contactId:n,patientId:o,organizationId:r})];case 1:return t.sent(),(e=this.host.models.PatientContact.get("patientContact:"+n))&&this.host.models.PatientContact.eject(e),[2]}})})},Vu.prototype.login=function(t){var a=t.accessToken,u=t.dateOfBirth,c=t.linkToken,l=t.sessions;return os(this,void 0,void 0,function(){var e,n,r,o,i,s;return is(this,function(t){switch(t.label){case 0:return this.host.emit("signingIn"),[4,this.host.api.patients.login(c,a,u,l)];case 1:return e=t.sent(),n=e.api_key,r=e.api_secret,o=e.group_id,i=e.organization_id,this.host.configure({events:Fu(Fu({},this.host.config.events),{singleConversation:o})}),this.host._setAuth({key:n,secret:r}),this.host.setDefaultOrganization(i),[4,this.host.users.findMe({ignoreNotFound:!0})];case 2:return s=t.sent(),this.host._setCurrentUser(s),this.host.emit("signedIn",s,this.host.getAuth()),this.host.messages._fetchAttachmentTokens(),[2,e]}})})},Vu.prototype.loginCheck=function(t){var e=t.linkToken,n=t.sessions;return os(this,void 0,void 0,function(){return is(this,function(t){return[2,this.host.api.patients.loginCheck(e,n)]})})},Vu.prototype.requestAccessToken=function(e){return os(this,void 0,void 0,function(){return is(this,function(t){return[2,this.host.api.patients.requestAccessToken(e)]})})},Vu.prototype.csvUpload=function(e,n){return os(this,void 0,void 0,function(){return is(this,function(t){return[2,this.host.api.patients.csvUpload(e,n)]})})},Vu.prototype.getWhiteLabel=function(e){return os(this,void 0,void 0,function(){return is(this,function(t){return[2,this.host.api.patients.getWhiteLabel(e)]})})},Vu.prototype.setWhiteLabel=function(e,n){return os(this,void 0,void 0,function(){return is(this,function(t){return[2,this.host.api.patients.setWhiteLabel(e,n)]})})},Vu.prototype._createPatientGroupMetadata=function(t){var e=t.displayName,n=t.patient,r=t.id;return{feature_service:"patient_messaging",is_patient_contact:"false",patient_dob:n.dob,patient_gender:n.gender,patient_id:r,patient_mrn:n.mrn,patient_name:e,phone_number:n.phoneNumber,sms_opted_out:n.smsOptedOut}},Vu.prototype._createPatientContactGroupMetadata=function(t){var e=t.patient,n=t.patientContact,r=t.id,o=e.dob,i=e.gender,s=e.mrn,a=e.user,u=n.phoneNumber,c=n.relation,l=n.smsOptedOut;return{feature_service:"patient_messaging",is_patient_contact:"true",patient_contact_id:r,patient_dob:o,patient_gender:i,patient_id:a.id,patient_mrn:s,patient_name:a.displayName,phone_number:u,relation_name:c,sms_opted_out:l}},Vu.prototype.getAll=function(){return this.host.models.Patient.getAll()},Vu.prototype.getById=function(t){return t=this.__resolvePatientId(t),this.host.models.Patient.get("patient:"+t)},Vu);function Vu(){var e=null!==us&&us.apply(this,arguments)||this;return e.__resolvePatientId=function(t){if("string"!=typeof t){if(!Bu.includes(t.$entityType))return t;t=e._resolveModelId(t)}return t.replace("patient:","")},e}function Gu(){var l=null!==ls&&ls.apply(this,arguments)||this;return l._onChangeConversation=function(t,e){var n=e.organization;n&&(l.host.currentlyServingOfflineMessages||l._deferConversationChanges||l.__reloadConversations(n))},l._onChangeUser=function(t,e){for(var n=e.id,r=l.host.models.Organization.getAll(),o=0,i=r;o<i.length;o++)(c=i[o]).autoForwardReceiverId===n&&c.autoForwardReceiver!==e&&l.host.models.Organization.inject(c);if(e===l.host.currentUser&&!l.host.currentlyServingOfflineMessages&&!l._deferConversationChanges){var s=l.host.currentUser.roles;if(!Nu()(s,l._lastMyRoles)){l._lastMyRoles=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(s);for(var a=0,u=r;a<u.length;a++){var c=u[a];Nu()(c.allowedSenders,l._getAllowedSenders(c))||l.host.models.Organization.inject(c)}}}},l.getPreferences=function(e){return ns(l,void 0,void 0,function(){return rs(this,function(t){switch(t.label){case 0:if(!e)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.organizations.getPreferences(e)];case 1:return[2,t.sent()]}})})},l.editPreferences=function(t){var e=t.quickReplies,n=void 0===e?[]:e,r=t.organizationId;return ns(l,void 0,void 0,function(){return rs(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("quickReplies","required");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.organizations.editPreferences({organizationId:r,quickReplies:n})];case 1:return[2,t.sent()]}})})},l}function Hu(t,e){var n=hs.call(this,t,e)||this;return n._emitConnected=function(){n.emit("connected")},n._emitDisconnected=function(t){n.emit("disconnected",t)},n._emitEvent=function(t){n.emit("event",t)},n.events=new au(t,xu(xu({},e),{endpointType:"simpleNotifications"})),n}function Wu(t,e){var n=ps.call(this,t,e)||this;n.EVENTS={"message|group_message":function(t){this.host.notifications.reactToMessageEvent(t)},"message:status|group:message:status":function(t){this.host.notifications.reactToMessageStatusEvent(t)},remote_wipe:function(t){this.host.notifications.disconnect({source:"Notifications remote_wipe"}),this.host.notifications.signOut({fromServer:!0})},"sse:heartbeat":function(){return null}};for(var r=0,o=Object.entries(n.EVENTS);r<o.length;r++){var i=o[r],s=i[0],a=i[1];if(s.includes("|")){for(var u=0,c=s.split("|");u<c.length;u++){var l=c[u];n.EVENTS[l]=a}delete n.EVENTS[s]}}return n}function Yu(){var c=null!==ys&&ys.apply(this,arguments)||this;return c._parseMuteEntry=function(t){var e,n=+t.mute_duration,r=t.mute_start,o=t.caller_organization||t.organization_id;if(r=r&&1e3*+r,c.config.condensedReplays)e=t.conversation_id;else{var i=Su[t.sender_type],s=t.sender_token;e=c.host.conversations.getConversationKey(i,s,o)}return{conversationId:e,entry:{durationInMinutes:n,organizationId:o,startedAt:r}}},c._addEntry=function(t,e){var n=e.durationInMinutes,r=e.organizationId,o=e.startedAt,i=void 0===o?Date.now():o,s=+i+60*n*1e3;if(!(s<Date.now())){var a=c.host.models.Mute.inject({id:"mute:"+t,conversationId:t,durationInMinutes:n,expiresAt:s,organizationId:r,startedAt:i});if(c.config.condensedReplays){var u=c.host.conversations.getById(t);if(!u)return a;u.muted=a,c.host.models.Conversation.inject(u)}else c._muteEntriesByConversationHandle[t]=a,c.host.models.Conversation.touch(t);return a}},c._removeEntry=function(t){c.config.condensedReplays||delete c._muteEntriesByConversationHandle[t];var e=c.host.conversations.getById(t);e&&e.muted&&(c.host.models.Mute.eject(e.muted),e.muted=null,c.host.models.Conversation.inject(e))},c}function Ku(){var t=null!==ms&&ms.apply(this,arguments)||this;return t.__parseMessageMetadata=function(t){var e=t.mimetype,n=t.payload,r=e.indexOf(";");if(-1<r&&(e=e.slice(0,r)),"application/json"!==e||"string"!=typeof n)return t;var o=void 0;try{o=JSON.parse(n)}catch(e){return console.warn("Invalid metadata payload",t),null}return Ou(Ou({},t),{payload:o})},t}function $u(){return null!==bs&&bs.apply(this,arguments)||this}function Xu(){var a=null!==Is&&Is.apply(this,arguments)||this;return a.DELETE_ON_READ_MS=6e4,a.__retrieveSentMessage=function(h,t){var f=t.instance;return Bi(a,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d;return qi(this,function(t){switch(t.label){case 0:if(!(e=h.message_id))throw new Error("Missing message_id from /message response");return h.sort_number?[3,5]:[4,this.find(e,{instance:f,replace:!0})];case 1:return(n=t.sent())?[3,4]:[4,new Promise(function(t){return setTimeout(t,1e3)})];case 2:return t.sent(),[4,this.find(e,{instance:f,replace:!0})];case 3:n=t.sent(),t.label=4;case 4:return n&&(f=n),[3,8];case 5:return void 0===h.is_forwarded&&(h.is_forwarded=!1),r=h.status||"New",this.__setDefaultAttributes(h,{instance:f}),(f=this.host.models.Message.replaceExisting(h,{instance:f})).$synced=void 0,o=f.counterPartyType,i=f.createdAt,s=f.group,a=f.recipientId,c=(u=s||{}).groupType,l=u.p2pRecipient,d=void 0,c===_o.ROLE_P2P&&l?d="role"===l.$entityType?l.botUserId:l.id:"user"===o&&(d=a),d?(this.__injectMessageStatus(f,{accountId:d,createdAt:i,status:r}),[3,8]):[3,6];case 6:return c!==_o.GROUP?[3,8]:[4,this.findRecipientStatus(f,{queue:!1})];case 7:t.sent(),t.label=8;case 8:return[2,f]}})})},a.__generateAttachmentDescriptor=function(t){var e="local:"+be.a.v4();t instanceof File||t instanceof Blob||ea.c.raise("attachment","invalid","attachment (File or Blob) is invalid"),t.name||(t.name="attachment");var n={id:e,localFile:t,name:t.name,size:t.size,contentType:t.type,isLoading:!0,isLocal:!0};if(t.preview)n.localPath=t.preview,n.localPathPromise=function(){return Promise.resolve(n.localPath)},n.isLoading=!1;else{var r=Object(fu.loadLocalFilePathWithFileReader)(t);(n.localPathPromise=r).then(function(t){n.localPath=t,n.isLoading=!1})}return n},a.__retryApiSend=function(v){return Bi(a,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p;return qi(this,function(t){switch(t.label){case 0:e=v._originalBody,n=v.attachments,r=v.conversationId,o=v.counterPartyId,i=v.deleteOnRead,s=v.id,a=v.metadata,u=v.priority,c=v.recipientOrganizationId,l=v.senderOrganizationId,d=v.shouldEscalate,h=v.ttl,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.host.api.messages.send({attachment:ye.a.get(n,"0.localFile"),body:e,conversationId:r,counterPartyId:o,deleteOnRead:i,escalate:d,localId:s,metadata:a,priority:bo.toServer(u),recipientOrganizationId:c,senderOrganizationId:l,ttl:h})];case 2:return f=t.sent(),this.host.config.condensedReplays&&f.last_message&&(f=f.last_message),[4,this.__retrieveSentMessage(f,{instance:v})];case 3:return v=t.sent(),this.host.emit("message:sent",v),[3,5];case 4:return p=t.sent(),this.logger.warn("error while sending message",p),v.senderStatus=Eo.FAILED,this.host.models.Message.inject(v),[3,5];case 5:return[2,v]}})})},a.__retryApiForward=function(h){return Bi(a,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d;return qi(this,function(t){switch(t.label){case 0:e=h.conversationId,n=h.counterPartyId,r=h.id,o=h.metadata,i=h.originalMessageId,s=h.priority,a=h.recipientOrganizationId,u=h.senderOrganizationId,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.host.api.messages.forward(i,n,{conversationId:e,localId:r,metadata:o,priority:bo.toServer(s),recipientOrganizationId:a,senderOrganizationId:u})];case 2:return c=t.sent(),l=c.message_id,[4,this.find(l,{instance:h,replace:!0})];case 3:return h=t.sent(),this.host.emit("message:sent",h),[3,5];case 4:return d=t.sent(),this.logger.error("error while forwarding message",d),h.senderStatus=Eo.FAILED,this.host.models.Message.inject(h),[3,5];case 5:return[2,h]}})})},a._resolveMessage=function(t){return a.host.models.Message.is(t)?t:"string"==typeof t?a.host.models.Message.get(t):null},a._looksLikeDistributionListMessage=function(t){var e=t.body;if(!e)return!1;var n=e.match(/^\[(.+?)\]: /);return!!n&&n[1]},a.__setDefaultAttributes=function(t,e){var n=e.instance,r={is_forwarded:n.isForwarded,attachments:n.attachments,conversationId:n.conversationId,counterParty:n.counterParty,senderStatus:Eo.SENT,shouldEscalate:!1};return n.isForwarded&&(r.originalForwardedMessageCreatedAt=n.originalForwardedMessageCreatedAt,r.originalMessageId=n.originalMessageId,n.originalSender&&(r.originalSender=n.originalSender)),ye.a.defaults(t,r),t},a.__flushSetMessageStatusesQueue=function(){if(0<a._queuedSetMessageStatuses.deliveredIds.length+a._queuedSetMessageStatuses.readIds.length){var t=a._queuedSetMessageStatuses;a._queuedSetMessageStatuses={deliveredIds:[],readIds:[]},a.__setMessagesStatus(t)}},a._onTick=function(){a._deleteExpiredMessages(),a._deleteExpiredMutes(),a.config.condensedReplays&&a._clearOptimisticMarkAsReadState()},a._deleteExpiredMessages=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var e=0,n=a.host.organizations.getAll();e<n.length;e++)for(var r=n[e].__expirableMessages,o=!1;!o&&0<r.length;){var i=r[0];i.expiresAt<t?a.host.models.Message.eject(i):o=!0}},a._deleteExpiredMutes=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var e=0,n=a.host.organizations.getAll();e<n.length;e++)for(var r=n[e].__expirableMutes,o=!1;!o&&0<r.length;){var i=r[0];if(i.expiresAt<t){a.host.models.Mute.eject(i);var s=a.host.models.Conversation.get(i.conversationId);if(!s)continue;s.muted=null,a.host.models.Conversation.inject(s)}else o=!0}},a._onChangeMessageStatus=function(t,e){var n=e.messageId,r=a.host.models.Message.get(n);r&&a.host.models.Message.inject(r)},a._fetchAttachmentTokens=function(i){return void 0===i&&(i=20),a._fetchingAttachmentTokens||(a._fetchingAttachmentTokens=new Promise(function(o){return Bi(a,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.host.api.messages.createAttachmentTokens(i)];case 1:return e=t.sent().attachment_tokens,(r=this._attachmentTokens).push.apply(r,e),[3,3];case 2:return n=t.sent(),this.logger.error("error while requesting attachment tokens",n),[3,3];case 3:return this._fetchingAttachmentTokens=null,o(),[2]}})})})),a._fetchingAttachmentTokens},a._useAttachmentToken=function(n,r){return void 0===n&&(n=20),void 0===r&&(r=0),Bi(a,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:if(3<r)throw new Error("Attachment tokens can not be fetched at this time.");return this._attachmentTokens.length<n?[4,this._fetchAttachmentTokens(n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return(e=this._attachmentTokens.shift())?[3,4]:[4,this._useAttachmentToken(n,++r)];case 3:return[2,t.sent()];case 4:return[2,e]}})})},a.getAttachmentUrlWithToken=function(o,i,s){return void 0===s&&(s=!1),Bi(a,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return e=this._resolveMessage(o),[4,this.findAttachment(e.serverId,i)];case 1:return n=t.sent(),[4,this._useAttachmentToken()];case 2:return r=t.sent(),[2,""+(s?this.host.config.baseUrl:"")+this.__getAttachmentPath(e.serverId,n.id)+"?token="+r]}})})},a.openAttachmentWithToken=function(o,i){return Bi(a,void 0,void 0,function(){var e,n,r;return qi(this,function(t){switch(t.label){case 0:return e=i.toString(),n=this._resolveMessage(o),[4,this.findAttachment(o,e)];case 1:if(!t.sent())throw new Or.NotFoundError("MessageAttachment",n.serverId+":"+e);return[4,this.getAttachmentUrlWithToken(n.serverId,e)];case 2:return r=t.sent(),window.open(this.host.config.baseUrl+r,"_blank"),[2]}})})},a}function Qu(){var p=null!==Es&&Es.apply(this,arguments)||this;return p._setP2PEntities=function(t){var e=t.createdByRole,n=t.createdByUser,r=t.groupType,o=t.targetUser,i=t.targetRole,s=p.host.currentUser;if(s&&r===_o.ROLE_P2P){var a=s.roles,u=[],c=[];e?c.push(e):n&&n!==s&&u.push(n),i?c.push(i):o&&o!==s&&u.push(o);var l=null,d=null;1===c.length?d=n===s||o===s?a.includes(c[0])?(l=s,c[0]):(l=c[0],s):(l=u[0],c[0]):2===c.length&&(a.includes(c[0])?(l=c[1],d=c[0]):a.includes(c[1])&&(l=c[0],d=c[1])),t.p2pRecipient=l,t.p2pSender=d}},p._onChangeConversation=function(t,e){var n=e.counterPartyId;if("group"===e.counterPartyType){var r=p.host.models.Group.get(n);r&&(r.conversation||p.host.models.Group.inject(r))}},p._onRemoveConversation=function(t,e){var n=e.counterPartyId;if("group"===e.counterPartyType){var r=p.host.models.Group.get(n);r&&r.conversation&&p.host.models.Group.inject(r)}},p._onChangeGroup=function(t,e){var n=e.id,r=e.memberIds,o=p._groupMemberIds[n];if(o)for(var i=0,s=o;i<s.length;i++){var a=s[i],u=(d=p._userGroups[a])?d.indexOf(e):-1;-1<u&&r&&!r.includes(a)&&d.splice(u,1)}if(r)for(var c=0,l=p._groupMemberIds[n]=r;c<l.length;c++){var d;a=l[c],(d=p._userGroups[a]||[]).includes(e)||d.push(e),p._userGroups[a]=d}},p._onRemoveGroup=function(t,e){var n=e.id,r=e.memberIds;if(delete p._groupMemberIds[n],r)for(var o=0,i=r;o<i.length;o++){var s=i[o],a=p._userGroups[s],u=a?a.indexOf(e):-1;-1<u&&a.splice(u,1)}},p._onChangeMetadata=function(t,e){var n=e.entityId,r=p.host.models.Group.get(n);r&&p.host.models.Group.inject(r)},p._onChangeUser=function(t,e){var n=e.botRole,r=e.id,o=e.isRoleBot,i=p._userGroups[r],s=p._userState[r],a=s&&(s.botRole!==n||s.isRoleBot!==o);if(s&&!a||(p._userState[r]={botRole:n,isRoleBot:o}),i)for(var u=0,c=i;u<c.length;u++){var l=c[u],d=l.conversation,h=l.groupType,f=l.members;h!==_o.ROLE_P2P&&!a&&f&&f.includes(e)||(p.host.models.Group.inject(l),d&&p.host.models.Conversation.inject(d))}},p._onRemoveUser=function(t,e){var n=e.id,r=p._userGroups[n];if(r&&0<r.length)for(var o=0,i=r;o<i.length;o++){var s=i[o],a=s.members;a&&a.includes(e)&&p.host.models.Group.inject(s)}delete p._userGroups[n],delete p._userState[n]},p}function Zu(){return null!==Ss&&Ss.apply(this,arguments)||this}function Ju(t,e){var a=Cs.call(this,t,e)||this;a.onNetworkStatusChanged=function(t){var e=t.networkStatus,n=t.previousStatus;if(a.__allEvents.push({networkStatusChange:{previousStatus:n,networkStatus:e,timestamp:new Date}}),e===Uo.CONNECTING){if(a._reconnectIfHeartbeatIntervalPassed()&&a.eventSource)return;a._connectionRetryCount=1,a._disconnectAndRetry()}else e===Uo.OFFLINE&&(a._connectionRetryCount=0,a.disconnect({unwatchNetwork:!1,source:"Network went offline"}))},a._closeAllConnections=function(){return ji(a,void 0,void 0,function(){var e,n,r;return xi(this,function(t){switch(t.label){case 0:if(this.eventSource)throw new Error("Existing connections must be closed first");if("simpleNotifications"!==this.endpointType)return[3,2];if(e=this._auth,n=e.key,r=e.secret,!n||!r)throw new Or.RequiresBasicAuthError;return[4,this.host.api.notifications.closeAllConnections(n,r)];case 1:return t.sent(),[3,4];case 2:return[4,this.host.api.events.closeAllConnections()];case 3:t.sent(),t.label=4;case 4:return[2]}})})},a._processImmediateEvent=function(e,n){return ji(a,void 0,void 0,function(){return xi(this,function(t){switch(t.label){case 0:return this._eventQueue=[n],this._eventQueueDeferred=!1,this._autoAck?[4,this.ack([e])]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.processEventQueue(),[2]}})})},a._scheduleEventQueue=function(t){var e=(void 0===t?{}:t).immediate,n=void 0!==e&&e;if(a.allowManualRequestBatch&&a.config.manuallyRequestEventQueueBatch&&(a._eventQueueIsManual=!0),n&&(clearTimeout(a._eventQueueTimeout),a._eventQueueTimeout=null),null===a._eventQueueTimeout){var r=a.config.eventCollectionInterval;if(n||null===r)a._eventQueueIsManual?a._emitBatch({immediate:n}):a.processEventQueue(a._eventQueue.length);else{var o=a._eventQueueIsManual?a._emitBatch:a.processEventQueue;a._eventQueueTimeout=setTimeout(o,r)}}},a._emitBatch=function(t){var e=(void 0===t?{}:t).immediate,n=void 0!==e&&e;a._eventQueueTimeout=null,a.emit("batch:available",{maxEventBatch:a._eventQueue.length,immediate:n})},a.deferEventQueue=function(){a._eventQueueDeferred=!0,a._eventQueueTimeout&&(clearTimeout(a._eventQueueTimeout),a._eventQueueTimeout=null)},a.resumeEventQueue=function(){a._eventQueueDeferred=!1,a._eventQueueTimeout&&(clearTimeout(a._eventQueueTimeout),a._eventQueueTimeout=null),0<a._eventQueue.length&&a._scheduleEventQueue()},a.processEventQueue=function(t){var e,n,r;if(void 0===t&&(t=a.config.maxEventBatch),a._eventQueueIsManual||(a._eventQueueTimeout=null),!a._eventQueueDeferred&&0!==a._eventQueue.length)try{for(var o=a._eventQueue.splice(0,t),i=0,s=o;i<s.length;i++)e=s[i],n=!1,r=JSON.parse(e),n=!0,a._handleEvent(r);0<a._eventQueue.length?a._scheduleEventQueue():a._reconnectWhenQueuesAreEmpty&&0===a._queuedAcks.length&&0===a._pendingAckConnections&&a._scheduleConnectRetry()}catch(t){n?(a.logger.error("error while processing SSE payload",t,t.stack,{data:r}),a.disconnect({isRecoverable:!1,source:"Error processing SSE payload"})):(a.logger.error("error parsing SSE payload: <"+e+">"),a._disconnectAndRetry())}},a._flushQueuedAcks=function(){return ji(a,void 0,void 0,function(){var e,n;return xi(this,function(t){switch(t.label){case 0:return 0===this._queuedAcks.length?[2]:this._pendingAckConnections>=this.config.flushAckMaxConnections?(this._throttled_flushQueuedAcks(),[2]):(e=this._queuedAcks.splice(0,this.config.flushAckMaxEvents),n=this.ack(e),0<this._queuedAcks.length?(this._throttled_flushQueuedAcks(),[3,5]):[3,1]);case 1:return t.trys.push([1,3,,4]),[4,n];case 2:case 3:return t.sent(),[3,4];case 4:this._reconnectWhenQueuesAreEmpty&&0===this._eventQueue.length&&0===this._pendingAckConnections&&this._scheduleConnectRetry(),t.label=5;case 5:return[2]}})})},a._onVisibilityChange=function(t,e){e=e.toUpperCase();var n=a._visibilityState;a._visibilityState=e,a.isConnected&&(a.__allEvents.push({visibilityChange:{previousState:n,state:e,timestamp:new Date}}),e===zo.HIDDEN?(a.host.configure({eventCollectionInterval:null}),a._setHeartbeatTimeout(a.config.eventsHeartbeatIntervalInvisible)):e===zo.VISIBLE&&(a.host.configure({eventCollectionInterval:Zr.eventCollectionInterval}),a._setHeartbeatTimeout(a.config.eventsHeartbeatIntervalVisible))),n===zo.HIDDEN&&e===zo.VISIBLE&&a.httpClient.networkStatus===Uo.CONNECTING&&a._reconnectIfHeartbeatIntervalPassed(),a.emit("visibilityChange",t,e)},a._reconnectIfHeartbeatIntervalPassed=function(){return null!==a._lastHeartbeatTime&&Date.now()-a._lastHeartbeatTime>=a._heartbeatInterval&&(a._lastHeartbeatTime=null,a.reconnect(),!0)},a.endpointType||(a.endpointType="events");for(var n=0,r=Object.entries(su[a.endpointType]);n<r.length;n++){var o=r[n],i=o[0],s=o[1];"url"!==i&&(a[i]=s)}return a}function tc(t,e,n){this.id=t,this.type=e,this.data=n}function ec(t,e){var n=Ps.call(this,t,e)||this;n.EVENTS={bang:function(t){this.host.groups.reactToBangEvent(t)},client_advisory:function(t){switch(t.data.advisory.name){case"replay_start":this.host.reactToAdvisoryEvent("replayStart",{replayMessageCount:t.data.advisory.replay_message_count});break;case"replay_stop":this.host.reactToAdvisoryEvent("replayStop")}},escalations:function(t){this.host.escalations.reactToEscalationsEvent(t)},friends:function(t){this.host.conversations.reactToFriendsEvent(t)},"message|group_message":function(t){this.host.conversations.reactToMessageEvent(t)},"message:status|group:message:status":function(t){this.host.messages.reactToMessageStatusEvent(t)},user_preferences:function(t){this.host.users.reactToUserPreferencesEvent(t)},org_preferences:function(t){this.host.organizations.reactToOrganizationPreferencesEvent(t)},presence:function(t){this.host.presence.reactToPresenceEvent(t)},update:function(t){this.host.conversations.reactToUpdateEvent(t)},"update:tag":function(t){this.host.roleTags.reactToUpdateEvent(t)},"update:team_request":function(t){this.host.conversations.reactToUpdateTeamRequestEvent(t)},"account:settings":function(n){var r=this;n.data.services.forEach(function(t){switch(t.xmlns){case"tigertext:iq:update:account":var e=t.account||n.data.token;r.host.users.refresh(e);break;case"tigertext:iq:update:org_settings":r.host.organizations.refreshAll();break;default:r.logger.warn("unhandled account:settings service type "+t.xmlns)}})},"message:is_typing":function(t){this.host.typingStatus.reactToIsTypingEvent(t)},"processing:start":function(t){this.host.conversations.reactToProcessingStart(t)},"processing:stop":function(t){this.host.conversations.reactToProcessingStop(t)},remote_wipe:function(t){return function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}(this,void 0,void 0,function(){return function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}(this,function(t){switch(t.label){case 0:return this.host.notifications.disconnect({source:"remote_wipe event"}),[4,this.host.notifications.signOut({fromServer:!0})];case 1:return t.sent(),this.host.signOut({fromServer:!0}),[2]}})})},validated:function(t){this.logger.warn("validated not implemented")},"msg:metadata_update":function(t){this.logger.warn("msg:metadata_update not implemented")},conversation_mute:function(t){this.host.mute.reactToMuteEvent(t)},reconnect:function(t){this.host.events.reconnect()},"vwr:joinablecall":function(t){this.host.virtualWaitingRooms.reactToJoinableCallSSE(t)},"voip:incoming|voip:ended|voip:answered|voip:state":function(t){this.host.calls.reactToVoipSSE(t)},"push:credentials":function(){return null},"sse:heartbeat":function(){return null},"sse:keepalive":function(){return null}};for(var r=0,o=Object.entries(n.EVENTS);r<o.length;r++){var i=o[r],s=i[0],a=i[1];if(s.includes("|")){for(var u=0,c=s.split("|");u<c.length;u++){var l=c[u];n.EVENTS[l]=a}delete n.EVENTS[s]}}return n}function nc(){return null!==xs&&xs.apply(this,arguments)||this}function rc(){return null!==ks&&ks.apply(this,arguments)||this}function oc(){return null!==zs&&zs.apply(this,arguments)||this}function ic(){var S=null!==Us&&Us.apply(this,arguments)||this;return S.__injectCounterParty=function(t){var e=t.conversationId,n=t.entityAttrs,r=t.entityType,o=t.groupType,i=t.hasCurrentUser,s=void 0!==i&&i,a=t.isPlaceholder,u=void 0!==a&&a,c=t.organizationId,l=n.id,d=n.metadata;if(l=l||n.token,!r&&n.type&&(r=S.host.modelNameByEntityType(n.type)),e&&(n.conversationId=e),c&&(n.organizationId=c),"group"!==r||o||(o=S.host.groups.__extractGroupTypeFromAttrs(n)),d&&l&&c&&S.host.metadata.__injectMetadata(l,c,d),"group"===r){if(d){if(d.created_by){var h=S.__injectCreatedByEntity(d,c),f=h.role,p=void 0===f?null:f,v=h.user,y=void 0===v?null:v;(p||y)&&(n.createdByRole=p,n.createdByUser=y)}else n.created_by&&(y=S.host.models.User.injectPlaceholder({id:n.created_by}),n.createdByUser=y);if(d.target_id){var g=S.__injectTargetEntity(d,c),m=g.role,_=(p=void 0===m?null:m,g.user);y=void 0===_?null:_,(p||y)&&(n.targetRole=p,n.targetUser=y)}if("role_assignment"===d.meta_type){var b=n.display_name||n.name;S.host.roles.__injectRoleAssignmentEntity(b,d,c)}}o===_o.FORUM&&s&&(n.hasCurrentUser=!0)}else if("user"===r){var w=n.dnd_auto_forward_receiver;w&&"undefined"!==w&&S.host.models.User.injectPlaceholder({id:w})}else if("distributionList"===r)n.created_by&&S.host.injectPlaceholderModel({displayName:n.created_by_display_name,id:n.created_by},"user"),n.updated_by&&S.host.injectPlaceholderModel({displayName:n.updated_by_display_name,id:n.updated_by},"user");else if("messageTemplate"===r)n.created_by&&S.host.injectPlaceholderModel({displayName:n.created_by_display_name,id:n.created_by},"user"),n.updated_by&&S.host.injectPlaceholderModel({displayName:n.updated_by_display_name,id:n.updated_by},"user");else if("scheduledMessage"===r){if(n.event_id&&(n.scheduled_message_id=n.token,n.token=n.event_id,l=n.event_id),n.recipient)if("account"===n.recipient_type){for(var I={},O=0,E=["feature_service","is_patient_contact","patient_display_name","patient_dob","patient_gender","patient_id","patient_mrn","phone_number","relation_name"];O<E.length;O++){var T=E[O];I[T]=n[T]}I.patient_id||I.is_patient_contact||(I.patient_id=n.recipient),S.host.metadata.__injectMetadata(n.recipient,c,I),S.host.injectPlaceholderModel(Sa(Sa({},I),{displayName:n.recipient_display_name,id:n.recipient}),"user")}else"distribution_list"!==n.recipient_type&&"list"!==n.recipient_type||S.host.injectPlaceholderModel({id:n.recipient,name:n.recipient_display_name,totalMembers:n.total_members},"distributionList");n.sender_token&&S.host.injectPlaceholderModel({displayName:n.sender_display_name,id:n.sender_token},"user"),n.template_id&&S.host.injectPlaceholderModel({title:n.template_label,id:n.template_id},"messageTemplate"),n.updated_by&&S.host.injectPlaceholderModel({displayName:n.updated_by_display_name,id:n.updated_by},"user")}return l?u?S.host.injectPlaceholderModel(n,r):S.host.injectModel(n,r):null},S.__injectCreatedByEntity=function(t,e){var n={};if(void 0!==t.created_by_tag_id)n.role=S.host.roles.__injectRoleFromMetadata({metadata:{token:t.created_by,display_name:t.created_by_display_name,tag_color:t.created_by_tag_color,tag_id:t.created_by_tag_id,tag_name:t.created_by_tag_name},organizationId:e,replaceExisting:!1});else{var r=S.host.models.User.get(t.created_by);if(r)n.user=r;else{var o={id:t.created_by};"created_by_display_name"in t&&(o.displayName=t.created_by_display_name),n.user=S.host.models.User.injectPlaceholder(o)}}return n},S.__injectTargetEntity=function(t,e){var n={};if(void 0!==t.target_tag_id)n.role=S.host.roles.__injectRoleFromMetadata({metadata:{display_name:t.target_display_name,tag_color:t.target_tag_color,tag_id:t.target_tag_id,tag_name:t.target_tag_name,token:t.target_id},organizationId:e,replaceExisting:!1});else{var r=S.host.models.User.get(t.target_id);if(r)n.user=r;else{var o={id:t.target_id};"target_display_name"in t&&(o.displayName=t.target_display_name),n.user=S.host.models.User.injectPlaceholder(o)}}return n},S.__removeFriend=function(t){var e,n=t.attrs,r=t.entityType,o=t.id,i=t.organizationId,s=t.conversation||S.get(r,o,i),a="group"===r?S.host.models.Group.get(o):null,u=!(!a||a.groupType!==_o.FORUM);if(e="user"===r||S.config.condensedReplays?s&&s.content.slice():s&&s.messages.slice(),u&&(n.hasCurrentUser=!1,n.members=null,S.host.models.Group.inject(n)),S.config.keepConversationsForAllForums&&u||(s&&S.__ejectConversation(s.id),a&&S.config.condensedReplays&&S.host.models.Group.eject(a)),Array.isArray(e))for(var c=0,l=e;c<l.length;c++){var d=l[c];S.host.ejectModel(d,d.$entityType)}},S._sanitizeGroupAttrs=function(t){var e=t.members;S.host.groups.__extractGroupTypeFromAttrs(t)===_o.FORUM&&e&&0===e.length&&delete t.members},S._onSendingMessage=function(t){var e;if(e=S.config.condensedReplays?t.conversation:S.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId,{ensureEntities:{counterParty:"full",organization:"placeholder",messageCounterParties:"full",groupMembers:"full",touchOnRelatedEntityLoad:!0}})){var n=!1;S.host.config.condensedReplays&&t&&t.sortNumber&&(void 0===e.highestSortNumber||e.highestSortNumber<t.sortNumber)&&(e.highestSortNumber=t.sortNumber,n=!0),void 0===e.highestSortNumber&&(e.highestSortNumber=S.host.messages.__getNextSortNumber(e.organizationId),n=!0),n&&S.host.models.Conversation.inject(e),S.__addConversationCounterPartyToServerRosterIfShould(e)}},S._onSentMessage=function(t){var e=!1,n=S.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);n&&(S.host.config.condensedReplays&&(t&&t.sortNumber&&(void 0===n.highestSortNumber||n.highestSortNumber<t.sortNumber)?(n.highestSortNumber=t.sortNumber,e=!0):void 0===n.highestSortNumber&&(n.highestSortNumber=S.host.messages.__getNextSortNumber(n.organizationId),e=!0)),e&&S.host.models.Conversation.inject(n),n.emit("message",t))},S._onChangeMessage=function(t,e){e.conversation&&S.__queueReload(e.conversation)},S._onRemoveMessage=function(t,e){var n=e.conversation;if(n){if(S.config.condensedReplays){var r=n.firstExpiringUnreadMessage,o=n.id,i=n.lastMessage,s=n.timeline;if(!(n=S.getById(o)))return;var a=i===e,u=r===e,c=1===s.length&&a;(a||u)&&S.find(n.id),c&&(n.lastMessage=null)}S.__queueReload(n)}},S._onRemoveGroup=function(t,e){var n=e.conversationId?e.conversationId:S.getConversationKey("group",e.id,e.organizationId);S.__ejectConversation(n)},S._onRemoveTeam=function(t,e){var n=S.getConversationKey("team",e.id,e.organizationId);S.__ejectConversation(n)},S._onChangeGroup=function(t,e){e.conversationId&&S.host.models.Conversation.touch(e.conversationId)},S._onChangeOrganization=function(t,e){var n=e.conversations,r=S.__escalationEnabledOrganizations.indexOf(e),o=-1<r;if(o!==e.canEscalateMessages&&(o?S.__escalationEnabledOrganizations.splice(r,1):S.__escalationEnabledOrganizations.push(e),n))for(var i=0,s=n;i<s.length;i++){var a=s[i];S.__queueReload(a)}},S.__flushConversationsToReload=function(){if(!S.host.currentlyServingOfflineMessages&&0<S.__queuedConversationsToReload.length){var t=[];S.host.organizations._deferConversationChanges=!0;for(var e=0,n=S.__queuedConversationsToReload;e<n.length;e++){var r=n[e],o=r.organizationId;S.__reloadConversation(r),t.includes(o)||t.push(o)}S.host.organizations._deferConversationChanges=!1;for(var i=0,s=t;i<s.length;i++){o=s[i];var a=S.host.organizations.getById(o);a&&S.host.organizations.__reloadConversations(a)}S.__queuedConversationsToReload.length=0}},S}function sc(t,e){var n=Fs.call(this,t,e)||this;return n._dataTrackPublished={},n._ringTimeouts=[],n._incomingCallTimeout=null,n._providerRingLimit=6e4,n}function ac(t,e){var n=qs.call(this)||this;return n._resolveModelId=function(t){return"string"==typeof t?t:t&&(t.serverId||t.id)||null},Object.assign(n,e),n.host=t,n.config=t.config,n.httpClient=t.httpClient,n}function uc(t){if(null==t)throw new Or.ValidationError("version","of type string or number");return"string"==typeof t?parseInt(t)+1:t+1}function cc(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function lc(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function dc(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function hc(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function fc(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function pc(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function vc(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function yc(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function gc(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function mc(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function _c(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function bc(n,t){if(void 0===n&&(n=""),void 0===t&&(t={}),!n||ye.a.isEmpty(t.cloudfront))return n;var e=t.cloudfront,r=ye.a.findKey(e,function(t,e){return-1!==n.indexOf(e)}),o=e[r]?r+"."+t.cloudfrontDomain:"",i=e[r]?t.assetDomain+"/"+e[r]:"",s=o&&i?n.replace(o,i):n;return s.replace("http://","https://")}var wc,Ic,Oc,Ec,Tc,Sc,Ac,Cc,Rc,Pc,jc=((Pc=function(t,e){return(Pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Pc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(nl,Rc=ra),nl.prototype.mounted=function(){this._data={}},nl.prototype.dispose=function(){this._data=null},nl.prototype.reactToPresenceEvent=function(t){var e=t.data;this.set(e.from,jo.resolve(e.type))},nl.prototype.set=function(t,e){if(this._data[t]!==e){this._data[t]=e;var n=this.host.models.User.inject({id:t,presence:e});this.emit("change",{presence:e,user:n,userId:t})}},nl.prototype.get=function(t){return t===this.host.currentUserId?jo.AVAILABLE:this._data[t]||jo.UNKNOWN},nl),xc=(Cc=function(t,e){return(Cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Cc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mc=(xc(el,Ac=ra),el.prototype.mounted=function(){this.host.models.Organization.on("afterInject",this._onChangeOrganization),this.host.models.Organization.on("afterEject",this._onChangeOrganization)},el.prototype.dispose=function(){this.host.models.Organization.removeListener("afterInject",this._onChangeOrganization),this.host.models.Organization.removeListener("afterEject",this._onChangeOrganization)},el.prototype.findAll=function(){return lc(this,void 0,void 0,function(){return dc(this,function(t){switch(t.label){case 0:return[4,this.host.organizations.findAll()];case 1:return t.sent(),[2,this.getAll()]}})})},el.prototype.refreshAll=function(){return lc(this,void 0,void 0,function(){return dc(this,function(t){switch(t.label){case 0:return[4,this.host.organizations.refreshAll()];case 1:return t.sent(),[2,this.getAll()]}})})},el.prototype.getAll=function(){return this.host.models.Product.getAll()},el.prototype.getById=function(t){return this.host.models.Product.get(t)},cc([Object(Vo.decorator)()],el.prototype,"findAll",null),cc([Object(Vo.decorator)()],el.prototype,"refreshAll",null),el),kc=(Sc=function(t,e){return(Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Sc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Nc=function(){return(Nc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zc=["role","user"],Dc=(kc(tl,Tc=ra),tl.prototype.mounted=function(){this._previouslyInRoles={},this._roleConversations={},this._roleP2PConversations={},this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onRemoveConversation)},tl.prototype.dispose=function(){this._previouslyInRoles={},this._roleConversations={},this._roleP2PConversations={},this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onRemoveConversation)},tl.prototype.createP2PGroup=function(t){var I=t.metadata,O=t.name,E=t.organizationId,T=t.recipientId,e=t.replayHistory,S=void 0===e||e,n=t.senderId,A=void 0===n?this.host.currentUserId:n;return fc(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w=this;return pc(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!T)throw new Or.ValidationError("recipientId","required");if(!E)throw new Or.ValidationError("organizationId","required");for(e=this.host.currentUserId,n=[],r=0,o=[A,T];r<o.length;r++)i=o[r],i=this.host.roles.__resolveRoleId(i),i=this._resolveModelIdWithTypes(i,"user"),n.includes(i)||n.push(i);if(2!==n.length)throw new Or.ValidationError("recipientId","same user as senderId");return[4,Promise.all(n.map(function(t){return w.host.users.find(t,{organizationId:E})}))];case 1:return s=t.sent(),O=O||s.map(function(t){return t.isRoleBot?t.displayName:t.firstName}).filter(Boolean).join(", ")||"Group",[4,this.host.api.roles.createP2PGroup({createdByUserId:A,memberIds:n,name:O,organizationId:E,replayHistory:S})];case 2:for(a=t.sent(),this.config.condensedReplays?(c=a.entity||a,u=a.conversation_id):c=a,l=0,d=s;l<d.length;l++)if(h=d[l],f=h.botRole,h.isRoleBot&&f&&(p=f.memberIds))for(v=0,y=p;v<y.length;v++)g=y[v],n.includes(g)||n.push(g);return m=c.id||c.token,b=(_=this.host.models.Group.get(m))&&_.memberIds?_.memberIds:c.members=n,_=this.host.conversations.__injectCounterParty({conversationId:u,entityAttrs:c,entityType:"group",groupType:_o.ROLE_P2P,hasCurrentUser:b.includes(e),isPlaceholder:!0,organizationId:E}),I?[4,this.host.metadata.update(_.id,I,E)]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2,_]}})})},tl.prototype.findAll=function(){return fc(this,void 0,void 0,function(){var e,n,r,o=this;return pc(this,function(t){switch(t.label){case 0:return 0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return 0===(e=e.filter(function(t){return t.rolesEnabled})).length?[2,[]]:[4,this.host.search.query({types:["user"],organizationIds:e.map(function(t){return t.id}),query:{displayName:"",featureService:"role"},followContinuations:!0})];case 3:return n=t.sent().results,r=n.map(function(t){return t.entity}),e.map(function(t){var e=t.id;return o.host.models.Organization.touch(e)}),[2,r]}})})},tl.prototype.findByOrganizationId=function(o){return fc(this,void 0,void 0,function(){var e,n,r;return pc(this,function(t){switch(t.label){case 0:return o=this._resolveModelId(o),[4,this.host.organizations.find(o)];case 1:return(e=t.sent()).rolesEnabled?[4,this.host.search.query({types:["user"],organizationIds:e.id,query:{displayName:"",featureService:"role"},followContinuations:!0})]:[2,[]];case 2:return n=t.sent().results,r=n.map(function(t){return t.entity}),this.host.models.Organization.touch(o),[2,r]}})})},tl.prototype.find=function(o,i,s){return void 0===s&&(s={}),fc(this,void 0,void 0,function(){var e,n,r;return pc(this,function(t){switch(t.label){case 0:return this.host.requireUser(),s=ye.a.defaults(s,{bypassCache:!1,ignoreNotFound:!1}),o=this.__resolveRoleId(o),i=this._resolveModelId(i),!s.bypassCache&&(e=this.getById(o))?[2,e]:[4,this.host.api.roles.find(o,i)];case 1:if(n=t.sent())return r=this.__injectSearchResult({entity:{id:o,displayName:n.display_name},metadata:n,organizationId:i}),this.host.models.Organization.touch(i),[2,r];if(s.ignoreNotFound)return[2];throw new Or.NotFoundError(this.host.models.Role.name,o)}})})},tl.prototype.saveRole=function(e,n){return fc(this,void 0,void 0,function(){return pc(this,function(t){switch(t.label){case 0:return this.host.requireUser(),n=this._resolveModelId(n),e=this.__resolveRoleId(e),[4,this.host.api.roles.saveRole(e,this.host.currentUserId,n)];case 1:return t.sent(),[2]}})})},tl.prototype.removeSavedRole=function(e,n){return fc(this,void 0,void 0,function(){return pc(this,function(t){switch(t.label){case 0:return this.host.requireUser(),n=this._resolveModelId(n),e=this.__resolveRoleId(e),[4,this.host.api.roles.removeSavedRole(e,this.host.currentUserId,n)];case 1:return t.sent(),[2]}})})},tl.prototype.findSavedRoles=function(o,i){return void 0===i&&(i={}),fc(this,void 0,void 0,function(){var e,n,r=this;return pc(this,function(t){switch(t.label){case 0:return i=ye.a.defaults(i,{ignoreNotFound:!1}),this.host.requireUser(),o=this._resolveModelId(o),[4,this.host.api.roles.findSavedRoles(this.host.currentUserId,o)];case 1:if(e=t.sent())return n=e.map(function(t){return r.__injectSearchResult({entity:{id:t.token,displayName:t.display_name},metadata:t,organizationId:o})}).filter(Boolean),this.host.models.Organization.touch(o),[2,n];if(i.ignoreNotFound)return[2];throw new Or.NotFoundError("saved roles",o)}})})},tl.prototype.reactToUpdateEventCR=function(t){var e,n=t.entity,r=n.display_name,o=n.metadata,i=n.organizationId;return e="group"===n.type?o.id:n.id,o=Nc(Nc({},o),{display_name:r,token:this.__resolveRoleId(e)}),this.__injectRoleFromMetadata({metadata:o,organizationId:i})},tl.prototype.reactToUpdateEvent=function(t){var e,n=t.data,r=n.display_name,o=n.metadata,i=n.organization_key;return e="tigertext:entity:group"===n.type?o.id:n.token,o=Nc(Nc({},o),{display_name:r,token:this.__resolveRoleId(e)}),this.__injectRoleFromMetadata({metadata:o,organizationId:i})},tl.prototype.__injectRoleFromMetadata=function(t){var e=t.metadata,n=void 0===e?{}:e,r=t.organizationId,o=t.replaceExisting,i=void 0===o||o,s=n.escalation_policy,a=n.token;if(!a)return null;var u="role:"+a;if(!i){var c=this.host.models.Role.get(u);if(c)return c}var l=this.host.models.Organization.get(r);this.host.metadata.__injectMetadata(a,r,Nc({feature_service:"role"},n)),this.host.models.User.injectPlaceholder({id:a,organizationId:r,displayName:n.display_name});var d={botUserId:a,displayName:n.display_name,id:u,organizationId:r};if(n.description&&(d.description=n.description),s&&s.escalation_path){var h=JSON.parse(JSON.stringify(s));h.id="escalationPolicy:"+a,h.targetId=a;var f=this.host.models.EscalationPolicy.inject(h);d.escalationPolicyId=f.id}else d.escalationPolicyId=null;if(n.room_assignment_id&&(d.assignmentGroupId=n.room_assignment_id),n.owners)if("string"==typeof n.owners)d.memberIds=n.owners.split(","),this.host.models.User.injectPlaceholder({id:n.owners});else{d.memberIds=n.owners.map(function(t){return t.token});for(var p=0,v=n.owners;p<v.length;p++){var y=v[p];this.host.models.User.injectPlaceholder(y)}}return n.tag_id?(d.roleTagId=r+":"+n.tag_id,this.host.models.RoleTag.inject(Nc(Nc({},ye.a.pick(n,"tag_id","tag_color","tag_name")),{id:d.roleTagId,organizationId:r}))):l&&(d.roleTagId=null),this.host.models.Role.inject(d)},tl.prototype.__parseRoleFromMetadata=function(t){var e=t.metadata,n=void 0===e?{}:e,r=t.organizationId,o=n.token;if(!o)return null;var i={$entityType:"role",botUserId:o,displayName:n.display_name,id:"role:"+o,organizationId:r},s=null;return n.tag_id&&(s={id:r+":"+n.tag_id,organizationId:r,color:n.tag_color,tagId:n.tag_id,name:n.tag_name,displayName:n.tag_name}).color&&(s.color=s.color.replace("0x","#")),i.roleTag=s,i},tl.prototype.getAll=function(){return this.host.models.Role.getAll()},tl.prototype.getById=function(t){return t=this.__resolveRoleId(t),this.host.models.Role.get("role:"+t)},tl.prototype.refresh=function(u){return fc(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return pc(this,function(t){switch(t.label){case 0:return 0===(e=Object.keys(this._roleConversations)).length?[2]:[4,this.host.entities.findMulti(e,u)];case 1:for(n=t.sent(),r=0,o=n;r<o.length;r++)i=o[r],s=i.entity,a=i.metadata,s&&a&&(a.owners||(a.owners=[]),this.__injectSearchResult({entity:{id:s.token,displayName:s.display_name},metadata:a,organizationId:u}));return[2]}})})},tl.prototype.reactToFriendsEventCR=function(a){return fc(this,void 0,void 0,function(){var e,n,r,o,i,s;return pc(this,function(t){switch(t.label){case 0:return e=a.action,n=a.attrs,r=n.id,o=n.metadata,i=void 0===o?{}:o,s=n.organizationId,n.action=e,n.token=r,[4,this.__reactToRoleChange(i.id,s,i.triggered_id,n)];case 1:return t.sent(),[2]}})})},tl.prototype.reactToFriendsEvent=function(s){return fc(this,void 0,void 0,function(){var e,n,r,o,i;return pc(this,function(t){switch(t.label){case 0:return e=s.data.friend,n=e.metadata,r=void 0===n?{}:n,o=e.organization_id,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["metadata","organization_id"]),[4,this.__reactToRoleChange(r.id,o,r.triggered_id,i)];case 1:return t.sent(),[2]}})})},tl.prototype.__reactToRoleChange=function(p,v,y,g){return fc(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f;return pc(this,function(t){switch(t.label){case 0:if(v=this._resolveModelId(v),p=this.__resolveRoleId(p),y=this._resolveModelId(y),e=this.host.currentUser,n=g.action,r=g.token,o=function(){return e.roles.some(function(t){return t.botUserId===p})},i=this._previouslyInRoles[p]||o(),s=g.event_status,"del"===n){if(s&&"end"!==s)return this._previouslyInRoles[p]=i,[2];delete this._previouslyInRoles[p]}return a=this.getById(p),[4,Promise.all([this.find(p,v,{bypassCache:!0,ignoreNotFound:!0}),this.host.users.find(y,{organizationId:v,ignoreNotFound:!0})])];case 1:return u=t.sent(),c=u[0],l=u[1],(a||c)&&((d="del"===n&&a&&!c)&&(c=a,h="role:"+p,this.host.models.Role.inject({id:h,memberIds:[]}),this.host.models.Role.eject(c)),(f=o())&&!i?this.emit("change",{type:"OPT_IN",role:c,target:e,triggeredBy:l}):!f&&i&&(this.host.models.Group.eject(r),this.host.models.User.touch(this.host.currentUserId),this.emit("change",{type:"OPT_OUT",isRoleDeleted:d,role:c,target:e,triggeredBy:l}))),[2]}})})},hc([Object(Vo.decorator)()],tl.prototype,"findAll",null),hc([Object(Vo.decorator)()],tl.prototype,"findByOrganizationId",null),hc([Object(Vo.decorator)()],tl.prototype,"find",null),hc([Object(Vo.decorator)()],tl.prototype,"saveRole",null),hc([Object(Vo.decorator)()],tl.prototype,"removeSavedRole",null),hc([Object(Vo.decorator)()],tl.prototype,"findSavedRoles",null),hc([Object(Vo.decorator)()],tl.prototype,"refresh",null),hc([Object(Vo.decorator)()],tl.prototype,"__reactToRoleChange",null),tl),Uc=(Ec=function(t,e){return(Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ec(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Lc=function(){return(Lc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Fc=(Uc(Jc,Oc=ra),Jc.prototype.findAll=function(o){return void 0===o&&(o={}),vc(this,void 0,void 0,function(){var e,n,r=this;return yc(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{ignoreNotFound:!0,bypassCache:!1}),0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return[4,Promise.all(e.map(function(t){return r.findAllForOrganization(t.id,o)}))];case 3:return n=t.sent(),[2,ye.a.flatten(n)]}})})},Jc.prototype.findAllForOrganization=function(i,s){return void 0===s&&(s={}),vc(this,void 0,void 0,function(){var e,n,r,o=this;return yc(this,function(t){switch(t.label){case 0:return s=ye.a.defaults(s,{ignoreNotFound:!0,bypassCache:!1}),i=this._resolveModelId(i),(e=this._resolveEntity(i)).rolesEnabled&&e.canAdminRoles?[4,this.host.api.roleTags.findAll(i)]:[2,[]];case 1:if(n=t.sent())return r=n.map(function(t){var e=i+":"+t.tag_id;return o.host.models.RoleTag.inject(Lc(Lc({},t),{id:e,organizationId:i}))}),this.host.models.Organization.touch(i),[2,r];if(s.ignoreNotFound)return[2,[]];throw new Or.NotFoundError("roleTags",i)}})})},Jc.prototype.reactToUpdateEventCR=function(t){var e=t.data,n=(e=Object(ea.l)(e)).entity,r=e.organization_id,o=n.color,i=n.display_name,s=n.id||n.token,a=o.color_id,u=o.color_value;return this.host.models.RoleTag.inject({color:a,colorValue:u,id:r+":"+s,name:i,organizationId:r,tagId:s})},Jc.prototype.reactToUpdateEvent=function(t){var e=t.data;if(!this.config.condensedReplays||!e.entity){var n=(e=Object(ea.l)(e)).color,r=e.display_name,o=e.organization_key,i=e.token,s=n.color_id,a=n.color_value;return this.host.models.RoleTag.inject({color:s,colorValue:a,id:o+":"+i,name:r,organizationId:o,tagId:i})}this.reactToUpdateEventCR({data:e})},Jc.prototype.getAll=function(){return this.host.models.RoleTag.getAll()},Jc.prototype.getById=function(t){return this.host.models.RoleTag.get(t)},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(Vo.decorator)()],Jc.prototype,"findAllForOrganization",null),Jc),Bc=(Ic=function(t,e){return(Ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ic(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qc=function(){return(qc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Vc=(Bc(Zc,wc=ra),Zc.prototype.batchDelete=function(t){var n=t.ids,r=t.organizationId;return mc(this,void 0,void 0,function(){var e=this;return _c(this,function(t){switch(t.label){case 0:if(!Array.isArray(n))throw new Or.ValidationError("ids","required","ids must be an array");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.scheduledMessages.batch({ids:n,operation:"destroy",organizationId:r})];case 1:return t.sent(),[2,n.map(function(t){return e.host.models.ScheduledMessage.inject({$deleted:!0,id:t})})]}})})},Zc.prototype.create=function(t){var n=t.attachment,r=t.body,o=t.endDate,e=t.network,i=void 0===e?"patient":e,s=t.noReply,a=void 0!==s&&s,u=t.organizationId,c=t.recipients,l=t.repeating,d=t.sendNow,h=void 0!==d&&d,f=t.startDate,p=t.startTime,v=t.templateId,y=t.timezoneName;return mc(this,void 0,void 0,function(){var e=this;return _c(this,function(t){switch(t.label){case 0:if(this._validate({body:r,endDate:o,organizationId:u,recipients:c,repeating:l,sendNow:h,shouldCheckId:!1,startDate:f,startTime:p}),!1===["patient"].includes(i))throw new Or.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.scheduledMessages.create({attachment:n,body:r,end_date:o,network:i,no_reply:a,organizationId:u,recipients:c,repeating:l,send_now:h,start_date:f,start_time:p,template_id:v,timezone_name:y})];case 1:return[2,t.sent().map(function(t){return t.sender_id=e.host.currentUserId,e.host.conversations.__injectCounterParty({entityAttrs:t,entityType:"scheduledMessage",organizationId:u})})]}})})},Zc.prototype.delete=function(e,n){return mc(this,void 0,void 0,function(){return _c(this,function(t){switch(t.label){case 0:return this._validate({id:e,organizationId:n,shouldCheckInvalid:!1}),[4,this.host.api.scheduledMessages.delete(e,n)];case 1:return t.sent(),[2,this.host.models.ScheduledMessage.inject({$deleted:!0,id:e})]}})})},Zc.prototype.downloadScheduledMessageFile=function(t){var n=t.scheduleId,r=t.fileName,o=t.organizationId;return mc(this,void 0,void 0,function(){var e;return _c(this,function(t){switch(t.label){case 0:return[4,this.host.api.scheduledMessages.downloadScheduledMessageFile({scheduleId:n,fileName:r,organizationId:o})];case 1:return e=t.sent(),[4,Object(fu.downloadFile)({attachmentContentType:e.type,blob:e,fileName:r})];case 2:return t.sent(),[2]}})})},Zc.prototype.fetchHits=function(s,a){return mc(this,void 0,void 0,function(){var e,n,r,o,i=this;return _c(this,function(t){switch(t.label){case 0:return e=["history","queue"].map(function(t){return i.search({category:t,feed:s,organizationId:a,pageSize:0})}),[4,Promise.all(e)];case 1:return n=t.sent(),r=n[0],o=n[1],[2,{history:r.metadata.totalHits,queue:o.metadata.totalHits}]}})})},Zc.prototype.find=function(t){var n=t.id,r=t.organizationId,o=t.category;return mc(this,void 0,void 0,function(){var e;return _c(this,function(t){switch(t.label){case 0:return this._validate({id:n,organizationId:r,shouldCheckInvalid:!1}),[4,this.host.api.scheduledMessages.find({id:n,organizationId:r,isHistoryCategory:"history"===o})];case 1:return e=t.sent(),[2,this.host.models.ScheduledMessage.inject(e)]}})})},Zc.prototype.findCoarseTimezone=function(o,i){return mc(this,void 0,void 0,function(){var e,n,r;return _c(this,function(t){switch(t.label){case 0:return[4,this.host.api.scheduledMessages.findCoarseTimezone(o,i)];case 1:return e=t.sent(),n=e.abbr,r=e.name,[2,{abbr:n,name:r}]}})})},Zc.prototype.getAll=function(){return this.host.models.ScheduledMessage.getAll()},Zc.prototype.getById=function(t){return this.host.models.ScheduledMessage.get(t)},Zc.prototype.search=function(t){var o=t.category,i=t.continuation,s=t.feed,e=t.network,a=void 0===e?"patient":e,u=t.organizationId,c=t.pageSize,l=t.range,n=t.sortBy,d=void 0===n?"scheduled_time":n,r=t.sortOrder,h=void 0===r?"asc":r;return mc(this,void 0,void 0,function(){var e,n,r;return _c(this,function(t){switch(t.label){case 0:return[4,this.host.search.query({query:qc(qc({},l?{range:l}:null),{schedule_message_category:o}),continuation:i,feedLevel:s,network:a,organizationId:u,pageSize:c,returnFields:[],sort:(r={},r[d]=h,r),types:["scheduledMessage"]})];case 1:return e=t.sent(),n=this._processSearchResults(e.results),[2,{metadata:e.metadata,results:n}]}})})},Zc.prototype.update=function(t){var n=t.attachment,r=t.body,o=t.endDate,i=t.id,s=t.organizationId,a=t.repeating,u=t.startDate,c=t.startTime,l=t.templateId,d=t.timezoneName;return mc(this,void 0,void 0,function(){var e;return _c(this,function(t){switch(t.label){case 0:return this._validate({body:r,endDate:o,id:i,organizationId:s,repeating:a,startDate:u,startTime:c}),[4,this.host.api.scheduledMessages.update({attachment:n,body:r,end_date:o,id:i,organizationId:s,repeating:a,start_date:u,start_time:c,template_id:l,timezone_name:d})];case 1:return e=t.sent(),[2,this.host.models.ScheduledMessage.inject(e)]}})})},Zc.prototype._processSearchResults=function(t){return t.map(function(t){return t.entity}).filter(function(t){return!t.$deleted})},Zc.prototype._validate=function(t){var e=t.body,n=t.endDate,r=t.id,o=t.organizationId,i=t.recipients,s=t.repeating,a=t.sendNow,u=t.shouldCheckId,c=void 0===u||u,l=t.shouldCheckInvalid,d=void 0===l||l,h=t.startDate,f=t.startTime;if(c&&!r)throw new Or.ValidationError("id","required");if(!o)throw new Or.ValidationError("organizationId","required");if(d){if(!e||0===e.trim().length)throw new Or.ValidationError("body","invalid","body must be at least 1 character");if(!(c||Array.isArray(i)&&0<i.length&&i.length<=5))throw new Or.ValidationError("recipients","invalid","recipients must be an array of ids between 1 and 5 elements");if(!a){var p=Date.parse(h+"T"+f);if(isNaN(p))throw new Or.ValidationError("startDate","invalid","start date and time must be the correct format");if(s){if(!1===["daily","weekly","biweekly","monthly"].includes(s))throw new Or.ValidationError("repeating","invalid",'repeating must be either "daily", "weekly", "biweekly", or "monthly"');var v=Date.parse(""+n);if(isNaN(v))throw new Or.ValidationError("endDate","invalid","endDate must be the correct format")}}}},gc([Object(Vo.decorator)()],Zc.prototype,"downloadScheduledMessageFile",null),gc([Object(Vo.decorator)()],Zc.prototype,"fetchHits",null),gc([Object(Vo.decorator)()],Zc.prototype,"find",null),gc([Object(Vo.decorator)()],Zc.prototype,"findCoarseTimezone",null),gc([Object(Vo.decorator)()],Zc.prototype,"search",null),Zc),Gc=(Qc.is=function(t){return t instanceof this},Qc),Hc=n(94),Wc=function(){return(Wc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yc=function(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})},Kc=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},$c={},Xc=function(t){return t.$entityType+":"+t.id};function Qc(t,e,n,r){this.id="searchResult:"+e+":"+t.id,this.entity=t,this.entityId=t.id,this.entityType=t.$entityType,this.metadata=r,this.organizationId=e,this.conversationId=n}function Zc(){return null!==wc&&wc.apply(this,arguments)||this}function Jc(){return null!==Oc&&Oc.apply(this,arguments)||this}function tl(){var h=null!==Tc&&Tc.apply(this,arguments)||this;return h.__injectSearchResult=function(t){var e=t.entity,n=t.metadata,r=void 0===n?{}:n,o=t.organizationId;return r=Nc(Nc({},r),{display_name:e.displayName,token:h.__resolveRoleId(e.id)}),h.__injectRoleFromMetadata({metadata:r,organizationId:o})},h.__injectRoleAssignmentEntity=function(t,e,n){return h.__injectRoleFromMetadata({metadata:{display_name:t,meta_type:e.meta_type,owners:e.owner_id,tag_color:e.tag_color,tag_id:e.tag_id,tag_name:e.tag_name,token:e.id},organizationId:n,replaceExisting:!1})},h.__resolveRoleId=function(t){if("string"!=typeof t){if(!zc.includes(t.$entityType))return t;t=h._resolveModelId(t)}return t.replace("role:","")},h._onChangeConversation=function(t,e){var n=e.counterParty,r=e.counterPartyType,o=n&&n.members&&0<n.members.length;if("group"===r&&o)for(var i=0,s=n.members;i<s.length;i++){var a=s[i];if(a.isRoleBot){var u=h._roleConversations[a.id]||[];if(u.includes(e)||u.push(e),h._roleConversations[a.id]=u,"ROLE_P2P"===n.groupType){var c=h._roleP2PConversations[a.id]||[];c.includes(e)||c.push(e),h._roleP2PConversations[a.id]=c}}}},h._onRemoveConversation=function(t,e){var n=e.counterParty,r=e.counterPartyType,o=n&&n.members&&0<n.members.length;if("group"===r&&o)for(var i=0,s=n.memberIds;i<s.length;i++){var a=s[i],u=h._roleConversations[a],c=u?u.indexOf(e):-1;if(-1<c&&u.splice(c,1),u&&0===u.length&&delete h._roleConversations[a],"ROLE_P2P"===n.groupType){var l=h._roleP2PConversations[a],d=l?l.indexOf(e):-1;-1<d&&l.splice(d,1),l&&0===l.length&&delete h._roleP2PConversations[a]}}},h}function el(){var _=null!==Ac&&Ac.apply(this,arguments)||this;return _._addProcessingEvent=function(t){var e=_.host.models.Product.getAll()[0];if(e){var n=t.actionType,r=t.entity;n===xo.ROLE_OPT_IN&&e.rolesOptingIn.push(r.id),e.activeProcessingEvents.push(t),_.host.models.Product.inject(e),_.emit("processing:start",t)}},_._removeProcessingEvent=function(t){var e=_.host.models.Product.getAll()[0];if(e){for(var n=e.activeProcessingEvents,r=e.rolesOptingIn,o=t.actionType,i=t.entity,s=n.length-1;0<=s;s--){var a=n[s];if(o===a.actionType&&i.id===a.entity.id&&(n.splice(s,1),o===xo.ROLE_OPT_IN&&r.includes(i.id)&&r.splice(r.indexOf(i.id),1),o!==xo.MESSAGE_REPLAY))break}_.host.models.Product.inject(e),_.emit("processing:stop",t)}},_._onChangeOrganization=function(t,e){var n=_.host.models.Product.getAll()[0];if(n){var r=_.host.models.Organization.getAll();if(0!==r.length){for(var o={organizations:r},i=0,s=0,a=0,u=0,c=0,l=0,d=r;l<d.length;l++){var h=d[l];h.$placeholder||(i+=h.conversations.length,s+=h.unreadCount,a+=h.unreadPriorityCount,h.networks.virtualWaitingRoom&&(u+=h.networks.patient.unreadCount,c+=h.networks.patient.unreadPriorityCount))}o.conversationCount=i,o.unreadCount=s,o.unreadPriorityCount=a,o.unreadVWRCount=u,o.unreadVWRPriorityCount=c;for(var f=!1,p=0,v=Object.entries(o);p<v.length;p++){var y=v[p],g=y[0],m=y[1];Nu()(n[g],m)||(n[g]=m,f=!0)}f&&_.host.models.Product.inject(n)}}},_}function nl(){return null!==Rc&&Rc.apply(this,arguments)||this}function rl(u,c,l){return Yc(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Kc(this,function(t){switch(t.label){case 0:if(!l.placeholderEntityAllowLoading)return[2];Object.defineProperty(c,"$$loading",{value:!0,configurable:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,l.finder(c.id)];case 2:return t.sent(),[3,4];case 3:return(n=t.sent()).code!==Or.NotFoundError.CODE&&n.code!==Or.PermissionDeniedError.CODE||(e=!0),[3,4];case 4:if(delete c.$$loading,e){for(r=0,o=Object.entries(l.notFoundAttributes);r<o.length;r++)i=o[r],s=i[0],a=i[1],Object(Hc.a)(c,s)&&(c[s]=a);Object.defineProperty(c,"$notFound",{value:!0,configurable:!0}),u.inject(c),l.onNotFound&&l.onNotFound(),l.onLoad&&l.onLoad(null),l.onFinish&&l.onFinish(null)}else delete c.$placeholder,delete c.$notFound,u.inject(c),l.onSuccess&&l.onSuccess(c),l.onLoad&&l.onLoad(c),l.onFinish&&l.onFinish(c);return[2]}})})}function ol(t,e,n){var r=Xc(e);if(!$c[r])return n.placeholderEntityDelayBeforeRefreshing?(Object.defineProperty(e,"$$loadingScheduled",{value:!0,configurable:!0}),void($c[r]=setTimeout(function(){return function(e,n,r){return Yc(this,void 0,void 0,function(){return Kc(this,function(t){try{return delete n.$$loadingScheduled,delete $c[Xc(n)],n.$placeholder?[2,rl(e,n,r)]:[2]}catch(t){console.error(t)}return[2]})})}(t,e,n)},n.placeholderEntityDelayBeforeRefreshing))):rl(t,e,n).catch(console.error)}function il(o,t){var n=t.finder,r=t.defaultPlaceholderAttrs,i=t.defaultNotFoundAttrs,s=t.placeholderEntityDelayBeforeRefreshing,a=t.placeholderEntityAllowLoading,u=t.shouldEnsure;o.ensureEntity=function(t,e){return void 0===e&&(e={}),"function"==typeof s&&(s=s()),"function"==typeof a&&(a=a()),function(t,e,n,r){var o;void 0===r&&(r={});var i=t.get(e);if(i)i.$placeholder?i.$$loading||i.$notFound||r.onlyPlaceholder||ol(t,i,r):(r.onExists&&r.onExists(i),r.onFinish&&r.onFinish(i));else{if(n=Wc(((o={})[t.idAttribute]=e,o),n),r.onMissing&&r.onMissing(),i=t.createInstance(n),Object.defineProperty(i,"$placeholder",{value:!0,configurable:!0}),t.inject(i),r.onlyPlaceholder)return i;ol(t,i,r)}}(o,t,Wc(Wc({},r),e.attrs),Wc({finder:n,notFoundAttributes:i,placeholderEntityDelayBeforeRefreshing:s,placeholderEntityAllowLoading:a},e))},o.waitForEnsuredEntity=function(n,r){return void 0===r&&(r={}),new Promise(function(t,e){o.ensureEntity(n,Wc(Wc({},r),{onFinish:t}))})},o.shouldEnsure=function(t,e,n){return void 0===n&&(n={}),"string"==typeof t&&(t=o.get(t)),!t||!(!u||!u(t,e,n))||!(!t.$placeholder||t.$$loading||e)}}function sl(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function al(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function ul(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function cl(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function ll(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function dl(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function hl(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function fl(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function pl(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function vl(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function yl(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function gl(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function ml(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function _l(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function bl(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function wl(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var Il,Ol,El,Tl,Sl,Al,Cl,Rl,Pl,jl,xl,Ml,kl=function(){return(kl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Nl=["autoForwardReceiverIds","conversationId","department","title"],zl=function(t,e){var u=e.host,n=t.defineModel("user",{replaceKeys:{avatar:"avatarUrl",blockedPersonal:"contactsMessagingBlockedByOrganizationIds",organizationKey:"organizationId",organizationToken:"organizationId",timeToLive:"messagesTTL"},defaultValues:{botRole:null,contactsMessagingBlockedByOrganizationIds:[],isPatient:!1,isPatientContact:!1,organizationIds:[],presence:jo.UNKNOWN,profileByOrganizationId:{},removedFromOrg:!1,roles:[]},skipCamelizationForKeys:["metadata"],parseAttrs:function(t){var e=t.organizationId;if(t.dndAutoForwardReceivers?t.autoForwardReceiverIds=t.dndAutoForwardReceivers.map(function(t){return t.token}):""===t.dndAutoForwardReceiver||"undefined"===t.dndAutoForwardReceiver?t.autoForwardReceiverIds=[]:void 0!==t.dndAutoForwardReceiver&&(t.autoForwardReceiverIds=[t.dndAutoForwardReceiver]),delete t.dndAutoForwardReceiver,delete t.dndAutoForwardReceivers,e){delete t.organizationId,t.organizationIds||(t.organizationIds=[]),t.organizationIds.includes(e)||t.organizationIds.push(e);var n=kl(kl({},ye.a.pick(t,Nl)),{userId:t.id,organizationId:e});delete t.autoForwardReceiverIds,delete t.conversationId,t.profileByOrganizationId||(t.profileByOrganizationId={}),t.profileByOrganizationId[e]=n}if("patientId"in t&&!t.patientId.startsWith("patient:")){var r="patient:"+t.patientId,o=t.patientId;t.isPatient=!t.isPatientContact,t.patientId=r,t.patientBroadcastListDetails={addedByDisplayName:t.addedByDisplayName,addedOn:t.addedOn};var i={id:r,dob:t.patientDob,gender:t.patientGender,mrn:t.patientMrn};if(t.isPatient)i.userId=t.id;else if(t.isPatientContact){var s="patientContact:"+t.id;t.patientContactId=s,u.models.User.injectPlaceholder({id:o,displayName:t.patientDisplayName,patientId:r}),u.models.PatientContact.injectPlaceholder({id:s,relation:t.relationName,userId:t.id,patientId:r}),i.userId=o}u.models.Patient.injectPlaceholder(i),delete t.addedByDisplayName,delete t.addedOn,delete t.patientDisplayName,delete t.patientDob,delete t.patientGender,delete t.patientMrn,delete t.relationName}if("metadata"in t){if("feature_service"in t.metadata&&"patient_messaging"===t.metadata.feature_service){var a=(i=t.metadata).is_patient_contact;"string"==typeof a&&"true"===a||"boolean"==typeof a&&a?(t.patientContactId="patientContact:"+t.id,t.isPatientContact=!0,u.users._injectPatientContactEntity(t,e)):(t.patientId="patient:"+t.id,t.isPatient=!0,u.users._injectPatientEntity(i,t.id,e))}"feature_service"in t.metadata&&"role"===t.metadata.feature_service&&e&&u.roles.__injectRoleFromMetadata({metadata:kl(kl({},t.metadata),{display_name:t.display_name,token:t.id}),organizationId:e}),delete t.metadata}return t.avatarUrl&&(t.avatarUrl=bc(t.avatarUrl,u.config)),!t.displayName&&t.name&&(t.displayName=t.name),t.displayName&&Object(Oa.isPhone)(t.displayName)&&(t.displayName=Object(Oa.formatPhone)(t.displayName)),t},beforeInject:function(t,e){if(e&&(t.organizationIds&&(t.organizationIds=ye.a.union(e.organizationIds,t.organizationIds)),t.profileByOrganizationId)){var n={};if(e.profileByOrganizationId)for(var r=0,o=Object.entries(e.profileByOrganizationId);r<o.length;r++){var i=o[r],s=i[0],a=i[1];n[s]={},Object.assign(n[s],a)}for(var u=0,c=Object.entries(t.profileByOrganizationId);u<c.length;u++){var l=c[u];s=l[0],a=l[1],n[s]||(n[s]={}),Object.assign(n[s],a)}t.profileByOrganizationId=n}},afterAssignment:function(t){var e=t.profileByOrganizationId;t.contactsMessagingBlocked=0<t.contactsMessagingBlockedByOrganizationIds.length,t.isRoleBot=t.metadata.some(function(t){return"role"===t.data.feature_service}),t.shouldDisplay=!t.metadata.some(function(t){return"true"===t.data.invisible});for(var n=0,r=Object.values(e);n<r.length;n++){var o=r[n];t.dnd||(o.autoForwardReceiverIds=[]),u.users._setMembersOnEntity(o,"autoForwardReceiverIds","autoForwardReceivers")}t.removedFromOrg&&(!t.displayName||t.$$loading||t.$$loadingScheduled||t.$notFound)&&(t.displayName="Removed User")},relations:{belongsTo:{patient:{type:"patient",foreignKey:"patientId"},patientContact:{type:"patientContact",foreignKey:"patientContactId"}},hasMany:{metadata:{type:"metadata",foreignKey:"entityId"}}}});return il(n,{finder:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=u.users).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return u.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return u.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading..."},defaultNotFoundAttrs:{displayName:"<User Not Found>"}}),n},Dl=(Ml=function(t,e){return(Ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ml(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ul=function(){return(Ul=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ll=["avatar","conversation_id","department","description","display_name","dnd_auto_forward_receiver","dnd","first_name","group_token","is_public","last_login_time","last_name","members","name","network","num_members","organization_key","pagers","status","title","token","total_members"],Fl={distributionList:Mo.toServer(Mo.DISTRIBUTION_LIST),distributionListMember:Mo.toServer(Mo.DISTRIBUTION_LIST_MEMBER),forum:Mo.toServer(Mo.FORUM),group:Mo.toServer(Mo.GROUP),messageTemplate:Mo.toServer(Mo.MESSAGE_TEMPLATE),organization:Mo.toServer(Mo.ORGANIZATION),patient_account:Mo.toServer(Mo.PATIENT),patientDistributionList:Mo.toServer(Mo.PATIENT_DISTRIBUTION_LIST),scheduledMessage:Mo.toServer(Mo.SCHEDULED_MESSAGE),tag:Mo.toServer(Mo.TAG),team:Mo.toServer(Mo.TEAM),user:Mo.toServer(Mo.USER)},Bl=Object.values(Fl),ql=(Dl(Pd,xl=ra),Pd.prototype.query=function(J){return sl(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O,E,T,S,A,C,R,P,j,x,M,k,N,z,D,U,L,F,B,q,V,G,H,W,Y,K,$,X,Q,Z;return al(this,function(t){switch(t.label){case 0:if(e=J.continuation,n=void 0===e?null:e,r=J.enabledCapabilities,o=void 0===r?[]:r,i=J.excludeEmptyLists,s=void 0!==i&&i,a=J.excludeIds,u=void 0===a?[]:a,c=J.excludeSelf,l=void 0!==c&&c,d=J.followContinuations,h=void 0!==d&&d,f=J.includeDisabled,p=void 0!==f&&f,v=J.network,y=void 0===v?"provider":v,g=J.organizationId,m=void 0===g?null:g,_=J.organizationIds,b=void 0===_?[]:_,w=J.pageSize,I=J.query,O=void 0===I?{}:I,E=J.resultsFormat,T=void 0===E?"entities":E,S=J.returnFields,A=void 0===S?Ll:S,C=J.sort,R=void 0===C?[]:C,P=J.types,0===(j=void 0===P?[]:P).length)throw new Or.ValidationError("types","required","no types specified");if(j=ye.a.uniq(j.map(function(t){return Mo.isValid(t)?Mo.toServer(t):Fl[t]})),0<(x=ye.a.difference(j,Bl)).length)throw new Or.ValidationError("types","invalid","invalid types: "+x.join(", "));if(m&&(b=[m]),0===b.length)throw new Or.ValidationError("organizationIds","invalid","search must be done in a context of an organization");if(1===b.length&&(M=this.host.models.Organization.get(m))&&M.isContacts)return k=this._queryLocalOrganization({organization:M,query:O,types:j}),$=k.results,N=k.metadata,[2,{results:$,metadata:N}];if("ids"===T&&(T="tokens"),u=Object(ea.d)(u),z={directory:b,include_disabled:p,render_metadata:!0,results_format:T,return_fields:A,type:j},o.length&&(z.enabled_capabilities=o),R&&R.length?z.sort=R.map(function(t){return ea.a.underscoreKey(t)}):"object"==typeof R&&(z.sort=R),z.type.includes("schedule_message")&&J.feedLevel&&(z.feed_level=J.feedLevel),isNaN(parseInt(w))||(z.page_size=w),D={},O&&0<Object.keys(O).length){for(U=0,L=Object.entries(O);U<L.length;U++)F=L[U],B=F[0],q=F[1],B.includes(",")&&(V=B.split(",").map(ea.a.underscoreKey).join(","),D[V]=q,delete O[B]);D=Ul(Ul({},D),ea.a.underscoreObject(O)),z.bool={must:D}}return s&&(j.includes("distribution_list")||j.includes("patient_distribution_list"))&&(z.bool=Object.assign({},z.bool,{must_not:{total_members:"0"}})),G=[{continuation:n,excludeIds:u,excludeSelf:l,followContinuations:h,network:y,params:z}],[4,Promise.all(G.map(this._query))];case 1:for(H=t.sent(),W=[],Y=0,K=H;Y<K.length;Y++)for($=K[Y].results,X=0,Q=$;X<Q.length;X++)Z=Q[X],W.push(Z);return[2,{results:W=ye.a.uniqBy(W,"entity"),metadata:H[0].metadata}]}})})},Pd.prototype._queryLocalOrganization=function(t){var e=t.organization,n=t.query,r=t.types,o=e.id,i=this._searchLocalOrganization({organization:e,query:n,types:r}),s={firstHit:1,totalHits:i.length},a=Object.keys(n);if(0===i.length&&0<a.length){var u=a.find(function(t){return t.includes("displayName")}),c=u?n[u]:n[a[0]];if(Object(Je.isEmail)(c)||Object(Oa.isPhone)(c)){var l=Object(Je.isEmail)(c)?c:Object(Oa.normalizePhoneUS)(c),d=this.host.models.User.createInstance({displayName:Object(Oa.isPhone)(c)?Object(Oa.formatPhone)(c):c,id:l,messageAnyoneRecipient:!0,organizationId:o});return{results:[new Gc(d,o,s)],metadata:s}}}return{results:i,metadata:s}},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);3<i&&s&&Object.defineProperty(e,n,s)}([Object(Vo.decorator)()],Pd.prototype,"query",null),Pd),Vl=(jl=function(t,e){return(jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}jl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Gl=(Vl(Rd,Pl=ra),Rd.prototype.mounted=function(){this._fetched=!1},Rd.prototype.dispose=function(){this._fetched=!1},Rd.prototype.find=function(o,t){var e=void 0===t?{}:t,i=e.organizationId,n=e.bypassCache,s=void 0!==n&&n;return cl(this,void 0,void 0,function(){var e,n,r;return ll(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!o)throw new Or.ValidationError("id","required");if(!i)throw new Or.ValidationError("organizationId","required");return s||!(e=this.host.models.Team.get(o))||e.$placeholder?[4,this.host.api.teams.find(o,{organizationId:i})]:[2,e];case 1:return n=t.sent(),r=n.team,[2,e=this.host.models.Team.inject(r)]}})})},Rd.prototype.refresh=function(e,t){var n=(void 0===t?{}:t).organizationId;return cl(this,void 0,void 0,function(){return ll(this,function(t){switch(t.label){case 0:return[4,this.find(e,{organizationId:n,bypassCache:!0})];case 1:return[2,t.sent()]}})})},Rd.prototype.findAll=function(t){var e=(void 0===t?{}:t).bypassCache,o=void 0!==e&&e;return cl(this,void 0,void 0,function(){var e,n,r;return ll(this,function(t){switch(t.label){case 0:return!o&&this._fetched?[2,this.getAll()]:0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=t.sent(),t.label=2;case 2:return[4,this.host.search.query({types:["team"],organizationIds:e.map(function(t){return t.id}),query:{displayName:""},followContinuations:!0})];case 3:return n=t.sent().results,r=n.map(function(t){return t.entity}),this._fetched=!0,[2,r]}})})},Rd.prototype.findByOrganizationId=function(n){return cl(this,void 0,void 0,function(){var e;return ll(this,function(t){switch(t.label){case 0:return n=this._resolveModelId(n),[4,this.host.organizations.find(n)];case 1:return e=t.sent(),[4,this.host.search.query({types:["team"],organizationIds:e.id,query:{displayName:""},followContinuations:!0})];case 2:return[2,t.sent().results.map(function(t){return t.entity})]}})})},Rd.prototype.refreshAll=function(){return cl(this,void 0,void 0,function(){return ll(this,function(t){switch(t.label){case 0:return[4,this.findAll({bypassCache:!0})];case 1:return[2,t.sent()]}})})},Rd.prototype.getAll=function(){return this.host.models.Team.getAll()},Rd.prototype.create=function(t){var i=t.avatar,e=t.canMembersLeave,s=void 0===e||e,n=t.canRequestToJoin,a=void 0===n||n,u=t.description,c=t.displayName,r=t.memberIds,l=void 0===r?[]:r,d=t.organizationId;return cl(this,void 0,void 0,function(){var e,n,r,o=this;return ll(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!d)throw new Or.ValidationError("organizationId","required");if(l.length<2)throw new Or.ValidationError("memberIds","required to have 2 or more IDs");return[4,Promise.all(l.map(this.host.roles.__resolveRoleId).filter(Boolean).map(function(t){return o._resolveModelIdWithTypes(t,"user")}).map(function(t){return o.host.users.find(t,{organizationId:d})}))];case 1:return e=t.sent(),n=ya.a.call(e),l=n.map(function(t){return o._resolveModelIdWithTypes(t,"user")}),[4,this.host.api.teams.create({avatar:i,canMembersLeave:s,canRequestToJoin:a,description:u,displayName:c,memberIds:l,organizationId:d})];case 2:return r=t.sent(),[2,this.host.models.Team.inject(r.team)]}})})},Rd.prototype.update=function(t){var n=t.avatar,e=t.canMembersLeave,r=void 0===e||e,o=t.canRequestToJoin,i=void 0===o||o,s=t.description,a=t.displayName,u=t.id,c=t.memberIds,l=void 0===c?[]:c,d=t.organizationId;return cl(this,void 0,void 0,function(){var e;return ll(this,function(t){switch(t.label){case 0:if(this.host.requireUser(),!u)throw new Or.ValidationError("id","required");if(!d)throw new Or.ValidationError("organizationId","required");if(l.length<2)throw new Or.ValidationError("memberIds","required to have 2 or more IDs");return l=l.map(this.host.roles.__resolveRoleId),[4,this.host.api.teams.update({avatar:n,canMembersLeave:r,canRequestToJoin:i,description:s,displayName:a,id:u,memberIds:l,organizationId:d})];case 1:return e=t.sent(),[2,this.host.models.Team.inject(e.team)]}})})},Rd.prototype.delete=function(r,t){var o=t.organizationId;return cl(this,void 0,void 0,function(){var e,n;return ll(this,function(t){switch(t.label){case 0:if(!o)throw new Or.ValidationError("organizationId","required");if(!r)throw new Or.ValidationError("teamId","required");return[4,this.host.api.teams.delete(r,{organizationId:o})];case 1:return 204===(e=t.sent())&&(n=this.host.models.Team.get(r))&&this.host.models.Team.eject(n),[2,e]}})})},Rd.prototype.requestToJoin=function(n,t){var r=t.requestedById,o=t.organizationId;return cl(this,void 0,void 0,function(){var e;return ll(this,function(t){switch(t.label){case 0:if(!o)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("teamId","required");if(!r)throw new Or.ValidationError("requestedById","required");return[4,this.host.api.teams.requestToJoin(n,{requestedById:r,organizationId:o})];case 1:return 204===(e=t.sent())&&this.host.models.Team.inject({id:n,hasCurrentUserPending:!0}),[2,e]}})})},Rd.prototype.acceptJoinRequest=function(e,t){var n=t.teamId,r=t.organizationId,o=t.handledAsId;return cl(this,void 0,void 0,function(){return ll(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("teamId","required");if(!e)throw new Or.ValidationError("requestId","required");if(!o)throw new Or.ValidationError("handledAsId","required");return[4,this.host.api.teams.updateJoinRequest(e,{teamId:n,organizationId:r,handledAsId:o,status:"accepted"})];case 1:return[2,t.sent()]}})})},Rd.prototype.declineJoinRequest=function(e,t){var n=t.teamId,r=t.organizationId,o=t.handledAsId;return cl(this,void 0,void 0,function(){return ll(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("teamId","required");if(!e)throw new Or.ValidationError("requestId","required");if(!o)throw new Or.ValidationError("handledAsId","required");return[4,this.host.api.teams.updateJoinRequest(e,{teamId:n,organizationId:r,handledAsId:o,status:"declined"})];case 1:return[2,t.sent()]}})})},Rd.prototype.leave=function(n,t){var r=(void 0===t?{}:t).organizationId;return cl(this,void 0,void 0,function(){var e;return ll(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("teamId","required");if(!r)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.teams.leave(n,{organizationId:r})];case 1:return 204===(e=t.sent())&&this.refresh(n,{organizationId:r}),[2,e]}})})},Rd.prototype._setHasUserPending=function(t){if(t.pendingRequestUserIds)for(var e=0,n=t.pendingRequestUserIds;e<n.length;e++)if(n[e]===this.host.currentUserId)return void(t.hasCurrentUserPending=!0)},Rd.prototype.__injectTeamRequest=function(t){if(!t.id)return null;var e;if(t.created_by&&t.created_by.token&&(e=this.host.models.User.inject(t.created_by)),t.team&&t.team.id){var n=t.status,r=Object.assign({},t.team);e&&e.id===this.host.currentUserId&&("accepted"===n?(r.hasCurrentUserBeenDeclined=!1,r.hasCurrentUserPending=!1):"declined"===n&&(r.hasCurrentUserBeenDeclined=!0,r.hasCurrentUserPending=!1)),this.host.models.Team.inject(r)}return this.host.models.TeamRequest.inject(t)},Rd.prototype.resetDeclinedUserOnTeam=function(t){this.host.models.Team.inject({id:t,hasCurrentUserBeenDeclined:!1})},ul([Object(Vo.decorator)()],Rd.prototype,"find",null),ul([Object(Vo.decorator)()],Rd.prototype,"refresh",null),ul([Object(Vo.decorator)()],Rd.prototype,"findAll",null),ul([Object(Vo.decorator)()],Rd.prototype,"findByOrganizationId",null),ul([Object(Vo.decorator)()],Rd.prototype,"refreshAll",null),Rd),Hl=n(67),Wl=n.n(Hl),Yl=(Rl=function(t,e){return(Rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Rl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Kl=ko.GLOBAL,$l=(Yl(Cd,Cl=ra),Cd.prototype.mounted=function(){this._lastStartTypingAPICalls={},this._lastStopTypingAPICalls={},this._typers={},this._currentUserTyping={},this.host.on("message:sending",this._onMessageSending)},Cd.prototype.dispose=function(){pa.a.call(la.a.call(pa.a.call(Wl.a.call(this._typers),ye.a.values)),"timer").forEach(function(t){return null!==t&&clearTimeout(t)}),pa.a.call(Wl.a.call(this._currentUserTyping),"timer").forEach(function(t){return null!==t&&clearTimeout(t)}),this._lastStartTypingAPICalls=null,this._lastStopTypingAPICalls=null,this._typers=null,this.host.removeListener("message:sending",this._onMessageSending)},Cd.prototype.reactToIsTypingEvent=function(t){var e,n=this,r=t.data;if(this.host.requireUser(),(e=r.proxy_token?r.proxy_token:r.sender_token)!==this.host.currentUserId){var o=r.group_token,i=r.org_token,s=o||i||null,a=o?ko.GROUP:i?ko.ORGANIZATION:Kl,u="typing"===r.status;this.host.models.User.ensureEntity(e,{onlyPlaceholder:!1}),a===Kl?ye.a.get(this.host,"currentUser.organizationIds",[]).forEach(function(t){n._setTypingStatusOfUser(t,ko.ORGANIZATION,e,u)}):this._setTypingStatusOfUser(s,a,e,u)}},Cd.prototype.startTyping=function(o,t){var e=void 0===t?{}:t,i=e.autoStopAfterTimeout,s=e.senderId,a=e.organizationId;return hl(this,void 0,void 0,function(){var e,n,r=this;return fl(this,function(t){switch(t.label){case 0:return void 0===o?[2]:(o=this._resolveModelId(o),s=this._resolveModelId(s),this.host.requireUser(),[4,this._sendStartTyping(o,s,a)]);case 1:return t.sent(),(e=this._currentUserTyping[o])?(clearTimeout(this._currentUserTyping[o].timer),e.timer=null):(e={},this._currentUserTyping[o]=e),n="number"==typeof i?i:this.host.config.clearTypingStatusTimeout,e.timer=setTimeout(function(){r.logger.info("auto stop typing for current user",o),r.stopTyping(o,{senderId:s})},n),[2]}})})},Cd.prototype._sendStartTyping=function(a,u,c){return hl(this,void 0,void 0,function(){var e,n,r,o,i,s;return fl(this,function(t){switch(t.label){case 0:return this._lastStartTypingAPICalls[a]?(e=this._lastStartTypingAPICalls[a],n=e.expiresAt,r=e.retVal,o=e.lastSenderId,u===o?[3,2]:[4,this.stopTyping(a,{senderId:o})]):[3,3];case 1:t.sent(),t.label=2;case 2:if(ba()().isBefore(n))return[2,r];t.label=3;case 3:return[4,this.host.api.typingStatus.startTyping(a,u,c)];case 4:return i=t.sent(),s=ba()().add(this.config.clearTypingStatusThrottleDelay,"ms"),this._lastStartTypingAPICalls[a]={expiresAt:s,retVal:i,lastSenderId:u},[2,i]}})})},Cd.prototype.stopTyping=function(n,t){var r=(void 0===t?{}:t).senderId;return hl(this,void 0,void 0,function(){var e;return fl(this,function(t){switch(t.label){case 0:return void 0===n?[2]:(n=this._resolveModelId(n),r=this._resolveModelId(r),this.host.requireUser(),(e=this._currentUserTyping[n])&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null),[4,this._sendStopTyping(n,r)]);case 1:return t.sent(),[2]}})})},Cd.prototype._sendStopTyping=function(s,a){return hl(this,void 0,void 0,function(){var e,n,r,o,i;return fl(this,function(t){switch(t.label){case 0:return(e=this._lastStopTypingAPICalls[s])&&(n=e.expiresAt,r=e.retVal,ba()().isBefore(n))?[2,r]:[4,this.host.api.typingStatus.stopTyping(s,a)];case 1:return o=t.sent(),i=ba()().add(this.config.clearTypingStatusThrottleDelay,"ms"),this._lastStopTypingAPICalls[s]={expiresAt:i,retVal:o,senderId:a},[2,o]}})})},Cd.prototype._setTypingStatusOfUser=function(t,e,n,r,o){var i=this;void 0===o&&(o=!1),t=t||ko.GLOBAL;var s=this._typers[t];if(r){s||(s={},this._typers[t]=s);var a=(u=s[n])&&null!==u.timer;if(u?clearTimeout(u.timer):(u={},s[n]=u),u.timer=setTimeout(function(){i.logger.info("auto stop typing for other typer",t,n),i._setTypingStatusOfUser(t,e,n,!1,!0)},this.host.config.clearTypingStatusTimeout),a)return}else{var u;if(!(a=(u=s&&s[n])&&null!==u.timer))return;clearTimeout(u.timer),u.timer=null}this.emit("change",{userId:n,contextId:t,contextType:e,isTyping:r,timedOut:o})},Cd.prototype.isUserTyping=function(e,t){var n=this,r=(void 0===t?{}:t).organizationId;return e=this._resolveModelId(e),r?this._isUserTypingInContext(r,e):ye.a.get(this.host,"currentUser.organizationIds",[]).some(function(t){return n._isUserTypingInContext(t,e)})},Cd.prototype.isCurrentUserTyping=function(t){t=this._resolveModelId(t);var e=this._currentUserTyping[t];return!!e&&null!==e.timer},Cd.prototype.isUserTypingInGroup=function(t,e){return e=this._resolveModelId(e),t=this._resolveModelId(t),this._isUserTypingInContext(t,e)},Cd.prototype._isUserTypingInContext=function(t,e){var n=this._typers[t],r=n&&n[e];return!!r&&null!==r.timer},dl([Object(Vo.decorator)()],Cd.prototype,"_sendStartTyping",null),dl([Object(Vo.decorator)()],Cd.prototype,"_sendStopTyping",null),Cd),Xl=(Al=function(t,e){return(Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Al(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ql=function(){return(Ql=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Zl=(Xl(Ad,Sl=ra),Ad.prototype.dispose=function(){Vo.decorator.clear(this._findAll)},Ad.prototype.findAll=function(t){var e=void 0===t?{}:t,n=e.userId,r=void 0===n?this.host.currentUserId:n,o=e.organizationId;return vl(this,void 0,void 0,function(){return yl(this,function(t){return this.host.requireUser(),[2,this._findAll(r,o)]})})},Ad.prototype.refreshAll=function(t){var e=void 0===t?{}:t,n=e.userId,r=void 0===n?this.host.currentUserId:n,o=e.organizationId;return vl(this,void 0,void 0,function(){return yl(this,function(t){return this.host.requireUser(),Vo.decorator.clear(this._findAll),[2,this._findAll(r,o)]})})},Ad.prototype._findAll=function(l,n){return void 0===n&&(n=this._pickOrganizationId()),vl(this,void 0,void 0,function(){var e,u,c=this;return yl(this,function(t){switch(t.label){case 0:return[4,this.host.api.userRoles.findAll(l,n)];case 1:return e=t.sent(),u={userRoles:[],productRoles:[]},e.forEach(function(t){var e=t.organization,n=t.product;if(e){var r=e.organization_id,o=c.host.organizations.getById(r),i=c.host.models.UserRoles.inject(Ql({id:c._getOrganizationKey({organizationId:r,userId:l}),userId:l},e));o&&c.host.models.Organization.touch(o),u.userRoles.push(i)}else if(n){var s=n.product_id,a=c.host.models.ProductRoles.inject(Ql({id:c._getProductKey({productId:s,userId:l}),userId:l},n));c.host.models.Product.inject({id:s}),u.productRoles.push(a)}}),[2,u]}})})},Ad.prototype._pickOrganizationId=function(){var t=this.host.organizations.getAll();return 0===t.length?"placeholder":t[0].id},Ad.prototype.getAllUserRoles=function(){return this.host.models.UserRoles.getAll()},Ad.prototype.getByOrganizationId=function(t,e){var n=(void 0===e?{}:e).userId,r=void 0===n?this.host.currentUserId:n,o=this._getOrganizationKey({organizationId:t,userId:r});return this.host.models.UserRoles.get(o)},Ad.prototype._getOrganizationKey=function(t){var e=t.organizationId,n=t.userId;return"userRoles:"+(void 0===n?this.host.currentUserId:n)+":"+e},Ad.prototype.getAllProductRoles=function(){return this.host.models.ProductRoles.getAll()},Ad.prototype.getByProductId=function(t,e){var n=(void 0===e?{}:e).userId,r=void 0===n?this.host.currentUserId:n,o=this._getProductKey({productId:t,userId:r});return this.host.models.ProductRoles.get(o)},Ad.prototype._getProductKey=function(t){var e=t.productId,n=t.userId;return"productRoles:"+(void 0===n?this.host.currentUserId:n)+":"+e},pl([Object(Vo.decorator)()],Ad.prototype,"findAll",null),pl([Object(Vo.decorator)()],Ad.prototype,"refreshAll",null),pl([Object(Vo.decorator)({memoize:!0,serializeArguments:function(t){return t[0]}})],Ad.prototype,"_findAll",null),Ad),Jl=n(96),td=n.n(Jl),ed=(Tl=function(t,e){return(Tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Tl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),nd=function(){return(nd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rd=(ed(Sd,El=ra),Sd.prototype.mounted=function(){this._defaultOrganizationId=null,this._roleMemberIds={},this.host.models.Metadata.on("afterInject",this._onChangeMetadata),this.host.models.Metadata.on("afterEject",this._onChangeMetadata),this.host.models.Role.on("afterInject",this._onChangeRole),this.host.models.Role.on("afterEject",this._onRemoveRole)},Sd.prototype.dispose=function(){this._defaultOrganizationId=null,this._roleMemberIds={},this.host.models.Metadata.removeListener("afterInject",this._onChangeMetadata),this.host.models.Metadata.removeListener("afterEject",this._onChangeMetadata),this.host.models.Role.removeListener("afterInject",this._onChangeRole),this.host.models.Role.removeListener("afterEject",this._onRemoveRole)},Sd.prototype.signInWithMagicToken=function(t,e){void 0===e&&(e={});var n={Authorization:"magic-token "+t};return this._signInWithHeaders(n,e)},Sd.prototype.signInWithApiKeyAndSecret=function(t,e,n){void 0===n&&(n={});var r=this.httpClient.getAuthHeaders({key:t,secret:e});return this._signInWithHeaders(r,n)},Sd.prototype.signIn=function(t,e,n){void 0===n&&(n={}),Object(Oa.isPhone)(t)&&(t=Object(Oa.normalizePhoneUS)(t));var r={Authorization:this.getSignInAuthHeader(t,e)};return this._signInWithHeaders(r,n)},Sd.prototype._checkPartnerName=function(){if(!this.config.partnerName)throw new Error("`partnerName` must be supplied as a config option for `new TigerConnect.Client()`")},Sd.prototype._signInWithHeaders=function(r,o){return void 0===o&&(o={}),ml(this,void 0,void 0,function(){var e,n;return _l(this,function(t){switch(t.label){case 0:return this._checkPartnerName(),[4,this.host.api.users.signIn(r,o)];case 1:return e=t.sent(),n=this.host.models.User.inject(e.data.user),[2,{auth:e.data.auth,user:n}]}})})},Sd.prototype.checkLogin=function(e,n){return void 0===n&&(n={udid:void 0}),ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return this._checkPartnerName(),[4,this.host.api.users.checkLogin(e,n)];case 1:return[2,t.sent().data]}})})},Sd.prototype.signUp=function(i){return void 0===i&&(i={udid:void 0,email:void 0,password:void 0,countryCode:void 0,version:void 0}),ml(this,void 0,void 0,function(){var e,n,r,o;return _l(this,function(t){switch(t.label){case 0:return[4,this.host.api.users.signUp(i)];case 1:return e=t.sent(),n=this.host.models.User.inject(e.data.user),r=e.data.auth,o={user:n,auth:r},this.host.emit("signUp",o),[2,o]}})})},Sd.prototype.signOut=function(t){var e=void 0===t?{}:t,n=e.fromServer,i=void 0!==n&&n,r=e.resetClient,s=void 0===r||r;return ml(this,void 0,void 0,function(){var e,n,r,o;return _l(this,function(t){switch(t.label){case 0:if(!this.host.isSignedIn)return[2,!1];n=e=!1,this.host.emit("signingOut",{fromServer:i,resetClient:s}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.host.api.users.signOut()];case 2:return r=t.sent(),e=!0,[3,4];case 3:return o=t.sent(),n=!0,this.httpClient.isUnauthorizedError(o)?(e=!0,[3,4]):[2,Promise.reject(o)];case 4:return e&&(this.host._setCurrentUser(null),this.host._removeAuth()),this.host.emit("signedOut",{externalLogoutUrl:n?null:r.data.external_logout_url,fromServer:i,resetClient:s&&e,signedOut:e}),[2,e]}})})},Sd.prototype.createQRCode=function(){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return[4,this.host.api.qrCode.create()];case 1:return[2,t.sent()]}})})},Sd.prototype.findOrCreate=function(u,c){return void 0===c&&(c={}),ml(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return _l(this,function(t){switch(t.label){case 0:return e=c.organizationId,n=!1,e?[4,this.host.organizations._findAll()]:[3,2];case 1:t.sent(),r=this.host.models.Organization.get(e),n=!!r&&r.isContacts,t.label=2;case 2:return(o=n&&(Object(Je.isEmail)(u)||Object(Oa.isPhone)(u)))&&u!==this.host.currentUserId&&!this.getById(u)?[3,4]:[4,this.find(u,{organizationId:e,ignoreNotFound:!0})];case 3:i=t.sent(),t.label=4;case 4:return i||!o?[3,8]:[4,this.host.api.users.lookup(u)];case 5:return(s=t.sent())?this.config.condensedReplays?[3,7]:[4,this.find(s.token,{organizationId:e})]:[2,null];case 6:return i=t.sent(),[3,8];case 7:(a=s.entity).conversationId=s.conversation_id,a.organizationId=s.organization_id,i=this.host.models.User.inject(a),t.label=8;case 8:return[2,i]}})})},Sd.prototype.signOutAllDevices=function(){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return[4,this.host.api.users.wipe(this.host.currentUserId)];case 1:return[2,t.sent()]}})})},Sd.prototype.findMe=function(i){return void 0===i&&(i={}),ml(this,void 0,void 0,function(){var e,n,r,o;return _l(this,function(t){switch(t.label){case 0:return i=ye.a.defaults(i,{ignoreNotFound:!1}),this.host.requireUser(),[4,this.host.api.users.findMe()];case 1:if(e=t.sent())return e.entity&&(e.entity.organization_token=e.organization_id,e=e.entity),n=e.metadata,r=e.organization_token,this._defaultOrganizationId=r,o=this.host.models.User.inject(e),n&&this.host.metadata.__injectMetadata(o.id,r,n),[2,o];if(!i.ignoreNotFound)throw new Or.NotFoundError(this.host.models.User.name,"me");return[2]}})})},Sd.prototype.findDefaultOrganizationId=function(){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return this._defaultOrganizationId?[3,2]:[4,this.findMe()];case 1:t.sent(),t.label=2;case 2:return[2,this._defaultOrganizationId]}})})},Sd.prototype.findMyProfilesForAllOrganizations=function(t){return void 0===t&&(t={}),ml(this,void 0,void 0,function(){var e;return _l(this,function(t){switch(t.label){case 0:return[4,this.host.organizations.findAll()];case 1:return e=t.sent().map(function(t){return t.id}),[2,this.findProfileForOrganizations(this.host.currentUserId,e)]}})})},Sd.prototype.find=function(v,y){return void 0===y&&(y={}),ml(this,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p=this;return _l(this,function(t){switch(t.label){case 0:return y=ye.a.defaults(y,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),e=this.host.models.User.get(v),r=!0,y.organizationIds?(n=y.organizationIds,[3,4]):[3,1];case 1:return y.organizationId?(n=[y.organizationId],[3,4]):[3,2];case 2:return r=!1,n=e?function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(e.organizationIds):[],[4,this.findDefaultOrganizationId()];case 3:o=t.sent(),n.includes(o)||n.push(o),t.label=4;case 4:for(i=nd(nd({},y),{ignoreNotFound:!0}),s=[],a=0,u=n;a<u.length;a++)c=u[a],s.push(this.__find(v,c,i));return[4,Promise.all(s)];case 5:return l=t.sent(),d=l.map(function(t){return t.data}).find(Boolean),h=!!l.find(function(t){return!t.cached}),d&&d.id&&(e=this.host.models.User.get(d.id)),!d||v===d.id||r?[3,7]:0<(f=ye.a.difference(e.organizationIds,n)).length?[4,Promise.all(f.map(function(t){return p.__find(v,t,i)}))]:[3,7];case 6:t.sent(),t.label=7;case 7:if(this.host.models.User.removePlaceholder({entity:e,attrs:d}),h&&!y.ignoreNotFound&&!d)throw new Or.NotFoundError(this.host.models.User.name,v);return[2,e]}})})},Sd.prototype.__find=function(a,u,c){return void 0===c&&(c={}),ml(this,void 0,void 0,function(){var e,n,r,o,i,s=this;return _l(this,function(t){switch(t.label){case 0:return c=ye.a.defaults(c,{bypassCache:!1,ignoreNotFound:!1}),e=this.host.models.User.get(a),c.bypassCache?[3,2]:e&&!e.$placeholder&&e.profileByOrganizationId&&e.profileByOrganizationId[u]?[4,this.host.metadata.find(a,u,c)]:[3,2];case 1:return t.sent(),this.host.models.User.touch(a),[2,{cached:!0,user:e}];case 2:return[4,this.host.api.users.find(a,{organizationId:u})];case 3:if((n=t.sent())&&(n.entity&&(n.entity.organization_token=n.organization_id,n.entity.conversation_id=n.conversation_id,n=n.entity),n.token&&(n.id=n.token,delete n.token),r=n.dnd_auto_forward_receivers,o=void 0===r?[]:r,i=n.metadata,o.forEach(function(t){return s.host.models.User.injectPlaceholder(t)}),n.dnd_auto_forward_receivers=o,e=this.host.models.User.inject(n),i&&("role"===i.feature_service?this.host.roles.__injectSearchResult({entity:e,metadata:i,organizationId:u}):this.host.metadata.__injectMetadata(e.id,u,i))),!c.ignoreNotFound&&!n)throw new Or.NotFoundError(this.host.models.User.name,a);return[2,{cached:!1,data:n,user:e}]}})})},Sd.prototype.findProfileForOrganizations=function(n,r,o){return void 0===o&&(o={}),ml(this,void 0,void 0,function(){var e;return _l(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{bypassCache:!1,ignoreNotFound:!1}),[4,this.find(n,nd(nd({},o),{organizationIds:r}))];case 1:return[2,(e=t.sent())?e.profileByOrganizationId:e]}})})},Sd.prototype.findProfileForOrganization=function(n,r,o){return void 0===o&&(o={}),ml(this,void 0,void 0,function(){var e;return _l(this,function(t){switch(t.label){case 0:return o=ye.a.defaults(o,{bypassCache:!1,ignoreNotFound:!0}),"string"!=typeof r&&(r=r.id),[4,this.find(n,nd(nd({},o),{organizationId:r}))];case 1:return[2,(e=t.sent())&&e.profileByOrganizationId&&e.profileByOrganizationId[r]||null]}})})},Sd.prototype.ensureUsers=function(i,s){return ml(this,void 0,void 0,function(){var e,n,r,o;return _l(this,function(t){switch(t.label){case 0:for(this.host.requireUser(),"string"!=typeof s&&(s=s.id),e=[],n=0,r=i;n<r.length;n++)o=r[n],e.push(this.find(o,{organizationId:s,ignoreNotFound:!0}));return[4,Promise.all(e)];case 1:return[2,t.sent()]}})})},Sd.prototype.refresh=function(e){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return[4,this.find(e,{ignoreNotFound:!0,bypassCache:!0})];case 1:return[2,t.sent()]}})})},Sd.prototype.update=function(t){var o=t.firstName,i=t.lastName,s=t.displayName,a=t.status,u=t.dnd,c=t.dndText,l=t.avatarFile,d=t.removeAvatar;return ml(this,void 0,void 0,function(){var e,n,r;return _l(this,function(t){switch(t.label){case 0:return this.host.requireUser(),e=td.a.call({firstName:o,lastName:i,displayName:s,status:a,dnd:u,dndText:c,avatarFile:l,removeAvatar:d},function(t,e){return void 0===t}),[4,this.host.api.users.update(this.host.currentUserId,e)];case 1:return n=t.sent(),r=ye.a.omit(e,"removeAvatar","avatarFile"),d?r.avatarUrl=null:void 0!==n.avatarUrl&&(r.avatarUrl=n.avatarUrl),[2,this.host.models.User.inject(nd({id:this.host.currentUserId},r))]}})})},Sd.prototype.updatePassword=function(e,n){return ml(this,void 0,void 0,function(){return _l(this,function(t){return this.host.requireUser(),[2,this.host.api.users.updatePassword(this.host.currentUserId,e,n,this.config.productKey)]})})},Sd.prototype.setAutoForward=function(n,r){return ml(this,void 0,void 0,function(){var e;return _l(this,function(t){switch(t.label){case 0:return this.host.requireUser(),e=this.host.currentUser.dnd,[4,this.host.api.users.setAutoForward(this.host.currentUserId,n,{dnd:e,receiverId:r})];case 1:return t.sent(),[2,!0]}})})},Sd.prototype.removeAutoForward=function(e){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return this.host.requireUser(),[4,this.host.api.users.removeAutoForward(this.host.currentUserId,e)];case 1:return t.sent(),[2,!0]}})})},Sd.prototype.setEulaAccepted=function(e,n){return ml(this,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:return this.host.requireUser(),[4,this.host.api.users.setEulaAccepted(this.host.currentUserId,e,n)];case 1:return[2,t.sent()]}})})},Sd.prototype.setAwayMessage=function(o,i){return void 0===i&&(i={}),ml(this,void 0,void 0,function(){var e,n,r;return _l(this,function(t){switch(t.label){case 0:return e=i.dnd,n=i.dndText,r=void 0===n?"":n,this.host.requireUser(),[4,this.host.api.users.setAwayMessage(this.host.currentUserId,o,{dnd:e,dndText:r})];case 1:return t.sent(),[2]}})})},Sd.prototype.getSignInAuthHeader=function(t,e){return this.host.api.users.getSignInAuthHeader(this.config.productKey,t,e)},Sd.prototype.getAll=function(){return this.host.models.User.getAll()},Sd.prototype.getById=function(t){return this.host.models.User.get(t)},Sd.prototype.getMultiById=function(t){return this.host.models.User.getMulti(t)},Sd.prototype._onChangeCurrentUserRole=function(t){var e=t.botUser;if(e){var n=this.host.roles._roleConversations[e.id];if(n)for(var r=0,o=n;r<o.length;r++){for(var i=o[r],s=!1,a=0,u=i.content;a<u.length;a++){var c=u[a];c.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(c),s=!0}s||this.host.models.Conversation.inject(i)}}},Sd.prototype.reactToUserPreferencesEvent=function(t){this.emit("preferences:change",Ie.a.camelizeObject(t))},Sd.PROFILE_ATTRIBUTES_PER_ORG=Nl,gl([Object(Vo.decorator)({serializeArguments:function(t){return""}})],Sd.prototype,"signOut",null),gl([Object(Vo.decorator)()],Sd.prototype,"findOrCreate",null),gl([Object(Vo.decorator)()],Sd.prototype,"signOutAllDevices",null),gl([Object(Vo.decorator)()],Sd.prototype,"findMe",null),gl([Object(Vo.decorator)()],Sd.prototype,"findMyProfilesForAllOrganizations",null),gl([Object(Vo.decorator)()],Sd.prototype,"find",null),gl([Object(Vo.decorator)()],Sd.prototype,"__find",null),gl([Object(Vo.decorator)()],Sd.prototype,"refresh",null),Sd),od=(Ol=function(t,e){return(Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ol(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),id=function(){return(id=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sd=(od(Td,Il=ra),Td.prototype.findAll=function(n){return bl(this,void 0,void 0,function(){var e=this;return wl(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("organizationId","required");return[4,this.host.api.virtualWaitingRoom.findAll(n)];case 1:return[2,t.sent().content.map(function(t){return e.host.models.VirtualWaitingRoom.inject(t)})]}})})},Td.prototype.find=function(n,r){return bl(this,void 0,void 0,function(){var e;return wl(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("room_id","required");return[4,this.host.api.virtualWaitingRoom.find(n,r)];case 1:return e=t.sent(),[2,this.host.models.VirtualWaitingRoom.inject(e)]}})})},Td.prototype.create=function(n,t){var r=t.staff,o=t.name;return bl(this,void 0,void 0,function(){var e;return wl(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("organizationId","required");if(!r)throw new Or.ValidationError("staff","required");if(!o)throw new Or.ValidationError("name","required");return[4,this.host.api.virtualWaitingRoom.create(n,{staff:r,name:o})];case 1:return e=t.sent(),[2,this.host.models.VirtualWaitingRoom.inject(e)]}})})},Td.prototype.update=function(n,r,t){var o=t.staff,i=t.name,s=t.status,a=t.version;return bl(this,void 0,void 0,function(){var e;return wl(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("room_id","required");return[4,this.host.api.virtualWaitingRoom.update(n,r,{staff:o,name:i,status:s,version:a})];case 1:return e=t.sent(),[2,this.host.models.VirtualWaitingRoom.inject({id:n,staff:o,name:i,status:s,version:e.version})]}})})},Td.prototype.delete=function(n,r){return bl(this,void 0,void 0,function(){var e;return wl(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("room_id","required");return(e=this.host.models.VirtualWaitingRoom.get(n))&&this.host.models.VirtualWaitingRoom.eject(e),[4,this.host.api.virtualWaitingRoom.delete(n,r)];case 1:return t.sent(),[2]}})})},Td.prototype.getVisitInfo=function(e){return bl(this,void 0,void 0,function(){return wl(this,function(t){switch(t.label){case 0:if(!e)throw new Or.ValidationError("joinId","required");return[4,this.host.api.virtualWaitingRoom.getVisitInfo(e)];case 1:return[2,t.sent()]}})})},Td.prototype.createVisit=function(t){var e=t.firstName,n=t.lastName,r=t.mobilePhone,o=t.visitReason,i=t.joinId;return bl(this,void 0,void 0,function(){return wl(this,function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.createVisit({firstName:e,lastName:n,mobilePhone:r,visitReason:o,joinId:i})];case 1:return[2,t.sent()]}})})},Td.prototype.editVisit=function(t){var e=t.visitId,n=t.firstName,r=t.lastName,o=t.mobilePhone,i=t.visitReason,s=t.createResources;return bl(this,void 0,void 0,function(){return wl(this,function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.editVisit({visitId:e,firstName:n,lastName:r,mobilePhone:o,visitReason:i,createResources:s})];case 1:return[2,t.sent()]}})})},Td.prototype.clearAllCompletedVisits=function(t){var e=t.roomId,n=t.organizationId;return bl(this,void 0,void 0,function(){return wl(this,function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.cleanupVisits({type:"delete_completed_visits",roomId:e,organizationId:n})];case 1:return t.sent(),[2]}})})},Td.prototype.reactToJoinableCallSSE=function(t){var e=t.data,n=t.type,r=Object(ea.l)(e);r.vwrCallStatus=n.split(":")[1],this.host.models.VirtualWaitingRoom.inject(r)},Td.prototype.findAllVisits=function(n,r){return bl(this,void 0,void 0,function(){var e=this;return wl(this,function(t){switch(t.label){case 0:if(!r)throw new Or.ValidationError("organizationId","required");if(!n)throw new Or.ValidationError("roomId","required");return[4,this.host.api.virtualWaitingRoom.findAllVisits(n,r)];case 1:return[2,t.sent().content.map(function(t){return e.host.models.VirtualWaitingRoomVisit.inject(id({roomId:n,organizationId:r},t))})]}})})},Td.prototype.informProvider=function(e,n){return bl(this,void 0,void 0,function(){return wl(this,function(t){if(!e)throw new Or.ValidationError("organizationId","required");if(!n.roomId)throw new Or.ValidationError("roomId","required");if(!n.visitId)throw new Or.ValidationError("visitId","required");if(!n.accountToken)throw new Or.ValidationError("accountToken","required");return[2,this.host.api.virtualWaitingRoom.informProvider(e,n)]})})},Td),ad=function(t,e){return e.host,t.defineModel("call",{replaceKeys:{},defaultValues:{},skipCamelizationForKeys:["membersStatuses","payload","room","sendDataMessage"],transientAttrs:["room","sendDataMessage"],parseAttrs:function(t){if(t.id||(t.id=t.roomName),t.membersStatuses=t.membersStatuses||{},t.payload){var e={};t.payload.disabled_participants&&(e=t.payload.disabled_participants,delete t.payload.disabled_participants),t.payload=Ie.a.camelizeObject(t.payload),t.payload.disabledParticipants=e}return t.payload&&(t.payload.orgId&&(t.organizationId=t.payload.orgId),t.payload.callId&&(t.callId=t.payload.callId),t.payload.groupId&&(t.groupId=t.payload.groupId),t.payload.participantsTokens&&t.payload.callerId&&(t.memberIds=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(t.payload.participantsTokens,[t.payload.callerId]))),delete t.serverId,t}})},ud=function(t,e){var n=e.host;return t.defineModel("callLogEntry",{parseAttrs:function(t){return t.isContact=Ks()(t,"target.entity.metadata.isPatientContact"),t.isGroup="tigertext:entity:group"===Ks()(t,"target.type"),t.memberCount=Ks()(t,"target.entity.numMembers"),t.isMissed="missed_voip_call"===t.type,t.isOptedOut=Ks()(t,"target.entity.metadata.smsOptedOut",!1),t.isOutgoing=n.currentUserId===Ks()(t,"caller.entity.token"),t.isQuickCall=Boolean(Object(Oa.isPhone)(Ks()(t,"target.entity.displayName")))&&"00000"===Ks()(t,"target.entity.metadata.patientMrn"),t}})},cd=function(h,t){var f=t.host;return h.defineModel("conversation",{instanceEvents:!0,transientAttrs:["_counterPartyAddedOnServer","_origIndex","highestSortNumber","unreadCount","unreadPriorityCount"],defaultValues:{_markingAsRead:!1,_markingAsReadSortNumber:null,_markingAsReadExpiration:null,firstExpiringUnreadMessage:null,firstUnreadMessage:null,higherContinuation:null,highestSortNumber:0,inProgressEscalationCount:0,isLive:!1,lastBangMessageSortNumber:0,lastIncomingMessageSortNumber:0,lastMessage:null,lowerContinuation:null,markableAsReadMessages:null,messages:null,muted:null,network:Ao.PROVIDER,timeline:null,unreadCount:0,unreadPriorityCount:0},skipCamelizationForKeys:["metadata","muted"],parseAttrs:function(t){if("muted"in t&&t.muted){var e=t.muted;if(0<Object.keys(e).length){var n=e.mute_duration,r=e.mute_start;r=r&&1e3*+r;var o=f.mute._addEntry(t.id,{durationInMinutes:n,organizationId:t.organizationId,startedAt:r});t.muted=o}else t.muted=null}return t},afterAssignment:function(t){var e=t.counterParty,n=t.counterPartyId,r=t.counterPartyType,o=t.id,i=t.isDeletable,s=t.isMuteable,a=t.metadata,u=t.muted;if(u=h.host.config.condensedReplays?u||f.mute.getById(o):f.mute._getByConversationHandle(o),t.muted=u,t.isMuted=!!t.muted,e?(n=e.id,r=e.$entityType):e=r&&n?h.store.get(r,n):null,t.counterParty=e,t.counterPartyId=n,t.counterPartyType=r,t.shouldDisplay=!("user"===r&&e&&!e.shouldDisplay),f.conversations._setAllowedSenders(t),i=!0,s="distributionList"!==r,e&&"group"===r){var c=e.groupType,l=e.p2pSender;if(c===_o.ROLE_P2P){var d=l&&"role"===l.$entityType;i=0<t.allowedSenders.length&&!d,s=s&&0<t.allowedSenders.length}else c===_o.ESCALATION?s=!(i=!1):c===_o.PATIENT_MESSAGING&&(i=2<t.counterParty.memberCount)}else e&&"team"===r&&(s=i=!1);t.isDeletable=i,t.isMuteable=s,t.markableAsReadMessages||(t.markableAsReadMessages=[]),t.messages||(t.messages=[]),t.timeline||(t.timeline=[]),t.higherContinuation||(t.higherContinuation={continuation:h.host.config.condensedReplays?{higher_continuation:null}:"HIGHER",itemsEstimate:null}),t.lowerContinuation||(t.lowerContinuation={continuation:h.host.config.condensedReplays?{lower_continuation:null}:"LOWER",itemsEstimate:null}),a&&"patient_messaging"===a.feature_service&&(t.network=Ao.PATIENT,"group"===r&&(t.patientId="patient:"+a.patient_id,a.patient_contact_id&&(t.patientContactId="patientContact:"+a.patient_contact_id)))},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}},hasMany:{content:{type:"message",foreignKey:"conversationId",sortBy:[["sortNumber","asc"],["id","asc"]]}}}})},ld=function(t,r){var e=t.defineModel("distributionList",{replaceKeys:{avatar:"avatarUrl",createdBy:"createdById",displayName:"name",organizationKey:"organizationId",totalMembers:"memberCount",updatedBy:"updatedById"},skipCamelizationForKeys:["metadata"],transientAttrs:["$deleted"],defaultValues:{memberCount:0},afterAssignment:function(t){t.displayName=t.name},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}});return il(e,{finder:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=r.host.distributionLists).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return t.host.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return t.host.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{name:"Loading Distribution List..."},defaultNotFoundAttrs:{name:"<Distribution List Not Found>"}}),e},dd=function(t,e){var p=e.host;return t.defineModel("escalationExecution",{replaceKeys:{destructionDuration:"minutesToExpire",destructionTime:"expiresAt",displayName:"displayId",escalationExecutionId:"id",escalationGroupToken:"groupId",escalationPath:"path",escalationStatus:"status",level:"currentStep",organizationToken:"organizationId",targetDuration:"targetMinutesToAcknowledge",targetToken:"targetId",triggeredMessageToken:"carbonCopyMessageId",triggeringConversationId:"originalGroupConversationId",triggeringMessageToken:"originalMessageId"},defaultValues:{currentStep:0,status:mo.IN_PROGRESS},parseAttrs:function(t){if("actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),"carbonCopyMessageId"in t&&"string"==typeof t.carbonCopyMessageId&&"undefined"===t.carbonCopyMessageId&&(t.carbonCopyMessageId=null),"displayId"in t&&(t.displayId.startsWith("#")&&(t.displayId=t.displayId.slice(1)),t.displayId=t.displayId.toUpperCase()),"expiresAt"in t&&"string"==typeof t.expiresAt&&(t.expiresAt=new Date(t.expiresAt).getTime()),"groupId"in t&&"string"==typeof t.groupId&&"undefined"===t.groupId&&(t.groupId=null),"path"in t){for(var e=[],n=!1,r=0,o=t.path;r<o.length;r++){for(var i=o[r],s=i.targets,a=i.duration,u=[],c=0,l=s;c<l.length;c++){var d=l[c];if("string"==typeof d)u.push(p.injectPlaceholderModel({id:d},"user"));else if(d&&d.token){var h=d.displayName,f=d.token;u.push(p.injectPlaceholderModel({id:f,displayName:h},"user"))}else n=!0}e.push({minutesToAcknowledge:a,targets:u})}n?delete t.path:t.path=e}return"status"in t&&("init"===t.status&&(t.status="in_progress"),"destruct"===t.status&&(t.status="cancelled"),t.status=mo.resolve(t.status)),t},afterAssignment:function(t){},relations:{belongsTo:{carbonCopyMessage:{type:"message",foreignKey:"carbonCopyMessageId"},group:{type:"group",foreignKey:"groupId"},organization:{type:"organization",foreignKey:"organizationId"},originalConversation:{type:"conversation",foreignKey:"originalGroupConversationId"},originalMessage:{type:"message",foreignKey:"originalMessageId"},target:{type:"user",foreignKey:"targetId"},escalationGroupConversation:{type:"conversation",foreignKey:"escalationGroupConversationId"}}}})},hd=function(t,e){return e.host,t.defineModel("escalationExecutionChange",{parseAttrs:function(t){return"actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),t}})},fd=function(t,e){var p=e.host;return t.defineModel("escalationPolicy",{replaceKeys:{destructionDuration:"minutesToExpire",escalationPath:"path",target:"targetId",targetDuration:"targetMinutesToAcknowledge"},defaultValues:{alwaysEscalate:!1},parseAttrs:function(t){if("path"in t){for(var e=[],n=!1,r=0,o=t.path;r<o.length;r++){for(var i=o[r],s=i.targets,a=i.duration,u=[],c=0,l=s;c<l.length;c++){var d=l[c];if("string"==typeof d)u.push(p.injectPlaceholderModel({id:d},"user"));else if(d&&d.token){var h=d.displayName,f=d.token;u.push(p.injectPlaceholderModel({id:f,displayName:h},"user"))}else n=!0}e.push({minutesToAcknowledge:a,targets:u})}n?delete t.path:t.path=e}return t},afterAssignment:function(t){},relations:{belongsTo:{target:{type:"user",foreignKey:"targetId"}}}})},pd=function(t,e){var u=e.host,n=t.defineModel("group",{replaceKeys:{avatar:"avatarUrl",createdTime:"createdAt",displayName:"name",members:"memberIds",numMembers:"__memberCount",organizationKey:"organizationId",proxied_members:"proxiedMembers"},transientAttrs:["__memberCount"],defaultValues:{hasCurrentUser:!1,isPublic:!1,memberIds:null},skipCamelizationForKeys:["escalation","metadata","proxied_members"],parseAttrs:function(t){if("createdAt"in t&&(t.createdAt=new Date(t.createdAt)),"createdBy"in t&&delete t.createdBy,t.avatarUrl&&(t.avatarUrl=bc(t.avatarUrl,u.config)),"escalation"in t){var e=u.escalations._updateEscalation(t.escalation,{inGroupInject:!0});delete t.escalation,t.escalationExecutionId=e.id}if(t.memberIds){for(var n=[],r=0,o=t.memberIds;r<o.length;r++){var i=o[r];"string"==typeof i?n.push(i):i.id&&n.push(i.id)}t.memberIds=n}if(t.metadata&&"patient_care"===t.metadata.feature_service&&(t.patientDetails=t.metadata.patient),t.metadata&&"patient_messaging"===t.metadata.feature_service&&(t.patientDetails={dob:t.metadata.patient_dob,gender:t.metadata.patient_gender,id:t.metadata.patient_id,isPatientContact:t.metadata.is_patient_contact,mrn:t.metadata.patient_mrn,name:t.metadata.patient_name,phoneNumber:t.metadata.phone_number,smsOptedOut:t.metadata.sms_opted_out},t.patientDetails.isPatientContact&&t.metadata.relation_name&&(t.patientDetails.relationName=t.metadata.relation_name)),t.metadata)if(t.metadata.team&&(t.metadata.team.token||t.metadata.team.id)){var s=u.models.Team.inject(t.metadata.team);s&&(t.teamId=s.id)}else t.metadata.team_token&&(t.teamId=t.metadata.team_token);return"metadata"in t&&delete t.metadata,t},afterAssignment:function(t){var e,n=t.id,r=t.memberIds,o=t.organizationId;u.config.condensedReplays?t.conversationId&&(e=u.conversations.getById(t.conversationId)):e=o?u.conversations.get("group",n,o):null;var i=o?u.metadata.get(n,o):null;i=i&&i.data;var s=u.groups.__extractGroupTypeFromAttrs(t),a=i&&s===_o.ROLE_P2P?i.target_display_name:t.name;t.conversation=e,t.displayName=a,t.groupType=s,t.memberCount=r&&r.length||t.__memberCount||0,t.metadata=i,"FORUM"!==s&&delete t.hasCurrentUser,u.users._setMembersOnEntity(t),u.groups._setMembership(t),u.groups._setP2PEntities(t)},beforeCreateInstance:function(t){var e,n,r;e=t.id,n=t.memberIds,r=t.organizationId,n&&0!==n.length&&u.groups.ensureMembersWithIds(e,n,{onlyPlaceholder:!0,attrs:{organizationId:r}})},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"},escalationExecution:{type:"escalationExecution",foreignKey:"escalationExecutionId"},team:{type:"team",foreignKey:"teamId"}}}});return il(n,{finder:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=u.groups).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return u.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return u.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading group..."},defaultNotFoundAttrs:{displayName:"<Group Not Found>"},shouldEnsure:function(t,e,n){var r=n.groupMembersOnlyPlaceholder;return!t.members||!t.metadata||t.groupType===_o.ROLE_P2P||t.members.some(function(t){return u.models.User.shouldEnsure(t,r)})}}),n},vd=function(t,e){return e.host,t.defineModel("groupMembersChange",{parseAttrs:function(t){return"actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),t}})},yd=function(d,t){var g=t.host;return d.defineModel("message",{replaceKeys:{clientId:"id",createdTime:"createdAt",data:"metadata",dndAutoForwardedFrom:"autoForwardedFromId",dor:"deleteOnRead",escalationExecId:"escalationExecutionId",groupAvatar:"groupAvatarUrl",groupToken:"groupId",messageId:"id",originalData:"originalMetadata",originalMsgId:"originalMessageId",originalSenderName:"originalSenderDisplayName",originalTimestamp:"originalForwardedMessageCreatedAt",recipient:"recipientId",recipientOrganization:"recipientOrganizationId",recipientOrgToken:"recipientOrganizationId",recipientToken:"recipientId",sender:"senderId",senderAvatar:"senderAvatarUrl",senderOrganization:"senderOrganizationId",senderOrgToken:"senderOrganizationId",senderToken:"senderId"},transientAttrs:["__organizationId","$synced","escalationExecutionChange","groupMembersChange","inTimeline"],defaultValues:{inTimeline:!1,isUnread:!1,messageType:So.USER_SENT,senderStatus:Oo.NEW,shouldEnsureRecipientStatus:!1,sortNumber:0},skipCamelizationForKeys:["escalation","metadata","originalMetadata"],parseAttrs:function(t){if(t.teamRequest&&(t.senderId||(t.senderId=t.teamRequest.createdById),t.teamRequestId=t.teamRequest.id,delete t.teamRequest),"attachmentName"in t){var e=t.attachmentName;delete t.attachmentName,"undefined"!==e&&Array.isArray(t.attachments)&&0<t.attachments.length&&e&&(t.attachments[0].name=e)}if(Array.isArray(t.attachments)&&t.attachments.forEach(function(t,e){return t.id=""+(e+1)}),"priority"in t&&(t.priority=bo.resolve(t.priority)),"createdAt"in t&&"string"==typeof t.createdAt&&(t.createdAt=new Date(t.createdAt)),"expireIn"in t&&(t.expiresAt=Date.now()+1e3*t.expireIn,delete t.expireIn),"recipientStatus"in t&&delete t.recipientStatus,"status"in t&&delete t.status,"xmlns"in t&&delete t.xmlns,"escalation"in t){var n=g.escalations._updateEscalation(t.escalation);delete t.escalation,t.escalationExecutionId=n.id}if("subType"in t&&(t.subType=To.resolve(t.subType)),t.metadata){t.metadata=ye.a.castArray(t.metadata).map(g.metadata.__parseMessageMetadata).filter(Boolean);var r=t.metadata.find(function(t){return"tigertext:message:role:sender"===t.namespace}),o=t.metadata.find(function(t){return"tigertext:message:role:owner"===t.namespace}),i=t.metadata.find(function(t){return"tigertext:message:patient_care"===t.namespace});if(r&&r.payload){var s=t.senderOrganizationId,a=r.payload;t.senderRole=g.roles.__parseRoleFromMetadata({metadata:a,organizationId:s}),t.currentSenderRoleId=t.senderRole.id}if(o&&o.payload){s=t.senderOrganizationId;var u=t.senderId;a=o.payload,t.senderId=a.token,u!==a.token&&(t.senderRole={$entityType:"role",botUserId:u,id:"role:"+u,organizationId:s},t.currentSenderRoleId="role:"+u)}if(i&&i.payload){for(var c=[],l=0,d=i.payload.components;l<d.length;l++){var h=d[l];"type"in h&&(h.type=Po.resolve(h.type)),"sub_type"in h&&(h.sub_type=Ro.resolve(h.sub_type)),"action_type"in h&&(h.action_type=Co.resolve(h.action_type)),c.push(h)}t.patientCareCard=c}}else"metadata"in t&&delete t.metadata;if(t.originalMetadata){t.originalMetadata=ye.a.castArray(t.originalMetadata).map(g.metadata.__parseMessageMetadata).filter(Boolean),r=t.originalMetadata.find(function(t){return"tigertext:message:role:sender"===t.namespace}),o=t.originalMetadata.find(function(t){return"tigertext:message:role:owner"===t.namespace});var f=t.originalMetadata.find(function(t){return"tigertext:message:patient_messaging"===t.namespace});if(r&&r.payload&&(s=t.senderOrganizationId,a=r.payload,t.originalSenderRole=g.roles.__parseRoleFromMetadata({metadata:a,organizationId:s})),o&&o.payload){var p=t.originalSender,v=t.originalSenderDisplayName,y=t.originalSenderRole;s=t.senderOrganizationId,a=o.payload,y||"string"!=typeof p||(t.originalSenderRole={$entityType:"role",botUserId:p,displayName:v,id:"role:"+p,organizationId:s}),(!p||p&&"string"==typeof p)&&(t.originalSender={$entityType:"user",displayName:a.display_name,id:a.token,organizationId:s})}"isForwarded"in t&&t.isForwarded&&f&&(t.isForwardedFromPatientNetwork=!0,f.payload&&(t.patientDetails={isPatientContact:f.payload.is_patient_contact,mrn:f.payload.patient_mrn,patientId:f.payload.patient_id,patientName:f.payload.patient_name},f.payload.is_patient_contact&&(t.patientDetails.contactId=f.payload.patient_contact_id,t.patientDetails.contactName=f.payload.patient_contact_name,t.patientDetails.relation=f.payload.relation_name),t.originalGroupId=f.payload.group_id,t.originalGroupName=f.payload.group_name))}return"originalSender"in t&&"string"==typeof t.originalSender&&(s=t.senderOrganizationId,p=t.originalSender,v=t.originalSenderDisplayName,t.originalSender={$entityType:"user",displayName:v,id:p,organizationId:s},"patientDetails"in t&&(t.patientDetails.patientId===t.originalSender.id&&(t.originalSender.isPatient=!0),t.patientDetails.contactId===t.originalSender.id&&(t.originalSender.isPatientContact=!0,t.originalSender.relation=t.patientDetails.relation)),delete t.originalSenderDisplayName),t},afterAssignment:function(t){var e=t.__organizationId,n=t.counterParty,r=t.counterPartyId,o=t.counterPartyType,i=t.createdAt,s=t.isOutgoing,a=t.recipientOrganizationId,u=t.senderId,c=t.senderOrganizationId,l=g.currentUserId;if(n)switch(r=n.id,o=n.$entityType){case"group":t.groupId=r,delete t.recipientId;break;case"distributionList":t.distributionListId=r,delete t.recipientId}else n=o&&r?d.store.get(o,r):null;t.counterParty=n,t.counterPartyId=r,t.counterPartyType=o,i=i||new Date,u&&(s=g.messages._isMessageOutgoing(t)),s&&c?e=c:!s&&a&&(e=a),t.__organizationId=e,t.canRecall="distributionList"!==o&&u===l,t.createdAt=i,t.isOutgoing=s,t.isAutoForwarded=!!t.autoForwardedFromId,t.subType||(t.subType=To.NA),g.messages._setRecipientStatus(t)},relations:{belongsTo:{autoForwardedFrom:{type:"user",foreignKey:"autoForwardedFromId"},conversation:{type:"conversation",foreignKey:"conversationId"},currentSenderRole:{type:"role",foreignKey:"currentSenderRoleId"},distributionList:{type:"distributionList",foreignKey:"distributionListId"},escalationExecution:{type:"escalationExecution",foreignKey:"escalationExecutionId"},group:{type:"group",foreignKey:"groupId"},originalGroup:{type:"group",foreignKey:"originalGroupId"},recipient:{type:"user",foreignKey:"recipientId"},recipientOrganization:{type:"organization",foreignKey:"recipientOrganizationId"},sender:{type:"user",foreignKey:"senderId"},senderOrganization:{type:"organization",foreignKey:"senderOrganizationId"},teamRequest:{type:"teamRequest",foreignKey:"teamRequestId"}},hasMany:{statusesPerRecipient:{type:"messageStatusPerRecipient",foreignKey:"messageId"}}}})},gd=function(t){return t.defineModel("messageStatusPerRecipient",{replaceKeys:{accountId:"userId",timestamp:"createdAt"},defaultValues:{status:Oo.NA},parseAttrs:function(t){return t.status&&(t.status=Oo.resolve(t.status)),t.createdAt&&"string"==typeof t.createdAt&&(t.createdAt=new Date(t.createdAt)),t},beforeInject:function(t,e){if(e){var n=e.status,r=t.status;Io[r]<Io[n]&&(delete t.createdAt,delete t.status)}},relations:{belongsTo:{distributionList:{type:"distributionList",foreignKey:"distributionListId"},message:{type:"message",foreignKey:"messageId"},user:{type:"user",foreignKey:"userId"}}}})},md=function(t,e){return e.host,t.defineModel("messageTemplate",{replaceKeys:{createdBy:"createdById",templateLabel:"title",updatedBy:"updatedById"},transientAttrs:["$deleted"],parseAttrs:function(t){return t.hasAttachment=!1,t.attachmentName&&t.attachmentSize&&t.attachmentType&&(t.hasAttachment=!0),t},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}})},_d=function(t,e){return t.defineModel("metadata",{parseAttrs:function(t,e){return t.data=e.data,t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},bd=function(t,e){return e.host,t.defineModel("mute",{parseAttrs:function(t){return t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},wd=n(250),Id=n.n(wd),Od=n(251),Ed=n.n(Od);function Td(){return null!==Il&&Il.apply(this,arguments)||this}function Sd(){var _=null!==El&&El.apply(this,arguments)||this;return _.PROFILE_ATTRIBUTES_PER_ORG=Nl,_._setMembersOnEntity=function(t,e,n){void 0===e&&(e="memberIds"),void 0===n&&(n="members");var r=t,o=r[e],i=r[n];if(o){i?i.length=0:i=[];for(var s=0,a=o;s<a.length;s++){var u=a[s],c=_.host.models.User.get(u);c&&i.push(c)}}else i=null;t[n]=i},_._injectPatientEntity=function(t,e,n){var r="patient:"+e;if(t.id=r,t.organizationId=n,t.userId=e,_.host.models.Patient.inject(t),t.patient_contacts)for(var o=0,i=t.patient_contacts;o<i.length;o++){var s=i[o],a=s.entity?s.entity:s,u=a.token||a.id;a.id=u,a.patientId=r,_.host.models.User.inject(a)}},_._injectPatientContactEntity=function(t,e){t.entity&&(t=t.entity);var n=t.metadata,r={editVersion:n.edit_version,id:"patientContact:"+t.id,organizationId:e,patientDob:n.patient_dob,patientGender:n.patient_gender,patientId:"patient:"+n.patient_id,patientMrn:n.patient_mrn,phoneNumber:n.phone_number,relationName:n.relation_name,smsOptedOut:n.sms_opted_out,userId:t.id};_.host.models.PatientContact.inject(r)},_._onChangeMetadata=function(t,e){var n=e.entityId,r=_.host.models.User.get(n);r&&_.host.models.User.inject(r)},_._onChangeRole=function(t,e){var n=_.host.currentUserId,r=e.botUserId,o=e.memberIds;o=o||[],r&&_.host.models.User.injectPlaceholder({id:r,botRole:e});var i={},s=_._roleMemberIds[e.id];if(s)for(var a=0,u=s;a<u.length;a++){var c=u[a];if((f=_.host.models.User.get(c))&&!o.includes(c)){var l=(m=f.roles).indexOf(e);-1<l&&(m.splice(l,1),i[c]=m)}}for(var d=0,h=_._roleMemberIds[e.id]=o;d<h.length;d++){var f;c=h[d],(m=(f=_.host.models.User.get(c))?f.roles:[]).includes(e)||(m.push(e),i[c]=m)}for(var p=0,v=Object.entries(i);p<v.length;p++){var y=v[p],g=y[0],m=y[1];_.host.models.User.injectPlaceholder({id:g,roles:m}),g===n&&_._onChangeCurrentUserRole(e)}},_._onRemoveRole=function(t,e){var n=e.botUserId;n&&_.host.models.User.injectPlaceholder({id:n,botRole:null});var r=_._roleMemberIds[e.id];if(r){for(var o=0,i=r;o<i.length;o++){var s=i[o],a=_.host.models.User.get(s);if(a){var u=a.roles,c=u.indexOf(e);-1<c&&(u.splice(c,1),_.host.models.User.inject(a))}}delete _._roleMemberIds[e.id]}},_.getPreferences=function(e){return void 0===e&&(e=_.host.currentUserId),ml(_,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:if(!e)throw new Or.ValidationError("userId","required");return[4,this.host.api.users.getPreferences(e)];case 1:return[2,t.sent()]}})})},_.editPreferences=function(t){var e=t.quickReplies,n=void 0===e?[]:e,r=t.organizationId,o=t.userId,i=void 0===o?_.host.currentUserId:o;return ml(_,void 0,void 0,function(){return _l(this,function(t){switch(t.label){case 0:if(!n)throw new Or.ValidationError("quickReplies","required");if(!r)throw new Or.ValidationError("organizationId","required");if(!i)throw new Or.ValidationError("userId","required");return[4,this.host.api.users.editPreferences({organizationId:r,quickReplies:n,userId:i})];case 1:return[2,t.sent()]}})})},_}function Ad(){return null!==Sl&&Sl.apply(this,arguments)||this}function Cd(){var e=null!==Cl&&Cl.apply(this,arguments)||this;return e._onMessageSending=function(t){e.stopTyping(t.counterPartyId,{senderId:t.senderId})},e}function Rd(){return null!==Pl&&Pl.apply(this,arguments)||this}function Pd(){var t=null!==xl&&xl.apply(this,arguments)||this;return t._query=function(G){return sl(t,void 0,void 0,function(){var e,n,r,o,i,s,a,u,c,l,d,h,f,p,v,y,g,m,_,b,w,I,O,E,T,S,A,C,R,P,j,x,M,k,N,z,D,U,L,F,B,q,V;return al(this,function(t){switch(t.label){case 0:return e=G.continuation,n=void 0===e?null:e,r=G.excludeIds,o=void 0===r?[]:r,i=G.excludeSelf,s=void 0!==i&&i,a=G.followContinuations,u=void 0!==a&&a,c=G.network,l=void 0===c?"provider":c,d=G.params,n&&(d=Ul(Ul({},d),{continuation:n})),f=[],"patient"===l||d.type.includes("patient_account")?[4,this.host.api.search.patientQuery(d)]:[3,2];case 1:return(h=t.sent()).metadata.continuation||(h.metadata.continuation=null),[3,4];case 2:return[4,this.host.api.search.query(d)];case 3:h=t.sent(),t.label=4;case 4:for(f=h.results,p=[],v=0,y=f;v<y.length;v++)R=y[v],M=R.type,j=R.entity,x=R.organization_id,g={entityAttrs:j,organizationId:x,type:M},this.config.condensedReplays?j.conversation_id?(g.conversationId=j.conversation_id,delete j.conversation_id):g.conversationId=R.conversation_id:delete j.conversation_id,0!==Object.keys(j).length&&("tigertext:entity:account"===M?Object(ea.n)(j,"status","account_status"):"tigertext:entity:tag"===M&&(j.token=x+":"+j.token),(D=j.metadata)&&this.host.metadata.__injectMetadata(j.token,x,D),p.push(g));return m=h.metadata,_=m.continuation,b=m.first_hit,w=m.total_hits,I={firstHit:b,totalHits:w},_&&(u?I.firstHit=1:I.continuation=_),O=[],E=[],T=function(t){for(var e=0,n=t.results;e<n.length;e++){var r=n[e];O.push(r)}},u&&_&&E.push(this._query(Ul(Ul({},G),{continuation:_})).then(T)),[4,Promise.all(E)];case 5:for(t.sent(),S=[],A=0,C=p;A<C.length;A++)R=C[A],P=R.conversationId,j=R.entityAttrs,x=R.organizationId,M=R.type,k=this.host.modelNameByTypeNS(M),(N="group"===k&&this.host.groups.__extractGroupTypeFromAttrs(j))===_o.FORUM&&delete j.members,z=this.host.metadata.get(j.token,x),D=z?z.data:null,"user"===(U=this.host.conversations.__injectCounterParty({conversationId:P,entityAttrs:j,entityType:k,groupType:N,hasCurrentUser:!1,organizationId:x})).$entityType&&D&&"role"===D.feature_service&&this.host.roles.__injectSearchResult({entity:U,metadata:D,organizationId:x}),o.length&&o.includes(U.id)||(L=this.host.currentUserId,s&&U.id===L||(U?(U.isRoleBot&&U.botRole&&(U=U.botRole),F=new Gc(U,x,P,D),S.unshift(F)):this.logger.warn("no entity for ",R)));for(B=0,q=S;B<q.length;B++)V=q[B],O.unshift(V);return[2,{results:O,metadata:I}]}})})},t._searchLocalOrganization=function(t){for(var e=t.organization,n=t.query,r=t.types,o=void 0===r?[]:r,i=e.conversations,s=e.id,a=[],u=0,c=i;u<c.length;u++){var l=c[u],d=l.counterParty,h=l.counterPartyType,f=l.metadata,p=Fl[h];if(o.includes(p))if(n&&0!==Object.keys(n).length){for(var v=!0,y=0,g=Object.entries(n);y<g.length;y++){var m=g[y],_=m[0],b=m[1];_=_.split(","),b=b.toLowerCase();for(var w=!1,I=0,O=_;I<O.length;I++){var E=O[I],T="user"===h&&Nl.includes(E)?d.profileByOrganizationId[s]:d;if(T){var S=T[E];if(void 0!==S&&S.toLowerCase().includes(b)){w=!0;break}}}if(!w){v=!1;break}}v&&a.push(new Gc(d,s,f))}else a.push(new Gc(d,s,f))}return a},t}function jd(t,e){return e in t?t[e].value:null}var xd=function(t,e){var E=e.host,n=t.defineModel("organization",{instanceEvents:!0,replaceKeys:{allowMsgForward:"__isForwardAllowed",allowPublicGroups:"forumsEnabled",allowRoleScheduleUpload:"__isRolesScheduleUploadEnabled",desktopPriorityMessaging:"__desktopPriorityMessagingSounds",eula:"eulaEnabled",eulaContent:"eulaUrl",featurePatientCare:"__canShowPatientCare",featurePatientNetwork:"__canShowPatientNetwork",featureRoleScheduleUpload:"__canUploadRolesSchedule",featureRoleService:"rolesEnabled",featureRolesEscalation:"__canEscalateMessages",featureTeams:"__canShowTeams",featureTransactions:"canShowTransactions",latestIncomingMessageSortNumber:"lastIncomingMessageSortNumber",members:"memberCount",organizationKey:"organizationId",patientCare:"__showPatientCare",patientNetwork:"__showPatientNetwork",pfNoAttachment:"__isPFAttachmentAllowed",pfNoPhoto:"__isPFPhotoAllowed",roleService:"canAdminRoles",rolesEscalation:"__isRolesEscalationEnabled",ssoWebSessionDuration:"desktopExtendedSession",teams:"__showTeams"},defaultValues:{__canEscalateMessages:!1,__canShowPatientCare:!1,__canShowTeams:!1,__canUploadRolesSchedule:!1,__isForwardAllowed:!1,__isPFAttachmentAllowed:!1,__isPFPhotoAllowed:!1,__isRolesEscalationEnabled:!1,__isRolesScheduleUploadEnabled:!1,__showPatientCare:!1,__showTeams:!1,canAdminRoles:!1,canShowTransactions:!1,desktopExtendedSession:-1,forumsEnabled:!1,highestSortNumber:0,isPatientNetworkEnabled:!1,lastIncomingMessageSortNumber:0,networks:null,paid:!1,rolesEnabled:!1,settings:{},unreadCount:0,unreadPriorityCount:0},transientAttrs:["unreadCount","unreadPriorityCount"],parseAttrs:function(t){return t.settings&&(t.settings=Ed.a.call(Id.a.call(t.settings,function(t){return Ie.a.camelizeKey(t.name)}),function(t){isFinite(t.value)&&(t.value=+t.value),"true"===t.value&&(t.value=!0),"false"===t.value&&(t.value=!1)})),t},afterAssignment:function(t){var e=t.__canEscalateMessages,n=t.__canShowPatientCare,r=t.__canShowPatientNetwork,o=t.__canShowTeams,i=t.__canUploadRolesSchedule,s=t.__desktopPriorityMessagingSounds,a=t.__isForwardAllowed,u=t.__isPFAttachmentAllowed,c=t.__isPFPhotoAllowed,l=t.__isRolesEscalationEnabled,d=t.__isRolesScheduleUploadEnabled,h=t.__showPatientCare,f=t.__showPatientNetwork,p=t.__showTeams,v=t.autoForwardReceiverId,y=t.id,g=t.name,m=t.paid,_=t.settings;p=p&&!!jd(_,"teams"),f="individual"===f?!!jd(_,"patientNetwork"):!!f,v=jd(_,"dndAutoForwardReceiver"),t.allowPriorityMessage=!!jd(_,"priorityMessaging"),t.autoLogoutMinutes=jd(_,"autologoutTime")||1440,t.canUploadRolesSchedule=i&&d,t.deleteOnRead=!!jd(_,"dor"),t.desktopAutoUpdate=!!jd(_,"autoUpdate"),t.isEulaAccepted=!jd(_,"eula"),t.isForwardAllowed=a&&1===jd(_,"forward"),t.messageTimeToLive=jd(_,"ttl")||-1,t.isPatientBroadcastEnabled=!!jd(_,"pfBroadcast"),t.isPatientScheduledMessagesEnabled=!!jd(_,"pfScheduleMessages"),t.isPatientVirtualWaitingRoomEnabled=!!jd(_,"pfVirtualWaitingRoom"),t.isPFVideoCallEnabled=!!jd(_,"pfVideoCall"),t.isPFVoiceCallEnabled=!!jd(_,"pfVoiceCall"),t.isPFGroupVideoCallEnabled=!!jd(_,"pfGroupVideoCall"),t.isPFGroupVoiceCallEnabled=!!jd(_,"pfGroupVoiceCall"),t.isPFAttachmentAllowed=!u,t.isPFPhotoAllowed=!c;var b="UpM28mnfW65vJkbqEATtKvxm"===t.id;if(t.allowedSenders=E.organizations._getAllowedSenders(t),t.autoForwardReceiverId=v,t.autoForwardReceiver=v?E.models.User.get(v):null,t.canEscalateMessages=e&&l,t.desktopPriorityMessagingSounds=m&&s,t.displayName=b?"Contacts":g,t.isContacts=b,t.showPatientCare=n&&h,t.isPatientNetworkEnabled=r&&f,E.currentUser&&(E.currentUser.isPatient||E.currentUser.isPatientContact)&&r&&(t.isPatientNetworkEnabled="off"!==f),t.showTeams=o&&p,t.userRoles=E.userRoles.getByOrganizationId(y),t.networks||(t.networks={}),t.networks.provider||(t.networks.provider={unreadCount:0,unreadPriorityCount:0}),t.networks.patient||(t.networks.patient={dnd:!1,dndText:"",unreadCount:0,unreadPriorityCount:0}),t.networks.virtualWaitingRoom||(t.networks.virtualWaitingRoom={unreadCount:0,unreadPriorityCount:0}),t.network){var w=t.network.patient,I=w.dnd,O=w.dndText;t.networks.patient.dnd=I,t.networks.patient.dndText=null!==O?O:"",delete t.network}},methods:{getSettingValue:function(t){return jd(this.settings,t)},getSettingEntry:function(t){return this.settings&&t in this.settings?this.settings[t]:null}},relations:{hasMany:{__expirableMessages:{type:"message",foreignKey:"__organizationId",filter:function(t){return!!t.expiresAt},sortBy:[["expiresAt","asc"],["id","asc"]]},__expirableMutes:{type:"mute",foreignKey:"organizationId",filter:function(t){return!!t.expiresAt},sortBy:[["expiresAt","asc"],["id","asc"]]},__markingAsReadConversations:{type:"conversation",foreignKey:"organizationId",filter:function(t){return!!t._markingAsRead},sortBy:[["_markingAsReadExpiration","asc"],["id","asc"]]},conversations:{type:"conversation",foreignKey:"organizationId",filter:function(t){var e=t.counterParty;return!!e&&e.groupType!==_o.ROLE_ASSIGNMENT},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]},messageTemplates:{type:"messageTemplate",foreignKey:"organizationId",sortBy:[["title","asc"]]},roles:{type:"role",foreignKey:"organizationId"},roleTags:{type:"roleTag",foreignKey:"organizationId"}}}});return il(n,{finder:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=E.organizations).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return E.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return E.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{name:"Loading Organization..."},defaultNotFoundAttrs:{displayName:"<Organization Not Found>"}}),n},Md=function(t,e){return e.host,t.defineModel("patient",{replaceKeys:{patientMrn:"mrn",patientGender:"gender",patientDob:"dob"},parseAttrs:function(t){return"featureService"in t&&delete t.featureService,"patientContacts"in t&&delete t.patientContacts,"isPatientContact"in t&&delete t.isPatientContact,"dob"in t&&(t.dob=Object(Ea.formatDob)(t.dob)),"phoneNumber"in t&&(t.phoneNumber=Object(Oa.formatPhoneWithDash)(t.phoneNumber)),t},relations:{belongsTo:{user:{type:"user",foreignKey:"userId"}},hasMany:{contacts:{type:"patientContact",foreignKey:"patientId"},sharedConversations:{type:"conversation",foreignKey:"patientId",filter:function(t,e){var n=t.counterParty;if(!n)return!1;var r=n.groupType,o=n.hasCurrentUserOrRole,i=n.memberIds;return!(r!==_o.PATIENT_MESSAGING||!o||!i.includes(e.userId))},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]}}}})},kd=function(t,e){return e.host,t.defineModel("patientContact",{replaceKeys:{patientDob:"dob",patientGender:"gender",patientMrn:"mrn",relationName:"relation"},parseAttrs:function(t){return"entity"in t&&delete t.entity,"dob"in t&&(t.dob=Object(Ea.formatDob)(t.dob)),"phoneNumber"in t&&(t.phoneNumber=Object(Oa.formatPhoneWithDash)(t.phoneNumber)),t},relations:{belongsTo:{patient:{type:"patient",foreignKey:"patientId"},user:{type:"user",foreignKey:"userId"}},hasMany:{sharedConversations:{type:"conversation",foreignKey:"patientContactId",filter:function(t,e){var n=t.counterParty;if(!n)return!1;var r=n.groupType,o=n.hasCurrentUserOrRole,i=n.memberIds;return!(r!==_o.PATIENT_MESSAGING||!o||!i.includes(e.userId))},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]}}}})},Nd=function(t,e){var n=e.host;return t.defineModel("product",{defaultValues:{activeProcessingEvents:null,conversationCount:0,organizations:null,rolesOptingIn:null,unreadCount:0,unreadPriorityCount:0,unreadVWRCount:0,unreadVWRPriorityCount:0},transientAttrs:["conversationCount","organizations","unreadCount","unreadPriorityCount"],afterAssignment:function(t){var e=t.id;t.productRoles=n.userRoles.getByProductId(e),null===t.activeProcessingEvents&&(t.activeProcessingEvents=[]),null===t.organizations&&(t.organizations=[]),null===t.rolesOptingIn&&(t.rolesOptingIn=[])}})};function zd(t,e){return!!t&&t.includes(e)}function Dd(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}i((u=u.apply(t,s||[])).next())})}function Ud(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var Ld=function(t,e){return t.defineModel("productRoles",{defaultValues:{roles:[]},afterAssignment:function(t){var e=t.roles;t.isAdmin=zd(e,"tt_admin"),t.isAnalyticsAdmin=zd(e,"tt_reporting"),t.isLdapAdmin=zd(e,"tt_ldap"),t.isSuperAdmin=zd(e,"tt_super_admin")},methods:{hasRole:function(t){return!!this.roles&&this.roles.includes(t)}},relations:{belongsTo:{product:{type:"product",foreignKey:"productId"},user:{type:"user",foreignKey:"userId"}}}})},Fd=function(t,e){var n=e.host;return t.defineModel("role",{defaultValues:{description:"",memberIds:null,roleTagId:null},afterAssignment:function(t){n.users._setMembersOnEntity(t)},relations:{belongsTo:{assignmentGroup:{type:"group",foreignKey:"assignmentGroupId"},botUser:{type:"user",foreignKey:"botUserId"},escalationPolicy:{type:"escalationPolicy",foreignKey:"escalationPolicyId"},organization:{type:"organization",foreignKey:"organizationId"},roleTag:{type:"roleTag",foreignKey:"roleTagId"}}}})},Bd=function(t,e){return t.defineModel("roleTag",{replaceKeys:{tagColor:"color",tagName:"name"},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}},hasMany:{roles:{type:"role",foreignKey:"roleTagId"}}},parseAttrs:function(t){if("colorValue"in t){var e=t.color,n=t.colorValue;t.color=n,t.colorId=e,delete t.colorValue}return"color"in t&&(t.color=t.color.replace("0x","#")),t},afterAssignment:function(t){var e=t.name;t.displayName=e,t.isDefault=e&&e.startsWith("Default")}})},qd=function(o,t){var e=t.host;return o.defineModel("scheduledMessage",{replaceKeys:{createdBy:"createdById",recipient:"recipientId",recipientType:"_recipientType",senderToken:"senderId",scheduleStatus:"status",updatedBy:"updatedById"},transientAttrs:["$deleted"],parseAttrs:function(t){return t.hasAttachment=!1,t.attachmentName&&t.attachmentSize&&t.attachmentType&&(t.hasAttachment=!0),t._recipientType&&(t.recipientType=e.modelsByEntityType[ea.a.camelizeKey(t._recipientType)].name),t},afterAssignment:function(t){var e=t.recipient,n=t.recipientId,r=t.recipientType;e?(n=e.id,r=e.$entityType):e=r&&n?o.store.get(r,n):null,t.recipient=e,t.recipientId=n,t.recipientType=r},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},sender:{type:"user",foreignKey:"senderId"},template:{type:"messageTemplate",foreignKey:"templateId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}})},Vd=function(t,e){var a=e.host,n=t.defineModel("team",{replaceKeys:{avatar:"avatarUrl",group_token:"groupToken",members:"__members",numMembers:"__memberCount",name:"displayName"},transientAttrs:["__memberCount","__members"],defaultValues:{canMembersLeave:!1,canRequestToJoin:!1,hasCurrentUserOrRole:!1,hasCurrentUserPending:!1,hasCurrentUserBeenDeclined:!1,memberIds:[]},skipCamelizationForKeys:["members"],parseAttrs:function(t){var e=t.__members;if(e){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r];if("object"==typeof i)if(i.token){n.push(i.token);var s=a.models.User.inject(i);a.models.User.removePlaceholder({entity:s,attrs:i})}else i.id&&n.push(i.id);else"string"==typeof i&&n.push(i)}t.memberIds=n,delete t.__members}return t},afterAssignment:function(t){var e=t.memberIds;a.groups._setMembership(t),a.users._setMembersOnEntity(t),a.teams._setHasUserPending(t),t.memberCount=e&&e.length||t.__memberCount||0},relations:{belongsTo:{group:{type:"group",foreignKey:"groupId"}}}});return il(n,{finder:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=a.teams).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return a.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return a.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading..."},defaultNotFoundAttrs:{displayName:"<Team Not Found>"}}),n},Gd=function(t,e){return e.host,t.defineModel("teamRequest",{replaceKeys:{},transientAttrs:[],defaultValues:{},parseAttrs:function(t){return t.createdBy&&(t.createdById=t.createdBy.token,delete t.createdBy),t.team&&(t.teamId=t.team.id,delete t.team),t},afterAssignment:function(t){},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},team:{type:"team",foreignKey:"teamId"}}}})},Hd=function(t,e){return t.defineModel("userRoles",{defaultValues:{roles:[]},afterAssignment:function(t){var e="UpM28mnfW65vJkbqEATtKvxm"===t.organizationId,n=t.roles;t.isAdmin=n.includes("admin"),t.isHelpDesk=n.includes("help_desk"),t.isPatientAdmin=n.includes("patient_messaging_admin"),t.isRoleAdmin=n.includes("feature_role_admin"),t.isTeamAdmin=n.includes("team_admin"),t.isVirtualWaitingRoomAdmin=n.includes("virtual_waiting_room_admin"),t.reportingEnabled=n.includes("reporting")&&!e,t.reportingEnabledOnAllOrgs=n.includes("reporting_view_orgs")&&!e,t.tigerTouchPlusReportingEnabled=n.includes("tigertouchplus_reporting")},methods:{hasRole:function(t){return this.roles.includes(t)}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"},user:{type:"user",foreignKey:"userId"}}}})},Wd=function(t,e){return e.host,t.defineModel("virtualWaitingRoom",{parseAttrs:function(t){return t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},Yd=function(t,e){return e.host,t.defineModel("VirtualWaitingRoomVisit",{parseAttrs:function(t){return t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"},VirtualWaitingRoom:{type:"VirtualWaitingRoom",foreignKey:"roomId"}}}})},Kd=n(252),$d=function(){return($d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xd=(nh.prototype.defineModels=function(){var n=this,r={},o=$d($d({},this.options),{host:this.host,logger:this.logger});ye.a.each(i,function(t,e){r[e]=t(n,o)}),this.models=r},nh.prototype.defineModel=function(t,o){return void 0===o&&(o={}),ye.a.defaults(o,{replaceKeys:{},skipCamelizationForKeys:null}),ye.a.defaults(o.replaceKeys,{token:"id"}),this.store.defineModel(t,$d($d({},o),{afterInject:function(t){var e=Date.now();t.$lastModified===e&&(e+=1e-5),t.$lastModified=e,o.afterInject&&o.afterInject(t)},parseAttrs:function(t){var e;if(ye.a.isEmpty(o.skipCamelizationForKeys))e=ea.a.camelizeObject(t);else{var n=ye.a.omit(t,o.skipCamelizationForKeys),r=ye.a.pick(t,o.skipCamelizationForKeys);e=$d($d({},ea.a.camelizeObject(n)),r)}return Object(ea.o)(e,o.replaceKeys),o.parseAttrs&&(e=o.parseAttrs(e,t)),e}}))},nh.prototype.clear=function(){this.store.clear()},nh),Qd=n(256).version,Zd=Qd=Qd.replace("-dev",""),Jd=function(){return(Jd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},th=(eh.prototype._listenToEvents=function(){var r=this;this.on("signedIn",function(t,e){r.logger.info("signedIn",t.id)}),this.on("signedOut",function(t){t.resetClient&&r.reset()}),this.on("signUp",function(t){var e=t.user,n=t.auth;r.logger.info("signUp",e.id),r._setCurrentUser(e),r._setAuth(n)}),this.events.on("event",function(t){r.emit("event",t),"bang"===t.type&&r._resetLastBang()}),this.events.on("batch:available",function(t){return r.emit("events:batch:available",t)}),this.events.on("connected",function(){return r.emit("events:connected")}),this.events.on("disconnected",this._onDisconnected),this.events.on("processing:start",function(t){return r.emit("processing:start",t)}),this.events.on("processing:stop",function(t){return r.emit("processing:stop",t)}),this.events.on("visibilityChange",function(t,e){return r.emit("visibilityChange",t,e)}),this.calls.on("answered",function(t){return r.emit("call:answered",t)}),this.calls.on("closed",function(t){return r.emit("call:closed",t)}),this.calls.on("ended",function(t){return r.emit("call:ended",t)}),this.calls.on("memberUpdate",function(t){return r.emit("call:memberUpdate",t)}),this.calls.on("incoming",function(t){return r.emit("call:incoming",t)}),this.calls.on("state",function(t){return r.emit("call:state",t)}),this.conversations.on("clearTimeline",function(t){return r.emit("conversation:clearTimeline",t)}),this.conversations.on("clearMessageStatuses",function(t){return r.emit("conversation:clearMessageStatuses",t)}),this.conversations.on("message",function(t){return r.emit("message",t)}),this.conversations.on("friends",function(t){return r.emit("friends",t)}),this.eventSourceClient.on("auth:invalid",function(){return r.emit("auth:invalid")}),this.groups.on("membership:change",function(t){return r.emit("group:membership:change",t)}),this.httpClient.on("networkStatus:change",function(t){return r.emit("networkStatus:change",t)}),this.notifications.on("connected",function(){return r.emit("notifications:connected")}),this.notifications.on("disconnected",function(t){return r.emit("notifications:disconnected")}),this.notifications.on("signingIn",function(){return r.emit("notifications:signingIn")}),this.notifications.on("signedIn",function(t){return r.emit("notifications:signedIn",t)}),this.notifications.on("signingOut",function(t){return r.emit("notifications:signingOut",t)}),this.notifications.on("signedOut",function(t){return r.emit("notifications:signedOut",t)}),this.notifications.on("event",function(t){return r.emit("notifications:event",t)}),this.notifications.on("message",function(t){return r.emit("notification:message",t)}),this.notifications.on("unread:change",function(t){return r.emit("notification:unread:change",t)}),this.organizations.on("preferences:change",function(t){return r.emit("organization:preferences:change",t)}),this.presence.on("change",function(t){return r.emit("presence:change",t)}),this.roles.on("change",function(t){return r.emit("role:change",t)}),this.typingStatus.on("change",function(t){return r.emit("typing:change",t)}),this.users.on("preferences:change",function(t){return r.emit("user:preferences:change",t)}),"undefined"!=typeof window&&window.addEventListener("unload",this._onBrowserUnload)},eh.prototype._startTicker=function(){this.__ticker=setTimeout(this._onTick,5e3),this.__tickerFrame=null},eh.prototype._stopTicker=function(){null!==this.__ticker&&(clearTimeout(this.__ticker),this.__ticker=null),null!==this.__tickerFrame&&(me.a.cancel(this.__tickerFrame),this.__tickerFrame=null)},eh.prototype.signIn=function(u,c,l){return void 0===l&&(l={}),Dd(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Ud(this,function(t){switch(t.label){case 0:return e=l.udid,n=void 0===e?be()():e,r=l.refreshUser,o=void 0===r||r,this.emit("signingIn"),[4,this.users.signIn(u,c,{udid:n})];case 1:return i=t.sent(),s=i.auth,a=i.user,this._setCurrentUser(a),this._setAuth(s),o?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:t.sent(),t.label=3;case 3:return this.emit("signedIn",a,s),[2,{auth:s,user:a}]}})})},eh.prototype.signInWithApiKeyAndSecret=function(u,c,l){return void 0===l&&(l={}),Dd(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Ud(this,function(t){switch(t.label){case 0:return e=l.udid,n=void 0===e?be()():e,r=l.refreshUser,o=void 0===r||r,this.emit("signingIn"),[4,this.users.signInWithApiKeyAndSecret(u,c,{udid:n})];case 1:return i=t.sent(),s=i.auth,a=i.user,this._setCurrentUser(a),this._setAuth(s),o?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:t.sent(),t.label=3;case 3:return this.emit("signedIn",a,s),[2,{auth:s,user:a}]}})})},eh.prototype.signInWithMagicToken=function(u,c){return void 0===c&&(c={}),Dd(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return Ud(this,function(t){switch(t.label){case 0:return e=c.udid,n=void 0===e?be()():e,r=c.refreshUser,o=void 0===r||r,this.emit("signingIn"),[4,this.users.signInWithMagicToken(u,{udid:n})];case 1:return i=t.sent(),s=i.auth,a=i.user,this._setCurrentUser(a),this._setAuth(s),o?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:t.sent(),t.label=3;case 3:return this.emit("signedIn",a,s),[2,{auth:s,user:a}]}})})},eh.prototype.signOut=function(t){var e=void 0===t?{}:t,n=e.async,r=void 0===n||n,o=e.fromServer,i=void 0!==o&&o,s=e.resetClient,a=void 0===s||s;if(!this.isSignedIn)return Promise.resolve(!1);if(!r&&"undefined"==typeof XMLHttpRequest)throw new Error("`async: false` option cannot be set unless using signOut() in a browser");if(this.events.disconnect({source:"On sign out"}),r)return this.users.signOut({fromServer:i,resetClient:a});this.emit("signingOut",{fromServer:i,resetClient:a});var u=new XMLHttpRequest;u.open("POST",this.config.baseUrl+"/v2/logout",!1);for(var c=0,l=Object.entries(this.httpClient.getAuthHeaders());c<l.length;c++){var d=l[c],h=d[0],f=d[1];u.setRequestHeader(h,f)}return u.send(null),this.emit("signedOut",{fromServer:i,resetClient:a,signedOut:!0}),Promise.resolve(!0)},eh.prototype.signOutAllDevices=function(t){var e=(void 0===t?{}:t).async,n=void 0===e||e;if(!this.isSignedIn)return Promise.resolve();if(!n&&"undefined"==typeof XMLHttpRequest)throw new Error("`async: false` option cannot be set unless using signOutAllDevices() in a browser");if(n)return this.users.signOutAllDevices();var r=new XMLHttpRequest;r.open("POST",this.config.baseUrl+"/v2/wipe?token="+this.currentUserId,!1);for(var o=0,i=Object.entries(this.httpClient.getAuthHeaders());o<i.length;o++){var s=i[o],a=s[0],u=s[1];r.setRequestHeader(a,u)}return r.send(null),Promise.resolve()},eh.prototype.authenticate=function(e,n){return Dd(this,void 0,void 0,function(){return Ud(this,function(t){switch(t.label){case 0:return[4,this._authenticateWithParams({key:e,secret:n})];case 1:return[2,t.sent()]}})})},eh.prototype.authenticateUsingOauth=function(r,o){return void 0===o&&(o={udid:void 0}),Dd(this,void 0,void 0,function(){var e,n;return Ud(this,function(t){switch(t.label){case 0:return e=o.udid,n=void 0===e?be()():e,[4,this._authenticateWithParams({bearerToken:r,udid:n})];case 1:return[2,t.sent()]}})})},eh.prototype._authenticateWithParams=function(r){return Dd(this,void 0,void 0,function(){var e,n;return Ud(this,function(t){switch(t.label){case 0:this._setAuth(r),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.users.findMe()];case 2:return e=t.sent(),this._setCurrentUser(e),this.emit("signedIn",e,r),[2,e];case 3:throw n=t.sent(),this._removeAuth(),this._currentUser=null,n;case 4:return[2]}})})},eh.prototype._setCurrentUser=function(t){this._currentUser=t},eh.prototype._setAuth=function(t){this._auth=t,this.httpClient.setAuth(t),this.events.setAuth(t)},eh.prototype._removeAuth=function(){this._auth=null,this.httpClient.removeAuth(),this.events.removeAuth()},eh.prototype.getCurrentUser=function(){return this._currentUser||null},Object.defineProperty(eh.prototype,"currentUser",{get:function(){return this.getCurrentUser()},enumerable:!1,configurable:!0}),Object.defineProperty(eh.prototype,"currentUserId",{get:function(){var t=this.getCurrentUser();return t?t.id:null},enumerable:!1,configurable:!0}),eh.prototype.getAuth=function(){return this._auth},Object.defineProperty(eh.prototype,"isSignedIn",{get:function(){return!!this.getAuth()},enumerable:!1,configurable:!0}),eh.prototype.requireUser=function(){if(!this.isSignedIn)throw new Or.NotSignedInError},eh.prototype.reactToAdvisoryEvent=function(t,e){switch(this.emit("advisory",{type:t,data:e}),t){case"replayStart":this.currentlyServingOfflineMessages=!0,this.emit("messages:offline:start",e),this.products._addProcessingEvent({actionType:xo.MESSAGE_REPLAY,entity:this.products.getAll()[0],itemsEstimate:e.replayMessageCount});break;case"replayStop":null===this._checkBangTimer&&(this.emit("groups:offline:start"),this._startBangTimer()),this.products._removeProcessingEvent({actionType:xo.MESSAGE_REPLAY,entity:this.products.getAll()[0]})}},Object.defineProperty(eh.prototype,"MODEL_BY_TYPE_NS",{get:function(){return this._MODEL_BY_TYPE_NS||(this._MODEL_BY_TYPE_NS={"tigertext:entity:account":this.models.User,"tigertext:entity:group":this.models.Group,"tigertext:entity:distribution_list":this.models.DistributionList,"tigertext:entity:dist_list_member":this.models.User,"tigertext:entity:list":this.models.DistributionList,"tigertext:entity:message_template":this.models.MessageTemplate,"tigertext:entity:patient_distribution_list":this.models.DistributionList,"tigertext:entity:schedule_message":this.models.ScheduledMessage,"tigertext:entity:tag":this.models.RoleTag,"tigertext:entity:team":this.models.Team,"tigertext:iq:message":this.models.Message,"tigertext:iq:group_message":this.models.Message,"tigertext:iq:group:message":this.models.Message}),this._MODEL_BY_TYPE_NS},enumerable:!1,configurable:!0}),eh.prototype.modelByTypeNS=function(t){return this.MODEL_BY_TYPE_NS[t]},eh.prototype.modelNameByTypeNS=function(t){var e=this.MODEL_BY_TYPE_NS[t];return e?e.name:(pe()(e,"modelNameByTypeNS: Missing class for "+t),null)},eh.prototype.modelNameByEntityType=function(t){var e=this.modelsByEntityType[t]||this.MODEL_BY_TYPE_NS[t];if(e)return e.name;pe()(e,"modelNameByEntityType: Missing class for "+t)},eh.prototype.ejectModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.MODEL_BY_TYPE_NS[e]||this.modelsByEntityType[e];if(n)return n.eject(t);pe()(n,"ejectModel: Missing class for "+e)},eh.prototype.injectModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.MODEL_BY_TYPE_NS[e]||this.modelsByEntityType[e];return n?n.inject(t):(pe()(n,"injectModel: Missing class for "+e),null)},eh.prototype.injectPlaceholderModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.modelByTypeNS(e)||this.modelsByEntityType[e];return n?n.injectPlaceholder(t):(pe()(n,"injectPlaceholderModel: Missing class for "+e),null)},eh.prototype.getEntity=function(t,e){return this.modelsByEntityType[t].get(e)},eh.prototype.getEntities=function(t){var e=this;return t.map(function(t){return e.getEntity(t.type,t.id)})},eh.prototype.dispose=function(){this._stopTicker(),this.conversationsLoaded=!1,null!==this._checkBangTimer&&(clearTimeout(this._checkBangTimer),this._checkBangTimer=null);for(var t=0,e=this._services;t<e.length;t++){var n=e[t];n.dispose&&n.dispose()}this.store&&this.store.clear()},eh.prototype.reset=function(){this.dispose();for(var t=0,e=this._services;t<e.length;t++){var n=e[t];n.mounted&&n.mounted()}this._startTicker()},eh.prototype.configure=function(t){return Object.assign(this.config,t),this.httpClient.mounted(),this},eh.prototype.setDefaultOrganization=function(t){return this.configure({defaultOrganizationId:t})},Object.defineProperty(eh.prototype,"networkStatus",{get:function(){return this.httpClient.networkStatus},enumerable:!1,configurable:!0}),Object.defineProperty(eh.prototype,"forgotPasswordUrl",{get:function(){return Zr.FORGOT_PASSWORD_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(eh.prototype,"adminUrl",{get:function(){return this.config.adminFeatureBranch?"/feature/"+this.config.adminFeatureBranch+"/app/admin":this.config.localAdminUrl?this.config.localAdminUrl:Zr.ADMIN_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(eh.prototype,"cnUrl",{get:function(){return this.config.localCnUrl?this.config.localCnUrl:Zr.CN_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(eh.prototype,"rolesUrl",{get:function(){return this.config.rolesFeatureBranch?"/feature/"+this.config.rolesFeatureBranch+"/app/roles/index.html":this.config.localRolesUrl?this.config.localRolesUrl:Zr.ROLES_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),eh.CONSUMER_ORGANIZATION_ID=Zr.CONSUMER_ORGANIZATION_ID,eh.errors=Or,eh.VERSION=Zd,eh.version=Zd,eh);function eh(t){var n=this;void 0===t&&(t={}),this.errors=Or,this.VERSION=Zd,this.version=Zd,this._onBrowserUnload=function(){var r=[];n.emit("browserUnload",function(t,e,n){return r.push({fn:t,priority:e,name:n})}),ye.a.orderBy(r,["priority"],["desc"]).forEach(function(t){var e=t.fn,n=t.priority,r=t.name;console.log("[unload]",n,r),e()})},this._onDisconnected=function(t){var e=t.isRecoverable;e||n._removeAuth(),n.emit("events:disconnected",{isRecoverable:e})},this._onTick=function(){n.__tickerFrame=me()(function(){try{n.emit("tick")}finally{n.__ticker=setTimeout(n._onTick,5e3)}})},this._resetLastBang=function(){n._bangOccurredDuringReplay=!0},this._startBangTimer=function(){n._bangOccurredDuringReplay=!1,n._checkBangTimer=setTimeout(n._didBangOccur,n.config.detectBangReplayTimeout)},this._didBangOccur=function(){n._bangOccurredDuringReplay?n._startBangTimer():(n._checkBangTimer=null,n._bangReplayDone())},this._bangReplayDone=function(){n.currentlyServingOfflineMessages&&(n.currentlyServingOfflineMessages=!1,n.emit("conversations:loading:start"),n.conversations.hasPendingReloads()&&n.conversations.__flushConversationsToReload(),n.emit("groups:offline:stop"),n.emit("messages:offline:stop"),n.emit("conversations:loading:stop"),n.emit("messages:new:start"))},this.config=Object.assign({},t),ye.a.defaultsDeep(this.config,Zr.CONFIG_DEFAULT);var e=this.config,r=e.apiEnv,o=e.logLevel;this.config.cloudfront=Zr.CLOUDFRONT[r],/(env\d+|lt\d*)/.test(r)&&(this.config.cloudfront=Zr.CLOUDFRONT.development,Zr.BASE_URLS[this.config.apiEnv]="https://"+r+"-devapi.tigertext.xyz",Zr.FORGOT_PASSWORD_URLS[this.config.apiEnv]="https://"+r+"-forget.tigertext.com",Zr.CN_URLS[this.config.apiEnv]="https://"+r+"-console.tigertext.xyz",Zr.ADMIN_URLS[this.config.apiEnv]=Zr.CN_URLS[r]+"/app/admin",Zr.ROLES_URLS[this.config.apiEnv]="/"+r+"/app/roles/index.html"),this.config.baseUrl||(this.config.baseUrl=Zr.BASE_URLS[r]),Object.assign(this,{attachments:ea.f,date:ea.g,email:ea.h,file:ea.i,phone:ea.m}),this.httpClient=new Gs({config:this.config,logger:new to({name:"HttpClient",level:o})}),this.eventSourceClient=new Fo({config:this.config,httpClient:this.httpClient,logger:new to({name:"EventSourceClient",level:o})}),this.enums=Jd(Jd({},_),{NetworkStatus:Uo}),this.store=new Xd(this,{logger:new to({name:"Store",level:o})}),this.store.defineModels(),this.models=this.store.models,this.modelsByEntityType=ye.a.mapKeys(this.store.models,function(t,e){return ea.a.camelizeKey(e)}),this.modelsByEntityType.account=this.modelsByEntityType.user,this.modelsByEntityType.list=this.modelsByEntityType.distributionList,this.allModelEntityTypes=Object.keys(this.modelsByEntityType),this.logger=new to({name:"TigerConnectClient",level:o}),this.api={};for(var i=0,s=Object.entries(m);i<s.length;i++){var a=s[i],u=a[0],c=a[1],l=ea.a.camelizeKey(u);this.api[l]=new c(this,{logger:new to({name:u+"API",level:o})})}this._services=[];for(var d=0,h=Object.entries(b);d<h.length;d++){var f=h[d],p=f[0],v=(c=f[1],l=ea.a.camelizeKey(p),new c(this,{logger:new to({name:p+"Service",level:this.config.serviceLogLevels[l]||o})}));this[l]=v,this._services.push(v)}for(var y=0,g=this._services;y<g.length;y++)(v=g[y]).mounted&&v.mounted();this._listenToEvents(),this._startTicker(),this.on("browserUnload",function(t){return t(function(){n.config.autoSignOutOnBrowserUnload&&(n.notifications.disconnect({source:"On browser unload"}),n.signOut({async:!1,resetClient:!1}))},100,"signOut")}),this._checkBangTimer=null,this.conversationsLoaded=!1,this.currentlyServingOfflineMessages=!1}function nh(t,e){void 0===e&&(e={});var n=e.logger,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["logger"]);this.host=t,this.options=r,this.logger=n,this.store=new Kd.a($d($d({},r),{host:t,logger:n})),this.store.host=t}Object.assign(th.prototype,he.a.prototype)}]);