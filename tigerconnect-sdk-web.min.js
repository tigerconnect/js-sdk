var TigerConnect=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=208)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ConnectionUnavailableError",(function(){return o})),n.d(e,"NotFoundError",(function(){return s})),n.d(e,"NotSignedInError",(function(){return c})),n.d(e,"NotSupportedError",(function(){return d})),n.d(e,"PermissionDeniedError",(function(){return h})),n.d(e,"RequiresBasicAuthError",(function(){return v})),n.d(e,"TargetNotSupportedError",(function(){return g})),n.d(e,"ValidationError",(function(){return m.a})),n.d(e,"WrongCredentialsError",(function(){return b}));var r,i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.call(this,"No internet connection")||this;return i.code=e.CODE,i}return i(e,t),e.CODE="connection-unavailable",e}(Error),a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(t){function e(n,r,i){var o=this;return i||(i=n+" '"+r+"' not found"),(o=t.call(this,i)||this).code=e.CODE,o.resource=n,o.id=r,o}return a(e,t),e.CODE="not-found",e}(Error),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return i.code=e.CODE,i}return u(e,t),e.CODE="not-signed-in",e}(Error),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(n){var r=t.call(this,n)||this;return r.code=e.CODE,r}return l(e,t),e.CODE="not-supported",e}(Error),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(n,r,i,o){void 0===o&&(o="can't perform action '"+i+"' on "+(n.name||n)+" #"+r);var a=t.call(this,o)||this;return a.code=e.CODE,a.resource=n,a.action=i,a.id=r,a}return f(e,t),e.CODE="permission-denied",e}(Error),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return i.code=e.CODE,i}return p(e,t),e.CODE="requires-basic-auth",e}(Error),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(e){return t.call(this,"method"+(e?" "+e:"")+" not supported in target web")||this}return y(e,t),e.raise=function(t){throw new this(t)},e.CODE="target-not-supported",e}(Error),m=n(82),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(n){void 0===n&&(n={});for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=t.apply(this,r)||this,a=n.tt_login_attempts_left;return o.code=e.CODE,o.loginAttemptsLeft=void 0===a?null:a,o}return _(e,t),e.CODE="wrong-credentials",e}(Error)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return h}));var r=n(9),i=n.n(r),o=n(0),a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},c=[403,404],l={CONVERSATION_FIND_ALL:"conversations.findAll",DISTRIBUTION_LIST_FIND:"distributionLists.find",ENTITIES_FIND_ALL:"entities.findAll",ESCALATION:"escalation",EVENTS_ACK:"events.ack",EVENTS_CLOSE_ALL_CONNECTIONS:"events.closeAllConnections",GROUP_ADD_MEMBERS:"group.addMembers",GROUP_CREATE:"group.create",GROUP_DESTROY:"group.destroy",GROUP_FIND:"group.find",GROUP_FIND_ALL_MEMBER_IDS:"group.findAllMemberIds",GROUP_UPDATE:"group.update",MESSAGE_FIND:"messages.find",MESSAGE_FIND_RECIPIENT_STATUS:"messages.findRecipientStatus",MESSAGE_FIND_RECIPIENT_STATUS_MULTI:"messages.findRecipientStatusMulti",MESSAGE_FORWARD:"message.forward",MESSAGE_SEND:"message.send",MESSAGE_UPDATE_RECIPIENT_STATUS_MULTI:"messages.updateRecipientStatusMulti",METADATA_FIND:"metadata.find",MUTE_FIND_ALL:"mute.findAll",ORGANIZATION_FIND:"organization.find",ORGANIZATION_FIND_ALL_OF_USER:"organization.findAllOfUser",ROLES_CREATE_P2P_GROUP:"roles.createP2PGroup",SEARCH_QUERY:"search.query",TEAMS_CREATE:"teams.create",TEAMS_FIND:"teams.find",TEAMS_LEAVE:"teams.leave",TEAMS_UPDATE:"teams.update",USER_FIND:"user.find",USER_FIND_ME:"user.findMe"},d={VERSION_TWO:"v2",VERSION_FIVE:"v5"},f=function(){function t(t,e){Object.assign(this,e),this.config=t.config,this.host=t,this.httpClient=t.httpClient}return t.prototype.getVersion=function(t){var e=d.VERSION_TWO,n=d.VERSION_FIVE;return{version:this.config.condensedReplays?n:e}},t}();function h(t){var e=void 0===t?{}:t,n=e.fallbackValue,r=void 0===n?null:n,i=e.httpStatusCodes,l=void 0===i?c:i;return function(t,e,n){var i=n.value;return n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.call.apply(i,u([this],t))];case 1:return[2,n.sent()];case 2:if((e=n.sent()).response&&l.includes(e.response.status))return[2,r];if(e.code===o.PermissionDeniedError.CODE&&l.includes(403))return[2,r];if(e.code===o.WrongCredentialsError.CODE&&l.includes(401))return[2,r];throw e;case 3:return[2]}}))}))},n}}e.c=f,Object.assign(f.prototype,i.a.prototype)},function(t,e,n){(function(t,n){(function(){var r="Expected a function",i="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",d="[object Function]",f="[object GeneratorFunction]",h="[object Map]",p="[object Number]",v="[object Object]",y="[object RegExp]",g="[object Set]",m="[object String]",_="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",I="[object DataView]",O="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",C="[object Uint8Array]",R="[object Uint16Array]",P="[object Uint32Array]",j=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,z=RegExp(k.source),D=RegExp(N.source),U=/<%-([\s\S]+?)%>/g,L=/<%([\s\S]+?)%>/g,F=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,H=RegExp(G.source),W=/^\s+|\s+$/g,Y=/^\s+/,K=/\s+$/,$=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/\\(\\)?/g,tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,et=/\w*$/,nt=/^[-+]0x[0-9a-f]+$/i,rt=/^0b[01]+$/i,it=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,at=/^(?:0|[1-9]\d*)$/,st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,lt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ft="[\\ud800-\\udfff]",ht="["+dt+"]",pt="["+lt+"]",vt="\\d+",yt="[\\u2700-\\u27bf]",gt="[a-z\\xdf-\\xf6\\xf8-\\xff]",mt="[^\\ud800-\\udfff"+dt+vt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_t="\\ud83c[\\udffb-\\udfff]",bt="[^\\ud800-\\udfff]",wt="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Et="(?:"+gt+"|"+mt+")",Tt="(?:"+Ot+"|"+mt+")",St="(?:"+pt+"|"+_t+")"+"?",At="[\\ufe0e\\ufe0f]?"+St+("(?:\\u200d(?:"+[bt,wt,It].join("|")+")[\\ufe0e\\ufe0f]?"+St+")*"),Ct="(?:"+[yt,wt,It].join("|")+")"+At,Rt="(?:"+[bt+pt+"?",pt,wt,It,ft].join("|")+")",Pt=RegExp("['’]","g"),jt=RegExp(pt,"g"),xt=RegExp(_t+"(?="+_t+")|"+Rt+At,"g"),Mt=RegExp([Ot+"?"+gt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ht,Ot,"$"].join("|")+")",Tt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ht,Ot+Et,"$"].join("|")+")",Ot+"?"+Et+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ot+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vt,Ct].join("|"),"g"),kt=RegExp("[\\u200d\\ud800-\\udfff"+lt+"\\ufe0e\\ufe0f]"),Nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dt=-1,Ut={};Ut[O]=Ut[E]=Ut[T]=Ut[S]=Ut[A]=Ut[C]=Ut["[object Uint8ClampedArray]"]=Ut[R]=Ut[P]=!0,Ut[a]=Ut[s]=Ut[w]=Ut[u]=Ut[I]=Ut[c]=Ut[l]=Ut[d]=Ut[h]=Ut[p]=Ut[v]=Ut[y]=Ut[g]=Ut[m]=Ut[b]=!1;var Lt={};Lt[a]=Lt[s]=Lt[w]=Lt[I]=Lt[u]=Lt[c]=Lt[O]=Lt[E]=Lt[T]=Lt[S]=Lt[A]=Lt[h]=Lt[p]=Lt[v]=Lt[y]=Lt[g]=Lt[m]=Lt[_]=Lt[C]=Lt["[object Uint8ClampedArray]"]=Lt[R]=Lt[P]=!0,Lt[l]=Lt[d]=Lt[b]=!1;var Ft={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bt=parseFloat,qt=parseInt,Vt="object"==typeof t&&t&&t.Object===Object&&t,Gt="object"==typeof self&&self&&self.Object===Object&&self,Ht=Vt||Gt||Function("return this")(),Wt=e&&!e.nodeType&&e,Yt=Wt&&"object"==typeof n&&n&&!n.nodeType&&n,Kt=Yt&&Yt.exports===Wt,$t=Kt&&Vt.process,Xt=function(){try{var t=Yt&&Yt.require&&Yt.require("util").types;return t||$t&&$t.binding&&$t.binding("util")}catch(t){}}(),Qt=Xt&&Xt.isArrayBuffer,Zt=Xt&&Xt.isDate,Jt=Xt&&Xt.isMap,te=Xt&&Xt.isRegExp,ee=Xt&&Xt.isSet,ne=Xt&&Xt.isTypedArray;function re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ie(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ae(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ue(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function ce(t,e){return!!(null==t?0:t.length)&&_e(t,e,0)>-1}function le(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function de(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function fe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function he(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function pe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ve(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ye=Oe("length");function ge(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function me(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function _e(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):me(t,we,n)}function be(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function we(t){return t!=t}function Ie(t,e){var n=null==t?0:t.length;return n?Se(t,e)/n:NaN}function Oe(t){return function(e){return null==e?void 0:e[t]}}function Ee(t){return function(e){return null==t?void 0:t[e]}}function Te(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Se(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ae(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ce(t){return function(e){return t(e)}}function Re(t,e){return de(e,(function(e){return t[e]}))}function Pe(t,e){return t.has(e)}function je(t,e){for(var n=-1,r=t.length;++n<r&&_e(e,t[n],0)>-1;);return n}function xe(t,e){for(var n=t.length;n--&&_e(e,t[n],0)>-1;);return n}function Me(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var ke=Ee({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ne=Ee({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ze(t){return"\\"+Ft[t]}function De(t){return kt.test(t)}function Ue(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Le(t,e){return function(n){return t(e(n))}}function Fe(t,e){for(var n=-1,r=t.length,o=0,a=[];++n<r;){var s=t[n];s!==e&&s!==i||(t[n]=i,a[o++]=n)}return a}function Be(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Ve(t){return De(t)?function(t){var e=xt.lastIndex=0;for(;xt.test(t);)++e;return e}(t):ye(t)}function Ge(t){return De(t)?function(t){return t.match(xt)||[]}(t):function(t){return t.split("")}(t)}var He=Ee({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var We=function t(e){var n,lt=(e=null==e?Ht:We.defaults(Ht.Object(),e,We.pick(Ht,zt))).Array,dt=e.Date,ft=e.Error,ht=e.Function,pt=e.Math,vt=e.Object,yt=e.RegExp,gt=e.String,mt=e.TypeError,_t=lt.prototype,bt=ht.prototype,wt=vt.prototype,It=e["__core-js_shared__"],Ot=bt.toString,Et=wt.hasOwnProperty,Tt=0,St=(n=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",At=wt.toString,Ct=Ot.call(vt),Rt=Ht._,xt=yt("^"+Ot.call(Et).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=Kt?e.Buffer:void 0,Ft=e.Symbol,Vt=e.Uint8Array,Gt=kt?kt.allocUnsafe:void 0,Wt=Le(vt.getPrototypeOf,vt),Yt=vt.create,$t=wt.propertyIsEnumerable,Xt=_t.splice,ye=Ft?Ft.isConcatSpreadable:void 0,Ee=Ft?Ft.iterator:void 0,Ye=Ft?Ft.toStringTag:void 0,Ke=function(){try{var t=Ji(vt,"defineProperty");return t({},"",{}),t}catch(t){}}(),$e=e.clearTimeout!==Ht.clearTimeout&&e.clearTimeout,Xe=dt&&dt.now!==Ht.Date.now&&dt.now,Qe=e.setTimeout!==Ht.setTimeout&&e.setTimeout,Ze=pt.ceil,Je=pt.floor,tn=vt.getOwnPropertySymbols,en=kt?kt.isBuffer:void 0,nn=e.isFinite,rn=_t.join,on=Le(vt.keys,vt),an=pt.max,sn=pt.min,un=dt.now,cn=e.parseInt,ln=pt.random,dn=_t.reverse,fn=Ji(e,"DataView"),hn=Ji(e,"Map"),pn=Ji(e,"Promise"),vn=Ji(e,"Set"),yn=Ji(e,"WeakMap"),gn=Ji(vt,"create"),mn=yn&&new yn,_n={},bn=Ao(fn),wn=Ao(hn),In=Ao(pn),On=Ao(vn),En=Ao(yn),Tn=Ft?Ft.prototype:void 0,Sn=Tn?Tn.valueOf:void 0,An=Tn?Tn.toString:void 0;function Cn(t){if(Ga(t)&&!Ma(t)&&!(t instanceof xn)){if(t instanceof jn)return t;if(Et.call(t,"__wrapped__"))return Co(t)}return new jn(t)}var Rn=function(){function t(){}return function(e){if(!Va(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Pn(){}function jn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function xn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Nn;++e<n;)this.add(t[e])}function Dn(t){var e=this.__data__=new kn(t);this.size=e.size}function Un(t,e){var n=Ma(t),r=!n&&xa(t),i=!n&&!r&&Da(t),o=!n&&!r&&!i&&Za(t),a=n||r||i||o,s=a?Ae(t.length,gt):[],u=s.length;for(var c in t)!e&&!Et.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ao(c,u))||s.push(c);return s}function Ln(t){var e=t.length;return e?t[zr(0,e-1)]:void 0}function Fn(t,e){return Eo(gi(t),$n(e,0,t.length))}function Bn(t){return Eo(gi(t))}function qn(t,e,n){(void 0!==n&&!Ra(t[e],n)||void 0===n&&!(e in t))&&Yn(t,e,n)}function Vn(t,e,n){var r=t[e];Et.call(t,e)&&Ra(r,n)&&(void 0!==n||e in t)||Yn(t,e,n)}function Gn(t,e){for(var n=t.length;n--;)if(Ra(t[n][0],e))return n;return-1}function Hn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Wn(t,e){return t&&mi(e,bs(e),t)}function Yn(t,e,n){"__proto__"==e&&Ke?Ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,r=e.length,i=lt(r),o=null==t;++n<r;)i[n]=o?void 0:vs(t,e[n]);return i}function $n(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,r,i,o){var s,l=1&e,b=2&e,j=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!Va(t))return t;var x=Ma(t);if(x){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return gi(t,s)}else{var M=no(t),k=M==d||M==f;if(Da(t))return di(t,l);if(M==v||M==a||k&&!i){if(s=b||k?{}:io(t),!l)return b?function(t,e){return mi(t,eo(t),e)}(t,function(t,e){return t&&mi(e,ws(e),t)}(s,t)):function(t,e){return mi(t,to(t),e)}(t,Wn(s,t))}else{if(!Lt[M])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case w:return fi(t);case u:case c:return new r(+t);case I:return function(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case E:case T:case S:case A:case C:case"[object Uint8ClampedArray]":case R:case P:return hi(t,n);case h:return new r;case p:case m:return new r(t);case y:return function(t){var e=new t.constructor(t.source,et.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return new r;case _:return i=t,Sn?vt(Sn.call(i)):{}}var i}(t,M,l)}}o||(o=new Dn);var N=o.get(t);if(N)return N;o.set(t,s),$a(t)?t.forEach((function(r){s.add(Xn(r,e,n,r,t,o))})):Ha(t)&&t.forEach((function(r,i){s.set(i,Xn(r,e,n,i,t,o))}));var z=x?void 0:(j?b?Wi:Hi:b?ws:bs)(t);return oe(z||t,(function(r,i){z&&(r=t[i=r]),Vn(s,i,Xn(r,e,n,i,t,o))})),s}function Qn(t,e,n){var r=n.length;if(null==t)return!r;for(t=vt(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Zn(t,e,n){if("function"!=typeof t)throw new mt(r);return bo((function(){t.apply(void 0,n)}),e)}function Jn(t,e,n,r){var i=-1,o=ce,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=de(e,Ce(n))),r?(o=le,a=!1):e.length>=200&&(o=Pe,a=!1,e=new zn(e));t:for(;++i<s;){var l=t[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d==d){for(var f=c;f--;)if(e[f]===d)continue t;u.push(l)}else o(e,d,r)||u.push(l)}return u}Cn.templateSettings={escape:U,evaluate:L,interpolate:F,variable:"",imports:{_:Cn}},Cn.prototype=Pn.prototype,Cn.prototype.constructor=Cn,jn.prototype=Rn(Pn.prototype),jn.prototype.constructor=jn,xn.prototype=Rn(Pn.prototype),xn.prototype.constructor=xn,Mn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Mn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Mn.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Mn.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:Et.call(e,t)},Mn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},kn.prototype.clear=function(){this.__data__=[],this.size=0},kn.prototype.delete=function(t){var e=this.__data__,n=Gn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,!0)},kn.prototype.get=function(t){var e=this.__data__,n=Gn(e,t);return n<0?void 0:e[n][1]},kn.prototype.has=function(t){return Gn(this.__data__,t)>-1},kn.prototype.set=function(t,e){var n=this.__data__,r=Gn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(hn||kn),string:new Mn}},Nn.prototype.delete=function(t){var e=Qi(this,t).delete(t);return this.size-=e?1:0,e},Nn.prototype.get=function(t){return Qi(this,t).get(t)},Nn.prototype.has=function(t){return Qi(this,t).has(t)},Nn.prototype.set=function(t,e){var n=Qi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},zn.prototype.has=function(t){return this.__data__.has(t)},Dn.prototype.clear=function(){this.__data__=new kn,this.size=0},Dn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Dn.prototype.get=function(t){return this.__data__.get(t)},Dn.prototype.has=function(t){return this.__data__.has(t)},Dn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof kn){var r=n.__data__;if(!hn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(t,e),this.size=n.size,this};var tr=wi(ur),er=wi(cr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Qa(a):n(a,s)))var s=a,u=o}return u}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=oo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?or(s,e-1,n,r,i):fe(i,s):r||(i[i.length]=s)}return i}var ar=Ii(),sr=Ii(!0);function ur(t,e){return t&&ar(t,e,bs)}function cr(t,e){return t&&sr(t,e,bs)}function lr(t,e){return ue(e,(function(e){return Fa(t[e])}))}function dr(t,e){for(var n=0,r=(e=si(e,t)).length;null!=t&&n<r;)t=t[So(e[n++])];return n&&n==r?t:void 0}function fr(t,e,n){var r=e(t);return Ma(t)?r:fe(r,n(t))}function hr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ye&&Ye in vt(t)?function(t){var e=Et.call(t,Ye),n=t[Ye];try{t[Ye]=void 0;var r=!0}catch(t){}var i=At.call(t);r&&(e?t[Ye]=n:delete t[Ye]);return i}(t):function(t){return At.call(t)}(t)}function pr(t,e){return t>e}function vr(t,e){return null!=t&&Et.call(t,e)}function yr(t,e){return null!=t&&e in vt(t)}function gr(t,e,n){for(var r=n?le:ce,i=t[0].length,o=t.length,a=o,s=lt(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=de(l,Ce(e))),u=sn(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new zn(a&&l):void 0}l=t[0];var d=-1,f=s[0];t:for(;++d<i&&c.length<u;){var h=l[d],p=e?e(h):h;if(h=n||0!==h?h:0,!(f?Pe(f,p):r(c,p,n))){for(a=o;--a;){var v=s[a];if(!(v?Pe(v,p):r(t[a],p,n)))continue t}f&&f.push(p),c.push(h)}}return c}function mr(t,e,n){var r=null==(t=yo(t,e=si(e,t)))?t:t[So(Lo(e))];return null==r?void 0:re(r,t,n)}function _r(t){return Ga(t)&&hr(t)==a}function br(t,e,n,r,i){return t===e||(null==t||null==e||!Ga(t)&&!Ga(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var d=Ma(t),f=Ma(e),b=d?s:no(t),O=f?s:no(e),E=(b=b==a?v:b)==v,T=(O=O==a?v:O)==v,S=b==O;if(S&&Da(t)){if(!Da(e))return!1;d=!0,E=!1}if(S&&!E)return o||(o=new Dn),d||Za(t)?Vi(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case u:case c:case p:return Ra(+t,+e);case l:return t.name==e.name&&t.message==e.message;case y:case m:return t==e+"";case h:var s=Ue;case g:var d=1&r;if(s||(s=Be),t.size!=e.size&&!d)return!1;var f=a.get(t);if(f)return f==e;r|=2,a.set(t,e);var v=Vi(s(t),s(e),r,i,o,a);return a.delete(t),v;case _:if(Sn)return Sn.call(t)==Sn.call(e)}return!1}(t,e,b,n,r,i,o);if(!(1&n)){var A=E&&Et.call(t,"__wrapped__"),C=T&&Et.call(e,"__wrapped__");if(A||C){var R=A?t.value():t,P=C?e.value():e;return o||(o=new Dn),i(R,P,n,r,o)}}if(!S)return!1;return o||(o=new Dn),function(t,e,n,r,i,o){var a=1&n,s=Hi(t),u=s.length,c=Hi(e).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var d=s[l];if(!(a?d in e:Et.call(e,d)))return!1}var f=o.get(t),h=o.get(e);if(f&&h)return f==e&&h==t;var p=!0;o.set(t,e),o.set(e,t);var v=a;for(;++l<u;){d=s[l];var y=t[d],g=e[d];if(r)var m=a?r(g,y,d,e,t,o):r(y,g,d,t,e,o);if(!(void 0===m?y===g||i(y,g,n,r,o):m)){p=!1;break}v||(v="constructor"==d)}if(p&&!v){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o)}(t,e,n,r,br,i))}function wr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=vt(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var d=new Dn;if(r)var f=r(c,l,u,t,e,d);if(!(void 0===f?br(l,c,3,r,d):f))return!1}}return!0}function Ir(t){return!(!Va(t)||(e=t,St&&St in e))&&(Fa(t)?xt:it).test(Ao(t));var e}function Or(t){return"function"==typeof t?t:null==t?Ws:"object"==typeof t?Ma(t)?Rr(t[0],t[1]):Cr(t):eu(t)}function Er(t){if(!fo(t))return on(t);var e=[];for(var n in vt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Tr(t){if(!Va(t))return function(t){var e=[];if(null!=t)for(var n in vt(t))e.push(n);return e}(t);var e=fo(t),n=[];for(var r in t)("constructor"!=r||!e&&Et.call(t,r))&&n.push(r);return n}function Sr(t,e){return t<e}function Ar(t,e){var n=-1,r=Na(t)?lt(t.length):[];return tr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Cr(t){var e=Zi(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Rr(t,e){return uo(t)&&ho(e)?po(So(t),e):function(n){var r=vs(n,t);return void 0===r&&r===e?ys(n,t):br(e,r,3)}}function Pr(t,e,n,r,i){t!==e&&ar(e,(function(o,a){if(i||(i=new Dn),Va(o))!function(t,e,n,r,i,o,a){var s=mo(t,n),u=mo(e,n),c=a.get(u);if(c)return void qn(t,n,c);var l=o?o(s,u,n+"",t,e,a):void 0,d=void 0===l;if(d){var f=Ma(u),h=!f&&Da(u),p=!f&&!h&&Za(u);l=u,f||h||p?Ma(s)?l=s:za(s)?l=gi(s):h?(d=!1,l=di(u,!0)):p?(d=!1,l=hi(u,!0)):l=[]:Ya(u)||xa(u)?(l=s,xa(s)?l=as(s):Va(s)&&!Fa(s)||(l=io(u))):d=!1}d&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));qn(t,n,l)}(t,e,a,n,Pr,r,i);else{var s=r?r(mo(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),qn(t,a,s)}}),ws)}function jr(t,e){var n=t.length;if(n)return ao(e+=e<0?n:0,n)?t[e]:void 0}function xr(t,e,n){e=e.length?de(e,(function(t){return Ma(t)?function(e){return dr(e,1===t.length?t[0]:t)}:t})):[Ws];var r=-1;return e=de(e,Ce(Xi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ar(t,(function(t,n,i){return{criteria:de(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var u=pi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function Mr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=dr(t,a);n(s,a)&&Br(o,si(a,t),s)}return o}function kr(t,e,n,r){var i=r?be:_e,o=-1,a=e.length,s=t;for(t===e&&(e=gi(e)),n&&(s=de(t,Ce(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Xt.call(s,u,1),Xt.call(t,u,1);return t}function Nr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;ao(i)?Xt.call(t,i,1):Jr(t,i)}}return t}function zr(t,e){return t+Je(ln()*(e-t+1))}function Dr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Je(e/2))&&(t+=t)}while(e);return n}function Ur(t,e){return wo(vo(t,e,Ws),t+"")}function Lr(t){return Ln(Rs(t))}function Fr(t,e){var n=Rs(t);return Eo(n,$n(e,0,n.length))}function Br(t,e,n,r){if(!Va(t))return t;for(var i=-1,o=(e=si(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=So(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Va(l)?l:ao(e[i+1])?[]:{})}Vn(s,u,c),s=s[u]}return t}var qr=mn?function(t,e){return mn.set(t,e),t}:Ws,Vr=Ke?function(t,e){return Ke(t,"toString",{configurable:!0,enumerable:!1,value:Vs(e),writable:!0})}:Ws;function Gr(t){return Eo(Rs(t))}function Hr(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=lt(i);++r<i;)o[r]=t[r+e];return o}function Wr(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Yr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Qa(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Kr(t,e,Ws,n)}function Kr(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,s=null===e,u=Qa(e),c=void 0===e;i<o;){var l=Je((i+o)/2),d=n(t[l]),f=void 0!==d,h=null===d,p=d==d,v=Qa(d);if(a)var y=r||p;else y=c?p&&(r||f):s?p&&f&&(r||!h):u?p&&f&&!h&&(r||!v):!h&&!v&&(r?d<=e:d<e);y?i=l+1:o=l}return sn(o,4294967294)}function $r(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ra(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Xr(t){return"number"==typeof t?t:Qa(t)?NaN:+t}function Qr(t){if("string"==typeof t)return t;if(Ma(t))return de(t,Qr)+"";if(Qa(t))return An?An.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Zr(t,e,n){var r=-1,i=ce,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=le;else if(o>=200){var c=e?null:Di(t);if(c)return Be(c);a=!1,i=Pe,u=new zn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue t;e&&u.push(d),s.push(l)}else i(u,d,n)||(u!==s&&u.push(d),s.push(l))}return s}function Jr(t,e){return null==(t=yo(t,e=si(e,t)))||delete t[So(Lo(e))]}function ti(t,e,n,r){return Br(t,e,n(dr(t,e)),r)}function ei(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Hr(t,r?0:o,r?o+1:i):Hr(t,r?o+1:0,r?i:o)}function ni(t,e){var n=t;return n instanceof xn&&(n=n.value()),he(e,(function(t,e){return e.func.apply(e.thisArg,fe([t],e.args))}),n)}function ri(t,e,n){var r=t.length;if(r<2)return r?Zr(t[0]):[];for(var i=-1,o=lt(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Jn(o[i]||a,t[s],e,n));return Zr(or(o,1),e,n)}function ii(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function oi(t){return za(t)?t:[]}function ai(t){return"function"==typeof t?t:Ws}function si(t,e){return Ma(t)?t:uo(t,e)?[t]:To(ss(t))}var ui=Ur;function ci(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Hr(t,e,n)}var li=$e||function(t){return Ht.clearTimeout(t)};function di(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function fi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function hi(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Qa(t),a=void 0!==e,s=null===e,u=e==e,c=Qa(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function vi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=an(o-a,0),l=lt(u+c),d=!r;++s<u;)l[s]=e[s];for(;++i<a;)(d||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function yi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=an(o-s,0),d=lt(l+c),f=!r;++i<l;)d[i]=t[i];for(var h=i;++u<c;)d[h+u]=e[u];for(;++a<s;)(f||i<o)&&(d[h+n[a]]=t[i++]);return d}function gi(t,e){var n=-1,r=t.length;for(e||(e=lt(r));++n<r;)e[n]=t[n];return e}function mi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Yn(n,s,u):Vn(n,s,u)}return n}function _i(t,e){return function(n,r){var i=Ma(n)?ie:Hn,o=e?e():{};return i(n,t,Xi(r,2),o)}}function bi(t){return Ur((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&so(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=vt(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Na(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=vt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ii(t){return function(e,n,r){for(var i=-1,o=vt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Oi(t){return function(e){var n=De(e=ss(e))?Ge(e):void 0,r=n?n[0]:e.charAt(0),i=n?ci(n,1).join(""):e.slice(1);return r[t]()+i}}function Ei(t){return function(e){return he(Fs(xs(e).replace(Pt,"")),t,"")}}function Ti(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Rn(t.prototype),r=t.apply(n,e);return Va(r)?r:n}}function Si(t){return function(e,n,r){var i=vt(e);if(!Na(e)){var o=Xi(n,3);e=bs(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Ai(t){return Gi((function(e){var n=e.length,i=n,o=jn.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new mt(r);if(o&&!s&&"wrapper"==Ki(a))var s=new jn([],!0)}for(i=s?i:n;++i<n;){var u=Ki(a=e[i]),c="wrapper"==u?Yi(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Ki(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Ma(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ci(t,e,n,r,i,o,a,s,u,c){var l=128&e,d=1&e,f=2&e,h=24&e,p=512&e,v=f?void 0:Ti(t);return function y(){for(var g=arguments.length,m=lt(g),_=g;_--;)m[_]=arguments[_];if(h)var b=$i(y),w=Me(m,b);if(r&&(m=vi(m,r,i,h)),o&&(m=yi(m,o,a,h)),g-=w,h&&g<c){var I=Fe(m,b);return Ni(t,e,Ci,y.placeholder,n,m,I,s,u,c-g)}var O=d?n:this,E=f?O[t]:t;return g=m.length,s?m=go(m,s):p&&g>1&&m.reverse(),l&&u<g&&(m.length=u),this&&this!==Ht&&this instanceof y&&(E=v||Ti(E)),E.apply(O,m)}}function Ri(t,e){return function(n,r){return function(t,e,n,r){return ur(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Pi(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Qr(n),r=Qr(r)):(n=Xr(n),r=Xr(r)),i=t(n,r)}return i}}function ji(t){return Gi((function(e){return e=de(e,Ce(Xi())),Ur((function(n){var r=this;return t(e,(function(t){return re(t,r,n)}))}))}))}function xi(t,e){var n=(e=void 0===e?" ":Qr(e)).length;if(n<2)return n?Dr(e,t):e;var r=Dr(e,Ze(t/Ve(e)));return De(e)?ci(Ge(r),0,t).join(""):r.slice(0,t)}function Mi(t){return function(e,n,r){return r&&"number"!=typeof r&&so(e,n,r)&&(n=r=void 0),e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n,r){for(var i=-1,o=an(Ze((e-t)/(n||1)),0),a=lt(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:ns(r),t)}}function ki(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=os(e),n=os(n)),t(e,n)}}function Ni(t,e,n,r,i,o,a,s,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var d=[t,e,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],f=n.apply(void 0,d);return co(t)&&_o(f,d),f.placeholder=r,Io(f,t,e)}function zi(t){var e=pt[t];return function(t,n){if(t=os(t),(n=null==n?0:sn(rs(n),292))&&nn(t)){var r=(ss(t)+"e").split("e");return+((r=(ss(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Di=vn&&1/Be(new vn([,-0]))[1]==1/0?function(t){return new vn(t)}:Qs;function Ui(t){return function(e){var n=no(e);return n==h?Ue(e):n==g?qe(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Li(t,e,n,o,a,s,u,c){var l=2&e;if(!l&&"function"!=typeof t)throw new mt(r);var d=o?o.length:0;if(d||(e&=-97,o=a=void 0),u=void 0===u?u:an(rs(u),0),c=void 0===c?c:rs(c),d-=a?a.length:0,64&e){var f=o,h=a;o=a=void 0}var p=l?void 0:Yi(t),v=[t,e,n,o,a,f,h,s,u,c];if(p&&function(t,e){var n=t[1],r=e[1],o=n|r,a=o<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!s)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?vi(c,u,e[4]):u,t[4]=c?Fe(t[3],i):e[4]}(u=e[5])&&(c=t[5],t[5]=c?yi(c,u,e[6]):u,t[6]=c?Fe(t[5],i):e[6]);(u=e[7])&&(t[7]=u);128&r&&(t[8]=null==t[8]?e[8]:sn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=o}(v,p),t=v[0],e=v[1],n=v[2],o=v[3],a=v[4],!(c=v[9]=void 0===v[9]?l?0:t.length:an(v[9]-d,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,n){var r=Ti(t);return function i(){for(var o=arguments.length,a=lt(o),s=o,u=$i(i);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==u&&a[o-1]!==u?[]:Fe(a,u);if((o-=c.length)<n)return Ni(t,e,Ci,i.placeholder,void 0,a,c,void 0,void 0,n-o);var l=this&&this!==Ht&&this instanceof i?r:t;return re(l,this,a)}}(t,e,c):32!=e&&33!=e||a.length?Ci.apply(void 0,v):function(t,e,n,r){var i=1&e,o=Ti(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=lt(c+s),d=this&&this!==Ht&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return re(d,i?n:this,l)}}(t,e,n,o);else var y=function(t,e,n){var r=1&e,i=Ti(t);return function e(){var o=this&&this!==Ht&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return Io((p?qr:_o)(y,v),t,e)}function Fi(t,e,n,r){return void 0===t||Ra(t,wt[n])&&!Et.call(r,n)?e:t}function Bi(t,e,n,r,i,o){return Va(t)&&Va(e)&&(o.set(e,t),Pr(t,e,void 0,Bi,o),o.delete(e)),t}function qi(t){return Ya(t)?void 0:t}function Vi(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var d=-1,f=!0,h=2&n?new zn:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var p=t[d],v=e[d];if(r)var y=a?r(v,p,d,e,t,o):r(p,v,d,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(h){if(!ve(e,(function(t,e){if(!Pe(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Gi(t){return wo(vo(t,void 0,ko),t+"")}function Hi(t){return fr(t,bs,to)}function Wi(t){return fr(t,ws,eo)}var Yi=mn?function(t){return mn.get(t)}:Qs;function Ki(t){for(var e=t.name+"",n=_n[e],r=Et.call(_n,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function $i(t){return(Et.call(Cn,"placeholder")?Cn:t).placeholder}function Xi(){var t=Cn.iteratee||Ys;return t=t===Ys?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function Qi(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Zi(t){for(var e=bs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Ji(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ir(n)?n:void 0}var to=tn?function(t){return null==t?[]:(t=vt(t),ue(tn(t),(function(e){return $t.call(t,e)})))}:iu,eo=tn?function(t){for(var e=[];t;)fe(e,to(t)),t=Wt(t);return e}:iu,no=hr;function ro(t,e,n){for(var r=-1,i=(e=si(e,t)).length,o=!1;++r<i;){var a=So(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&qa(i)&&ao(a,i)&&(Ma(t)||xa(t))}function io(t){return"function"!=typeof t.constructor||fo(t)?{}:Rn(Wt(t))}function oo(t){return Ma(t)||xa(t)||!!(ye&&t&&t[ye])}function ao(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&at.test(t))&&t>-1&&t%1==0&&t<e}function so(t,e,n){if(!Va(n))return!1;var r=typeof e;return!!("number"==r?Na(n)&&ao(e,n.length):"string"==r&&e in n)&&Ra(n[e],t)}function uo(t,e){if(Ma(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Qa(t))||(q.test(t)||!B.test(t)||null!=e&&t in vt(e))}function co(t){var e=Ki(t),n=Cn[e];if("function"!=typeof n||!(e in xn.prototype))return!1;if(t===n)return!0;var r=Yi(n);return!!r&&t===r[0]}(fn&&no(new fn(new ArrayBuffer(1)))!=I||hn&&no(new hn)!=h||pn&&"[object Promise]"!=no(pn.resolve())||vn&&no(new vn)!=g||yn&&no(new yn)!=b)&&(no=function(t){var e=hr(t),n=e==v?t.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case bn:return I;case wn:return h;case In:return"[object Promise]";case On:return g;case En:return b}return e});var lo=It?Fa:ou;function fo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function ho(t){return t==t&&!Va(t)}function po(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in vt(n)))}}function vo(t,e,n){return e=an(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=an(r.length-e,0),a=lt(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=lt(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),re(t,this,s)}}function yo(t,e){return e.length<2?t:dr(t,Hr(e,0,-1))}function go(t,e){for(var n=t.length,r=sn(e.length,n),i=gi(t);r--;){var o=e[r];t[r]=ao(o,n)?i[o]:void 0}return t}function mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var _o=Oo(qr),bo=Qe||function(t,e){return Ht.setTimeout(t,e)},wo=Oo(Vr);function Io(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace($,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return oe(o,(function(n){var r="_."+n[0];e&n[1]&&!ce(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(X);return e?e[1].split(Q):[]}(r),n)))}function Oo(t){var e=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Eo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=zr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var To=function(t){var e=Oa(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V,(function(t,n,r,i){e.push(r?i.replace(J,"$1"):n||t)})),e}));function So(t){if("string"==typeof t||Qa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ao(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Co(t){if(t instanceof xn)return t.clone();var e=new jn(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ro=Ur((function(t,e){return za(t)?Jn(t,or(e,1,za,!0)):[]})),Po=Ur((function(t,e){var n=Lo(e);return za(n)&&(n=void 0),za(t)?Jn(t,or(e,1,za,!0),Xi(n,2)):[]})),jo=Ur((function(t,e){var n=Lo(e);return za(n)&&(n=void 0),za(t)?Jn(t,or(e,1,za,!0),void 0,n):[]}));function xo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),me(t,Xi(e,3),i)}function Mo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=rs(n),i=n<0?an(r+i,0):sn(i,r-1)),me(t,Xi(e,3),i,!0)}function ko(t){return(null==t?0:t.length)?or(t,1):[]}function No(t){return t&&t.length?t[0]:void 0}var zo=Ur((function(t){var e=de(t,oi);return e.length&&e[0]===t[0]?gr(e):[]})),Do=Ur((function(t){var e=Lo(t),n=de(t,oi);return e===Lo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gr(n,Xi(e,2)):[]})),Uo=Ur((function(t){var e=Lo(t),n=de(t,oi);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gr(n,void 0,e):[]}));function Lo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Fo=Ur(Bo);function Bo(t,e){return t&&t.length&&e&&e.length?kr(t,e):t}var qo=Gi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Nr(t,de(e,(function(t){return ao(t,n)?+t:t})).sort(pi)),r}));function Vo(t){return null==t?t:dn.call(t)}var Go=Ur((function(t){return Zr(or(t,1,za,!0))})),Ho=Ur((function(t){var e=Lo(t);return za(e)&&(e=void 0),Zr(or(t,1,za,!0),Xi(e,2))})),Wo=Ur((function(t){var e=Lo(t);return e="function"==typeof e?e:void 0,Zr(or(t,1,za,!0),void 0,e)}));function Yo(t){if(!t||!t.length)return[];var e=0;return t=ue(t,(function(t){if(za(t))return e=an(t.length,e),!0})),Ae(e,(function(e){return de(t,Oe(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=Yo(t);return null==e?n:de(n,(function(t){return re(e,void 0,t)}))}var $o=Ur((function(t,e){return za(t)?Jn(t,e):[]})),Xo=Ur((function(t){return ri(ue(t,za))})),Qo=Ur((function(t){var e=Lo(t);return za(e)&&(e=void 0),ri(ue(t,za),Xi(e,2))})),Zo=Ur((function(t){var e=Lo(t);return e="function"==typeof e?e:void 0,ri(ue(t,za),void 0,e)})),Jo=Ur(Yo);var ta=Ur((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function ea(t){var e=Cn(t);return e.__chain__=!0,e}function na(t,e){return e(t)}var ra=Gi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof xn&&ao(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:na,args:[i],thisArg:void 0}),new jn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var ia=_i((function(t,e,n){Et.call(t,n)?++t[n]:Yn(t,n,1)}));var oa=Si(xo),aa=Si(Mo);function sa(t,e){return(Ma(t)?oe:tr)(t,Xi(e,3))}function ua(t,e){return(Ma(t)?ae:er)(t,Xi(e,3))}var ca=_i((function(t,e,n){Et.call(t,n)?t[n].push(e):Yn(t,n,[e])}));var la=Ur((function(t,e,n){var r=-1,i="function"==typeof e,o=Na(t)?lt(t.length):[];return tr(t,(function(t){o[++r]=i?re(e,t,n):mr(t,e,n)})),o})),da=_i((function(t,e,n){Yn(t,n,e)}));function fa(t,e){return(Ma(t)?de:Ar)(t,Xi(e,3))}var ha=_i((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var pa=Ur((function(t,e){if(null==t)return[];var n=e.length;return n>1&&so(t,e[0],e[1])?e=[]:n>2&&so(e[0],e[1],e[2])&&(e=[e[0]]),xr(t,or(e,1),[])})),va=Xe||function(){return Ht.Date.now()};function ya(t,e,n){return e=n?void 0:e,Li(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ga(t,e){var n;if("function"!=typeof e)throw new mt(r);return t=rs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var ma=Ur((function(t,e,n){var r=1;if(n.length){var i=Fe(n,$i(ma));r|=32}return Li(t,r,e,n,i)})),_a=Ur((function(t,e,n){var r=3;if(n.length){var i=Fe(n,$i(_a));r|=32}return Li(e,r,t,n,i)}));function ba(t,e,n){var i,o,a,s,u,c,l=0,d=!1,f=!1,h=!0;if("function"!=typeof t)throw new mt(r);function p(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n)}function v(t){return l=t,u=bo(g,e),d?p(t):s}function y(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-l>=a}function g(){var t=va();if(y(t))return m(t);u=bo(g,function(t){var n=e-(t-c);return f?sn(n,a-(t-l)):n}(t))}function m(t){return u=void 0,h&&i?p(t):(i=o=void 0,s)}function _(){var t=va(),n=y(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return v(c);if(f)return li(u),u=bo(g,e),p(c)}return void 0===u&&(u=bo(g,e)),s}return e=os(e)||0,Va(n)&&(d=!!n.leading,a=(f="maxWait"in n)?an(os(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==u&&li(u),l=0,i=c=o=u=void 0},_.flush=function(){return void 0===u?s:m(va())},_}var wa=Ur((function(t,e){return Zn(t,1,e)})),Ia=Ur((function(t,e,n){return Zn(t,os(e)||0,n)}));function Oa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oa.Cache||Nn),n}function Ea(t){if("function"!=typeof t)throw new mt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Oa.Cache=Nn;var Ta=ui((function(t,e){var n=(e=1==e.length&&Ma(e[0])?de(e[0],Ce(Xi())):de(or(e,1),Ce(Xi()))).length;return Ur((function(r){for(var i=-1,o=sn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return re(t,this,r)}))})),Sa=Ur((function(t,e){return Li(t,32,void 0,e,Fe(e,$i(Sa)))})),Aa=Ur((function(t,e){return Li(t,64,void 0,e,Fe(e,$i(Aa)))})),Ca=Gi((function(t,e){return Li(t,256,void 0,void 0,void 0,e)}));function Ra(t,e){return t===e||t!=t&&e!=e}var Pa=ki(pr),ja=ki((function(t,e){return t>=e})),xa=_r(function(){return arguments}())?_r:function(t){return Ga(t)&&Et.call(t,"callee")&&!$t.call(t,"callee")},Ma=lt.isArray,ka=Qt?Ce(Qt):function(t){return Ga(t)&&hr(t)==w};function Na(t){return null!=t&&qa(t.length)&&!Fa(t)}function za(t){return Ga(t)&&Na(t)}var Da=en||ou,Ua=Zt?Ce(Zt):function(t){return Ga(t)&&hr(t)==c};function La(t){if(!Ga(t))return!1;var e=hr(t);return e==l||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ya(t)}function Fa(t){if(!Va(t))return!1;var e=hr(t);return e==d||e==f||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ba(t){return"number"==typeof t&&t==rs(t)}function qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Va(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ga(t){return null!=t&&"object"==typeof t}var Ha=Jt?Ce(Jt):function(t){return Ga(t)&&no(t)==h};function Wa(t){return"number"==typeof t||Ga(t)&&hr(t)==p}function Ya(t){if(!Ga(t)||hr(t)!=v)return!1;var e=Wt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ot.call(n)==Ct}var Ka=te?Ce(te):function(t){return Ga(t)&&hr(t)==y};var $a=ee?Ce(ee):function(t){return Ga(t)&&no(t)==g};function Xa(t){return"string"==typeof t||!Ma(t)&&Ga(t)&&hr(t)==m}function Qa(t){return"symbol"==typeof t||Ga(t)&&hr(t)==_}var Za=ne?Ce(ne):function(t){return Ga(t)&&qa(t.length)&&!!Ut[hr(t)]};var Ja=ki(Sr),ts=ki((function(t,e){return t<=e}));function es(t){if(!t)return[];if(Na(t))return Xa(t)?Ge(t):gi(t);if(Ee&&t[Ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ee]());var e=no(t);return(e==h?Ue:e==g?Be:Rs)(t)}function ns(t){return t?(t=os(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function rs(t){var e=ns(t),n=e%1;return e==e?n?e-n:e:0}function is(t){return t?$n(rs(t),0,4294967295):0}function os(t){if("number"==typeof t)return t;if(Qa(t))return NaN;if(Va(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Va(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(W,"");var n=rt.test(t);return n||ot.test(t)?qt(t.slice(2),n?2:8):nt.test(t)?NaN:+t}function as(t){return mi(t,ws(t))}function ss(t){return null==t?"":Qr(t)}var us=bi((function(t,e){if(fo(e)||Na(e))mi(e,bs(e),t);else for(var n in e)Et.call(e,n)&&Vn(t,n,e[n])})),cs=bi((function(t,e){mi(e,ws(e),t)})),ls=bi((function(t,e,n,r){mi(e,ws(e),t,r)})),ds=bi((function(t,e,n,r){mi(e,bs(e),t,r)})),fs=Gi(Kn);var hs=Ur((function(t,e){t=vt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&so(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=ws(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(void 0===l||Ra(l,wt[c])&&!Et.call(t,c))&&(t[c]=o[c])}return t})),ps=Ur((function(t){return t.push(void 0,Bi),re(Os,void 0,t)}));function vs(t,e,n){var r=null==t?void 0:dr(t,e);return void 0===r?n:r}function ys(t,e){return null!=t&&ro(t,e,yr)}var gs=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),t[e]=n}),Vs(Ws)),ms=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Xi),_s=Ur(mr);function bs(t){return Na(t)?Un(t):Er(t)}function ws(t){return Na(t)?Un(t,!0):Tr(t)}var Is=bi((function(t,e,n){Pr(t,e,n)})),Os=bi((function(t,e,n,r){Pr(t,e,n,r)})),Es=Gi((function(t,e){var n={};if(null==t)return n;var r=!1;e=de(e,(function(e){return e=si(e,t),r||(r=e.length>1),e})),mi(t,Wi(t),n),r&&(n=Xn(n,7,qi));for(var i=e.length;i--;)Jr(n,e[i]);return n}));var Ts=Gi((function(t,e){return null==t?{}:function(t,e){return Mr(t,e,(function(e,n){return ys(t,n)}))}(t,e)}));function Ss(t,e){if(null==t)return{};var n=de(Wi(t),(function(t){return[t]}));return e=Xi(e),Mr(t,n,(function(t,n){return e(t,n[0])}))}var As=Ui(bs),Cs=Ui(ws);function Rs(t){return null==t?[]:Re(t,bs(t))}var Ps=Ei((function(t,e,n){return e=e.toLowerCase(),t+(n?js(e):e)}));function js(t){return Ls(ss(t).toLowerCase())}function xs(t){return(t=ss(t))&&t.replace(st,ke).replace(jt,"")}var Ms=Ei((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),ks=Ei((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ns=Oi("toLowerCase");var zs=Ei((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ds=Ei((function(t,e,n){return t+(n?" ":"")+Ls(e)}));var Us=Ei((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ls=Oi("toUpperCase");function Fs(t,e,n){return t=ss(t),void 0===(e=n?void 0:e)?function(t){return Nt.test(t)}(t)?function(t){return t.match(Mt)||[]}(t):function(t){return t.match(Z)||[]}(t):t.match(e)||[]}var Bs=Ur((function(t,e){try{return re(t,void 0,e)}catch(t){return La(t)?t:new ft(t)}})),qs=Gi((function(t,e){return oe(e,(function(e){e=So(e),Yn(t,e,ma(t[e],t))})),t}));function Vs(t){return function(){return t}}var Gs=Ai(),Hs=Ai(!0);function Ws(t){return t}function Ys(t){return Or("function"==typeof t?t:Xn(t,1))}var Ks=Ur((function(t,e){return function(n){return mr(n,t,e)}})),$s=Ur((function(t,e){return function(n){return mr(t,n,e)}}));function Xs(t,e,n){var r=bs(e),i=lr(e,r);null!=n||Va(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=lr(e,bs(e)));var o=!(Va(n)&&"chain"in n&&!n.chain),a=Fa(t);return oe(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,fe([this.value()],arguments))})})),t}function Qs(){}var Zs=ji(de),Js=ji(se),tu=ji(ve);function eu(t){return uo(t)?Oe(So(t)):function(t){return function(e){return dr(e,t)}}(t)}var nu=Mi(),ru=Mi(!0);function iu(){return[]}function ou(){return!1}var au=Pi((function(t,e){return t+e}),0),su=zi("ceil"),uu=Pi((function(t,e){return t/e}),1),cu=zi("floor");var lu,du=Pi((function(t,e){return t*e}),1),fu=zi("round"),hu=Pi((function(t,e){return t-e}),0);return Cn.after=function(t,e){if("function"!=typeof e)throw new mt(r);return t=rs(t),function(){if(--t<1)return e.apply(this,arguments)}},Cn.ary=ya,Cn.assign=us,Cn.assignIn=cs,Cn.assignInWith=ls,Cn.assignWith=ds,Cn.at=fs,Cn.before=ga,Cn.bind=ma,Cn.bindAll=qs,Cn.bindKey=_a,Cn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ma(t)?t:[t]},Cn.chain=ea,Cn.chunk=function(t,e,n){e=(n?so(t,e,n):void 0===e)?1:an(rs(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=lt(Ze(r/e));i<r;)a[o++]=Hr(t,i,i+=e);return a},Cn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Cn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=lt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return fe(Ma(n)?gi(n):[n],or(e,1))},Cn.cond=function(t){var e=null==t?0:t.length,n=Xi();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new mt(r);return[n(t[0]),t[1]]})):[],Ur((function(n){for(var r=-1;++r<e;){var i=t[r];if(re(i[0],this,n))return re(i[1],this,n)}}))},Cn.conforms=function(t){return function(t){var e=bs(t);return function(n){return Qn(n,t,e)}}(Xn(t,1))},Cn.constant=Vs,Cn.countBy=ia,Cn.create=function(t,e){var n=Rn(t);return null==e?n:Wn(n,e)},Cn.curry=function t(e,n,r){var i=Li(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.curryRight=function t(e,n,r){var i=Li(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.debounce=ba,Cn.defaults=hs,Cn.defaultsDeep=ps,Cn.defer=wa,Cn.delay=Ia,Cn.difference=Ro,Cn.differenceBy=Po,Cn.differenceWith=jo,Cn.drop=function(t,e,n){var r=null==t?0:t.length;return r?Hr(t,(e=n||void 0===e?1:rs(e))<0?0:e,r):[]},Cn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Hr(t,0,(e=r-(e=n||void 0===e?1:rs(e)))<0?0:e):[]},Cn.dropRightWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!0,!0):[]},Cn.dropWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!0):[]},Cn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&so(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=rs(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:rs(r))<0&&(r+=i),r=n>r?0:is(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Cn.filter=function(t,e){return(Ma(t)?ue:ir)(t,Xi(e,3))},Cn.flatMap=function(t,e){return or(fa(t,e),1)},Cn.flatMapDeep=function(t,e){return or(fa(t,e),1/0)},Cn.flatMapDepth=function(t,e,n){return n=void 0===n?1:rs(n),or(fa(t,e),n)},Cn.flatten=ko,Cn.flattenDeep=function(t){return(null==t?0:t.length)?or(t,1/0):[]},Cn.flattenDepth=function(t,e){return(null==t?0:t.length)?or(t,e=void 0===e?1:rs(e)):[]},Cn.flip=function(t){return Li(t,512)},Cn.flow=Gs,Cn.flowRight=Hs,Cn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Cn.functions=function(t){return null==t?[]:lr(t,bs(t))},Cn.functionsIn=function(t){return null==t?[]:lr(t,ws(t))},Cn.groupBy=ca,Cn.initial=function(t){return(null==t?0:t.length)?Hr(t,0,-1):[]},Cn.intersection=zo,Cn.intersectionBy=Do,Cn.intersectionWith=Uo,Cn.invert=gs,Cn.invertBy=ms,Cn.invokeMap=la,Cn.iteratee=Ys,Cn.keyBy=da,Cn.keys=bs,Cn.keysIn=ws,Cn.map=fa,Cn.mapKeys=function(t,e){var n={};return e=Xi(e,3),ur(t,(function(t,r,i){Yn(n,e(t,r,i),t)})),n},Cn.mapValues=function(t,e){var n={};return e=Xi(e,3),ur(t,(function(t,r,i){Yn(n,r,e(t,r,i))})),n},Cn.matches=function(t){return Cr(Xn(t,1))},Cn.matchesProperty=function(t,e){return Rr(t,Xn(e,1))},Cn.memoize=Oa,Cn.merge=Is,Cn.mergeWith=Os,Cn.method=Ks,Cn.methodOf=$s,Cn.mixin=Xs,Cn.negate=Ea,Cn.nthArg=function(t){return t=rs(t),Ur((function(e){return jr(e,t)}))},Cn.omit=Es,Cn.omitBy=function(t,e){return Ss(t,Ea(Xi(e)))},Cn.once=function(t){return ga(2,t)},Cn.orderBy=function(t,e,n,r){return null==t?[]:(Ma(e)||(e=null==e?[]:[e]),Ma(n=r?void 0:n)||(n=null==n?[]:[n]),xr(t,e,n))},Cn.over=Zs,Cn.overArgs=Ta,Cn.overEvery=Js,Cn.overSome=tu,Cn.partial=Sa,Cn.partialRight=Aa,Cn.partition=ha,Cn.pick=Ts,Cn.pickBy=Ss,Cn.property=eu,Cn.propertyOf=function(t){return function(e){return null==t?void 0:dr(t,e)}},Cn.pull=Fo,Cn.pullAll=Bo,Cn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?kr(t,e,Xi(n,2)):t},Cn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?kr(t,e,void 0,n):t},Cn.pullAt=qo,Cn.range=nu,Cn.rangeRight=ru,Cn.rearg=Ca,Cn.reject=function(t,e){return(Ma(t)?ue:ir)(t,Ea(Xi(e,3)))},Cn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Xi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Nr(t,i),n},Cn.rest=function(t,e){if("function"!=typeof t)throw new mt(r);return Ur(t,e=void 0===e?e:rs(e))},Cn.reverse=Vo,Cn.sampleSize=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:rs(e),(Ma(t)?Fn:Fr)(t,e)},Cn.set=function(t,e,n){return null==t?t:Br(t,e,n)},Cn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Br(t,e,n,r)},Cn.shuffle=function(t){return(Ma(t)?Bn:Gr)(t)},Cn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&so(t,e,n)?(e=0,n=r):(e=null==e?0:rs(e),n=void 0===n?r:rs(n)),Hr(t,e,n)):[]},Cn.sortBy=pa,Cn.sortedUniq=function(t){return t&&t.length?$r(t):[]},Cn.sortedUniqBy=function(t,e){return t&&t.length?$r(t,Xi(e,2)):[]},Cn.split=function(t,e,n){return n&&"number"!=typeof n&&so(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!Ka(e))&&!(e=Qr(e))&&De(t)?ci(Ge(t),0,n):t.split(e,n):[]},Cn.spread=function(t,e){if("function"!=typeof t)throw new mt(r);return e=null==e?0:an(rs(e),0),Ur((function(n){var r=n[e],i=ci(n,0,e);return r&&fe(i,r),re(t,this,i)}))},Cn.tail=function(t){var e=null==t?0:t.length;return e?Hr(t,1,e):[]},Cn.take=function(t,e,n){return t&&t.length?Hr(t,0,(e=n||void 0===e?1:rs(e))<0?0:e):[]},Cn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Hr(t,(e=r-(e=n||void 0===e?1:rs(e)))<0?0:e,r):[]},Cn.takeRightWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!1,!0):[]},Cn.takeWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3)):[]},Cn.tap=function(t,e){return e(t),t},Cn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new mt(r);return Va(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ba(t,e,{leading:i,maxWait:e,trailing:o})},Cn.thru=na,Cn.toArray=es,Cn.toPairs=As,Cn.toPairsIn=Cs,Cn.toPath=function(t){return Ma(t)?de(t,So):Qa(t)?[t]:gi(To(ss(t)))},Cn.toPlainObject=as,Cn.transform=function(t,e,n){var r=Ma(t),i=r||Da(t)||Za(t);if(e=Xi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Va(t)&&Fa(o)?Rn(Wt(t)):{}}return(i?oe:ur)(t,(function(t,r,i){return e(n,t,r,i)})),n},Cn.unary=function(t){return ya(t,1)},Cn.union=Go,Cn.unionBy=Ho,Cn.unionWith=Wo,Cn.uniq=function(t){return t&&t.length?Zr(t):[]},Cn.uniqBy=function(t,e){return t&&t.length?Zr(t,Xi(e,2)):[]},Cn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Zr(t,void 0,e):[]},Cn.unset=function(t,e){return null==t||Jr(t,e)},Cn.unzip=Yo,Cn.unzipWith=Ko,Cn.update=function(t,e,n){return null==t?t:ti(t,e,ai(n))},Cn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ti(t,e,ai(n),r)},Cn.values=Rs,Cn.valuesIn=function(t){return null==t?[]:Re(t,ws(t))},Cn.without=$o,Cn.words=Fs,Cn.wrap=function(t,e){return Sa(ai(e),t)},Cn.xor=Xo,Cn.xorBy=Qo,Cn.xorWith=Zo,Cn.zip=Jo,Cn.zipObject=function(t,e){return ii(t||[],e||[],Vn)},Cn.zipObjectDeep=function(t,e){return ii(t||[],e||[],Br)},Cn.zipWith=ta,Cn.entries=As,Cn.entriesIn=Cs,Cn.extend=cs,Cn.extendWith=ls,Xs(Cn,Cn),Cn.add=au,Cn.attempt=Bs,Cn.camelCase=Ps,Cn.capitalize=js,Cn.ceil=su,Cn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==e&&(e=(e=os(e))==e?e:0),$n(os(t),e,n)},Cn.clone=function(t){return Xn(t,4)},Cn.cloneDeep=function(t){return Xn(t,5)},Cn.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},Cn.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},Cn.conformsTo=function(t,e){return null==e||Qn(t,e,bs(e))},Cn.deburr=xs,Cn.defaultTo=function(t,e){return null==t||t!=t?e:t},Cn.divide=uu,Cn.endsWith=function(t,e,n){t=ss(t),e=Qr(e);var r=t.length,i=n=void 0===n?r:$n(rs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Cn.eq=Ra,Cn.escape=function(t){return(t=ss(t))&&D.test(t)?t.replace(N,Ne):t},Cn.escapeRegExp=function(t){return(t=ss(t))&&H.test(t)?t.replace(G,"\\$&"):t},Cn.every=function(t,e,n){var r=Ma(t)?se:nr;return n&&so(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Cn.find=oa,Cn.findIndex=xo,Cn.findKey=function(t,e){return ge(t,Xi(e,3),ur)},Cn.findLast=aa,Cn.findLastIndex=Mo,Cn.findLastKey=function(t,e){return ge(t,Xi(e,3),cr)},Cn.floor=cu,Cn.forEach=sa,Cn.forEachRight=ua,Cn.forIn=function(t,e){return null==t?t:ar(t,Xi(e,3),ws)},Cn.forInRight=function(t,e){return null==t?t:sr(t,Xi(e,3),ws)},Cn.forOwn=function(t,e){return t&&ur(t,Xi(e,3))},Cn.forOwnRight=function(t,e){return t&&cr(t,Xi(e,3))},Cn.get=vs,Cn.gt=Pa,Cn.gte=ja,Cn.has=function(t,e){return null!=t&&ro(t,e,vr)},Cn.hasIn=ys,Cn.head=No,Cn.identity=Ws,Cn.includes=function(t,e,n,r){t=Na(t)?t:Rs(t),n=n&&!r?rs(n):0;var i=t.length;return n<0&&(n=an(i+n,0)),Xa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&_e(t,e,n)>-1},Cn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),_e(t,e,i)},Cn.inRange=function(t,e,n){return e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n){return t>=sn(e,n)&&t<an(e,n)}(t=os(t),e,n)},Cn.invoke=_s,Cn.isArguments=xa,Cn.isArray=Ma,Cn.isArrayBuffer=ka,Cn.isArrayLike=Na,Cn.isArrayLikeObject=za,Cn.isBoolean=function(t){return!0===t||!1===t||Ga(t)&&hr(t)==u},Cn.isBuffer=Da,Cn.isDate=Ua,Cn.isElement=function(t){return Ga(t)&&1===t.nodeType&&!Ya(t)},Cn.isEmpty=function(t){if(null==t)return!0;if(Na(t)&&(Ma(t)||"string"==typeof t||"function"==typeof t.splice||Da(t)||Za(t)||xa(t)))return!t.length;var e=no(t);if(e==h||e==g)return!t.size;if(fo(t))return!Er(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Cn.isEqual=function(t,e){return br(t,e)},Cn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?br(t,e,void 0,n):!!r},Cn.isError=La,Cn.isFinite=function(t){return"number"==typeof t&&nn(t)},Cn.isFunction=Fa,Cn.isInteger=Ba,Cn.isLength=qa,Cn.isMap=Ha,Cn.isMatch=function(t,e){return t===e||wr(t,e,Zi(e))},Cn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Zi(e),n)},Cn.isNaN=function(t){return Wa(t)&&t!=+t},Cn.isNative=function(t){if(lo(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},Cn.isNil=function(t){return null==t},Cn.isNull=function(t){return null===t},Cn.isNumber=Wa,Cn.isObject=Va,Cn.isObjectLike=Ga,Cn.isPlainObject=Ya,Cn.isRegExp=Ka,Cn.isSafeInteger=function(t){return Ba(t)&&t>=-9007199254740991&&t<=9007199254740991},Cn.isSet=$a,Cn.isString=Xa,Cn.isSymbol=Qa,Cn.isTypedArray=Za,Cn.isUndefined=function(t){return void 0===t},Cn.isWeakMap=function(t){return Ga(t)&&no(t)==b},Cn.isWeakSet=function(t){return Ga(t)&&"[object WeakSet]"==hr(t)},Cn.join=function(t,e){return null==t?"":rn.call(t,e)},Cn.kebabCase=Ms,Cn.last=Lo,Cn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=rs(n))<0?an(r+i,0):sn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):me(t,we,i,!0)},Cn.lowerCase=ks,Cn.lowerFirst=Ns,Cn.lt=Ja,Cn.lte=ts,Cn.max=function(t){return t&&t.length?rr(t,Ws,pr):void 0},Cn.maxBy=function(t,e){return t&&t.length?rr(t,Xi(e,2),pr):void 0},Cn.mean=function(t){return Ie(t,Ws)},Cn.meanBy=function(t,e){return Ie(t,Xi(e,2))},Cn.min=function(t){return t&&t.length?rr(t,Ws,Sr):void 0},Cn.minBy=function(t,e){return t&&t.length?rr(t,Xi(e,2),Sr):void 0},Cn.stubArray=iu,Cn.stubFalse=ou,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=du,Cn.nth=function(t,e){return t&&t.length?jr(t,rs(e)):void 0},Cn.noConflict=function(){return Ht._===this&&(Ht._=Rt),this},Cn.noop=Qs,Cn.now=va,Cn.pad=function(t,e,n){t=ss(t);var r=(e=rs(e))?Ve(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return xi(Je(i),n)+t+xi(Ze(i),n)},Cn.padEnd=function(t,e,n){t=ss(t);var r=(e=rs(e))?Ve(t):0;return e&&r<e?t+xi(e-r,n):t},Cn.padStart=function(t,e,n){t=ss(t);var r=(e=rs(e))?Ve(t):0;return e&&r<e?xi(e-r,n)+t:t},Cn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),cn(ss(t).replace(Y,""),e||0)},Cn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&so(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ns(t),void 0===e?(e=t,t=0):e=ns(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ln();return sn(t+i*(e-t+Bt("1e-"+((i+"").length-1))),e)}return zr(t,e)},Cn.reduce=function(t,e,n){var r=Ma(t)?he:Te,i=arguments.length<3;return r(t,Xi(e,4),n,i,tr)},Cn.reduceRight=function(t,e,n){var r=Ma(t)?pe:Te,i=arguments.length<3;return r(t,Xi(e,4),n,i,er)},Cn.repeat=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:rs(e),Dr(ss(t),e)},Cn.replace=function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Cn.result=function(t,e,n){var r=-1,i=(e=si(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[So(e[r])];void 0===o&&(r=i,o=n),t=Fa(o)?o.call(t):o}return t},Cn.round=fu,Cn.runInContext=t,Cn.sample=function(t){return(Ma(t)?Ln:Lr)(t)},Cn.size=function(t){if(null==t)return 0;if(Na(t))return Xa(t)?Ve(t):t.length;var e=no(t);return e==h||e==g?t.size:Er(t).length},Cn.snakeCase=zs,Cn.some=function(t,e,n){var r=Ma(t)?ve:Wr;return n&&so(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Cn.sortedIndex=function(t,e){return Yr(t,e)},Cn.sortedIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2))},Cn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Yr(t,e);if(r<n&&Ra(t[r],e))return r}return-1},Cn.sortedLastIndex=function(t,e){return Yr(t,e,!0)},Cn.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2),!0)},Cn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Yr(t,e,!0)-1;if(Ra(t[n],e))return n}return-1},Cn.startCase=Ds,Cn.startsWith=function(t,e,n){return t=ss(t),n=null==n?0:$n(rs(n),0,t.length),e=Qr(e),t.slice(n,n+e.length)==e},Cn.subtract=hu,Cn.sum=function(t){return t&&t.length?Se(t,Ws):0},Cn.sumBy=function(t,e){return t&&t.length?Se(t,Xi(e,2)):0},Cn.template=function(t,e,n){var r=Cn.templateSettings;n&&so(t,e,n)&&(e=void 0),t=ss(t),e=ls({},e,r,Fi);var i,o,a=ls({},e.imports,r.imports,Fi),s=bs(a),u=Re(a,s),c=0,l=e.interpolate||ut,d="__p += '",f=yt((e.escape||ut).source+"|"+l.source+"|"+(l===F?tt:ut).source+"|"+(e.evaluate||ut).source+"|$","g"),h="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dt+"]")+"\n";t.replace(f,(function(e,n,r,a,s,u){return r||(r=a),d+=t.slice(c,u).replace(ct,ze),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),d+="';\n";var p=Et.call(e,"variable")&&e.variable;p||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(j,""):d).replace(x,"$1").replace(M,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Bs((function(){return ht(s,h+"return "+d).apply(void 0,u)}));if(v.source=d,La(v))throw v;return v},Cn.times=function(t,e){if((t=rs(t))<1||t>9007199254740991)return[];var n=4294967295,r=sn(t,4294967295);t-=4294967295;for(var i=Ae(r,e=Xi(e));++n<t;)e(n);return i},Cn.toFinite=ns,Cn.toInteger=rs,Cn.toLength=is,Cn.toLower=function(t){return ss(t).toLowerCase()},Cn.toNumber=os,Cn.toSafeInteger=function(t){return t?$n(rs(t),-9007199254740991,9007199254740991):0===t?t:0},Cn.toString=ss,Cn.toUpper=function(t){return ss(t).toUpperCase()},Cn.trim=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(W,"");if(!t||!(e=Qr(e)))return t;var r=Ge(t),i=Ge(e);return ci(r,je(r,i),xe(r,i)+1).join("")},Cn.trimEnd=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(K,"");if(!t||!(e=Qr(e)))return t;var r=Ge(t);return ci(r,0,xe(r,Ge(e))+1).join("")},Cn.trimStart=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(Y,"");if(!t||!(e=Qr(e)))return t;var r=Ge(t);return ci(r,je(r,Ge(e))).join("")},Cn.truncate=function(t,e){var n=30,r="...";if(Va(e)){var i="separator"in e?e.separator:i;n="length"in e?rs(e.length):n,r="omission"in e?Qr(e.omission):r}var o=(t=ss(t)).length;if(De(t)){var a=Ge(t);o=a.length}if(n>=o)return t;var s=n-Ve(r);if(s<1)return r;var u=a?ci(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ka(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=yt(i.source,ss(et.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var d=c.index;u=u.slice(0,void 0===d?s:d)}}else if(t.indexOf(Qr(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Cn.unescape=function(t){return(t=ss(t))&&z.test(t)?t.replace(k,He):t},Cn.uniqueId=function(t){var e=++Tt;return ss(t)+e},Cn.upperCase=Us,Cn.upperFirst=Ls,Cn.each=sa,Cn.eachRight=ua,Cn.first=No,Xs(Cn,(lu={},ur(Cn,(function(t,e){Et.call(Cn.prototype,e)||(lu[e]=t)})),lu),{chain:!1}),Cn.VERSION="4.17.20",oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Cn[t].placeholder=Cn})),oe(["drop","take"],(function(t,e){xn.prototype[t]=function(n){n=void 0===n?1:an(rs(n),0);var r=this.__filtered__&&!e?new xn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},xn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),oe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;xn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),oe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");xn.prototype[t]=function(){return this[n](1).value()[0]}})),oe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");xn.prototype[t]=function(){return this.__filtered__?new xn(this):this[n](1)}})),xn.prototype.compact=function(){return this.filter(Ws)},xn.prototype.find=function(t){return this.filter(t).head()},xn.prototype.findLast=function(t){return this.reverse().find(t)},xn.prototype.invokeMap=Ur((function(t,e){return"function"==typeof t?new xn(this):this.map((function(n){return mr(n,t,e)}))})),xn.prototype.reject=function(t){return this.filter(Ea(Xi(t)))},xn.prototype.slice=function(t,e){t=rs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new xn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=rs(e))<0?n.dropRight(-e):n.take(e-t)),n)},xn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},xn.prototype.toArray=function(){return this.take(4294967295)},ur(xn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Cn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Cn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof xn,u=a[0],c=s||Ma(e),l=function(t){var e=i.apply(Cn,fe([t],a));return r&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var d=this.__chain__,f=!!this.__actions__.length,h=o&&!d,p=s&&!f;if(!o&&c){e=p?e:new xn(this);var v=t.apply(e,a);return v.__actions__.push({func:na,args:[l],thisArg:void 0}),new jn(v,d)}return h&&p?t.apply(this,a):(v=this.thru(l),h?r?v.value()[0]:v.value():v)})})),oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Cn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ma(i)?i:[],t)}return this[n]((function(n){return e.apply(Ma(n)?n:[],t)}))}})),ur(xn.prototype,(function(t,e){var n=Cn[e];if(n){var r=n.name+"";Et.call(_n,r)||(_n[r]=[]),_n[r].push({name:e,func:n})}})),_n[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],xn.prototype.clone=function(){var t=new xn(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},xn.prototype.reverse=function(){if(this.__filtered__){var t=new xn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},xn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ma(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=sn(e,t+a);break;case"takeRight":t=an(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,h=sn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return ni(t,this.__actions__);var p=[];t:for(;u--&&f<h;){for(var v=-1,y=t[c+=e];++v<d;){var g=l[v],m=g.iteratee,_=g.type,b=m(y);if(2==_)y=b;else if(!b){if(1==_)continue t;break t}}p[f++]=y}return p},Cn.prototype.at=ra,Cn.prototype.chain=function(){return ea(this)},Cn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(t){for(var e,n=this;n instanceof Pn;){var r=Co(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Cn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof xn){var e=t;return this.__actions__.length&&(e=new xn(this)),(e=e.reverse()).__actions__.push({func:na,args:[Vo],thisArg:void 0}),new jn(e,this.__chain__)}return this.thru(Vo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Ee&&(Cn.prototype[Ee]=function(){return this}),Cn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ht._=We,define((function(){return We}))):Yt?((Yt.exports=We)._=We,Wt._=We):Ht._=We}).call(this)}).call(this,n(6),n(72)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(355)),i=s(n(364)),o=s(n(392)),a=s(n(399));function s(t){return t&&t.__esModule?t:{default:t}}e.default=d,e.clear=h,e.decorator=p;var u=[],c=[];function l(t){return(0,a.default)(t)}function d(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=(0,o.default)({memoize:!1,serializeArguments:l},e);var n={},r={},a=function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=e.serializeArguments(a),c=n[u];if(c)return c;if(e.memoize&&u in r)return i.default.resolve(r[u]);var l=function(){return delete n[u]},d=t.apply(this,a),f=d.then((function(t){return e.memoize&&(r[u]=t),l(),t}),(function(t){throw l(),t}));return n[u]=f,f};return a.__reusePromise__origFn=t,a.__reusePromise__clear=function(){d.clear(a)},a.__reusePromise__promiseMapsByArgs=n,a.__reusePromise__memoizedValuesByArgs=r,u.push(n),c.push(r),a}function f(t){(0,r.default)(t).forEach((function(e){return delete t[e]}))}function h(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];void 0===t?(u.forEach(f),c.forEach(f)):(f(t.__reusePromise__promiseMapsByArgs),f(t.__reusePromise__memoizedValuesByArgs))}function p(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e,n,r){return r.value=d(r.value,t),r}}p.clear=h,d.clear=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o={camelizeKey:i.a.memoize(i.a.camelCase),underscoreKey:i.a.memoize(i.a.snakeCase),camelizeObject:function(t){return a(t,o.camelizeKey)},underscoreObject:function(t){return a(t,o.underscoreKey)}};function a(t,e){return i.a.isArray(t)?t.map((function(t){return a(t,e)})):i.a.isObject(t)?i.a.transform(t,(function(t,n,r){t[e(r)]=a(n,e)}),{}):t}e.a=o},function(t,e,n){"use strict";function r(t){return t&&/^\+?([0-9]{7,15})$/.test(t.replace(/[-.● ()]/g,""))}function i(t){var e=t.replace(/\D/g,"");return/^\+?1/.test(t)?e.replace(/^(1)(\d{3})(\d{3})(\d{4})/,"+$1 $2 $3 $4"):("1"===e[0]&&(e=e.slice(1)),e.replace(/^(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"))}function o(t){var e=t.replace(/\D/g,"");return"1"===e[0]&&(e=e.slice(1)),e.replace(/^(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}function a(t){return t.replace(/\D/g,"")}function s(t){var e=t.replace(/\D/g,"");return"1"!==e[0]&&(e="1"+e),"+"+e}n.r(e),n.d(e,"isPhone",(function(){return r})),n.d(e,"formatPhone",(function(){return i})),n.d(e,"formatPhoneWithDash",(function(){return o})),n.d(e,"normalizePhone",(function(){return a})),n.d(e,"normalizePhoneUS",(function(){return s}))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.a={WAITING:-1,CONNECTING:0,OPEN:1,CLOSED:2}},function(t,e,n){var r=n(30),i=n(15),o=n(144),a=n(26).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,i),r(n)},t.once("error",o)),t.once(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return d(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return d(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,h(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";var r=n(425);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(6))},function(t,e,n){var r=n(11),i=n(93),o=n(15),a=n(94),s=n(101),u=n(135),c=i("wks"),l=r.Symbol,d=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=d("Symbol."+t)),c[t]}},function(t,e,n){"use strict";n.r(e);var r=n(160),i=n.n(r);n.d(e,"isEmail",(function(){return i.a}))},function(t,e,n){var r=n(11),i=n(48).f,o=n(29),a=n(65),s=n(90),u=n(130),c=n(217);t.exports=function(t,e){var n,l,d,f,h,p=t.target,v=t.global,y=t.stat;if(n=v?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(f=e[l],d=t.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(v?l:p+(y?".":"#")+l,t.forced)&&void 0!==d){if(typeof f==typeof d)continue;u(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(320),i=n(321),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(183)("wks"),i=n(184),o=n(17).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(110);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(18);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(a(t,e))return!1;return!0}function u(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function f(t,e){for(var n in e)a(e,n)&&(t[n]=e[n]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,r){return Ee(t,e,n,r,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function v(t){if(null==t._isValid){var e=p(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function y(t){var e=h(NaN);return null!=t?f(p(e),t):p(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var g=r.momentProperties=[],m=!1;function _(t,e){var n,r,i;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=p(e)),u(e._locale)||(t._locale=e._locale),g.length>0)for(n=0;n<g.length;n++)u(i=e[r=g[n]])||(t[r]=i);return t}function b(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===m&&(m=!0,r.updateOffset(this),m=!1)}function w(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function I(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function O(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,o,s,u=[];for(o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(s in i+="\n["+o+"] ",arguments[0])a(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];u.push(i)}I(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var E,T={};function S(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),T[t]||(I(e),T[t]=!0)}function A(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function C(t,e){var n,r=f({},t);for(n in e)a(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)a(t,n)&&!a(e,n)&&o(t[n])&&(r[n]=f({},r[n]));return r}function R(t){null!=t&&this.set(t)}function P(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,E=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)a(t,e)&&n.push(e);return n};var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,x=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,M={},k={};function N(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(k[t]=i),e&&(k[e[0]]=function(){return P(i.apply(this,arguments),e[1],e[2])}),n&&(k[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function z(t,e){return t.isValid()?(e=D(e,t.localeData()),M[e]=M[e]||function(t){var e,n,r,i=t.match(j);for(e=0,n=i.length;e<n;e++)k[i[e]]?i[e]=k[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=A(i[r])?i[r].call(e,t):i[r];return o}}(e),M[e](t)):t.localeData().invalidDate()}function D(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(x.lastIndex=0;n>=0&&x.test(t);)t=t.replace(x,r),x.lastIndex=0,n-=1;return t}var U={};function L(t,e){var n=t.toLowerCase();U[n]=U[n+"s"]=U[e]=t}function F(t){return"string"==typeof t?U[t]||U[t.toLowerCase()]:void 0}function B(t){var e,n,r={};for(n in t)a(t,n)&&(e=F(n))&&(r[e]=t[n]);return r}var q={};function V(t,e){q[t]=e}function G(t){return t%4==0&&t%100!=0||t%400==0}function H(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function W(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=H(e)),n}function Y(t,e){return function(n){return null!=n?($(this,t,n),r.updateOffset(this,e),this):K(this,t)}}function K(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function $(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&G(t.year())&&1===t.month()&&29===t.date()?(n=W(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),wt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var X,Q=/\d/,Z=/\d\d/,J=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,at=/\d{1,4}/,st=/[+-]?\d{1,6}/,ut=/\d+/,ct=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,dt=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ht(t,e,n){X[t]=A(e)?e:function(t,r){return t&&n?n:e}}function pt(t,e){return a(X,t)?X[t](e._strict,e._locale):new RegExp(vt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function vt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var yt,gt={};function mt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),c(e)&&(r=function(t,n){n[e]=W(t)}),n=0;n<t.length;n++)gt[t[n]]=r}function _t(t,e){mt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function bt(t,e,n){null!=e&&a(gt,t)&&gt[t](e,n._a,n,t)}function wt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?G(t)?29:28:31-r%7%2}yt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},N("M",["MM",2],"Mo",(function(){return this.month()+1})),N("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),N("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),L("month","M"),V("month",8),ht("M",nt),ht("MM",nt,Z),ht("MMM",(function(t,e){return e.monthsShortRegex(t)})),ht("MMMM",(function(t,e){return e.monthsRegex(t)})),mt(["M","MM"],(function(t,e){e[1]=W(t)-1})),mt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:p(n).invalidMonth=t}));var It="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Et=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Tt=ft,St=ft;function At(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=yt.call(this._shortMonthsParse,a))?i:null:-1!==(i=yt.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=yt.call(this._shortMonthsParse,a))||-1!==(i=yt.call(this._longMonthsParse,a))?i:null:-1!==(i=yt.call(this._longMonthsParse,a))||-1!==(i=yt.call(this._shortMonthsParse,a))?i:null}function Ct(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=W(e);else if(!c(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),wt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Rt(t){return null!=t?(Ct(this,t),r.updateOffset(this,!0),this):K(this,"Month")}function Pt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=h([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=vt(r[e]),i[e]=vt(i[e]);for(e=0;e<24;e++)o[e]=vt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function jt(t){return G(t)?366:365}N("Y",0,0,(function(){var t=this.year();return t<=9999?P(t,4):"+"+t})),N(0,["YY",2],0,(function(){return this.year()%100})),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),L("year","y"),V("year",1),ht("Y",ct),ht("YY",nt,Z),ht("YYYY",at,tt),ht("YYYYY",st,et),ht("YYYYYY",st,et),mt(["YYYYY","YYYYYY"],0),mt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):W(t)})),mt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),mt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return W(t)+(W(t)>68?1900:2e3)};var xt=Y("FullYear",!0);function Mt(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function kt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Nt(t,e,n){var r=7+e-n;return-(7+kt(t,0,r).getUTCDay()-e)%7+r-1}function zt(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+Nt(t,r,i);return s<=0?a=jt(o=t-1)+s:s>jt(t)?(o=t+1,a=s-jt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Dt(t,e,n){var r,i,o=Nt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ut(i=t.year()-1,e,n):a>Ut(t.year(),e,n)?(r=a-Ut(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Ut(t,e,n){var r=Nt(t,e,n),i=Nt(t+1,e,n);return(jt(t)-r+i)/7}function Lt(t,e){return t.slice(e,7).concat(t.slice(0,e))}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),V("week",5),V("isoWeek",5),ht("w",nt),ht("ww",nt,Z),ht("W",nt),ht("WW",nt,Z),_t(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=W(t)})),N("d",0,"do","day"),N("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),N("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),N("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),ht("d",nt),ht("e",nt),ht("E",nt),ht("dd",(function(t,e){return e.weekdaysMinRegex(t)})),ht("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),ht("dddd",(function(t,e){return e.weekdaysRegex(t)})),_t(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:p(n).invalidWeekday=t})),_t(["d","e","E"],(function(t,e,n,r){e[r]=W(t)}));var Ft="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Vt=ft,Gt=ft,Ht=ft;function Wt(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=yt.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=yt.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=yt.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=yt.call(this._weekdaysParse,a))||-1!==(i=yt.call(this._shortWeekdaysParse,a))||-1!==(i=yt.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=yt.call(this._shortWeekdaysParse,a))||-1!==(i=yt.call(this._weekdaysParse,a))||-1!==(i=yt.call(this._minWeekdaysParse,a))?i:null:-1!==(i=yt.call(this._minWeekdaysParse,a))||-1!==(i=yt.call(this._weekdaysParse,a))||-1!==(i=yt.call(this._shortWeekdaysParse,a))?i:null}function Yt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],u=[],c=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),r=vt(this.weekdaysMin(n,"")),i=vt(this.weekdaysShort(n,"")),o=vt(this.weekdays(n,"")),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);a.sort(t),s.sort(t),u.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Kt(){return this.hours()%12||12}function $t(t,e){N(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Xt(t,e){return e._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,Kt),N("k",["kk",2],0,(function(){return this.hours()||24})),N("hmm",0,0,(function(){return""+Kt.apply(this)+P(this.minutes(),2)})),N("hmmss",0,0,(function(){return""+Kt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),N("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),N("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),$t("a",!0),$t("A",!1),L("hour","h"),V("hour",13),ht("a",Xt),ht("A",Xt),ht("H",nt),ht("h",nt),ht("k",nt),ht("HH",nt,Z),ht("hh",nt,Z),ht("kk",nt,Z),ht("hmm",rt),ht("hmmss",it),ht("Hmm",rt),ht("Hmmss",it),mt(["H","HH"],3),mt(["k","kk"],(function(t,e,n){var r=W(t);e[3]=24===r?0:r})),mt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),mt(["h","hh"],(function(t,e,n){e[3]=W(t),p(n).bigHour=!0})),mt("hmm",(function(t,e,n){var r=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r)),p(n).bigHour=!0})),mt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r,2)),e[5]=W(t.substr(i)),p(n).bigHour=!0})),mt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r))})),mt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r,2)),e[5]=W(t.substr(i))}));var Qt,Zt=Y("Hours",!0),Jt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:It,monthsShort:Ot,week:{dow:0,doy:6},weekdays:Ft,weekdaysMin:qt,weekdaysShort:Bt,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function re(t){return t?t.toLowerCase().replace("_","-"):t}function ie(e){var n=null;if(void 0===te[e]&&void 0!==t&&t&&t.exports)try{n=Qt._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),oe(n)}catch(t){te[e]=null}return te[e]}function oe(t,e){var n;return t&&((n=u(e)?se(t):ae(t,e))?Qt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Qt._abbr}function ae(t,e){if(null!==e){var n,r=Jt;if(e.abbr=t,null!=te[t])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])r=te[e.parentLocale]._config;else{if(null==(n=ie(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;r=n._config}return te[t]=new R(C(r,e)),ee[t]&&ee[t].forEach((function(t){ae(t.name,t.config)})),oe(t),te[t]}return delete te[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Qt;if(!i(t)){if(e=ie(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=re(t[o]).split("-")).length,n=(n=re(t[o+1]))?n.split("-"):null;e>0;){if(r=ie(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&ne(i,n)>=e-1)break;e--}o++}return Qt}(t)}function ue(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>wt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}var ce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,le=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,de=/Z|[+-]\d\d(?::?\d\d)?/,fe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],he=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pe=/^\/?Date\((-?\d+)/i,ve=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ye={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ge(t){var e,n,r,i,o,a,s=t._i,u=ce.exec(s)||le.exec(s);if(u){for(p(t).iso=!0,e=0,n=fe.length;e<n;e++)if(fe[e][1].exec(u[1])){i=fe[e][0],r=!1!==fe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=he.length;e<n;e++)if(he[e][1].exec(u[3])){o=(u[2]||" ")+he[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!de.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),Ie(t)}else t._isValid=!1}function me(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function _e(t){var e,n,r,i,o,a,s,u,c=ve.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],r=c[3],i=c[2],o=c[5],a=c[6],s=c[7],u=[me(n),Ot.indexOf(r),parseInt(i,10),parseInt(o,10),parseInt(a,10)],s&&u.push(parseInt(s,10)),e=u,!function(t,e,n){return!t||Bt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return ye[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(c[8],c[9],c[10]),t._d=kt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function be(t,e,n){return null!=t?t:null!=e?e:n}function we(t){var e,n,i,o,a,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s,u,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=be(e.GG,t._a[0],Dt(Te(),1,4).year),r=be(e.W,1),((i=be(e.E,1))<1||i>7)&&(u=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,c=Dt(Te(),o,a),n=be(e.gg,t._a[0],c.year),r=be(e.w,c.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(u=!0)):i=o),r<1||r>Ut(n,o,a)?p(t)._overflowWeeks=!0:null!=u?p(t)._overflowWeekday=!0:(s=zt(n,r,i,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=be(t._a[0],i[0]),(t._dayOfYear>jt(a)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=kt(a,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?kt:Mt).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}function Ie(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,n,i,o,a,s,u=""+t._i,c=u.length,l=0;for(i=D(t._f,t._locale).match(j)||[],e=0;e<i.length;e++)o=i[e],(n=(u.match(pt(o,t))||[])[0])&&((a=u.substr(0,u.indexOf(n))).length>0&&p(t).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),l+=n.length),k[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),bt(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=c-l,u.length>0&&p(t).unusedInput.push(u),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=p(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),we(t),ue(t)}else _e(t);else ge(t)}function Oe(t){var e=t._i,n=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===n&&""===e?y({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),w(e)?new b(ue(e)):(l(e)?t._d=e:i(n)?function(t){var e,n,r,i,o,a,s=!1;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,a=!1,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Ie(e),v(e)&&(a=!0),o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,s?o<r&&(r=o,n=e):(null==r||o<r||a)&&(r=o,n=e,a&&(s=!0));f(t,n||e)}(t):n?Ie(t):function(t){var e=t._i;u(e)?t._d=new Date(r.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=pe.exec(t._i);null===e?(ge(t),!1===t._isValid&&(delete t._isValid,_e(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),we(t)):o(e)?function(t){if(!t._d){var e=B(t._i),n=void 0===e.day?e.date:e.day;t._a=d([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),we(t)}}(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),v(t)||(t._d=null),t))}function Ee(t,e,n,r,a){var u,c={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&s(t)||i(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=t,c._f=e,c._strict=r,(u=new b(ue(Oe(c))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Te(t,e,n,r){return Ee(t,e,n,r,!1)}r.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Se=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:y()})),Ae=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:y()}));function Ce(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Te();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Re=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pe(t){var e=B(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,u=e.hour||0,c=e.minute||0,l=e.second||0,d=e.millisecond||0;this._isValid=function(t){var e,n,r=!1;for(e in t)if(a(t,e)&&(-1===yt.call(Re,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<Re.length;++n)if(t[Re[n]]){if(r)return!1;parseFloat(t[Re[n]])!==W(t[Re[n]])&&(r=!0)}return!0}(e),this._milliseconds=+d+1e3*l+6e4*c+1e3*u*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=se(),this._bubble()}function je(t){return t instanceof Pe}function xe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Me(t,e){N(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)}))}Me("Z",":"),Me("ZZ",""),ht("Z",dt),ht("ZZ",dt),mt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Ne(dt,t)}));var ke=/([\+\-]|\d\d)/gi;function Ne(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(ke)||["-",0,0])[1]+W(n[2]))?0:"+"===n[0]?r:-r}function ze(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(w(t)||l(t)?t.valueOf():Te(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Te(t).local()}function De(t){return-Math.round(t._d.getTimezoneOffset())}function Ue(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Le=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o,s,u,l=t,d=null;return je(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(l={},e?l[e]=+t:l.milliseconds=+t):(d=Le.exec(t))?(n="-"===d[1]?-1:1,l={y:0,d:W(d[2])*n,h:W(d[3])*n,m:W(d[4])*n,s:W(d[5])*n,ms:W(xe(1e3*d[6]))*n}):(d=Fe.exec(t))?(n="-"===d[1]?-1:1,l={y:qe(d[2],n),M:qe(d[3],n),w:qe(d[4],n),d:qe(d[5],n),h:qe(d[6],n),m:qe(d[7],n),s:qe(d[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Te(l.from),s=Te(l.to),i=o.isValid()&&s.isValid()?(s=ze(s,o),o.isBefore(s)?u=Ve(o,s):((u=Ve(s,o)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new Pe(l),je(t)&&a(t,"_locale")&&(r._locale=t._locale),je(t)&&a(t,"_isValid")&&(r._isValid=t._isValid),r}function qe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ve(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ge(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),He(this,Be(n,r),t),this}}function He(t,e,n,i){var o=e._milliseconds,a=xe(e._days),s=xe(e._months);t.isValid()&&(i=null==i||i,s&&Ct(t,K(t,"Month")+s*n),a&&$(t,"Date",K(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,a||s))}Be.fn=Pe.prototype,Be.invalid=function(){return Be(NaN)};var We=Ge(1,"add"),Ye=Ge(-1,"subtract");function Ke(t){return"string"==typeof t||t instanceof String}function $e(t){return w(t)||l(t)||Ke(t)||c(t)||function(t){var e=i(t),n=!1;return e&&(n=0===t.filter((function(e){return!c(e)&&Ke(t)})).length),e&&n}(t)||function(t){var e,n,r=o(t)&&!s(t),i=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<u.length;e+=1)n=u[e],i=i||a(t,n);return r&&i}(t)||null==t}function Xe(t){var e,n=o(t)&&!s(t),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<i.length;e+=1)r=r||a(t,i[e]);return n&&r}function Qe(t,e){if(t.date()<e.date())return-Qe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Je=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tn(){return this._locale}function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function on(t,e){return e.erasAbbrRegex(t)}function an(){var t,e,n=[],r=[],i=[],o=[],a=this.eras();for(t=0,e=a.length;t<e;++t)r.push(vt(a[t].name)),n.push(vt(a[t].abbr)),i.push(vt(a[t].narrow)),o.push(vt(a[t].name)),o.push(vt(a[t].abbr)),o.push(vt(a[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function sn(t,e){N(0,[t,t.length],0,e)}function un(t,e,n,r,i){var o;return null==t?Dt(this,r,i).year:(e>(o=Ut(t,r,i))&&(e=o),cn.call(this,t,e,n,r,i))}function cn(t,e,n,r,i){var o=zt(t,e,n,r,i),a=kt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),ht("N",on),ht("NN",on),ht("NNN",on),ht("NNNN",(function(t,e){return e.erasNameRegex(t)})),ht("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),mt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?p(n).era=i:p(n).invalidEra=t})),ht("y",ut),ht("yy",ut),ht("yyy",ut),ht("yyyy",ut),ht("yo",(function(t,e){return e._eraYearOrdinalRegex||ut})),mt(["y","yy","yyy","yyyy"],0),mt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,i):e[0]=parseInt(t,10)})),N(0,["gg",2],0,(function(){return this.weekYear()%100})),N(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),ht("G",ct),ht("g",ct),ht("GG",nt,Z),ht("gg",nt,Z),ht("GGGG",at,tt),ht("gggg",at,tt),ht("GGGGG",st,et),ht("ggggg",st,et),_t(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=W(t)})),_t(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),N("Q",0,"Qo","quarter"),L("quarter","Q"),V("quarter",7),ht("Q",Q),mt("Q",(function(t,e){e[1]=3*(W(t)-1)})),N("D",["DD",2],"Do","date"),L("date","D"),V("date",9),ht("D",nt),ht("DD",nt,Z),ht("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),mt(["D","DD"],2),mt("Do",(function(t,e){e[2]=W(t.match(nt)[0])}));var ln=Y("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),V("dayOfYear",4),ht("DDD",ot),ht("DDDD",J),mt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=W(t)})),N("m",["mm",2],0,"minute"),L("minute","m"),V("minute",14),ht("m",nt),ht("mm",nt,Z),mt(["m","mm"],4);var dn=Y("Minutes",!1);N("s",["ss",2],0,"second"),L("second","s"),V("second",15),ht("s",nt),ht("ss",nt,Z),mt(["s","ss"],5);var fn,hn,pn=Y("Seconds",!1);for(N("S",0,0,(function(){return~~(this.millisecond()/100)})),N(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),N(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),N(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),N(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),N(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),N(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),L("millisecond","ms"),V("millisecond",16),ht("S",ot,Q),ht("SS",ot,Z),ht("SSS",ot,J),fn="SSSS";fn.length<=9;fn+="S")ht(fn,ut);function vn(t,e){e[6]=W(1e3*("0."+t))}for(fn="S";fn.length<=9;fn+="S")mt(fn,vn);hn=Y("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var yn=b.prototype;function gn(t){return t}yn.add=We,yn.calendar=function(t,e){1===arguments.length&&(arguments[0]?$e(arguments[0])?(t=arguments[0],e=void 0):Xe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Te(),i=ze(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(A(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,Te(n)))},yn.clone=function(){return new b(this)},yn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=ze(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=F(e)){case"year":o=Qe(this,r)/12;break;case"month":o=Qe(this,r);break;case"quarter":o=Qe(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:H(o)},yn.endOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-en(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-en(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},yn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=z(this,t);return this.localeData().postformat(e)},yn.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.fromNow=function(t){return this.from(Te(),t)},yn.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.toNow=function(t){return this.to(Te(),t)},yn.get=function(t){return A(this[t=F(t)])?this[t]():this},yn.invalidAt=function(){return p(this).overflow},yn.isAfter=function(t,e){var n=w(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},yn.isBefore=function(t,e){var n=w(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},yn.isBetween=function(t,e,n,r){var i=w(t)?t:Te(t),o=w(e)?e:Te(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n)))},yn.isSame=function(t,e){var n,r=w(t)?t:Te(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},yn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},yn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},yn.isValid=function(){return v(this)},yn.lang=Je,yn.locale=Ze,yn.localeData=tn,yn.max=Ae,yn.min=Se,yn.parsingFlags=function(){return f({},p(this))},yn.set=function(t,e){if("object"==typeof t){var n,r=function(t){var e,n=[];for(e in t)a(t,e)&&n.push({unit:e,priority:q[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=B(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(A(this[t=F(t)]))return this[t](e);return this},yn.startOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=en(e,6e4);break;case"second":e=this._d.valueOf(),e-=en(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},yn.subtract=Ye,yn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},yn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},yn.toDate=function(){return new Date(this.valueOf())},yn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?z(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(n,"Z")):z(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},yn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(yn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),yn.toJSON=function(){return this.isValid()?this.toISOString():null},yn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},yn.unix=function(){return Math.floor(this.valueOf()/1e3)},yn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},yn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},yn.eraName=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""},yn.eraNarrow=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""},yn.eraAbbr=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""},yn.eraYear=function(){var t,e,n,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until||o[t].until<=i&&i<=o[t].since)return(this.year()-r(o[t].since).year())*n+o[t].offset;return this.year()},yn.year=xt,yn.isLeapYear=function(){return G(this.year())},yn.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},yn.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},yn.quarter=yn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},yn.month=Rt,yn.daysInMonth=function(){return wt(this.year(),this.month())},yn.week=yn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},yn.isoWeek=yn.isoWeeks=function(t){var e=Dt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},yn.weeksInYear=function(){var t=this.localeData()._week;return Ut(this.year(),t.dow,t.doy)},yn.weeksInWeekYear=function(){var t=this.localeData()._week;return Ut(this.weekYear(),t.dow,t.doy)},yn.isoWeeksInYear=function(){return Ut(this.year(),1,4)},yn.isoWeeksInISOWeekYear=function(){return Ut(this.isoWeekYear(),1,4)},yn.date=ln,yn.day=yn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},yn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},yn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},yn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},yn.hour=yn.hours=Zt,yn.minute=yn.minutes=dn,yn.second=yn.seconds=pn,yn.millisecond=yn.milliseconds=hn,yn.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ne(dt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=De(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?He(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:De(this)},yn.utc=function(t){return this.utcOffset(0,t)},yn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(De(this),"m")),this},yn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},yn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},yn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},yn.isLocal=function(){return!!this.isValid()&&!this._isUTC},yn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},yn.isUtc=Ue,yn.isUTC=Ue,yn.zoneAbbr=function(){return this._isUTC?"UTC":""},yn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},yn.dates=O("dates accessor is deprecated. Use date instead.",ln),yn.months=O("months accessor is deprecated. Use month instead",Rt),yn.years=O("years accessor is deprecated. Use year instead",xt),yn.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),yn.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return _(e,this),(e=Oe(e))._a?(t=e._isUTC?h(e._a):Te(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&W(t[r])!==W(e[r]))&&a++;return a+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var mn=R.prototype;function _n(t,e,n,r){var i=se(),o=h().set(r,e);return i[n](o,t)}function bn(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return _n(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=_n(t,r,n,"month");return i}function wn(t,e,n,r){"boolean"==typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var i,o=se(),a=t?o._week.dow:0,s=[];if(null!=n)return _n(e,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=_n(e,(i+a)%7,r,"day");return s}mn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return A(r)?r.call(e,n):r},mn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(j).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},mn.invalidDate=function(){return this._invalidDate},mn.ordinal=function(t){return this._ordinal.replace("%d",t)},mn.preparse=gn,mn.postformat=gn,mn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return A(i)?i(t,e,n,r):i.replace(/%d/i,t)},mn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return A(n)?n(e):n.replace(/%s/i,e)},mn.set=function(t){var e,n;for(n in t)a(t,n)&&(A(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mn.eras=function(t,e){var n,i,o,a=this._eras||se("en")._eras;for(n=0,i=a.length;n<i;++n){switch(typeof a[n].since){case"string":o=r(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=r(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a},mn.erasParse=function(t,e,n){var r,i,o,a,s,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),a=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return u[r];break;case"NNNN":if(o===t)return u[r];break;case"NNNNN":if(s===t)return u[r]}else if([o,a,s].indexOf(t)>=0)return u[r]},mn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n},mn.erasAbbrRegex=function(t){return a(this,"_erasAbbrRegex")||an.call(this),t?this._erasAbbrRegex:this._erasRegex},mn.erasNameRegex=function(t){return a(this,"_erasNameRegex")||an.call(this),t?this._erasNameRegex:this._erasRegex},mn.erasNarrowRegex=function(t){return a(this,"_erasNarrowRegex")||an.call(this),t?this._erasNarrowRegex:this._erasRegex},mn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Et).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},mn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Et.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return At.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},mn.monthsRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||Pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=St),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},mn.monthsShortRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||Pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Tt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},mn.week=function(t){return Dt(t,this._week.dow,this._week.doy).week},mn.firstDayOfYear=function(){return this._week.doy},mn.firstDayOfWeek=function(){return this._week.dow},mn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Lt(n,this._week.dow):t?n[t.day()]:n},mn.weekdaysMin=function(t){return!0===t?Lt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},mn.weekdaysShort=function(t){return!0===t?Lt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},mn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Wt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},mn.weekdaysRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Vt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},mn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ht),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},mn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},oe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===W(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=O("moment.lang is deprecated. Use moment.locale instead.",oe),r.langData=O("moment.langData is deprecated. Use moment.localeData instead.",se);var In=Math.abs;function On(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function En(t){return t<0?Math.floor(t):Math.ceil(t)}function Tn(t){return 4800*t/146097}function Sn(t){return 146097*t/4800}function An(t){return function(){return this.as(t)}}var Cn=An("ms"),Rn=An("s"),Pn=An("m"),jn=An("h"),xn=An("d"),Mn=An("w"),kn=An("M"),Nn=An("Q"),zn=An("y");function Dn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Un=Dn("milliseconds"),Ln=Dn("seconds"),Fn=Dn("minutes"),Bn=Dn("hours"),qn=Dn("days"),Vn=Dn("months"),Gn=Dn("years"),Hn=Math.round,Wn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Kn=Math.abs;function $n(t){return(t>0)-(t<0)||+t}function Xn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,o,a,s,u=Kn(this._milliseconds)/1e3,c=Kn(this._days),l=Kn(this._months),d=this.asSeconds();return d?(t=H(u/60),e=H(t/60),u%=60,t%=60,n=H(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",o=$n(this._months)!==$n(d)?"-":"",a=$n(this._days)!==$n(d)?"-":"",s=$n(this._milliseconds)!==$n(d)?"-":"",i+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(c?a+c+"D":"")+(e||t||u?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(u?s+r+"S":"")):"P0D"}var Qn=Pe.prototype;return Qn.isValid=function(){return this._isValid},Qn.abs=function(){var t=this._data;return this._milliseconds=In(this._milliseconds),this._days=In(this._days),this._months=In(this._months),t.milliseconds=In(t.milliseconds),t.seconds=In(t.seconds),t.minutes=In(t.minutes),t.hours=In(t.hours),t.months=In(t.months),t.years=In(t.years),this},Qn.add=function(t,e){return On(this,t,e,1)},Qn.subtract=function(t,e){return On(this,t,e,-1)},Qn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=F(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Tn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Sn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Qn.asMilliseconds=Cn,Qn.asSeconds=Rn,Qn.asMinutes=Pn,Qn.asHours=jn,Qn.asDays=xn,Qn.asWeeks=Mn,Qn.asMonths=kn,Qn.asQuarters=Nn,Qn.asYears=zn,Qn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*W(this._months/12):NaN},Qn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*En(Sn(s)+a),a=0,s=0),u.milliseconds=o%1e3,t=H(o/1e3),u.seconds=t%60,e=H(t/60),u.minutes=e%60,n=H(e/60),u.hours=n%24,a+=H(n/24),i=H(Tn(a)),s+=i,a-=En(Sn(i)),r=H(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Qn.clone=function(){return Be(this)},Qn.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},Qn.milliseconds=Un,Qn.seconds=Ln,Qn.minutes=Fn,Qn.hours=Bn,Qn.days=qn,Qn.weeks=function(){return H(this.days()/7)},Qn.months=Vn,Qn.years=Gn,Qn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=Wn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(o=Object.assign({},Wn,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),n=this.localeData(),r=function(t,e,n,r){var i=Be(t).abs(),o=Hn(i.as("s")),a=Hn(i.as("m")),s=Hn(i.as("h")),u=Hn(i.as("d")),c=Hn(i.as("M")),l=Hn(i.as("w")),d=Hn(i.as("y")),f=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||l<=1&&["w"]||l<n.w&&["ww",l]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=e,f[3]=+t>0,f[4]=r,Yn.apply(null,f)}(this,!i,o,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Qn.toISOString=Xn,Qn.toString=Xn,Qn.toJSON=Xn,Qn.locale=Ze,Qn.localeData=tn,Qn.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xn),Qn.lang=Je,N("X",0,0,"unix"),N("x",0,0,"valueOf"),ht("x",ct),ht("X",/[+-]?\d+(\.\d{1,3})?/),mt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),mt("x",(function(t,e,n){n._d=new Date(W(t))})),
//! moment.js
r.version="2.29.1",e=Te,r.fn=yn,r.min=function(){var t=[].slice.call(arguments,0);return Ce("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return Ce("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=h,r.unix=function(t){return Te(1e3*t)},r.months=function(t,e){return bn(t,e,"months")},r.isDate=l,r.locale=oe,r.invalid=y,r.duration=Be,r.isMoment=w,r.weekdays=function(t,e,n){return wn(t,e,n,"weekdays")},r.parseZone=function(){return Te.apply(null,arguments).parseZone()},r.localeData=se,r.isDuration=je,r.monthsShort=function(t,e){return bn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return wn(t,e,n,"weekdaysMin")},r.defineLocale=ae,r.updateLocale=function(t,e){if(null!=e){var n,r,i=Jt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(C(te[t]._config,e)):(null!=(r=ie(t))&&(i=r._config),e=C(i,e),null==r&&(e.abbr=t),(n=new R(e)).parentLocale=te[t],te[t]=n),oe(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===oe()&&oe(t)):null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return E(te)},r.weekdaysShort=function(t,e,n){return wn(t,e,n,"weekdaysShort")},r.normalizeUnits=F,r.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Wn[t]&&(void 0===e?Wn[t]:(Wn[t]=e,"s"===t&&(Wn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=yn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(72)(t))},function(t,e,n){var r=n(23),i=n(127),o=n(28),a=n(64),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=n(417);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(23),i=n(26),o=n(49);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(11);t.exports=r},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(300),i=n(301),o=n(148);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(l(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){d=!1;break}if(d)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return q(F(e,t.length-n),t,n,r)}function w(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function I(t,e,n,r){return w(t,e,n,r)}function O(t,e,n,r){return q(B(e),t,n,r)}function E(t,e,n,r){return q(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return d(null,t)},u.allocUnsafeSlow=function(t){return d(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),d=0;d<s;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return I(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=L(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);x(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);x(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:F(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(6))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){var r=n(56);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r=n(408);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return h}));var r=n(86),i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=t.navigator&&t.navigator.userAgent,s=!!a&&a.includes("Trident/"),u=!!a&&/\/([0-9]|1[0-2])[.\d]* Mobile\/[0-9A-F]* Safari/.test(a),c=!(s||u||!t.fetch||!t.Headers||!t.Response||!t.AbortController),l=Object(r.c)()?r.a:r.b,d=t.fetch,f=function(){function t(t){this._headers=t}return t.prototype.get=function(t){return this._headers.get(t)},t}(),h=function(){function t(t){var e=t.headers,n=t.onProgress,r=t.onStart,i=t.url,o=t.withCredentials;this.controller=new AbortController,this.headers=new Headers(e),this.isAborted=!1,this.onProgress=n,this.onStart=r,this.response=null,this.textDecoder=new l,this.url=i,this.withCredentials=o,this._reader=null,this._stream=null}return t.prototype.fetch=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return this.isAborted?[2]:(e=this,[4,d(this.url,{headers:this.headers,credentials:this.withCredentials?"include":"same-origin",signal:this.controller.signal,cache:"no-store"})]);case 1:return(t=e.response=n.sent()).body.on?(this._emitStart(),[4,this._streamBody()]):[3,3];case 2:return n.sent(),[3,6];case 3:return"getReader"in t.body?(this._emitStart(),[4,this._readBody()]):[3,5];case 4:return n.sent(),[3,6];case 5:throw new Error("Cannot read from response.body, lacks 'getReader' or 'on' property");case 6:return[2]}}))}))},t.prototype._emitStart=function(){var t=this.response,e=t.headers,n=t.status,r=t.statusText;this.onStart({contentType:e.get("Content-Type"),headers:new f(e),status:n,statusText:r})},t.prototype._streamBody=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,n){var r=!1,i=function(){r||(r=!0,e())};t._stream=t.response.body.on("data",(function(e){var n=e.toString("utf8");t.onProgress(n)})).on("close",i).on("end",i).on("error",(function(t){return n(t)}))}))];case 1:return e.sent(),[2]}}))}))},t.prototype._readBody=function(){return i(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){switch(r.label){case 0:this._reader=this.response.body.getReader(),t=!1,r.label=1;case 1:return t||this.isAborted?[3,3]:[4,this._reader.read()];case 2:return(e=r.sent()).done?t=!0:(n=this.textDecoder.decode(e.value,{stream:!0}),this.onProgress(n)),[3,1];case 3:return[2]}}))}))},t.prototype.abort=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(this.isAborted)return[2];if(this.isAborted=!0,!this._reader)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._reader.cancel()];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:this._reader=null,t.label=5;case 5:return this._stream&&(this._stream.destroy(),this._stream=null),this.controller.abort(),[2]}}))}))},t}()}).call(this,n(6))},function(t,e,n){var r=n(89),i=n(38);t.exports=function(t){return r(i(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e){t.exports=!1},function(t,e,n){var r=n(96),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(38);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(26).f,i=n(15),o=n(12)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(71),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=d;var o=Object.create(n(51));o.inherits=n(33);var a=n(152),s=n(155);o.inherits(d,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];d.prototype[l]||(d.prototype[l]=s.prototype[l])}function d(t){if(!(this instanceof d))return new d(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(17),i=n(20),o=n(77),a=n(45),s=n(75),u=function(t,e,n){var c,l,d,f=t&u.F,h=t&u.G,p=t&u.S,v=t&u.P,y=t&u.B,g=t&u.W,m=h?i:i[e]||(i[e]={}),_=m.prototype,b=h?r:p?r[e]:(r[e]||{}).prototype;for(c in h&&(n=e),n)(l=!f&&b&&void 0!==b[c])&&s(m,c)||(d=l?b[c]:n[c],m[c]=h&&"function"!=typeof b[c]?n[c]:y&&l?o(d,r):g&&b[c]==d?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((m.virtual||(m.virtual={}))[c]=d,t&u.R&&_&&!_[c]&&a(_,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(79),i=n(186);t.exports=n(46)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(80)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(e.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){var r=n(23),i=n(62),o=n(49),a=n(37),s=n(64),u=n(15),c=n(127),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(11),i=n(99),o=Function.call;t.exports=function(t,e,n){return i(o,r[t].prototype[e],n)}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(31).Buffer)},function(t,e,n){var r=n(323),i=n(334),o=n(179),a=n(19),s=n(344);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(171)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e,n){(function(e){!function(){"use strict";t.exports=function(t){return(t instanceof e?t:e.from(t.toString(),"binary")).toString("base64")}}()}).call(this,n(31).Buffer)},function(t,e,n){(function(e){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")(),l=Object.prototype.toString,d=Math.max,f=Math.min,h=function(){return c.Date.now()};function p(t,e,n){var r,i,o,a,s,u,c=0,l=!1,p=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,o=i;return r=i=void 0,c=e,a=t.apply(o,n)}function _(t){return c=t,s=setTimeout(w,e),l?m(t):a}function b(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-c>=o}function w(){var t=h();if(b(t))return I(t);s=setTimeout(w,function(t){var n=e-(t-u);return p?f(n,o-(t-c)):n}(t))}function I(t){return s=void 0,g&&r?m(t):(r=i=void 0,a)}function O(){var t=h(),n=b(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return _(u);if(p)return s=setTimeout(w,e),m(u)}return void 0===s&&(s=setTimeout(w,e)),a}return e=y(e)||0,v(n)&&(l=!!n.leading,o=(p="maxWait"in n)?d(y(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g),O.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},O.flush=function(){return void 0===s?a:I(h())},O}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=i.test(t);return s||o.test(t)?a(t.slice(2),s?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return v(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),p(t,e,{leading:r,maxWait:e,trailing:i})}}).call(this,n(6))},function(t,e,n){"use strict";var r=n(438);t.exports=function(t,e,n,i){var o=n?n.call(i,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var a=r(t),s=r(e),u=a.length;if(u!==s.length)return!1;i=i||null;for(var c=Object.prototype.hasOwnProperty.bind(e),l=0;l<u;l++){var d=a[l];if(!c(d))return!1;var f=t[d],h=e[d],p=n?n.call(i,f,h,d):void 0;if(!1===p||void 0===p&&f!==h)return!1}return!0}},function(t,e,n){"use strict";var r=n(442);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(11),i=n(29),o=n(15),a=n(90),s=n(129),u=n(92),c=u.get,l=u.enforce,d=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=l(n)).source||(u.source=d.join("string"==typeof e?e:""))),t!==r?(c?!h&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e,n){var r=n(93),i=n(94),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(30),i=n(11),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(131),i=n(97);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports={}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(32))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(165);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(19),i=n(111),o=n(336),a=n(340);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(78);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(34),i=n(362),o=n(363),a=Object.defineProperty;e.f=n(46)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(419),i=n(422)(r);t.exports=i},function(t,e,n){"use strict";var r,i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(t){function e(n,r,i){void 0===r&&(r="invalid"),void 0===i&&(i=n+" is "+r);var o=t.call(this,i)||this;return o.code=e.CODE,o.name=n,o.reason=r,o}return i(e,t),e.CODE="validation",e}(Error);e.a=o},function(t,e,n){"use strict";var r=n(322);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){(function(t,n){!function(){var r;function i(t){var e,n,r,i="",o=-1;if(t&&t.length)for(r=t.length;(o+=1)<r;)e=t.charCodeAt(o),n=o+1<r?t.charCodeAt(o+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),o+=1),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i}function o(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e){return t<<e|t>>>32-e}function s(t,e){for(var n,r=e?"0123456789ABCDEF":"0123456789abcdef",i="",o=0,a=t.length;o<a;o+=1)n=t.charCodeAt(o),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i}function u(t){var e,n=32*t.length,r="";for(e=0;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return r}function c(t){var e,n=32*t.length,r="";for(e=0;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function l(t){var e,n=8*t.length,r=Array(t.length>>2),i=r.length;for(e=0;e<i;e+=1)r[e]=0;for(e=0;e<n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function d(t){var e,n=8*t.length,r=Array(t.length>>2),i=r.length;for(e=0;e<i;e+=1)r[e]=0;for(e=0;e<n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return r}function f(t,e){var n,r,i,o,a,s,u,c,l=e.length,d=Array();for(o=(s=Array(Math.ceil(t.length/2))).length,n=0;n<o;n+=1)s[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;s.length>0;){for(a=Array(),i=0,n=0;n<s.length;n+=1)i=(i<<16)+s[n],i-=(r=Math.floor(i/l))*l,(a.length>0||r>0)&&(a[a.length]=r);d[d.length]=i,s=a}for(u="",n=d.length-1;n>=0;n--)u+=e.charAt(d[n]);for(c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=u.length;n<c;n+=1)u=e[0]+u;return u}function h(t,e){var n,r,i,o="",a=t.length;for(e=e||"=",n=0;n<a;n+=3)for(i=t.charCodeAt(n)<<16|(n+1<a?t.charCodeAt(n+1)<<8:0)|(n+2<a?t.charCodeAt(n+2):0),r=0;r<4;r+=1)8*n+6*r>8*t.length?o+=e:o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63);return o}r={VERSION:"1.0.6",Base64:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="=",n=!0;this.encode=function(r){var o,a,s,u="",c=r.length;for(e=e||"=",r=n?i(r):r,o=0;o<c;o+=3)for(s=r.charCodeAt(o)<<16|(o+1<c?r.charCodeAt(o+1)<<8:0)|(o+2<c?r.charCodeAt(o+2):0),a=0;a<4;a+=1)u+=8*o+6*a>8*c?e:t.charAt(s>>>6*(3-a)&63);return u},this.decode=function(r){var i,o,a,s,u,c,l,d,f="",h=[];if(!r)return r;i=d=0,r=r.replace(new RegExp("\\"+e,"gi"),"");do{o=(l=t.indexOf(r.charAt(i+=1))<<18|t.indexOf(r.charAt(i+=1))<<12|(u=t.indexOf(r.charAt(i+=1)))<<6|(c=t.indexOf(r.charAt(i+=1))))>>16&255,a=l>>8&255,s=255&l,h[d+=1]=64===u?String.fromCharCode(o):64===c?String.fromCharCode(o,a):String.fromCharCode(o,a,s)}while(i<r.length);return f=h.join(""),f=n?function(t){var e,n,r,i,o,a,s=[];if(e=n=r=i=o=0,t&&t.length)for(a=t.length,t+="";e<a;)n+=1,(r=t.charCodeAt(e))<128?(s[n]=String.fromCharCode(r),e+=1):r>191&&r<224?(i=t.charCodeAt(e+1),s[n]=String.fromCharCode((31&r)<<6|63&i),e+=2):(i=t.charCodeAt(e+1),o=t.charCodeAt(e+2),s[n]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),e+=3);return s.join("")}(f):f},this.setPad=function(t){return e=t||e,this},this.setTab=function(e){return t=e||t,this},this.setUTF8=function(t){return"boolean"==typeof t&&(n=t),this}},CRC32:function(t){var e,n,r,o=0,a=0;for(t=i(t),e=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o^=-1,n=0,r=t.length;n<r;n+=1)a=255&(o^t.charCodeAt(n)),o=o>>>8^"0x"+e.substr(9*a,8);return(-1^o)>>>0},MD5:function(t){var e=!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase,n=t&&"string"==typeof t.pad?t.pad:"=",r=!t||"boolean"!=typeof t.utf8||t.utf8;function u(t){return c(p(l(t=r?i(t):t),8*t.length))}function d(t,e){var n,o,a,s,u;for(t=r?i(t):t,e=r?i(e):e,(n=l(t)).length>16&&(n=p(n,8*t.length)),o=Array(16),a=Array(16),u=0;u<16;u+=1)o[u]=909522486^n[u],a[u]=1549556828^n[u];return s=p(o.concat(l(e)),512+8*e.length),c(p(a.concat(s),640))}function p(t,e){var n,r,i,a,s,u=1732584193,c=-271733879,l=-1732584194,d=271733878;for(t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e,n=0;n<t.length;n+=16)r=u,i=c,a=l,s=d,u=y(u,c,l,d,t[n+0],7,-680876936),d=y(d,u,c,l,t[n+1],12,-389564586),l=y(l,d,u,c,t[n+2],17,606105819),c=y(c,l,d,u,t[n+3],22,-1044525330),u=y(u,c,l,d,t[n+4],7,-176418897),d=y(d,u,c,l,t[n+5],12,1200080426),l=y(l,d,u,c,t[n+6],17,-1473231341),c=y(c,l,d,u,t[n+7],22,-45705983),u=y(u,c,l,d,t[n+8],7,1770035416),d=y(d,u,c,l,t[n+9],12,-1958414417),l=y(l,d,u,c,t[n+10],17,-42063),c=y(c,l,d,u,t[n+11],22,-1990404162),u=y(u,c,l,d,t[n+12],7,1804603682),d=y(d,u,c,l,t[n+13],12,-40341101),l=y(l,d,u,c,t[n+14],17,-1502002290),u=g(u,c=y(c,l,d,u,t[n+15],22,1236535329),l,d,t[n+1],5,-165796510),d=g(d,u,c,l,t[n+6],9,-1069501632),l=g(l,d,u,c,t[n+11],14,643717713),c=g(c,l,d,u,t[n+0],20,-373897302),u=g(u,c,l,d,t[n+5],5,-701558691),d=g(d,u,c,l,t[n+10],9,38016083),l=g(l,d,u,c,t[n+15],14,-660478335),c=g(c,l,d,u,t[n+4],20,-405537848),u=g(u,c,l,d,t[n+9],5,568446438),d=g(d,u,c,l,t[n+14],9,-1019803690),l=g(l,d,u,c,t[n+3],14,-187363961),c=g(c,l,d,u,t[n+8],20,1163531501),u=g(u,c,l,d,t[n+13],5,-1444681467),d=g(d,u,c,l,t[n+2],9,-51403784),l=g(l,d,u,c,t[n+7],14,1735328473),u=m(u,c=g(c,l,d,u,t[n+12],20,-1926607734),l,d,t[n+5],4,-378558),d=m(d,u,c,l,t[n+8],11,-2022574463),l=m(l,d,u,c,t[n+11],16,1839030562),c=m(c,l,d,u,t[n+14],23,-35309556),u=m(u,c,l,d,t[n+1],4,-1530992060),d=m(d,u,c,l,t[n+4],11,1272893353),l=m(l,d,u,c,t[n+7],16,-155497632),c=m(c,l,d,u,t[n+10],23,-1094730640),u=m(u,c,l,d,t[n+13],4,681279174),d=m(d,u,c,l,t[n+0],11,-358537222),l=m(l,d,u,c,t[n+3],16,-722521979),c=m(c,l,d,u,t[n+6],23,76029189),u=m(u,c,l,d,t[n+9],4,-640364487),d=m(d,u,c,l,t[n+12],11,-421815835),l=m(l,d,u,c,t[n+15],16,530742520),u=_(u,c=m(c,l,d,u,t[n+2],23,-995338651),l,d,t[n+0],6,-198630844),d=_(d,u,c,l,t[n+7],10,1126891415),l=_(l,d,u,c,t[n+14],15,-1416354905),c=_(c,l,d,u,t[n+5],21,-57434055),u=_(u,c,l,d,t[n+12],6,1700485571),d=_(d,u,c,l,t[n+3],10,-1894986606),l=_(l,d,u,c,t[n+10],15,-1051523),c=_(c,l,d,u,t[n+1],21,-2054922799),u=_(u,c,l,d,t[n+8],6,1873313359),d=_(d,u,c,l,t[n+15],10,-30611744),l=_(l,d,u,c,t[n+6],15,-1560198380),c=_(c,l,d,u,t[n+13],21,1309151649),u=_(u,c,l,d,t[n+4],6,-145523070),d=_(d,u,c,l,t[n+11],10,-1120210379),l=_(l,d,u,c,t[n+2],15,718787259),c=_(c,l,d,u,t[n+9],21,-343485551),u=o(u,r),c=o(c,i),l=o(l,a),d=o(d,s);return Array(u,c,l,d)}function v(t,e,n,r,i,s){return o(a(o(o(e,t),o(r,s)),i),n)}function y(t,e,n,r,i,o,a){return v(e&n|~e&r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return v(e&r|n&~r,t,e,i,o,a)}function m(t,e,n,r,i,o,a){return v(e^n^r,t,e,i,o,a)}function _(t,e,n,r,i,o,a){return v(n^(e|~r),t,e,i,o,a)}this.hex=function(t){return s(u(t),e)},this.b64=function(t){return h(u(t),n)},this.any=function(t,e){return f(u(t),e)},this.raw=function(t){return u(t)},this.hex_hmac=function(t,n){return s(d(t,n),e)},this.b64_hmac=function(t,e){return h(d(t,e),n)},this.any_hmac=function(t,e,n){return f(d(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(e=t),this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(r=t),this}},SHA1:function(t){var e=!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase,n=t&&"string"==typeof t.pad?t.pad:"=",r=!t||"boolean"!=typeof t.utf8||t.utf8;function c(t){return u(p(d(t=r?i(t):t),8*t.length))}function l(t,e){var n,o,a,s,c;for(t=r?i(t):t,e=r?i(e):e,(n=d(t)).length>16&&(n=p(n,8*t.length)),o=Array(16),a=Array(16),s=0;s<16;s+=1)o[s]=909522486^n[s],a[s]=1549556828^n[s];return c=p(o.concat(d(e)),512+8*e.length),u(p(a.concat(c),672))}function p(t,e){var n,r,i,s,u,c,l,d,f=Array(80),h=1732584193,p=-271733879,g=-1732584194,m=271733878,_=-1009589776;for(t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e,n=0;n<t.length;n+=16){for(s=h,u=p,c=g,l=m,d=_,r=0;r<80;r+=1)f[r]=r<16?t[n+r]:a(f[r-3]^f[r-8]^f[r-14]^f[r-16],1),i=o(o(a(h,5),v(r,p,g,m)),o(o(_,f[r]),y(r))),_=m,m=g,g=a(p,30),p=h,h=i;h=o(h,s),p=o(p,u),g=o(g,c),m=o(m,l),_=o(_,d)}return Array(h,p,g,m,_)}function v(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function y(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}this.hex=function(t){return s(c(t),e)},this.b64=function(t){return h(c(t),n)},this.any=function(t,e){return f(c(t),e)},this.raw=function(t){return c(t)},this.hex_hmac=function(t,e){return s(l(t,e))},this.b64_hmac=function(t,e){return h(l(t,e),n)},this.any_hmac=function(t,e,n){return f(l(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(e=t),this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(r=t),this}},SHA256:function(t){!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase;var e,n=t&&"string"==typeof t.pad?t.pad:"=",r=!t||"boolean"!=typeof t.utf8||t.utf8;function a(t,e){return u(b(d(t=e?i(t):t),8*t.length))}function c(t,e){t=r?i(t):t,e=r?i(e):e;var n,o=0,a=d(t),s=Array(16),c=Array(16);for(a.length>16&&(a=b(a,8*t.length));o<16;o+=1)s[o]=909522486^a[o],c[o]=1549556828^a[o];return n=b(s.concat(d(e)),512+8*e.length),u(b(c.concat(n),768))}function l(t,e){return t>>>e|t<<32-e}function p(t,e){return t>>>e}function v(t,e,n){return t&e^~t&n}function y(t,e,n){return t&e^t&n^e&n}function g(t){return l(t,2)^l(t,13)^l(t,22)}function m(t){return l(t,6)^l(t,11)^l(t,25)}function _(t){return l(t,7)^l(t,18)^p(t,3)}function b(t,n){var r,i,a,s,u,c,d,f,h,b,w,I,O,E=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],T=new Array(64);for(t[n>>5]|=128<<24-n%32,t[15+(n+64>>9<<4)]=n,h=0;h<t.length;h+=16){for(r=E[0],i=E[1],a=E[2],s=E[3],u=E[4],c=E[5],d=E[6],f=E[7],b=0;b<64;b+=1)T[b]=b<16?t[b+h]:o(o(o(l(O=T[b-2],17)^l(O,19)^p(O,10),T[b-7]),_(T[b-15])),T[b-16]),w=o(o(o(o(f,m(u)),v(u,c,d)),e[b]),T[b]),I=o(g(r),y(r,i,a)),f=d,d=c,c=u,u=o(s,w),s=a,a=i,i=r,r=o(w,I);E[0]=o(r,E[0]),E[1]=o(i,E[1]),E[2]=o(a,E[2]),E[3]=o(s,E[3]),E[4]=o(u,E[4]),E[5]=o(c,E[5]),E[6]=o(d,E[6]),E[7]=o(f,E[7])}return E}this.hex=function(t){return s(a(t,r))},this.b64=function(t){return h(a(t,r),n)},this.any=function(t,e){return f(a(t,r),e)},this.raw=function(t){return a(t,r)},this.hex_hmac=function(t,e){return s(c(t,e))},this.b64_hmac=function(t,e){return h(c(t,e),n)},this.any_hmac=function(t,e,n){return f(c(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&t,this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(r=t),this},e=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase;var e,n=t&&"string"==typeof t.pad?t.pad:"=",r=!t||"boolean"!=typeof t.utf8||t.utf8;function o(t){return u(c(d(t=r?i(t):t),8*t.length))}function a(t,e){t=r?i(t):t,e=r?i(e):e;var n,o=0,a=d(t),s=Array(32),l=Array(32);for(a.length>32&&(a=c(a,8*t.length));o<32;o+=1)s[o]=909522486^a[o],l[o]=1549556828^a[o];return n=c(s.concat(d(e)),1024+8*e.length),u(c(l.concat(n),1536))}function c(t,n){var r,i,o,a=new Array(80),s=new Array(16),u=[new l(1779033703,-205731576),new l(-1150833019,-2067093701),new l(1013904242,-23791573),new l(-1521486534,1595750129),new l(1359893119,-1377402159),new l(-1694144372,725511199),new l(528734635,-79577749),new l(1541459225,327033209)],c=new l(0,0),d=new l(0,0),f=new l(0,0),h=new l(0,0),w=new l(0,0),I=new l(0,0),O=new l(0,0),E=new l(0,0),T=new l(0,0),S=new l(0,0),A=new l(0,0),C=new l(0,0),R=new l(0,0),P=new l(0,0),j=new l(0,0),x=new l(0,0),M=new l(0,0);for(void 0===e&&(e=[new l(1116352408,-685199838),new l(1899447441,602891725),new l(-1245643825,-330482897),new l(-373957723,-2121671748),new l(961987163,-213338824),new l(1508970993,-1241133031),new l(-1841331548,-1357295717),new l(-1424204075,-630357736),new l(-670586216,-1560083902),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,-704662302),new l(1925078388,-226784913),new l(-2132889090,991336113),new l(-1680079193,633803317),new l(-1046744716,-815192428),new l(-459576895,-1628353838),new l(-272742522,944711139),new l(264347078,-1953704523),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,-1119749164),new l(1996064986,-2096016459),new l(-1740746414,-295247957),new l(-1473132947,766784016),new l(-1341970488,-1728372417),new l(-1084653625,-1091629340),new l(-958395405,1034457026),new l(-710438585,-1828018395),new l(113926993,-536640913),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,-1651133473),new l(1695183700,-1951439906),new l(1986661051,1014477480),new l(-2117940946,1206759142),new l(-1838011259,344077627),new l(-1564481375,1290863460),new l(-1474664885,-1136513023),new l(-1035236496,-789014639),new l(-949202525,106217008),new l(-778901479,-688958952),new l(-694614492,1432725776),new l(-200395387,1467031594),new l(275423344,851169720),new l(430227734,-1194143544),new l(506948616,1363258195),new l(659060556,-544281703),new l(883997877,-509917016),new l(958139571,-976659869),new l(1322822218,-482243893),new l(1537002063,2003034995),new l(1747873779,-692930397),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(-2067236844,-1578062990),new l(-1933114872,442776044),new l(-1866530822,593698344),new l(-1538233109,-561857047),new l(-1090935817,-1295615723),new l(-965641998,-479046869),new l(-903397682,-366583396),new l(-779700025,566280711),new l(-354779690,-840897762),new l(-176337025,-294727304),new l(116418474,1914138554),new l(174292421,-1563912026),new l(289380356,-1090974290),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,-1676669620),new l(1288033470,-885112138),new l(1501505948,-60457430),new l(1607167915,987167468),new l(1816402316,1246189591)]),i=0;i<80;i+=1)a[i]=new l(0,0);for(t[n>>5]|=128<<24-(31&n),t[31+(n+128>>10<<5)]=n,o=t.length,i=0;i<o;i+=32){for(p(f,u[0]),p(h,u[1]),p(w,u[2]),p(I,u[3]),p(O,u[4]),p(E,u[5]),p(T,u[6]),p(S,u[7]),r=0;r<16;r+=1)a[r].h=t[i+2*r],a[r].l=t[i+2*r+1];for(r=16;r<80;r+=1)v(j,a[r-2],19),y(x,a[r-2],29),g(M,a[r-2],6),C.l=j.l^x.l^M.l,C.h=j.h^x.h^M.h,v(j,a[r-15],1),v(x,a[r-15],8),g(M,a[r-15],7),A.l=j.l^x.l^M.l,A.h=j.h^x.h^M.h,_(a[r],C,a[r-7],A,a[r-16]);for(r=0;r<80;r+=1)R.l=O.l&E.l^~O.l&T.l,R.h=O.h&E.h^~O.h&T.h,v(j,O,14),v(x,O,18),y(M,O,9),C.l=j.l^x.l^M.l,C.h=j.h^x.h^M.h,v(j,f,28),y(x,f,2),y(M,f,7),A.l=j.l^x.l^M.l,A.h=j.h^x.h^M.h,P.l=f.l&h.l^f.l&w.l^h.l&w.l,P.h=f.h&h.h^f.h&w.h^h.h&w.h,b(c,S,C,R,e[r],a[r]),m(d,A,P),p(S,T),p(T,E),p(E,O),m(O,I,c),p(I,w),p(w,h),p(h,f),m(f,c,d);m(u[0],u[0],f),m(u[1],u[1],h),m(u[2],u[2],w),m(u[3],u[3],I),m(u[4],u[4],O),m(u[5],u[5],E),m(u[6],u[6],T),m(u[7],u[7],S)}for(i=0;i<8;i+=1)s[2*i]=u[i].h,s[2*i+1]=u[i].l;return s}function l(t,e){this.h=t,this.l=e}function p(t,e){t.h=e.h,t.l=e.l}function v(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function y(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function g(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function m(t,e,n){var r=(65535&e.l)+(65535&n.l),i=(e.l>>>16)+(n.l>>>16)+(r>>>16),o=(65535&e.h)+(65535&n.h)+(i>>>16),a=(e.h>>>16)+(n.h>>>16)+(o>>>16);t.l=65535&r|i<<16,t.h=65535&o|a<<16}function _(t,e,n,r,i){var o=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&i.l),a=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(o>>>16),s=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(a>>>16),u=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(s>>>16);t.l=65535&o|a<<16,t.h=65535&s|u<<16}function b(t,e,n,r,i,o){var a=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&i.l)+(65535&o.l),s=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(o.l>>>16)+(a>>>16),u=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(65535&o.h)+(s>>>16),c=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(o.h>>>16)+(u>>>16);t.l=65535&a|s<<16,t.h=65535&u|c<<16}this.hex=function(t){return s(o(t))},this.b64=function(t){return h(o(t),n)},this.any=function(t,e){return f(o(t),e)},this.raw=function(t){return o(t)},this.hex_hmac=function(t,e){return s(a(t,e))},this.b64_hmac=function(t,e){return h(a(t,e),n)},this.any_hmac=function(t,e,n){return f(a(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&t,this},this.setPad=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(r=t),this}},RMD160:function(t){!(!t||"boolean"!=typeof t.uppercase)&&t.uppercase;var e=t&&"string"==typeof t.pad?t.pa:"=",n=!t||"boolean"!=typeof t.utf8||t.utf8,r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function p(t){return y(g(l(t=n?i(t):t),8*t.length))}function v(t,e){t=n?i(t):t,e=n?i(e):e;var r,o,a=l(t),s=Array(16),u=Array(16);for(a.length>16&&(a=g(a,8*t.length)),r=0;r<16;r+=1)s[r]=909522486^a[r],u[r]=1549556828^a[r];return o=g(s.concat(l(e)),512+8*e.length),y(g(u.concat(o),672))}function y(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function g(t,e){var n,i,s,l,f,h,p,v,y,g,w,I,O,E,T=1732584193,S=4023233417,A=2562383102,C=271733878,R=3285377520;for(t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e,l=t.length,s=0;s<l;s+=16){for(f=g=T,h=w=S,p=I=A,v=O=C,y=E=R,i=0;i<=79;i+=1)n=o(f,m(i,h,p,v)),n=o(n,t[s+r[i]]),n=o(n,_(i)),n=o(a(n,c[i]),y),f=y,y=v,v=a(p,10),p=h,h=n,n=o(g,m(79-i,w,I,O)),n=o(n,t[s+u[i]]),n=o(n,b(i)),n=o(a(n,d[i]),E),g=E,E=O,O=a(I,10),I=w,w=n;n=o(S,o(p,O)),S=o(A,o(v,E)),A=o(C,o(y,g)),C=o(R,o(f,w)),R=o(T,o(h,I)),T=n}return[T,S,A,C,R]}function m(t,e,n,r){return 0<=t&&t<=15?e^n^r:16<=t&&t<=31?e&n|~e&r:32<=t&&t<=47?(e|~n)^r:48<=t&&t<=63?e&r|n&~r:64<=t&&t<=79?e^(n|~r):"rmd160_f: j out of range"}function _(t){return 0<=t&&t<=15?0:16<=t&&t<=31?1518500249:32<=t&&t<=47?1859775393:48<=t&&t<=63?2400959708:64<=t&&t<=79?2840853838:"rmd160_K1: j out of range"}function b(t){return 0<=t&&t<=15?1352829926:16<=t&&t<=31?1548603684:32<=t&&t<=47?1836072691:48<=t&&t<=63?2053994217:64<=t&&t<=79?0:"rmd160_K2: j out of range"}this.hex=function(t){return s(p(t))},this.b64=function(t){return h(p(t),e)},this.any=function(t,e){return f(p(t),e)},this.raw=function(t){return p(t)},this.hex_hmac=function(t,e){return s(v(t,e))},this.b64_hmac=function(t,n){return h(v(t,n),e)},this.any_hmac=function(t,e,n){return f(v(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&t,this},this.setPad=function(t){return void 0!==t&&(e=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(n=t),this}}},function(i,o){var a=!1;a=e,e&&"object"==typeof t&&t&&t===t.global&&(i=t),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define((function(){return r})):a?n&&n.exports===a?n.exports=r:a.Hashes=r:i.Hashes=r}(this)}()}).call(this,n(6),n(72)(t))},function(t,e,n){"use strict";var r=n(429);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s}));var r=t.TextDecoder;function i(){if(!r||"undefined"==typeof TextEncoder)return!1;try{return"test"===(new r).decode((new TextEncoder).encode("test"),{stream:!0})}catch(t){}return!1}function o(t,e,n){if(1===n)return t>=128>>e&&t<<e<=2047;if(2===n)return t>=2048>>e&&t<<e<=55295||t>=57344>>e&&t<<e<=65535;if(3===n)return t>=65536>>e&&t<<e<=1114111;throw new Error("Invalid octetsCount")}function a(t,e){if(6===t)return e>>6>15?3:e>31?2:1;if(12===t)return e>15?3:2;if(18===t)return 3;throw new Error}var s=function(){function t(){this.bitsNeeded=0,this.codePoint=0}return t.prototype.decode=function(t){for(var e="",n=this.bitsNeeded,r=this.codePoint,i=0;i<t.length;i+=1){var s=t[i];0!==n&&(s<128||s>191||!o(r<<6|63&s,n-6,a(n,r)))&&(n=0,r=65533,e+=String.fromCharCode(r)),0===n?(s>=0&&s<=127?(n=0,r=s):s>=192&&s<=223?(n=6,r=31&s):s>=224&&s<=239?(n=12,r=15&s):s>=240&&s<=247?(n=18,r=7&s):(n=0,r=65533),0===n||o(r,n,a(n,r))||(n=0,r=65533)):(n-=6,r=r<<6|63&s),0===n&&(r<=65535?e+=String.fromCharCode(r):(e+=String.fromCharCode(55296+(r-65535-1>>10)),e+=String.fromCharCode(56320+(r-65535-1&1023))))}return this.bitsNeeded=n,this.codePoint=r,e},t}()}).call(this,n(6))},function(t,e){function n(t,e){return t===e?0:t<e?-1:1}function r(t,e,r){r||(r=n);var o=i(t,e,r);return-1===o?-1:0===r(t[o],e)?o:-1}function i(t,e,r){r||(r=n);for(var i=t.length,o=i-1,a=0,s=-1;o>=a&&a>=0&&o<i;){var u=r(t[s=Math.floor((o+a)/2)],e);if(0===u)return s;u>=0?o=s-1:a=s+1}return s}e.add=function(t,e,r){r||(r=n);var i=t.push(e)-1;for(;i;){if(r(t[i-1],e)<0)return;t[i]=t[i-1],t[i-1]=e,i--}},e.addFromFront=function(t,e,r){r||(r=n);for(var i=t.unshift(e)-1,o=0;o<i;o++){if(r(e,t[o+1])<0)return;t[o]=t[o+1],t[o+1]=e}},e.remove=function(t,e,n){var i=r(t,e,n);return-1!==i&&(t.splice(i,1),!0)},e.has=function(t,e,n){return r(t,e,n)>-1},e.eq=r,e.lte=function(t,e,r){r||(r=n);var o=i(t,e,r);if(-1===o)return-1;for(;o>=0;o--){if(r(t[o],e)<=0)return o}return-1},e.lt=function(t,e,r){r||(r=n);var o=i(t,e,r);if(-1===o)return-1;for(;o>=0;o--){if(r(t[o],e)<0)return o}return-1},e.gte=function(t,e,r){r||(r=n);var o=i(t,e,r);if(-1===o)return-1;for(;o<t.length;o++){if(r(t[o],e)>=0)return o}return-1},e.gt=function(t,e,r){r||(r=n);var o=i(t,e,r);if(-1===o)return-1;for(;o<t.length;o++){if(r(t[o],e)>0)return o}return-1},e.nearest=function(t,e,r){r||(r=n);var i=t.length,o=i-1,a=0,s=-1,u=1;for(;o>=a&&a>=0&&o<i;){s=Math.floor((o+a)/2);var c=r(t[s],e);if(0===c)return s;if(c>=0){if(1===u)u=0;else if(2===u)return Math.abs(t[s]-e)>Math.abs(t[s-1]-e)?s-1:s;o=s-1}else{if(1===u)u=2;else if(0===u)return s;a=s+1}}return s}},function(t,e,n){"use strict";function r(t){return t.replace(/[A-Z]/g,(function(t){return String.fromCharCode(t.charCodeAt(0)+32)}))}n.d(e,"a",(function(){return c}));var i=function(){function t(t){for(var e=Object.create(null),n=t.split("\r\n"),i=0;i<n.length;i+=1){var o=n[i].split(": "),a=o.shift(),s=o.join(": ");e[r(a)]=s}this._map=e}return t.prototype.get=function(t){return this._map[r(t)]},t}(),o=function(){},a=function(){function t(t){this.withCredentials=!1,this.responseType="",this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=o,this.onreadystatechange=o,this._contentType="",this._xhr=t,this._sendTimeout=0,this._abort=o}return t.prototype.open=function(t,e){this._abort(!0);var n=this,r=this._xhr,i=1,a=0;this._abort=function(t){0!==n._sendTimeout&&(clearTimeout(n._sendTimeout),n._sendTimeout=0),1!==i&&2!==i&&3!==i||(i=4,r.onload=o,r.onerror=o,r.onabort=o,r.onprogress=o,r.onreadystatechange=o,r.abort(),0!==a&&(clearTimeout(a),a=0),t||(n.readyState=4,n.onreadystatechange())),i=0};var s=function(){if(1===i){var t="",e=void 0,o=0;if("contentType"in r)o=200,t="OK",e=r.contentType;else try{o=r.status,t=r.statusText,e=r.getResponseHeader("Content-Type")}catch(n){o=0,t="",e=void 0}0!==o&&(i=2,n.readyState=2,n.status=o,n.statusText=t,n._contentType=e,n.onreadystatechange())}},u=function(){if(s(),2===i||3===i){i=3;var t="";try{t=r.responseText}catch(t){}n.readyState=3,n.responseText=t,n.onprogress()}},c=function(){u(),1!==i&&2!==i&&3!==i||(i=4,0!==a&&(clearTimeout(a),a=0),n.readyState=4,n.onreadystatechange())},l=function(){a=setTimeout((function(){l()}),500),3===r.readyState&&u()};r.onload=c,r.onerror=c,r.onabort=c,"sendAsBinary"in XMLHttpRequest.prototype||"mozAnon"in XMLHttpRequest.prototype||(r.onprogress=u),r.onreadystatechange=function(){r&&(4===r.readyState?c():3===r.readyState?u():2===r.readyState&&s())},"contentType"in r&&(e+=(-1===e.indexOf("?")?"?":"&")+"padding=true"),r.open(t,e,!0),"readyState"in r&&(a=setTimeout((function(){l()}),0))},t.prototype.abort=function(){this._abort(!1)},t.prototype.getResponseHeader=function(t){return this._contentType},t.prototype.setRequestHeader=function(t,e){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(t,e)},t.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders?this._xhr.getAllResponseHeaders():""},t.prototype.send=function(){if(!("ontimeout"in XMLHttpRequest.prototype)&&document&&document.readyState&&"complete"!==document.readyState){var t=this;t._sendTimeout=setTimeout((function(){t._sendTimeout=0,t.send()}),4)}else{var e=this._xhr;e.withCredentials=this.withCredentials,e.responseType=this.responseType;try{e.send(void 0)}catch(t){throw t}}},t}(),s=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(){function t(t){var e=t.headers,n=t.onProgress,r=t.onStart,i=t.url,o=t.withCredentials;this.headers=e,this.isAborted=!1,this.offset=0,this.onProgress=n,this.onStart=r,this.url=i,this.withCredentials=o,this.xhr=new a(new XMLHttpRequest)}return t.prototype.fetch=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,c=this;return u(this,(function(u){switch(u.label){case 0:if(this.isAborted)return[2];for(e=new Promise((function(e){t=e})),this.xhr.open("GET",this.url),this.xhr.onprogress=function(){var t=c.xhr.responseText.slice(c.offset);c.offset+=t.length,c.onProgress(t)},this.xhr.onreadystatechange=function(){if(c.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED){var e=c.xhr.getResponseHeader("Content-Type"),n=c.xhr.getAllResponseHeaders();c.onStart({contentType:e,headers:new i(n),status:c.xhr.status,statusText:c.xhr.statusText})}else c.xhr.readyState===XMLHttpRequest.DONE&&t()},this.xhr.withCredentials=this.withCredentials,this.xhr.responseType="text",n=0,r=Object.entries(this.headers);n<r.length;n++)o=r[n],a=o[0],s=o[1],this.xhr.setRequestHeader(a,s);return this.xhr.send(),[4,e];case 1:return u.sent(),[2]}}))}))},t.prototype.abort=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){return this.isAborted||(this.isAborted=!0,this.xhr.abort()),[2]}))}))},t}()},function(t,e,n){var r=n(18),i=n(63),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(11),i=n(29);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(11),i=n(90),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r,i,o,a=n(214),s=n(11),u=n(24),c=n(29),l=n(15),d=n(91),f=n(66),h=n(67),p=s.WeakMap;if(a){var v=d.state||(d.state=new p),y=v.get,g=v.has,m=v.set;r=function(t,e){return e.facade=t,m.call(v,t,e),e},i=function(t){return y.call(v,t)||{}},o=function(t){return g.call(v,t)}}else{var _=f("state");h[_]=!0,r=function(t,e){return e.facade=t,c(t,_,e),e},i=function(t){return l(t,_)?t[_]:{}},o=function(t){return l(t,_)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(39),i=n(91);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(131),i=n(97).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(218);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(63);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(18);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r,i=n(28),o=n(219),a=n(97),s=n(67),u=n(220),c=n(128),l=n(66),d=l("IE_PROTO"),f=function(){},h=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[d]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=i(t),n=new f,f.prototype=null,n[d]=t):n=p(),void 0===e?n:o(n,e)}},function(t,e,n){var r={};r[n(12)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(253);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(12)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){var r=n(31),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r=n(19);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},function(t,e,n){var r=n(170);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(74),i=n(54);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(19),i=n(335),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(113);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(358),i=n(185);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(181),i=n(113);t.exports=function(t){return r(i(t))}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(183)("keys"),i=n(184);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports=!0},function(t,e,n){var r=n(56),i=n(17).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(79).f,i=n(75),o=n(21)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(78);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){var r=n(423),i=n(178);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){"use strict";(function(t){var r=n(9),i=n.n(r),o=n(7),a=n(207),s=n(36),u=n(88),c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(){function t(t,e){var n=this,r=void 0===e?{}:e,c=r.RequestClass,l=r.headers,d=r.lastEventId,f=r.withCredentials;this.CLOSED=o.a.CLOSED,this.CONNECTING=o.a.CONNECTING,this.OPEN=o.a.OPEN,this.FetchRequest=s.a,this.XHRRequest=u.a,this.isFetchSupported=s.b,this._events=new i.a,this.onerror=void 0,this.onmessage=void 0,this.onopen=void 0,this.readyState=o.a.WAITING,this.url=t=String(t),this.withCredentials=f,c||(c=s.b?s.a:u.a),this._esRequest=new a.a({RequestClass:c,dispatchEvent:function(t){return n.dispatchEvent(t)},headers:l,lastEventId:d,onError:function(t){return n.onerror&&n.onerror(t)},onMessage:function(t){return n.onmessage&&n.onmessage(t)},onOpen:function(t){return n.onopen&&n.onopen(t)},onReadyStateChange:function(t){n.readyState=t},url:t,withCredentials:f})}return t.prototype.addEventListener=function(t,e){this._events.on(t,e)},t.prototype.removeEventListener=function(t,e){this._events.removeListener(t,e)},t.prototype.dispatchEvent=function(t){t&&t.type&&this._events.emit(t.type,t)},t.prototype.start=function(){return c(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return this.readyState!==o.a.WAITING?[2]:[4,this._esRequest.start()];case 1:return t.sent(),[2]}}))}))},t.prototype.close=function(){this.readyState!==o.a.CLOSED&&(this._esRequest.close(),this._esRequest.onFinish(new Error("Connection closed by caller")))},t.CLOSED=o.a.CLOSED,t.CONNECTING=o.a.CONNECTING,t.OPEN=o.a.OPEN,t.FetchRequest=s.a,t.XHRRequest=u.a,t.isFetchSupported=s.b,t}();t.EventSource;e.a=d}).call(this,n(6))},function(t,e,n){(function(e){for(var r=n(319),i="undefined"==typeof window?e:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],u=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!u){var l=0,d=0,f=[];s=function(t){if(0===f.length){var e=r(),n=Math.max(0,1e3/60-(e-l));l=n+e,setTimeout((function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return f.push({handle:++d,callback:t,cancelled:!1}),d},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}t.exports=function(t){return s.call(i,t)},t.exports.cancel=function(){u.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=s,t.cancelAnimationFrame=u}}).call(this,n(6))},function(t,e){t.exports=function(t){return function(e){return"/"===e.url[0]&&(e.url=t+e.url),e}}},function(t,e,n){var r,i;r=this,i=function(){var t=0;function e(t,e,n){this.fields={},"function"==typeof e&&(n=e,e=null),t&&this.append(t,n),this.setBoundary(e)}function n(t,e,n,r){this.data=t,this.contentType=e,this.filename=n,this.headers=r}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}return e.prototype={constructor:e,availableTypes:["multipart","form-encoded"],setType:function(t){return this.typeOverride=-1!==this.availableTypes.indexOf(t)?t:null,this},getType:function(){var t=this.typeOverride;if(-1!==this.availableTypes.indexOf(t))return t;for(var e in this.fields)if(this.fields.hasOwnProperty(e)&&(this.fields[e],1)&&this.fields[e].contentType)return"multipart";return"form-encoded"},append:function(t,e,n){var i,o,a,s,u;if("string"==typeof t&&arguments.length>=2)return this.setField.apply(this,arguments);if("function"==typeof e&&(a=n,n=e,e=a),"function"==typeof n&&(s=1,u=function(){--s||n()}),r(t))for(a=0;a<t.length;a++)o=t[a],s++,this.setField(o.name,o.value,!1!==e,null,u);else for(i in t)if(t.hasOwnProperty(i))if(r(o=t[i]))for(a=0;a<o.length;a++)s++,this.setField(i,o[a],!0===e,null,u);else s++,this.setField(i,o,!1!==e,null,u);return s&&u(),this},setField:function(t,e,i,o,a){var s=this.fields;return t+="",window.File&&e instanceof window.File||window.Blob&&e instanceof window.Blob?this.setFileField.apply(this,arguments):("function"==typeof i&&(a=i,i=!0),e&&e.nodeType&&e.nodeName&&e.getAttribute?e=e.value:r(e)||e&&(e instanceof n||e.contentType&&e.data)||(e+=""),t.match(/\[\]$/g)&&(i=!1),!1===i&&s.hasOwnProperty(t)?(r(s[t])||(s[t]=[s[t]]),s[t].push(e)):s[t]=e,"function"==typeof a&&a(),this)},setFileField:function(t,e,r,i,o){var a=this,s=new FileReader;return"function"==typeof r&&(o=r,r=!0),s.onloadend=function(){a.setField(t,new n(function(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return e}(s.result),e.type,e.name,i||e.headers),!1!==r),"function"==typeof o&&o(),e=o=a=s=null},s.readAsArrayBuffer(e),this},setBoundary:function(e){return this.boundary=(e||Math.random().toString(36).substring(2)+(++t).toString(36))+"",this},toString:function(t){var e,n,i,o,a,s,u,c,l,d=this.getType(),f="";for(n in this.boundary||this.setBoundary(),t&&this.append(t),this.fields)if(this.fields.hasOwnProperty(n))for(e=r(i=this.fields[n])?i:[i],u=0;u<e.length;u++){if(s=e[u],"multipart"===d){if(c=s.headers,o=null,s.contentType&&(o=s.contentType,s=s.data),a="--"+this.boundary+'\r\nContent-Disposition: form-data; name="'+n+'"',e[u].filename&&(a+='; filename="'+e[u].filename+'"'),a+="\r\n",o&&(a+="Content-type: "+o+"\r\n"),c)for(l in c)c.hasOwnProperty(l)&&(a+=l+": "+c[l]+"\r\n");a+="\r\n"+s+"\r\n"}else"form-encoded"===d&&(a=encodeURIComponent(n)+"="+encodeURIComponent(s)+"&");f+=a}return"multipart"===d?f+="--"+this.boundary+"--\r\n":"form-encoded"===d&&(f=f.substring(0,f.length-1)),f},getData:function(){var t,e,n=this.toString();if("multipart"===this.getType()){t=n.length,e=new Uint8Array(t);for(var r=0;r<t;r++)e[r]=255&n.charCodeAt(r);return e}return n},getContentType:function(t){return"multipart"===this.getType()?"multipart/form-data; "+(t?"charset=utf-8; ":"")+"boundary="+this.boundary:"application/x-www-form-encoded"}},{RequestBody:e,RequestField:n}},"function"==typeof define&&define.amd?define([],i):t.exports?t.exports=i():r.maltypart=i()},function(t,e,n){var r=n(23),i=n(18),o=n(128);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(11),i=n(24),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(91),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(15),i=n(215),o=n(48),a=n(26);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(15),i=n(37),o=n(132).indexOf,a=n(67);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(37),i=n(40),o=n(216),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(99),i=n(89),o=n(41),a=n(40),s=n(134),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,d=6==t,f=5==t||d;return function(h,p,v,y){for(var g,m,_=o(h),b=i(_),w=r(p,v,3),I=a(b.length),O=0,E=y||s,T=e?E(h,I):n?E(h,0):void 0;I>O;O++)if((f||O in b)&&(m=w(g=b[O],O,_),t))if(e)T[O]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:u.call(T,g)}else if(l)return!1;return d?-1:c||l?l:T}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,n){var r=n(24),i=n(100),o=n(12)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(101);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(12),i=n(102),o=n(26),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){var r=n(23),i=n(18),o=n(15),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,d=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,d)}))}},function(t,e,n){"use strict";var r,i,o,a=n(139),s=n(29),u=n(15),c=n(12),l=n(39),d=c("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):f=!0),null==r&&(r={}),l||u(r,d)||s(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(t,e,n){var r=n(15),i=n(41),o=n(66),a=n(227),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){"use strict";var r=n(64),i=n(26),o=n(49);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(103),i=n(63),o=n(12)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(23),i=n(69),o=n(37),a=n(62).f,s=function(t){return function(e){for(var n,s=o(e),u=i(s),c=u.length,l=0,d=[];c>l;)n=u[l++],r&&!a.call(s,n)||d.push(t?[n,s[n]]:s[n]);return d}};t.exports={entries:s(!0),values:s(!1)}},function(t,e,n){var r,i,o=n(11),a=n(264),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){var r=n(12);e.f=r},function(t,e,n){"use strict";var r=n(292);function i(){}var o=null,a={};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,t!==i&&h(t,this)}function u(t,e){for(;3===t._V;)t=t._W;if(s._Y&&s._Y(t),0===t._V)return 0===t._U?(t._U=1,void(t._X=e)):1===t._U?(t._U=2,void(t._X=[t._X,e])):void t._X.push(e);!function(t,e){r((function(){var n=1===t._V?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return o=t,a}}(n,t._W);r===a?l(e.promise,o):c(e.promise,r)}else 1===t._V?c(e.promise,t._W):l(e.promise,t._W)}))}(t,e)}function c(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return o=t,a}}(e);if(n===a)return l(t,o);if(n===t.then&&e instanceof s)return t._V=3,t._W=e,void d(t);if("function"==typeof n)return void h(n.bind(e),t)}t._V=1,t._W=e,d(t)}function l(t,e){t._V=2,t._W=e,s._Z&&s._Z(t,e),d(t)}function d(t){if(1===t._U&&(u(t,t._X),t._X=null),2===t._U){for(var e=0;e<t._X.length;e++)u(t,t._X[e]);t._X=null}}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return o=t,a}}(t,(function(t){n||(n=!0,c(e,t))}),(function(t){n||(n=!0,l(e,t))}));n||r!==a||(n=!0,l(e,o))}t.exports=s,s._Y=null,s._Z=null,s._0=i,s.prototype.then=function(t,e){if(this.constructor!==s)return function(t,e,n){return new t.constructor((function(r,o){var a=new s(i);a.then(r,o),u(t,new f(e,n,a))}))}(this,t,e);var n=new s(i);return u(this,new f(t,e,n)),n}},function(t,e,n){"use strict"},function(t,e,n){"use strict";!function(){try{var t=n(298).request().constructor.prototype;t.setNoDelay||(t.setNoDelay=function(){}),t.abort||(t.abort=function(){this.xhr&&this.xhr.abort()})}catch(t){}}()},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){e.fetch=s(t.fetch)&&s(t.ReadableStream),e.writableStream=s(t.WritableStream),e.abortController=s(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var n;function r(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function i(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var o=void 0!==t.ArrayBuffer,a=o&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}e.arraybuffer=e.fetch||o&&i("arraybuffer"),e.msstream=!e.fetch&&a&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&s(r().overrideMimeType),e.vbArray=s(t.VBArray),n=null}).call(this,n(6))},function(t,e,n){(function(t,r,i){var o=n(149),a=n(33),s=n(151),u=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=e.IncomingMessage=function(e,n,a,u){var c=this;if(s.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){t.nextTick((function(){c.emit("close")}))})),"fetch"===a){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach((function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)})),o.writableStream){var l=new WritableStream({write:function(t){return new Promise((function(e,n){c._destroyed?n():c.push(new r(t))?e():c._resumeFetch=e}))},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void n.body.pipeTo(l).catch((function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)}))}catch(t){}}var d=n.body.getReader();!function t(){d.read().then((function(e){if(!c._destroyed){if(e.done)return i.clearTimeout(u),void c.push(null);c.push(new r(e.value)),t()}})).catch((function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)}))}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(e[2])):void 0!==c.headers[n]?c.headers[n]+=", "+e[2]:c.headers[n]=e[2],c.rawHeaders.push(e[1],e[2])}})),c._charset="x-user-defined",!o.overrideMimeType){var f=c.rawHeaders["mime-type"];if(f){var h=f.match(/;\s*charset=([^;])(;|$)/);h&&(c._charset=h[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},c.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==u.DONE)break;try{n=new i.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new r(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);t.push(a)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==u.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==u.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(n)}t._xhr.readyState===u.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n(32),n(31).Buffer,n(6))},function(t,e,n){(e=t.exports=n(152)).Stream=e,e.Readable=e,e.Writable=n(155),e.Duplex=n(43),e.Transform=n(157),e.PassThrough=n(309)},function(t,e,n){"use strict";(function(e,r){var i=n(71);t.exports=_;var o,a=n(148);_.ReadableState=m;n(9).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(153),c=n(106).Buffer,l=e.Uint8Array||function(){};var d=Object.create(n(51));d.inherits=n(33);var f=n(302),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,v=n(303),y=n(154);d.inherits(_,u);var g=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var r=e instanceof(o=o||n(43));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(156).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||n(43),!(this instanceof _))return new _(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,O(t)}(t,a)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):T(t,a)):w(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&O(t)),T(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=n(156).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(E,t):E(t))}function E(t){h("emit readable"),t.emit("readable"),R(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(S,t,e))}function S(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){h("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),R(t),e.flowing&&!e.reading&&t.read(0)}function R(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function j(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(x,e,t))}function x(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}_.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):O(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(n,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:_;function c(e,r){h("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),t.removeListener("close",g),t.removeListener("finish",m),t.removeListener("drain",d),t.removeListener("error",y),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",_),n.removeListener("data",v),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||d())}function l(){h("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var d=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,R(t))}}(n);t.on("drain",d);var f=!1;var p=!1;function v(e){h("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==M(o.pipes,t))&&!f&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(e){h("onerror",e),_(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",m),_()}function m(){h("onfinish"),t.removeListener("close",g),_()}function _(){h("unpipe"),n.unpipe(t)}return n.on("data",v),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",g),t.once("finish",m),t.emit("pipe",n),o.flowing||(h("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=M(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&O(this):i.nextTick(A,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,t,e))}(this,t)),this},_.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=P}).call(this,n(6),n(32))},function(t,e,n){t.exports=n(9).EventEmitter},function(t,e,n){"use strict";var r=n(71);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,r,i){var o=n(71);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;m.WritableState=g;var c=Object.create(n(51));c.inherits=n(33);var l={deprecate:n(307)},d=n(153),f=n(106).Buffer,h=i.Uint8Array||function(){};var p,v=n(154);function y(){}function g(t,e){s=s||n(43),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===t.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,i);else{var a=I(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,a,i):b(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function m(t){if(s=s||n(43),!(p.call(m,this)||this instanceof s))return new m(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function _(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,d=n.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,d),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)}))}function E(t,e){var n=I(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(O,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(m,d),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===m&&(t&&t._writableState instanceof g)}})):p=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof h);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=y),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,r,i,o);return u}(this,i,s,t,e,n)),a},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=v.destroy,m.prototype._undestroy=v.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(32),n(305).setImmediate,n(6))},function(t,e,n){"use strict";var r=n(308).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=d,e=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=a;var r=n(43),i=Object.create(n(51));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(33),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){"use strict";var r=/.+\@.+\..+/;t.exports=function(t){return r.test(t)}},function(t,e,n){"use strict";(function(t){var r,i=n(1),o=n(83),a=n.n(o),s=n(58),u=n.n(s),c=n(84),l=n.n(c),d=n(13),f=n(5),h=n(4),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},y=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},g=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_=i.b.VERSION_TWO,b=i.a.USER_FIND,w=i.a.USER_FIND_ME,I=new l.a.MD5,O=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return p(n,e),n.getSignInAuthHeader=function(t,e,n){var r=[t,e,n].join(":");return"XMPP-Simple "+u()(r)},n.prototype.getAnonymousAuthHeader=function(t){var e=this.config.signUpHashKey,n=this.config.signUpHashSalt,r=[e,n,t].join(":"),i=I.hex(r),o=[i.substr(0,2),i.substr(i.length-2)].join(""),a=[this.config.productKey,e,n,t,o].join(":");return"XMPP-Anonymous "+u()(a)},n.prototype.getSignInAuthHeader=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.constructor).getSignInAuthHeader.apply(t,e)},n.prototype.checkLogin=function(t,e){return g(this,void 0,void 0,(function(){var n,r;return m(this,(function(i){switch(i.label){case 0:return n={Authorization:this.getAnonymousAuthHeader(e.udid)},r={device:e.udid,tt_product_version:this.config.partnerName},Object(f.isPhone)(t)?r.phones=Object(f.normalizePhoneUS)(t):r.emails=t,[4,this.httpClient.get("/v4/login_check",{headers:n,query:r})];case 1:return[2,i.sent()]}}))}))},n.prototype.signUp=function(t){return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:return e={Authorization:this.getAnonymousAuthHeader(t.udid)},n={primary_email:t.email,unique_id:t.email,password:t.password,push_routing:this.config.pushAgent,product:this.config.productKey,country_code:t.countryCode,device_id:t.udid,version:this.config.version},[4,this.httpClient.post("/v2/signup",{headers:e,data:n})];case 1:return[2,r.sent()]}}))}))},n.prototype.signIn=function(e,n){return g(this,void 0,void 0,(function(){var r,i,o,a,s,u,c;return m(this,(function(l){switch(l.label){case 0:return r={device_id:n.udid,metadata:{device_type:"js_sdk",device_version:"12.6.0beta1",tt_product_version:this.config.partnerName,user_agent:t.navigator&&t.navigator.userAgent},push_routing:this.config.pushAgent,version:this.config.version,want_condensed_replays:this.config.wantCondensedReplays,want_processing_events:this.config.wantCondensedReplays},[4,this.httpClient.post("/v5/login",{headers:e,data:r})];case 1:return(i=l.sent()).data&&i.data.settings&&(o=i.data.settings,a=o.condensed_replays,s=void 0!==a&&a,u=o.processing_events,c=void 0!==u&&u,this.host.configure({condensedReplays:s,processingEvents:c})),[2,i]}}))}))},n.prototype.signOut=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/logout")];case 1:return[2,t.sent()]}}))}))},n.prototype.lookup=function(t){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:return n=e.prototype.getVersion.call(this,b).version,r=void 0===n?_:n,i={display_name:t},Object(d.isEmail)(t)?i.email_address=t:Object(f.isPhone)(t)&&(i.phone_number=Object(f.normalizePhoneUS)(t)),[4,this.httpClient.post("/:version/user_lookup/:id",{urlParams:{id:t,version:r},data:i})];case 1:return[2,o.sent().data]}}))}))},n.prototype.wipe=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v2/wipe",{data:{},query:{token:t}})];case 1:return[2,e.sent()]}}))}))},n.prototype.find=function(t,n){var r=(void 0===n?{}:n).organizationId;return g(this,void 0,void 0,(function(){var n,i,o;return m(this,(function(a){switch(a.label){case 0:return n=e.prototype.getVersion.call(this,b).version,i=void 0===n?_:n,Object(d.isEmail)(t)&&(t=t.toLowerCase()),o=r?{"TT-X-Organization-Key":r}:null,[4,this.httpClient.get("/:version/user/:id",{headers:o,urlParams:{id:t,version:i},query:{render_metadata:!0}})];case 1:return[2,a.sent().data]}}))}))},n.prototype.findMe=function(t){var n=(void 0===t?{}:t).organizationId;return g(this,void 0,void 0,(function(){var t,r,i;return m(this,(function(o){switch(o.label){case 0:return t=e.prototype.getVersion.call(this,w).version,r=void 0===t?_:t,i=n?{"TT-X-Organization-Key":n}:null,[4,this.httpClient.get("/:version/user",{headers:i,query:{render_metadata:!0},urlParams:{version:r}})];case 1:return[2,o.sent().data]}}))}))},n.prototype.update=function(t,e){var n=e.firstName,r=void 0===n?void 0:n,i=e.lastName,o=void 0===i?void 0:i,s=e.displayName,u=void 0===s?void 0:s,c=e.status,l=void 0===c?void 0:c,d=e.dnd,f=void 0===d?void 0:d,h=e.dndText,p=void 0===h?void 0:h,y=e.avatarFile,_=void 0===y?void 0:y,b=e.removeAvatar,w=void 0===b?void 0:b;return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(i){switch(i.label){case 0:return e={},w?e.avatar=null:_&&(e.avatar=_),n=a.a.call({first_name:r,last_name:o,display_name:u,status:l,dnd:f,dnd_text:p},(function(t,e){return void 0===t})),[4,this.httpClient.post("/v2/user/:id/settings",{urlParams:{id:t},data:n,files:e})];case 1:return i.sent(),[2,v({id:t},_&&_.preview?{avatarUrl:_.preview}:null)]}}))}))},n.prototype.updatePassword=function(t,e,n,r){return g(this,void 0,void 0,(function(){var i;return m(this,(function(o){switch(o.label){case 0:return i={Authorization:this.getSignInAuthHeader(r,t,e)},[4,this.httpClient.post("/v2/user/:id/password",{urlParams:{id:t},headers:i,data:{password:n}})];case 1:return[2,o.sent()]}}))}))},n.prototype.setAutoForward=function(t,e,n){var r=n.dnd,i=n.receiverId;return g(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/organization/:organizationId",{urlParams:{userId:t,organizationId:e},data:{dnd:r,dnd_auto_forward_receiver:i}})];case 1:return[2,n.sent()]}}))}))},n.prototype.removeAutoForward=function(t,e){return g(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.del("/v2/user/:userId/organization/:organizationId/dnd_auto_forward_receiver",{urlParams:{userId:t,organizationId:e}})];case 1:return[2,n.sent()]}}))}))},n.prototype.setAwayMessage=function(t,e,n){var r=n.dnd,i=n.dndText;return g(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v5/user/:userId/organization/:organizationId",{urlParams:{userId:t,organizationId:e},data:{network:{patient:{dnd:r,dnd_text:i}}}})];case 1:return n.sent(),[2]}}))}))},n.prototype.setEulaAccepted=function(t,e,n){return g(this,void 0,void 0,(function(){return m(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/organization/:organizationId",{urlParams:{userId:t,organizationId:e},data:{eula:!n}})];case 1:return[2,r.sent()]}}))}))},n.prototype.getPreferences=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.get("/v2/user/:userId/preferences",{urlParams:{userId:t}})];case 1:return[2,e.sent().data]}}))}))},n.prototype.editPreferences=function(t){var e=t.organizationId,n=t.quickReplies,r=t.userId;return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/user/:userId/preferences",{headers:{"TT-X-Organization-Key":e},data:h.a.underscoreObject({quickReplies:n}),urlParams:{userId:r}})];case 1:return[2,t.sent().data]}}))}))},y([Object(i.d)({httpStatusCodes:[400]})],n.prototype,"lookup",null),y([Object(i.d)()],n.prototype,"find",null),y([Object(i.d)()],n.prototype,"getPreferences",null),y([Object(i.d)()],n.prototype,"editPreferences",null),n}(i.c);e.a=O}).call(this,n(6))},function(t,e,n){var r=n(163),i=n(164),o=n(166),a=n(167),s=n(168);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(73),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(73);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(73);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(73);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(325),i=n(173);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(109);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(352);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(76);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(116),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(20),i=n(17),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(118)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(118),i=n(44),o=n(369),a=n(45),s=n(57),u=n(370),c=n(120),l=n(373),d=n(21)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,v,y,g){u(n,e,p);var m,_,b,w=function(t){if(!f&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",O="values"==v,E=!1,T=t.prototype,S=T[d]||T["@@iterator"]||v&&T[v],A=S||w(v),C=v?O?w("entries"):A:void 0,R="Array"==e&&T.entries||S;if(R&&(b=l(R.call(new t)))!==Object.prototype&&b.next&&(c(b,I,!0),r||"function"==typeof b[d]||a(b,d,h)),O&&S&&"values"!==S.name&&(E=!0,A=function(){return S.call(this)}),r&&!g||!f&&!E&&T[d]||a(T,d,A),s[e]=A,s[I]=h,v)if(m={values:O?A:w("values"),keys:y?A:w("keys"),entries:C},g)for(_ in m)_ in T||o(T,_,m[_]);else i(i.P+i.F*(f||E),e,m);return m}},function(t,e,n){var r=n(17).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(76),i=n(21)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(34),i=n(78),o=n(21)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(77),s=n(384),u=n(188),c=n(119),l=n(17),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){m.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete g[t]},"process"==n(76)(d)?r=function(t){d.nextTick(a(m,t,1))}:v&&v.now?r=function(t){v.now(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:f,clear:h}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(34),i=n(56),o=n(121);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!==t&&"object"===r(t)}},function(t,e,n){var r=n(170);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){t.exports=n(437)},function(t,e,n){!function(e){var n=-1,r={onVisible:function(t){var e=r.isSupported();if(!e||!r.hidden())return t(),e;var n=r.change((function(e,i){r.hidden()||(r.unbind(n),t())}));return n},change:function(t){if(!r.isSupported())return!1;var e=n+=1;return r._callbacks[e]=t,r._listen(),e},unbind:function(t){delete r._callbacks[t]},afterPrerendering:function(t){var e=r.isSupported();if(!e||"prerender"!=r.state())return t(),e;var n=r.change((function(e,i){"prerender"!=i&&(r.unbind(n),t())}));return n},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==r._doc.hidden||void 0!==r._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(t){var e=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,t,e)},_listen:function(){if(!r._init){var t="visibilitychange";r._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(t,e):r._doc.attachEvent(t,e),r._init=!0}}};t.exports?t.exports=r:e.Visibility=r}(this)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i;"undefined"!=typeof window?i=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),i=void 0):i=self;var o=n(401),a=n(402),s=n(403),u=n(194),c=n(404),l=n(406);function d(){}t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1===arguments.length?new e.Request("GET",t):new e.Request(t,n)};var f=e=t.exports;e.Request=_,f.getXHR=function(){if(i.XMLHttpRequest&&(!i.location||"file:"!==i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function p(t){if(!u(t))return t;var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&v(e,n,t[n]);return e.join("&")}function v(t,e,n){if(void 0!==n)if(null!==n)if(Array.isArray(n))n.forEach((function(n){v(t,e,n)}));else if(u(n))for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&v(t,"".concat(e,"[").concat(r,"]"),n[r]);else t.push(encodeURI(e)+"="+encodeURIComponent(n));else t.push(encodeURI(e))}function y(t){for(var e,n,r={},i=t.split("&"),o=0,a=i.length;o<a;++o)-1===(n=(e=i[o]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function g(t){return/[/+]json($|[^-\w])/.test(t)}function m(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,n,r,i,o=t.split(/\r?\n/),a={},s=0,u=o.length;s<u;++s)-1!==(e=(n=o[s]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),i=h(n.slice(e+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function _(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",(function(){var t,e=null,r=null;try{r=new m(n)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",r);try{n._isResponseOK(r)||(t=new Error(r.statusText||r.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=r,t.status=r.status,n.callback(t,r)):n.callback(null,r)}))}function b(t,e,n){var r=f("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}f.serializeObject=p,f.parseString=y,f.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":p,"application/json":a},f.parse={"application/x-www-form-urlencoded":y,"application/json":JSON.parse},c(m.prototype),m.prototype._parseBody=function(t){var e=f.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&g(this.type)&&(e=f.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},m.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot ".concat(e," ").concat(n," (").concat(this.status,")"),i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},f.Response=m,o(_.prototype),s(_.prototype),_.prototype.type=function(t){return this.set("Content-Type",f.types[t]||t),this},_.prototype.accept=function(t){return this.set("Accept",f.types[t]||t),this},_.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"===r(e)&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var i=function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,n,i)},_.prototype.query=function(t){return"string"!=typeof t&&(t=p(t)),t&&this._query.push(t),this},_.prototype.attach=function(t,e,n){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},_.prototype._getFormData=function(){return this._formData||(this._formData=new i.FormData),this._formData},_.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},_.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},_.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},_.prototype.ca=_.prototype.agent,_.prototype.buffer=_.prototype.ca,_.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},_.prototype.pipe=_.prototype.write,_.prototype._isHost=function(t){return t&&"object"===r(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},_.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||d,this._finalizeQueryString(),this._end()},_.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},_.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=f.getXHR();var e=this.xhr,n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===n){var r;try{r=e.status}catch(t){r=0}if(!r){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var r=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100,100===n.percent&&clearTimeout(t._uploadTimeoutTimer)),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.addEventListener("progress",r.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",r.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||f.serialize[i?i.split(";")[0]:""];!o&&g(i)&&(o=f.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!==this.header[a]&&Object.prototype.hasOwnProperty.call(this.header,a)&&e.setRequestHeader(a,this.header[a]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===n?null:n)},f.agent=function(){return new l},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(t){l.prototype[t.toLowerCase()]=function(e,n){var r=new f.Request(t,e);return this._setDefaults(r),n&&r.end(n),r}})),l.prototype.del=l.prototype.delete,f.get=function(t,e,n){var r=f("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},f.head=function(t,e,n){var r=f("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},f.options=function(t,e,n){var r=f("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.del=b,f.delete=b,f.patch=function(t,e,n){var r=f("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.post=function(t,e,n){var r=f("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.put=function(t,e,n){var r=f("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e,n){"use strict";var r=n(415);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(444);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(448);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(452);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(53);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t,e,n){"use strict";var r=n(455);t.exports=function(){return r.apply(void 0,[this].concat(Array.prototype.slice.apply(arguments)))}},function(t){t.exports=JSON.parse('{"name":"tigerconnect","private":true,"version":"12.6.0beta1","description":"JS (web and node) SDK for TigerConnect","homepage":"https://tigerconnect.github.io/js-sdk/","repository":"tigerconnect/js-sdk","author":{"name":"TigerConnect Developers","email":"developersupport@tigerconnect.com","url":"https://tigerconnect.github.io/js-sdk/"},"main":"lib/index.js","keywords":["tigerconnect","tigertext","communications","messenger","sdk"],"scripts":{"build:clean":"shx rm -fr lib dist","build:js":"babel -d lib/ src/","build:travis":"run-s lint coverage:test build","build:webpack":"webpack","build:webpack:node":"webpack --target node","build":"run-s build:clean build:webpack","build:node":"run-s build:webpack:node","coverage":"run-s coverage:clean coverage:test coverage:report:html","coverage:check":"nyc check-coverage","coverage:clean":"shx rm -fr .nyc_output","coverage:open":"open-cli coverage/index.html","coverage:report":"run-s coverage:report:*","coverage:report:html":"shx rm -fr coverage && nyc report --reporter=html","coverage:test":"jest --collectCoverage test/**/*.test.ts  > coverage.lcov","coverage:travis":"run-s coverage:test coverage:report coverage:check","deploy:docs":"gulp npm:publish:docs:prepare","deps":"npm-check -s","deps:update":"npm-check -u","lint":"eslint ./src --ext .js,.ts,.tsx","lint:fix":"eslint ./src --ext .js,.ts,.tsx --fix","test":"mocha \\"test/**/*.test.js\\"","watch":"run-s build:clean && gulp build:js && run-p watch:js watch:webpack","watch:js":"gulp watch:js","watch:test":"npm test -- -w","watch:webpack":"webpack --watch","test:jest":"jest test/**/*.test.ts --watch","tsc":"tsc --project tsconfig.json"},"husky":{"hooks":{"pre-commit":"lint-staged","pre-push":"./hooks/pre-push"}},"lint-staged":{"*":["pretty-quick --staged"]},"jest":{"collectCoverageFrom":["src/**/*.ts","!<rootDir>/node_modules/**","!<rootDir>/src/**/*.d.ts"],"coverageThreshold":{"global":{"statements":10,"branches":3,"lines":11,"functions":12}}},"dependencies":{"@tigerconnect/node-fetch":"^2.6.0-tc1","abortcontroller-polyfill":"^1.3.0","btoa":"^1.1.2","events":"^3.1.0","file-saver":"^1.3.3","file-type":"^4.0.0","humanize-list":"^1.0.1","invariant":"^2.2.2","is-email":"^1.0.0","jshashes":"^1.0.7","lodash":"^4.17.19","lodash-bound":"^1.1.2","lodash.throttle":"^4.1.1","maltypart":"^1.5.0","mime":"^1.6.0","moment":"^2.24.0","promise":"^8.0.3","raf":"^3.4.0","request":"^2.88.0","reuse-promise":"^1.1.0","shallowequal":"^0.2.2","sorted-array-functions":"^1.1.0","superagent":"^5.1.0","superagent-prefix":"0.0.2","uuid":"^3.0.0","visibilityjs":"^2.0.2"},"devDependencies":{"@babel/core":"^7.11.6","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-proposal-decorators":"^7.10.5","@babel/plugin-proposal-function-bind":"^7.11.5","@babel/plugin-proposal-object-rest-spread":"^7.11.0","@babel/plugin-syntax-flow":"^7.10.4","@babel/plugin-transform-flow-strip-types":"^7.10.4","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","@babel/preset-es2015":"^7.0.0-beta.53","@babel/preset-typescript":"^7.10.4","@babel/register":"^7.11.5","@types/events":"^3.0.0","@types/jest":"^26.0.14","@types/lodash":"^4.14.161","@types/node":"^14.11.5","@typescript-eslint/eslint-plugin":"^4.3.0","@typescript-eslint/parser":"^4.3.0","assets-webpack-plugin":"^4.0.0","awesome-typescript-loader":"^5.2.1","babel-eslint":"^10.1.0","babel-jest":"^26.3.0","babel-loader":"^8.1.0","babel-plugin-istanbul":"^6.0.0","busboy":"^0.2.14","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-deep-match":"^1.2.1","core-js":"^3.2.1","decache":"^4.1.0","dom-storage":"^2.0.2","eslint":"^7.10.0","eslint-config-prettier":"^6.11.0","eslint-config-react-app":"^5.2.1","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-import":"^2.22.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-prettier":"^3.1.4","eslint-plugin-react":"^7.21.2","eslint-plugin-react-hooks":"^4.1.2","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-changed":"^4.0.1","gulp-debug":"^4.0.0","gulp-file":"^0.4.0","gulp-if":"^3.0.0","gulp-load-plugins":"^2.0.1","gulp-plumber":"^1.2.1","gulp-uglify":"^3.0.2","gulp-watch":"^5.0.1","husky":"^3.0.3","jest":"^26.4.2","jsdom":"^15.1.1","jsdom-global":"^3.0.2","json-loader":"^0.5.4","lint-staged":"^10.3.0","lodash-webpack-plugin":"^0.11.2","mocha":"^7.2.0","mocha-clean":"^1.0.0","nock":"^9.0.2","npm-check":"^5.9.0","npm-run-all":"^4.0.2","nyc":"^15.1.0","open-cli":"^6.0.1","performance-now":"^2.0.0","prettier":"^2.1.2","pretty-quick":"^3.0.2","promisify-child-process":"^3.1.1","shelljs":"^0.8.4","shx":"^0.3.3","sinon":"^7.4.1","sinon-chai":"^3.3.0","source-map-loader":"^1.1.0","strip-loader":"^0.1.2","timekeeper":"1.0.0","tslint":"^6.1.3","tslint-loader":"^3.5.4","typescript":"^4.0.3","watch":"^1.0.1","webpack":"^4.44.2","webpack-cli":"^3.3.12","webpack-node-externals":"^1.5.4","webpack-utf8-bom":"^1.2.0","yargs":"^16.1.1"},"eslintConfig":{"extends":["react-app","prettier"],"globals":{"__SDK_VERSION__":"readonly","__DEV__":"readonly"},"plugins":["react","prettier"],"rules":{"prettier/prettier":"error"}},"prettier":{"arrowParens":"always","bracketSpacing":true,"jsxBracketSameLine":false,"jsxSingleQuote":false,"printWidth":100,"proseWrap":"always","quoteProps":"as-needed","semi":true,"singleQuote":true,"tabWidth":2,"trailingComma":"es5","useTabs":false},"license":{"type":"Commercial","url":"https://tigerconnect.com/terms/end-user-terms-use-license-agreement/"}}')},function(t,e,n){"use strict";for(var r={},i=0,o=["\n","\r"," ",":"];i<o.length;i++){var a=o[i];r[a]=a.charCodeAt(0)}var s,u=r,c=function(t){this.type=t,this.target=void 0},l=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(e,n){var r=n.headers,i=n.message,o=n.status,a=n.statusText,s=t.call(this,e)||this;return s.headers=r,s.message=i,s.status=o,s.statusText=a,s}return l(e,t),e}(c),f=n(7),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.data=n.data,r.lastEventId=n.lastEventId,r}return h(e,t),e}(c),v={AFTER_CR:-1,FIELD_START:0,FIELD:1,VALUE_START:2,VALUE:3},y=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},m=/^text\/event-stream?(\s*charset=utf-8)?$/i,_=function(){function t(t){var e=t.RequestClass,n=t.dispatchEvent,r=t.headers,i=t.lastEventId,o=void 0===i?"":i,a=t.onError,s=t.onMessage,u=t.onOpen,c=t.onReadyStateChange,l=t.url,d=t.withCredentials;this.RequestClass=e,this.dispatchEvent=n,this.headers=r,this.lastEventId=o,this.onError=a,this.onMessage=s,this.onOpen=u,this.onReadyStateChange=c,this.url=l,this.withCredentials=d,this.currentState=f.a.WAITING,this.parserState={dataBuffer:"",eventTypeBuffer:"",fieldStart:0,lastEventIdBuffer:o,state:v.FIELD_START,textBuffer:"",valueStart:0},this.request=void 0}return t.prototype.start=function(){return y(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return g(this,(function(d){switch(d.label){case 0:if(this.onReadyStateChange(f.a.CONNECTING),this.currentState=f.a.CONNECTING,e=(t=this).url,n=t.withCredentials,"data:"!==e.slice(0,5)&&"blob:"!==e.slice(0,5)&&(e+=-1===e.indexOf("?")?"?":"&",e+="lastEventId="+encodeURIComponent(this.lastEventId)),(r={}).Accept="text/event-stream",this.headers)for(i=0,o=Object.entries(this.headers);i<o.length;i++)a=o[i],s=a[0],u=a[1],r[s]=u;d.label=1;case 1:return d.trys.push([1,3,,4]),this.request=new this.RequestClass({headers:r,onProgress:function(t){return l.onProgress(t)},onStart:function(t){return l.onStart(t)},url:e,withCredentials:n}),[4,this.request.fetch()];case 2:throw d.sent(),new Error("Connection closed by server");case 3:return c=d.sent(),this.request.isAborted?[2]:(this.close(),this.onFinish(c),[3,4]);case 4:return[2]}}))}))},t.prototype.onStart=function(t){var e=t.contentType,n=t.headers,r=t.status,i=t.statusText;if(this.currentState===f.a.CONNECTING)if(200===r&&e&&m.test(e)){this.currentState=f.a.OPEN,this.onReadyStateChange(f.a.OPEN);var o=new d("open",{headers:n,status:r,statusText:i});this.dispatchEvent(o),this.onOpen(o)}else{var a="";200!==r?(i&&(i=i.replace(/\s+/g," ")),a="EventSource's response has a status "+r+" "+i+" that is not 200. Aborting the connection."):a="EventSource's response has a Content-Type specifying an unsupported type: "+(e?"-":e.replace(/\s+/g," "))+". Aborting the connection.";var s=new d("error",{headers:n,message:a,status:r,statusText:i});this.close(),this.dispatchEvent(s),this.onError(s)}},t.prototype.onProgress=function(t){if(this.currentState===f.a.OPEN){for(var e=this.parserState,n=e.dataBuffer,r=e.eventTypeBuffer,i=e.fieldStart,o=e.lastEventIdBuffer,a=e.state,s=e.textBuffer,c=e.valueStart,l=-1,d=0;d<t.length;d+=1){(g=t.charCodeAt(d))!==u["\n"]&&g!==u["\r"]||(l=d)}var h=(-1!==l?s:"")+t.slice(0,l+1);s=(-1===l?s:"")+t.slice(l+1);for(var y=0;y<h.length;y+=1){var g=h.charCodeAt(y);if(a!==v.AFTER_CR||g!==u["\n"])if(a===v.AFTER_CR&&(a=v.FIELD_START),g===u["\n"]||g===u["\r"]){if(a!==v.FIELD_START){a===v.FIELD&&(c=y+1);var m=h.slice(i,c-1),_=c<y&&h.charCodeAt(c)===u[" "]?1:0,b=h.slice(c+_,y);"data"===m?(n+="\n",n+=b):"id"===m?o=b:"event"===m&&(r=b)}if(a===v.FIELD_START){if(""!==n){this.lastEventId=o,""===r&&(r="message");var w=new p(r,{data:n.slice(1),lastEventId:o});if(this.dispatchEvent(w),"message"===r&&this.onMessage(w),this.currentState===f.a.CLOSED)return}n="",r=""}a=g===u["\r"]?v.AFTER_CR:v.FIELD_START}else a===v.FIELD_START&&(i=y,a=v.FIELD),a===v.FIELD?g===u[":"]&&(c=y+1,a=v.VALUE_START):a===v.VALUE_START&&(a=v.VALUE);else a=v.FIELD_START}this.parserState={dataBuffer:n,eventTypeBuffer:r,fieldStart:i,lastEventIdBuffer:o,state:a,textBuffer:s,valueStart:c}}},t.prototype.onFinish=function(t){var e=new c("error");t&&(e.message=t.message,e.stack=t.stack),this.dispatchEvent(e),this.onError(e)},t.prototype.close=function(){return y(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return this.currentState=f.a.CLOSED,this.onReadyStateChange(f.a.CLOSED),!this.request||this.request.isAborted?[3,2]:[4,this.request.abort()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t}();e.a=_},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"Client",(function(){return r})),t._babelPolyfill||!1===t._tcShouldPolyfill?n(296):n(209);n(297)("./web");var r=n(460).TigerConnectClient}.call(this,n(6))},function(t,e,n){"use strict";var r=(0,n(210).getGlobals)();n(211),n(221),n(237),n(240),n(244),n(247),n(250),n(254),n(257),n(260),!(window&&window.navigator.userAgent.includes("Trident/"))&&"undefined"!=typeof Promise&&"finally"in Promise.prototype||(n(291).enable(),r.Promise=n(293)),n(294),n(295)},function(t,e,n){"use strict";(function(e){t.exports={getGlobals:function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}}}).call(this,n(6))},function(t,e,n){var r=n(212);t.exports=r},function(t,e,n){n(213);var r=n(50);t.exports=r("Array","find")},function(t,e,n){"use strict";var r=n(14),i=n(133).find,o=n(136),a=n(137),s=!0,u=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){var r=n(11),i=n(129),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(68),i=n(95),o=n(98),a=n(28);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(96),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(18),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(23),i=n(26),o=n(28),a=n(69);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(68);t.exports=r("document","documentElement")},function(t,e,n){var r=n(222);t.exports=r},function(t,e,n){n(223),n(230);var r=n(30);t.exports=r.Array.from},function(t,e,n){"use strict";var r=n(224).charAt,i=n(92),o=n(225),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(96),i=n(38),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";var r=n(14),i=n(226),o=n(139),a=n(228),s=n(42),u=n(29),c=n(65),l=n(12),d=n(39),f=n(70),h=n(138),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),g=function(){return this};t.exports=function(t,e,n,l,h,m,_){i(n,e,l);var b,w,I,O=function(t){if(t===h&&C)return C;if(!v&&t in S)return S[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",T=!1,S=t.prototype,A=S[y]||S["@@iterator"]||h&&S[h],C=!v&&A||O(h),R="Array"==e&&S.entries||A;if(R&&(b=o(R.call(new t)),p!==Object.prototype&&b.next&&(d||o(b)===p||(a?a(b,p):"function"!=typeof b[y]&&u(b,y,g)),s(b,E,!0,!0),d&&(f[E]=g))),"values"==h&&A&&"values"!==A.name&&(T=!0,C=function(){return A.call(this)}),d&&!_||S[y]===C||u(S,y,C),f[e]=C,h)if(w={values:O("values"),keys:m?C:O("keys"),entries:O("entries")},_)for(I in w)(v||T||!(I in S))&&c(S,I,w[I]);else r({target:e,proto:!0,forced:v||T},w);return w}},function(t,e,n){"use strict";var r=n(138).IteratorPrototype,i=n(102),o=n(49),a=n(42),s=n(70),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,n){var r=n(18);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(28),i=n(229);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(14),i=n(231);r({target:"Array",stat:!0,forced:!n(236)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){"use strict";var r=n(99),i=n(41),o=n(232),a=n(234),s=n(40),u=n(140),c=n(235);t.exports=function(t){var e,n,l,d,f,h,p=i(t),v="function"==typeof this?this:Array,y=arguments.length,g=y>1?arguments[1]:void 0,m=void 0!==g,_=c(p),b=0;if(m&&(g=r(g,y>2?arguments[2]:void 0,2)),null==_||v==Array&&a(_))for(n=new v(e=s(p.length));e>b;b++)h=m?g(p[b],b):p[b],u(n,b,h);else for(f=(d=_.call(p)).next,n=new v;!(l=f.call(d)).done;b++)h=m?o(d,g,[l.value,b],!0):l.value,u(n,b,h);return n.length=b,n}},function(t,e,n){var r=n(28),i=n(233);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},function(t,e,n){var r=n(28);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){var r=n(12),i=n(70),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(141),i=n(70),o=n(12)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(12)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r=n(238);t.exports=r},function(t,e,n){n(239);var r=n(50);t.exports=r("Array","includes")},function(t,e,n){"use strict";var r=n(14),i=n(132).includes,o=n(136);r({target:"Array",proto:!0,forced:!n(137)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){var r=n(241);t.exports=r},function(t,e,n){n(242);var r=n(30);t.exports=r.Object.assign},function(t,e,n){var r=n(14),i=n(243);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){"use strict";var r=n(23),i=n(18),o=n(69),a=n(98),s=n(62),u=n(41),c=n(89),l=Object.assign,d=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=o(l({},e)).join("")}))?function(t,e){for(var n=u(t),i=arguments.length,l=1,d=a.f,f=s.f;i>l;)for(var h,p=c(arguments[l++]),v=d?o(p).concat(d(p)):o(p),y=v.length,g=0;y>g;)h=v[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:l},function(t,e,n){var r=n(245);t.exports=r},function(t,e,n){n(246);var r=n(30);t.exports=r.Object.entries},function(t,e,n){var r=n(14),i=n(142).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},function(t,e,n){var r=n(248);t.exports=r},function(t,e,n){n(249);var r=n(30);t.exports=r.Object.values},function(t,e,n){var r=n(14),i=n(142).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,n){var r=n(251);t.exports=r},function(t,e,n){n(252);var r=n(50);t.exports=r("String","endsWith")},function(t,e,n){"use strict";var r,i=n(14),o=n(48).f,a=n(40),s=n(104),u=n(38),c=n(105),l=n(39),d="".endsWith,f=Math.min,h=c("endsWith");i({target:"String",proto:!0,forced:!!(l||h||(r=o(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function(t){var e=String(u(this));s(t);var n=arguments.length>1?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:f(a(n),r),o=String(t);return d?d.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,n){var r=n(24),i=n(63),o=n(12)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(255);t.exports=r},function(t,e,n){n(256);var r=n(50);t.exports=r("String","includes")},function(t,e,n){"use strict";var r=n(14),i=n(104),o=n(38);r({target:"String",proto:!0,forced:!n(105)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(258);t.exports=r},function(t,e,n){n(259);var r=n(50);t.exports=r("String","startsWith")},function(t,e,n){"use strict";var r,i=n(14),o=n(48).f,a=n(40),s=n(104),u=n(38),c=n(105),l=n(39),d="".startsWith,f=Math.min,h=c("startsWith");i({target:"String",proto:!0,forced:!!(l||h||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(t){var e=String(u(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return d?d.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(261);n(286),n(287),n(288),n(289),n(290),t.exports=r},function(t,e,n){n(262),n(265),n(267),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285);var r=n(30);t.exports=r.Symbol},function(t,e,n){"use strict";var r=n(14),i=n(18),o=n(100),a=n(24),s=n(41),u=n(40),c=n(140),l=n(134),d=n(263),f=n(12),h=n(143),p=f("isConcatSpreadable"),v=h>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=d("concat"),g=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!v||!y},{concat:function(t){var e,n,r,i,o,a=s(this),d=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(g(o=-1===e?a:arguments[e])){if(f+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,f++)n in o&&c(d,f,o[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(d,f++,o)}return d.length=f,d}})},function(t,e,n){var r=n(18),i=n(12),o=n(143),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r=n(68);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(103),i=n(65),o=n(266);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r=n(103),i=n(141);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){"use strict";var r=n(14),i=n(11),o=n(68),a=n(39),s=n(23),u=n(101),c=n(135),l=n(18),d=n(15),f=n(100),h=n(24),p=n(28),v=n(41),y=n(37),g=n(64),m=n(49),_=n(102),b=n(69),w=n(95),I=n(268),O=n(98),E=n(48),T=n(26),S=n(62),A=n(29),C=n(65),R=n(93),P=n(66),j=n(67),x=n(94),M=n(12),k=n(144),N=n(8),z=n(42),D=n(92),U=n(133).forEach,L=P("hidden"),F=M("toPrimitive"),B=D.set,q=D.getterFor("Symbol"),V=Object.prototype,G=i.Symbol,H=o("JSON","stringify"),W=E.f,Y=T.f,K=I.f,$=S.f,X=R("symbols"),Q=R("op-symbols"),Z=R("string-to-symbol-registry"),J=R("symbol-to-string-registry"),tt=R("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=s&&l((function(){return 7!=_(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=W(V,e);r&&delete V[e],Y(t,e,n),r&&t!==V&&Y(V,e,r)}:Y,it=function(t,e){var n=X[t]=_(G.prototype);return B(n,{type:"Symbol",tag:t,description:e}),s||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},at=function(t,e,n){t===V&&at(Q,e,n),p(t);var r=g(e,!0);return p(n),d(X,r)?(n.enumerable?(d(t,L)&&t[L][r]&&(t[L][r]=!1),n=_(n,{enumerable:m(0,!1)})):(d(t,L)||Y(t,L,m(1,{})),t[L][r]=!0),rt(t,r,n)):Y(t,r,n)},st=function(t,e){p(t);var n=y(e),r=b(n).concat(dt(n));return U(r,(function(e){s&&!ut.call(n,e)||at(t,e,n[e])})),t},ut=function(t){var e=g(t,!0),n=$.call(this,e);return!(this===V&&d(X,e)&&!d(Q,e))&&(!(n||!d(this,e)||!d(X,e)||d(this,L)&&this[L][e])||n)},ct=function(t,e){var n=y(t),r=g(e,!0);if(n!==V||!d(X,r)||d(Q,r)){var i=W(n,r);return!i||!d(X,r)||d(n,L)&&n[L][r]||(i.enumerable=!0),i}},lt=function(t){var e=K(y(t)),n=[];return U(e,(function(t){d(X,t)||d(j,t)||n.push(t)})),n},dt=function(t){var e=t===V,n=K(e?Q:y(t)),r=[];return U(n,(function(t){!d(X,t)||e&&!d(V,t)||r.push(X[t])})),r};(u||(C((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=x(t),n=function(t){this===V&&n.call(Q,t),d(this,L)&&d(this[L],e)&&(this[L][e]=!1),rt(this,e,m(1,t))};return s&&nt&&rt(V,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return q(this).tag})),C(G,"withoutSetter",(function(t){return it(x(t),t)})),S.f=ut,T.f=at,E.f=ct,w.f=I.f=lt,O.f=dt,k.f=function(t){return it(M(t),t)},s&&(Y(G.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||C(V,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),U(b(tt),(function(t){N(t)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=String(t);if(d(Z,e))return Z[e];var n=G(e);return Z[e]=n,J[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(d(J,t))return J[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(t,e){return void 0===e?_(t):st(_(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(t){return O.f(v(t))}}),H)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var t=G();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(h(e)||void 0!==t)&&!ot(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,H.apply(null,i)}});G.prototype[F]||A(G.prototype,F,G.prototype.valueOf),z(G,"Symbol"),j[L]=!0},function(t,e,n){var r=n(37),i=n(95).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){n(8)("asyncIterator")},function(t,e,n){"use strict";var r=n(14),i=n(23),o=n(11),a=n(15),s=n(24),u=n(26).f,c=n(130),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};c(f,l);var h=f.prototype=l.prototype;h.constructor=f;var p=h.toString,v="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(d,t))return"";var n=v?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(t,e,n){n(8)("hasInstance")},function(t,e,n){n(8)("isConcatSpreadable")},function(t,e,n){n(8)("iterator")},function(t,e,n){n(8)("match")},function(t,e,n){n(8)("matchAll")},function(t,e,n){n(8)("replace")},function(t,e,n){n(8)("search")},function(t,e,n){n(8)("species")},function(t,e,n){n(8)("split")},function(t,e,n){n(8)("toPrimitive")},function(t,e,n){n(8)("toStringTag")},function(t,e,n){n(8)("unscopables")},function(t,e,n){var r=n(11);n(42)(r.JSON,"JSON",!0)},function(t,e,n){n(42)(Math,"Math",!0)},function(t,e,n){var r=n(14),i=n(11),o=n(42);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},function(t,e,n){n(8)("asyncDispose")},function(t,e,n){n(8)("dispose")},function(t,e,n){n(8)("observable")},function(t,e,n){n(8)("patternMatch")},function(t,e,n){n(8)("replaceAll")},function(t,e,n){"use strict";var r=n(145),i=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,r._Y=null,r._Z=null}function s(t,e){return e.some((function(e){return t instanceof e}))}e.disable=a,e.enable=function(t){t=t||{},o&&a();o=!0;var e=0,n=0,u={};function c(e){(t.allRejections||s(u[e].error,t.whitelist||i))&&(u[e].displayId=n++,t.onUnhandled?(u[e].logged=!0,t.onUnhandled(u[e].displayId,u[e].error)):(u[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach((function(t){console.warn("  "+t)}))}(u[e].displayId,u[e].error)))}r._Y=function(e){2===e._V&&u[e._1]&&(u[e._1].logged?function(e){u[e].logged&&(t.onHandled?t.onHandled(u[e].displayId,u[e].error):u[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[e].displayId+".")))}(e._1):clearTimeout(u[e._1].timeout),delete u[e._1])},r._Z=function(t,n){0===t._U&&(t._1=e++,u[t._1]={displayId:null,error:n,timeout:setTimeout(c.bind(null,t._1),s(n,i)?100:2e3),logged:!1})}}},function(t,e,n){"use strict";(function(e){function n(t){i.length||(r(),!0),i[i.length]=t}t.exports=n;var r,i=[],o=0;function a(){for(;o<i.length;){var t=o;if(o+=1,i[t].call(),o>1024){for(var e=0,n=i.length-o;e<n;e++)i[e]=i[e+o];i.length-=o,o=0}}i.length=0,o=0,!1}var s,u,c,l=void 0!==e?e:self,d=l.MutationObserver||l.WebKitMutationObserver;function f(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof d?(s=1,u=new d(a),c=document.createTextNode(""),u.observe(c,{characterData:!0}),r=function(){s=-s,c.data=s}):r=f(a),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(this,n(6))},function(t,e,n){"use strict";var r=n(145);t.exports=r;var i=l(!0),o=l(!1),a=l(null),s=l(void 0),u=l(0),c=l("");function l(t){var e=new r(r._0);return e._V=1,e._W=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return s;if(!0===t)return i;if(!1===t)return o;if(0===t)return u;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r((function(e,n){n(t)}))}return l(t)};var d=function(t){return"function"==typeof Array.from?(d=Array.from,Array.from(t)):(d=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};r.all=function(t){var e=d(t);return new r((function(t,n){if(0===e.length)return t([]);var i=e.length;function o(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?o(a,s._W):(2===s._V&&n(s._W),void s.then((function(t){o(a,t)}),n))}var u=s.then;if("function"==typeof u)return void new r(u.bind(s)).then((function(t){o(a,t)}),n)}e[a]=s,0==--i&&t(e)}for(var a=0;a<e.length;a++)o(a,e[a])}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){d(t).forEach((function(t){r.resolve(t).then(e,n)}))}))},r.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){(function(t){var e;e=function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}var l=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r]===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(e,t)}))},r=this.listeners[t.type],i=0,o=r.length;i<o;i++)n(r[i]);return!t.defaultPrevented}}}]),t}(),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(s,t);var n=u(s);function s(){var t;return e(this,s),(t=n.call(this)).listeners||l.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return r(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(i(s.prototype),"dispatchEvent",this).call(this,t)}}]),s}(l),f=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return r(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=f,t.AbortSignal=d)}("undefined"!=typeof self?self:t)},"function"==typeof define&&define.amd?define(e):e()}).call(this,n(6))},function(t,e,n){"use strict";!function(t){!function(e){var n={};if(n.searchParams="URLSearchParams"in t,n.iterable="Symbol"in t&&"iterator"in Symbol,n.blob="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),n.formData="FormData"in t,n.arrayBuffer="ArrayBuffer"in t,n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function d(t){var e=new FileReader,n=l(e);return e.readAsArrayBuffer(t),n}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:n.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():n.arrayBuffer&&n.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,n,r=c(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=l(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=o(t),e=a(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=a(e)},u.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},u.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),s(t)},u.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),s(t)},u.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),s(t)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var n,r,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),p.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},h.call(v.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];g.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(t,r){return new Promise((function(i,o){var a=new v(t,r);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;i(new g(r,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}_.polyfill=!0,t.fetch||(t.fetch=_,t.Headers=u,t.Request=v,t.Response=g),e.Headers=u,e.Request=v,e.Response=g,e.fetch=_}({})}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";if(!("find"in Array.prototype))throw new Error("Missing polyfill for Array.find");if(!("from"in Array))throw new Error("Missing polyfill for Array.from");if(!("includes"in Array.prototype))throw new Error("Missing polyfill for Array.includes");if(!("assign"in Object))throw new Error("Missing polyfill for Object.assign");if(!("entries"in Object))throw new Error("Missing polyfill for Object.entries");if(!("values"in Object))throw new Error("Missing polyfill for Object.values");if(!("endsWith"in String.prototype))throw new Error("Missing polyfill for String.endsWith");if(!("includes"in String.prototype))throw new Error("Missing polyfill for String.includes");if("undefined"==typeof Symbol)throw new Error("Missing polyfill for Symbol");if("undefined"==typeof Promise)throw new Error("Missing polyfill for Promise");if(!("finally"in Promise.prototype))throw new Error("Missing polyfill for Promise.finally");if("undefined"==typeof AbortController)throw new Error("Missing polyfill for AbortController");if("undefined"==typeof fetch)throw new Error("Missing polyfill for fetch");if("undefined"==typeof Headers)throw new Error("Missing polyfill for Headers (part of fetch polyfill)");if("undefined"==typeof Request)throw new Error("Missing polyfill for Request (part of fetch polyfill)");if("undefined"==typeof Response)throw new Error("Missing polyfill for Response (part of fetch polyfill)")},function(t,e,n){var r={"./node":146,"./node.ts":146,"./web":147,"./web.ts":147};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=297},function(t,e,n){(function(t){var r=n(299),i=n(150),o=n(311),a=n(312),s=n(313),u=e;u.request=function(e,n){e="string"==typeof e?s.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||i,u=e.hostname||e.host,c=e.port,l=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(c?":"+c:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var d=new r(e);return n&&d.on("response",n),d},u.get=function(t,e){var n=u.request(t,e);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(6))},function(t,e,n){(function(e,r,i){var o=n(149),a=n(33),s=n(150),u=n(151),c=n(310),l=s.IncomingMessage,d=s.readyStates;var f=t.exports=function(t){var n,r=this;u.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){r.setHeader(e,t.headers[e])}));var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}(n,i),r._fetchTimer=null,r.on("finish",(function(){r._onFinish()}))};a(f,u.Writable),f.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===h.indexOf(n)&&(this._headers[n]={name:t,value:e})},f.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},f.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},f.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,a=t._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=o.arraybuffer?c(e.concat(t._body)):o.blobConstructor?new r.Blob(t._body.map((function(t){return c(t)})),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var u=[];if(Object.keys(a).forEach((function(t){var e=a[t].name,n=a[t].value;Array.isArray(n)?n.forEach((function(t){u.push([e,t])})):u.push([e,n])})),"fetch"===t._mode){var l=null;if(o.abortController){var f=new AbortController;l=f.signal,t._fetchAbortController=f,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:l}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var h=t._xhr=new r.XMLHttpRequest;try{h.open(t._opts.method,t._opts.url,!0)}catch(e){return void i.nextTick((function(){t.emit("error",e)}))}"responseType"in h&&(h.responseType=t._mode.split(":")[0]),"withCredentials"in h&&(h.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in h&&h.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(h.timeout=n.requestTimeout,h.ontimeout=function(){t.emit("requestTimeout")}),u.forEach((function(t){h.setRequestHeader(t[0],t[1])})),t._response=null,h.onreadystatechange=function(){switch(h.readyState){case d.LOADING:case d.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(h.onprogress=function(){t._onXHRProgress()}),h.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{h.send(s)}catch(e){return void i.nextTick((function(){t.emit("error",e)}))}}}},f.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},f.prototype._connect=function(){var t=this;t._destroyed||(t._response=new l(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},f.prototype._write=function(t,e,n){this._body.push(t),n()},f.prototype.abort=f.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},f.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),u.Writable.prototype.end.call(this,t,e,n)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(31).Buffer,n(6),n(32))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(e*u-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+h]=255&a,h+=p,a/=256,c-=8);t[n+h-p]|=128*v}},function(t,e){},function(t,e,n){"use strict";var r=n(106).Buffer,i=n(304);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,n=o,i=s,e.copy(n,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(306),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=h}function h(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(6),n(32))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(6))},function(t,e,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(31),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=o;var r=n(157),i=Object.create(n(51));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(33),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(31).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){"use strict";var r=n(314),i=n(315);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(316);function _(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var _=t=c.join(s);if(_=_.trim(),!n&&1===t.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(_);if(w){var I=(w=w[0]).toLowerCase();this.protocol=I,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===_.substr(0,2);!O||w&&y[w]||(_=_.substr(2),this.slashes=!0)}if(!y[w]&&(O||w&&!g[w])){for(var E,T,S=-1,A=0;A<f.length;A++){-1!==(C=_.indexOf(f[A]))&&(-1===S||C<S)&&(S=C)}-1!==(T=-1===S?_.lastIndexOf("@"):_.lastIndexOf("@",S))&&(E=_.slice(0,T),_=_.slice(T+1),this.auth=decodeURIComponent(E)),S=-1;for(A=0;A<d.length;A++){var C;-1!==(C=_.indexOf(d[A]))&&(-1===S||C<S)&&(S=C)}-1===S&&(S=_.length),this.host=_.slice(0,S),_=_.slice(S),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var P=this.hostname.split(/\./),j=(A=0,P.length);A<j;A++){var x=P[A];if(x&&!x.match(h)){for(var M="",k=0,N=x.length;k<N;k++)x.charCodeAt(k)>127?M+="x":M+=x[k];if(!M.match(h)){var z=P.slice(0,A),D=P.slice(A+1),U=x.match(p);U&&(z.push(U[1]),D.unshift(U[2])),D.length&&(_="/"+D.join(".")+_),this.hostname=z.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var L=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+L,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!v[I])for(A=0,j=l.length;A<j;A++){var B=l[A];if(-1!==_.indexOf(B)){var q=encodeURIComponent(B);q===B&&(q=escape(B)),_=_.split(B).join(q)}}var V=_.indexOf("#");-1!==V&&(this.hash=_.substr(V),_=_.slice(0,V));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),e&&(this.query=m.parse(this.query)),_=_.slice(0,G)):e&&(this.search="",this.query={}),_&&(this.pathname=_),g[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var H=this.search||"";this.path=L+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var d=Object.keys(t),f=0;f<d.length;f++){var h=d[f];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||n.host&&t.pathname,I=w,O=n.pathname&&n.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===O[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=p;else if(p.length)O||(O=[]),O.pop(),O=O.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=O.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=O.slice(-1)[0],S=(n.host||t.host||O.length>1)&&("."===T||".."===T)||""===T,A=0,C=O.length;C>=0;C--)"."===(T=O[C])?O.splice(C,1):".."===T?(O.splice(C,1),A++):A&&(O.splice(C,1),A--);if(!w&&!I)for(;A--;A)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),S&&"/"!==O.join("/").substr(-1)&&O.push("");var R,P=""===O[0]||O[0]&&"/"===O[0].charAt(0);E&&(n.hostname=n.host=P?"":O.length?O.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift()));return(w=w||n.host&&O.length)&&!P&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,n){!function(r){var i=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,u,c=2147483647,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function y(t){throw new RangeError(h[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(f,".")).split("."),e).join(".")}function _(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=v(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function O(t){var e,n,r,i,o,a,s,u,l,d,f,h=[],v=t.length,g=0,m=128,_=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),h.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,a=1,s=36;i>=v&&y("invalid-input"),((u=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>p((c-g)/a))&&y("overflow"),g+=u*a,!(u<(l=s<=_?1:s>=_+26?26:s-_));s+=36)a>p(c/(d=36-l))&&y("overflow"),a*=d;_=I(g-o,e=h.length+1,0==o),p(g/e)>c-m&&y("overflow"),m+=p(g/e),g%=e,h.splice(g++,0,m)}return b(h)}function E(t){var e,n,r,i,o,a,s,u,l,d,f,h,g,m,b,O=[];for(h=(t=_(t)).length,e=128,n=0,o=72,a=0;a<h;++a)(f=t[a])<128&&O.push(v(f));for(r=i=O.length,i&&O.push("-");r<h;){for(s=c,a=0;a<h;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>p((c-n)/(g=r+1))&&y("overflow"),n+=(s-e)*g,e=s,a=0;a<h;++a)if((f=t[a])<e&&++n>c&&y("overflow"),f==e){for(u=n,l=36;!(u<(d=l<=o?1:l>=o+26?26:l-o));l+=36)b=u-d,m=36-d,O.push(v(w(d+b%m,0))),u=p(b/m);O.push(v(w(u,0))),o=I(n,g,r==i),n=0,++r}++n,++e}return O.join("")}if(s={version:"1.4.1",ucs2:{decode:_,encode:b},decode:O,encode:E,toASCII:function(t){return m(t,(function(t){return d.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return m(t,(function(t){return l.test(t)?O(t.slice(4).toLowerCase()):t}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return s}));else if(i&&o)if(t.exports==i)o.exports=s;else for(u in s)s.hasOwnProperty(u)&&(i[u]=s[u]);else r.punycode=s}(this)}).call(this,n(72)(t),n(6))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(317),e.encode=e.stringify=n(318)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,f,h,p,v=t[l].replace(s,"%20"),y=v.indexOf(n);y>=0?(d=v.substr(0,y),f=v.substr(y+1)):(d=v,f=""),h=decodeURIComponent(d),p=decodeURIComponent(f),r(a,h)?i(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){(function(e){(function(){var n,r,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},r=e.hrtime,o=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),s=1e9*e.uptime(),a=o-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(32))},function(t,e,n){var r,i,o=n(158),a=n(159),s=0,u=0;t.exports=function(t,e,n){var c=e&&n||0,l=e||[],d=(t=t||{}).node||r,f=void 0!==t.clockseq?t.clockseq:i;if(null==d||null==f){var h=o();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=i=16383&(h[6]<<8|h[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:u+1,y=p-s+(v-u)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||p>s)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=v,i=f;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var m=p/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var _=0;_<6;++_)l[c+_]=d[_];return e||a(l)}},function(t,e,n){var r=n(158),i=n(159);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||i(a)}},function(t,e,n){var r=n(52),i=n(347),o=n(348);t.exports=function(t,e){return o(t,i(r(e)))}},function(t,e,n){var r=n(324),i=n(333),o=n(175);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(162),i=n(169);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var c=n[a];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var l=(c=n[a])[0],d=t[l],f=c[1];if(u&&c[2]){if(void 0===d&&!(l in t))return!1}else{var h=new r;if(o)var p=o(d,f,l,t,e,h);if(!(void 0===p?i(f,d,3,o,h):p))return!1}}return!0}},function(t,e,n){var r=n(162),i=n(326),o=n(328),a=n(329),s=n(172),u=n(19),c=n(331),l=n(332),d="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,h,p,v){var y=u(t),g=u(e),m=y?"[object Array]":s(t),_=g?"[object Array]":s(e),b=(m="[object Arguments]"==m?d:m)==d,w=(_="[object Arguments]"==_?d:_)==d,I=m==_;if(I&&c(t)){if(!c(e))return!1;y=!0,b=!1}if(I&&!b)return v||(v=new r),y||l(t)?i(t,e,n,h,p,v):o(t,e,m,n,h,p,v);if(!(1&n)){var O=b&&f.call(t,"__wrapped__"),E=w&&f.call(e,"__wrapped__");if(O||E){var T=O?t.value():t,S=E?e.value():e;return v||(v=new r),p(T,S,n,h,v)}}return!!I&&(v||(v=new r),a(t,e,n,h,p,v))}},function(t,e,n){var r=n(107),i=n(327),o=n(108);t.exports=function(t,e,n,a,s,u){var c=1&n,l=t.length,d=e.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(t),h=u.get(e);if(f&&h)return f==e&&h==t;var p=-1,v=!0,y=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var g=t[p],m=e[p];if(a)var _=c?a(m,g,p,e,t,u):a(g,m,p,t,e,u);if(void 0!==_){if(_)continue;v=!1;break}if(y){if(!i(e,(function(t,e){if(!o(y,e)&&(g===t||s(g,t,n,a,u)))return y.push(e)}))){v=!1;break}}else if(g!==m&&!s(g,m,n,a,u)){v=!1;break}}return u.delete(t),u.delete(e),v}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(330),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var d=l;d--;){var f=c[d];if(!(u?f in e:i.call(e,f)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var v=!0;s.set(t,e),s.set(e,t);for(var y=u;++d<l;){var g=t[f=c[d]],m=e[f];if(o)var _=u?o(m,g,f,e,t,s):o(g,m,f,t,e,s);if(!(void 0===_?g===m||a(g,m,n,o,s):_)){v=!1;break}y||(y="constructor"==f)}if(v&&!y){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(171)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(){return!1}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(174),i=n(53);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(169),i=n(22),o=n(341),a=n(111),s=n(174),u=n(175),c=n(54);t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(337),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(338);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(339);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(163),i=n(164),o=n(166),a=n(167),s=n(168);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(342),i=n(343);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(74),i=n(176),o=n(19),a=n(177),s=n(178),u=n(54);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,d=!1;++c<l;){var f=u(e[c]);if(!(d=null!=t&&n(t,f)))break;t=t[f]}return d||++c!=l?d:!!(l=null==t?0:t.length)&&s(l)&&a(f,l)&&(o(t)||i(t))}},function(t,e,n){var r=n(345),i=n(346),o=n(111),a=n(54);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(110);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e,n){var r=n(55),i=n(52),o=n(349),a=n(354);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),(function(t){return[t]}));return e=i(e),o(t,n,(function(t,n){return e(t,n[0])}))}},function(t,e,n){var r=n(110),i=n(350),o=n(74);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var c=e[a],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},function(t,e,n){var r=n(351),i=n(74),o=n(177),a=n(109),s=n(54);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,l=(e=i(e,t)).length,d=l-1,f=t;null!=f&&++c<l;){var h=s(e[c]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(c!=d){var v=f[h];void 0===(p=u?u(v,h,f):void 0)&&(p=a(v)?v:o(e[c+1])?[]:{})}r(f,h,p),f=f[h]}return t}},function(t,e,n){var r=n(180),i=n(165),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(353),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){t.exports={default:n(356),__esModule:!0}},function(t,e,n){n(357),t.exports=n(20).Object.keys},function(t,e,n){var r=n(112),i=n(114);n(361)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){var r=n(75),i=n(115),o=n(359)(!1),a=n(117)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(115),i=n(182),o=n(360);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(116),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(44),i=n(20),o=n(80);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){t.exports=!n(46)&&!n(80)((function(){return 7!=Object.defineProperty(n(119)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(56);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports={default:n(365),__esModule:!0}},function(t,e,n){n(366),n(367),n(374),n(378),n(390),n(391),t.exports=n(20).Promise},function(t,e){},function(t,e,n){"use strict";var r=n(368)(!0);n(187)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(116),i=n(113);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){t.exports=n(45)},function(t,e,n){"use strict";var r=n(371),i=n(186),o=n(120),a={};n(45)(a,n(21)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(34),i=n(372),o=n(185),a=n(117)("IE_PROTO"),s=function(){},u=function(){var t,e=n(119)("iframe"),r=o.length;for(e.style.display="none",n(188).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(79),i=n(34),o=n(114);t.exports=n(46)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(75),i=n(112),o=n(117)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){n(375);for(var r=n(17),i=n(45),o=n(57),a=n(21)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],d=l&&l.prototype;d&&!d[a]&&i(d,a,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(376),i=n(377),o=n(57),a=n(115);t.exports=n(187)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,i,o,a,s=n(118),u=n(17),c=n(77),l=n(189),d=n(44),f=n(56),h=n(78),p=n(379),v=n(380),y=n(190),g=n(191).set,m=n(385)(),_=n(121),b=n(192),w=n(386),I=n(193),O=u.TypeError,E=u.process,T=E&&E.versions,S=T&&T.v8||"",A=u.Promise,C="process"==l(E),R=function(){},P=i=_.f,j=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(21)("species")]=function(t){t(R,R)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==S.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),x=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&z(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(O("Promise-chain cycle")):(o=x(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&k(t)}))}},k=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=N(t);if(o&&(e=b((function(){C?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=C||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},z=function(t){g.call(u,(function(){var e;C?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw O("Promise can't be resolved itself");(e=x(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,c(U,r,1),c(D,r,1))}catch(t){D.call(r,t)}})):(n._v=t,n._s=1,M(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};j||(A=function(t){p(this,A,"Promise","_h"),h(t),r.call(this);try{t(c(U,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(387)(A.prototype,{then:function(t,e){var n=P(y(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(D,t,1)},_.f=P=function(t){return t===A||t===a?new o(t):i(t)}),d(d.G+d.W+d.F*!j,{Promise:A}),n(120)(A,"Promise"),n(388)("Promise"),a=n(20).Promise,d(d.S+d.F*!j,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(s||!j),"Promise",{resolve:function(t){return I(s&&this===a?A:this,t)}}),d(d.S+d.F*!(j&&n(389)((function(t){A.all(t).catch(R)}))),"Promise",{all:function(t){var e=this,n=P(e),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;v(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,i=b((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(77),i=n(381),o=n(382),a=n(34),s=n(182),u=n(383),c={},l={};(e=t.exports=function(t,e,n,d,f){var h,p,v,y,g=f?function(){return t}:u(t),m=r(n,d,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(h=s(t.length);h>_;_++)if((y=e?m(a(p=t[_])[0],p[1]):m(t[_]))===c||y===l)return y}else for(v=g.call(t);!(p=v.next()).done;)if((y=i(v,m,p.value,e))===c||y===l)return y}).BREAK=c,e.RETURN=l},function(t,e,n){var r=n(34);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(57),i=n(21)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(189),i=n(21)("iterator"),o=n(57);t.exports=n(20).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(17),i=n(191).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(76)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var d=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(17).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(17),i=n(20),o=n(79),a=n(46),s=n(21)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(21)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(44),i=n(20),o=n(17),a=n(190),s=n(193);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var r=n(44),i=n(121),o=n(192);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(393),o=(r=i)&&r.__esModule?r:{default:r};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports={default:n(394),__esModule:!0}},function(t,e,n){n(395),t.exports=n(20).Object.assign},function(t,e,n){var r=n(44);r(r.S+r.F,"Object",{assign:n(396)})},function(t,e,n){"use strict";var r=n(46),i=n(114),o=n(397),a=n(398),s=n(112),u=n(181),c=Object.assign;t.exports=!c||n(80)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=s(t),c=arguments.length,l=1,d=o.f,f=a.f;c>l;)for(var h,p=u(arguments[l++]),v=d?i(p).concat(d(p)):i(p),y=v.length,g=0;y>g;)h=v[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:c},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports={default:n(400),__esModule:!0}},function(t,e,n){var r=n(20),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=i,i.default=i,i.stable=a,i.stableStringify=a;var n=[],r=[];function i(t,e,i){var o;for(!function t(e,i,o,a){var s;if("object"==typeof e&&null!==e){for(s=0;s<o.length;s++)if(o[s]===e){var u=Object.getOwnPropertyDescriptor(a,i);return void(void 0!==u.get?u.configurable?(Object.defineProperty(a,i,{value:"[Circular]"}),n.push([a,i,e,u])):r.push([e,i]):(a[i]="[Circular]",n.push([a,i,e])))}if(o.push(e),Array.isArray(e))for(s=0;s<e.length;s++)t(e[s],s,o,e);else{var c=Object.keys(e);for(s=0;s<c.length;s++){var l=c[s];t(e[l],l,o,e)}}o.pop()}}(t,"",[],void 0),o=0===r.length?JSON.stringify(t,e,i):JSON.stringify(t,s(e),i);0!==n.length;){var a=n.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}return o}function o(t,e){return t<e?-1:t>e?1:0}function a(t,e,i){var a,u=function t(e,i,a,s){var u;if("object"==typeof e&&null!==e){for(u=0;u<a.length;u++)if(a[u]===e){var c=Object.getOwnPropertyDescriptor(s,i);return void(void 0!==c.get?c.configurable?(Object.defineProperty(s,i,{value:"[Circular]"}),n.push([s,i,e,c])):r.push([e,i]):(s[i]="[Circular]",n.push([s,i,e])))}if("function"==typeof e.toJSON)return;if(a.push(e),Array.isArray(e))for(u=0;u<e.length;u++)t(e[u],u,a,e);else{var l={},d=Object.keys(e).sort(o);for(u=0;u<d.length;u++){var f=d[u];t(e[f],f,a,e),l[f]=e[f]}if(void 0===s)return l;n.push([s,i,e]),s[i]=l}a.pop()}}(t,"",[],void 0)||t;for(a=0===r.length?JSON.stringify(u,e,i):JSON.stringify(u,s(e),i);0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}return a}function s(t){return t=void 0!==t?t:function(t,e){return e},function(e,n){if(r.length>0)for(var i=0;i<r.length;i++){var o=r[i];if(o[1]===e&&o[0]===n){n="[Circular]",r.splice(i,1);break}}return t.call(this,e,n)}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(194);function o(t){if(t)return function(t){for(var e in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,e)&&(t[e]=o.prototype[e]);return t}(t)}t.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},o.prototype.parse=function(t){return this._parser=t,this},o.prototype.responseType=function(t){return this._responseType=t,this},o.prototype.serialize=function(t){return this._serializer=t,this},o.prototype.timeout=function(t){if(!t||"object"!==r(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},o.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var a=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!==e.status)return!0;if(t){if(t.code&&a.includes(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},o.prototype.then=function(t,e){var n=this;if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(t,e){r.on("abort",(function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)e(n.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=n.status,t.method=n.method,t.url=n.url,e(t)}})),r.end((function(n,r){n?e(n):t(r)}))}))}return this._fullfilledPromise.then(t,e)},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.use=function(t){return t(this),this},o.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},o.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},o.prototype.get=function(t){return this._header[t.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(t,e){if(i(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},o.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},o.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(i(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.field(t,e[r]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},o.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},o.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(r("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},o.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},o.prototype.redirects=function(t){return this._maxRedirects=t,this},o.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(t){var e=i(t),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&i(this._data))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this._data[r]=t[r]);else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||n||this.type("json"),this},o.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},o.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.slice(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,e)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.warn("Unsupported")},o.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error("".concat(t+e,"ms exceeded"));r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.timedoutError=r,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(t,e,n){"use strict";var r=n(405);function i(t){if(t)return function(t){for(var e in i.prototype)Object.prototype.hasOwnProperty.call(i.prototype,e)&&(t[e]=i.prototype[e]);return t}(t)}t.exports=i,i.prototype.get=function(t){return this.header[t.toLowerCase()]},i.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=r.type(e);var n=r.params(e);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(this[i]=n[i]);this.links={};try{t.link&&(this.links=r.parseLinks(t.link))}catch(t){}},i.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},function(t,e,n){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce((function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t}),{})},e.parseLinks=function(t){return t.split(/ *, */).reduce((function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t}),{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(t){o.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._defaults.push({fn:t,args:n}),this}})),o.prototype._setDefaults=function(t){this._defaults.forEach((function(e){t[e.fn].apply(t,r(e.args))}))},t.exports=o},function(t,e,n){
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},u=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,d){d||(e=c(e));var f,h=this,p="application/octet-stream"===e.type,v=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){s(t)}}}(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,i)return f=n().createObjectURL(e),void setTimeout((function(){var t,e;r.href=f,r.download=l,t=r,e=new MouseEvent("click"),t.dispatchEvent(e),v(),u(f),h.readyState=h.DONE}));!function(){if((a||p&&o)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,h.readyState=h.DONE,v()},r.readAsDataURL(e),void(h.readyState=h.INIT)}(f||(f=n().createObjectURL(e)),p)?t.location.href=f:t.open(f,"_blank")||(t.location.href=f);h.readyState=h.DONE,v(),u(f)}()},d=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",(function(){return r}))},function(t,e,n){var r=n(409);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(410),i=n(411);t.exports=function t(e,n,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(412),i=n(176),o=n(19),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(413).Symbol;t.exports=r},function(t,e,n){var r=n(414),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(6))},function(t,e,n){var r=n(416);t.exports=function(t){return(null==t?0:t.length)?r(t,0,-1):[]}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(55),i=n(52),o=n(418),a=n(19);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(81),i=n(122);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e,n){var r=n(420),i=n(53);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(421)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(122);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(424),i=n(109);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(426);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(107),i=n(195),o=n(196),a=n(108),s=n(427),u=n(428);t.exports=function(t,e,n){var c=-1,l=i,d=t.length,f=!0,h=[],p=h;if(n)f=!1,l=o;else if(d>=200){var v=e?null:s(t);if(v)return u(v);f=!1,l=a,p=new r}else p=e?[]:h;t:for(;++c<d;){var y=t[c],g=e?e(y):y;if(y=n||0!==y?y:0,f&&g==g){for(var m=p.length;m--;)if(p[m]===g)continue t;e&&p.push(g),h.push(y)}else l(p,g,n)||(p!==h&&p.push(g),h.push(y))}return h}},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(430),i=n(432),o=n(436),a=i((function(t,e){return o(t)?r(t,e):[]}));t.exports=a},function(t,e,n){var r=n(107),i=n(195),o=n(196),a=n(55),s=n(431),u=n(108);t.exports=function(t,e,n,c){var l=-1,d=i,f=!0,h=t.length,p=[],v=e.length;if(!h)return p;n&&(e=a(e,s(n))),c?(d=o,f=!1):e.length>=200&&(d=u,f=!1,e=new r(e));t:for(;++l<h;){var y=t[l],g=null==n?y:n(y);if(y=c||0!==y?y:0,f&&g==g){for(var m=v;m--;)if(e[m]===g)continue t;p.push(y)}else d(e,g,c)||p.push(y)}return p}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(179),i=n(433),o=n(435);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e,n){var r=n(434),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(122),i=n(173);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){!function(e){var r=-1,i=function(t){return t.every=function(e,n,i){t._time(),i||(i=n,n=null);var o=r+=1;return t._timers[o]={visible:e,hidden:n,callback:i},t._run(o,!1),t.isSupported()&&t._listen(),o},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change((function(){t._stopRun(),t._wasHidden=t.hidden()})))},t._run=function(n,r){var i,o=t._timers[n];if(t.hidden()){if(null===o.hidden)return;i=o.hidden}else i=o.visible;var a=function(){o.last=new Date,o.callback.call(e)};if(r){var s=new Date-o.last;i>s?o.delay=setTimeout((function(){o.id=setInterval(a,i),a()}),i-s):(o.id=setInterval(a,i),a())}else o.id=setInterval(a,i)},t._stop=function(e){var n=t._timers[e];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},t._stopRun=function(e){var n=t.hidden(),r=t._wasHidden;if(n&&!r||!n&&r)for(var i in t._timers)t._stop(i),t._run(i,!n)},t};t.exports?t.exports=i(n(198)):i(e.Visibility||n(198))}(window)},function(t,e,n){var r=n(439),i=n(440),o=n(441),a=/^\d+$/,s=Object.prototype.hasOwnProperty,u=r(Object,"keys");var c,l=(c="length",function(t){return null==t?void 0:t[c]});function d(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||a.test(t)?+t:-1)>-1&&t%1==0&&t<e}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function h(t){for(var e=function(t){if(null==t)return[];p(t)||(t=Object(t));var e=t.length;e=e&&f(e)&&(o(t)||i(t))&&e||0;var n=t.constructor,r=-1,a="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;for(;++r<e;)u[r]=r+"";for(var l in t)c&&d(l,e)||"constructor"==l&&(a||!s.call(t,l))||u.push(l);return u}(t),n=e.length,r=n&&t.length,a=!!r&&f(r)&&(o(t)||i(t)),u=-1,c=[];++u<n;){var l=e[u];(a&&d(l,r)||s.call(t,l))&&c.push(l)}return c}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var v=u?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&(null!=(e=t)&&f(l(e)))?h(t):p(t)?u(t):[]}:h;t.exports=v},function(t,e){var n=/^\[object .+?Constructor\]$/;var r=Object.prototype,i=Function.prototype.toString,o=r.hasOwnProperty,a=r.toString,s=RegExp("^"+i.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t,e){var r=null==t?void 0:t[e];return function(t){if(null==t)return!1;if(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==a.call(t)}(t))return s.test(i.call(t));return function(t){return!!t&&"object"==typeof t}(t)&&n.test(t)}(r)?r:void 0}},function(t,e){var n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=n.propertyIsEnumerable;t.exports=function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?i.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}(t)}(t)&&r.call(t,"callee")&&(!o.call(t,"callee")||"[object Arguments]"==i.call(t))}},function(t,e){var n=/^\[object .+?Constructor\]$/;function r(t){return!!t&&"object"==typeof t}var i,o,a,s=Object.prototype,u=Function.prototype.toString,c=s.hasOwnProperty,l=s.toString,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),f=(o="isArray",function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==l.call(t)}(t)?d.test(u.call(t)):r(t)&&n.test(t))}(a=null==(i=Array)?void 0:i[o])?a:void 0);var h=f||function(t){return r(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&"[object Array]"==l.call(t)};t.exports=h},function(t,e,n){var r=n(443),i=n(53);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(55);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){var r=n(180),i=n(445)((function(t,e,n){r(t,n,e)}));t.exports=i},function(t,e,n){var r=n(446),i=n(447),o=n(52),a=n(19);t.exports=function(t,e){return function(n,s){var u=a(n)?r:i,c=e?e():{};return u(n,t,o(s,2),c)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(81);t.exports=function(t,e,n,i){return r(t,(function(t,r,o){e(i,t,n(t),o)})),i}},function(t,e,n){t.exports=n(449)},function(t,e,n){var r=n(450),i=n(81),o=n(451),a=n(19);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(453),i=n(454),o=n(52),a=n(19);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(81);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},function(t,e,n){var r=n(456)(n(53));t.exports=r},function(t,e,n){var r=n(457),i=n(172),o=n(458),a=n(459);t.exports=function(t){return function(e){var n=i(e);return"[object Map]"==n?o(e):"[object Set]"==n?a(e):r(e,t(e))}}},function(t,e,n){var r=n(55);t.exports=function(t,e){return r(e,(function(e){return[e,t[e]]}))}},function(t,e){t.exports=function(){return[]}},function(t,e){t.exports=function(){return[]}},function(t,e,n){"use strict";n.r(e),n.d(e,"TigerConnectClient",(function(){return Kc}));var r={};n.r(r),n.d(r,"Calls",(function(){return C})),n.d(r,"Conversations",(function(){return x})),n.d(r,"DistributionLists",(function(){return L})),n.d(r,"Entities",(function(){return W})),n.d(r,"Escalations",(function(){return J})),n.d(r,"Events",(function(){return at})),n.d(r,"Groups",(function(){return gt})),n.d(r,"Messages",(function(){return Pt})),n.d(r,"MessageTemplates",(function(){return zt})),n.d(r,"Metadata",(function(){return qt})),n.d(r,"Mute",(function(){return $t})),n.d(r,"Notifications",(function(){return Jt})),n.d(r,"Organizations",(function(){return se})),n.d(r,"Patients",(function(){return de})),n.d(r,"QRCode",(function(){return ye})),n.d(r,"Reporting",(function(){return Te})),n.d(r,"Roles",(function(){return xe})),n.d(r,"RoleTags",(function(){return De})),n.d(r,"Roster",(function(){return He})),n.d(r,"Scheduler",(function(){return Xe})),n.d(r,"ScheduledMessages",(function(){return nn})),n.d(r,"Search",(function(){return cn})),n.d(r,"Teams",(function(){return mn})),n.d(r,"Twilio",(function(){return In})),n.d(r,"TypingStatus",(function(){return Sn})),n.d(r,"UserRoles",(function(){return jn})),n.d(r,"Users",(function(){return xn.a})),n.d(r,"VirtualWaitingRoom",(function(){return Dn}));var i={};n.r(i),n.d(i,"AllowedSendersReason",(function(){return Zn})),n.d(i,"ConversationAnchorPoints",(function(){return Jn})),n.d(i,"EscalationChangeAction",(function(){return tr})),n.d(i,"EscalationStatus",(function(){return er})),n.d(i,"GroupType",(function(){return nr})),n.d(i,"MessagePriority",(function(){return rr})),n.d(i,"MessageRecipientStatus",(function(){return ar})),n.d(i,"MessageSenderStatus",(function(){return sr})),n.d(i,"MessageSubType",(function(){return ur})),n.d(i,"MessageType",(function(){return cr})),n.d(i,"Networks",(function(){return lr})),n.d(i,"PatientCareCardActionType",(function(){return dr})),n.d(i,"PatientCareCardType",(function(){return fr})),n.d(i,"PatientCareCardUIType",(function(){return hr})),n.d(i,"PresenceStatus",(function(){return pr})),n.d(i,"ProcessingActionTypes",(function(){return vr})),n.d(i,"SearchType",(function(){return yr})),n.d(i,"TypingContext",(function(){return gr})),n.d(i,"VisibilityType",(function(){return mr}));var o={};n.r(o),n.d(o,"allContentTypes",(function(){return Fr})),n.d(o,"allExtensions",(function(){return Br})),n.d(o,"getMimeEntryByContentType",(function(){return qr})),n.d(o,"getMimeEntryByExtension",(function(){return Vr}));var a={};n.r(a),n.d(a,"formatDob",(function(){return hi})),n.d(a,"secondsToDurationFormat",(function(){return pi}));var s={};n.r(s),n.d(s,"downloadFile",(function(){return gi})),n.d(s,"loadLocalFilePathWithFileReader",(function(){return mi})),n.d(s,"saveByteArray",(function(){return _i}));var u={};n.r(u),n.d(u,"Calls",(function(){return qi})),n.d(u,"Conversations",(function(){return Io})),n.d(u,"DistributionLists",(function(){return Po})),n.d(u,"Entities",(function(){return No})),n.d(u,"Escalations",(function(){return Fo})),n.d(u,"EventRouter",(function(){return Go})),n.d(u,"Events",(function(){return ia})),n.d(u,"Forums",(function(){return la})),n.d(u,"Groups",(function(){return ga})),n.d(u,"Messages",(function(){return Aa})),n.d(u,"MessageTemplates",(function(){return Ma})),n.d(u,"Metadata",(function(){return Fa})),n.d(u,"Mute",(function(){return Ya})),n.d(u,"NotificationRouter",(function(){return $a})),n.d(u,"Notifications",(function(){return es})),n.d(u,"Organizations",(function(){return ls})),n.d(u,"Patients",(function(){return gs})),n.d(u,"Presence",(function(){return ws})),n.d(u,"Products",(function(){return Ss})),n.d(u,"Roles",(function(){return ks})),n.d(u,"RoleTags",(function(){return Fs})),n.d(u,"ScheduledMessages",(function(){return Ws})),n.d(u,"Search",(function(){return pu})),n.d(u,"Teams",(function(){return _u})),n.d(u,"TypingStatus",(function(){return Au})),n.d(u,"UserRoles",(function(){return Mu})),n.d(u,"Users",(function(){return qu})),n.d(u,"VirtualWaitingRoom",(function(){return Yu}));var c={};n.r(c),n.d(c,"Call",(function(){return $u})),n.d(c,"CallLogEntry",(function(){return Xu})),n.d(c,"Conversation",(function(){return Zu})),n.d(c,"DistributionList",(function(){return Ju})),n.d(c,"EscalationExecution",(function(){return tc})),n.d(c,"EscalationExecutionChange",(function(){return ec})),n.d(c,"EscalationPolicy",(function(){return nc})),n.d(c,"Group",(function(){return rc})),n.d(c,"GroupMembersChange",(function(){return ic})),n.d(c,"Message",(function(){return oc})),n.d(c,"MessageStatusPerRecipient",(function(){return ac})),n.d(c,"MessageTemplate",(function(){return sc})),n.d(c,"Metadata",(function(){return uc})),n.d(c,"Mute",(function(){return cc})),n.d(c,"Organization",(function(){return vc})),n.d(c,"Patient",(function(){return yc})),n.d(c,"PatientContact",(function(){return gc})),n.d(c,"Product",(function(){return mc})),n.d(c,"ProductRoles",(function(){return bc})),n.d(c,"Role",(function(){return wc})),n.d(c,"RoleTag",(function(){return Ic})),n.d(c,"ScheduledMessage",(function(){return Oc})),n.d(c,"Team",(function(){return Ec})),n.d(c,"TeamRequest",(function(){return Tc})),n.d(c,"User",(function(){return ou})),n.d(c,"UserRoles",(function(){return Sc})),n.d(c,"VirtualWaitingRoom",(function(){return Ac})),n.d(c,"VirtualWaitingRoomVisit",(function(){return Cc}));var l,d=n(9),f=n.n(d),h=n(47),p=n.n(h),v=n(2),y=n.n(v),g=n(124),m=n.n(g),_=n(16),b=n.n(_),w=n(1),I=n(4),O=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},T=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},S=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.start=function(t){return T(this,void 0,void 0,(function(){var e,n,r;return S(this,(function(i){switch(i.label){case 0:return[4,this.httpClient.post("/v2/voip_call",{data:I.a.underscoreObject(t),headers:{"TT-X-Organization-Key":t.organizationId}})];case 1:return e=i.sent(),n=Object(v.get)(e,"data.disabled_participants",{}),(r=I.a.camelizeObject(e.data)).disabledParticipants=n,[2,r]}}))}))},e.prototype.end=function(t,e,n){var r=n.callId,i=n.payload,o=n.reason;return T(this,void 0,void 0,(function(){var n,a;return S(this,(function(s){switch(s.label){case 0:return n=Object(v.get)(i,"disabledParticipants",{}),(a=I.a.underscoreObject({payload:i,reason:o,callId:r})).payload.disabled_participants=n,[4,this.httpClient.post("/v2/voip_call/"+t+"/end",{data:a,headers:{"TT-X-Organization-Key":e}})];case 1:return s.sent(),[2]}}))}))},e.prototype.decline=function(t,e,n){var r=n.callId,i=n.payload;return T(this,void 0,void 0,(function(){var n,o;return S(this,(function(a){switch(a.label){case 0:return n=Object(v.get)(i,"disabledParticipants",{}),"declined",(o=I.a.underscoreObject({payload:E(E({},i),{reason:"declined",callId:r}),reason:"declined",callId:r,type:"call_ended",roomName:t})).payload.disabled_participants=n,[4,this.httpClient.post("/v2/voip_call/"+t+"/end",{data:o,headers:{"TT-X-Organization-Key":e}})];case 1:return a.sent(),[2]}}))}))},e.prototype.join=function(t,e){return T(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.get("/v2/voip_call/"+t,{headers:{"TT-X-Organization-Key":e}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.answer=function(t,e,n){var r=n.callId,i=n.payload;return T(this,void 0,void 0,(function(){var n,o;return S(this,(function(a){switch(a.label){case 0:return n=Object(v.get)(i,"disabledParticipants",{}),"answered",(o=I.a.underscoreObject({callId:r,payload:E(E({},i),{reason:"answered",callId:r}),reason:"answered",type:"call_answered",roomName:t})).payload.disabled_participants=n,[4,this.httpClient.post("/v2/voip_call/"+t+"/answer",{data:o,headers:{"TT-X-Organization-Key":e}})];case 1:return a.sent(),[2]}}))}))},e.prototype.invite=function(t,e,n){var r=n.callId,i=n.payload,o=n.recipients;return T(this,void 0,void 0,(function(){var n,a;return S(this,(function(s){switch(s.label){case 0:return n=Object(v.get)(i,"disabledParticipants",{}),(a=I.a.underscoreObject({callId:r,payload:i,recipients:o})).payload.disabled_participants=n,[4,this.httpClient.post("/v2/voip_call/"+t+"/add_participants",{data:a,headers:{"TT-X-Organization-Key":e}})];case 1:return s.sent(),[2]}}))}))},e.prototype.state=function(t,e,n){var r=n.callId,i=n.payload;return T(this,void 0,void 0,(function(){var n,o;return S(this,(function(a){switch(a.label){case 0:return n=Object(v.get)(i,"disabledParticipants",{}),(o=I.a.underscoreObject({callId:r,payload:E(E({},i),{callId:r})})).payload.disabled_participants=n,[4,this.httpClient.post("/v2/voip_call/"+t+"/state",{data:o,headers:{"TT-X-Organization-Key":e}})];case 1:return a.sent(),[2]}}))}))},e.prototype.log=function(t){var e=t.network,n=t.organizationId,r=t.page;return T(this,void 0,void 0,(function(){var t,i;return S(this,(function(o){switch(o.label){case 0:return t={network:e,size:10},r&&(t.page=r),[4,this.httpClient.get("/v2/call_log",{headers:{"TT-X-Organization-Key":n},query:t})];case 1:return i=o.sent(),[2,I.a.camelizeObject(i.data)]}}))}))},e}(w.c),C=A,R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},j=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.find=function(t){return P(this,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.get("/v5/conversation/:id",{urlParams:{id:t}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.updateConversationStatus=function(t,e,n){var r=void 0===n?{}:n,i=r.highestSortNumber,o=r.lowestSortNumber;return P(this,void 0,void 0,(function(){var n;return j(this,(function(r){switch(r.label){case 0:return n={status:e},i&&(n.highest_sort_number=i),o&&(n.lowest_sort_number=o),[4,this.httpClient.post("/v5/conversation/:id/status",{urlParams:{id:t},data:n})];case 1:return[2,r.sent().data]}}))}))},e.prototype.fetchTimeline=function(t,e,n,r){var i=r.continuation,o=r.markAsDelivered,a=void 0===o||o;return P(this,void 0,void 0,(function(){return j(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.post("/v5/conversation/:id/timeline",{urlParams:{id:t},data:{anchor_point:e,continuation:i,mark_as_delivered:a,max_items:n}})];case 1:return[2,r.sent().data]}}))}))},e}(w.c),M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},N=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=w.b.VERSION_TWO,U=w.a.DISTRIBUTION_LIST_FIND,L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.batch=function(t){var e=t.ids,n=t.operation,r=t.organizationId;return N(this,void 0,void 0,(function(){var t;return z(this,(function(i){switch(i.label){case 0:return t={"TT-X-Organization-Key":r},[4,this.httpClient.patch("/v5/dist_list",{data:{ids:e,operation:n},headers:t})];case 1:return i.sent(),[2]}}))}))},e.prototype.create=function(t){var e=t.adminOnly,n=t.members,r=t.name,i=t.network,o=t.organizationId;return N(this,void 0,void 0,(function(){var t;return z(this,(function(a){switch(a.label){case 0:return t={"TT-X-Organization-Key":o},[4,this.httpClient.post("/v5/dist_list",{data:{admin_only:e,members:n,name:r,network:i},headers:t})];case 1:return[2,a.sent().data]}}))}))},e.prototype.delete=function(t,e){return N(this,void 0,void 0,(function(){var n;return z(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.del("/v5/dist_list/:id",{headers:n,urlParams:{id:t}})];case 1:return r.sent(),[2]}}))}))},e.prototype.find=function(e,n){var r=(void 0===n?{}:n).organizationId;return N(this,void 0,void 0,(function(){var n,i,o;return z(this,(function(a){switch(a.label){case 0:return n=t.prototype.getVersion.call(this,U).version,i=void 0===n?D:n,o={},r&&(o["TT-X-Organization-Key"]=r),[4,this.httpClient.get("/:version/dist_list/:id",{headers:o,urlParams:{id:e,version:i}})];case 1:return[2,a.sent().data]}}))}))},e.prototype.findMemberIds=function(e,n,r){var i=(void 0===r?{}:r).continuation;return N(this,void 0,void 0,(function(){var r,o,a,s;return z(this,(function(u){switch(u.label){case 0:return r=t.prototype.getVersion.call(this,U).version,o=void 0===r?D:r,a={"TT-X-Organization-Key":n},s="/:version/dist_list/:id/members",i&&(s+="/?continuation=:continuation"),[4,this.httpClient.get(s,{headers:a,urlParams:{continuation:i,id:e,version:o}})];case 1:return[2,u.sent().data]}}))}))},e.prototype.membersBatch=function(t){var e=t.id,n=t.members,r=t.operation,i=t.organizationId;return N(this,void 0,void 0,(function(){var t;return z(this,(function(o){switch(o.label){case 0:return t={"TT-X-Organization-Key":i},[4,this.httpClient.patch("/v5/dist_list/:id/members",{data:{members:n,operation:r},headers:t,urlParams:{id:e}})];case 1:return[2,o.sent().data]}}))}))},e.prototype.update=function(t){var e=t.adminOnly,n=t.id,r=t.name,i=t.organizationId;return N(this,void 0,void 0,(function(){var t;return z(this,(function(o){switch(o.label){case 0:return t={"TT-X-Organization-Key":i},[4,this.httpClient.put("/v5/dist_list/:id",{data:{admin_only:e,name:r},headers:t,urlParams:{id:n}})];case 1:return[2,o.sent().data]}}))}))},k([Object(w.d)()],e.prototype,"delete",null),k([Object(w.d)()],e.prototype,"find",null),k([Object(w.d)()],e.prototype,"findMemberIds",null),k([Object(w.d)()],e.prototype,"membersBatch",null),k([Object(w.d)()],e.prototype,"update",null),e}(w.c),F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},q=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},V=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},G=w.b.VERSION_TWO,H=w.a.ENTITIES_FIND_ALL,W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.findMulti=function(e){var n=e.users,r=e.metadata,i=e.organizationId;return q(this,void 0,void 0,(function(){var e,o,a,s;return V(this,(function(u){switch(u.label){case 0:return e=t.prototype.getVersion.call(this,H).version,o=void 0===e?G:e,a={"TT-X-Organization-Key":i},s={render_owner_object:"true"},[4,this.httpClient.post("/:version/entities_bulk",{urlParams:{version:o},data:{users:n,metadata:r},headers:a,query:s})];case 1:return[2,u.sent().data]}}))}))},B([Object(w.d)()],e.prototype,"findMulti",null),e}(w.c),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},$=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},X=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Q=w.b.VERSION_TWO,Z=w.a.ESCALATION,J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype.escalateMessage=function(e){return $(this,void 0,void 0,(function(){var n,r;return X(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,Z).version,r=void 0===n?Q:n,[4,this.httpClient.post("/:version/message/:messageId/escalation",{urlParams:{version:r,messageId:e}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.acknowledge=function(e,n){var r=n.messageId,i=n.userTokens;return $(this,void 0,void 0,(function(){var n,o;return X(this,(function(a){switch(a.label){case 0:return n=t.prototype.getVersion.call(this,Z).version,o=void 0===n?Q:n,[4,this.httpClient.post("/:version/message/:messageId/escalation/:escalationId/confirm",{urlParams:{version:o,escalationId:e,messageId:r},data:{confirm_as:i}})];case 1:return[2,a.sent().data]}}))}))},e.prototype.cancel=function(e){return $(this,void 0,void 0,(function(){var n,r;return X(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,Z).version,r=void 0===n?Q:n,[4,this.httpClient.del("/:version/message/:messageId/escalation",{urlParams:{version:r,messageId:e}})];case 1:return i.sent(),[2]}}))}))},e.prototype.skip=function(e,n){var r=n.messageId,i=n.userTokens;return $(this,void 0,void 0,(function(){var n,o;return X(this,(function(a){switch(a.label){case 0:return n=t.prototype.getVersion.call(this,Z).version,o=void 0===n?Q:n,[4,this.httpClient.post("/:version/message/:messageId/escalation/:escalationId/skip",{urlParams:{version:o,escalationId:e,messageId:r},data:{skip_as:i}})];case 1:return[2,a.sent().data]}}))}))},K([Object(w.d)()],e.prototype,"escalateMessage",null),K([Object(w.d)()],e.prototype,"acknowledge",null),K([Object(w.d)()],e.prototype,"cancel",null),K([Object(w.d)()],e.prototype,"skip",null),e}(w.c),tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},nt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},rt=w.b.VERSION_TWO,it=w.a.EVENTS_ACK,ot=w.a.EVENTS_CLOSE_ALL_CONNECTIONS,at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.ack=function(e){return et(this,void 0,void 0,(function(){var n,r;return nt(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,it).version,r=void 0===n?rt:n,[4,this.httpClient.post("/:version/events/ack",{urlParams:{version:r},data:{events:e}})];case 1:return i.sent(),[2]}}))}))},e.prototype.closeAllConnections=function(){return et(this,void 0,void 0,(function(){var e,n;return nt(this,(function(r){switch(r.label){case 0:return e=t.prototype.getVersion.call(this,ot).version,n=void 0===e?rt:e,[4,this.httpClient.del("/:version/events",{urlParams:{version:n}})];case 1:return r.sent(),[2]}}))}))},e}(w.c),st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ct=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},lt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},dt=w.b.VERSION_TWO,ft=w.a.GROUP_ADD_MEMBERS,ht=w.a.GROUP_CREATE,pt=w.a.GROUP_DESTROY,vt=w.a.GROUP_FIND,yt=w.a.GROUP_UPDATE,gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.create=function(e){var n=e.avatarFile,r=e.description,i=e.excludeCreator,o=e.isPublic,a=void 0!==o&&o,s=e.memberIds,u=void 0===s?[]:s,c=e.metadata,l=e.name,d=e.organizationId,f=e.renderEntity,h=void 0===f||f,p=e.replayHistory,v=void 0!==p&&p;return ct(this,void 0,void 0,(function(){var e,o,s,f,p,y;return lt(this,(function(g){switch(g.label){case 0:return e=t.prototype.getVersion.call(this,ht).version,o=void 0===e?dt:e,s={},f={is_public:a,members:u.join(","),metadata:c,name:l,replay_history:v},p={},y={exclude_creator:i,render_entity:h},n&&(p.avatar=n),r&&(f.description=r),d&&(s["TT-X-Organization-Key"]=d),[4,this.httpClient.post("/:version/group",{urlParams:{version:o},query:y,headers:s,data:f,files:p})];case 1:return[2,g.sent().data]}}))}))},e.prototype.update=function(e,n){var r=n.name,i=void 0===r?void 0:r,o=n.avatarFile,a=void 0===o?void 0:o,s=n.replayHistory,u=void 0===s?void 0:s,c=n.memberIds;return ct(this,void 0,void 0,(function(){var n,r,o,s,l,d;return lt(this,(function(f){switch(f.label){case 0:return n=t.prototype.getVersion.call(this,yt).version,r=void 0===n?dt:n,o={},s={},void 0!==i&&(o.name=i),void 0!==c&&(o.members=c.join(",")),void 0!==u&&(o.replay_history=u),a&&(s.avatar=a),[4,this.httpClient.post("/:version/group/:id",{urlParams:{id:e,version:r},data:o,files:s})];case 1:return l=f.sent(),d=l.getHeader("TT-X-Group-Avatar"),[2,{id:e,avatarUrl:d}]}}))}))},e.prototype.find=function(e){return ct(this,void 0,void 0,(function(){var n,r;return lt(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,vt).version,r=void 0===n?dt:n,[4,this.httpClient.get("/:version/group/:id",{urlParams:{id:e,version:r},query:{render_metadata:"true"}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.findAllMemberIds=function(t){return ct(this,void 0,void 0,(function(){return lt(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.get("/:version/group/:id/members",{urlParams:{id:t,version:dt}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.destroy=function(e){return ct(this,void 0,void 0,(function(){var n,r;return lt(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,pt).version,r=void 0===n?dt:n,[4,this.httpClient.del("/:version/group/:id",{urlParams:{id:e,version:r}})];case 1:return i.sent(),[2,!0]}}))}))},e.prototype.addMembers=function(e,n){return ct(this,void 0,void 0,(function(){var r,i;return lt(this,(function(o){switch(o.label){case 0:return r=t.prototype.getVersion.call(this,ft).version,i=void 0===r?dt:r,[4,this.httpClient.post("/:version/group/:id/members",{urlParams:{id:e,version:i},data:{members:n}})];case 1:return[2,o.sent().data]}}))}))},e.prototype.removeMembers=function(t,e){return ct(this,void 0,void 0,(function(){return lt(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v2/group/:id/members/remove",{urlParams:{id:t},data:{members:e}})];case 1:return n.sent(),[2]}}))}))},ut([Object(w.d)()],e.prototype,"find",null),ut([Object(w.d)()],e.prototype,"findAllMemberIds",null),ut([Object(w.d)()],e.prototype,"destroy",null),e}(w.c),mt=n(13),_t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(){return(bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},wt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},It=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ot=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Et=w.b.VERSION_FIVE,Tt=w.b.VERSION_TWO,St=w.a.MESSAGE_FIND,At=w.a.MESSAGE_FORWARD,Ct=w.a.MESSAGE_SEND,Rt=w.a.MESSAGE_UPDATE_RECIPIENT_STATUS_MULTI,Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.send=function(e){var n=e.attachment,r=e.body,i=e.conversationId,o=e.counterPartyId,a=e.deleteOnRead,s=e.escalate,u=e.localId,c=e.metadata,l=e.priority,d=e.recipientOrganizationId,f=e.senderOrganizationId,h=e.ttl;return It(this,void 0,void 0,(function(){var e,p,v,y,g,m,_,b,w,I;return Ot(this,(function(O){switch(O.label){case 0:e=t.prototype.getVersion.call(this,Ct).version,v={body:r},y={},g={},(p=void 0===e?Tt:e)===Tt?(Object(mt.isEmail)(o)&&(o=o.toLowerCase()),v.recipient=o,y.response_format="message",d||(d=f),f&&(v.sender_organization=f),d&&(v.recipient_organization=d)):p===Et&&(v.conversation_id=i),c&&(v.data=c.map((function(t){return bt(bt({},t),{payload:JSON.stringify(t.payload)})}))),n&&(g.attachment=n),a&&(v.dor=a),s&&(v.escalate=s),void 0!==l&&(v.priority=l),h&&(v.ttl=h),O.label=1;case 1:return O.trys.push([1,5,,6]),[4,this.httpClient.post("/:version/message",{urlParams:{version:p},data:v,files:g,query:y,requestId:u,timeout:!n})];case 2:return m=O.sent(),_=m.headers["tt-x-message-id"],this.config.condensedReplays&&m.data.last_message&&_!==m.data.last_message.message_id?[4,this.host.api.messages.find(_)]:[3,4];case 3:(b=O.sent())&&(m.data.last_message=b.message),O.label=4;case 4:return[2,m.data];case 5:return 304!==(w=O.sent()).status?[2,Promise.reject(w)]:(I=w.response.headers["TT-X-Message-Id".toLowerCase()])?[2,{message_id:I}]:[2,Promise.reject(w)];case 6:return[2]}}))}))},e.prototype.destroy=function(t){return It(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.httpClient.del("/v2/message/:id",{urlParams:{id:t}})];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))},e.prototype.forward=function(e,n,r){var i=r.conversationId,o=r.localId,a=r.metadata,s=r.priority,u=r.recipientOrganizationId,c=r.senderOrganizationId;return It(this,void 0,void 0,(function(){var r,l,d,f;return Ot(this,(function(h){switch(h.label){case 0:return r=t.prototype.getVersion.call(this,At).version,d={},(l=void 0===r?Tt:r)===Tt?(d.recipient=n,u||(u=c),c&&(d.sender_organization=c),u&&(d.recipient_organization=u)):l===Et&&(d.conversation_id=i),a&&(d.data=a.map((function(t){return bt(bt({},t),{payload:JSON.stringify(t.payload)})}))),void 0!==s&&(d.priority=s),[4,this.httpClient.post("/:version/message/:id/forward",{urlParams:{id:e,version:l},data:d,requestId:o})];case 1:return f=h.sent(),l===Tt?[2,{message_id:f.getHeader("TT-X-Message-Id")}]:[2,f.data]}}))}))},e.prototype.find=function(e){return It(this,void 0,void 0,(function(){var n,r;return Ot(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,St).version,r=void 0===n?Tt:n,[4,this.httpClient.get("/:version/message/:id",{urlParams:{id:e,version:r}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.findRecipientStatus=function(t){return It(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.get("/:version/message/:id/status",{urlParams:{id:t,version:Tt}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.findRecipientStatusMulti=function(t){return It(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/:version/get_bulk_message_status",{urlParams:{version:Tt},data:{messages:t}})];case 1:return[2,e.sent().data.bulk_message_statuses]}}))}))},e.prototype.updateRecipientStatusMulti=function(e){return It(this,void 0,void 0,(function(){var n,r;return Ot(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,Rt).version,r=void 0===n?Tt:n,[4,this.httpClient.post("/:version/message/status",{urlParams:{version:r},data:e})];case 1:return[2,i.sent().data]}}))}))},e.prototype.createAttachmentTokens=function(t){return void 0===t&&(t=20),It(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/attachment_tokens_bulk",{data:{count:t,expire_after_sec:43200,expire_after_used_sec:5}})];case 1:return[2,e.sent().data]}}))}))},wt([Object(w.d)()],e.prototype,"find",null),wt([Object(w.d)()],e.prototype,"findRecipientStatus",null),e}(w.c),jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(){return(xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Mt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},kt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Nt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jt(e,t),e.prototype.batch=function(t){var e=t.ids,n=t.operation,r=t.organizationId;return kt(this,void 0,void 0,(function(){var t;return Nt(this,(function(i){switch(i.label){case 0:return t={"TT-X-Organization-Key":r},[4,this.httpClient.patch("/v5/message_template",{data:{ids:e,operation:n},headers:t})];case 1:return i.sent(),[2]}}))}))},e.prototype.create=function(t){var e=t.attachment,n=t.body,r=t.network,i=t.organizationId,o=t.repository,a=t.title;return kt(this,void 0,void 0,(function(){var t,s;return Nt(this,(function(u){switch(u.label){case 0:return t={},s={"TT-X-Organization-Key":i},e&&(t.attachment=e),[4,this.httpClient.post("/v5/message_template",{files:t,data:{body:n,network:r,repository:o,template_label:a},headers:s,timeout:!e})];case 1:return[2,u.sent().data]}}))}))},e.prototype.delete=function(t,e){return kt(this,void 0,void 0,(function(){var n;return Nt(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.del("/v5/message_template/:id",{headers:n,urlParams:{id:t}})];case 1:return r.sent(),[2]}}))}))},e.prototype.downloadTemplateFile=function(t){var e=t.templateId,n=t.fileName,r=t.organizationId;return kt(this,void 0,void 0,(function(){var t,i;return Nt(this,(function(o){return t={"TT-X-Organization-Key":r},i="/v5/message_template/"+e+"/attachment/"+n,[2,this.httpClient.downloadFileBlob(i,{headers:t})]}))}))},e.prototype.find=function(t,e){return kt(this,void 0,void 0,(function(){var n;return Nt(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/v5/message_template/:id",{headers:n,urlParams:{id:t}})];case 1:return[2,r.sent().data]}}))}))},e.prototype.update=function(t){var e=t.attachment,n=t.body,r=t.id,i=t.organizationId,o=t.repository,a=t.title;return kt(this,void 0,void 0,(function(){var t,s;return Nt(this,(function(u){switch(u.label){case 0:return t={},s={"TT-X-Organization-Key":i},e&&(t.attachment=e),[4,this.httpClient.put("/v5/message_template/:id",{files:t,data:xt(xt({},t.attachment?null:{attachment:e}),{body:n,repository:o,template_label:a}),headers:s,timeout:!e,urlParams:{id:r}})];case 1:return[2,u.sent().data]}}))}))},Mt([Object(w.d)()],e.prototype,"delete",null),Mt([Object(w.d)()],e.prototype,"downloadTemplateFile",null),Mt([Object(w.d)()],e.prototype,"find",null),Mt([Object(w.d)()],e.prototype,"update",null),e}(w.c),Dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Lt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ft=w.b.VERSION_TWO,Bt=w.a.METADATA_FIND,qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.update=function(t,e,n){return Ut(this,void 0,void 0,(function(){return Lt(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.post("/v2/metadata/:id",{urlParams:{id:t},data:e,headers:{"TT-X-Organization-Key":n}})];case 1:return r.sent(),[2]}}))}))},e.prototype.find=function(e,n){return Ut(this,void 0,void 0,(function(){var r,i;return Lt(this,(function(o){switch(o.label){case 0:return r=t.prototype.getVersion.call(this,Bt).version,i=void 0===r?Ft:r,[4,this.httpClient.get("/:version/metadata/:id",{urlParams:{id:e,version:i},headers:{"TT-X-Organization-Key":n}})];case 1:return[2,o.sent().data]}}))}))},e}(w.c),Vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Ht=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Wt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Yt=w.b.VERSION_TWO,Kt=w.a.MUTE_FIND_ALL,$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.findAll=function(){return Ht(this,void 0,void 0,(function(){var e,n;return Wt(this,(function(r){switch(r.label){case 0:return e=t.prototype.getVersion.call(this,Kt).version,n=void 0===e?Yt:e,[4,this.httpClient.get("/:version/mute",{urlParams:{version:n}})];case 1:return[2,r.sent().data]}}))}))},e.prototype.unmuteAll=function(){return Ht(this,void 0,void 0,(function(){return Wt(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.del("/v2/mute")];case 1:return t.sent(),[2]}}))}))},e.prototype.muteUser=function(t,e,n,r){var i=(void 0===r?{}:r).recipientOrganizationId,o=void 0===i?n:i;return Ht(this,void 0,void 0,(function(){return Wt(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.post("/v2/mute/p2p",{data:{sender_token:t,sender_organization:n,receiver_organization:o,duration:e.toString()}})];case 1:return r.sent(),[2]}}))}))},e.prototype.unmuteUser=function(t,e,n){var r=(void 0===n?{}:n).recipientOrganizationId,i=void 0===r?e:r;return Ht(this,void 0,void 0,(function(){return Wt(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.del("/v2/mute/p2p",{headers:{"TT-X-Sender-Token":t,"TT-X-Sender-Organization":e,"TT-X-Receiver-Organization":i}})];case 1:return n.sent(),[2]}}))}))},e.prototype.muteGroup=function(t,e,n){return Ht(this,void 0,void 0,(function(){return Wt(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.post("/v2/mute/group/:groupId",{urlParams:{groupId:t},data:{duration:e.toString(),receiver_organization:n}})];case 1:return r.sent(),[2]}}))}))},e.prototype.unmuteGroup=function(t,e){return Ht(this,void 0,void 0,(function(){return Wt(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.del("/v2/mute/group/:groupId",{urlParams:{groupId:t},headers:{"TT-X-Receiver-Organization":e}})];case 1:return n.sent(),[2]}}))}))},e.prototype.muteOrganization=function(t,e){return Ht(this,void 0,void 0,(function(){return Wt(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v2/mute/organization/:organizationId",{urlParams:{organizationId:t},data:{duration:e.toString(),receiver_organization:t}})];case 1:return n.sent(),[2]}}))}))},e.prototype.unmuteOrganization=function(t){return Ht(this,void 0,void 0,(function(){return Wt(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.del("/v2/mute/organization/:organizationId",{urlParams:{organizationId:t},headers:{"TT-X-Receiver-Organization":t}})];case 1:return e.sent(),[2]}}))}))},Gt([Object(w.d)()],e.prototype,"muteUser",null),Gt([Object(w.d)()],e.prototype,"unmuteUser",null),Gt([Object(w.d)()],e.prototype,"muteGroup",null),Gt([Object(w.d)()],e.prototype,"unmuteGroup",null),Gt([Object(w.d)()],e.prototype,"muteOrganization",null),Gt([Object(w.d)()],e.prototype,"unmuteOrganization",null),e}(w.c),Xt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Zt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xt(e,t),e.prototype.closeAllConnections=function(t,e){return Qt(this,void 0,void 0,(function(){var n;return Zt(this,(function(r){switch(r.label){case 0:return n=this.httpClient.getAuthHeaders({key:t,secret:e}),[4,this.httpClient.del("/v2/events/simple_notifications",{headers:n})];case 1:return r.sent(),[2]}}))}))},e.prototype.signIn=function(){return Qt(this,void 0,void 0,(function(){var t,e,n;return Zt(this,(function(r){switch(r.label){case 0:return[4,this.host.httpClient.post("/v2/events/simple_notifications/key")];case 1:return t=r.sent(),e=t.getHeader("TT-X-Api-Key"),n=t.getHeader("TT-X-Api-Secret"),[2,{key:e,secret:n}]}}))}))},e.prototype.signOut=function(t,e){return Qt(this,void 0,void 0,(function(){var n;return Zt(this,(function(r){return n=this.httpClient.getAuthHeaders({key:t,secret:e}),[2,this.httpClient.post("/v2/logout",{headers:n})]}))}))},e}(w.c),te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ne=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},re=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ie=w.b.VERSION_TWO,oe=w.a.ORGANIZATION_FIND_ALL_OF_USER,ae=w.a.ORGANIZATION_FIND,se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e.prototype.find=function(e,n){return ne(this,void 0,void 0,(function(){var r,i;return re(this,(function(o){switch(o.label){case 0:return r=t.prototype.getVersion.call(this,ae).version,i=void 0===r?ie:r,[4,this.httpClient.get("/:version/user/:userId/organization/:id",{urlParams:{version:i,userId:e,id:n}})];case 1:return[2,o.sent().data]}}))}))},e.prototype.findAllOfUser=function(e){return ne(this,void 0,void 0,(function(){var n,r;return re(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,oe).version,r=void 0===n?ie:n,[4,this.httpClient.get("/:version/user/:userId/organization",{urlParams:{version:r,userId:e}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.getPreferences=function(t){return ne(this,void 0,void 0,(function(){return re(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.get("/v2/organization/:organizationId/preferences",{urlParams:{organizationId:t}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.editPreferences=function(t){var e=t.organizationId,n=t.quickReplies;return ne(this,void 0,void 0,(function(){return re(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v2/organization/:organizationId/preferences",{headers:{"TT-X-Organization-Key":e},data:I.a.underscoreObject({network:{patient:{quickReplies:n}}}),urlParams:{organizationId:e}})];case 1:return[2,t.sent().data]}}))}))},ee([Object(w.d)()],e.prototype,"find",null),ee([Object(w.d)()],e.prototype,"findAllOfUser",null),ee([Object(w.d)()],e.prototype,"getPreferences",null),ee([Object(w.d)()],e.prototype,"editPreferences",null),e}(w.c),ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ce=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},le=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ue(e,t),e.prototype.create=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient",{data:I.a.underscoreObject(Object(v.omit)(t,"organizationId")),headers:{"TT-X-Organization-Key":t.organizationId}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.delete=function(t,e){return ce(this,void 0,void 0,(function(){return le(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.del("/v5/patient/:id",{urlParams:{id:t},headers:{"TT-X-Organization-Key":e}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.update=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient/:id",{data:I.a.underscoreObject(Object(v.omit)(t,["organizationId","patientId"])),headers:{"TT-X-Organization-Key":t.organizationId},urlParams:{id:t.patientId}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.createContact=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient/:patient_id/contact",{data:I.a.underscoreObject(Object(v.omit)(t,["organizationId","patientId"])),headers:{"TT-X-Organization-Key":t.organizationId},urlParams:{patient_id:t.patientId}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.deleteContact=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.del("/v5/patient/:patient_id/contact/:contact_id",{urlParams:{contact_id:t.contactId,patient_id:t.patientId},headers:{"TT-X-Organization-Key":t.organizationId}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.updateContact=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient/:patient_id/contact/:contact_id",{data:I.a.underscoreObject(Object(v.omit)(t,["organizationId","patientId","contactId"])),headers:{"TT-X-Organization-Key":t.organizationId},urlParams:{patient_id:t.patientId,contact_id:t.contactId}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.login=function(t,e,n,r){return ce(this,void 0,void 0,(function(){var i,o,a,s,u,c,l;return le(this,(function(d){switch(d.label){case 0:return i={want_condensed_replays:this.config.wantCondensedReplays,want_processing_events:this.config.wantCondensedReplays},e?(i.auth={access_token:e},n&&(i.auth.dob=n)):n&&(i.auth={dob:n}),Array.isArray(r)&&(i.session_tokens=I.a.underscoreObject(r)),[4,this.httpClient.post("/v5/patient/login/:linkToken",{urlParams:{linkToken:t},data:i})];case 1:return(o=d.sent()).data&&(a=o.data,s=a.condensed_replays,u=void 0!==s&&s,c=a.processing_events,l=void 0!==c&&c,this.host.configure({condensedReplays:u,processingEvents:l})),[2,o.data]}}))}))},e.prototype.loginCheck=function(t,e){return ce(this,void 0,void 0,(function(){var n;return le(this,(function(r){switch(r.label){case 0:return n={},Array.isArray(e)&&(n.session_tokens=I.a.underscoreObject(e)),[4,this.httpClient.post("/v5/patient/login_check/:linkToken",{urlParams:{linkToken:t},data:n})];case 1:return[2,r.sent().data]}}))}))},e.prototype.requestAccessToken=function(t){return ce(this,void 0,void 0,(function(){return le(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient/request_access_token/:linkToken",{urlParams:{linkToken:t},data:{}})];case 1:return[2,e.sent().data]}}))}))},e.prototype.csvUpload=function(t,e){return ce(this,void 0,void 0,(function(){return le(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v5/patient/csv/upload",{data:e,headers:{"TT-X-Organization-Key":t}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.getWhiteLabel=function(t){return ce(this,void 0,void 0,(function(){var e;return le(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.get("/v5/patient/white_label/:organizationId",{urlParams:{organizationId:t},headers:{"TT-X-Organization-Key":t}})];case 1:return e=n.sent(),[2,I.a.camelizeObject(e.data)]}}))}))},e.prototype.setWhiteLabel=function(t,e){return ce(this,void 0,void 0,(function(){return le(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.post("/v5/patient/white_label/:organizationId",{urlParams:{organizationId:t},headers:{"TT-X-Organization-Key":t},data:I.a.underscoreObject(e)})];case 1:return[2,n.sent()]}}))}))},e}(w.c),fe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),he=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},pe=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ve=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fe(e,t),e.prototype.create=function(){return pe(this,void 0,void 0,(function(){var t;return ve(this,(function(e){switch(e.label){case 0:return t=this.httpClient.getAuthHeaders(),[4,this.httpClient.get("/v2/qr_login_code/",{headers:t})];case 1:return[2,e.sent().data.qr_key]}}))}))},he([Object(w.d)()],e.prototype,"create",null),e}(w.c),ge=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},_e=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},be=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},we=["messageId","sender.name","sender.title","sender.department","sender.mrn","senderRoleDisplayName","recipient.name","recipient.title","recipient.department","recipient.mrn","recipientRoleDisplayName","group.name","distributionList.name","sentTimestamp","attachment.hasAttachment","recalledTimestamp","forwardedMessageId","expireTimestamp","dndAutoForwardedFrom"],Ie={script:"(doc['deliveredTimestamp'].empty ? '' : _source.deliveredTimestamp < _source.sentTimestamp ? _source.sentTimestamp : _source.deliveredTimestamp)"},Oe={script:"(doc['readTimestamp'].empty ? '' :_source.readTimestamp < _source.sentTimestamp ? _source.sentTimestamp : _source.readTimestamp)"},Ee=["sender.title","recipient.title","sender.department","sender.mrn","recipient.mrn","senderRoleDisplayName","recipient.department","recipientRoleDisplayName","sender.username","recipient.username","sender.verifiedEmails","recipient.verifiedEmails","sender.unverifiedEmails","recipient.unverifiedEmails","sender.verifiedPhones","recipient.verifiedPhones","sender.unverifiedPhones","recipient.unverifiedPhones","group.groupId","group.name","distributionList.distributionListId","distributionList.name","forwardedMessageId","messageId"],Te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.generateLookerEmbed=function(t,n){return _e(e,void 0,void 0,(function(){var e,r;return be(this,(function(i){switch(i.label){case 0:return e={"TT-X-Organization-Key":t},[4,this.httpClient.post("/v2/looker",{headers:e,data:{dashboard_type:n}})];case 1:return[2,(r=i.sent().data)&&r.looker_url]}}))}))},e}return ge(e,t),e.prototype.fetchTransactions=function(t,e){var n=e.page,r=e.size,i=e.startDate,o=e.endDate,a=e.query;return _e(this,void 0,void 0,(function(){var e,s,u,c,l,d;return be(this,(function(f){switch(f.label){case 0:return e={"TT-X-Organization-Key":t},s=n*r-r,u=t,l=(c=a)&&a.split(" ").join("*"),d=[{range:{sentTimestamp:{from:i,to:o}}},{match:{"sender.organization.orgId":u}},{constant_score:{filter:{missing:{field:"message.hideMessage"}}}},{bool:{should:[{query_string:{query:"*"+l+"*",fields:["sender.name","recipient.name"]}},{multi_match:{query:c,fields:Ee}}]}}],[4,this.httpClient.post("/v2/report/messages",{headers:e,data:{from:s,size:r,fields:we,script_fields:{deliveredTimestamp:Ie,readTimestamp:Oe},sort:{sentTimestamp:{order:"desc"}},query:{bool:{must:d}}}})];case 1:return[2,f.sent()]}}))}))},me([Object(w.d)()],e.prototype,"fetchTransactions",null),e}(w.c),Se=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ae=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Ce=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Re=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pe=w.b.VERSION_TWO,je=w.a.ROLES_CREATE_P2P_GROUP,xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Se(e,t),e.prototype.createP2PGroup=function(e){var n=e.createdByUserId,r=e.name,i=e.replayHistory,o=void 0!==i&&i,a=e.memberIds,s=void 0===a?[]:a,u=e.organizationId;return Ce(this,void 0,void 0,(function(){var e,i,a,c,l,d,f,h,p;return Re(this,(function(v){switch(v.label){case 0:return e=t.prototype.getVersion.call(this,je).version,i=void 0===e?Pe:e,a={"TT-X-Organization-Key":u},c={created_by:n,members:s,name:r,replay_history:o},[4,this.httpClient.post("/:version/role_group",{urlParams:{version:i},headers:a,data:c})];case 1:return l=v.sent(),d=l.data,f=d.conversation_id,h=d.metadata,p=l.data.token,[2,{conversationId:f,memberIds:s,metadata:h,name:r,organizationId:u,token:p}]}}))}))},e.prototype.find=function(t,e){return Ce(this,void 0,void 0,(function(){var n;return Re(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/v2/role/:id",{urlParams:{id:t},headers:n})];case 1:return[2,r.sent().data]}}))}))},e.prototype.createRole=function(t){var e=t.description,n=t.escalationPolicy,r=t.name,i=t.noOwnersMessage,o=t.openAssignment,a=t.organizationId,s=t.ownerRequired,u=t.owners,c=t.replayHistory,l=t.tagColor,d=t.tagName,f=t.tagToken;return Ce(this,void 0,void 0,(function(){var t,h,p;return Re(this,(function(v){switch(v.label){case 0:return t={"TT-X-Organization-Key":a},h={display_name:r,open_assignment:o?"1":"0",replay_history:c},void 0!==e&&(h.description=e),void 0!==n&&(h.escalation_policy=n),void 0!==i&&(h.no_owners_message=i),void 0!==s&&(h.owner_required=s?"1":"0"),void 0!==u&&(h.owners=u),void 0!==l&&(h.tag_color=l),void 0!==d&&(h.tag_name=d),void 0!==f&&(h.tag_id=f),[4,this.httpClient.post("/v2/role",{headers:t,data:h})];case 1:return(p=v.sent()).token=p.headers["tt-x-role-token"],[2,p]}}))}))},e.prototype.updateRole=function(t,e){var n=e.description,r=e.name,i=e.noOwnersMessage,o=e.openAssignment,a=e.organizationId,s=e.ownerRequired,u=e.owners,c=e.replayHistory,l=e.tagColor,d=e.tagName,f=e.tagToken,h=e.escalationPolicy;return Ce(this,void 0,void 0,(function(){var e,p,v;return Re(this,(function(y){switch(y.label){case 0:return e={"TT-X-Organization-Key":a},p={},void 0!==n&&(p.description=n),void 0!==r&&(p.display_name=r),void 0!==i&&(p.no_owners_message=i),void 0!==h&&(p.escalation_policy=h),void 0!==o&&(p.open_assignment=o?"1":"0"),void 0!==s&&(p.owner_required=s?"1":"0"),void 0!==u&&(p.owners=u),void 0!==c&&(p.replay_history=c),void 0!==l&&(p.tag_color=l),void 0!==f&&(p.tag_id=f),void 0!==d&&(p.tag_name=d),[4,this.httpClient.put("/v2/role/:token",{urlParams:{token:t},headers:e,data:p})];case 1:return(v=y.sent()).token=t,[2,v]}}))}))},e.prototype.deleteRole=function(t,e){return Ce(this,void 0,void 0,(function(){var n;return Re(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":t},[4,this.httpClient.del("/v2/role/:token",{urlParams:{token:e},headers:n})];case 1:return[2,r.sent()]}}))}))},e.prototype.findSavedRoles=function(t,e){return Ce(this,void 0,void 0,(function(){var n;return Re(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/v2/user/:userId/saved_roles",{urlParams:{userId:t},headers:n})];case 1:return[2,r.sent().data]}}))}))},e.prototype.saveRole=function(t,e,n){return Ce(this,void 0,void 0,(function(){var r;return Re(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":n},[4,this.httpClient.post("/v2/user/:userId/saved_roles",{urlParams:{userId:e},data:{role_id:t},headers:r})];case 1:return[2,i.sent()]}}))}))},e.prototype.removeSavedRole=function(t,e,n){return Ce(this,void 0,void 0,(function(){var r;return Re(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":n},[4,this.httpClient.del("/v2/user/:userId/saved_roles/:roleId",{urlParams:{userId:e,roleId:t},headers:r})];case 1:return[2,i.sent()]}}))}))},e.prototype.optIn=function(t,e,n){return Ce(this,void 0,void 0,(function(){var r;return Re(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":n},[4,this.httpClient.post("/v2/role/:roleId/members/:userId",{urlParams:{roleId:t,userId:e},headers:r})];case 1:return[2,i.sent()]}}))}))},e.prototype.optOut=function(t,e,n){return Ce(this,void 0,void 0,(function(){var r;return Re(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":n},[4,this.httpClient.del("/v2/role/:roleId/members/:userId",{urlParams:{roleId:t,userId:e},headers:r})];case 1:return[2,i.sent()]}}))}))},e.prototype.saveAwayResponse=function(t,e,n){return Ce(this,void 0,void 0,(function(){var r;return Re(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":e},[4,this.httpClient.post("/v2/role/:roleId/away",{urlParams:{roleId:t},headers:r,data:{status:n}})];case 1:return[2,i.sent()]}}))}))},e.prototype.removeAwayResponse=function(t,e){return Ce(this,void 0,void 0,(function(){var n;return Re(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.del("/v2/role/:roleId/away",{urlParams:{roleId:t},headers:n})];case 1:return[2,r.sent()]}}))}))},Ae([Object(w.d)()],e.prototype,"find",null),Ae([Object(w.d)()],e.prototype,"findSavedRoles",null),e}(w.c),Me=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Ne=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ze=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Me(e,t),e.prototype.findAll=function(t){return Ne(this,void 0,void 0,(function(){var e;return ze(this,(function(n){switch(n.label){case 0:return e={"TT-X-Organization-Key":t},[4,this.httpClient.get("/v2/role/tags",{headers:e})];case 1:return[2,n.sent().data]}}))}))},e.prototype.createOrUpdateTag=function(t,e,n,r){return Ne(this,void 0,void 0,(function(){var i,o;return ze(this,(function(a){switch(a.label){case 0:return i={color:t,name:e,organizationId:n},r?[4,this.updateTag(r,i)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,this.createTag(i)];case 3:o=a.sent(),a.label=4;case 4:return[2,o]}}))}))},e.prototype.createTag=function(t){var e=t.color,n=t.name,r=t.organizationId;return Ne(this,void 0,void 0,(function(){var t,i;return ze(this,(function(o){switch(o.label){case 0:return t={"TT-X-Organization-Key":r},[4,this.httpClient.post("/v2/tags",{data:{color:e,name:n},headers:t})];case 1:return(i=o.sent()).token=i.headers["tt-x-tag-id"],[2,i]}}))}))},e.prototype.updateTag=function(t,e){var n=e.color,r=e.name,i=e.organizationId;return Ne(this,void 0,void 0,(function(){var e,o;return ze(this,(function(a){switch(a.label){case 0:return e={"TT-X-Organization-Key":i},[4,this.httpClient.put("/v2/tags/:token",{urlParams:{token:t},data:{color:n,name:r},headers:e})];case 1:return(o=a.sent()).token=t,[2,o]}}))}))},e.prototype.destroy=function(t,e){return Ne(this,void 0,void 0,(function(){var n;return ze(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":t},[4,this.httpClient.del("/v2/tags/:token",{urlParams:{token:e},headers:n})];case 1:return[2,r.sent().data]}}))}))},e.prototype.findColors=function(t){return Ne(this,void 0,void 0,(function(){var e;return ze(this,(function(n){switch(n.label){case 0:return e={"TT-X-Organization-Key":t},[4,this.httpClient.get("/v2/tag/color_list/:organizationId",{urlParams:{organizationId:t},headers:e})];case 1:return[2,n.sent().data]}}))}))},e.prototype.findTag=function(t,e){return Ne(this,void 0,void 0,(function(){var n;return ze(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":t},[4,this.httpClient.get("/v2/tags/:tagId",{urlParams:{tagId:e},headers:n})];case 1:return[2,r.sent().data]}}))}))},ke([Object(w.d)()],e.prototype,"findAll",null),e}(w.c),Ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Fe=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Be=w.b.VERSION_TWO,qe=w.b.VERSION_FIVE,Ve=["user","distributionList"],Ge=w.a.CONVERSATION_FIND_ALL,He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),e.prototype.findAll=function(e){return void 0===e&&(e={organizationId:null}),Le(this,void 0,void 0,(function(){var n,r,i,o,a;return Fe(this,(function(s){switch(s.label){case 0:return n=t.prototype.getVersion.call(this,Ge).version,o={render_metadata:"true"},(r=void 0===n?Be:n)===qe&&(i=e.organizationId,o.mark_as_delivered="true",o.paginated="true",o.organization_id=i||void 0),[4,this.httpClient.get("/:version/roster",{query:o,urlParams:{version:r}})];case 1:return(a=s.sent()).data.continuation?[4,this._findAllPaginated(a.data.continuation,i,a.data.items)]:[3,3];case 2:return[2,s.sent()];case 3:return[2,a.data.items||a.data]}}))}))},e.prototype._findAllPaginated=function(t,e,n){return Le(this,void 0,void 0,(function(){var r;return Fe(this,(function(i){switch(i.label){case 0:return null===t?[2,n]:[4,this.httpClient.get("/v5/roster",{query:{render_metadata:"true",mark_as_delivered:"true",paginated:"true",continuation:encodeURI(t),organization_id:e||void 0}})];case 1:return r=i.sent(),n=n.concat(r.data.items),[2,this._findAllPaginated(r.data.continuation,e,n)]}}))}))},e.prototype.add=function(t,e,n){return Le(this,void 0,void 0,(function(){var r,i;return Fe(this,(function(o){switch(o.label){case 0:return y.a.includes(Ve,t)?(r={},n&&(r["TT-X-Organization-Key"]=n),i=this.__typeToNS(t),[4,this.httpClient.post("/v2/roster",{headers:r,data:{entity:e,type:i}})]):[2];case 1:return o.sent(),[2]}}))}))},e.prototype.remove=function(t,e,n){return Le(this,void 0,void 0,(function(){var r,i;return Fe(this,(function(o){switch(o.label){case 0:return y.a.includes(Ve,t)?(r={},i=this.__typeToNS(t),n&&(r["TT-X-Organization-Key"]=n,r["TT-X-Type"]=i),[4,this.httpClient.del("/v2/roster/:counterPartyId",{headers:r,urlParams:{counterPartyId:e},data:{type:i}})]):[2];case 1:return o.sent(),[2]}}))}))},e.prototype.__typeToNS=function(t){return We[t]},e}(w.c),We={user:"tigertext:entity:account",distributionList:"tigertext:entity:list"},Ye=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},$e=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ye(e,t),e.prototype.findIntegrationIds=function(t){return Ke(this,void 0,void 0,(function(){var e;return $e(this,(function(n){switch(n.label){case 0:return e={Accept:"*/*","TT-X-Organization-Key":t},[4,this.httpClient.post("/v1/integrations/scheduler/configs/info/org",{headers:e,data:{org:t}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.sendCsvSchedule=function(t,e,n,r){return Ke(this,void 0,void 0,(function(){var i,o,a,s,u;return $e(this,(function(c){switch(c.label){case 0:i={"Content-Type":"text/csv","TT-X-Organization-Key":n,"TT-X-Integration-Id":t,"TT-X-Timezone":r},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.httpClient.post("/v1/integrations/scheduler/webhook/csv",{data:e,headers:i})];case 2:return s=c.sent(),o=s.data,a=s.status,[3,4];case 3:return 400!==(u=c.sent()).status?[2,Promise.reject(u)]:(o=u.response&&(u.response.body||u.response.text),a=u.status,[3,4]);case 4:return[2,{json:o,status:a}]}}))}))},e.prototype.findCsv=function(t,e){return Ke(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":t},[4,this.httpClient.post("/v1/integrations/scheduler/webhook/csv/download",{headers:n,data:{org:t,id:e},resFormat:"text"})];case 1:return[2,r.sent()]}}))}))},e.prototype.clearSchedule=function(t,e){return Ke(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return n={Accept:"*/*","TT-X-Organization-Key":t},[4,this.httpClient.post("/v1/integrations/scheduler/configs/truncate",{headers:n,data:{id:e}})];case 1:return[2,r.sent().status]}}))}))},e}(w.c),Qe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(){return(Ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Je=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},tn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},en=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.batch=function(t){var e=t.ids,n=t.operation,r=t.organizationId;return tn(this,void 0,void 0,(function(){var t;return en(this,(function(i){switch(i.label){case 0:return t={"TT-X-Organization-Key":r},[4,this.httpClient.patch("/v5/schedule_message",{data:{ids:e,operation:n},headers:t})];case 1:return i.sent(),[2]}}))}))},e.prototype.create=function(t){var e=t.attachment,n=t.body,r=t.end_date,i=t.network,o=t.no_reply,a=t.organizationId,s=t.recipients,u=t.repeating,c=t.send_now,l=t.start_date,d=t.start_time,f=t.template_id,h=t.timezone_name;return tn(this,void 0,void 0,(function(){var t,p;return en(this,(function(v){switch(v.label){case 0:return t={},p={"TT-X-Organization-Key":a},e&&(t.attachment=e),[4,this.httpClient.post("/v5/schedule_message",{files:t,data:Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze({},t.attachment?null:{attachment:e}),{body:n}),u?{end_date:r}:null),{network:i,no_reply:o,recipients:s}),u?{repeating:u}:null),{send_now:c,start_date:l,start_time:d}),f?{template_id:f}:null),{timezone_name:h}),headers:p,timeout:!(e||f)})];case 1:return[2,v.sent().data]}}))}))},e.prototype.delete=function(t,e){return tn(this,void 0,void 0,(function(){var n;return en(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.del("/v5/schedule_message/:id",{headers:n,urlParams:{id:t}})];case 1:return r.sent(),[2]}}))}))},e.prototype.downloadScheduledMessageFile=function(t){var e=t.scheduleId,n=t.fileName,r=t.organizationId;return tn(this,void 0,void 0,(function(){var t,i;return en(this,(function(o){return t={"TT-X-Organization-Key":r},i="/v5/schedule_message/"+e+"/attachment/"+n,[2,this.httpClient.downloadFileBlob(i,{headers:t})]}))}))},e.prototype.find=function(t){var e=t.id,n=t.organizationId,r=t.isHistoryCategory;return tn(this,void 0,void 0,(function(){var t;return en(this,(function(i){switch(i.label){case 0:return t={"TT-X-Organization-Key":n},[4,this.httpClient.get("/v5/schedule_message/:id?history="+r,{headers:t,urlParams:{id:e}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.findCoarseTimezone=function(t,e){return tn(this,void 0,void 0,(function(){var n;return en(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/v5/timezone/:timezone",{headers:n,urlParams:{timezone:t}})];case 1:return[2,r.sent().data]}}))}))},e.prototype.update=function(t){var e=t.attachment,n=t.body,r=t.end_date,i=t.id,o=t.organizationId,a=t.repeating,s=t.start_date,u=t.start_time,c=t.template_id,l=t.timezone_name;return tn(this,void 0,void 0,(function(){var t,d;return en(this,(function(f){switch(f.label){case 0:return t={},d={"TT-X-Organization-Key":o},e&&(t.attachment=e),[4,this.httpClient.put("/v5/schedule_message/:id",{files:t,data:Ze(Ze(Ze(Ze(Ze(Ze(Ze({},t.attachment?null:{attachment:e}),{body:n}),a?{end_date:r}:null),a?{repeating:a}:null),{start_date:s,start_time:u}),c?{template_id:c}:null),{timezone_name:l}),headers:d,timeout:!(e||c),urlParams:{id:i}})];case 1:return[2,f.sent().data]}}))}))},Je([Object(w.d)()],e.prototype,"delete",null),Je([Object(w.d)()],e.prototype,"downloadScheduledMessageFile",null),Je([Object(w.d)()],e.prototype,"find",null),Je([Object(w.d)()],e.prototype,"update",null),e}(w.c),rn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),on=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},an=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},sn=w.b.VERSION_TWO,un=w.a.SEARCH_QUERY,cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rn(e,t),e.prototype.query=function(e){return on(this,void 0,void 0,(function(){var n,r;return an(this,(function(i){switch(i.label){case 0:return n=t.prototype.getVersion.call(this,un).version,r=void 0===n?sn:n,[4,this.httpClient.post("/:version/search",{data:e,urlParams:{version:r}})];case 1:return[2,i.sent().data]}}))}))},e.prototype.patientQuery=function(t){return on(this,void 0,void 0,(function(){return an(this,(function(e){switch(e.label){case 0:return[4,this.httpClient.post("/v5/patient/search",{data:t})];case 1:return[2,e.sent().data]}}))}))},e}(w.c),ln=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},fn=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},hn=w.b.VERSION_TWO,pn=w.a.TEAMS_CREATE,vn=w.a.TEAMS_FIND,yn=w.a.TEAMS_LEAVE,gn=w.a.TEAMS_UPDATE,mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ln(e,t),e.prototype.find=function(e,n){var r=n.organizationId;return dn(this,void 0,void 0,(function(){var n,i;return fn(this,(function(o){switch(o.label){case 0:return n=t.prototype.getVersion.call(this,vn).version,i=void 0===n?hn:n,[4,this.httpClient.get("/:version/team/:team_id",{headers:{"TT-X-Organization-Key":r},urlParams:{team_id:e,version:i}})];case 1:return[2,o.sent().data]}}))}))},e.prototype.create=function(e){var n=e.avatar,r=e.canMembersLeave,i=void 0===r||r,o=e.canRequestToJoin,a=void 0===o||o,s=e.description,u=e.displayName,c=e.memberIds,l=void 0===c?[]:c,d=e.organizationId;return dn(this,void 0,void 0,(function(){var e,r,o,c,f;return fn(this,(function(h){switch(h.label){case 0:return e=t.prototype.getVersion.call(this,pn).version,r=void 0===e?hn:e,o={},c={can_members_leave:i,can_request_to_join:a,display_name:u,members:l},f={},n&&(f.avatar=n),s&&(c.description=s),d&&(o["TT-X-Organization-Key"]=d),[4,this.httpClient.post("/:version/team",{urlParams:{version:r},headers:o,data:c,files:f})];case 1:return[2,h.sent().data]}}))}))},e.prototype.update=function(e){var n=e.avatar,r=e.canMembersLeave,i=void 0===r||r,o=e.canRequestToJoin,a=void 0===o||o,s=e.description,u=e.displayName,c=e.id,l=e.memberIds,d=void 0===l?[]:l,f=e.organizationId;return dn(this,void 0,void 0,(function(){var e,r,o,l,h;return fn(this,(function(p){switch(p.label){case 0:return e=t.prototype.getVersion.call(this,gn).version,r=void 0===e?hn:e,o={},l={can_members_leave:i,can_request_to_join:a,display_name:u,members:d},h={},n&&(h.avatar=n),s&&(l.description=s),f&&(o["TT-X-Organization-Key"]=f),[4,this.httpClient.post("/:version/team/:id",{urlParams:{id:c,version:r},headers:o,data:l,files:h})];case 1:return[2,p.sent().data]}}))}))},e.prototype.delete=function(e,n){var r=n.organizationId;return dn(this,void 0,void 0,(function(){var n,i;return fn(this,(function(o){switch(o.label){case 0:return n=t.prototype.getVersion.call(this,pn).version,i=void 0===n?hn:n,[4,this.httpClient.del("/:version/team/:id",{headers:{"TT-X-Organization-Key":r},urlParams:{version:i,id:e}})];case 1:return[2,o.sent().status]}}))}))},e.prototype.requestToJoin=function(e,n){var r=n.organizationId,i=n.requestedById;return dn(this,void 0,void 0,(function(){var n,o;return fn(this,(function(a){switch(a.label){case 0:return n=t.prototype.getVersion.call(this,pn).version,o=void 0===n?hn:n,[4,this.httpClient.post("/:version/team/:id/request",{headers:{"TT-X-Organization-Key":r},urlParams:{id:e,version:o},data:{requested_by:i}})];case 1:return[2,a.sent().status]}}))}))},e.prototype.updateJoinRequest=function(e,n){var r=n.organizationId,i=n.teamId,o=n.handledAsId,a=n.status;return dn(this,void 0,void 0,(function(){var n,s;return fn(this,(function(u){switch(u.label){case 0:return n=t.prototype.getVersion.call(this,pn).version,s=void 0===n?hn:n,[4,this.httpClient.post("/:version/team/:team_id/request/:request_id",{headers:{"TT-X-Organization-Key":r},urlParams:{version:s,team_id:i,request_id:e},data:{handled_as:o,status:a}})];case 1:return[2,u.sent()]}}))}))},e.prototype.leave=function(e,n){var r=n.organizationId;return dn(this,void 0,void 0,(function(){var n,i;return fn(this,(function(o){switch(o.label){case 0:return n=t.prototype.getVersion.call(this,yn).version,i=void 0===n?hn:n,[4,this.httpClient.post("/:version/team/:team_id/leave",{headers:{"TT-X-Organization-Key":r},urlParams:{team_id:e,version:i},data:{}})];case 1:return[2,o.sent().status]}}))}))},e}(w.c),_n=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},wn=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.prototype.getTwilioNumbers=function(t,e){return bn(this,void 0,void 0,(function(){var n;return wn(this,(function(r){switch(r.label){case 0:return n={"TT-X-Organization-Key":t},[4,this.httpClient.post("/v2/twilio/numbers",{headers:n,data:{area_code:e}})];case 1:return[2,r.sent().data]}}))}))},e.prototype.assignPagerNumber=function(t,e,n){return bn(this,void 0,void 0,(function(){var r;return wn(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":t},[4,this.httpClient.post("/v2/user/:roleToken/organization/:organizationId/pagers?process_number=true",{headers:r,urlParams:{organizationId:t,roleToken:n},data:{pager_numbers:e}})];case 1:return[2,i.sent()]}}))}))},e.prototype.removePagerNumber=function(t,e,n){return bn(this,void 0,void 0,(function(){var r;return wn(this,(function(i){switch(i.label){case 0:return r={"TT-X-Organization-Key":t},[4,this.httpClient.del("/v2/user/:roleToken/organization/:organizationId/pagers/:number?process_number=true",{headers:r,urlParams:{organizationId:t,roleToken:n,number:e}})];case 1:return[2,i.sent()]}}))}))},e}(w.c),On=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Tn=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),e.prototype.startTyping=function(t,e,n){return En(this,void 0,void 0,(function(){var r;return Tn(this,(function(i){switch(i.label){case 0:return r={recipient:t},e&&e!==this.host.currentUserId&&(r.proxy_token=e),[4,this.httpClient.post("/v2/message/typing",{data:r,headers:{"TT-X-Organization-Key":n}})];case 1:return i.sent(),[2]}}))}))},e.prototype.stopTyping=function(t,e){return En(this,void 0,void 0,(function(){return Tn(this,(function(n){switch(n.label){case 0:return e?[4,this.httpClient.del("/v2/message/typing/:recipientId/:senderId",{urlParams:{recipientId:t,senderId:e}})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.httpClient.del("/v2/message/typing/:recipientId",{urlParams:{recipientId:t}})];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},e}(w.c),An=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Rn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Pn=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return An(e,t),e.prototype.findAll=function(t,e){return Rn(this,void 0,void 0,(function(){return Pn(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.get("/v2/user/:userId/organization/:organizationId/roles",{urlParams:{userId:t,organizationId:e}})];case 1:return[2,n.sent().data.roles]}}))}))},Cn([Object(w.d)()],e.prototype,"findAll",null),e}(w.c),xn=n(161),Mn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kn=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Nn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},zn=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mn(e,t),e.prototype.findAll=function(t,e){var n=(void 0===e?{showAll:!1}:e).showAll;return Nn(this,void 0,void 0,(function(){var e;return zn(this,(function(r){switch(r.label){case 0:return[4,this.httpClient.get("/vwr/v1/rooms?show_all="+n,{headers:{"TT-X-Organization-Key":t}})];case 1:return e=r.sent(),[2,I.a.camelizeObject(e.data)]}}))}))},e.prototype.find=function(t,e){return Nn(this,void 0,void 0,(function(){var n,r;return zn(this,(function(i){switch(i.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/vwr/v1/room/:id",{headers:n,urlParams:{id:t}})];case 1:return r=i.sent(),[2,I.a.camelizeObject(r.data)]}}))}))},e.prototype.create=function(t,e){var n=e.staff,r=e.name;return Nn(this,void 0,void 0,(function(){var e,i,o;return zn(this,(function(a){switch(a.label){case 0:return e={"TT-X-Organization-Key":t},i=I.a.underscoreObject({staff:n,name:r}),[4,this.httpClient.post("/vwr/v1/room",{headers:e,data:i})];case 1:return o=a.sent(),[2,I.a.camelizeObject(o.data)]}}))}))},e.prototype.update=function(t,e,n){var r=n.staff,i=n.name,o=n.status,a=n.version;return Nn(this,void 0,void 0,(function(){var n,s,u;return zn(this,(function(c){switch(c.label){case 0:return n={"TT-X-Organization-Key":e},s=I.a.underscoreObject({staff:r,name:i,status:o,version:a}),[4,this.httpClient.put("/vwr/v1/room/:id",{headers:n,urlParams:{id:t},data:s})];case 1:return u=c.sent(),[2,I.a.camelizeObject(u.data)]}}))}))},e.prototype.delete=function(t,e){return Nn(this,void 0,void 0,(function(){var n,r;return zn(this,(function(i){switch(i.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.del("/vwr/v1/room/:id",{headers:n,urlParams:{id:t}})];case 1:return r=i.sent(),[2,I.a.camelizeObject(r.data)]}}))}))},e.prototype.getVisitInfo=function(t){return Nn(this,void 0,void 0,(function(){var e;return zn(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.get("/vwr/v1/visit/join?join_id=:joinId",{urlParams:{joinId:t}})];case 1:return e=n.sent(),[2,I.a.camelizeObject(e.data)]}}))}))},e.prototype.createVisit=function(t){var e=t.firstName,n=t.lastName,r=t.mobilePhone,i=t.visitReason,o=t.joinId;return Nn(this,void 0,void 0,(function(){var t;return zn(this,(function(a){switch(a.label){case 0:return[4,this.httpClient.post("/vwr/v1/visit/join?join_id=:joinId",{data:I.a.underscoreObject({firstName:e,lastName:n,mobilePhone:r,visitReason:i,processingEvents:!0,condensedReplays:!0}),urlParams:{joinId:o}})];case 1:return t=a.sent(),[2,I.a.camelizeObject(t.data)]}}))}))},e.prototype.rejoinVisit=function(t){var e=t.rejoinToken,n=t.sessionTokens;return Nn(this,void 0,void 0,(function(){var t,r;return zn(this,(function(i){switch(i.label){case 0:return t=I.a.underscoreObject({rejoinToken:e,sessionTokens:n,wantProcessingEvents:!0,wantCondensedReplays:!0}),[4,this.httpClient.post("/vwr/v1/visit/rejoin",{data:t})];case 1:return r=i.sent(),[2,I.a.camelizeObject(r.data)]}}))}))},e.prototype.rejoinWithAuthForm=function(t){var e=t.rejoinToken,n=t.challengeAnswers;return Nn(this,void 0,void 0,(function(){var t,r;return zn(this,(function(i){switch(i.label){case 0:return t=I.a.underscoreObject({rejoinToken:e,challengeAnswers:n,wantProcessingEvents:!0,wantCondensedReplays:!0}),[4,this.httpClient.put("/vwr/v1/visit/rejoin",{data:t})];case 1:return r=i.sent(),[2,I.a.camelizeObject(r.data)]}}))}))},e.prototype.cleanupVisits=function(t){var e=t.type,n=t.roomId,r=t.organizationId;return Nn(this,void 0,void 0,(function(){var t;return zn(this,(function(i){switch(i.label){case 0:return t={"TT-X-Organization-Key":r},[4,this.httpClient.put("/vwr/v1/room/:roomId/cleanup",{headers:t,data:{type:e},urlParams:{roomId:n}})];case 1:return i.sent(),[2]}}))}))},e.prototype.findAllVisits=function(t,e){return Nn(this,void 0,void 0,(function(){var n,r;return zn(this,(function(i){switch(i.label){case 0:return n={"TT-X-Organization-Key":e},[4,this.httpClient.get("/vwr/v1/room/:roomId/visits",{headers:n,urlParams:{roomId:t}})];case 1:return r=i.sent(),[2,I.a.camelizeObject(r.data)]}}))}))},e.prototype.informProvider=function(t,e){var n=e.roomId,r=e.visitId,i=e.accountToken;return Nn(this,void 0,void 0,(function(){var e,o;return zn(this,(function(a){switch(a.label){case 0:return e={"TT-X-Organization-Key":t},[4,this.httpClient.post("/vwr/v1/room/:roomId/visit/:visitId/provider/:accountToken",{headers:e,urlParams:{roomId:n,visitId:r,accountToken:i}})];case 1:return o=a.sent(),[2,I.a.camelizeObject(o.data)]}}))}))},e.prototype.updateVisit=function(t,e){var n=e.roomId,r=e.visitId,i=e.options;return Nn(this,void 0,void 0,(function(){var e,o;return zn(this,(function(a){switch(a.label){case 0:return e={"TT-X-Organization-Key":t},[4,this.httpClient.put("/vwr/v1/room/:roomId/visit/:visitId",{headers:e,urlParams:{roomId:n,visitId:r},data:i})];case 1:return o=a.sent(),[2,I.a.camelizeObject(o.data)]}}))}))},kn([Object(w.d)()],e.prototype,"findAll",null),kn([Object(w.d)()],e.prototype,"find",null),kn([Object(w.d)()],e.prototype,"create",null),kn([Object(w.d)()],e.prototype,"update",null),kn([Object(w.d)()],e.prototype,"delete",null),kn([Object(w.d)()],e.prototype,"createVisit",null),kn([Object(w.d)()],e.prototype,"rejoinVisit",null),kn([Object(w.d)()],e.prototype,"informProvider",null),kn([Object(w.d)()],e.prototype,"updateVisit",null),e}(w.c),Un=n(0),Ln={CONSUMER_ORGANIZATION_ID:"UpM28mnfW65vJkbqEATtKvxm",BASE_URLS:{local:"http://localhost:8888",productionOauth:"http://52.41.133.15:8000/tigertextapi"},ADMIN_URLS:{},CN_URLS:{},FORGOT_PASSWORD_URLS:{},ROLES_URLS:{},CLOUDFRONT:{development:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},production:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},tt:{d1n6bomzxlt9xn:"tigertext/production/avatar",d18oyzjkq5093g:"tigertext/production/avatar-group"},ihis:{avatar:"",groupAvatar:""}},CONFIG_DEFAULT:{adminFeatureBranch:null,allowProviderCalling:!1,apiEnv:"production",assetDomain:"assets.tigerconnect.com",autoAckSuccessfullyHandledEvents:!0,autoSignOutOnBrowserUnload:!0,baseUrl:null,botUsers:[],clearTypingStatusThrottleDelay:2e3,clearTypingStatusTimeout:8e3,cloudfrontDomain:"cloudfront.net",cloudfront:{},condensedReplays:!1,consumerOrganizationId:"UpM28mnfW65vJkbqEATtKvxm",detectBangReplayTimeout:1e3,events:{autoAck:!1,autoDeliver:!1,canConfirm:!0,closeAfterMessages:!1,heartbeat:!0,hidden:!1,includeDistributionListEvents:!0,isTyping:!0,keepAlive:!1,msgDeliveryDelay:0,multiOrg:!0,noOfflineMessages:!1,renderMetadata:!0},eventCollectionInterval:50,eventDrainTimeout:4e3,eventsAutoReconnect:!0,eventsAutoReconnectDelay:2e3,eventsAutoReconnectMaxDelay:16e3,eventsClearRetryHistoryInterval:6e4,eventsDebugging:!1,eventsHeartbeatIntervalVisible:12e3,eventsHeartbeatIntervalInvisible:3e4,eventsOpenTimeout:6e3,flushAckInterval:1e3,flushAckMaxConnections:2,flushAckMaxEvents:50,flushFindRecipientStatusInterval:150,flushFindRecipientStatusMaxCount:20,flushSetMessageStatusInterval:1e3,flushSetMessageStatusMaxCount:500,keepConversationsForAllForums:!1,localAdminUrl:null,localCnUrl:null,localRolesUrl:null,logLevel:"error",manuallyRequestEventQueueBatch:!1,maxEventBatch:50,maxMetadataKeyCount:11,organizationRostersChangeThrottleDelay:500,placeholderEntityAllowLoading:!0,placeholderEntityDelayBeforeRefreshing:100,processingEvents:!1,productKey:"bc1oOf3DZXbnaNZ2LCWZGvSg",pushAgent:"consumer",rolesFeatureBranch:null,serviceLogLevels:{},signUpHashKey:"21d2ff3ffbf",signUpHashSalt:"%(xx*&x$&*%&",ttRoute:null,version:"1.0",wantCondensedReplays:!0}};["stag","uat"].forEach((function(t){Ln.BASE_URLS[t]="https://"+t+"-devapi.tigertext.me",Ln.FORGOT_PASSWORD_URLS[t]="https://"+t+"-forget.tigertext.com",Ln.CN_URLS[t]="https://"+t+"-console.tigertext.me",Ln.ADMIN_URLS[t]="https://"+t+"-console.tigertext.me/app/admin",Ln.ROLES_URLS[t]="/"+t+"/app/roles/index.html"}));["ihis","prod","prod-a","prod-c","production","tt"].forEach((function(t){Ln.BASE_URLS[t]="https://api.tigertext.me",Ln.FORGOT_PASSWORD_URLS[t]="https://forget.tigertext.com",Ln.CN_URLS[t]="https://home.tigertext.com",Ln.ADMIN_URLS[t]="https://home.tigertext.com/app/admin",Ln.ROLES_URLS[t]="/app/roles/index.html"}));["prod-a","prod-c"].forEach((function(t){var e=t.replace("prod-","");Ln.BASE_URLS[t]="https://"+e+"-api.tigertext.me"}));["ihis"].forEach((function(t){Ln.CN_URLS[t]="https://"+t+".tigertext.com",Ln.ADMIN_URLS[t]="https://"+t+".tigertext.com/app/admin"}));["prod-dr"].forEach((function(t){Ln.BASE_URLS[t]="https://"+t+"-api.tigertext.me",Ln.CN_URLS[t]="https://"+t+".tigertext.com",Ln.ADMIN_URLS[t]="https://"+t+".tigertext.com/app/admin",Ln.ROLES_URLS[t]="/"+t+"/app/roles/index.html"}));var Fn=Ln,Bn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},qn=function(){function t(t){var e=t.name,n=t.level;this.name=e,this.level=n}return t.prototype.setLevel=function(t){this.level=t.toLowerCase()},t}(),Vn=qn,Gn=["debug","log","info","warn","error"],Hn=Gn.reduce((function(t,e,n){return t[e]=n,t}),{});Gn.forEach((function(t){var e=Hn[t];qn.prototype[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e>=Hn[this.level]&&(n=Bn(["["+this.name+"]"],n),Function.prototype.apply.call(console[t],console,n))}}));var Wn,Yn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kn=function(){return(Kn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},$n=function(){function t(t,e){for(var n in void 0===e&&(e={}),Array.isArray(t)&&(t=t.reduce((function(t,e){return t[e]={},t}),{})),this.keys=[],this.entries=[],this.entriesByKey={},this.defaultValue=e.defaultValue||null,t){this[n]=e.valueFn?e.valueFn(n):n;var r=Kn({key:n},t[n]);this.entriesByKey[n]=r,this.entries.push(r),this.keys.push(n)}Object.freeze(this.keys),Object.freeze(this.entries),Object.freeze(this.entriesByKey)}return t.prototype.resolve=function(t){return t||this.defaultValue},t.prototype.isValid=function(t){return!!this.entriesByKey[t]},t}(),Xn=$n,Qn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yn(e,t),e.prototype.mapEnumKeyToServerValue=function(){return this._mapEnumKeyToServerValue||(this._mapEnumKeyToServerValue=y.a.transform(this.entries,(function(t,e){return t[e.key]=e.serverValue}),{}))},e.prototype.mapServerValueToEnumKey=function(){return this._mapServerValueToEnumKey||(this._mapServerValueToEnumKey=y.a.invert(this.mapEnumKeyToServerValue()))},e.prototype.fromServer=function(t){return this.mapServerValueToEnumKey()[t]},e.prototype.toServer=function(t){return this.mapEnumKeyToServerValue()[this.resolve(t)]},e.prototype.resolve=function(t){return(this.isValid(t)?t:this.fromServer(t))||this.defaultValue},e}($n),Zn=new Xn(["CONTACTS_MESSAGING_BLOCKED_BY_ADMIN","CONVERSATION_NOT_FULLY_LOADED","CONVERSATION_WITH_ROLE_YOU_ARE_CURRENTLY_IN","COUNTER_PARTY_IS_TIGERPAGE","COUNTER_PARTY_NOT_FULLY_LOADED","COUNTER_PARTY_TYPE_NOT_SUPPORTED","GROUP_HAS_NO_MEMBERS","GROUP_MEMBERS_NOT_LOADED","IS_ROLE_ASSIGNMENT_GROUP","NO_COUNTER_PARTY","ORGANIZATION_DOES_NOT_EXIST","USER_IS_NOT_IN_THIS_ROLE_CONVERSATION","USER_IS_NOT_MEMBER_OF_GROUP","NONE"]),Jn=new Qn({CONTINUATION:{serverValue:"continuation"},CONVERSATION_END:{serverValue:"conversation_end"},FIRST_UNREAD_ITEM:{serverValue:"first_unread_item"}}),tr=new Qn({ACKNOWLEDGED:{serverValue:"escalation_acknowledged"},CANCELLED:{serverValue:"escalation_cancelled"},INITIATED:{serverValue:"escalation_initiated"},MEMBER_ADDED:{serverValue:"escalation_member_added"},NO_RESPONSE:{serverValue:"escalation_no_response"}}),er=new Qn({ACKNOWLEDGED:{serverValue:"confirmed"},CANCELLED:{serverValue:"cancelled"},IN_PROGRESS:{serverValue:"in_progress"},NO_RESPONSE:{serverValue:"no_response"}}),nr=new Xn(["ACTIVATED_TEAM","ESCALATION","FORUM","GROUP","INTRA_TEAM","PATIENT_CARE","PATIENT_MESSAGING","ROLE_ASSIGNMENT","ROLE_P2P"]),rr=new Qn({LOW:{serverValue:-1},NORMAL:{serverValue:0},HIGH:{serverValue:1}},{defaultValue:"NORMAL"}),ir=new Qn({NA:{key:"NA"},NEW:{serverValue:"New"},DELIVERED:{serverValue:"Delivered"},READ:{serverValue:"Read"},ACKNOWLEDGED:{serverValue:"Confirmed"}},{defaultValue:"NA"}),or=((Wn={})[ir.NA]=0,Wn[ir.NEW]=1,Wn[ir.DELIVERED]=2,Wn[ir.READ]=3,Wn[ir.ACKNOWLEDGED]=4,Wn),ar=ir,sr=new Xn(["SENDING","SENT","FAILED","RETRYING","NEW","NA"]),ur=new Qn({EMPTY_ROLE_NOTIFICATION:{serverValue:"empty_role_notification"},NA:{key:"NA"},ROLE_AWAY_NOTIFICATION:{serverValue:"role_away_notification"},SCHEDULE_MESSAGE:{serverValue:"schedule_message"},SMS_OPT_IN_NOTIFICATION:{serverValue:"sms_optin_notification"},SMS_OPT_OUT_NOTIFICATION:{serverValue:"sms_optout_notification"},SYSTEM:{serverValue:"system"},TEAM_REQUEST:{serverValue:"team_request"},USER_AWAY_NOTIFICATION:{serverValue:"user_away_notification"}},{defaultValue:"NA"}),cr=new Xn(["CALL_CHANGE","ESCALATION_EXECUTION_CHANGE","GROUP_MEMBERSHIP_CHANGE","HIGHER_CONTINUATION","LOWER_CONTINUATION","USER_SENT"]),lr=new Xn(["PATIENT","PROVIDER"]),dr=new Qn({ADD_MEMBERS:{serverValue:"add_members"}},{defaultValue:"NA"}),fr=new Qn({ADMIT:{serverValue:"admit"},DISCHARGE:{serverValue:"discharge"},LAB:{serverValue:"lab"},TRANSFER:{serverValue:"transfer"}},{defaultValue:"NA"}),hr=new Qn({ACTION:{serverValue:"ehr_action_item"},HEADER:{serverValue:"ehr_header"},ITEM:{serverValue:"table_item"},TEXT:{serverValue:"ehr_text_view"}},{defaultValue:"NA"}),pr=new Qn({UNKNOWN:{serverValue:"unknown"},AVAILABLE:{serverValue:"available"},UNAVAILABLE:{serverValue:"unavailable"}}),vr=new Qn({CONVERSATION_MESSAGE_STATUS:{serverValue:"conversation_message_status"},GROUP_REPLAY:{serverValue:"group_replay"},MESSAGE_REPLAY:{serverValue:"message_replay"},OFFLINE:{serverValue:"offline"},ORGANIZATION_MESSAGE_STATUS:{serverValue:"organization_message_status"},ORGANIZATION_REPLAY:{serverValue:"organization_replay"},ROLE_OPT_IN:{serverValue:"optin"},ROLE_OPT_OUT:{serverValue:"optout"}}),yr=new Qn({DISTRIBUTION_LIST_MEMBER:{serverValue:"dist_list_member"},DISTRIBUTION_LIST:{serverValue:"distribution_list"},FORUM:{serverValue:"public_group"},GROUP:{serverValue:"group"},MESSAGE_TEMPLATE:{serverValue:"message_template"},ORGANIZATION:{serverValue:"organization"},PATIENT_DISTRIBUTION_LIST:{serverValue:"patient_distribution_list"},PATIENT:{serverValue:"patient_account"},SCHEDULED_MESSAGE:{serverValue:"schedule_message"},TAG:{serverValue:"tag"},TEAM:{serverValue:"team"},USER:{serverValue:"account"}}),gr=new Xn(["GLOBAL","GROUP","ORGANIZATION"],{valueFn:function(t){return t.toLowerCase()}}),mr=new Xn(["VISIBLE","HIDDEN","PRERENDER"]),_r=n(123).a,br=new Xn(["ONLINE","OFFLINE","CONNECTING","UNREACHABLE"]),wr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ir=function(t){function e(e){var n=e.config,r=e.httpClient,i=e.logger,o=t.call(this)||this;return o.config=n,o.httpClient=r,o.logger=i,o}return wr(e,t),e.prototype.createEventSource=function(t,e){var n=this,r=e.auth,i=void 0===r?this.httpClient.getAuth():r,o=e.features,a=e.onOpen,s=e.onMessage,u=e.onError,c=/https?:/.test(t)?t:this.config.baseUrl+t,l=this.httpClient.getAuthHeaders(i,o);"TT-Route-Xmpp"===this.config.ttRoute&&(l["TT-Route-Xmpp"]="true"),o&&(l["TT-X-Features"]=o);var d=new _r(c,{headers:l}),f=!1,h=!1,p=!1,v=function(){p||(p=!0,d.removeEventListener("open",v),a&&a())},y=function(e){if(!f){f=!0,d.removeEventListener("error",y);var r,i=e?e.status:void 0;if(401===i)r=new Un.WrongCredentialsError,n.emit("auth:invalid");else if(403===i){r=new Un.PermissionDeniedError(t,"403","get"),n.emit("auth:invalid")}else e&&e.message&&e.stack?(r=new Error(e.message)).stack=e.stack:r=h?new Error("EventSource connection closed"+(i?": status "+i:"")):new Error("Could not establish EventSource connection"+(i?": status "+i:""));i&&(r.status=i),n.httpClient.networkStatus!==br.OFFLINE&&n.httpClient._setNetworkStatus(br.UNREACHABLE),u&&u(r)}};return d.addEventListener("open",v),d.addEventListener("error",y),d.addEventListener("message",(function(t){var e=!h;h||(h=!0,n.httpClient._setNetworkStatus(br.ONLINE)),s&&s(t,{isFirstMessage:e})})),d},e}(f.a),Or=n(58),Er=n.n(Or),Tr=n(3),Sr=n(199),Ar=n.n(Sr),Cr=n(125),Rr=n.n(Cr),Pr=n(126);function jr(t){return xr(function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t))}function xr(t){for(var e=new Uint8Array(t),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(e[r]);return n}for(var Mr={},kr={},Nr=0,zr=[{ext:"csv",mime:"text/csv"},{ext:"csv",mime:"text/plain"},{ext:"doc",mime:"application/msword"},{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:"gif",mime:"image/gif"},{ext:"gz",mime:"application/gzip"},{ext:"gz",mime:"application/x-gzip"},{ext:"gz",mime:"application/x-compressed"},{ext:"jpg",mime:"image/jpeg"},{ext:"jpeg",mime:"image/jpeg"},{ext:"m4a",mime:"audio/m4a"},{ext:"m4a",mime:"audio/x-m4a"},{ext:"m4a",mime:"audio/mp4"},{ext:"m4v",mime:"video/x-m4v"},{ext:"mov",mime:"video/quicktime"},{ext:"mp3",mime:"audio/mpeg"},{ext:"mp3",mime:"audio/mp3"},{ext:"mp3",mime:"audio/mpeg3"},{ext:"mp3",mime:"audio/x-mpeg"},{ext:"mp3",mime:"audio/x-mpeg-3"},{ext:"mp3",mime:"video/mpeg"},{ext:"mp3",mime:"video/x-mpeg"},{ext:"mp4",mime:"video/mp4"},{ext:"pdf",mime:"application/pdf"},{ext:"png",mime:"image/png"},{ext:"ppsx",mime:"application/vnd.openxmlformats-officedocument.presentationml.slideshow"},{ext:"ppt",mime:"application/vnd.ms-powerpoint"},{ext:"ppt",mime:"application/ms-powerpoint"},{ext:"ppt",mime:"application/mspowerpoint"},{ext:"ppt",mime:"application/powerpoint"},{ext:"ppt",mime:"application/x-mspowerpoint"},{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:"svg",mime:"image/svg+xml"},{ext:"txt",mime:"text/plain"},{ext:"wav",mime:"audio/wav"},{ext:"wav",mime:"audio/wave"},{ext:"wav",mime:"audio/x-pn-wav"},{ext:"wav",mime:"audio/x-wav"},{ext:"xls",mime:"application/vnd.ms-excel"},{ext:"xls",mime:"application/excel"},{ext:"xls",mime:"application/x-excel"},{ext:"xls",mime:"application/x-msexcel"},{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:"zip",mime:"application/zip"}];Nr<zr.length;Nr++){var Dr=zr[Nr],Ur=Dr.ext,Lr=Dr.mime;Mr[Lr]||(Mr[Lr]=[]),Mr[Lr].push(Dr),kr[Ur]||(kr[Ur]=[]),kr[Ur].push(Dr)}var Fr=Object.keys(Mr),Br=Object.keys(kr);function qr(t){return Mr[t]}function Vr(t){return t&&"."===t[0]&&(t=t.slice(1)),kr[t]}var Gr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Hr(t){var e=t.provideDefault,n=void 0!==e&&e;return function(t){var e=t.mime;var n=qr(e);if(n){var r=n[0];return{ext:r="."+r,mime:e}}}(Gr(t,["provideDefault"]))||(n?{ext:".bin",mime:"application/octet-stream"}:void 0)}var Wr=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Yr=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function Kr(t){var e=this;return Promise.resolve().then((function(){return Wr(e,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d;return Yr(this,(function(f){switch(f.label){case 0:e=[],n=0,r=0,(a=new FileReader).addEventListener("load",(function(){return i&&i(a.result)}),!1),a.addEventListener("error",(function(t){return o&&o(t)}),!1),s=function(){var s,u,c;return Yr(this,(function(l){switch(l.label){case 0:return r>0?[4,new Promise((function(t){return setTimeout(t,100)}))]:[3,2];case 1:l.sent(),l.label=2;case 2:return s=r+1048576,u=t.slice(r,s),r=s,[4,new Promise((function(t,e){i=t,o=e,a.readAsArrayBuffer(u)}))];case 3:return c=l.sent(),e.push(c),n+=c.byteLength,[2]}}))},f.label=1;case 1:return r<t.size?[5,s()]:[3,3];case 2:return f.sent(),[3,1];case 3:for(u=new Uint8Array(n),r=0,c=0,l=e;c<l.length;c++)d=l[c],u.set(new Uint8Array(d),r),r+=d.byteLength;return[2,{fieldValue:xr(u.buffer),mimetype:t.type||"application/octet-stream",filename:t.name}]}}))}))}))}for(var $r,Xr,Qr=function(t,e){return Wr(this,void 0,void 0,(function(){var e;return Yr(this,(function(n){switch(n.label){case 0:return e="",[3,2];case 1:return e=n.sent(),[3,4];case 2:return[4,Kr(t)];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}}))}))},Zr=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Jr=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ti=["application/json","text/plain"],ei=function(){function t(){this.body=new Pr.RequestBody,this.fileIdx=0,this.body.setType("multipart")}return t.prototype.appendField=function(t,e){return void 0===e&&(e=""),Zr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return Jr(this,(function(f){if(Array.isArray(e))for(n=0,r=0,i=e;r<i.length;r++){if(o=i[r],"data"===t&&"object"==typeof o){if(a=o.mimetype,s=void 0===a?"application/json":a,u=o.namespace,c=o.payload,l=void 0===c?"":c,!u)throw new Error("Missing namespace on data["+n+"] object");null,d={"TT-X-Namespace":u},this._appendParsedField(t,{fieldValue:String(l),mimetype:s,filename:null,headers:d})}else this.appendField(t,o);n++}else e&&e.nodeType&&e.nodeName&&e.getAttribute&&(e=e.value),"object"==typeof e?this._appendParsedField(t,{fieldValue:JSON.stringify(e),mimetype:"application/json"}):this._appendParsedField(t,{fieldValue:String(e),mimetype:"text/plain"});return[2]}))}))},t.prototype._appendParsedField=function(t,e){var n=e.fieldValue,r=e.filename,i=e.headers,o=e.mimetype,a=this.body.fields;r?r=jr(r):n=jr(n),ti.includes(o)&&(o+='; charset="utf-8"');var s=new Pr.RequestField(n,o,r,i);a.hasOwnProperty(t)?(Array.isArray(a[t])||(a[t]=[a[t]]),a[t].push(s)):a[t]=s},t.prototype.appendFile=function(t,e){return Zr(this,void 0,void 0,(function(){var n;return Jr(this,(function(r){switch(r.label){case 0:return n="",e?[4,Qr(e,{idx:this.fileIdx++})]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return this._appendParsedField(t,n),[2]}}))}))},t.prototype.getContentType=function(){return this.body.getContentType()},t.prototype.getPayload=function(){return Zr(this,void 0,void 0,(function(){var t;return Jr(this,(function(e){return t=this.body.getData(),[2,new Blob([t])]}))}))},t}(),ni=function(){return(ni=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ri=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ii=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},oi=[Un.PermissionDeniedError.CODE,Un.WrongCredentialsError.CODE],ai=function(){function t(t){var e=this,n=t.config,r=t.logger;this.downloadFileBlobAndUrl=function(t){return ri(e,void 0,void 0,(function(){var e;return ii(this,(function(n){switch(n.label){case 0:return[4,this.downloadFileBlob(t)];case 1:return[2,{blob:e=n.sent(),get url(){return this._url||(this._url=URL.createObjectURL(e))}}]}}))}))},this.config=n,this.logger=r,this._prefixBaseUrl=Rr()(this.config.baseUrl),this._watchNetworkConnection()}return t.prototype.mounted=function(){this._prefixBaseUrl=Rr()(this.config.baseUrl)},t.prototype._contentType=function(t){switch(t){case"json":return"application/json";case"event-stream":return"text/event-stream";case"text":default:return"plain/text"}},t.prototype.getAuth=function(t){return this._auth},t.prototype.setAuth=function(t){this._auth=t},t.prototype.removeAuth=function(){this._auth=null},Object.defineProperty(t.prototype,"isSignedIn",{get:function(){return!!this._auth},enumerable:!1,configurable:!0}),t.prototype.getAuthForKeyAndSecret=function(t,e){return t&&e?Er()(t+":"+e):null},t.prototype.getAuthHeaders=function(t){if(void 0===t&&(t=this._auth),!t)return{};var e={};if(t.key&&t.secret)e.Authorization="Basic "+this.getAuthForKeyAndSecret(t.key,t.secret);else{if(!t.bearerToken||!t.udid)return{};e.Authorization="Bearer "+t.bearerToken,e["X-Device-ID"]=t.udid}return e},t.prototype.isUnauthorizedError=function(t){return t&&oi.includes(t.code)},t.prototype.downloadFileBlob=function(t,e){var n=this,r=(void 0===e?{}:e).headers,i=void 0===r?{}:r;return new Promise((function(e,r){var o=new XMLHttpRequest,a=n.config.baseUrl+t;o.open("GET",a,!0);for(var s=0,u=Object.entries(n.getAuthHeaders());s<u.length;s++){var c=u[s],l=c[0],d=c[1];o.setRequestHeader(l,d)}for(var f=0,h=Object.entries(i);f<h.length;f++){var p=h[f];l=p[0],d=p[1];o.setRequestHeader(l,d)}o.responseType="blob",o.onreadystatechange=function(){4===o.readyState&&(o.status<200||o.status>299?r(new Error("Failed downloading "+a+". Status = "+o.status)):e(o.response))},o.send(null)}))},t.prototype.downloadToFile=function(t,e){Un.TargetNotSupportedError.raise()},t.prototype._watchNetworkConnection=function(){var t=this;this.networkStatus=navigator.onLine?br.ONLINE:br.OFFLINE,window.addEventListener("online",(function(){t.config.eventsAutoReconnect?t._setNetworkStatus(br.CONNECTING):t._setNetworkStatus(br.ONLINE)})),window.addEventListener("offline",(function(){t._setNetworkStatus(br.OFFLINE)}))},t.prototype._setNetworkStatus=function(t){var e=this.networkStatus;t!==e&&(this.networkStatus=t,this.emit("networkStatus:change",{networkStatus:t,previousStatus:e}))},t}(),si=function(t){ai.prototype[t]=function(e,n){return void 0===n&&(n={}),ri(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_=this;return ii(this,(function(b){switch(b.label){case 0:if((n=y.a.defaults(n||{},{reqFormat:"json",resFormat:"json",withCredentials:!0,withHeaders:!0})).urlParams&&(e=e.replace(/:([\w-]+)/g,(function(t,e){var r=n.urlParams[e];return void 0!==r?encodeURIComponent(r):":"+e}))),this.logger&&this.logger.info("start",t.toUpperCase(),e,n),(r=ni(ni({},n.headers),"TT-Route-Xmpp"===this.config.ttRoute?{"TT-Route-Xmpp":"true"}:null)).Accept=r.Accept||this._contentType(n.resFormat),n.requestId&&(r["Request-ID"]=n.requestId),"Authorization"in r||Object.assign(r,this.getAuthHeaders(n.auth)),i=Ar.a[t](e).use(this._prefixBaseUrl).query(n.query||{}),n.withCredentials&&(i=i.withCredentials()),!1!==n.retry&&(i=i.retry(n.retryCount||3)),!1!==n.timeout&&(i=i.timeout(!0===n.timeout?1e4:n.timeout)),(a=n.files&&Object.entries(n.files))&&a.length>0?(o=new ei,r["Content-Type"]=o.getContentType()):r["Content-Type"]=r["Content-Type"]||this._contentType(n.reqFormat),n.withHeaders&&(i=i.set(r)),!o)return[3,3];if(s=[],n.data)for(u=0,c=Object.entries(n.data);u<c.length;u++)l=c[u],v=l[0],d=l[1],s.push(o.appendField(v,d));for(f=0,h=a;f<h.length;f++)p=h[f],v=p[0],g=p[1],s.push(o.appendFile(v,g));return[4,Promise.all(s)];case 1:return b.sent(),[4,o.getPayload(o)];case 2:return m=b.sent(),i=i.send(m),[3,4];case 3:i=i.send(n.data),b.label=4;case 4:return[2,new Promise((function(r,o){i.end((function(i,a){var s=(a||{}).headers;if(i)if(_.logger&&_.logger.info("error",t.toUpperCase(),e,i),i.status)if(401===i.status)o(new Un.WrongCredentialsError(s));else if(403===i.status){var u=(n.urlParams||{}).userId,c=void 0===u?"403":u;o(new Un.PermissionDeniedError(e,c,t,y.a.get(a,"body.error.message")))}else o(i);else o(new Un.ConnectionUnavailableError);else switch(n.resFormat){case"json":var l=a.body||{};"reply"in l&&(l=l.reply);var d={data:l,headers:s,getHeader:function(t){return s[t.toLowerCase()]},status:a.status};_.logger&&_.logger.info("success",t.toUpperCase(),e,d),r(d);break;default:_.logger&&_.logger.info("success",t.toUpperCase(),e,a.text?a.text.substr(0,80)+"...":"[null]"),r(a.text)}}))}))]}}))}))}},ui=0,ci=["get","post","put","patch","del"];ui<ci.length;ui++){si(ci[ui])}$r=ai.prototype.get,Xr=Object(Tr.decorator)($r),ai.prototype.get=function(t,e){return void 0===e&&(e={}),e.reusePromise?Xr.call(this,t,e):$r.call(this,t,e)},Object.assign(ai.prototype,f.a.prototype);var li=ai,di=n(22),fi=n.n(di);function hi(t){if(!t)return t;var e=t.split("T")[0];if(e.includes("-")){var n=e.split("-"),r=n[0];return[n[1],n[2],r].join("/")}if(e.includes("/")){var i=e.split("/");return[i[0],i[1],r=i[2]].join("/")}return t}function pi(t){if(!t||!parseInt(t))return"";var e=parseInt(t),n=Math.floor(e/86400),r=e%86400,i=new Date(0);i.setSeconds(r);var o=i.toISOString().substr(11,8).split(":").map((function(t){return parseInt(t)})),a=o[0],s=o[1],u=o[2]+" sec";return(s||a||n)&&(u=s+" min "+u),(a||n)&&(u=a+24*n+" hr "+u),u}var vi=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},yi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function gi(t){var e=t.attachmentContentType,r=t.blob,i=t.fileName;return vi(this,void 0,void 0,(function(){var t,o,a,s;return yi(this,(function(u){switch(u.label){case 0:return(t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&navigator.userAgent.match("chrome")?[4,mi(r)]:[3,2];case 1:return o=u.sent(),a=function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++){var o=e.charCodeAt(i);r[i]=o}return r}(o),_i(i,a,e),[3,3];case 2:t?(s=window.URL.createObjectURL(r),window.open(s,"_blank")):(0,n(407).saveAs)(r,i),u.label=3;case 3:return[3,5];case 4:Un.TargetNotSupportedError.raise(),u.label=5;case 5:return[2]}}))}))}function mi(t){return new Promise((function(e,n){var r=new FileReader;r.addEventListener("load",(function(){e(r.result)}),!1),r.addEventListener("error",(function(t){n(t)}),!1),r.readAsDataURL(t)}))}function _i(t,e,n){var r=new FileReader,i=new Blob([e],{type:n});r.fileName=t,r.onload=function(t){window.open(r.result,"_blank")},r.readAsDataURL(i)}var bi=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return n&&n.configurable},wi=function(t){return void 0!==t?JSON.parse(JSON.stringify(t)):null},Ii=n(5);function Oi(t,e,n){!(n in t)&&e in t&&(t[n]=t[e],delete t[e])}var Ei=n(87),Ti=n.n(Ei),Si=Object.prototype.hasOwnProperty,Ai=Symbol("NOT_PROVIDED"),Ci=function(){function t(t){this.cmp=t}return t.prototype.add=function(t,e){var n=Ti.a.gt(t,e,this.cmp);-1!==n?t.splice(n,0,e):t.push(e)},t.prototype.indexOf=function(t,e,n){var r=n&&Si.call(n,"previousValue")?n.previousValue:Ai,i=t.length;if(r===Ai||0===this.cmp(e,r)){if(-1!==(o=-1===(o=Ti.a.gt(t,e,this.cmp))?i-1:o-1)){for(;o>0&&0===this.cmp(t[o-1],e);)o--;for(;o<i&&0===this.cmp(t[o],e);){if(t[o]===e)return o;o++}}}else for(var o=0;o<i;){if(t[o]===e)return o;o++}return-1},t.prototype.remove=function(t,e,n){var r=this.indexOf(t,e,n);return-1!==r&&(t.splice(r,1),!0)},t.prototype.removeAll=function(t,e,n){var r=n&&Si.call(n,"previousValue")?n.previousValue:Ai,i=this.indexOf(t,e,n),o=!1;if(-1!==i)for(var a=r===Ai||0===this.cmp(e,r);i<t.length&&(!a||0===this.cmp(t[i],e));)t[i]===e?(t.splice(i,1),o=!0):i++;return o},t.prototype.update=function(t,e,n){var r=n&&Si.call(n,"previousValue")?n.previousValue:Ai,i=r===Ai||0===this.cmp(e,r),o=this.indexOf(t,e,n);if(-1!==o){if(i)return!1;t.splice(o,1)}return-1!==(o=Ti.a.gt(t,e,this.cmp))?t.splice(o,0,e):t.push(e),!0},t}();Ri=encodeURIComponent;var Ri,Pi=n(82),ji={isNotEmpty:function(t,e){return!!e},notEmpty:function(t,e,n){ji.isNotEmpty(t,e)||(n||(n="expected "+t+" to be provided"),ji.raise(t,void 0,n))},isOneOf:function(t,e,n){return n.includes(e)},oneOf:function(t,e,n,r){ji.isOneOf(t,e,n)||(r||(r="expected "+e+" to be one of ("+n.join(", ")+")"),ji.raise(t,void 0,r))},raise:function(t,e,n){throw void 0===e&&(e="invalid"),new Pi.a(t,e,n)}},xi=ji;function Mi(){return ki(this)}function ki(t){return Array.isArray(t)?t:null!=t?[t]:[]}var Ni=function(){function t(t,e){this._resolveModelId=function(t){return"string"==typeof t?t:t&&(t.serverId||t.id)||null},Object.assign(this,e),this.host=t,this.config=t.config,this.httpClient=t.httpClient}return t.prototype._resolveModelIdWithTypes=function(t,e){if(!t)return null;if("string"==typeof t){var n=this._resolveEntity(t);if(!n)return t;t=n}return xi.oneOf("thing",t.$entityType,ki(e)),t.serverId||t.id||null},t.prototype._resolveEntity=function(t,e){e=e?ki(e):this.host.allModelEntityTypes,"object"==typeof t&&(t.$entityType&&(xi.oneOf("thing",t.$entityType,e),e=[t.$entityType]),t=t.id);for(var n=0,r=e;n<r.length;n++){var i=r[n],o=this.host.modelsByEntityType[i].get(t);if(o)return o}return null},t.prototype.mounted=function(){},t.prototype.dispose=function(){},t}(),zi=Ni;Object.assign(Ni.prototype,f.a.prototype);var Di,Ui,Li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fi=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Bi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Li(e,t),e.prototype.start=function(t){var e=t.organizationId,n=t.recipients,r=t.payload,i=t.context;return Fi(this,void 0,void 0,(function(){var t,o,a,s,u,c,l,d,f,h,p,v,y,g,m,_,b,w;return Bi(this,(function(O){switch(O.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("recipients","required");if(!r)throw new Un.ValidationError("payload","required");if(!n.length)throw new Un.ValidationError("recipients array","required");if(t=r.callId,o=r.callerId,a=r.date,s=r.groupId,u=r.identity,c=r.isVideo,l=r.name,d=r.networkType,f=r.orgId,h=r.participantsTokens,p=r.recipientToken,v=r.roleTokens,!t)throw new Un.ValidationError("payload.callId","required");if(!o)throw new Un.ValidationError("payload.callerId","required");if(!a)throw new Un.ValidationError("payload.date","required");if(!s)throw new Un.ValidationError("payload.groupId","required");if(!u)throw new Un.ValidationError("payload.identity","required");if(void 0===c)throw new Un.ValidationError("payload.isVideo","required");if(!l)throw new Un.ValidationError("payload.name","required");if(!d)throw new Un.ValidationError("payload.networkType","required");if(!f)throw new Un.ValidationError("payload.orgId","required");if(!h)throw new Un.ValidationError("payload.participantsTokens","required");if(!p)throw new Un.ValidationError("payload.recipientToken","required");if(!v)throw new Un.ValidationError("payload.roleTokens","required");return[4,this.host.api.calls.start({organization:e,recipients:n,payload:I.a.underscoreObject(r),context:i||{}})];case 1:return y=O.sent(),g=y.accessToken,m=y.roomName,_=y.disabledParticipants,b=void 0===_?{}:_,w={},m?(w=this.host.models.Call.inject({id:m,payload:r,accessToken:g,roomName:m}),"patient"===d&&Object.keys(b).length?[4,this.host.api.calls.state(m,f,{callId:t,payload:{callState:"disabled_participants",disabledParticipants:b}})]:[3,3]):[3,3];case 2:O.sent(),O.label=3;case 3:return[2,w]}}))}))},e.prototype.decline=function(t,e){var n=e.payload;return Fi(this,void 0,void 0,(function(){var e,r,i,o,a;return Bi(this,(function(s){switch(s.label){case 0:if(e=this._resolveModelId(t),r=this._resolveEntity(e,"call"),i=r.callId,o=r.organizationId,a=r.id,!o)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("payload","required");if(!a)throw new Un.ValidationError("roomName","required");if(!i)throw new Un.ValidationError("callId","required");return[4,this.host.api.calls.decline(a,o,{callId:i,payload:n})];case 1:return s.sent(),[2]}}))}))},e.prototype.end=function(t,e){var n=e.payload,r=e.reason;return Fi(this,void 0,void 0,(function(){var e,i,o,a,s;return Bi(this,(function(u){switch(u.label){case 0:if(e=this._resolveModelId(t),i=this._resolveEntity(e,"call"),o=i.callId,a=i.organizationId,s=i.id,!a)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("payload","required");if(!r)throw new Un.ValidationError("reason","required");if(!s)throw new Un.ValidationError("roomName","required");if(!o)throw new Un.ValidationError("callId","required");return[4,this.host.api.calls.end(s,a,{callId:o,payload:n,reason:r})];case 1:return u.sent(),[2]}}))}))},e.prototype.join=function(t){return Fi(this,void 0,void 0,(function(){var e,n,r,i,o;return Bi(this,(function(a){switch(a.label){case 0:if(e=this._resolveModelId(t),n=this._resolveEntity(e,"call"),r=n.organizationId,i=n.id,!r)throw new Un.ValidationError("organizationId","required");if(!i)throw new Un.ValidationError("roomName","required");return[4,this.host.api.calls.join(i,r)];case 1:return o=a.sent(),[2,I.a.camelizeObject(o)]}}))}))},e.prototype.answer=function(t,e){var n=e.payload;return Fi(this,void 0,void 0,(function(){var e,r,i,o,a,s;return Bi(this,(function(u){switch(u.label){case 0:if(e=this._resolveModelId(t),r=this._resolveEntity(e,"call"),i=r.callId,o=r.organizationId,!(a=r.id))throw new Un.ValidationError("roomName","required");if(!o)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("payload","required");if(!i)throw new Un.ValidationError("callId","required");return[4,this.host.api.calls.answer(a,o,{payload:n,callId:i})];case 1:return s=u.sent(),[2,I.a.camelizeObject(s)]}}))}))},e.prototype.invite=function(t,e){var n=e.currentUserId,r=e.payload,i=e.recipients;return Fi(this,void 0,void 0,(function(){var e,o,a,s,u;return Bi(this,(function(c){switch(c.label){case 0:if(e=this._resolveModelId(t),o=this._resolveEntity(e,"call"),a=o.callId,s=o.organizationId,u=o.id,!s)throw new Un.ValidationError("organizationId","required");if(!u)throw new Un.ValidationError("roomName","required");if(!r)throw new Un.ValidationError("payload","required");if(!i)throw new Un.ValidationError("recipients","required");if(!a)throw new Un.ValidationError("callId","required");if(!n)throw new Un.ValidationError("currentUserId","required");return[4,this.host.api.calls.invite(u,s,{callId:a,payload:r,recipients:i})];case 1:return c.sent(),[4,this.host.api.calls.state(u,s,{callId:a,payload:{callState:"participants_updated",inviteInitiator:n,newParticipants:i,roleTokens:{}}})];case 2:return c.sent(),[2]}}))}))},e.prototype.log=function(t){var e=t.network,n=t.organizationId,r=t.page;return Fi(this,void 0,void 0,(function(){var t,i,o,a=this;return Bi(this,(function(s){switch(s.label){case 0:if(!n)throw new Un.ValidationError("organizationId","required");if(!e)throw new Un.ValidationError("network","required");return[4,this.host.api.calls.log({network:e,organizationId:n,page:r})];case 1:return t=s.sent(),i=t.metadata,o=t.results,[2,{metadata:i,results:o.map((function(t){return a.host.models.CallLogEntry.inject(t)}))}]}}))}))},e.prototype.reactToVoipSSE=function(t){var e=t.data,n=t.type;if(e=wi(e),"provider"!==fi()(e,"payload.network_type")||!1!==this.config.allowProviderCalling){var r=n.split(":")[1],i=this.host.models.Call.inject(Object.assign(e,{callStatus:r}));this.emit(r,i)}},e}(zi),Vi=n(35),Gi=n.n(Vi),Hi=n(200),Wi=n.n(Hi),Yi=n(27),Ki=n.n(Yi),$i=n(10),Xi=n.n($i),Qi=n(85),Zi=n.n(Qi),Ji=n(25),to=n.n(Ji),eo=n(84),no=n.n(eo),ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),io=function(){return(io=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},oo=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ao=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},so=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},uo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},co=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},lo=new no.a.MD5,fo=[cr.ESCALATION_EXECUTION_CHANGE,cr.GROUP_MEMBERSHIP_CHANGE],ho=ar.toServer(ar.DELIVERED),po=((Di={})[tr.ACKNOWLEDGED]="Acknowledged",Di[tr.CANCELLED]="Cancelled",Di[tr.INITIATED]="Initiated",Di[tr.MEMBER_ADDED]="Added",Di[tr.NO_RESPONSE]="ended with No Response",Di),vo=[nr.GROUP,nr.FORUM,nr.ROLE_ASSIGNMENT,nr.ROLE_P2P],yo={ADD:"added",JOIN:"joined",LEAVE:"left",REMOVE:"removed",DENY:"declined"},go={ADD:"to",REMOVE:"from",DENY:"to join"},mo=((Ui={})[nr.ACTIVATED_TEAM]="group",Ui[nr.ESCALATION]="escalation",Ui[nr.FORUM]="forum",Ui[nr.GROUP]="group",Ui[nr.PATIENT_CARE]="care team",Ui[nr.ROLE_P2P]="conversation",Ui[nr.PATIENT_MESSAGING]="group",Ui[nr.INTRA_TEAM]="team",Ui),_o=[ar.NEW,ar.DELIVERED],bo=ar.toServer(ar.READ),wo={OPT_IN:"opted into",OPT_OUT:"opted out of"},Io=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__injectCounterParty=function(t){var n=t.conversationId,r=t.entityAttrs,i=t.entityType,o=t.groupType,a=t.hasCurrentUser,s=void 0!==a&&a,u=t.isPlaceholder,c=void 0!==u&&u,l=t.organizationId,d=r.id,f=r.metadata;if(d||(d=r.token),!i&&r.type&&(i=e.host.modelNameByEntityType(r.type)),n&&(r.conversationId=n),l&&(r.organizationId=l),"group"!==i||o||(o=e.host.groups.__extractGroupTypeFromAttrs(r)),f&&d&&l&&e.host.metadata.__injectMetadata(d,l,f),"group"===i){if(f){if(f.created_by){var h=e.__injectCreatedByEntity(f,l),p=h.role,v=void 0===p?null:p,y=h.user,g=void 0===y?null:y;(v||g)&&(r.createdByRole=v,r.createdByUser=g)}else if(r.created_by){g=e.host.models.User.injectPlaceholder({id:r.created_by});r.createdByUser=g}if(f.target_id){var m=e.__injectTargetEntity(f,l),_=m.role,b=(v=void 0===_?null:_,m.user);g=void 0===b?null:b;(v||g)&&(r.targetRole=v,r.targetUser=g)}if("role_assignment"===f.meta_type){var w=r.display_name||r.name;e.host.roles.__injectRoleAssignmentEntity(w,f,l)}}o===nr.FORUM&&s&&(r.hasCurrentUser=!0)}else if("user"===i){var I=r.dnd_auto_forward_receiver;I&&"undefined"!==I&&e.host.models.User.injectPlaceholder({id:I})}else if("distributionList"===i)r.created_by&&e.host.injectPlaceholderModel({displayName:r.created_by_display_name,id:r.created_by},"user"),r.updated_by&&e.host.injectPlaceholderModel({displayName:r.updated_by_display_name,id:r.updated_by},"user");else if("messageTemplate"===i)r.created_by&&e.host.injectPlaceholderModel({displayName:r.created_by_display_name,id:r.created_by},"user"),r.updated_by&&e.host.injectPlaceholderModel({displayName:r.updated_by_display_name,id:r.updated_by},"user");else if("scheduledMessage"===i){if(r.event_id&&(r.scheduled_message_id=r.token,r.token=r.event_id,d=r.event_id),r.recipient)if("account"===r.recipient_type){for(var O={},E=0,T=["feature_service","is_patient_contact","patient_display_name","patient_dob","patient_gender","patient_id","patient_mrn","phone_number","relation_name"];E<T.length;E++){var S=T[E];O[S]=r[S]}O.patient_id||O.is_patient_contact||(O.patient_id=r.recipient),e.host.metadata.__injectMetadata(r.recipient,l,O),e.host.injectPlaceholderModel(io(io({},O),{displayName:r.recipient_display_name,id:r.recipient}),"user")}else"distribution_list"!==r.recipient_type&&"list"!==r.recipient_type||e.host.injectPlaceholderModel({id:r.recipient,name:r.recipient_display_name,totalMembers:r.total_members},"distributionList");r.sender_token&&e.host.injectPlaceholderModel({displayName:r.sender_display_name,id:r.sender_token},"user"),r.template_id&&e.host.injectPlaceholderModel({title:r.template_label,id:r.template_id},"messageTemplate"),r.updated_by&&e.host.injectPlaceholderModel({displayName:r.updated_by_display_name,id:r.updated_by},"user")}return d?c?e.host.injectPlaceholderModel(r,i):e.host.injectModel(r,i):null},e.__injectCreatedByEntity=function(t,n){var r={};if(void 0!==t.created_by_tag_id)r.role=e.host.roles.__injectRoleFromMetadata({metadata:{token:t.created_by,display_name:t.created_by_display_name,tag_color:t.created_by_tag_color,tag_id:t.created_by_tag_id,tag_name:t.created_by_tag_name},organizationId:n,replaceExisting:!1});else{var i=e.host.models.User.get(t.created_by);if(i)r.user=i;else{var o={id:t.created_by};"created_by_display_name"in t&&(o.displayName=t.created_by_display_name),r.user=e.host.models.User.injectPlaceholder(o)}}return r},e.__injectTargetEntity=function(t,n){var r={};if(void 0!==t.target_tag_id)r.role=e.host.roles.__injectRoleFromMetadata({metadata:{display_name:t.target_display_name,tag_color:t.target_tag_color,tag_id:t.target_tag_id,tag_name:t.target_tag_name,token:t.target_id},organizationId:n,replaceExisting:!1});else{var i=e.host.models.User.get(t.target_id);if(i)r.user=i;else{var o={id:t.target_id};"target_display_name"in t&&(o.displayName=t.target_display_name),r.user=e.host.models.User.injectPlaceholder(o)}}return r},e.__removeFriend=function(t){var n,r=t.attrs,i=t.entityType,o=t.id,a=t.organizationId,s=t.conversation||e.get(i,o,a),u="group"===i?e.host.models.Group.get(o):null,c=!(!u||u.groupType!==nr.FORUM);if(n="user"===i||e.config.condensedReplays?s&&s.content.slice():s&&s.messages.slice(),c&&(r.hasCurrentUser=!1,r.members=null,e.host.models.Group.inject(r)),e.config.keepConversationsForAllForums&&c||(s&&e.__ejectConversation(s.id),u&&e.config.condensedReplays&&e.host.models.Group.eject(u)),Array.isArray(n))for(var l=0,d=n;l<d.length;l++){var f=d[l];e.host.ejectModel(f,f.$entityType)}},e._sanitizeGroupAttrs=function(t){var n=t.members;e.host.groups.__extractGroupTypeFromAttrs(t)===nr.FORUM&&n&&0===n.length&&delete t.members},e._onSendingMessage=function(t){var n;if(n=e.config.condensedReplays?t.conversation:e.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId,{ensureEntities:{counterParty:"full",organization:"placeholder",messageCounterParties:"full",groupMembers:"full",touchOnRelatedEntityLoad:!0}})){var r=!1;e.host.config.condensedReplays&&t&&t.sortNumber&&(void 0===n.highestSortNumber||n.highestSortNumber<t.sortNumber)&&(n.highestSortNumber=t.sortNumber,r=!0),void 0===n.highestSortNumber&&(n.highestSortNumber=e.host.messages.__getNextSortNumber(n.organizationId),r=!0),r&&e.host.models.Conversation.inject(n),e.__addConversationCounterPartyToServerRosterIfShould(n)}},e._onSentMessage=function(t){var n=!1,r=e.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);r&&(e.host.config.condensedReplays&&(t&&t.sortNumber&&(void 0===r.highestSortNumber||r.highestSortNumber<t.sortNumber)?(r.highestSortNumber=t.sortNumber,n=!0):void 0===r.highestSortNumber&&(r.highestSortNumber=e.host.messages.__getNextSortNumber(r.organizationId),n=!0)),n&&e.host.models.Conversation.inject(r),r.emit("message",t))},e._onChangeMessage=function(t,n){n.conversation&&e.__queueReload(n.conversation)},e._onRemoveMessage=function(t,n){var r=n.conversation;if(r){if(e.config.condensedReplays){var i=r.firstExpiringUnreadMessage,o=r.id,a=r.lastMessage,s=r.timeline;if(!(r=e.getById(o)))return;var u=a===n,c=i===n,l=1===s.length&&u;(u||c)&&e.find(r.id),l&&(r.lastMessage=null)}e.__queueReload(r)}},e._onRemoveGroup=function(t,n){var r=n.conversationId?n.conversationId:e.getConversationKey("group",n.id,n.organizationId);e.__ejectConversation(r)},e._onRemoveTeam=function(t,n){var r=e.getConversationKey("team",n.id,n.organizationId);e.__ejectConversation(r)},e._onChangeGroup=function(t,n){n.conversationId&&e.host.models.Conversation.touch(n.conversationId)},e._onChangeOrganization=function(t,n){var r=n.conversations,i=e.__escalationEnabledOrganizations.indexOf(n),o=i>-1;if(o!==n.canEscalateMessages&&(o?e.__escalationEnabledOrganizations.splice(i,1):e.__escalationEnabledOrganizations.push(n),r))for(var a=0,s=r;a<s.length;a++){var u=s[a];e.__queueReload(u)}},e.__flushConversationsToReload=function(){if(!e.host.currentlyServingOfflineMessages&&e.__queuedConversationsToReload.length>0){var t=[];e.host.organizations._deferConversationChanges=!0;for(var n=0,r=e.__queuedConversationsToReload;n<r.length;n++){var i=r[n],o=i.organizationId;e.__reloadConversation(i),t.includes(o)||t.push(o)}e.host.organizations._deferConversationChanges=!1;for(var a=0,s=t;a<s.length;a++){o=s[a];var u=e.host.organizations.getById(o);u&&e.host.organizations.__reloadConversations(u)}e.__queuedConversationsToReload.length=0}},e}return ro(e,t),e.prototype.mounted=function(){this.__escalationEnabledOrganizations=[],this.__queuedConversationsToReload=[],this._convByConvHandle={},this._fetched=!1,this._roleConversationsProcessingEvent={},this._rolesFriendsEventPromise=null,this.host.on("message:sending",this._onSendingMessage),this.host.on("message:sent",this._onSentMessage),this.host.models.Group.on("afterEject",this._onRemoveGroup),this.host.models.Group.on("afterInject",this._onChangeGroup),this.host.models.Team.on("afterEject",this._onRemoveTeam),this.host.models.Message.on("afterInject",this._onChangeMessage),this.host.models.Message.on("afterEject",this._onRemoveMessage),this.host.models.Organization.on("afterInject",this._onChangeOrganization)},e.prototype.dispose=function(){this._convByConvHandle={},this._fetched=!1,this._rolesFriendsEventPromise=null,this.__escalationEnabledOrganizations=[],this.__queuedConversationsToReload=[],this.host.removeListener("message:sending",this._onSendingMessage),this.host.removeListener("message:sent",this._onSentMessage),this.host.models.Group.removeListener("afterEject",this._onRemoveGroup),this.host.models.Group.removeListener("afterInject",this._onChangeGroup),this.host.models.Team.removeListener("afterEject",this._onRemoveTeam),this.host.models.Message.removeListener("afterInject",this._onChangeMessage),this.host.models.Message.removeListener("afterEject",this._onRemoveMessage),this.host.models.Organization.removeListener("afterInject",this._onChangeOrganization)},e.prototype.clearTimeline=function(t,e){var n=(void 0===e?{}:e).emit,r=void 0===n||n,i=this._resolveEntity(t,"conversation");if(!i)throw new Un.NotFoundError(this.host.models.Conversation.name,t);t=this._resolveModelId(t),this.clearMessageStatuses(i,{emit:!1});for(var o=i.higherContinuation,a=i.lowerContinuation,s=0,u=0,c=i.timeline;u<c.length;u++){var l=c[u];l.isEphemeral||(l.inTimeline=!1,s+=1)}return i.isLive=!1,o.itemsEstimate=null,a.itemsEstimate=null,r&&this.emit("clearTimeline",t),this.config.condensedReplays?this.host.models.Conversation.inject(i):this.__reloadConversation(i,{notify:!1}),s},e.prototype.fetchTimeline=function(t,e){var n=void 0===e?{}:e,r=n.anchorPoint,i=void 0===r?Jn.CONVERSATION_END:r,o=n.continuation,a=n.fetchAllItems,s=void 0!==a&&a,u=n.markAsDelivered,c=void 0===u||u,l=n.maxItems,d=void 0===l?15:l;return ao(this,void 0,void 0,(function(){var e,n,r,a,u,l,f,h,p,v,y,g,m,_,b,w,I,O,E,T;return so(this,(function(S){switch(S.label){case 0:if(!(e=this._resolveEntity(t,"conversation")))throw new Un.NotFoundError(this.host.models.Conversation.name,t);return t=this._resolveModelId(t),this.config.condensedReplays?[4,this._fetchTimelineCR(t,{anchorPoint:i,continuation:o,conversation:e,fetchAllItems:s,markAsDelivered:c,maxItems:d})]:[3,2];case 1:return[2,S.sent()];case 2:if(i!==Jn.CONTINUATION&&e.isLive&&(!s&&e.timeline.length>=d||e.lowerContinuation&&0===e.lowerContinuation.itemsEstimate))return[2,0];if(n=e.content,r=e.timeline,a=e.firstUnreadMessage,u=n.length,l=0,f=[],h=u-d,p=u,i===Jn.CONVERSATION_END)this.clearTimeline(e,{emit:!1});else if(i===Jn.FIRST_UNREAD_ITEM){for(this.clearTimeline(e,{emit:!1}),b=-1,v=0,y=n;v<y.length&&(T=y[v],b++,p=b,a!==T);v++);p<n.length&&(p=Math.min(p+d,n.length))}else if(i===Jn.CONTINUATION)if(g=r[0]?r[0].sortNumber:1/0,m=r[r.length-1]?r[r.length-1].sortNumber:0,0===(_="LOWER"===o?g:m))p-=d;else for(b=-1,w=0,I=n;w<I.length&&(T=I[w],b++,p=b,!("HIGHER"===o&&T.sortNumber>_))&&!("LOWER"===o&&T.sortNumber>=_);w++);for(i!==Jn.CONVERSATION_END&&(i===Jn.CONTINUATION&&"HIGHER"===o?u=(h=p)+d:(p===n.length-1&&(p+=1),u=p,h=p-d)),u=Math.min(u,n.length+1),h=Math.max(h,0),f.push.apply(f,n.slice(h,u)),O=0,E=f;O<E.length;O++)(T=E[O]).inTimeline||(T.inTimeline=!0,this.host.models.Message.inject(T),l+=1);return[2,l]}}))}))},e.prototype._fetchTimelineCR=function(t,e){var n=void 0===e?{}:e,r=n.anchorPoint,i=void 0===r?Jn.CONVERSATION_END:r,o=n.continuation,a=n.conversation,s=n.fetchAllItems,u=void 0!==s&&s,c=n.markAsDelivered,l=void 0===c||c,d=n.maxItems,f=void 0===d?15:d;return ao(this,void 0,void 0,(function(){var e,n,r,s,c,d,h,p,v,y,g,m,_,b,w,I,O,E,T,S,A;return so(this,(function(C){switch(C.label){case 0:return i!==Jn.CONTINUATION&&a.isLive&&(!u&&a.timeline.length>=f||a.lowerContinuation&&0===a.lowerContinuation.itemsEstimate)?[2,0]:(i===Jn.CONVERSATION_END?this.clearTimeline(a,{emit:!1}):i===Jn.FIRST_UNREAD_ITEM&&(a.firstUnreadMessage=null,this.clearTimeline(a,{emit:!1})),[4,this.host.api.conversations.fetchTimeline(t,Jn.toServer(i),f,{continuation:o,markAsDelivered:l})]);case 1:for(e=C.sent(),n=e.direction,r=e.higher_continuation,s=e.lower_continuation,c=e.max_items,d=e.timeline,h=a.higherContinuation,p=a.lowerContinuation,v=null,c&&(f=c),y=0,g=d;y<g.length;y++)m=g[y],"tigertext:iq:bang"===(_=m.xmlns)?(b=m.bang_id||""+m.sort_number)?this.host.groups.__handleBang({data:m,eventId:b,alwaysAddToTimeline:!0}):this.logger.warn("Skipping bang with no event id"):"tigertext:iq:message"===_||"tigertext:iq:group_message"===_?(m.conversation_id||(m.conversation_id=t),(w=this._reactToMessageEventCR({data:m,injectConversation:!1}).message).inTimeline=!0,w.isOutgoing||(I={id:w.id+":"+w.counterPartyId,messageId:w.id,status:ar.resolve(m.status),userId:this.host.currentUserId},this.host.models.MessageStatusPerRecipient.inject(I)),w.senderStatus=sr.SENT,O=this.host.models.Message.inject(w),v||(v=O)):this.logger.warn("Skipping timeline entry with unrecognized xmlns: "+_);return"Higher"!==n&&"Initial"!==n||(S=0===d.length||d.length<f?0:1,i===Jn.CONVERSATION_END&&(S=0),1===S&&"Initial"===n&&(E=d[d.length-1],T=a.lastMessage,i===Jn.FIRST_UNREAD_ITEM&&v&&!v.isUnread?S=0:T&&E.message_id===T.id&&(S=T.isUnread?1:0)),h={continuation:{higher_continuation:r},itemsEstimate:S}),"Lower"!==n&&"Initial"!==n||(S=0===d.length||d.length<f?0:1,p={continuation:{lower_continuation:s},itemsEstimate:S}),A=d.length,a.isLive=0===h.itemsEstimate,a.higherContinuation=h,a.lowerContinuation=p,this.host.models.Conversation.inject(a),i===Jn.CONTINUATION||void 0===a.lowestSortNumber?[3,3]:[4,this.markAsDelivered(a.id)];case 2:C.sent(),C.label=3;case 3:return[2,A]}}))}))},e.prototype.findAll=function(t){return void 0===t&&(t={}),ao(this,void 0,void 0,(function(){var e;return so(this,(function(n){switch(n.label){case 0:return t=y.a.defaults(t,{includeMutes:!0}),this.config.condensedReplays&&(t.includeMutes=!1),this._fetched?[2,this.getAll()]:[4,Promise.all([this.host.api.roster.findAll(),t.includeMutes?this.host.mute.findAll():Promise.resolve()])];case 1:return e=n.sent()[0],this.config.condensedReplays?[2,this._processFindAllCR(e)]:[2,this._processFindAll(e)]}}))}))},e.prototype.findAllForOrganization=function(t){return ao(this,void 0,void 0,(function(){var e;return so(this,(function(n){switch(n.label){case 0:if(t=this._resolveModelIdWithTypes(t,"organization"),!this.config.condensedReplays)throw new Un.NotSupportedError("findAllForOrganization() may not be called if this.config.condensedReplays=false");return this._fetched?[2,this.getAllForOrganization(t)]:[4,this.host.api.roster.findAll({organizationId:t})];case 1:return e=n.sent(),[2,this._processFindAllCR(e)]}}))}))},e.prototype._processFindAllCR=function(t){for(var e=[],n=[],r={counterParty:"full",groupMembers:"full",organization:"placeholder"},i=0;i<t.length;i++){var o=(c=t[i]).entity;if(o){var a=this.host.modelNameByEntityType(o.type);"user"===a?n.push({rawConversation:c,origIndex:i}):a&&e.push({rawConversation:c,origIndex:i})}}for(var s=0,u=n;s<u.length;s++){var c=(h=u[s]).rawConversation;i=h.origIndex;h.conversation=this.__injectConversation(c,{origIndex:i})}for(var l=0,d=e;l<d.length;l++){c=(h=d[l]).rawConversation,i=h.origIndex;h.conversation=this.__injectConversation(c,{hasCurrentUser:!0,origIndex:i})}for(var f=[];e.length>0||n.length>0;){var h,p=(h=0===e.length?n.shift():0===n.length||e[0].origIndex<n[0].origIndex?e.shift():n.shift()).conversation;this.__ensureEntities(p,r),f.push(p)}return this._fetched=!0,f},e.prototype._processFindAll=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=(g=t[i]).organization_key,a=g.type,s=uo(g,["organization_key","type"]),u=this.host.modelNameByTypeNS(a);if(s.organizationId=o,"user"===(g={entityAttrs:s,entityType:u,organizationId:o,origIndex:i}).entityType)g.counterParty=this.__injectCounterParty(g),r.push(g);else if(g.entityType){if("group"===u&&(g.groupType=this.host.groups.__extractGroupTypeFromAttrs(s)),g.groupType===nr.FORUM)delete s.members;else if(g.groupType===nr.PATIENT_MESSAGING&&g.entityAttrs&&g.entityAttrs.metadata){var c=g.entityAttrs,l=c.avatar,d=c.metadata,f=d.patient_id,h=d.patient_contact_id;this.host.models.User.injectPlaceholder({id:h||f,avatar:l,metadata:d})}n.push(g)}}for(var p=0,v=n;p<v.length;p++){(g=v[p]).counterParty=this.__injectCounterParty(io(io({},g),{hasCurrentUser:!0})),e.push(g)}for(var y=[];e.length>0||r.length>0;){var g,m=(g=0===e.length?r.shift():0===r.length||e[0].origIndex<r[0].origIndex?e.shift():r.shift()).conversationId,_=g.counterParty,b=g.lastMessage,w=g.muted,I=(o=g.organizationId,u=g.entityType,g.groupType),O="group"===u&&I&&"PATIENT_MESSAGING"===I?lr.PATIENT:lr.PROVIDER;delete _.$placeholder;var E=void 0;this.host.config.condensedReplays&&b&&b.sort_number&&(E=b.sort_number);var T=this.ensureConversation(_.$entityType,_.id,o,{conversationId:m,ensureEntities:{counterParty:"full",groupMembers:"full",organization:"placeholder"},highestSortNumber:E,muted:w,network:O});T._counterPartyAddedOnServer=!0,y.push(T)}return this._fetched=!0,y},e.prototype.find=function(t,e){return void 0===e&&(e={}),ao(this,void 0,void 0,(function(){var n,r,i,o,a,s;return so(this,(function(u){switch(u.label){case 0:return e=y.a.defaultsDeep(e,{ensureEntities:{counterParty:"full",escalationExecution:"full",groupMembers:"placeholder",messageCounterParties:"full",organization:"placeholder",touchOnRelatedEntityLoad:!1}}),this.config.condensedReplays?(n=this.getById(t))&&n.$localOnly?[3,2]:[4,this.host.api.conversations.find(t)]:[3,3];case 1:if(!(r=u.sent()))throw new Un.NotFoundError(this.host.models.Conversation.name,t);if(!(n=this.__injectConversation(r)))throw new Un.NotFoundError(this.host.models.Conversation.name,t);u.label=2;case 2:return[3,6];case 3:return i=e.groupId,o=e.organizationId,a=e.includeMutes,s=i&&o?this.getConversationKey("group",i,o):t,(n=this.getById(s))?[3,5]:[4,this.findAll({includeMutes:a})];case 4:u.sent(),n=this.getById(s),u.label=5;case 5:if(!n)throw new Un.NotFoundError(this.host.models.Conversation.name,t);u.label=6;case 6:return e.ensureEntities?[4,this.__ensureEntities(n,e.ensureEntities)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[2,n]}}))}))},e.prototype.__injectConversation=function(t,e){var n,r=void 0===e?{}:e,i=r.hasCurrentUser,o=r.highestSortNumber,a=r.origIndex,s=void 0===a?this.host.models.Conversation.getAll().length:a,u=t.conversation_id,c=t.entity,l=t.first_expiring_unread_message,d=t.in_progress_escalation_count,f=t.last_message,h=t.lowest_sort_number,p=t.muted,v=t.organization_id,y=t.unread_message_count,g=t.unread_priority_message_count,m=this.getById(u);if(m)n=m.counterParty,v=m.organizationId;else{if(v||(v=t.organization_key),!p&&c&&c.muted&&(p=c.muted,delete c.muted),c&&(n=this.__injectCounterParty({conversationId:u,entityAttrs:c,entityType:c.$entityType,hasCurrentUser:i,organizationId:v})),!n)return null;delete n.$placeholder,m||(m=this.host.models.Conversation.createInstance({id:u,counterParty:n,organizationId:v,_origIndex:s}))}var _=n.id,b=n.$entityType,w=n.groupType;if("group"!==b||w!==nr.FORUM||n.hasCurrentUser||(f=null),l?(f&&(f.message_id===l.message_id?l=f:(l.senderId=f.sender_token,l.senderOrganizationId=f.sender_organization)),m.firstExpiringUnreadMessage=this._ensureFirstExpiringUnreadMessage({rawFirstExpiringUnreadMessage:l,conversationId:u,counterParty:n})):null===l&&(m.firstExpiringUnreadMessage=null),void 0!==f){var I=f?this._ensureLastMessage({rawLastMessage:f,conversationId:u,counterParty:n}):null;if(I&&I.isEphemeral)(!(O=m.lastEphemeralMessage)||I.sortNumber>O.sortNumber)&&(m.lastEphemeralMessage=I);if(m.lastEphemeralMessage){var O=m.lastEphemeralMessage;(!I||O.sortNumber>I.sortNumber)&&(I=O)}m.lastMessage=I,void 0===o&&f&&f.sort_number&&(o=f.sort_number)}m._counterPartyAddedOnServer=!0,c&&c.metadata&&(m.metadata=c.metadata),void 0!==o&&o>m.highestSortNumber&&(m.highestSortNumber=o),void 0!==h&&0!==h&&(m.lowestSortNumber=h),void 0!==d&&(m.inProgressEscalationCount=d),void 0!==p&&(m.muted=p),m._markingAsRead&&(void 0===o||o<=m._markingAsReadSortNumber)||(void 0!==y&&(m.unreadCount=y),void 0!==g&&(m.unreadPriorityCount=g)),this.host.models.Conversation.inject(m);var E=this.getConversationKey(b,_,v);return this._convByConvHandle[E]=m,m},e.prototype.refetch=function(){return ao(this,void 0,void 0,(function(){return so(this,(function(t){return this._fetched=!1,[2,this.findAll()]}))}))},e.prototype._ensureLastMessage=function(t){var e=t.rawLastMessage,n=t.conversationId,r=t.counterParty,i=e.message_id,o=uo(e,["message_id"]);if(!i)return null;var a=this.host.messages.getById(i);return a?(a.shouldEnsureRecipientStatus=!0,a.senderStatus=sr.SENT,this.host.models.Message.inject(a)):(o.senderStatus=sr.SENT,o.id=i,o.shouldEnsureRecipientStatus=!0,o.conversationId=n,o.counterParty=r,a=this.host.models.Message.injectPlaceholder(o)),a},e.prototype._ensureFirstExpiringUnreadMessage=function(t){var e=t.rawFirstExpiringUnreadMessage,n=t.conversationId,r=t.counterParty,i=e.expire_in,o=e.message_id,a=uo(e,["expire_in","message_id"]);if(o){var s=this.host.messages.getById(o);return s?(s.shouldEnsureRecipientStatus=!0,s.expireIn=i,this.host.models.Message.inject(s)):(a.id=o,a.shouldEnsureRecipientStatus=!0,a.expireIn=i,a.conversationId=n,a.counterParty=r,s=this.host.models.Message.injectPlaceholder(a)),s}return null},e.prototype.markAsDelivered=function(t){return ao(this,void 0,void 0,(function(){var e,n,r;return so(this,(function(i){switch(i.label){case 0:if(!(e=this._resolveEntity(t,"conversation")))throw new Un.NotFoundError(this.host.models.Conversation.name,t);if(t=this._resolveModelId(t),!this.config.condensedReplays)return[3,5];n=e.highestSortNumber,r=e.lowestSortNumber,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.host.api.conversations.updateConversationStatus(t,ho,{highestSortNumber:n,lowestSortNumber:r})];case 2:return i.sent(),e.lowestSortNumber=null,[3,4];case 3:return i.sent(),this.logger.warn("failed to mark conversation "+t+" as delivered"),[3,4];case 4:return this.host.models.Conversation.inject(e),[3,6];case 5:return[2,this.host.messages.markAsDelivered(e.messages)];case 6:return[2]}}))}))},e.prototype.markAsRead=function(t,e){return void 0===e&&(e={}),ao(this,void 0,void 0,(function(){var n,r,i;return so(this,(function(o){switch(o.label){case 0:if(!(n=this._resolveEntity(t,"conversation")))throw new Un.NotFoundError(this.host.models.Conversation.name,t);if(t=this._resolveModelId(t),!this.config.condensedReplays)return[3,5];if(r=n.highestSortNumber,i=n.unreadCount,!n._markingAsRead){if(0===i)return[2];n._markingAsRead=!0,n._markingAsReadSortNumber=r,n._markingAsReadExpiration=(new Date).getTime()+3e4,this.__reloadConversation(n)}if(e.localOnly)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.host.api.conversations.updateConversationStatus(t,bo,{highestSortNumber:r})];case 2:return o.sent(),[3,4];case 3:return o.sent(),this.logger.warn("failed to mark conversation "+t+" as read"),[3,4];case 4:return[3,6];case 5:return[2,this.host.messages.markAsRead(n.markableAsReadMessages,e)];case 6:return[2]}}))}))},e.prototype.add=function(t,e,n){return ao(this,void 0,void 0,(function(){var r,i;return so(this,(function(o){switch(o.label){case 0:r=this.ensureConversation(t,e,n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.host.api.roster.add(t,e,n)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),this.logger.warn("can't add "+e+" "+t,i),[3,4];case 4:return r._counterPartyAddedOnServer=!0,[2]}}))}))},e.prototype.remove=function(t){return ao(this,void 0,void 0,(function(){var e,n,r,i;return so(this,(function(o){switch(o.label){case 0:if(t=this._resolveModelId(t),!(e=this._resolveEntity(t,"conversation")))throw new Un.NotFoundError(this.host.models.Conversation.name,t);n=e.counterPartyId,r=e.counterPartyType,i=e.organizationId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.host.api.roster.remove(r,n,i)];case 2:return o.sent(),[3,4];case 3:return o.sent(),this.logger.warn("can't remove conversation "+t),[3,4];case 4:return[2]}}))}))},e.prototype.ensureConversation=function(t,e,n,r){void 0===r&&(r={});var i=(r=y.a.defaultsDeep(r,{ensureEntities:{counterParty:!1,organization:!1,messageCounterParties:!1,groupMembers:!1,touchOnRelatedEntityLoad:!0}})).conversationId,o=this.getConversationKey(t,e,n);if(this.config.condensedReplays&&!i){var a=this._convByConvHandle[o];a&&(i=a.id)}i||(i=o);var s=this.getById(i);if(s){this.__ensureEntities(s,r.ensureEntities);var u=!1;return this.config.condensedReplays&&void 0!==r.highestSortNumber&&(s.highestSortNumber=r.highestSortNumber,u=!0),this.config.condensedReplays&&void 0!==r.muted&&(s.muted=r.muted,u=!0),this._convByConvHandle[o]=s,u&&this.host.models.Conversation.inject(s),s}var c={id:i,counterPartyType:t,counterPartyId:e,organizationId:n,_origIndex:this.host.models.Conversation.getAll().length};r.highestSortNumber&&(c.highestSortNumber=r.highestSortNumber),r.muted&&(c.muted=r.muted),r.network&&(c.network=r.network);var l=this.host.models.Group.get(e);l&&l.groupType===nr.PATIENT_MESSAGING&&(c.network=lr.PATIENT);var d=this.host.metadata.get(e,n);if(d){var f=d.data;c.metadata=f}return s=this.host.models.Conversation.createInstance(c),this.__ensureEntities(s,r.ensureEntities),this.host.models.Conversation.inject(s),this._convByConvHandle[o]=s,s},e.prototype.__ejectConversation=function(t){var e=this.getById(t);if(e){var n=e.counterPartyType,r=e.counterPartyId,i=e.organizationId,o=this.getConversationKey(n,r,i);delete this._convByConvHandle[o],this.host.models.Conversation.eject(e),this.__queuedConversationsToReload=this.__queuedConversationsToReload.filter((function(t){return t.id!==e.id}))}return e},e.prototype.reactToMessageEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToMessageEventCR({data:e});else{var n=this._reactToMessageEvent({data:e}),r=n.message,i=n.conversation;this.host.models.Message.inject(r),this.emit("message",r),i&&(this.__addConversationCounterPartyToServerRosterIfShould(i),i.emit("message",r),this.config.condensedReplays&&i._markingAsRead&&r.sortNumber>i._markingAsReadSortNumber&&this.__clearOptimisticStatus([i]));or[r.markedRecipientStatus]<or[ar.DELIVERED]&&this.host.messages.markAsReceived(r,{})}},e.prototype.reactToMessageEventCR=function(t){var e=t.data,n={},r=this._reactToMessageEventCR({data:e}),i=r.message,o=r.conversation;this.emit("message",i),o&&(this.__addConversationCounterPartyToServerRosterIfShould(o),o.emit("message",i)),n.queue=!0,this.host.messages.markAsReceived(i,n)},e.prototype._reactToMessageEvent=function(t){var e=t.data,n=t.conversationId,r=void 0===n?null:n;e=wi(e);var i=this.host.currentUserId,o=e.recipient_status;o||(o=[]);var a={status:e.status,timestamp:e.created_time};e.team_request&&this.host.teams.__injectTeamRequest(e.team_request);var s=this.host.models.Message.parseAttrs(e);s.messageType=cr.USER_SENT;var u=!0;if(s.groupId)s.counterPartyType="group",s.counterPartyId=s.groupId;else if(s.recipientId){if(this.host.distributionLists.getById(s.recipientId))s.counterPartyType="distributionList";else if(this.host.users.getById(s.recipientId))s.counterPartyType="user";else{u=!1;var c=this.host.messages._looksLikeDistributionListMessage(s);s.counterPartyType=c?"distributionList":"user"}s.counterPartyId="distributionList"===s.counterPartyType||s.senderId===i?s.recipientId:s.senderId}var l=this.host.messages._isMessageOutgoing(s);"distributionList"!==s.counterPartyType&&(a.account_id=l?s.recipientId:this.host.currentUserId,a.account_id&&o.push(a)),s.senderStatus=sr.SENT;var d=u&&this.ensureConversation(s.counterPartyType,s.counterPartyId,s.recipientOrganizationId,{conversationId:r,ensureEntities:{counterParty:"placeholder",groupMembers:"placeholder",organization:"placeholder"}});s.conversationId=d?d.id:null;var f=this.host.models.Message.get(s.id);if(f){var h=s.body,p=s.escalationExecutionId,v=s.isForwardedFromPatientNetwork,y=s.originalSender,g=s.patientDetails,m=s.priority,_=s.sortNumber,b=s.sortSeries;f.body=h,f.escalationExecutionId=p||null,f.isForwardedFromPatientNetwork=v,f.originalSender=y,f.patientDetails=g,f.priority=m,f.shouldEscalate=!1,f.sortNumber=_,f.sortSeries=b}else f=this.host.models.Message.createInstance(s,!1);var w=f.senderId===i?f.recipientId:f.senderId;w&&"distributionList"!==f.counterPartyType&&this.__ensureMessageCounterParty(d,w,{messageCounterParties:this.host.currentlyServingOfflineMessages?"placeholder":"full",touchOnRelatedEntityLoad:!0});for(var I=0,O=o;I<O.length;I++){var E=O[I];this.config.condensedReplays||this.host.messages.__injectMessageStatus(f,E)}return("group"===s.counterPartyType||this.config.condensedReplays)&&(f.shouldEnsureRecipientStatus=!0),f.inTimeline=!(!d||!d.isLive),{message:f,conversation:d}},e.prototype._reactToMessageEventCR=function(t){var e=void 0===t?{}:t,n=e.data,r=void 0===n?{}:n,i=e.injectConversation,o=void 0===i||i;r=wi(r);var a,s=this.host.currentUserId,u=r.first_expiring_unread_message,c=r.last_message,l=(r.type,r.unread_message_count),d=r.unread_priority_message_count,f=(r.xmlns,uo(r,["first_expiring_unread_message","last_message","type","unread_message_count","unread_priority_message_count","xmlns"]));f.team_request&&this.host.teams.__injectTeamRequest(f.team_request),c&&(c.conversation_id=f.conversation_id,a=c.sort_number,c.is_group&&!c.group_token&&(c.group_token=c.recipient_token),c.message_id===f.client_id&&(f.attachmentName=c.attachment_name)),f.is_group&&!f.group_token&&(f.group_token=f.recipient_token);var h=this.host.models.Message.parseAttrs(f);if(h.messageType=cr.USER_SENT,h.groupId)h.counterPartyType="group",h.counterPartyId=h.groupId;else if(h.recipientId){if(this.host.distributionLists.getById(h.recipientId))h.counterPartyType="distributionList";else if(this.host.users.getById(h.recipientId))h.counterPartyType="user";else{var p=this.host.messages._looksLikeDistributionListMessage(h);h.counterPartyType=p?"distributionList":"user"}h.counterPartyId="distributionList"===h.counterPartyType||h.senderId===s?h.recipientId:h.senderId}h.senderStatus=sr.SENT;var v,y=this.host.models.Message.get(h.id);if(y?this.host.models.Message.inject(io({shouldEscalate:!1},h)):y=this.host.models.Message.inject(h),o){var g={conversation_id:y.conversationId,entity:this._resolveEntity(h.counterPartyId,h.counterPartyType),first_expiring_unread_message:u,last_message:c,organization_id:y.__organizationId,unread_message_count:l,unread_priority_message_count:d};if(c&&c.sort_number<y.sortNumber?(a=y.sortNumber,g.last_message={message_id:y.id},(v=this.__injectConversation(g,{highestSortNumber:a}))&&this._ensureLastMessage({rawLastMessage:c,conversationId:v.id,counterParty:v.counterParty})):v=this.__injectConversation(g,{highestSortNumber:a}),c&&c.message_id&&v&&v.isLive){var m=this.host.models.Message.get(c.message_id);m&&!m.inTimeline&&(m.inTimeline=!0,this.host.models.Message.inject(m))}}else v=this.host.conversations.getById(f.conversation_id);var _=y.senderId===s?y.recipientId:y.senderId,b="group"!==y.counterPartyType||y.counterParty&&"FORUM"===y.counterParty.groupType;return _&&"distributionList"!==y.counterPartyType&&b&&this.__ensureMessageCounterParty(v,_,{messageCounterParties:this.host.currentlyServingOfflineMessages?"placeholder":"full",touchOnRelatedEntityLoad:!0}),y.inTimeline=!!y.isEphemeral||!(!v||!v.isLive),y.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(y),{conversation:v,message:y}},e.prototype.reactToFriendsEventCR=function(t){var e=t.data,n=t.eventId,r=(e=wi(e)).action,i=(e.xmlns,uo(e,["action","xmlns"])),o=i.entity,a=i.organization_id||i.organization_key,s=o.metadata,u=o.id||o.token;if("group"===o&&"del"===r&&!s){var c=this.host.models.Group.get(i.token),l=this.getById(c.conversation.id);return this.__removeFriend({conversation:l,entityType:o,id:i.token,organizationId:a}),l&&this.__clearOptimisticStatus([l]),void this.emit("friends",io(io({action:r},l.entity),{organizationId:a}))}if(o.type){var d=this.host.modelNameByEntityType(o.type);if(s&&"patient_messaging"===s.feature_service&&"string"==typeof s.is_patient_contact&&(s.is_patient_contact="true"===s.is_patient_contact),o.organizationId=a,"group"===d&&s&&"role"===s.feature_service&&"role_assignment"===s.meta_type)this._rolesFriendsEventPromise=this.host.roles.reactToFriendsEventCR({action:r,attrs:o,id:n});else{var f=i.conversation_id,h=i.last_message,p=i.lowest_sort_number,v=this.getById(f);if("add"===r||"update"===r){v&&"update"===r&&this.clearMessageStatuses(v);var g=h&&h.sort_number?h.sort_number:void 0,m=!1,_=y.a.get(e,"entity.is_public")||y.a.get(e,"entity.metadata.team");if((void 0===g||_)&&"add"===r)if("group"===d){if(o.proxied_members&&o.proxied_members[this.host.currentUserId])for(var b=this.host.models.Product.getAll()[0],w=0,I=o.proxied_members[this.host.currentUserId];w<I.length;w++){var O=I[w];if(b.rolesOptingIn.includes(O.token)){m=!0;break}}g=m?1:this.host.messages.__getNextSortNumber(a)}else g=v?v.highestSortNumber:1;var E=v&&v.lastMessage;if("add"===r){var T="group"===d&&this.host.groups.__extractGroupTypeFromAttrs(o);T!==nr.GROUP&&T!==nr.FORUM||(o.members=null),this.__injectCounterParty({entityAttrs:o,entityType:d,groupType:T,hasCurrentUser:!0,isPlaceholder:!0,organizationId:a}),v=this.__injectConversation(i,{highestSortNumber:g}),E&&!h&&this.find(f),this.clearTimeline(v)}else"update"===r&&(v=this.__injectConversation(i,{highestSortNumber:g}),E&&!h&&this.find(f));p&&this.markAsDelivered(v)}else"del"===r?this.__removeFriend({attrs:o,entityType:d,id:u,organizationId:a}):this.logger.error("friends action not implemented",r,e);v&&this.__clearOptimisticStatus([v]),this.emit("friends",io({action:r},o))}}},e.prototype.reactToFriendsEvent=function(t){var e=t.data,n=t.id;if(this.config.condensedReplays)this.reactToFriendsEventCR({data:e,eventId:n});else{var r=(e=wi(e)).friend,i=r.action,o=r.organization_id,a=uo(r,["action","organization_id"]),s=a.metadata,u=a.token,c=this.host.modelNameByTypeNS(a.xmlns);if(c)if("group"===c&&s&&"role"===s.feature_service&&"role_assignment"===s.meta_type)this._rolesFriendsEventPromise=this.host.roles.reactToFriendsEvent({data:e,id:n});else{if("add"===i){var l="group"===c&&this.host.groups.__extractGroupTypeFromAttrs(a);l!==nr.GROUP&&l!==nr.FORUM||(a.members=null);var d=l===nr.PATIENT_MESSAGING?"PATIENT":"PROVIDER";this.__injectCounterParty({entityAttrs:a,entityType:c,groupType:l,hasCurrentUser:!0,isPlaceholder:!0,organizationId:o});var f="group"===c?this.host.messages.__getNextSortNumber(o):1;this.ensureConversation(c,u,o,{highestSortNumber:f,network:d})}else"del"===i?this.__removeFriend({attrs:a,entityType:c,id:u,organizationId:o}):this.logger.error("friends action not implemented",i,e);this.emit("friends",io({action:i},a))}}},e.prototype.reactToUpdateTeamRequestEvent=function(t){var e=t.data,n=(e=wi(e)).team_request;n&&this.host.teams.__injectTeamRequest(n)},e.prototype.reactToUpdateEventCR=function(t){var e=t.data,n=(e=wi(e)).entity,r=e.organization_id,i=n.metadata,o=n.token,a=n.type;n.organizationId=r,this._sanitizeGroupAttrs(n);var s=this.host.modelNameByEntityType(a),u=this.host.groups.__extractGroupTypeFromAttrs(n);if(i&&r&&o&&vo.includes(u)&&this.host.metadata.__injectMetadata(o,r,i),i&&i.feature_service&&"role"===i.feature_service){if("group"===s&&i.target_id)return this.__injectTargetEntity(i,r);this.host.roles.reactToUpdateEventCR({entity:n})}this.host.injectModel(n,a)},e.prototype.reactToUpdateEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToUpdateEventCR({data:e});else{var n=(e=wi(e)).metadata,r=e.organization_key,i=e.token,o=e.type;this._sanitizeGroupAttrs(e);var a=this.host.modelNameByTypeNS(o),s=this.host.groups.__extractGroupTypeFromAttrs(e);if(n&&r&&i&&vo.includes(s)&&this.host.metadata.__injectMetadata(i,r,n),n&&n.feature_service&&"role"===n.feature_service){if("group"===a&&n.target_id)return this.__injectTargetEntity(n,r);this.host.roles.reactToUpdateEvent({data:e})}var u=uo(e,[]);this.host.injectModel(u,o)}},e.prototype.__queueReload=function(t){this.__queuedConversationsToReload.includes(t)||this.__queuedConversationsToReload.push(t),this.__flushConversationsToReload()},e.prototype.hasPendingReloads=function(){return this.__queuedConversationsToReload&&this.__queuedConversationsToReload.length>0},e.prototype.__updateTimeline=function(t){var e=t.content,n=t.timeline;n.length=0;for(var r=0,i=e;r<i.length;r++){var o=i[r];o.inTimeline&&n.push(o)}this.host.models.Conversation.inject(t)},e.prototype.__reloadConversation=function(t,e){var n=(void 0===e?{}:e).notify,r=void 0===n||n;if(this.config.condensedReplays)return this.__reloadConversationCR(t);var i=t.content,o=t.higherContinuation,a=t.lowerContinuation,s=t.markableAsReadMessages,u=t.messages,c=t.timeline,l=[],d=[],f=0,h=null,p=null,v=null;s.length=0,u.length=0,c.length=0;for(var g=-1,m=0,_=i;m<_.length;m++){var b=_[m];g++;var w=b.escalationExecution,I=b.inTimeline,O=b.isOutgoing,E=b.isUnread,T=b.markedRecipientStatus,S=b.messageType,A=b.priority;I&&(null===h&&(h=g),p=g,c.push(b)),S===cr.USER_SENT?(u.push(b),O||!E||v||(v=b),w&&"IN_PROGRESS"===w.status&&f++,_o.includes(T)&&s.push(b),O||(E&&(l.push(b),A===rr.HIGH&&d.push(b)),t.lastIncomingMessageSortNumber=b.sortNumber)):fo.includes(S)&&(t.lastBangMessageSortNumber=b.sortNumber)}a.itemsEstimate=h,o.itemsEstimate=null===p?null:i.length-1-p,t.isLive=0===o.itemsEstimate||0===i.length;var C=u.length>0?u[u.length-1]:null,R=C||y.a.last(i.filter((function(t){return t.messageType===cr.GROUP_MEMBERSHIP_CHANGE&&t.groupMembersChange&&"ADD"===t.groupMembersChange.action})));if(t.firstUnreadMessage=v,t.inProgressEscalationCount=f,t.lastMessage=C,t.unreadCount=l.length,t.unreadPriorityCount=d.length,t.highestSortNumber=R&&R.sortNumber||t.lastConversationSortNumber||0,r){var P=t.counterPartyType,j=t.counterPartyId,x=t.organizationId,M=this.getConversationKey(P,j,x);this._convByConvHandle[M]=t,this.host.models.Conversation.inject(t)}},e.prototype.__reloadConversationCR=function(t){var e=t._markingAsRead,n=t._markingAsReadSortNumber,r=t.content,i=t.higherContinuation,o=t.messages,a=t.timeline,s=[],u=[],c=null;o.length=0,a.length=0;for(var l=0,d=r;l<d.length;l++){var f=d[l],h=f.inTimeline,p=f.isOutgoing,v=f.isUnread,y=f.messageType,g=f.priority,m=f.sortNumber;h&&a.push(f),y===cr.USER_SENT?(o.push(f),!p&&v&&(c||(c=f),e&&m<=n||(s.push(f),g===rr.HIGH&&u.push(f)))):fo.includes(y)&&(t.lastBangMessageSortNumber=f.sortNumber)}t.firstUnreadMessage=c,t.highestSortNumber=t.highestSortNumber||0,t.isLive=0===i.itemsEstimate||0===r.length,e&&(t.unreadCount=s.length,t.unreadPriorityCount=u.length);var _=t.counterPartyType,b=t.counterPartyId,w=t.organizationId,I=this.getConversationKey(_,b,w);this._convByConvHandle[I]=t,this.host.models.Conversation.inject(t)},e.prototype.__addConversationCounterPartyToServerRosterIfShould=function(t){if(t&&!t._counterPartyAddedOnServer){var e=t.organization;e&&!e.$placeholder&&this.add(t.counterPartyType,t.counterPartyId,t.organizationId)}},e.prototype.addMembershipChangeLog=function(t){var e,n,r=t.action,i=t.actionTime,o=t.actor,a=t.alwaysAddToTimeline,s=t.createdAt,u=t.group,c=t.id,l=t.memberIds,d=t.members,f=t.removedFromGroup,h=void 0!==f&&f,p=t.sortNumber,v=o.id,y=u.id,g=u.organizationId,m=this.host.currentUser,_=this.get("group",y,g);if(this.config.condensedReplays){if(!_)return;e=_.id}else e=this.getConversationKey("group",y,g);n=!!a||!h&&(!!_&&_.isLive);var b=this.host.models.GroupMembersChange.inject({id:"groupMembersChange:"+c,action:r,actionTime:i,actor:o,memberIds:l,members:d});this.host.models.Message.inject({body:this.__generateGroupMembershipChangeBody(t),conversationId:e,counterPartyId:y,counterPartyType:"group",createdAt:s,groupId:y,groupMembersChange:b,id:"bang:"+c,inTimeline:n,isOutgoing:!1,messageType:cr.GROUP_MEMBERSHIP_CHANGE,recipient:m,senderId:v,sortNumber:p}),"OPT_IN"!==r&&"OPT_OUT"!==r||this.host.roles.refresh(g)},e.prototype.__generateGroupMembershipChangeBody=function(t){var e=this,n=t.action,r=t.actor,i=t.group,o=t.members,a=i.groupType,s=yo[n]||wo[n],u=r.id===this.host.currentUserId?"You":r.displayName,c=go[n]||"",l=null;return(n in go||n in wo)&&(l=Wi.a.call(Gi.a.call(o.map((function(t,n){return[t.id===e.host.currentUserId?"You":t.displayName,(n===o.length-2?" and":",")+" "]})))).join("")),n in wo?[l,s,u].filter(Boolean).join(" "):[u,s,l,c,"this",mo[a]].filter(Boolean).join(" ")},e.prototype.addCallChangeLog=function(t){var e,n=t.caller,r=t.callee.id,i=t.conversationId,o=t.createdAt,a=t.group,s=t.id,u=t.organizationId,c=t.sortNumber,l=a.id,d=n&&n.id===this.host.currentUser.id;if(this.config.condensedReplays)e=i;else if(a)e=this.getConversationKey("group",l,u);else{var f=d?r:n.id;e=this.getConversationKey("user",f,u)}this.host.models.Message.inject({body:this.__generateCallChangeBody(t),conversationId:e,counterPartyId:r,counterPartyType:"group",createdAt:o,groupId:r,id:"bang:"+s,inTimeline:!0,isOutgoing:!1,messageType:cr.CALL_CHANGE,recipient:this.host.currentUser,senderId:n?n.id:null,sortNumber:c})},e.prototype.__generateCallChangeBody=function(t){var e=t.action,n=t.caller,r=t.duration,i=t.group,o=t.isVideo,a=t.userStartTime,s=a?to()(a).format("h:mm A"):"";if("CALL_CHANGE"===e){var u=n.id===this.host.currentUser.id,c=!i||u||"PATIENT_MESSAGING"===i.groupType&&i.memberCount<3?"":" from "+n.displayName+" + "+(i.memberCount-1)+" members";return(u?"Outgoing":"Incoming")+" "+(o?"Video Call":"Call")+" ("+pi(r)+")"+c+" at "+s}if("MISSED_CALL"===e)return"Missed Call"+(c=i?" from "+n.displayName:"")+" at "+s},e.prototype.addEscalationExecutionChangeLog=function(t){var e,n=t.action,r=t.actionTime,i=t.actor,o=t.alwaysAddToTimeline,a=t.createdAt,s=t.escalationExecution,u=t.group,c=t.members,l=t.id,d=t.sortNumber,f=u.id,h=u.organizationId,p=this.host.currentUser,v=this.get("group",f,h),y=v?v.id:null;if(!v){if(this.config.condensedReplays)return;y=this.getConversationKey("group",f,h)}e=!!o||!!v&&v.isLive;var g=this.host.models.EscalationExecutionChange.inject({id:"escalationExecutionChange:"+l,action:n,actionTime:r,actor:i,members:c});this.host.models.Message.inject({body:this.__generateGroupEscalationChangeBody(t,s),conversationId:y,counterPartyId:f,counterPartyType:"group",createdAt:a,escalationExecutionChange:g,escalationExecutionId:s?s.id:null,groupId:f,id:"bang:"+l,inTimeline:e,isOutgoing:!1,messageType:cr.ESCALATION_EXECUTION_CHANGE,recipient:p,senderId:i?i.id:null,sortNumber:d})},e.prototype.__generateGroupEscalationChangeBody=function(t,e){var n=t.action,r=t.actor,i=t.members,o=po[n],a=e&&e.displayId||"";return a.startsWith("#")&&(a=a.slice(1,a.length)),""!==a&&(a+=" "),n===tr.MEMBER_ADDED?o+" "+i[0].displayName+" to this escalation":n!==tr.INITIATED&&r&&r.displayName?"Escalation "+a+o+" by "+r.displayName:"Escalation "+a+o},e.prototype.getMessageConversationKey=function(t){if(t.groupId)return this.conversationHashForListEntityId(t.groupId);if(t.distributionListId)return this.conversationHashForListEntityId(t.distributionListId);var e=t.senderId===this.host.currentUserId?t.recipientId:t.senderId;return this.conversationHashForUserMessage(e,t.senderOrganizationId,t.recipientOrganizationId)},e.prototype.getConversationKey=function(t,e,n,r){switch(void 0===r&&(r=n),t){case"user":return this.conversationHashForUserMessage(e,n,r);case"distributionList":case"group":case"team":return this.conversationHashForListEntityId(e);default:throw new Error("type "+t+" not supported in conversation")}},e.prototype.conversationHashForUserMessage=function(t,e,n){void 0===n&&(n=e);var r=[t,e,n].join(":");return lo.b64(r)},e.prototype.conversationHashForListEntityId=function(t){return lo.b64(t)},e.prototype.conversationHashForGroupId=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.conversationHashForListEntityId.apply(this,t)},e.prototype.conversationHashForDistributionListId=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.conversationHashForListEntityId.apply(this,t)},e.prototype.looksLikeConversationHandle=function(t){return/^[a-zA-Z0-9/+=]{24}$/.test(t)},e.prototype.findConversationWithUser=function(t,e){return ao(this,void 0,void 0,(function(){return so(this,(function(n){return[2,this.get(this.host.models.User.name,t,e)]}))}))},e.prototype.findConversationWithGroup=function(t,e){return ao(this,void 0,void 0,(function(){return so(this,(function(n){return[2,this.get(this.host.models.Group.name,t,e)]}))}))},e.prototype.findAllGroupConversationsWithMembers=function(t,e,n){var r=void 0===n?{}:n,i=r.exact,o=void 0===i||i,a=r.includeCurrentUser,s=void 0===a||a,u=r.includeForums,c=void 0===u||u,l=r.includeRoles,d=void 0===l||l,f=r.localOnly,h=void 0!==f&&f,p=r.senderId,v=void 0===p?null:p;return ao(this,void 0,void 0,(function(){var n,r,i,a,u,l;return so(this,(function(f){switch(f.label){case 0:return[4,this.resolveMembers(ki(t))];case 1:return t=(t=f.sent()).map(this._resolveModelId),[4,this.host.groups.findAllWithSpecificMembers(t,e,{exact:o,includeCurrentUser:s,includeForums:c,includeRoles:d,localOnly:h,senderId:v})];case 2:for(n=f.sent(),r=[],i=0,a=n;i<a.length;i++)u=a[i],(l=this.get(this.host.models.Group.name,u.id,e))&&r.push(l);return[2,r]}}))}))},e.prototype.findLocalRoleP2PConversation=function(t,e){var n,r;t=this.host.roles.__resolveRoleId(t),e=this.host.roles.__resolveRoleId(e);var i=this.host.models.User.get(t),o=this.host.models.User.get(e);if(o&&o.isRoleBot&&o.botRole)r=this.host.roles._roleP2PConversations[e];else{if(!(i&&i.isRoleBot&&i.botRole))return null;r=this.host.roles._roleP2PConversations[t]}if(r)for(var a=0,s=r;a<s.length;a++){var u=s[a],c=u.$lastModified,l=u.counterParty,d=l.p2pRecipient,f=l.p2pSender;if(d&&f){var h=this.host.roles.__resolveRoleId(d.id),p=this.host.roles.__resolveRoleId(f.id);(h===t&&p===e||h===e&&p===t)&&(!n||n.$lastModified<c)&&(n=u)}}return n},e.prototype.resolveMembers=function(t){return ao(this,void 0,void 0,(function(){var e=this;return so(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return ao(e,void 0,void 0,(function(){return so(this,(function(e){switch(e.label){case 0:if(!Object(mt.isEmail)(t)&&!Object(Ii.isPhone)(t))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.host.users.find(t)];case 2:return[2,e.sent().id];case 3:return e.sent(),[2,t];case 4:return[2,t]}}))}))})))];case 1:return[2,n.sent()]}}))}))},e.prototype.selectConversation=function(t,e){var n=void 0===e?{}:e,r=n.anchorPoint,i=void 0===r?Jn.CONVERSATION_END:r,o=n.fetchAllItems,a=void 0!==o&&o,s=n.markAsDelivered,u=void 0===s||s,c=n.markAsRead,l=void 0===c||c,d=n.maxItemsPerBatch,f=n.minItemsToFetch,h=void 0===f?20:f;return ao(this,void 0,void 0,(function(){var e,n,r,o;return so(this,(function(s){switch(s.label){case 0:if(t=this._resolveModelId(t),!(e=this._resolveEntity(t,"conversation")))throw new Un.NotFoundError(this.host.models.Conversation.name,t);if(i===Jn.CONTINUATION)throw new Error("Cannot call selectConversation() with anchorPoint='CONTINUATION'");return this.config.condensedReplays?[4,this._selectConversationCR(t,{anchorPoint:i,conversation:e,fetchAllItems:a,markAsDelivered:u,markAsRead:l,maxItemsPerBatch:d,minItemsToFetch:h})]:[3,2];case 1:return[2,s.sent()];case 2:return r=n=0,[4,this.fetchTimeline(t,{anchorPoint:i,markAsDelivered:u,maxItems:h})];case 3:return n=r+s.sent(),e.markableAsReadMessages.length>0?e.firstUnreadMessage=e.markableAsReadMessages[0]:e.firstUnreadMessage=null,o=e.firstUnreadMessage,l&&e.unreadCount>0&&this.markAsRead(t,{localOnly:!0}),[4,this._fetchContinuations(t,{addedMessages:n,conversation:e,fetchAllItems:a,markAsDelivered:u,minItemsToFetch:h})];case 4:return n=s.sent(),l&&this.markAsRead(t),[2,{addedMessages:n,previousFirstUnreadMessage:o}]}}))}))},e.prototype._selectConversationCR=function(t,e){var n=e.anchorPoint,r=e.conversation,i=e.fetchAllItems,o=void 0!==i&&i,a=e.markAsDelivered,s=e.markAsRead,u=e.minItemsToFetch,c=e.maxItemsPerBatch,l=void 0===c?u:c;return ao(this,void 0,void 0,(function(){var e,i,c,d;return so(this,(function(f){switch(f.label){case 0:return e=s&&r.unreadCount>0,i=0,e&&this.markAsRead(t,{localOnly:!0}),c=i,[4,this.fetchTimeline(t,{anchorPoint:n,fetchAllItems:o,markAsDelivered:a,maxItems:l})];case 1:return i=c+f.sent(),[4,this._fetchContinuations(t,{addedMessages:i,conversation:r,fetchAllItems:o,markAsDelivered:a,maxItemsPerBatch:l,minItemsToFetch:u})];case 2:return i=f.sent(),d=r.firstUnreadMessage,e&&this.markAsRead(t),this.__ensureEntities(r,{messageCounterParties:"full"}),[2,{addedMessages:i,previousFirstUnreadMessage:d}]}}))}))},e.prototype._fetchContinuations=function(t,e){var n=void 0===e?{}:e,r=n.addedMessages,i=void 0===r?0:r,o=n.conversation,a=n.fetchAllItems,s=void 0!==a&&a,u=n.markAsDelivered,c=void 0===u||u,l=n.minItemsToFetch,d=void 0===l?20:l;n.maxItemsPerBatch;return ao(this,void 0,void 0,(function(){var e,n;return so(this,(function(r){switch(r.label){case 0:if(0===i)return[2,0];r.label=1;case 1:return(s||i<d)&&o.higherContinuation.itemsEstimate>0?(e=i,[4,this.fetchTimeline(t,{anchorPoint:Jn.CONTINUATION,markAsDelivered:c,continuation:o.higherContinuation.continuation,fetchAllItems:s})]):[3,3];case 2:return i=e+r.sent(),[3,1];case 3:return(s||i<d)&&o.lowerContinuation.itemsEstimate>0?(n=i,[4,this.fetchTimeline(t,{anchorPoint:Jn.CONTINUATION,markAsDelivered:c,continuation:o.lowerContinuation.continuation,fetchAllItems:s})]):[3,5];case 4:return i=n+r.sent(),[3,3];case 5:return[2,i]}}))}))},e.prototype.getWithUser=function(t,e,n){var r,i=(void 0===n?{}:n).createIfNotFound,o=void 0!==i&&i;if(t=this._resolveModelId(t),e=this._resolveModelId(e),this.config.condensedReplays){var a=this.host.users.getById(t);if(a&&a.profileByOrganizationId&&a.profileByOrganizationId[e]){var s=a.profileByOrganizationId[e].conversationId;s&&(r=this.getById(s))}}else{var u=this.conversationHashForUserMessage(t,e);r=this.getById(u)}return!r&&o&&(r=this.ensureConversation("user",t,e)),r||null},e.prototype.getWithListEntity=function(t,e,n){var r,i=void 0===n?{createIfNotFound:!1}:n,o=i.createIfNotFound,a=void 0!==o&&o,s=i.organizationId,u=i.conversationId,c=void 0===u?null:u;if(e=this._resolveModelId(e),this.config.condensedReplays)c&&(r=this.getById(c));else{var l=this.conversationHashForListEntityId(e);r=this.getById(l)}if(!r&&a){var d=this._resolveEntity(e,t);if(!d)throw new Error("Entity required when using createIfNotFound");s=d.organizationId,r=this.ensureConversation(t,e,s,{conversationId:c}),this.config.condensedReplays&&!c&&(r.$localOnly=!0)}return r},e.prototype.getWithGroup=function(t){return this.getWithListEntity("group",t)},e.prototype.getWithDistributionList=function(t){return this.getWithListEntity("distributionList",t)},e.prototype.get=function(t,e,n){var r=this.getConversationKey(t,e,n);return(this.config.condensedReplays?this._convByConvHandle[r]:this.host.models.Conversation.get(r))||null},e.prototype.getAll=function(){return this.host.models.Conversation.getAll()},e.prototype.getById=function(t){return this.host.models.Conversation.get(t)},e.prototype.getMultiById=function(t){return this.host.models.Conversation.getMulti(t)},e.prototype.getAllForOrganization=function(t){var e=this._resolveEntity(t,"organization");return e?e.conversations:null},e.prototype.__ensureEntities=function(t,e){return void 0===e&&(e={}),ao(this,void 0,void 0,(function(){var n,r,i;return so(this,(function(o){switch(o.label){case 0:if(n=[],r=Promise.resolve(),e.counterParty&&(r=this.__ensureCounterParty(t,e),n.push(r)),e.escalationExecution&&n.push(this.__ensureEscalationExecution(t,r,e)),e.messageCounterParties&&n.push(this.__ensureMessageCounterParties(t,e)),e.organization&&n.push(this.__ensureOrganization(t,e)),0===(n=n.filter(Boolean)).length)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return o.sent(),e.onLoad&&e.onLoad(),this.host.models.Conversation.inject(t),[3,4];case 3:return i=o.sent(),console.error(i),[3,4];case 4:return[2]}}))}))},e.prototype.__ensureOrganization=function(t,e){return void 0===e&&(e={}),ao(this,void 0,void 0,(function(){var n=this;return so(this,(function(r){switch(r.label){case 0:return[4,this.host.organizations._findAll()];case 1:return r.sent(),this.host.models.Organization.shouldEnsure(t.organization,"full"!==e.organization)?[4,new Promise((function(r,i){n.host.models.Organization.ensureEntity(t.organizationId,{onlyPlaceholder:"placeholder"===e.organization,onMissing:function(){n.logger.info("org "+t.organizationId+" not found, created placeholder org"),t.$loadingOrganization=!0,r()},onLoad:function(){n.logger.info("org "+t.organizationId+" loaded"),t.$loadingOrganization=!1,e.touchOnRelatedEntityLoad&&n.host.models.Conversation.inject(t)},onFinish:r})}))]:[2,null];case 2:return r.sent(),[2]}}))}))},e.prototype.__ensureCounterParty=function(t,e){return void 0===e&&(e={}),ao(this,void 0,void 0,(function(){var n,r,i,o=this;return so(this,(function(a){if(e=io({},e),"group"===t.counterPartyType&&t.counterParty&&t.counterParty.groupType===nr.ROLE_P2P&&(e.counterParty="full",e.groupMembers="full"),n=this.host.modelsByEntityType[t.counterPartyType],!n.shouldEnsure(t.counterParty,"full"!==e.counterParty,{groupMembersOnlyPlaceholder:"full"!==e.groupMembers}))return[2,null];switch(r={},t.counterPartyType){case"user":break;case"group":case"distributionList":r.organizationId=t.organizationId;break;default:throw new Error("unsupported counterPartyType",t.counterPartyType)}return i=function(t){if("group"===n.name&&"placeholder"!==e.counterParty&&e.groupMembers)return o.host.groups.ensureMembers(t,{onlyPlaceholder:"placeholder"===e.groupMembers})},[2,new Promise((function(a,s){n.ensureEntity(t.counterPartyId,{attrs:r,onlyPlaceholder:"placeholder"===e.counterParty,onMissing:function(){o.logger.info("entry "+t.counterPartyId+" not found, created placeholder on org "+t.organizationId),t.$loadingCounterParty=!0},onLoad:function(){t.$loadingCounterParty=!1,e.touchOnRelatedEntityLoad&&o.host.models.Conversation.inject(t)},onFinish:function(t){t&&i(t),a()}})}))]}))}))},e.prototype.__ensureEscalationExecution=function(t,e,n){return void 0===n&&(n={}),ao(this,void 0,void 0,(function(){var n,r,i;return so(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return o.sent(),n=t.counterPartyType,(r=t.counterParty)&&"group"===n?(i=r.escalationExecution,r.groupType===nr.ESCALATION&&i?[4,this.host.escalations.ensureEscalationExecution(i)]:[2]):[2];case 2:return o.sent(),[2]}}))}))},e.prototype.__ensureMessageCounterParties=function(t,e){var n=this;void 0===e&&(e={});var r=Zi.a.call(Xi.a.call(Ki.a.call(t.messages,"senderId").filter(Boolean)),this.host.currentUserId,t.counterPartyId);return Promise.all(r.map((function(r){return n.__ensureMessageCounterParty(t,r,e)})))},e.prototype.__ensureMessageCounterParty=function(t,e,n){var r=this;void 0===n&&(n={});var i=this.host.models.User.get(e);return this.host.models.User.shouldEnsure(i,"full"!==n.messageCounterParties)?new Promise((function(i,o){r.host.models.User.ensureEntity(e,{onlyPlaceholder:"placeholder"===n.messageCounterParties,onMissing:function(){var n=t?"entry "+t.counterPartyId+" not found, created placeholder on org "+t.organizationId:"counterParty "+e+" not found";r.logger.info(n)},onLoad:function(){t&&n.touchOnRelatedEntityLoad&&r.host.models.Conversation.inject(t)},onFinish:i})})):null},e.prototype._setAllowedSenders=function(t){var e=t.counterParty,n=t.counterPartyType,r=t.organization,i=this.host.currentUser,o=[i];if(!r)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.ORGANIZATION_DOES_NOT_EXIST);if(i.contactsMessagingBlocked&&r.isContacts)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.CONTACTS_MESSAGING_BLOCKED_BY_ADMIN);if(!n)return t.allowedSenders=o,void(t.allowedSendersReason=Zn.CONVERSATION_NOT_FULLY_LOADED);if(!e)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.NO_COUNTER_PARTY);switch(n){case"user":return e.$placeholder?(t.allowedSenders=[],void(t.allowedSendersReason=Zn.COUNTER_PARTY_NOT_FULLY_LOADED)):"TigerPage"===e.displayName?(t.allowedSenders=[],void(t.allowedSendersReason=Zn.COUNTER_PARTY_IS_TIGERPAGE)):(t.allowedSenders=o,void(t.allowedSendersReason=Zn.NONE));case"distributionList":return t.allowedSenders=o,void(t.allowedSendersReason=Zn.NONE);case"group":var a=e.createdByRole,s=e.createdByUser,u=e.groupType,c=e.p2pRecipient,l=e.p2pSender,d=e.targetRole,f=e.targetUser,h=e.members,p=e.proxiedMembers,v=r.allowedSenders;if(u===nr.FORUM)return t.allowedSenders=o,void(t.allowedSendersReason=Zn.NONE);if(u===nr.ROLE_ASSIGNMENT)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.IS_ROLE_ASSIGNMENT_GROUP);if(u===nr.ROLE_P2P&&c&&l){var y=[],g=a&&a.botUser,m=d&&d.botUser;!g||h&&h.includes(g)?!s||h&&h.includes(s)||y.push(s):y.push(g),!m||h&&h.includes(m)?!f||h&&h.includes(f)||y.push(f):y.push(m),y.length>0&&(h=co(h||[],y))}else if(e.$placeholder)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.COUNTER_PARTY_NOT_FULLY_LOADED);if(!h)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.GROUP_MEMBERS_NOT_LOADED);if(0===h.length)return t.allowedSenders=[],void(t.allowedSendersReason=Zn.GROUP_HAS_NO_MEMBERS);for(var _=[],b=0,w=v;b<w.length;b++){var I=w[b],O="role"===I.$entityType?I.botUser:I;if(h.includes(O)){var E=O.id,T=p&&p[E];if(T){for(var S=!1,A=0,C=T;A<C.length;A++){C[A].token===E&&(S=!0)}if(!S)continue}_.push(I)}}return 0===_.length?(t.allowedSenders=_,void(t.allowedSendersReason=Zn.USER_IS_NOT_MEMBER_OF_GROUP)):u!==nr.ROLE_P2P?(t.allowedSenders=_,void(t.allowedSendersReason=Zn.NONE)):l&&_.includes(l)?c===i||i.roles.includes(c)?(t.allowedSenders=[],void(t.allowedSendersReason=Zn.CONVERSATION_WITH_ROLE_YOU_ARE_CURRENTLY_IN)):(t.allowedSenders=[l],void(t.allowedSendersReason=Zn.NONE)):(t.allowedSenders=[],void(t.allowedSendersReason=Zn.USER_IS_NOT_IN_THIS_ROLE_CONVERSATION));default:return t.allowedSenders=[],void(t.allowedSendersReason=Zn.COUNTER_PARTY_TYPE_NOT_SUPPORTED)}},e.prototype.reactToProcessingStart=function(t){var e=t.data,n=(e=wi(e)).action_type,r=e.conversation_id,i=e.entity,o=e.organization_id,a=i.token||i.id,s=vr.resolve(n);if(this.host.products._addProcessingEvent({actionType:s,entity:io({id:a},i)}),s===vr.ROLE_OPT_OUT)this._roleConversationsProcessingEvent[a]=this.host.roles._roleConversations[a];else if(s===vr.ORGANIZATION_MESSAGE_STATUS||s===vr.ORGANIZATION_REPLAY){var u=this.host.organizations.getById(o);if(!u)return;u._markingAsReadConversations&&this.__clearOptimisticStatus(u._markingAsReadConversations)}else if(s===vr.GROUP_REPLAY){var c=void 0;if(r&&(c=this.getById(r)),!c)return;this.__clearOptimisticStatus([c])}else if(s===vr.ROLE_OPT_IN||s===vr.ROLE_OPT_OUT){var l=this.host.roles._roleConversations[a];if(!l)return;this.__clearOptimisticStatus(l)}},e.prototype.reactToProcessingStop=function(t){var e=t.data,n=(e=wi(e)).action_type,r=e.conversation_id,i=e.entity,o=e.organization_id;!r&&i.conversation_id&&(r=i.conversation_id,delete i.conversation_id),!o&&i.organization_key&&(o=i.organization_key,delete i.organization_key);var a=i.token||i.id,s=vr.resolve(n);if(s===vr.GROUP_REPLAY){var u=void 0;if(r&&(u=this.getById(r)),!u)return;this.clearTimeline(u),this.__clearOptimisticStatus([u])}else if(s===vr.ROLE_OPT_IN||s===vr.ROLE_OPT_OUT){this.clearTimelineForAllRoleConversations(s,a);var c=this.host.roles._roleConversations[a];if(!c)return void this.host.products._removeProcessingEvent({actionType:s,entity:io({id:a},i)});this.__clearOptimisticStatus(c)}else if(s===vr.ORGANIZATION_MESSAGE_STATUS)this.clearMessageStatusesForOrganization(o);else if(s===vr.CONVERSATION_MESSAGE_STATUS){u=void 0;if(r&&(u=this.getById(r)),!u)return;this.clearMessageStatuses(u)}if(s===vr.ORGANIZATION_MESSAGE_STATUS||s===vr.ORGANIZATION_REPLAY){var l=this.host.organizations.getById(o);if(!l)return;l._markingAsReadConversations&&this.__clearOptimisticStatus(l._markingAsReadConversations)}this.host.products._removeProcessingEvent({actionType:s,entity:io({id:a},i)})},e.prototype.__clearOptimisticStatus=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];r._markingAsRead&&(r._markingAsRead=!1,r._markingAsReadSortNumber=null,r._markingAsReadExpiration=null,this.host.models.Conversation.inject(r))}},e.prototype.clearTimelineForAllRoleConversations=function(t,e){var n;if(n=t===vr.ROLE_OPT_OUT?this._roleConversationsProcessingEvent[e]:this.host.roles._roleConversations[e])for(var r=0,i=n;r<i.length;r++){var o=i[r];this.clearTimeline(o)}},e.prototype.clearMessageStatusesForOrganization=function(t){var e=this.host.organizations.getById(t);if(e){var n=e.conversations;if(n)for(var r=0,i=n;r<i.length;r++){var o=i[r];this.clearMessageStatuses(o)}}},e.prototype.clearMessageStatuses=function(t,e){for(var n=this,r=(void 0===e?{}:e).emit,i=void 0===r||r,o=t.timeline,a=0,s=o;a<s.length;a++){var u=s[a];u.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(u)}return setTimeout((function(){for(var t=0,e=o;t<e.length;t++){var r=e[t];if(!n.host.messages._pendingFindRecipientStatuses)return;var i=n.host.messages._pendingFindRecipientStatuses[r.id];i&&i()}}),0),i&&this.emit("clearMessageStatuses",o),o.length},e.prototype.mute=function(t,e){return ao(this,void 0,void 0,(function(){return so(this,(function(n){switch(n.label){case 0:return[4,this.host.mute.muteConversation(t,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.unmute=function(t){return ao(this,void 0,void 0,(function(){return so(this,(function(e){switch(e.label){case 0:return[4,this.host.mute.unmuteConversation(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.unmuteAll=function(){return ao(this,void 0,void 0,(function(){return so(this,(function(t){switch(t.label){case 0:return[4,this.host.mute.unmuteAll()];case 1:return t.sent(),[2]}}))}))},oo([Object(Tr.decorator)()],e.prototype,"findAll",null),oo([Object(Tr.decorator)()],e.prototype,"add",null),oo([Object(Tr.decorator)()],e.prototype,"remove",null),e}(zi),Oo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eo=function(){return(Eo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},To=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},So=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ao=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Co=["display_name"].join(","),Ro=["name"].join(","),Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.mounted=function(){this._fetched=!1},e.prototype.dispose=function(){this._fetched=!1},e.prototype.addMembers=function(t){var e=t.id,n=t.members,r=t.organizationId;return So(this,void 0,void 0,(function(){return Ao(this,(function(t){switch(t.label){case 0:if(!e)throw new Un.ValidationError("id","required");if(!Array.isArray(n))throw new Un.ValidationError("members","required","members must be an array");if(!r)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.membersBatch({id:e,members:n,operation:"add",organizationId:r})];case 1:return t.sent(),[2]}}))}))},e.prototype.batchDelete=function(t){var e=t.ids,n=t.organizationId;return So(this,void 0,void 0,(function(){var t=this;return Ao(this,(function(r){switch(r.label){case 0:if(!Array.isArray(e))throw new Un.ValidationError("ids","required","ids must be an array");if(!n)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.batch({ids:e,operation:"destroy",organizationId:n})];case 1:return r.sent(),[2,e.map((function(e){return t.host.models.DistributionList.inject({$deleted:!0,id:e})}))]}}))}))},e.prototype.create=function(t){var e=t.adminOnly,n=t.members,r=t.name,i=t.network,o=void 0===i?"patient":i,a=t.organizationId;return So(this,void 0,void 0,(function(){var t;return Ao(this,(function(i){switch(i.label){case 0:if(this._validate({adminOnly:e,members:n,name:r,organizationId:a,shouldCheckId:!1}),!1===["patient"].includes(o))throw new Un.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.distributionLists.create({adminOnly:e,members:n,name:r,network:o,organizationId:a})];case 1:return t=i.sent(),[2,this.host.models.DistributionList.inject(Eo({conversationId:t.conversation_id,organizationId:t.organization_id},t.entity))]}}))}))},e.prototype.delete=function(t,e){return So(this,void 0,void 0,(function(){return Ao(this,(function(n){switch(n.label){case 0:return this._validate({id:t,organizationId:e,shouldCheckInvalid:!1}),[4,this.host.api.distributionLists.delete(t,e)];case 1:return n.sent(),[2,this.host.models.DistributionList.inject({$deleted:!0,id:t})]}}))}))},e.prototype.find=function(t,e){return void 0===e&&(e={}),So(this,void 0,void 0,(function(){var n,r;return Ao(this,(function(i){switch(i.label){case 0:return e=y.a.defaults(e,{ignoreNotFound:!1,bypassCache:!1,includeMembers:!1,includeMetadata:!1}),this.host.requireUser(),n=null,!e.bypassCache&&(n=this.host.models.DistributionList.get(t))?[2,n]:[4,this.host.api.distributionLists.find(t,{organizationId:e.organizationId})];case 1:if(r=i.sent())delete(n=this.config.condensedReplays||r.entity?this.host.models.DistributionList.inject(Eo({conversationId:r.conversation_id,organizationId:r.organization_id},r.entity)):this.host.models.DistributionList.inject(r)).$placeholder;else if(!e.ignoreNotFound)throw new Un.NotFoundError(this.host.models.DistributionList.name,t);return[2,n]}}))}))},e.prototype.findAll=function(){return So(this,void 0,void 0,(function(){var t,e,n;return Ao(this,(function(r){switch(r.label){case 0:return this._fetched?[2,this.getAll()]:0!==(t=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:t=r.sent(),r.label=2;case 2:return[4,this.host.search.query({types:["distributionList"],organizationIds:t.map((function(t){return t.id})),query:{displayName:""},followContinuations:!0})];case 3:return e=r.sent().results,n=e.map((function(t){return t.entity})),this._fetched=!0,[2,n]}}))}))},e.prototype.getAll=function(){return this.host.models.DistributionList.getAll()},e.prototype.getById=function(t){return this.host.models.DistributionList.get(t)},e.prototype.getMultiById=function(t){return this.host.models.DistributionList.getMulti(t)},e.prototype.removeMembers=function(t){var e=t.id,n=t.members,r=t.organizationId;return So(this,void 0,void 0,(function(){return Ao(this,(function(t){switch(t.label){case 0:if(!e)throw new Un.ValidationError("id","required");if(!Array.isArray(n))throw new Un.ValidationError("members","required","members must be an array");if(!r)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.membersBatch({id:e,members:n,operation:"remove",organizationId:r})];case 1:return t.sent(),[2]}}))}))},e.prototype.search=function(t){var e=t.continuation,n=t.network,r=void 0===n?"patient":n,i=t.organizationId,o=t.query,a=void 0===o?"":o,s=t.sortBy,u=void 0===s?"name":s,c=t.sortOrder,l=void 0===c?"asc":c,d=t.types,f=void 0===d?[yr.PATIENT_DISTRIBUTION_LIST]:d;return So(this,void 0,void 0,(function(){var t,n,o,s;return Ao(this,(function(c){switch(c.label){case 0:return[4,this.host.search.query({continuation:e,network:r,organizationId:i,query:(o={},o[Ro]=a,o),returnFields:[],sort:(s={},s[u]=l,s),types:f})];case 1:return t=c.sent(),n=this._processSearchResults(t.results),[2,{metadata:t.metadata,results:n}]}}))}))},e.prototype.findMembers=function(t,e){var n=void 0===e?{}:e,r=n.continuation,i=n.network,o=void 0===i?"patient":i,a=n.organizationId,s=n.query,u=void 0===s?"":s,c=n.sortBy,l=void 0===c?["display_name"]:c,d=n.sortOrder,f=void 0===d?["asc"]:d;return So(this,void 0,void 0,(function(){var e,n,i,s,c;return Ao(this,(function(d){switch(d.label){case 0:if(!t)throw new Un.ValidationError("id","required");if(!a)throw new Un.ValidationError("organizationId","required");if(l.length!==f.length)throw new Un.ValidationError("sortBy","invalid","sortBy and sortOrder must be the same length");for(e={},n=0;n<l.length;n++)e[l[n]]=f[n];return[4,this.host.search.query({continuation:r,network:o,organizationId:a,query:(c={},c[Co]=u,c.dist_list_token=t,c),returnFields:[],sort:e,types:[yr.DISTRIBUTION_LIST_MEMBER]})];case 1:return i=d.sent(),s=this._processSearchResults(i.results),[2,{metadata:i.metadata,results:s}]}}))}))},e.prototype.findMemberIds=function(t,e,n){var r=(void 0===n?{}:n).continuation;return So(this,void 0,void 0,(function(){var n,i,o,a,s;return Ao(this,(function(u){switch(u.label){case 0:if(!t)throw new Un.ValidationError("id","required");if(!e)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.distributionLists.findMemberIds(t,e,{continuation:r})];case 1:return n=u.sent(),i=n.members,o=void 0===i?[]:i,a=n.metadata,s=o.map((function(t){return t.token})),[2,{metadata:a,results:s}]}}))}))},e.prototype.update=function(t){var e=t.adminOnly,n=t.id,r=t.name,i=t.organizationId;return So(this,void 0,void 0,(function(){var t;return Ao(this,(function(o){switch(o.label){case 0:return this._validate({adminOnly:e,name:r,id:n,organizationId:i}),[4,this.host.api.distributionLists.update({adminOnly:e,id:n,name:r,organizationId:i})];case 1:return t=o.sent(),[2,this.host.models.DistributionList.inject(Eo({conversationId:t.conversation_id,organizationId:t.organization_id},t.entity))]}}))}))},e.prototype._processSearchResults=function(t){return t.map((function(t){return t.entity})).filter((function(t){return!t.$deleted}))},e.prototype._validate=function(t){var e=t.adminOnly,n=t.id,r=(t.members,t.name),i=t.organizationId,o=t.shouldCheckId,a=void 0===o||o,s=t.shouldCheckInvalid,u=void 0===s||s;if(a&&!n)throw new Un.ValidationError("id","required");if(!i)throw new Un.ValidationError("organizationId","required");if(u){if(void 0!==e&&"boolean"!=typeof e)throw new Un.ValidationError("adminOnly","invalid","adminOnly must be a boolean value");if(r&&(0===r.length||r.length>60))throw new Un.ValidationError("name","invalid","name must be less than 60 alphanumeric characters")}},To([Object(Tr.decorator)()],e.prototype,"find",null),To([Object(Tr.decorator)()],e.prototype,"findAll",null),To([Object(Tr.decorator)()],e.prototype,"search",null),e}(zi),jo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Mo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ko=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},No=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jo(e,t),e.prototype.findMulti=function(t,e){return Mo(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_,b,w,I,O,E,T,S,A,C=this;return ko(this,(function(R){switch(R.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");return t=y.a.uniq(ki(t).map(this._resolveModelId)),n=y.a.chunk(t,10),r=n.map((function(t){return C.host.api.entities.findMulti({users:t,metadata:t,organizationId:e})})),[4,Promise.all(r)];case 1:for(i=R.sent(),o={},a=0,s=i;a<s.length;a++){if(u=s[a],c=u.users,l=u.metadata,c)for(d=0,f=c;d<f.length;d++)for(h=f[d],p=0,v=Object.entries(h);p<v.length;p++)g=v[p],T=g[0],m=g[1],o[T]={entity:m};if(l)for(_=0,b=l;_<b.length;_++)for(w=b[_],I=0,O=Object.entries(w);I<O.length;I++)E=O[I],T=E[0],S=E[1],(A=o[T])&&(A.metadata=S)}return[2,Object.values(o)]}}))}))},xo([Object(Tr.decorator)()],e.prototype,"findMulti",null),e}(zi),zo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Do=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Uo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Lo=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zo(e,t),e.prototype.escalateMessage=function(t){return Uo(this,void 0,void 0,(function(){var e,n,r;return Lo(this,(function(i){switch(i.label){case 0:if(!(e=this._resolveEntity(t,"message")))throw new Un.NotFoundError(this.host.models.Message.name,t);return[4,this.host.api.escalations.escalateMessage(e.serverId)];case 1:return n=i.sent(),r=(n||{}).escalation,[2,this._updateEscalation(r)]}}))}))},e.prototype.acknowledge=function(t){return Uo(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Lo(this,(function(u){switch(u.label){case 0:if(!(e=this._resolveEntity(t,"escalationExecution")))throw new Un.NotFoundError(this.host.models.EscalationExecution.name,t);return t=e.id,n=e.originalMessageId,r=this.host,i=r.currentUser,o=r.currentUserId,(a=i.roles.map((function(t){return t.botUserId}))).push(o),[4,this.host.api.escalations.acknowledge(t,{messageId:n,userTokens:a})];case 1:return s=u.sent(),[2,this.host.models.EscalationExecution.inject(s)]}}))}))},e.prototype.cancel=function(t){return Uo(this,void 0,void 0,(function(){var e,n;return Lo(this,(function(r){switch(r.label){case 0:if(!(e=this._resolveEntity(t,"escalationExecution")))throw new Un.NotFoundError(this.host.models.EscalationExecution.name,t);return n=e.originalMessageId,[4,this.host.api.escalations.cancel(n)];case 1:return r.sent(),[2]}}))}))},e.prototype.ensureEscalationExecution=function(t){return Uo(this,void 0,void 0,(function(){var e,n,r,i;return Lo(this,(function(o){switch(o.label){case 0:if(!(e=this._resolveEntity(t,"escalationExecution")))throw new Un.NotFoundError(this.host.models.EscalationExecution.name,t);return n=e.carbonCopyMessageId,r=e.originalMessageId,i=[],n&&i.push(n),r&&i.push(r),[4,this.host.messages.ensureRecipientStatusMulti(i)];case 1:return o.sent(),[2]}}))}))},e.prototype.skip=function(t){return Uo(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Lo(this,(function(u){switch(u.label){case 0:if(!(e=this._resolveEntity(t,"escalationExecution")))throw new Un.NotFoundError(this.host.models.EscalationExecution.name,t);return t=e.id,n=e.originalMessageId,r=this.host,i=r.currentUser,o=r.currentUserId,(a=i.roles.map((function(t){return t.botUserId}))).push(o),[4,this.host.api.escalations.skip(t,{messageId:n,userTokens:a})];case 1:return s=u.sent(),[2,this.host.models.EscalationExecution.inject(s)]}}))}))},e.prototype.removeEscalationGroup=function(t){return Uo(this,void 0,void 0,(function(){var e,n;return Lo(this,(function(r){switch(r.label){case 0:if(!(e=this._resolveEntity(t,"escalationExecution")))throw new Un.NotFoundError(this.host.models.EscalationExecution.name,t);return n=e.groupId,[4,this.host.api.groups.destroy(n)];case 1:if(!r.sent())throw new Un.NotFoundError(this.host.models.Group.name,n);return[2]}}))}))},e.prototype.reactToEscalationsEvent=function(t){var e=t.data;this._updateEscalation(e.escalation)},e.prototype._updateEscalation=function(t,e){var n=(void 0===e?{}:e).inGroupInject,r=void 0!==n&&n,i={};t&&t.display_name&&(i=this.host.models.EscalationExecution.inject(t));var o=i.id,a=i.carbonCopyMessage,s=i.groupId,u=i.organizationId,c=i.originalMessage;return c&&this.host.models.Message.inject({escalationExecutionId:o,id:c.id}),a&&this.host.models.Message.inject({escalationExecutionId:o,id:a.id}),s&&!r&&this.host.models.Group.inject({id:s,escalationExecutionId:o,organizationId:u}),i},e.prototype.getAll=function(){return this.host.models.EscalationExecution.getAll()},e.prototype.getById=function(t){return this.host.models.EscalationExecution.get(t)},Do([Object(Tr.decorator)()],e.prototype,"escalateMessage",null),Do([Object(Tr.decorator)()],e.prototype,"acknowledge",null),Do([Object(Tr.decorator)()],e.prototype,"cancel",null),Do([Object(Tr.decorator)()],e.prototype,"skip",null),Do([Object(Tr.decorator)()],e.prototype,"removeEscalationGroup",null),e}(zi),Bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Vo=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Go=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.EVENTS={bang:function(t){this.host.groups.reactToBangEvent(t)},client_advisory:function(t){switch(t.data.advisory.name){case"replay_start":this.host.reactToAdvisoryEvent("replayStart",{replayMessageCount:t.data.advisory.replay_message_count});break;case"replay_stop":this.host.reactToAdvisoryEvent("replayStop")}},escalations:function(t){this.host.escalations.reactToEscalationsEvent(t)},friends:function(t){this.host.conversations.reactToFriendsEvent(t)},"message|group_message":function(t){this.host.conversations.reactToMessageEvent(t)},"message:status|group:message:status":function(t){this.host.messages.reactToMessageStatusEvent(t)},user_preferences:function(t){this.host.users.reactToUserPreferencesEvent(t)},org_preferences:function(t){this.host.organizations.reactToOrganizationPreferencesEvent(t)},presence:function(t){this.host.presence.reactToPresenceEvent(t)},update:function(t){this.host.conversations.reactToUpdateEvent(t)},"update:tag":function(t){this.host.roleTags.reactToUpdateEvent(t)},"update:team_request":function(t){this.host.conversations.reactToUpdateTeamRequestEvent(t)},"account:settings":function(t){var e=this;t.data.services.forEach((function(n){switch(n.xmlns){case"tigertext:iq:update:account":var r=n.account||t.data.token;e.host.users.refresh(r);break;case"tigertext:iq:update:org_settings":e.host.organizations.refreshAll();break;default:e.logger.warn("unhandled account:settings service type "+n.xmlns)}}))},"message:is_typing":function(t){this.host.typingStatus.reactToIsTypingEvent(t)},"processing:start":function(t){this.host.conversations.reactToProcessingStart(t)},"processing:stop":function(t){this.host.conversations.reactToProcessingStop(t)},remote_wipe:function(t){return qo(this,void 0,void 0,(function(){return Vo(this,(function(t){switch(t.label){case 0:return this.host.notifications.disconnect({source:"remote_wipe event"}),[4,this.host.notifications.signOut({fromServer:!0})];case 1:return t.sent(),this.host.signOut({fromServer:!0}),[2]}}))}))},validated:function(t){this.logger.warn("validated not implemented")},"msg:metadata_update":function(t){this.logger.warn("msg:metadata_update not implemented")},conversation_mute:function(t){this.host.mute.reactToMuteEvent(t)},reconnect:function(t){this.host.events.reconnect()},"vwr:joinablecall":function(t){this.host.virtualWaitingRooms.reactToJoinableCallSSE(t)},"voip:incoming|voip:ended|voip:answered|voip:state":function(t){this.host.calls.reactToVoipSSE(t)},"push:credentials":function(){return null},"sse:heartbeat":function(){return null},"sse:keepalive":function(){return null}};for(var i=0,o=Object.entries(r.EVENTS);i<o.length;i++){var a=o[i],s=a[0],u=a[1];if(s.includes("|")){for(var c=0,l=s.split("|");c<l.length;c++){var d=l[c];r.EVENTS[d]=u}delete r.EVENTS[s]}}return r}return Bo(e,t),e.prototype.emit=function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t):this.logger.info("unhandled event: "+t.type,t.data)},e}(zi),Ho=n(59),Wo=n.n(Ho),Yo=function(){function t(t,e,n){this.id=t,this.type=e,this.data=n}return t.is=function(t){return t instanceof this},t}(),Ko=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$o=function(){return($o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Xo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Qo=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Zo=["message:is_typing","presence","remote_wipe","sse:heartbeat"],Jo=["message:is_typing","presence","sse:heartbeat"],ta=["00000000-0000-0000-0000-000000000001"],ea=["remote_wipe"],na={autoDeliver:"auto-deliver",canConfirm:"can-confirm",closeAfterMessages:"close-after-messages",heartbeat:"heartbeat_5",hidden:"hidden",includeDistributionListEvents:"dl_sender_event",isTyping:"is-typing",keepAlive:"keep_alive_15_1",msgDeliveryDelay:"msg_delivery_delay",multiOrg:"multi-org",noOfflineMessages:"no-offline-messages",renderMetadata:"render_metadata",singleConversation:"single_conversation"},ra={events:{allowManualRequestBatch:!0,basicAuthParam:"auth_basic",features:null,requiresBasicAuth:!1,routerName:"eventRouter",url:"/events"},simpleNotifications:{allowManualRequestBatch:!1,basicAuthParam:"auth",features:{heartbeat:!0},requiresBasicAuth:!0,routerName:"notificationRouter",url:"/events/simple_notifications"}},ia=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.onNetworkStatusChanged=function(t){var e=t.networkStatus,n=t.previousStatus;if(r.__allEvents.push({networkStatusChange:{previousStatus:n,networkStatus:e,timestamp:new Date}}),e===br.CONNECTING){if(r._reconnectIfHeartbeatIntervalPassed()&&r.eventSource)return;r._connectionRetryCount=1,r._disconnectAndRetry()}else e===br.OFFLINE&&(r._connectionRetryCount=0,r.disconnect({unwatchNetwork:!1,source:"Network went offline"}))},r._closeAllConnections=function(){return Xo(r,void 0,void 0,(function(){var t,e,n;return Qo(this,(function(r){switch(r.label){case 0:if(this.eventSource)throw new Error("Existing connections must be closed first");if("simpleNotifications"!==this.endpointType)return[3,2];if(t=this._auth,e=t.key,n=t.secret,!e||!n)throw new Un.RequiresBasicAuthError;return[4,this.host.api.notifications.closeAllConnections(e,n)];case 1:return r.sent(),[3,4];case 2:return[4,this.host.api.events.closeAllConnections()];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},r._processImmediateEvent=function(t,e){return Xo(r,void 0,void 0,(function(){return Qo(this,(function(n){switch(n.label){case 0:return this._eventQueue=[e],this._eventQueueDeferred=!1,this._autoAck?[4,this.ack([t])]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.processEventQueue(),[2]}}))}))},r._scheduleEventQueue=function(t){var e=(void 0===t?{}:t).immediate,n=void 0!==e&&e;if(r.allowManualRequestBatch&&r.config.manuallyRequestEventQueueBatch&&(r._eventQueueIsManual=!0),n&&(clearTimeout(r._eventQueueTimeout),r._eventQueueTimeout=null),null===r._eventQueueTimeout){var i=r.config.eventCollectionInterval;if(n||null===i)r._eventQueueIsManual?r._emitBatch({immediate:n}):r.processEventQueue(r._eventQueue.length);else{var o=r._eventQueueIsManual?r._emitBatch:r.processEventQueue;r._eventQueueTimeout=setTimeout(o,i)}}},r._emitBatch=function(t){var e=(void 0===t?{}:t).immediate,n=void 0!==e&&e;r._eventQueueTimeout=null,r.emit("batch:available",{maxEventBatch:r._eventQueue.length,immediate:n})},r.deferEventQueue=function(){r._eventQueueDeferred=!0,r._eventQueueTimeout&&(clearTimeout(r._eventQueueTimeout),r._eventQueueTimeout=null)},r.resumeEventQueue=function(){r._eventQueueDeferred=!1,r._eventQueueTimeout&&(clearTimeout(r._eventQueueTimeout),r._eventQueueTimeout=null),r._eventQueue.length>0&&r._scheduleEventQueue()},r.processEventQueue=function(t){var e,n,i;if(void 0===t&&(t=r.config.maxEventBatch),r._eventQueueIsManual||(r._eventQueueTimeout=null),!r._eventQueueDeferred&&0!==r._eventQueue.length)try{for(var o=r._eventQueue.splice(0,t),a=0,s=o;a<s.length;a++)e=s[a],n=!1,i=JSON.parse(e),n=!0,r._handleEvent(i);r._eventQueue.length>0?r._scheduleEventQueue():r._reconnectWhenQueuesAreEmpty&&0===r._queuedAcks.length&&0===r._pendingAckConnections&&r._scheduleConnectRetry()}catch(t){n?(r.logger.error("error while processing SSE payload",t,t.stack,{data:i}),r.disconnect({isRecoverable:!1,source:"Error processing SSE payload"})):(r.logger.error("error parsing SSE payload: <"+e+">"),r._disconnectAndRetry())}},r._flushQueuedAcks=function(){return Xo(r,void 0,void 0,(function(){var t,e;return Qo(this,(function(n){switch(n.label){case 0:return 0===this._queuedAcks.length?[2]:this._pendingAckConnections>=this.config.flushAckMaxConnections?(this._throttled_flushQueuedAcks(),[2]):(t=this._queuedAcks.splice(0,this.config.flushAckMaxEvents),e=this.ack(t),this._queuedAcks.length>0?(this._throttled_flushQueuedAcks(),[3,5]):[3,1]);case 1:return n.trys.push([1,3,,4]),[4,e];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:this._reconnectWhenQueuesAreEmpty&&0===this._eventQueue.length&&0===this._pendingAckConnections&&this._scheduleConnectRetry(),n.label=5;case 5:return[2]}}))}))},r._onVisibilityChange=function(t,e){e=e.toUpperCase();var n=r._visibilityState;r._visibilityState=e,r.isConnected&&(r.__allEvents.push({visibilityChange:{previousState:n,state:e,timestamp:new Date}}),e===mr.HIDDEN?(r.host.configure({eventCollectionInterval:null}),r._setHeartbeatTimeout(r.config.eventsHeartbeatIntervalInvisible)):e===mr.VISIBLE&&(r.host.configure({eventCollectionInterval:Fn.eventCollectionInterval}),r._setHeartbeatTimeout(r.config.eventsHeartbeatIntervalVisible))),n===mr.HIDDEN&&e===mr.VISIBLE&&r.httpClient.networkStatus===br.CONNECTING&&r._reconnectIfHeartbeatIntervalPassed(),r.emit("visibilityChange",t,e)},r._reconnectIfHeartbeatIntervalPassed=function(){return null!==r._lastHeartbeatTime&&(Date.now()-r._lastHeartbeatTime>=r._heartbeatInterval&&(r._lastHeartbeatTime=null,r.reconnect(),!0))},r.endpointType||(r.endpointType="events");for(var i=0,o=Object.entries(ra[r.endpointType]);i<o.length;i++){var a=o[i],s=a[0],u=a[1];"url"!==s&&(r[s]=u)}return r}return Ko(e,t),e.prototype.mounted=function(){this._throttled_flushQueuedAcks=Wo()(this._flushQueuedAcks,this.config.flushAckInterval,{leading:!1}),this.__allEvents=[],this._connectionRetryCount=0,this._eventQueue=[],this._eventQueueDeferred=!1,this._eventQueueIsManual=!1,this._eventQueueTimeout=null,this._heartbeatInterval=this.config.eventsHeartbeatIntervalVisible,this._heartbeatTimeout=null,this._lastHeartbeatTime=null,this._openTimeout=null,this._pendingAckConnections=0,this._processedEventIds={},this._queuedAcks=[],this._reconnectWhenQueuesAreEmpty=!1,this._reconnectWhenQueuesAreEmpty=!1,this._retryHistoryTimeout=null,this._visibilityState=mr.VISIBLE,this.isConnected=!1,this.isOpen=!1;var t=n(197);this.visibilityListenerId=t.change(this._onVisibilityChange)},e.prototype.dispose=function(){(this._throttled_flushQueuedAcks.cancel&&this._throttled_flushQueuedAcks.cancel(),this.disconnect({source:"EventsService cleanup"}),null!==this.visibilityListenerId)&&(n(197).unbind(this.visibilityListenerId),this.visibilityListenerId=null)},Object.defineProperty(e.prototype,"_autoAck",{get:function(){return"events"===this.endpointType&&this.config.autoAckSuccessfullyHandledEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasConnection",{get:function(){return!!this.eventSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSignedIn",{get:function(){return!!this._auth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"router",{get:function(){return this.host[this.routerName]},enumerable:!1,configurable:!0}),e.prototype.setAuth=function(t){this._auth=$o({basicAuthParam:this.basicAuthParam},t)},e.prototype.removeAuth=function(){this._auth=null},e.prototype.getAuth=function(){return this._auth},e.prototype.connect=function(){var t=this;if(!this.isSignedIn)throw this._cancelSessionTimers({source:"Connection attempt while not signed in"}),new Un.NotSignedInError;if(this.requiresBasicAuth&&(!this._auth.key||!this._auth.secret))throw this._cancelSessionTimers({source:"Connection attempt without valid authorization"}),new Un.RequiresBasicAuthError;if(this.eventSource)throw new Error("Already connected to EventSource");for(var e=[],n=0,r=Object.entries(this.features||this.config.events);n<r.length;n++){var i=r[n],o=i[0],a=i[1];if(a||0===a){var s=na[o],u=!0===a?s:s+":"+a;e.push(u)}}var c=e.join(",");this.logger.info("connecting "+this.endpointType+". networkStatus="+this.httpClient.networkStatus+" features="+c);var l,d=!this._watchingNetworkConnection;if(this.httpClient.networkStatus!==br.OFFLINE&&d&&this.httpClient._setNetworkStatus(br.CONNECTING),this._watchNetworkConnection(),this.httpClient.networkStatus===br.OFFLINE)throw new Error("Cannot connect while network is offline, but will autoconnect when online");this._isClosed=!1,this._isHeartbeatTimeout=!1,this._reconnectWhenQueuesAreEmpty=!1,this._requestedClose=!1;var f=!1,h=!1;this._openTimeout=setTimeout((function(){t._openTimeout=null,h=!0,l.close()}),this.config.eventsOpenTimeout),this.eventSource=l=this.host.eventSourceClient.createEventSource(this.url,{auth:this._auth,features:c,onOpen:function(){t.logger.info("open"),t._cancelSessionTimers({source:"Event source opened"}),t._setHeartbeatTimeout(),f=!0,t.isOpen=!0,t.emit("opened")},onMessage:function(e,n){var r=n.isFirstMessage;t._setHeartbeatTimeout(),r&&(t._setRetryHistoryTimeout(),t.isConnected=!0,t.emit("connected")),t._queueEvent(e)},onError:function(e){var n=!!e&&t.httpClient.isUnauthorizedError(e),r=t._isHeartbeatTimeout,i=t.httpClient.networkStatus,o=t._requestedClose;r?e=new Error("No activity within "+t._heartbeatInterval+" milliseconds; reconnecting"):h&&(e=new Error("Open timed out after "+t.config.eventsOpenTimeout+" milliseconds; reconnecting")),t.logger.info("error",e,e.message||"",e.code||"",void 0!==e.status?e.status:""),t.__allEvents.push({clientDisconnect:{error:{code:e.code,message:e.message,status:e.status},hasConnected:f,isHeartbeatTimeout:r,isUnauthorized:n,networkStatus:i,openTimedOut:h,requestedClose:o,timestamp:new Date}}),o||(n?t.disconnect({isRecoverable:!1,source:"Unauthorized during eventSource error handling"}):i!==br.OFFLINE&&(f||0!==t._connectionRetryCount||(t._connectionRetryCount=1),t._disconnectAndRetry()))}}),this.eventSource.start()},e.prototype._scheduleConnectRetry=function(){var t=this;this._cancelSessionTimers({source:"Scheduling connection retry"}),this.logger.info("scheduleConnectRetry",this._connectionRetryCount);var e=Math.min(this.config.eventsAutoReconnectDelay*this._connectionRetryCount,this.config.eventsAutoReconnectMaxDelay);this._scheduleConnectRetryTimeout=setTimeout((function(){return t.connect()}),e),this._connectionRetryCount++},e.prototype._watchNetworkConnection=function(){this._watchingNetworkConnection||(this._watchingNetworkConnection=!0,this.host.on("networkStatus:change",this.onNetworkStatusChanged))},e.prototype._unwatchNetworkConnection=function(){this._watchingNetworkConnection&&(this.host.removeListener("networkStatus:change",this.onNetworkStatusChanged),this._watchingNetworkConnection=!1)},e.prototype._cancelSessionTimers=function(t){var e=(void 0===t?{}:t).source;this._heartbeatTimeout&&(clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=null),this._openTimeout&&(clearTimeout(this._openTimeout),this._openTimeout=null),this._scheduleConnectRetryTimeout&&(this.__allEvents.push({cancelSessionTimer:{source:e,timestamp:new Date}}),clearTimeout(this._scheduleConnectRetryTimeout),this._scheduleConnectRetryTimeout=null),null!==this._eventQueueTimeout&&(clearTimeout(this._eventQueueTimeout),this._eventQueueTimeout=null)},e.prototype._setHeartbeatTimeout=function(t){var e=this;this._heartbeatTimeout&&clearTimeout(this._heartbeatTimeout),void 0!==t&&(this._heartbeatInterval=t),this._heartbeatTimeout=setTimeout((function(){e._heartbeatTimeout=null,e._isHeartbeatTimeout=!0,0===e._connectionRetryCount&&(e._connectionRetryCount=1),e._disconnectAndRetry()}),this._heartbeatInterval)},e.prototype._cancelRetryHistoryTimeout=function(){this._retryHistoryTimeout&&(clearTimeout(this._retryHistoryTimeout),this._retryHistoryTimeout=null)},e.prototype._setRetryHistoryTimeout=function(){var t=this;this._retryHistoryTimeout&&clearTimeout(this._retryHistoryTimeout),this._retryHistoryTimeout=setTimeout((function(){t._retryHistoryTimeout=null,t._connectionRetryCount=0}),this.config.eventsClearRetryHistoryInterval)},e.prototype.reconnect=function(){this._connectionRetryCount=0,this.disconnect({unwatchNetwork:!1,source:"Reconnect"}),this.connect()},e.prototype._disconnectAndRetry=function(){var t=this;this.__allEvents.push({eventsDisconnectAndRetry:{eventQueueLength:this._eventQueue.length,pendingAckConnections:this._pendingAckConnections,queuedAcksLength:this._queuedAcks.length,connectionRetryCount:this._connectionRetryCount,timestamp:new Date}}),this.disconnect({clearQueues:!1,unwatchNetwork:!1,source:"Disconnect and retry"}),this.config.eventsAutoReconnect&&(this._reconnectWhenQueuesAreEmpty=!0),this.config.eventsAutoReconnect&&0===this._eventQueue.length&&0===this._pendingAckConnections&&0===this._queuedAcks.length?this._scheduleConnectRetry():this.config.eventsAutoReconnect&&(this._scheduleConnectRetryTimeout=setTimeout((function(){return t.connect()}),this.config.eventDrainTimeout)),this._eventQueue.length>0&&this._scheduleEventQueue({immediate:!0}),(this._pendingAckConnections>0||this._queuedAcks.length>0)&&this._flushQueuedAcks()},e.prototype.disconnect=function(t){var e=void 0===t?{}:t,n=e.clearQueues,r=void 0===n||n,i=e.isRecoverable,o=void 0===i||i,a=e.unwatchNetwork,s=void 0===a||a,u=e.source;if(this.__allEvents.push({eventsDisconnect:{clearQueues:r,source:u,unwatchNetwork:s}}),this._cancelSessionTimers({source:"Disconnect"}),this._cancelRetryHistoryTimeout(),s&&this._unwatchNetworkConnection(),this.eventSource){var c=this.eventSource;this.eventSource=null,this._requestedClose=!0,this._isClosed||(this._isClosed=!0,c.close()),this.emit("disconnected",{isRecoverable:o})}this.isConnected=!1,this.isOpen=!1,r&&(this._eventQueue=[],this._queuedAcks=[])},e.prototype._queueEvent=function(t){var e=t.data;if(e){if(ea.some((function(t){return e.includes(t)}))){var n=void 0;try{n=JSON.parse(e)}catch(t){return this.logger.error("error parsing SSE payload: <"+e+">"),void this._disconnectAndRetry()}var r=Object.keys(n.event)[0].replace("tigertext:iq:","");if(ea.includes(r)){this.disconnect({source:"Immediate event "+r});var i=n.event_id;return void this._processImmediateEvent(i,e)}}this._eventQueue.push(e),this._scheduleEventQueue()}},e.prototype._handleEvent=function(t){var e=t.event_id;if(this._autoAck||!this._processedEventIds[e]||ta.includes(e)){var n=Object.keys(t.event)[0],r=n.replace("tigertext:iq:",""),i=t.event[n];!this.config.eventsDebugging&&Jo.includes(r)||this.__allEvents.push(t),"sse:heartbeat"===r&&(this._lastHeartbeatTime=Date.now()),this.logger.debug("incoming",r,i);var o=new Yo(e,r,i);try{this.router.emit(o),this.emit("event",o),this._autoAck?Zo.includes(r)||this.__queueAck(e):this._processedEventIds[e]=!0}catch(t){this.logger.error("error in event "+r,t,t.stack,{data:i}),this.disconnect({isRecoverable:!1,source:"Error in event "+r})}}},e.prototype.__queueAck=function(t){var e;t=ki(t),(e=this._queuedAcks).push.apply(e,t),this._throttled_flushQueuedAcks()},e.prototype.ack=function(t){return Xo(this,void 0,void 0,(function(){var e,n;return Qo(this,(function(r){switch(r.label){case 0:this.host.requireUser(),e=!1,t=ki(t),this.logger.log("ack",t),this._pendingAckConnections++,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.host.api.events.ack(t)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),e=this.httpClient.isUnauthorizedError(n),this.logger.warn("some events not acked",t),[3,4];case 4:return this._pendingAckConnections--,e&&(this.logger.warn("no longer authorized, terminating session"),this.disconnect({isRecoverable:!1,source:"Unauthorized during ack"})),[2]}}))}))},Object.defineProperty(e.prototype,"url",{get:function(){var t=ra[this.endpointType].url;return"/"+("events"===this.endpointType&&this.config.condensedReplays?"v5":"v2")+t},enumerable:!1,configurable:!0}),e}(zi),oa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aa=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},sa=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ua=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ca=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oa(e,t),e.prototype.mounted=function(){this._fetched=!1},e.prototype.dispose=function(){this._fetched=!1},e.prototype.create=function(t){var e=t.avatarFile,n=t.description,r=t.memberIds,i=void 0===r?[]:r,o=t.metadata,a=t.name,s=t.organizationId,u=t.replayHistory,c=void 0===u||u,l=t.senderId,d=void 0===l?this.host.currentUserId:l;return sa(this,void 0,void 0,(function(){var t,r,u,l,f=this;return ua(this,(function(h){switch(h.label){case 0:if(this.host.requireUser(),!s)throw new Un.ValidationError("organizationId","required");return[4,Promise.all(ca([d],i).map(this.host.roles.__resolveRoleId).filter(Boolean).map((function(t){return f._resolveModelIdWithTypes(t,"user")})).map((function(t){return f.host.users.findOrCreate(t,{organizationId:s})})))];case 1:return t=h.sent(),r=Xi.a.call(t),i=r.map((function(t){return f._resolveModelIdWithTypes(t,"user")})),[4,this.host.api.groups.create({avatarFile:e,description:n,excludeCreator:!1,isPublic:!0,memberIds:i,metadata:o,name:a,organizationId:s,replayHistory:c})];case 2:return u=h.sent(),l=this.config.condensedReplays&&u.entity?this.host.conversations.__injectCounterParty({conversationId:u.conversation_id,entityAttrs:u.entity,entityType:"group",hasCurrentUser:!0,organizationId:u.organization_id}):this.host.models.Group.inject(u),o&&this.host.metadata.__injectMetadata(l.id,s,o),[2,l]}}))}))},e.prototype.find=function(t,e){return void 0===e&&(e={}),sa(this,void 0,void 0,(function(){var n,r;return ua(this,(function(i){switch(i.label){case 0:return e=y.a.defaults(e,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),n=null,e.bypassCache?[3,2]:!(n=this.host.models.Group.get(t))||n.$placeholder?[3,2]:[4,this.host.groups.__ensureEntitiesLoaded(n.id,e)];case 1:return i.sent(),[2,n];case 2:return[4,this.host.groups.__find(t)];case 3:if(r=i.sent(),n=this.host.models.Group.get(t),!r){if(!e.ignoreNotFound)throw new Un.NotFoundError(this.host.models.Group.name,t);return[2,n]}return n?[4,this.host.groups.__ensureEntitiesLoaded(n.id,e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2,n]}}))}))},e.prototype.findAll=function(t){var e=(void 0===t?{}:t).bypassCache,n=void 0!==e&&e;return sa(this,void 0,void 0,(function(){var t,e,r;return ua(this,(function(i){switch(i.label){case 0:return!n&&this._fetched?[2,this.getAll()]:0!==(t=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:t=i.sent(),i.label=2;case 2:return[4,this.host.search.query({types:["forum"],organizationIds:t.map((function(t){return t.id})),query:{displayName:""},followContinuations:!0})];case 3:return e=i.sent().results,r=e.map((function(t){return t.entity})),this._fetched=!0,[2,r]}}))}))},e.prototype.getAll=function(){return this.host.models.Group.getAll().filter((function(t){return t.isPublic}))},e.prototype.getById=function(t){return this.host.models.Group.get(t)},e.prototype.join=function(t){return sa(this,void 0,void 0,(function(){return ua(this,(function(e){return[2,this.host.groups.addMembers(t,[this.host.currentUserId])]}))}))},aa([Object(Tr.decorator)()],e.prototype,"find",null),aa([Object(Tr.decorator)()],e.prototype,"findAll",null),e}(zi),da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fa=function(){return(fa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ha=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},pa=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},va=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ya=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},ga=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._setP2PEntities=function(t){var n=t.createdByRole,r=t.createdByUser,i=t.groupType,o=t.targetUser,a=t.targetRole,s=e.host.currentUser;if(s&&i===nr.ROLE_P2P){var u=s.roles,c=[],l=[];n?l.push(n):r&&r!==s&&c.push(r),a?l.push(a):o&&o!==s&&c.push(o);var d=null,f=null;1===l.length?r===s||o===s?u.includes(l[0])?(d=s,f=l[0]):(d=l[0],f=s):(d=c[0],f=l[0]):2===l.length&&(u.includes(l[0])?(d=l[1],f=l[0]):u.includes(l[1])&&(d=l[0],f=l[1])),t.p2pRecipient=d,t.p2pSender=f}},e._onChangeConversation=function(t,n){var r=n.counterPartyId;if("group"===n.counterPartyType){var i=e.host.models.Group.get(r);i&&(i.conversation||e.host.models.Group.inject(i))}},e._onRemoveConversation=function(t,n){var r=n.counterPartyId;if("group"===n.counterPartyType){var i=e.host.models.Group.get(r);i&&i.conversation&&e.host.models.Group.inject(i)}},e._onChangeGroup=function(t,n){var r=n.id,i=n.memberIds,o=e._groupMemberIds[r];if(o)for(var a=0,s=o;a<s.length;a++){var u=s[a],c=(f=e._userGroups[u])?f.indexOf(n):-1;c>-1&&i&&!i.includes(u)&&f.splice(c,1)}if(i){e._groupMemberIds[r]=i;for(var l=0,d=i;l<d.length;l++){var f;u=d[l];(f=e._userGroups[u]||[]).includes(n)||f.push(n),e._userGroups[u]=f}}},e._onRemoveGroup=function(t,n){var r=n.id,i=n.memberIds;if(delete e._groupMemberIds[r],i)for(var o=0,a=i;o<a.length;o++){var s=a[o],u=e._userGroups[s],c=u?u.indexOf(n):-1;c>-1&&u.splice(c,1)}},e._onChangeMetadata=function(t,n){var r=n.entityId,i=e.host.models.Group.get(r);i&&e.host.models.Group.inject(i)},e._onChangeUser=function(t,n){var r=n.botRole,i=n.id,o=n.isRoleBot,a=e._userGroups[i],s=e._userState[i],u=s&&(s.botRole!==r||s.isRoleBot!==o);if(s&&!u||(e._userState[i]={botRole:r,isRoleBot:o}),a)for(var c=0,l=a;c<l.length;c++){var d=l[c],f=d.conversation,h=d.groupType,p=d.members;h!==nr.ROLE_P2P&&!u&&p&&p.includes(n)||(e.host.models.Group.inject(d),f&&e.host.models.Conversation.inject(f))}},e._onRemoveUser=function(t,n){var r=n.id,i=e._userGroups[r];if(i&&i.length>0)for(var o=0,a=i;o<a.length;o++){var s=a[o],u=s.members;u&&u.includes(n)&&e.host.models.Group.inject(s)}delete e._userGroups[r],delete e._userState[r]},e}return da(e,t),e.prototype.mounted=function(){this._fetched=!1,this._groupMemberIds={},this._userGroups={},this._userState={},this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onRemoveConversation),this.host.models.Group.on("afterInject",this._onChangeGroup),this.host.models.Group.on("afterEject",this._onRemoveGroup),this.host.models.Metadata.on("afterInject",this._onChangeMetadata),this.host.models.Metadata.on("afterEject",this._onChangeMetadata),this.host.models.User.on("afterInject",this._onChangeUser),this.host.models.User.on("afterEject",this._onRemoveUser)},e.prototype.dispose=function(){this._fetched=!1,this._groupMemberIds={},this._userGroups={},this._userState={},this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onRemoveConversation),this.host.models.Group.removeListener("afterInject",this._onChangeGroup),this.host.models.Group.removeListener("afterEject",this._onRemoveGroup),this.host.models.Metadata.removeListener("afterInject",this._onChangeMetadata),this.host.models.Metadata.removeListener("afterEject",this._onChangeMetadata),this.host.models.User.removeListener("afterInject",this._onChangeUser),this.host.models.User.removeListener("afterEject",this._onRemoveUser)},e.prototype.create=function(t){var e=t.avatarFile,n=t.description,r=t.isPatientGroup,i=void 0!==r&&r,o=t.isTeamActivation,a=void 0!==o&&o,s=t.memberIds,u=void 0===s?[]:s,c=t.metadata,l=t.name,d=t.organizationId,f=t.replayHistory,h=void 0!==f&&f,p=t.senderId,y=void 0===p?this.host.currentUserId:p;return pa(this,void 0,void 0,(function(){var t,r,o,s,f,p=this;return va(this,(function(g){switch(g.label){case 0:if(this.host.requireUser(),!d)throw new Un.ValidationError("organizationId","required");return[4,Promise.all(ya([y],u).map(this.host.roles.__resolveRoleId).filter(Boolean).map((function(t){return p._resolveModelIdWithTypes(t,["user","team"])})).map((function(t){var e=p._resolveEntity(t);return"team"===Object(v.get)(e,"$entityType")?e:p.host.users.findOrCreate(t,{organizationId:d})})))];case 1:return t=g.sent(),r=Xi.a.call(t),u=r.map((function(t){return p._resolveModelIdWithTypes(t,["user","team"])})),o=this._shouldExcludeSender(d,u,y),l||i||a||(l=this._getGroupName(r)),[4,this.host.api.groups.create({avatarFile:e,description:n,excludeCreator:o,memberIds:u,metadata:c,name:l,organizationId:d,replayHistory:h})];case 2:return s=g.sent(),this.config.condensedReplays&&s.entity?(f=this.host.conversations.__injectCounterParty({conversationId:s.conversation_id,entityAttrs:s.entity,entityType:"group",organizationId:s.organization_id}),this.host.conversations.__injectConversation(fa(fa({},s),{entity:f}))):f=this.host.models.Group.inject(s),c?(this.host.metadata.__injectMetadata(f.id,d,c),[3,5]):[3,3];case 3:return this.config.condensedReplays?[3,5]:[4,this.host.metadata.find(f.id,d)];case 4:g.sent(),g.label=5;case 5:return[2,f]}}))}))},e.prototype.createPatientGroup=function(t){var e=t.metadata,n=t.name,r=t.organizationId,i=t.recipientId,o=t.senderId;return this.create({isPatientGroup:!0,metadata:e,name:n,organizationId:r,memberIds:ya([o],i)})},e.prototype._shouldExcludeSender=function(t,e,n){var r,i=this.host.models.User.get(n);return!!(function(t){return t&&"user"===t.$entityType}(r=i)&&r.isRoleBot&&i.botRole&&i.botRole.members.length>0)&&!e.includes(i.botRole.memberIds[0])},e.prototype._getGroupName=function(t,e){return void 0===e&&(e=!1),t.map((function(t){var e=t.displayName,n=t.firstName;return t.isRoleBot||"role"===t.$entityType||"team"===t.$entityType?e:n||(Object(mt.isEmail)(e)||Object(Ii.isPhone)(e)?e:"")})).filter(Boolean).join(", ")+(e?" ####":"")||"Group"},e.prototype.update=function(t,e){var n=e.name,r=e.avatarFile,i=e.replayHistory,o=e.memberIds,a=e.metadata;return pa(this,void 0,void 0,(function(){var e,s,u;return va(this,(function(c){switch(c.label){case 0:return this.host.requireUser(),t=this._resolveModelId(t),e={},void 0!==n&&(e.name=n),void 0!==i&&(e.replayHistory=i),void 0!==o&&(e.memberIds=o.map(this.host.roles.__resolveRoleId)),[4,this.host.api.groups.update(t,{name:n,avatarFile:r,replayHistory:i,memberIds:o})];case 1:return void 0!==(s=c.sent()).avatarUrl&&(e.avatarUrl=s.avatarUrl),u=this.host.models.Group.inject(fa({id:t},e)),a?[4,this.host.metadata.update(t,a,u.organizationId)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[2,u]}}))}))},e.prototype.find=function(t,e){return void 0===e&&(e={}),pa(this,void 0,void 0,(function(){var n,r;return va(this,(function(i){switch(i.label){case 0:return e=Object(v.defaults)(e,{bypassCache:!1,ignoreNotFound:!1,includeMembers:!1}),this.host.requireUser(),n=null,e.bypassCache?[3,2]:!(n=this.host.models.Group.get(t))||n.$placeholder?[3,2]:[4,this.__ensureEntitiesLoaded(n.id,e)];case 1:return i.sent(),[2,n];case 2:return[4,this.__find(t)];case 3:if(r=i.sent(),n=this.host.models.Group.get(t),!r){if(!e.ignoreNotFound)throw new Un.NotFoundError(this.host.models.Group.name,t);return[2,n]}return n?[4,this.__ensureEntitiesLoaded(n.id,e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2,n]}}))}))},e.prototype.__find=function(t){return pa(this,void 0,void 0,(function(){var e,n,r,i,o;return va(this,(function(a){switch(a.label){case 0:return e=this.host.models.Group.get(t),[4,this.host.api.groups.find(t)];case 1:return n=a.sent(),this.config.condensedReplays&&n&&n.entity?(r=n.entity,e=this.host.conversations.__injectCounterParty({conversationId:n.conversation_id,entityAttrs:r,entityType:"group",organizationId:n.organization_id}),this.host.models.Group.removePlaceholder({entity:e,attrs:r}),[2,r]):(n&&(this.__removeForumMembers(n),i=n.metadata,e=this.host.models.Group.inject(n),o=e.organizationId,i&&o&&this.host.metadata.__injectMetadata(t,o,i)),this.host.models.Group.removePlaceholder({entity:e,attrs:n}),[2,n])}}))}))},e.prototype.__removeForumMembers=function(t){var e=t.members,n=this.__extractGroupTypeFromAttrs(t);n===nr.FORUM?e&&0===e.length&&delete t.members:n===nr.ROLE_ASSIGNMENT||e||(t.members=[])},e.prototype.__extractGroupTypeFromAttrs=function(t){var e=t.id||t.token,n=t.organizationId||t.organization_key,r=n?this.host.metadata.get(e,n):null,i=t.metadata||(r?r.data:null),o=nr.GROUP;if(i&&"role_assignment"===i.meta_type)o=nr.ROLE_ASSIGNMENT;else if(i&&"role"===i.feature_service)o=nr.ROLE_P2P;else if(i&&"escalation"===i.feature_service)o=nr.ESCALATION;else if(i&&"patient_care"===i.feature_service)o=nr.PATIENT_CARE;else if(i&&"patient_messaging"===i.feature_service)o=nr.PATIENT_MESSAGING;else if(i&&"teams"===i.feature_service){var a=i.meta_type;"activated_team"===a?o=nr.ACTIVATED_TEAM:"intra_team"===a&&(o=nr.INTRA_TEAM)}else(t.isPublic||t.is_public)&&(o=nr.FORUM);return o},e.prototype.__ensureEntitiesLoaded=function(t,e){return pa(this,void 0,void 0,(function(){var n,r;return va(this,(function(i){switch(i.label){case 0:return n=this.host.models.Group.get(t),r=[this.ensureMetadata(n)],e.includeMembers&&r.push(this.ensureMembers(n)),[4,Promise.all(r)];case 1:return i.sent(),[2]}}))}))},e.prototype.findAll=function(t){var e=(void 0===t?{}:t).includeMembers,n=void 0!==e&&e;return pa(this,void 0,void 0,(function(){var t,e,r,i,o,a,s,u,c,l,d,f,h,p,v,y;return va(this,(function(g){switch(g.label){case 0:return this._fetched?[2,this.getAll()]:0!==(t=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:t=g.sent(),g.label=2;case 2:return[4,this.host.search.query({types:["group"],organizationIds:t.map((function(t){return t.id})),query:{displayName:""},followContinuations:!0})];case 3:if(e=g.sent().results,r=e.map((function(t){return t.entity})),!n)return[3,5];for(i={},o=0,a=r;o<a.length;o++)for(s=a[o],v=s.organizationId,y=s.memberIds,u=0,c=y;u<c.length;u++)l=c[u],i[v]||(i[v]=[]),i[v].includes(l)||i[v].push(l);for(d=[],f=0,h=Object.entries(i);f<h.length;f++)p=h[f],v=p[0],y=p[1],d.push(this.host.users.ensureUsers(y,v));return[4,Promise.all(d)];case 4:g.sent(),g.label=5;case 5:return this._fetched=!0,[2,r]}}))}))},e.prototype.findAllWithSpecificMembers=function(t,e,n){return pa(this,void 0,void 0,(function(){var r;return va(this,(function(i){switch(i.label){case 0:return e=this._resolveModelId(e),t=ki(t).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),r=this.__findAllLocalWithSpecificMembers(t,e,n),!!n&&!!n.localOnly||0!==r.length?[3,2]:[4,this.findAll()];case 1:i.sent(),r=this.__findAllLocalWithSpecificMembers(t,e,n),i.label=2;case 2:return[2,r]}}))}))},e.prototype.ensureMembers=function(t,e){return void 0===e&&(e={}),pa(this,void 0,void 0,(function(){var n,r,i,o;return va(this,(function(a){switch(a.label){case 0:return n=t.groupType===nr.ROLE_ASSIGNMENT,t.memberIds?[3,5]:t.groupType!==nr.FORUM?[3,2]:[4,this.findAllMemberIds(t.id)];case 1:return(r=a.sent())&&this.host.models.Group.inject({id:t.id,members:r}),[3,5];case 2:return n?[3,5]:[3,3];case 3:return[4,this.__find(t.id)];case 4:a.sent(),a.label=5;case 5:return i=e.attrs?fa({},e.attrs):{},o=n&&!t.memberIds?[]:t.memberIds,i.organizationId=t.organizationId,[4,this.ensureMembersWithIds(t.id,o,fa(fa({},e),{attrs:i}))];case 6:return a.sent(),[2]}}))}))},e.prototype.ensureMembersWithIds=function(t,e,n){return void 0===n&&(n={}),pa(this,void 0,void 0,(function(){var r=this;return va(this,(function(i){switch(i.label){case 0:return this.host.requireUser(),0===(e=Object(v.without)(e,this.host.currentUserId)).length?[2]:(n=Object(v.defaults)(n,{onlyPlaceholder:!1}),[4,Promise.all(e.map((function(t){return r.__ensureMember(t,n)})).filter(Boolean))]);case 1:return i.sent().length>0&&this.host.models.Group.touch(t),[2]}}))}))},e.prototype.__ensureMember=function(t,e){if(void 0===e&&(e={}),!this.host.models.User.shouldEnsure(t,e.onlyPlaceholder))return null;var n=this.host.models.User.get(t);return n&&e.attrs&&this.host.models.User.injectPlaceholder(fa({id:n.id},e.attrs)),this.host.models.User.waitForEnsuredEntity(t,e)},e.prototype.ensureMetadata=function(t){return pa(this,void 0,void 0,(function(){var e,n,r;return va(this,(function(i){switch(i.label){case 0:return e=t.groupType,n=t.id,r=t.organizationId,(r?this.host.metadata.get(n,r):null)?[3,3]:e!==nr.FORUM&&e!==nr.ROLE_ASSIGNMENT?[3,1]:[3,3];case 1:return[4,this.__find(n)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.getAll=function(){return this.host.models.Group.getAll()},e.prototype.getById=function(t){return this.host.models.Group.get(t)},e.prototype.getMultiById=function(t){return this.host.models.Group.getMulti(t)},e.prototype.__findAllLocalWithSpecificMembers=function(t,e,n){var r=void 0===n?{}:n,i=r.exact,o=void 0===i||i,a=r.includeCurrentUser,s=void 0===a||a,u=r.includeForums,c=void 0===u||u,l=r.includeRoles,d=void 0===l||l,f=r.senderId,h=void 0===f?null:f,p=this.host,v=p.currentUser,y=p.currentUserId,g=v.roles.map((function(t){return t.botUserId}));h&&g.includes(h)?(t=t.slice()).push(h,y):s&&!t.includes(y)&&(t=t.slice()).push(y);for(var m=t.includes(y),_=t.length,b=[],w=0,I=this.host.models.Group.getAll();w<I.length;w++){var O=I[w];if(c||O.groupType!==nr.FORUM){var E=O.memberIds;if(O.organizationId===e&&E){for(var T=!0,S=0,A=t;S<A.length;S++){var C=A[S];if(!E.includes(C)){T=!1;break}}if(T){if(o){if(!h&&!m)continue;var R=_;if(d)for(var P=0,j=g;P<j.length;P++){var x=j[P];O.memberIds.includes(x)&&R++}if(R!==O.memberIds.length)continue}b.push(O)}}}}return b},e.prototype.destroy=function(t){return pa(this,void 0,void 0,(function(){return va(this,(function(e){switch(e.label){case 0:return this.host.requireUser(),t=this._resolveModelId(t),[4,this.host.api.groups.destroy(t)];case 1:if(!e.sent())throw new Un.NotFoundError(this.host.models.Group.name,t);return[2]}}))}))},e.prototype.findAllMemberIds=function(t){return pa(this,void 0,void 0,(function(){return va(this,(function(e){return this.host.requireUser(),t=this._resolveModelId(t),[2,this.host.api.groups.findAllMemberIds(t)]}))}))},e.prototype.addMembers=function(t,e){return pa(this,void 0,void 0,(function(){var n,r,i,o,a;return va(this,(function(s){switch(s.label){case 0:if(this.host.requireUser(),t=this._resolveModelId(t),e=ki(e).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),(n=this.getById(t))&&n.groupType===nr.ROLE_P2P)throw new Un.PermissionDeniedError("role p2p group",n.id,"add users");return n?"FORUM"!==n.groupType||n.memberIds?[3,2]:(r=n,[4,this.findAllMemberIds(t)]):[3,3];case 1:r.memberIds=s.sent(),s.label=2;case 2:e=Object(v.difference)(e,n.memberIds),s.label=3;case 3:return 0===e.length?[2]:[4,this.host.api.groups.addMembers(t,e)];case 4:return i=s.sent(),this.config.condensedReplays?(o=this.host.conversations.getById(i.conversation_id))?[3,6]:[4,this.host.api.conversations.find(i.conversation_id)]:[3,7];case 5:if(!(a=s.sent()))throw new Un.NotFoundError(this.host.models.Conversation.name,t);o=this.host.conversations.__injectConversation(a),s.label=6;case 6:i.unread_message_count&&(o.unreadCount=i.unread_message_count),i.unread_priority_message_count&&(o.unreadPriorityCount=i.unread_priority_message_count),this.host.models.Conversation.inject(o),s.label=7;case 7:return[2]}}))}))},e.prototype.removeMembers=function(t,e){return pa(this,void 0,void 0,(function(){var n,r,i,o,a,s;return va(this,(function(u){switch(u.label){case 0:if(this.host.requireUser(),t=this._resolveModelId(t),e=ki(e).map(this._resolveModelId).map(this.host.roles.__resolveRoleId),!(n=this.getById(t)))return[3,3];if(r=n.groupType,i=n.id,o=n.p2pSender,a=o&&"role"===o.$entityType&&o.botUserId,r===nr.ROLE_P2P&&a&&e.includes(a))throw new Un.PermissionDeniedError("role p2p group",i,"remove an on-duty user");return"FORUM"!==r||n.memberIds?[3,2]:(s=n,[4,this.findAllMemberIds(t)]);case 1:s.memberIds=u.sent(),u.label=2;case 2:e=Object(v.intersection)(e,n.memberIds),u.label=3;case 3:return 0===e.length?[2]:[4,this.host.api.groups.removeMembers(t,e)];case 4:return u.sent(),[2]}}))}))},e.prototype.addMember=function(t,e){return pa(this,void 0,void 0,(function(){return va(this,(function(n){return[2,this.addMembers(t,[e])]}))}))},e.prototype.removeMember=function(t,e){return pa(this,void 0,void 0,(function(){return va(this,(function(n){return[2,this.removeMembers(t,[e])]}))}))},e.prototype.leave=function(t){return pa(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d,f;return va(this,(function(h){switch(h.label){case 0:return t=this._resolveModelId(t),(e=this.getById(t))?(n=this.host,r=n.currentUser,i=n.currentUserId,o=e.groupType,a=e.p2pSender,s=e.memberIds,u=r.roles.map((function(t){return t.botUserId})),c=[i],o!==nr.FORUM?[3,2]:[4,this.findAllMemberIds(t)]):[2];case 1:s=h.sent(),h.label=2;case 2:if(o===nr.ROLE_P2P&&a)c=["user"===a.$entityType?a.id:a.botUserId];else if(s)for(l=0,d=s;l<d.length;l++)f=d[l],u.includes(f)&&c.push(f);return[4,this.removeMembers(t,c)];case 3:return h.sent(),[2]}}))}))},e.prototype.reactToBangEvent=function(t){var e=t.data,n=(e=wi(e)).bang_id||""+e.sort_number;return this.__handleBang({data:e,eventId:n,alwaysAddToTimeline:!1})},e.prototype.__handleBang=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=void 0!==r&&r,o=e.event;"added"===o?this.__addedToGroup({data:e,eventId:n,alwaysAddToTimeline:i}):"removed"===o?this.__removedFromGroup({data:e,eventId:n,alwaysAddToTimeline:i}):"teams_request_accepted"===o?this.__acceptedToTeam({data:e,eventId:n,alwaysAddToTimeline:i}):"teams_request_declined"===o||"teams_request_declined_full"===o?this.__deniedToTeam({data:e,eventId:n,alwaysAddToTimeline:i}):tr.fromServer(o)?this.__handleEscalationBang({data:e,eventId:n,alwaysAddToTimeline:i}):"ended_voip_call"!==o&&"missed_voip_call"!==o||this.__handleEndedCall({data:e,eventId:n,alwaysAddToTimeline:i})},e.prototype.__handleEndedCall=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline;return pa(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,l,d,f,h,p,y,g,m,_,b,w,I,O;return va(this,(function(E){switch(E.label){case 0:t=e.event,i=e.participants_duration,o=e.caller_entity,a=e.conversation_id,s=e.created_on,u=e.is_video,c=e.organization_id,l=e.sort_number,d=e.subject_entity,f=e.target_entity,h="ended_voip_call"===t?"CALL_CHANGE":"MISSED_CALL";try{p=JSON.parse(i)}catch(t){return[2]}return!p||Object(v.isEmpty)(p)||("CALL_CHANGE"===h&&Object(v.isEmpty)(p[this.host.currentUserId])||"MISSED_CALL"===h&&o&&o.token===this.host.currentUserId)?[2]:("CALL_CHANGE"===h?(y=p[this.host.currentUserId].duration,g=p[this.host.currentUserId].start_time):"MISSED_CALL"===h&&(y=Object.values(p)[0].duration,g=Object.values(p)[0].start_time),y&&Object(v.get)(o,"token")&&Object(v.get)(f,"token")?(m=[o,f].map((function(t){var e=t.display_name,n=t.token,r=t.type;return{displayName:e,id:n,organizationId:c,type:r}})),_=m[0],(b=m[1]).type.includes("group")?(w=this.host.models.Group.get(b.id),[3,3]):[3,1]):[2]);case 1:return b.type.includes("account")?[4,this.findAllWithSpecificMembers([b.id,_.id],c)]:[3,3];case 2:I=E.sent(),O=1===I.length&&2===I[0].memberCount,w=O&&I[0],E.label=3;case 3:return this.host.conversations.addCallChangeLog({action:h,alwaysAddToTimeline:r,callee:b,callEntity:d,caller:_,conversationId:a,createdAt:s,duration:y,group:w,id:n,isVideo:u,organizationId:c,sortNumber:+l,userStartTime:g}),[2]}}))}))},e.prototype.__addedToGroup=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=e.caller_entity,o=e.subject_entity,a=e.target_entity,s=e.organization_id;if(i&&i.token&&a&&a.token&&o&&o.token){o&&!o.display_name&&(r=!1);var u=this.host.models.Group.get(a.token);if(u){var c,l={displayName:i.display_name,id:i.token,organizationId:s,type:"user"},d={displayName:o.display_name,id:o.token,organizationId:s,type:"user"},f=this.host.models.User.get(l.id),h={action:c=f&&f.isRoleBot||i.metadata&&"role"===i.metadata.feature_service?"OPT_IN":d.id===l.id?"JOIN":"ADD",actionTime:e.action_time||e.created_on,actor:l,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[d],memberIds:[d.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(h),"OPT_IN"!==c&&u.memberIds&&u.memberIds.includes(d.id)||(this.host.models.Group.touch(u),this.emit("membership:change",h))}}},e.prototype.__removedFromGroup=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=e.caller_entity,o=e.subject_entity,a=e.target_entity,s=e.organization_id,u=!1;if(i&&i.token&&a&&a.token&&o&&o.token){var c=this.host.models.Group.get(a.token);if(c){if(e.reason&&("leave_org"===e.reason||"delete_account"===e.reason)&&(e.reason_subject_token||e.subject_entity.token)){r=!1,u=!0;var l=e.reason_subject_token||e.subject_entity.token;this.host.models.User.inject({id:l,removedFromOrg:!0})}var d,f={displayName:i.display_name,id:i.token,organizationId:s,type:"user"},h={displayName:o.display_name,id:o.token,organizationId:s,type:"user"},p=this.host.models.User.get(f.id),v={action:d=p&&p.isRoleBot||i.metadata&&"role"===i.metadata.feature_service?"OPT_OUT":h.id===f.id?"LEAVE":"REMOVE",actionTime:e.action_time||e.created_on,actor:f,alwaysAddToTimeline:r,createdAt:e.created_on,group:c,id:n,members:[h],memberIds:[h.id],removedFromGroup:u,sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(v),"OPT_OUT"!==d&&c.memberIds&&!c.memberIds.includes(h.id)||this.emit("membership:change",v)}}},e.prototype.__acceptedToTeam=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=e.caller_entity,o=e.subject_entity,a=e.target_entity,s=e.organization_id;if(i&&i.token&&a&&a.token&&o&&o.token){var u=this.host.models.Group.get(a.token);if(u){var c={displayName:e.action_user_name,id:e.action_user_id,organizationId:s,type:"user"},l={displayName:i.display_name,id:i.token,organizationId:s,type:"user"},d={action:"ADD",actionTime:e.action_time||e.created_on,actor:c,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[l],memberIds:[l.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(d)}}},e.prototype.__deniedToTeam=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=e.caller_entity,o=e.subject_entity,a=e.target_entity,s=e.organization_id;if(i&&i.token&&a&&a.token&&o&&o.token){var u=this.host.models.Group.get(a.token);if(u){var c={displayName:e.action_user_name,id:e.action_user_id,organizationId:s,type:"user"},l={displayName:i.display_name,id:i.token,organizationId:s,type:"user"},d={action:"DENY",actionTime:e.action_time||e.created_on,actor:c,alwaysAddToTimeline:r,createdAt:e.created_on,group:u,id:n,members:[l],memberIds:[l.id],sortNumber:+e.sort_number};this.host.conversations.addMembershipChangeLog(d)}}},e.prototype.__handleEscalationBang=function(t){var e=t.data,n=t.eventId,r=t.alwaysAddToTimeline,i=e.caller_entity,o=e.subject_entity,a=e.target_entity,s=e.organization_id;if(o.token&&a.token){var u=this.host.models.Group.get(a.token);u||(u=this.host.models.Group.injectPlaceholder({id:a.token,organizationId:s}));var c=tr.resolve(e.event),l=this.host.models.EscalationExecution.get(o.token);l||(l=u.escalationExecution),l||(l=c===tr.MEMBER_ADDED?null:this.host.models.EscalationExecution.inject({id:o.token,organizationId:s}));var d=e.action_user_name,f=e.action_time||e.created_on,h=null,p=null;c===tr.INITIATED?h={displayName:i.display_name,id:i.token,organizationId:s,type:"user"}:c===tr.MEMBER_ADDED?p=[{displayName:e.member_name,id:e.member_id,organizationId:s,type:"user"}]:c!==tr.NO_RESPONSE&&(h={displayName:d,id:null,organizationId:s,type:"user"});var v={action:c,actionTime:f,actor:h,alwaysAddToTimeline:r,createdAt:e.created_on,escalationExecution:l,group:u,members:p,id:n,sortNumber:+e.sort_number};this.host.conversations.addEscalationExecutionChangeLog(v)}},e.prototype._setMembership=function(t){var e=this.host.currentUser.roles.reduce((function(t,e){var n=e.botUserId;return n&&(t[n]=!0),t}),{});if(t.hasCurrentUserOrRole=!1,t.memberIds)for(var n=0,r=t.memberIds;n<r.length;n++){var i=r[n];if(i===this.host.currentUserId||e[i])return void(t.hasCurrentUserOrRole=!0)}},ha([Object(Tr.decorator)()],e.prototype,"find",null),ha([Object(Tr.decorator)()],e.prototype,"__find",null),ha([Object(Tr.decorator)()],e.prototype,"__ensureEntitiesLoaded",null),ha([Object(Tr.decorator)()],e.prototype,"findAll",null),ha([Object(Tr.decorator)()],e.prototype,"findAllWithSpecificMembers",null),ha([Object(Tr.decorator)()],e.prototype,"findAllMemberIds",null),e}(zi),ma=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(){return(_a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ba=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},wa=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ia=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Oa=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ea=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Ta=["escalationExecutionId","id","serverId"],Sa=["distributionList","group","user"],Aa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DELETE_ON_READ_MS=6e4,e.__retrieveSentMessage=function(t,n){var r=n.instance;return wa(e,void 0,void 0,(function(){var e,n,i,o,a,s,u,c,l,d,f;return Ia(this,(function(h){switch(h.label){case 0:if(!(e=t.message_id))throw new Error("Missing message_id from /message response");return t.sort_number?[3,5]:[4,this.find(e,{instance:r,replace:!0})];case 1:return(n=h.sent())?[3,4]:[4,new Promise((function(t){return setTimeout(t,1e3)}))];case 2:return h.sent(),[4,this.find(e,{instance:r,replace:!0})];case 3:n=h.sent(),h.label=4;case 4:return n&&(r=n),[3,8];case 5:return void 0===t.is_forwarded&&(t.is_forwarded=!1),i=t.status||"New",this.__setDefaultAttributes(t,{instance:r}),(r=this.host.models.Message.replaceExisting(t,{instance:r})).$synced=void 0,o=r.counterPartyType,a=r.createdAt,s=r.group,u=r.recipientId,l=(c=s||{}).groupType,d=c.p2pRecipient,f=void 0,l===nr.ROLE_P2P&&d?f="role"===d.$entityType?d.botUserId:d.id:"user"===o&&(f=u),f?(this.__injectMessageStatus(r,{accountId:f,createdAt:a,status:i}),[3,8]):[3,6];case 6:return l!==nr.GROUP?[3,8]:[4,this.findRecipientStatus(r,{queue:!1})];case 7:h.sent(),h.label=8;case 8:return[2,r]}}))}))},e.__generateAttachmentDescriptor=function(t){var e="local:"+b.a.v4();t instanceof File||t instanceof Blob||xi.raise("attachment","invalid","attachment (File or Blob) is invalid"),t.name||(t.name="attachment");var n={id:e,localFile:t,name:t.name,size:t.size,contentType:t.type,isLoading:!0,isLocal:!0};if(t.preview)n.localPath=t.preview,n.localPathPromise=function(){return Promise.resolve(n.localPath)},n.isLoading=!1;else{var r=mi(t);n.localPathPromise=r,r.then((function(t){n.localPath=t,n.isLoading=!1}))}return n},e.__retryApiSend=function(t){return wa(e,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d,f,h,p;return Ia(this,(function(v){switch(v.label){case 0:e=t._originalBody,n=t.attachments,r=t.conversationId,i=t.counterPartyId,o=t.deleteOnRead,a=t.id,s=t.metadata,u=t.priority,c=t.recipientOrganizationId,l=t.senderOrganizationId,d=t.shouldEscalate,f=t.ttl,v.label=1;case 1:return v.trys.push([1,4,,5]),[4,this.host.api.messages.send({attachment:y.a.get(n,"0.localFile"),body:e,conversationId:r,counterPartyId:i,deleteOnRead:o,escalate:d,localId:a,metadata:s,priority:rr.toServer(u),recipientOrganizationId:c,senderOrganizationId:l,ttl:f})];case 2:return h=v.sent(),this.host.config.condensedReplays&&h.last_message&&(h=h.last_message),[4,this.__retrieveSentMessage(h,{instance:t})];case 3:return t=v.sent(),this.host.emit("message:sent",t),[3,5];case 4:return p=v.sent(),this.logger.warn("error while sending message",p),t.senderStatus=sr.FAILED,this.host.models.Message.inject(t),[3,5];case 5:return[2,t]}}))}))},e.__retryApiForward=function(t){return wa(e,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d;return Ia(this,(function(f){switch(f.label){case 0:e=t.conversationId,n=t.counterPartyId,r=t.id,i=t.metadata,o=t.originalMessageId,a=t.priority,s=t.recipientOrganizationId,u=t.senderOrganizationId,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,this.host.api.messages.forward(o,n,{conversationId:e,localId:r,metadata:i,priority:rr.toServer(a),recipientOrganizationId:s,senderOrganizationId:u})];case 2:return c=f.sent(),l=c.message_id,[4,this.find(l,{instance:t,replace:!0})];case 3:return t=f.sent(),this.host.emit("message:sent",t),[3,5];case 4:return d=f.sent(),this.logger.error("error while forwarding message",d),t.senderStatus=sr.FAILED,this.host.models.Message.inject(t),[3,5];case 5:return[2,t]}}))}))},e._resolveMessage=function(t){return e.host.models.Message.is(t)?t:"string"==typeof t?e.host.models.Message.get(t):null},e._looksLikeDistributionListMessage=function(t){var e=t.body;if(!e)return!1;var n=e.match(/^\[(.+?)\]: /);return!!n&&n[1]},e.__setDefaultAttributes=function(t,e){var n=e.instance,r={is_forwarded:n.isForwarded,attachments:n.attachments,conversationId:n.conversationId,counterParty:n.counterParty,senderStatus:sr.SENT,shouldEscalate:!1};return n.isForwarded&&(r.originalForwardedMessageCreatedAt=n.originalForwardedMessageCreatedAt,r.originalMessageId=n.originalMessageId,n.originalSender&&(r.originalSender=n.originalSender)),y.a.defaults(t,r),t},e.__flushSetMessageStatusesQueue=function(){if(e._queuedSetMessageStatuses.deliveredIds.length+e._queuedSetMessageStatuses.readIds.length>0){var t=e._queuedSetMessageStatuses;e._queuedSetMessageStatuses={deliveredIds:[],readIds:[]},e.__setMessagesStatus(t)}},e._onTick=function(){e._deleteExpiredMessages(),e._deleteExpiredMutes(),e.config.condensedReplays&&e._clearOptimisticMarkAsReadState()},e._deleteExpiredMessages=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var n=0,r=e.host.organizations.getAll();n<r.length;n++)for(var i=r[n].__expirableMessages,o=!1;!o&&i.length>0;){var a=i[0];a.expiresAt<t?e.host.models.Message.eject(a):o=!0}},e._deleteExpiredMutes=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var n=0,r=e.host.organizations.getAll();n<r.length;n++)for(var i=r[n].__expirableMutes,o=!1;!o&&i.length>0;){var a=i[0];if(a.expiresAt<t){e.host.models.Mute.eject(a);var s=e.host.models.Conversation.get(a.conversationId);if(!s)continue;s.muted=null,e.host.models.Conversation.inject(s)}else o=!0}},e._onChangeMessageStatus=function(t,n){var r=n.messageId,i=e.host.models.Message.get(r);i&&e.host.models.Message.inject(i)},e._fetchAttachmentTokens=function(t){return void 0===t&&(t=20),e._fetchingAttachmentTokens||(e._fetchingAttachmentTokens=new Promise((function(n){return wa(e,void 0,void 0,(function(){var e,r,i;return Ia(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.host.api.messages.createAttachmentTokens(t)];case 1:return e=o.sent().attachment_tokens,(i=this._attachmentTokens).push.apply(i,e),[3,3];case 2:return r=o.sent(),this.logger.error("error while requesting attachment tokens",r),[3,3];case 3:return this._fetchingAttachmentTokens=null,n(),[2]}}))}))}))),e._fetchingAttachmentTokens},e._useAttachmentToken=function(t,n){return void 0===t&&(t=20),void 0===n&&(n=0),wa(e,void 0,void 0,(function(){var e;return Ia(this,(function(r){switch(r.label){case 0:if(n>3)throw new Error("Attachment tokens can not be fetched at this time.");return this._attachmentTokens.length<t?[4,this._fetchAttachmentTokens(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return(e=this._attachmentTokens.shift())?[3,4]:[4,this._useAttachmentToken(t,++n)];case 3:return[2,r.sent()];case 4:return[2,e]}}))}))},e.getAttachmentUrlWithToken=function(t,n,r){return void 0===r&&(r=!1),wa(e,void 0,void 0,(function(){var e,i,o;return Ia(this,(function(a){switch(a.label){case 0:return e=this._resolveMessage(t),[4,this.findAttachment(e.serverId,n)];case 1:return i=a.sent(),[4,this._useAttachmentToken()];case 2:return o=a.sent(),[2,""+(r?this.host.config.baseUrl:"")+this.__getAttachmentPath(e.serverId,i.id)+"?token="+o]}}))}))},e.openAttachmentWithToken=function(t,n){return wa(e,void 0,void 0,(function(){var e,r,i;return Ia(this,(function(o){switch(o.label){case 0:return e=n.toString(),r=this._resolveMessage(t),[4,this.findAttachment(t,e)];case 1:if(!o.sent())throw new Un.NotFoundError("MessageAttachment",r.serverId+":"+e);return[4,this.getAttachmentUrlWithToken(r.serverId,e)];case 2:return i=o.sent(),window.open(this.host.config.baseUrl+i,"_blank"),[2]}}))}))},e}return ma(e,t),e.prototype.mounted=function(){this._throttled_flushFindRecipientStatusesQueue=this.config.flushFindRecipientStatusInterval?Wo()(this.__flushFindRecipientStatusesQueue,this.config.flushFindRecipientStatusInterval,{leading:!1}):this.__flushFindRecipientStatusesQueue,this._throttled_flushSetMessageStatusesQueue=this.config.flushSetMessageStatusInterval?Wo()(this.__flushSetMessageStatusesQueue,this.config.flushSetMessageStatusInterval,{leading:!1}):this.__flushSetMessageStatusesQueue,this._attachmentTokens=[],this._pendingFindRecipientStatuses={},this._queuedFindRecipientStatuses=[],this._queuedSetMessageStatuses={deliveredIds:[],readIds:[]},this.host.on("tick",this._onTick),this.host.models.MessageStatusPerRecipient.on("afterInject",this._onChangeMessageStatus),this.host.models.MessageStatusPerRecipient.on("afterEject",this._onChangeMessageStatus)},e.prototype.dispose=function(){this._attachmentTokens=null,this._pendingFindRecipientStatuses=null,this._queuedFindRecipientStatuses=null,this._queuedSetMessageStatuses=null,this._downloadAttachmentBlobAndUrl&&Tr.decorator.clear(this._downloadAttachmentBlobAndUrl),this.downloadAttachmentUrl&&Tr.decorator.clear(this.downloadAttachmentUrl),this.downloadAttachment&&Tr.decorator.clear(this.downloadAttachment),this._throttled_flushFindRecipientStatusesQueue.cancel&&this._throttled_flushFindRecipientStatusesQueue.cancel(),this._throttled_flushSetMessageStatusesQueue.cancel&&this._throttled_flushSetMessageStatusesQueue.cancel(),this.host.removeListener("tick",this._onTick),this.host.models.MessageStatusPerRecipient.removeListener("afterInject",this._onChangeMessageStatus),this.host.models.MessageStatusPerRecipient.removeListener("afterEject",this._onChangeMessageStatus)},e.prototype.send=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Ia(this,(function(d){switch(d.label){case 0:if(this.config.condensedReplays)throw new Error("the send() method has been deprecated in favor of sendToUser(), sendToGroup(), etc.");return Array.isArray(t)?[4,this.__resolveSender(n)]:[3,2];case 1:return d.sent(),[2,this.sendToGroupOfUsers(t,e,n)];case 2:return[4,this.__resolveCounterPartyEntityAndOrganizationId(t,n.senderOrganizationId||n.organizationId)];case 3:return r=d.sent(),i=r.counterParty,o=r.organizationId,xi.notEmpty("counterPartyId",i,"counterPartyId not found"),o?n=_a(_a({},y.a.omit(n,"organizationId","senderOrganizationId","recipientOrganizationId")),{organizationId:o}):o=n.organizationId,[4,this.__resolveSender(n)];case 4:return a=d.sent(),s=function(t){return t&&"user"===t.$entityType},(u=function(t){return s(t)&&t.isRoleBot})(i)||s(i)&&u(a)?[2,this.sendToRole(t,e,n)]:(c=i.groupType,l=i.memberIds,c!==nr.FORUM||l&&l.includes(this.host.currentUserId)?[3,6]:[4,this.host.forums.join(i)]);case 5:d.sent(),d.label=6;case 6:return[2,this.__sendToCounterParty(i,e,n)]}}))}))},e.prototype.__resolveSender=function(t){return wa(this,void 0,void 0,(function(){var e,n,r;return Ia(this,(function(i){switch(i.label){case 0:return e=this.__resolveSenderId(t),n=t.senderOrganizationId||t.organizationId,e===this.host.currentUserId?[2,this.host.currentUser]:(n||xi.raise("senderOrganizationId","missing","When senderId is provided, senderOrganizationId or organizationId must also be provided"),[4,this.host.users.find(e,{organizationId:n})]);case 1:return(r=i.sent())||xi.raise("senderId","invalid","The provided senderId was not found"),r.isRoleBot||xi.raise("senderId","invalid","senderId must be either the current user or a role"),[4,this.host.roles.find(e,n)];case 2:return i.sent(),[2,r]}}))}))},e.prototype.__resolveSenderId=function(t){void 0===t&&(t={});var e=t.senderId;return e?(e=this._resolveModelId(e),e=this.host.roles.__resolveRoleId(e)):e=this.host.currentUserId,t.senderId=e,e},e.prototype.__resolveCounterPartyEntityAndOrganizationId=function(t,e){return void 0===e&&(e=null),wa(this,void 0,void 0,(function(){var n,r,i;return Ia(this,(function(o){switch(o.label){case 0:return"string"==typeof t&&(t=this.host.roles.__resolveRoleId(t)),n=this._resolveEntity(t,Ea(Sa,["conversation"])),r=e,n?[3,2]:this.host.conversations.looksLikeConversationHandle(t)?[4,this.host.conversations.find(t)]:[3,2];case 1:(i=o.sent())&&(n=i.counterParty,r=i.organizationId),o.label=2;case 2:return n?[3,4]:[4,this.__resolveRemoteCounterPartyEntity(t,r)];case 3:n=o.sent(),o.label=4;case 4:return n&&(n.organizationId&&"user"!==n.$entityType&&(r=n.organizationId),"conversation"===n.$entityType&&(n=n.counterParty)),[2,{counterParty:n,organizationId:r}]}}))}))},e.prototype.__resolveRemoteCounterPartyEntity=function(t,e){return wa(this,void 0,void 0,(function(){var n,r,i,o,a,s,u=this;return Ia(this,(function(c){switch(c.label){case 0:n=null,t=this.host.roles.__resolveRoleId(t),r=y.a.compact([function(){return wa(u,void 0,void 0,(function(){return Ia(this,(function(n){return[2,this.host.users.findOrCreate(t,{organizationId:e})]}))}))},function(){return wa(u,void 0,void 0,(function(){return Ia(this,(function(e){return[2,this.host.groups.find(t)]}))}))},function(){return wa(u,void 0,void 0,(function(){return Ia(this,(function(e){return[2,this.host.distributionLists.find(t)]}))}))}]),i=0,o=r,c.label=1;case 1:if(!(i<o.length))return[3,6];a=o[i],c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a()];case 3:return(n=c.sent())?[3,6]:[3,5];case 4:if((s=c.sent()).code!==Un.NotFoundError.CODE)throw s;return[3,5];case 5:return i++,[3,1];case 6:return[2,n]}}))}))},e.prototype.__sendToCounterParty=function(t,e,n){var r=n.organizationId,i=n.senderOrganizationId,o=void 0===i?r:i,a=n.recipientOrganizationId,s=void 0===a?o:a,u=Oa(n,["organizationId","senderOrganizationId","recipientOrganizationId"]);return wa(this,void 0,void 0,(function(){var n,i,a,c,l,d,f,h,p,v,g;return Ia(this,(function(m){switch(m.label){case 0:n=t.$entityType,i=t.serverId,this.host.requireUser(),xi.oneOf("counterPartyType",n,["user","group","distributionList"]),xi.notEmpty("counterPartyId",i),o=this.__ensureOrganization(o),s=s||o,u=this.__normalizeSendOptions(u,{counterParty:t,senderOrganizationId:o}),a=this.__createNewMessage(t,e,_a({organizationId:r,senderOrganizationId:o,recipientOrganizationId:s},u)),this.host.events.deferEventQueue(),this.host.models.Message.inject(a),this.host.emit("message:sending",a),c=u.attachmentFiles,l=u.deleteOnRead,d=u.escalate,f=u.metadata,h=u.priority,p=u.ttl,m.label=1;case 1:return m.trys.push([1,4,,5]),[4,this.host.api.messages.send({attachment:y.a.head(c),body:e,counterPartyId:i,deleteOnRead:l,escalate:d,localId:a?a.id:b.a.v4(),metadata:f,priority:rr.toServer(h),recipientOrganizationId:s,senderOrganizationId:o,ttl:p})];case 2:return v=m.sent(),[4,this.__retrieveSentMessage(v,{instance:a})];case 3:return a=m.sent(),this.host.emit("message:sent",a),[3,5];case 4:return g=m.sent(),this.logger.error("error while sending message",g),a.senderStatus=sr.FAILED,this.host.models.Message.inject(a),[3,5];case 5:return this.host.events.resumeEventQueue(),[2,a]}}))}))},e.prototype.__createNewMessage=function(t,e,n){var r,i=n.conversationId,o=n.isForwarded,a=void 0!==o&&o,s=n.organizationId,u=n.senderOrganizationId,c=void 0===u?s:u,l=n.recipientOrganizationId,d=void 0===l?c:l,f=Oa(n,["conversationId","isForwarded","organizationId","senderOrganizationId","recipientOrganizationId"]),h=f.attachmentFiles,p=f.deleteOnRead,v=f.escalate,y=f.metadata,g=f.originalMetadata,m=f.priority,_=f.senderId,w=f.ttl,I=t.$entityType,O=t.serverId;this.host.requireUser(),xi.oneOf("counterPartyType",I,["user","group","distributionList"]),xi.notEmpty("counterPartyId",O),i&&(r=this.host.conversations.getById(i)),r||(r=this.host.conversations.ensureConversation(I,O,c));var E=r.isLive,T=this.__getNextSortNumber(c,{conversation:r}),S=_&&_!==this.host.currentUserId?_:void 0,A=e;"distributionList"===I&&(e="["+t.displayName+"]: "+e);var C=this.host.models.Message.createInstance({$synced:!1,body:e,conversationId:r.id,counterPartyId:O,counterPartyType:I,createdAt:new Date,currentSenderRoleId:S,deleteOnRead:p,id:b.a.v4(),inTimeline:E,isForwarded:a,isOutgoing:!0,messageType:cr.USER_SENT,metadata:y,originalMetadata:g,priority:m,recipientOrganizationId:d,senderId:this.host.currentUserId,senderOrganizationId:c,senderStatus:sr.SENDING,shouldEscalate:v,sortNumber:T,ttl:w});return C._originalBody=A,h&&(C.attachments=h.map(this.__generateAttachmentDescriptor)),"group"===I?C.groupId=O:"user"===I?C.recipientId=O:"distributionList"===I&&(C.distributionListId=O),this.config.condensedReplays||(C.markedRecipientStatus=ar.READ),C},e.prototype.__normalizeSendOptions=function(t,e){var n=t.attachmentFile,r=t.attachmentFiles,i=t.deleteOnRead,o=t.escalate,a=t.metadata,s=t.originalMetadata,u=t.priority,c=t.senderId,l=t.ttl,d=e.counterParty,f=e.senderOrganizationId;a=this.__normalizeMetadata({metadata:a,organizationId:f,senderId:c}),r=ki(r||n),!y.a.isEmpty(r)&&r.length>1&&xi.raise("attachmentFiles","invalid","currently only a single attachment is supported");var h=this.host.models.Organization.get(f);void 0===l&&(l=h?h.messageTimeToLive:-1),!i&&h&&(i=h.deleteOnRead);var p=d.groupType,v=d.p2pRecipient;p===nr.ROLE_P2P&&v&&v.escalationPolicy&&(v.escalationPolicy.alwaysEscalate&&(o=!0,u=rr.NORMAL));return{attachmentFiles:r,deleteOnRead:i,escalate:o,metadata:a,originalMetadata:s,priority:u,senderId:c,ttl:l}},e.prototype.__ensureOrganization=function(t){return t||(this.host.config.defaultOrganizationId?this.host.config.defaultOrganizationId:void xi.raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)"))},e.prototype.__normalizeMetadata=function(t){var e=t.metadata,n=(t.organizationId,t.senderId);if(e||(e=[]),e=ki(e),n!==this.host.currentUserId){var r=this.host.roles.getById(n),i=r.roleTag;e.push({namespace:"tigertext:message:role:sender",payload:{token:n,display_name:r.displayName,tag_id:i?i.tagId:"",tag_color:i?i.color.replace("#","0x"):"",tag_name:i?i.name:""}})}return e.length>0?e.map((function(t){return _a({mimetype:"application/json"},t)})):void 0},e.prototype.__getNextSortNumber=function(t,e){var n=(void 0===e?{}:e).conversation,r=this.host.models.Organization.get(t);r&&!n&&(n=r.conversations[0]);var i=r&&r.highestSortNumber||0,o=n&&n.lastBangMessageSortNumber||0;return Math.max(i,o)+1},e.prototype.previewMessage=function(t,e){void 0===e&&(e={});for(var n=this._resolveMessage(t),r={},i=0,o=Object.entries(n);i<o.length;i++){var a=o[i],s=a[0],u=a[1];bi(n,s)&&!Ta.includes(s)&&(r[s]=u)}r=_a(_a(_a({},r),{id:b.a.v4(),conversationId:null}),e),this.__setForwardedMessageProperties({origMessage:n,organizationId:n.__organizationId,message:r});for(var c=this.host.models.Message.inject(r),l=0,d=n.statusesPerRecipient;l<d.length;l++){var f=d[l],h=f.userId||f.distributionListId,p=c.id+":"+h;this.host.models.MessageStatusPerRecipient.inject(_a(_a({},f),{id:p,messageId:c.id}))}return c},e.prototype.endPreviewMessage=function(t){var e=this._resolveMessage(t);if(e){for(var n=0,r=e.statusesPerRecipient;n<r.length;n++){var i=r[n];this.host.models.MessageStatusPerRecipient.eject(i)}this.host.models.Message.eject(e)}},e.prototype.sendToUser=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h,p;return Ia(this,(function(v){switch(v.label){case 0:if(!this.host.config.condensedReplays)return[2,this.send(t,e,n)];if(r=n.organizationId,i=n.senderId,o=void 0===i?this.host.currentUserId:i,a=n.groupName,s=n.groupMetadata,!r)throw new Error("organizationId is required");return t=this._resolveModelIdWithTypes(t,"user"),(u=this._resolveEntity(t,"user"))&&u.profileByOrganizationId&&u.profileByOrganizationId[r]?[3,2]:[4,this.host.users.findOrCreate(t,{organizationId:r})];case 1:u=v.sent(),v.label=2;case 2:return[4,this.__resolveRoleBotId(o,r)];case 3:return c=v.sent(),l=c.isRole,d=c.roleBotId,l?[4,this.__prepareRoleP2PGroup(r,t,d,a,{groupMetadata:s})]:[3,5];case 4:return f=v.sent(),[2,this.sendToGroup(f,e,_a(_a({},n),{organizationId:r,senderId:o}))];case 5:if(h=u&&u.profileByOrganizationId[r],!(p=h&&h.conversationId))throw new Error("conversationId not found for p2p message");return this.host.conversations.getById(p)||this.host.models.Conversation.inject({counterPartyId:u.id,counterPartyType:u.$entityType,id:p,organizationId:r}),[2,this.sendToConversation(p,e,n)]}}))}))},e.prototype.sendToGroup=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r;return Ia(this,(function(i){switch(i.label){case 0:return this.config.condensedReplays?(t=this._resolveModelId(t),(r=this._resolveEntity(t,"group"))?[3,2]:[4,this.host.groups.find(t)]):[2,this.send(t,e,n)];case 1:r=i.sent(),i.label=2;case 2:if(!r||!r.conversationId)throw new Error("group conversationId not found");return this.host.conversations.getById(r.conversationId)||this.host.models.Conversation.inject({counterPartyId:r.id,counterPartyType:r.$entityType,id:r.conversationId,organizationId:r.organizationId}),[2,this.sendToConversation(r.conversationId,e,n)]}}))}))},e.prototype.sendToRole=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d;return Ia(this,(function(f){switch(f.label){case 0:if(r=n.organizationId,i=n.senderId,o=void 0===i?this.host.currentUserId:i,a=n.groupMetadata,s=n.groupName,!this.host.config.condensedReplays)return[3,2];if(!r)throw new Error("organizationId is required");return[4,this.__resolveRoleBotId(t,r)];case 1:if(u=f.sent(),c=u.isRole,l=u.roleBotId,!c)throw new Error("recipient must be a role");t=l,f.label=2;case 2:return[4,this.__prepareRoleP2PGroup(r,t,o,s,{groupMetadata:a})];case 3:return d=f.sent(),[2,this.sendToGroup(d,e,_a(_a({},n),{organizationId:r,senderId:o}))]}}))}))},e.prototype.sendToPatient=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Ia(this,(function(d){switch(d.label){case 0:if(n.groupMetadata,r=n.organizationId,i=n.senderId,o=void 0===i?this.host.currentUserId:i,a=Oa(n,["groupMetadata","organizationId","senderId"]),n=_a(_a({},a),{organizationId:r,senderId:o}),this.host.config.condensedReplays&&!r)throw new Error("organizationId is required");if(s=t&&1===t.length?t[0]:t,!(c=this._resolveEntity(s,"user")))throw new Error("user could not be resolved");return u=c.isPatientContact?this.host.patients._createPatientContactGroupMetadata(c):this.host.patients._createPatientGroupMetadata(c),[4,this.host.groups.createPatientGroup({organizationId:r,recipientId:t,senderId:o,metadata:u})];case 1:return l=d.sent(),this.host.metadata.__injectMetadata(l.id,r,u),[2,this.sendToGroup(l,e,_a(_a({},n),{organizationId:r,senderId:o}))]}}))}))},e.prototype.__resolveRoleBotId=function(t,e){return wa(this,void 0,void 0,(function(){var n,r,i;return Ia(this,(function(o){switch(o.label){case 0:t=this.host.roles.__resolveRoleId(t);try{r=this._resolveModelIdWithTypes(t,"role"),n=!!this._resolveEntity(r,"role")}catch(t){n=!1}return n?[3,3]:(i=this._resolveEntity(t,"user"))&&i.profileByOrganizationId&&i.profileByOrganizationId[e]?[3,2]:[4,this.host.users.find(t,{organizationId:e})];case 1:i=o.sent(),o.label=2;case 2:i&&i.isRoleBot&&(n=!0),o.label=3;case 3:return[2,{isRole:n,roleBotId:t}]}}))}))},e.prototype.sendToConversation=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_,w,I,O,E;return Ia(this,(function(T){switch(T.label){case 0:if(!this.host.config.condensedReplays)return[2,this.send(t,e,n)];if(t=this._resolveModelIdWithTypes(t,"conversation"),!(r=this.host.conversations.getById(t)))throw new Un.NotFoundError(this.host.models.Conversation.name,t);return[4,this.__resolveSender(n)];case 1:return i=T.sent(),o=r.counterPartyId,a=r.counterPartyType,s=r.organizationId,u=this._resolveEntity(o,a),this.host.requireUser(),c=u.groupType,l=u.memberIds,c!==nr.FORUM||l&&l.includes(this.host.currentUserId)?[3,3]:[4,this.host.forums.join(u)];case 2:T.sent(),T.label=3;case 3:f=d=s,n=this.__normalizeSendOptions(n,{counterParty:u,senderOrganizationId:d,senderId:i.id}),h=this.__createNewMessage(u,e,_a({conversationId:t,organizationId:s,senderOrganizationId:d,recipientOrganizationId:f},n)),this.host.events.deferEventQueue(),this.host.models.Message.inject(h),this.host.emit("message:sending",h),p=n.attachmentFiles,v=n.deleteOnRead,g=n.escalate,m=n.metadata,_=n.priority,w=n.ttl,T.label=4;case 4:return T.trys.push([4,7,,8]),[4,this.host.api.messages.send({attachment:y.a.head(p),body:e,conversationId:r.id,deleteOnRead:v,escalate:g,localId:h?h.id:b.a.v4(),metadata:m,priority:rr.toServer(_),senderOrganizationId:d,ttl:w})];case 5:return I=T.sent(),O=void 0,O=I.last_message?I.last_message:I,[4,this.__retrieveSentMessage(O,{instance:h})];case 6:return(h=T.sent()).unreadMessageCount&&(r.unreadCount=h.unreadMessageCount),h.unreadPriorityMessageCount&&(r.unreadPriorityCount=h.unreadPriorityMessageCount),r.lastMessage=h,r.highestSortNumber=h.sortNumber?h.sortNumber:this.__getNextSortNumber(d,{conversation:r}),r.isLive=!0,r.timeline.push(h),this.host.models.Conversation.inject(r),h.inTimeline=!0,this.host.models.Message.inject(h),this.host.emit("message:sent",h),[3,8];case 7:return E=T.sent(),this.logger.error("error while sending message",E),h.senderStatus=sr.FAILED,this.host.models.Message.inject(h),[3,8];case 8:return this.host.events.resumeEventQueue(),[2,h]}}))}))},e.prototype.sendToDistributionList=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i;return Ia(this,(function(o){switch(o.label){case 0:return this.config.condensedReplays?(t=this._resolveModelIdWithTypes(t,"distributionList"),(r=this._resolveEntity(t,"distributionList"))?[3,2]:[4,this.host.distributionLists.find(t)]):[2,this.send(t,e,n)];case 1:r=o.sent(),o.label=2;case 2:if(!r||!r.conversationId)throw new Error("distributionList conversationId not found");return(i=this.host.conversations.getById(r.conversationId))||(i=this.host.models.Conversation.inject({counterPartyId:r.id,counterPartyType:r.$entityType,id:r.conversationId,organizationId:r.organizationId})),[2,this.sendToConversation(i.id,e,n)]}}))}))},e.prototype.sendToGroupOfUsers=function(t,e,n){void 0===n&&(n={});var r=n.groupMetadata,i=n.groupName,o=n.isTeamActivation,a=n.organizationId,s=n.senderId,u=Oa(n,["groupMetadata","groupName","isTeamActivation","organizationId","senderId"]);return wa(this,void 0,void 0,(function(){var n,c;return Ia(this,(function(l){switch(l.label){case 0:return[4,this.__prepareGroupForUsers(a,t,s,i,o,{groupMetadata:r})];case 1:return n=l.sent(),this.config.condensedReplays?(c=n.conversationId,[4,this.host.conversations.find(c)]):[3,3];case 2:return l.sent(),[2,this.sendToConversation(c,e,_a(_a({},u),{organizationId:a,senderId:s}))];case 3:return[2,this.sendToGroup(n,e,_a(_a({},u),{organizationId:a,senderId:s}))]}}))}))},e.prototype.__prepareGroupForUsers=function(t,e,n,r,i,o){var a=(void 0===o?{}:o).groupMetadata;return 0===e.length&&xi.raise("memberIds","required"),this.host.groups.create({isTeamActivation:i,memberIds:e,metadata:a,name:r,organizationId:t,senderId:n})},e.prototype.__prepareRoleP2PGroup=function(t,e,n,r,i){var o=(void 0===i?{}:i).groupMetadata;return wa(this,void 0,void 0,(function(){var i;return Ia(this,(function(a){switch(a.label){case 0:return(i=this.host.conversations.findLocalRoleP2PConversation(e,n))?[2,i.counterParty]:[4,this.host.roles.createP2PGroup({metadata:o,name:r,organizationId:t,recipientId:e,senderId:n})];case 1:return[2,a.sent()]}}))}))},e.prototype.recall=function(t){return wa(this,void 0,void 0,(function(){var e,n;return Ia(this,(function(r){switch(r.label){case 0:return this.host.requireUser(),e=ki(t).filter(Boolean),n=e.map(this.__recallSingle.bind(this)),[4,Promise.all(n)];case 1:return r.sent(),[2]}}))}))},e.prototype.__recallSingle=function(t){return wa(this,void 0,void 0,(function(){var e;return Ia(this,(function(n){switch(n.label){case 0:if(!(e=this._resolveMessage(t)))return[3,4];if(e.senderId!==this.host.currentUserId)throw new Un.PermissionDeniedError(e,e.serverId,"recall");return!1!==e.$synced&&e.serverId?[3,1]:(this.host.models.Message.eject(e),[3,3]);case 1:return[4,this.host.api.messages.destroy(e.serverId)];case 2:n.sent(),this.host.models.Message.eject(e),n.label=3;case 3:return[3,6];case 4:return[4,this.host.api.messages.destroy(t)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},e.prototype.retrySend=function(t){return wa(this,void 0,void 0,(function(){var e,n,r;return Ia(this,(function(i){switch(i.label){case 0:if(this.host.requireUser(),!(e=this._resolveMessage(t)))throw new Un.NotFoundError(this.host.models.Message.name,t);return n=e.isForwarded,e.senderStatus!==sr.FAILED&&xi.raise("message","invalid","Message to retry must be in a FAILED senderStatus and sent from current user"),this.host.events.deferEventQueue(),e.senderStatus=sr.RETRYING,this.host.models.Message.inject(e),this.host.emit("message:sending",e),n?[4,this.__retryApiForward(e)]:[3,2];case 1:return e=i.sent(),[3,4];case 2:return[4,this.__retryApiSend(e)];case 3:e=i.sent(),i.label=4;case 4:return this.config.condensedReplays&&(r=this.host.conversations.getById(e.conversationId),e.unreadMessageCount&&(r.unreadCount=e.unreadMessageCount),e.unreadPriorityMessageCount&&(r.unreadPriorityCount=e.unreadPriorityMessageCount),r.lastMessage=e,r.highestSortNumber=e.sortNumber,this.host.models.Conversation.inject(r)),this.host.events.resumeEventQueue(),[2,e]}}))}))},e.prototype.resend=function(t,e){var n=void 0===e?{}:e,r=n.priority,i=n.retrieveMessage,o=void 0!==i&&i,a=n.senderId;return wa(this,void 0,void 0,(function(){var e,n,i,s,u,c,l,d,f,h,p,v,y,g,m,_,b;return Ia(this,(function(w){switch(w.label){case 0:return e=this._resolveMessage(t),void 0===r&&(r=e.priority),void 0===a&&(a=e.senderId),n=e.attachments,i=e.body,s=e.conversationId,u=e.counterParty,c=e.counterPartyId,l=e.deleteOnRead,d=e.isForwarded,f=e.metadata,h=e.originalMessageId,p=e.recipientOrganizationId,v=e.ttl,d?this.config.condensedReplays?[2,this.forwardToConversation(h,s,{organizationId:p,priority:r})]:[2,this.forward(h,c,{organizationId:p,priority:r,retrieveMessage:o,senderId:a})]:[3,1];case 1:if(y=[],f=f.filter((function(t){return"tigertext:message:role:sender"!==t.namespace})),!n)return[3,5];g=0,m=n,w.label=2;case 2:return g<m.length?(_=m[g],[4,this._downloadAttachmentBlobAndUrl(t,_.id)]):[3,5];case 3:(b=w.sent().blob).name=_.name,y.push(b),w.label=4;case 4:return g++,[3,2];case 5:return this.config.condensedReplays?[2,this.sendToConversation(s,i,{attachmentFiles:y,deleteOnRead:l,organizationId:p,priority:r,metadata:f,senderId:a,ttl:v})]:[2,this.__sendToCounterParty(u,i,{attachmentFiles:y,deleteOnRead:l,organizationId:p,priority:r,senderId:a,metadata:f,ttl:v})]}}))}))},e.prototype.forwardToConversation=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_,b,w,I,O,E;return Ia(this,(function(T){switch(T.label){case 0:if(!this.config.condensedReplays)return[2,this.forward(t,e,n)];if(r=n.metadata,i=void 0===r?[]:r,o=n.priority,a=n.senderId,s=void 0===a?this.host.currentUserId:a,!(u=this.host.conversations.getById(e)))throw new Error("conversation not found");if(this.host.requireUser(),!(c=this._resolveMessage(t)))throw new Un.NotFoundError(this.host.models.Message.name,t);if(l=c.attachments,d=c.body,!(f=c.serverId))throw new Error("original message was not sent");s=this.__resolveSenderId({senderId:s}),void 0===o&&(o=c.priority),h=u.counterPartyId,p=u.counterPartyType,v=u.organizationId,g=this._resolveEntity(h,p),m=v,_=y.a.get(c,"originalMetadata"),b={metadata:i,priority:o,senderId:s,originalMetadata:_},b=this.__normalizeSendOptions(b,{counterParty:g,senderOrganizationId:m}),i=b.metadata,(w=this.__createNewMessage(g,d,_a({conversationId:e,organizationId:v,isForwarded:!0},b))).attachments=l,this.__setForwardedMessageProperties({origMessage:c,organizationId:v,message:w}),this.host.events.deferEventQueue(),this.host.models.Message.inject(w),this.host.emit("message:sending",w),T.label=1;case 1:return T.trys.push([1,4,,5]),[4,this.host.api.messages.forward(f,null,{conversationId:e,localId:w.id,metadata:i,priority:rr.toServer(o)})];case 2:return I=T.sent(),[4,this.__retrieveSentMessage(I.message,{instance:w})];case 3:return(O=T.sent()).unreadMessageCount&&(u.unreadCount=O.unreadMessageCount),O.unreadPriorityMessageCount&&(u.unreadPriorityCount=O.unreadPriorityMessageCount),this.host.models.Conversation.inject(u),this.host.emit("message:sent",O),[3,5];case 4:return E=T.sent(),this.logger.error("error while forwarding message",E),w.senderStatus=sr.FAILED,this.host.models.Message.inject(w),[3,5];case 5:return this.host.events.resumeEventQueue(),[2,w]}}))}))},e.prototype.forwardToUser=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h,p,v,y;return Ia(this,(function(g){switch(g.label){case 0:if(!this.config.condensedReplays)return[2,this.forward.apply(this,Ea([t,e],n))];if(r=n[0],o=(i=void 0===r?{}:r).organizationId,a=i.senderId,s=void 0===a?this.host.currentUserId:a,u=i.groupName,c=i.groupMetadata,!o)throw new Error("organizationId is required");return e=this._resolveModelIdWithTypes(e,"user"),(l=this._resolveEntity(e,"user"))&&l.profileByOrganizationId&&l.profileByOrganizationId[o]?[3,2]:[4,this.host.users.find(e,{organizationId:o})];case 1:l=g.sent(),g.label=2;case 2:return[4,this.__resolveRoleBotId(s,o)];case 3:return d=g.sent(),f=d.isRole,h=d.roleBotId,f?[4,this.__prepareRoleP2PGroup(o,e,h,u,{groupMetadata:c})]:[3,5];case 4:return p=g.sent(),[2,this.forwardToGroup(t,p,_a(_a({},i),{organizationId:o,senderId:s}))];case 5:if(v=l&&l.profileByOrganizationId[o],!(y=v&&v.conversationId))throw new Error("conversationId not found for p2p message");return this.host.conversations.getById(y)||this.host.models.Conversation.inject({counterPartyId:l.id,counterPartyType:l.$entityType,id:y,organizationId:o}),[2,this.forwardToConversation.apply(this,Ea([t,y],n))]}}))}))},e.prototype.forwardToGroup=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return wa(this,void 0,void 0,(function(){var r;return Ia(this,(function(i){switch(i.label){case 0:return this.config.condensedReplays?(e=this._resolveModelId(e),(r=this._resolveEntity(e,"group"))?[3,2]:[4,this.host.groups.find(e)]):[2,this.forward.apply(this,Ea([t,e],n))];case 1:r=i.sent(),i.label=2;case 2:if(!r||!r.conversationId)throw new Error("group "+e+" not found");return this.host.conversations.getById(r.conversationId)||this.host.models.Conversation.inject({counterPartyId:r.id,counterPartyType:r.$entityType,id:r.conversationId,organizationId:r.organizationId}),[2,this.forwardToConversation.apply(this,Ea([t,r.conversationId],n))]}}))}))},e.prototype.forwardToDistributionList=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r;return Ia(this,(function(i){switch(i.label){case 0:return this.config.condensedReplays?(e=this._resolveModelId(e),(r=this._resolveEntity(e,"distributionList"))?[3,2]:[4,this.host.distributionLists.find(e)]):[2,this.forward(t,e,n)];case 1:r=i.sent(),i.label=2;case 2:if(!r||!r.conversationId)throw new Error("distributionList "+e+" not found");return this.host.conversations.getById(r.conversationId)||this.host.models.Conversation.inject({counterPartyId:r.id,counterPartyType:r.$entityType,id:r.conversationId,organizationId:r.organizationId}),[2,this.forwardToConversation(t,r.conversationId,n)]}}))}))},e.prototype.forwardToGroupOfUsers=function(t,e,n){void 0===n&&(n={});var r=n.groupMetadata,i=n.groupName,o=n.organizationId,a=n.senderId,s=Oa(n,["groupMetadata","groupName","organizationId","senderId"]);return wa(this,void 0,void 0,(function(){var n,u;return Ia(this,(function(c){switch(c.label){case 0:return[4,this.__prepareGroupForUsers(o,e,a,i,!1,{groupMetadata:r})];case 1:return n=c.sent(),this.config.condensedReplays?(u=n.conversationId,[4,this.host.conversations.find(u)]):[3,3];case 2:return c.sent(),[2,this.forwardToConversation(t,u,_a(_a({},s),{organizationId:o,senderId:a}))];case 3:return[2,this.forwardToGroup(t,n,_a(_a({},s),{organizationId:o,senderId:a}))]}}))}))},e.prototype.forwardToRole=function(t,e,n){return void 0===n&&(n={}),wa(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d;return Ia(this,(function(f){switch(f.label){case 0:if(r=n.organizationId,i=n.senderId,o=void 0===i?this.host.currentUserId:i,a=n.groupMetadata,s=n.groupName,!this.host.config.condensedReplays)return[3,2];if(!r)throw new Error("organizationId is required");return[4,this.__resolveRoleBotId(e,r)];case 1:if(u=f.sent(),c=u.isRole,l=u.roleBotId,!c)throw new Error("recipient must be a role");e=l,f.label=2;case 2:return[4,this.__prepareRoleP2PGroup(r,e,o,s,{groupMetadata:a})];case 3:return d=f.sent(),[2,this.forwardToGroup(t,d.id,_a(_a({},n),{organizationId:r,senderId:o}))]}}))}))},e.prototype.forward=function(t,e,n){var r=void 0===n?{}:n,i=r.organizationId,o=r.senderOrganizationId,a=void 0===o?i:o,s=r.recipientOrganizationId,u=void 0===s?a:s,c=r.groupMetadata,l=r.groupName,d=r.metadata,f=void 0===d?[]:d,h=(r.preferExistingGroup,r.priority),p=r.retrieveMessage,v=void 0!==p&&p,g=r.senderId,m=void 0===g?this.host.currentUserId:g;return wa(this,void 0,void 0,(function(){var n,r,o,s,d,p,g,_,b,w,I,O,E,T,S,A,C,R,P=this;return Ia(this,(function(j){switch(j.label){case 0:if(this.config.condensedReplays)throw new Error("the forward() method has been deprecated in favor of forwardToUser(), forwardToGroup(), etc.");if(this.host.requireUser(),!(n=this._resolveMessage(t)))throw new Un.NotFoundError(this.host.models.Message.name,t);if(r=n.attachments,o=n.body,!(s=n.serverId))throw new Error("original message was not sent");return m=this.__resolveSenderId({senderId:m}),Array.isArray(e)?(d=e.map((function(t){return P._resolveModelIdWithTypes(t,["user","role"])})),[4,this.__prepareGroupForUsers(i,d,m,l,!1,{groupMetadata:c})]):[3,2];case 1:E=j.sent(),e=E.id,j.label=2;case 2:return void 0===h&&(h=n.priority),[4,this.__resolveCounterPartyEntityAndOrganizationId(e,a)];case 3:return p=j.sent(),g=p.counterParty,(_=p.organizationId)&&(a=u=_),u=u||a,g&&(e=g.serverId),[4,this.__resolveSender({organizationId:i,senderId:m,senderOrganizationId:a})];case 4:return b=j.sent(),w=function(t){return t&&"user"===t.$entityType},I=function(t){return w(t)&&t.isRoleBot},O=y.a.get(n,"originalMetadata"),I(g)||w(g)&&I(b)?[4,this.__prepareRoleP2PGroup(i,g.id,m,l,{groupMetadata:c})]:[3,6];case 5:E=j.sent(),g=E,e=E.id,j.label=6;case 6:xi.notEmpty("entityId",e,"entityId not found"),T={metadata:f,priority:h,senderId:m,originalMetadata:O},T=this.__normalizeSendOptions(T,{counterParty:g,senderOrganizationId:a}),f=T.metadata,(S=this.__createNewMessage(g,o,_a({organizationId:i,senderOrganizationId:a,recipientOrganizationId:u,isForwarded:!0},T))).attachments=r,this.__setForwardedMessageProperties({origMessage:n,organizationId:i,message:S}),this.host.events.deferEventQueue(),this.host.models.Message.inject(S),this.host.emit("message:sending",S),j.label=7;case 7:return j.trys.push([7,12,,13]),[4,this.host.api.messages.forward(s,e,{localId:S.id,metadata:f,priority:rr.toServer(h),recipientOrganizationId:u,senderOrganizationId:a})];case 8:return A=j.sent(),C=A.message_id,v?[4,this.find(C,{instance:S,replace:!0})]:[3,10];case 9:return S=j.sent(),[3,11];case 10:S.senderStatus=sr.SENT,S.serverId=C,S.$synced=void 0,this.host.models.Message.inject(S),j.label=11;case 11:return this.host.emit("message:sent",S),[3,13];case 12:return R=j.sent(),this.logger.error("error while forwarding message",R),S.senderStatus=sr.FAILED,this.host.models.Message.inject(S),[3,13];case 13:return this.host.events.resumeEventQueue(),[2,S]}}))}))},e.prototype.__setForwardedMessageProperties=function(t){var e=t.origMessage,n=t.organizationId,r=t.message,i=e.createdAt,o=e.currentSenderRole,a=e.originalForwardedMessageCreatedAt,s=e.originalMessageId,u=e.originalSender,c=e.originalSenderRole,l=e.sender,d=e.senderRole,f=e.serverId,h=e.subType;return r.originalForwardedMessageCreatedAt||(r.originalForwardedMessageCreatedAt=a||i),r.originalMessageId||(r.originalMessageId=s||f),r.originalSender?r.originalSender=u:l&&(r.originalSender={displayName:l.displayName,id:l.id,organizationId:n}),r.originalSenderRole||(h===ur.ROLE_AWAY_NOTIFICATION&&o?r.originalSenderRole={$entityType:"role",botUserId:o.botUserId,displayName:o.displayName,id:o.id,organizationId:n}:c?r.originalSenderRole=_a({},c):d&&(r.originalSenderRole=_a({},d))),r.subType||(r.subType=h),r},e.prototype.reactToMessageStatusEvent=function(t){var e=t.data;if(this.config.condensedReplays)this.reactToMessageStatusEventCR({data:e});else{var n=(e=wi(e)).client_id,r=e.is_recalled,i=this.host.models.Message.get(n);i&&(r?this.host.models.Message.eject(i):(this.__injectMessageStatus(i,e),or[i.markedRecipientStatus]<or[ar.DELIVERED]&&this.markAsReceived(i)))}},e.prototype.reactToMessageStatusEventCR=function(t){var e=t.data,n=(e=wi(e)).client_id,r=e.is_recalled,i=e.is_unread,o=this.host.models.Message.get(n);if(o){e.conversation_id||(e.conversation_id=o.conversationId);var a=this.host.conversations.getById(e.conversation_id);a&&(r?this.host.models.Message.eject(o):(o.shouldEnsureRecipientStatus=!0,void 0!==i&&(o.isUnread=i),this.host.models.Message.inject(o),a._markingAsReadSortNumber&&o.sortNumber>=a._markingAsReadSortNumber&&this.host.conversations.__clearOptimisticStatus([a])),this.host.conversations.__injectConversation(e))}},e.prototype.__injectMessageStatus=function(t,e){if(t){var n=e.account_id||e.accountId,r={createdAt:e.timestamp||e.createdAt,id:t.id+":"+n,messageId:t.id,status:ar.resolve(e.status)};return"distributionList"===t.counterPartyType?r.distributionListId=n:(r.userId=n,this.host.models.User.ensureEntity(n,{onlyPlaceholder:!0})),this.host.models.MessageStatusPerRecipient.inject(r)}},e.prototype._findCR=function(t,e){var n=void 0===e?{}:e,r=n.includeCounterParty,i=void 0===r||r,o=n.includeStatuses,a=void 0===o||o,s=n.instance,u=n.replace,c=void 0!==u&&u;return wa(this,void 0,void 0,(function(){var e,n,r,o,u,l;return Ia(this,(function(d){switch(d.label){case 0:return this.host.requireUser(),[4,this.host.api.messages.find(t)];case 1:return(e=d.sent())&&(n=e.message)?(n.conversationId=e.conversation_id,s&&c&&this.__setDefaultAttributes(n,{instance:s}),i?(r=n.recipient_token,o=n.sender_organization,[4,this.__lookupCounterParty(r,{organizationId:o})]):[3,3]):[2,null];case 2:if(!(u=d.sent()))return[2,null];n.counterParty=u,n.conversationHandle||(n.conversationHandle=this.host.conversations.getConversationKey(u.$entityType,u.serverId,o)),d.label=3;case 3:return(l=c?this.host.models.Message.replaceExisting(n,{instance:s}):this.host.models.Message.inject(n)).$synced=void 0,a?[4,this.findRecipientStatus(l,{queue:!1})]:[3,5];case 4:d.sent(),d.label=5;case 5:return[2,l]}}))}))},e.prototype.find=function(t,e){var n=void 0===e?{}:e,r=n.includeCounterParty,i=void 0===r||r,o=n.includeStatuses,a=void 0===o||o,s=n.instance,u=n.replace,c=void 0!==u&&u;return wa(this,void 0,void 0,(function(){var e,n,r,o,u;return Ia(this,(function(l){switch(l.label){case 0:return this.config.condensedReplays?[4,this._findCR(t,{includeCounterParty:i,includeStatuses:a,instance:s,replace:c})]:[3,2];case 1:return[2,l.sent()];case 2:return this.host.requireUser(),[4,this.host.api.messages.find(t)];case 3:return(e=l.sent())?(s&&c&&this.__setDefaultAttributes(e,{instance:s}),i?(n=e.recipient_token,r=e.sender_organization,[4,this.__lookupCounterParty(n,{organizationId:r})]):[3,5]):[2,null];case 4:if(!(o=l.sent()))return[2,null];e.counterParty=o,this.config.condensedReplays||e.conversationId||(e.conversationId=this.host.conversations.getConversationKey(o.$entityType,o.serverId,r)),l.label=5;case 5:return(u=c?this.host.models.Message.replaceExisting(e,{instance:s}):this.host.models.Message.inject(e)).$synced=void 0,a?[4,this.findRecipientStatus(u,{queue:!1})]:[3,7];case 6:l.sent(),l.label=7;case 7:return[2,u]}}))}))},e.prototype.findAttachment=function(t,e){return wa(this,void 0,void 0,(function(){var n,r,i;return Ia(this,(function(o){switch(o.label){case 0:return n=this._resolveMessage(t),r=!1,n?[3,2]:(r=!0,[4,this.find(t,{includeStatuses:!1,includeCounterParty:!1})]);case 1:n=o.sent(),o.label=2;case 2:return n?!(i=this.__getMessageAttachment(n,e))||i.isLocal||r||"name"in i?[3,4]:[4,this.find(t,{includeStatuses:!1,includeCounterParty:!1})]:[2,null];case 3:n=o.sent(),(i=this.__getMessageAttachment(n,e)).name||(i.name=null),o.label=4;case 4:return[2,i]}}))}))},e.prototype.getById=function(t){return this.host.models.Message.get(t)},e.prototype.getMultiById=function(t){return this.host.models.Message.getMulti(t)},e.prototype.__lookupCounterParty=function(t,e){var n=(void 0===e?{}:e).organizationId;return wa(this,void 0,void 0,(function(){var e,r,i,o,a,s,u,c,l,d=this;return Ia(this,(function(f){switch(f.label){case 0:for(e=[{model:this.host.models.User,finder:function(){return d.host.users.find(t,{organizationId:n})}},{model:this.host.models.Group,finder:function(){return d.host.groups.find(t)}},{model:this.host.models.DistributionList,finder:function(){return d.host.distributionLists.find(t)}}],r=0,i=e;r<i.length;r++)if(o=i[r].model,c=o.get(t))return[2,c];a=0,s=e,f.label=1;case 1:if(!(a<s.length))return[3,6];u=s[a].finder,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,u()];case 3:return(c=f.sent())?[2,c]:[3,5];case 4:if((l=f.sent()).code!==Un.NotFoundError.CODE)throw l;return[3,5];case 5:return a++,[3,1];case 6:return[2,null]}}))}))},e.prototype._isMessageOutgoing=function(t){var e=t.counterParty,n=t.counterPartyType,r=t.currentSenderRole,i=t.senderId;if(!i)return!1;for(var o=this.host,a=o.currentUser,s=o.currentUserId,u=e||{},c=u.groupType,l=u.members,d=u.p2pRecipient,f=u.p2pSender,h="group"===n&&c===nr.ROLE_P2P,p=a.roles,v=[s],y=[],g=0,m=0,_=p;m<_.length;m++){var b=_[m].botUserId;v.push(b)}if(l){for(var w=0,I=l;w<I.length;w++){var O=I[w],E=O.botRole;O.isRoleBot&&E&&!y.includes(E)&&y.push(E)}if(h){if(f){E=f.botRole;f.isRoleBot&&E&&!y.includes(E)&&y.push(E)}if(d){E=d.botRole;d.isRoleBot&&E&&!y.includes(E)&&y.push(E)}}for(var T=0,S=y;T<S.length;T++){var A=S[T];p.includes(A)&&g++}}return h?!(d===a&&i===s&&!r)&&(!(!f||i!==f.id&&i!==f.botUserId)||p.includes(r)&&(1===g||r===f)):"distributionList"===n||(p.includes(r)||v.includes(i))},e.prototype._setRecipientStatus=function(t){for(var e,n,r=t.__organizationId,i=t._markingAsStatus,o=t.conversation,a=t.counterParty,s=t.counterPartyType,u=t.createdAt,c=t.deleteOnRead,l=t.expiresAt,d=t.isOutgoing,f=t.messageType,h=t.senderId,p=t.statusesPerRecipient,v=t.ttl,y=this.host,g=y.currentUser,m=y.currentUserId,_=a||{},b=_.groupType,w=_.p2pRecipient,I=[],O=[],E=[m],T=0,S=g.roles;T<S.length;T++){var A=S[T];A.organizationId===r&&E.push(A.botUserId)}for(var C=h&&E.includes(h),R=[],P=ar.READ,j=ar.NEW,x=b===nr.ROLE_P2P&&w===g,M=0,k=p;M<k.length;M++){var N=(L=k[M]).userId;(q=E.includes(N))&&R.push(N)}for(var z=R.length>1,D=0,U=p;D<U.length;D++){var L,F=(L=U[D]).distributionListId,B=(N=L.userId,L.status),q=E.includes(N);x||!(!d&&q)&&!(d&&(F||!q))||z&&N===m||O.push(B),(x||C&&E.includes(h))&&(or[j]<or[B]&&(j=B),or[j]<or[ar.READ]&&(j=ar.READ)),!q||x||C&&h===N||I.push(B)}if(O.length>0){n=O[0];for(var V=1;V<O.length;V++){var G=O[V];0===R.length?or[n]<or[G]&&(n=G):or[n]>or[G]&&(n=G)}}else n=j;if(e=P,I.length>0)for(var H=0,W=I;H<W.length;H++){G=W[H];or[e]>or[G]&&(e=G)}if(this.config.condensedReplays&&o&&o._markingAsRead&&o._markingAsReadSortNumber>=t.sortNumber&&(n=ar.READ),i){var Y=!1;or[n]<or[i]&&(n=i,Y=!0),!this.config.condensedReplays&&d&&or[e]<or[i]&&(e=i,Y=!0),Y||this.config.condensedReplays||(t._markingAsStatus=void 0)}if(c&&"user"===s&&n===ar.READ){var K=Date.now()+6e4;(!l||K<l)&&(l=K)}else l||void 0===v||(l=u.getTime()+60*v*1e3);t.expiresAt=l,this.config.condensedReplays?t.isUnread=!t.isEphemeral&&t.isUnread:(t.isUnread=!t.isEphemeral&&f===cr.USER_SENT&&!d&&-1===this.compareRecipientStatus(n,ar.READ),t.markedRecipientStatus=e),t.ttl=v},e.prototype.compareRecipientStatus=function(t,e){return ar.isValid(t)&&(t=or[t]),ar.isValid(e)&&(e=or[e]),t>e?1:t===e?0:t<e?-1:void 0},e.prototype.__getMessageAttachment=function(t,e){var n=this._resolveMessage(t);return n?(e=e.toString(),n.attachments?y.a.find(n.attachments,{id:e}):null):null},e.prototype.__getAttachmentPath=function(t,e){return"/"+this.host.api.messages.getVersion().version+"/message/"+t+"/attachment/"+e},e.prototype.downloadAttachmentUrl=function(t,e){return this._downloadAttachmentBlobAndUrl(t,e).then((function(t){return t.url}))},e.prototype.downloadAttachmentBlobAndUrl=function(t,e){return this._downloadAttachmentBlobAndUrl(t,e)},e.prototype.downloadAttachmentUrlWithToken=function(t,e){return this._downloadAttachmentBlobAndUrlWithToken(t,e).then((function(t){return t.url}))},e.prototype.downloadAttachment=function(t,e,n){var r=(void 0===n?{}:n).fileName;return wa(this,void 0,void 0,(function(){var n,i,o,a;return Ia(this,(function(s){switch(s.label){case 0:return n=this._resolveMessage(t),i=void 0,(o=this.__getMessageAttachment(t,e))&&o.isLocal?(i=o.localFile,[3,3]):[3,1];case 1:return[4,this._downloadAttachmentBlobAndUrl(n.serverId,e)];case 2:i=s.sent().blob,s.label=3;case 3:return(r=r||o.name)||(r="Attachment",n.sender.$placeholder||(r+=" from "+n.sender.displayName),r+=" at "+to()(n.createdAt).format("YYYY-MM-DD h-mma"),(a=Hr({mime:o.contentType}))&&(r+=a.ext)),[4,gi({attachmentContentType:o.contentType,blob:i,fileName:r})];case 4:return s.sent(),[3,6];case 5:Un.TargetNotSupportedError.raise(),s.label=6;case 6:return[2]}}))}))},e.prototype._downloadAttachmentBlobAndUrl=function(t,e){return wa(this,void 0,void 0,(function(){var n,r,i;return Ia(this,(function(o){switch(o.label){case 0:return e=e.toString(),n=this._resolveMessage(t),[4,this.findAttachment(t,e)];case 1:if(!(r=o.sent()))throw new Un.NotFoundError("MessageAttachment",n.serverId+":"+e);return r.isLocal&&r.localFile instanceof Blob?[4,r.localPathPromise]:[3,3];case 2:return o.sent(),[2,{blob:r.localFile,url:URL.createObjectURL(r.localFile)}];case 3:return i=this.__getAttachmentPath(n.serverId,e),[2,this.httpClient.downloadFileBlobAndUrl(i)];case 4:return[3,6];case 5:Un.TargetNotSupportedError.raise(),o.label=6;case 6:return[2]}}))}))},e.prototype._downloadAttachmentBlobAndUrlWithToken=function(t,e){return wa(this,void 0,void 0,(function(){var n,r,i,o;return Ia(this,(function(a){switch(a.label){case 0:return e=e.toString(),n=this._resolveMessage(t),[4,this.findAttachment(t,e)];case 1:if(!(r=a.sent()))throw new Un.NotFoundError("MessageAttachment",n.serverId+":"+e);return r.isLocal&&r.localFile instanceof Blob?[4,r.localPathPromise]:[3,3];case 2:return i=a.sent(),[2,{blob:r.localFile,url:i}];case 3:return[4,this.getAttachmentUrlWithToken(n.serverId,e)];case 4:return o=a.sent(),[2,this.httpClient.downloadFileBlobAndUrl(o)];case 5:return[3,7];case 6:Un.TargetNotSupportedError.raise(),a.label=7;case 7:return[2]}}))}))},e.prototype.downloadAttachmentToFile=function(t,e,n){return wa(this,void 0,void 0,(function(){var t,r,i;return Ia(this,(function(o){switch(o.label){case 0:return[3,2];case 1:if(!(r=o.sent()))throw new Un.NotFoundError("MessageAttachment",t.serverId+":"+e);if(/(\/|\\)$/.test(n)){if(!r.name)throw new Error("missing file name in downloadAttachmentToFile(..., dest)");n+=r.name}return i=this.__getAttachmentPath(t.serverId,e),[2,this.httpClient.downloadToFile(i,n)];case 2:Un.TargetNotSupportedError.raise(),o.label=3;case 3:return[2]}}))}))},e.prototype.getMessageCount=function(){return this.host.models.Message.getAll().length},e.prototype.getTotalUnreadCount=function(){var t=this.host.models.Product.getAll()[0];return t?t.unreadCount:0},e.prototype.getTotalUnreadPriorityCount=function(){var t=this.host.models.Product.getAll()[0];return t?t.unreadPriorityCount:0},e.prototype.markAsRead=function(t,e){var n=void 0===e?{}:e,r=n.localOnly,i=void 0!==r&&r,o=n.queue,a=void 0===o?this.host.currentlyServingOfflineMessages:o;return wa(this,void 0,void 0,(function(){var e,n,r,o,s;return Ia(this,(function(u){if(t=Mi.call(t).map(this._resolveModelId),0===(e=Xi.a.call(t)).length)return[2];if(this.config.condensedReplays||!i)return a?[2,this.__queueSetMessageStatuses({readIds:e})]:[2,this.__setMessagesStatus({readIds:e})];for(n=this.host.models.Message.getMulti(e),r=0,o=n;r<o.length;r++)(s=o[r])&&(s._markingAsStatus=ar.READ,this.host.models.Message.inject(s));return[2]}))}))},e.prototype.markAsDelivered=function(t,e){return void 0===e&&(e={}),wa(this,void 0,void 0,(function(){var n;return Ia(this,(function(r){return e=y.a.defaults(e,{queue:this.host.currentlyServingOfflineMessages}),t=Mi.call(t).map(this._resolveModelId),0===(n=Xi.a.call(t)).length?[2]:e.queue?[2,this.__queueSetMessageStatuses({deliveredIds:n})]:[2,this.__setMessagesStatus({deliveredIds:n})]}))}))},e.prototype.markAsReceived=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return wa(this,void 0,void 0,(function(){return Ia(this,(function(e){return[2,this.markAsDelivered.apply(this,t)]}))}))},e.prototype.__queueSetMessageStatuses=function(t){var e=t.deliveredIds,n=t.readIds;return wa(this,void 0,void 0,(function(){var t;return Ia(this,(function(r){return t=this._queuedSetMessageStatuses,e&&(t.deliveredIds=y.a.union(t.deliveredIds,e)),n&&(t.readIds=y.a.union(t.readIds,n)),t.deliveredIds.length+t.readIds.length>=this.config.flushSetMessageStatusMaxCount?(this.logger.log("reached "+this.config.flushSetMessageStatusMaxCount+" -- flushing"),[2,this.__flushSetMessageStatusesQueue()]):(this._throttled_flushSetMessageStatusesQueue(),[2])}))}))},e.prototype.__setMessagesStatus=function(t){var e=t.deliveredIds,n=void 0===e?[]:e,r=t.readIds,i=void 0===r?[]:r;return wa(this,void 0,void 0,(function(){var t,e,r,o,a,s,u,c,l,d,f,h,p,v,g,m,_,b,w,I,O,E,T;return Ia(this,(function(S){switch(S.label){case 0:if(this.host.requireUser(),n=n.map(this._resolveModelId),i=i.map(this._resolveModelId),t=Xi.a.call(n),e=Xi.a.call(i),this.config.condensedReplays?t=y.a.difference(t,e):(r=this.host.models.Message.getMulti(t).filter((function(t){return t&&or[t.markedRecipientStatus]>=or[ar.DELIVERED]})),o=r.map((function(t){return t.id})),a=this.host.models.Message.getMulti(e).filter((function(t){return t&&or[t.markedRecipientStatus]>=or[ar.READ]})),s=a.map((function(t){return t.id})),e=y.a.difference(e,s),t=y.a.difference(t,e,o)),u={},t.length>0&&(u.delivered=t),e.length>0)for(u.read=e,I=this.host.models.Message.getMulti(e),c=0,l=I;c<l.length;c++)(T=l[c])&&(T._markingAsStatus=ar.READ,this.host.models.Message.inject(T));if(0===Object.keys(u).length)return[2,!1];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,this.host.api.messages.updateRecipientStatusMulti(u)];case 2:if(d=S.sent(),this.config.condensedReplays)for(f=0,h=Object.entries(d);f<h.length;f++)p=h[f],v=p[0],g=p[1],m=g.unread_message_count,_=g.unread_priority_message_count,(b=this.host.models.Conversation.get(v))&&(b.unreadMessageCount=m,b.unreadPriorityMessageCount=_,this.host.models.Conversation.inject(b));return[3,4];case 3:for(w=S.sent(),I=this.host.models.Message.getMulti(e),O=0,E=I;O<E.length;O++)(T=E[O])&&T._markingAsStatus&&(T._markingAsStatus=void 0,this.host.models.Message.inject(T));return[2,Promise.reject(w)];case 4:return[2,!0]}}))}))},e.prototype.setMessageTTLInMinutes=function(t,e){var n=this._resolveMessage(t);if(n){var r=to()().add(e,"minute").toDate().getTime();this.host.models.Message.inject({id:n.id,ttl:e,expiresAt:r})}},e.prototype._clearOptimisticMarkAsReadState=function(t){void 0===t&&(t=Date.now()),t.getTime&&(t=t.getTime());for(var e=0,n=this.host.organizations.getAll();e<n.length;e++)for(var r=n[e].__markingAsReadConversations,i=!1;!i&&r.length>0;){var o=r[0],a=this.host.conversations.getById(o.id);if(!a)return;a._markingAsReadExpiration<t?(a._markingAsRead=!1,a._markingAsReadSortNumber=null,a._markingAsReadExpiration=null,this.host.models.Conversation.inject(a),this.host.conversations.find(a.id,{ensureEntities:!1})):i=!0}},e.prototype.ensureRecipientStatus=function(t,e){var n=void 0===e?{}:e,r=n.includeUsers,i=void 0===r||r,o=n.queue,a=void 0===o||o;return wa(this,void 0,void 0,(function(){var e,n,r,o,s,u,c,l,d,f;return Ia(this,(function(h){switch(h.label){case 0:if(this.host.requireUser(),t=this._resolveModelId(t),!(e=this._resolveMessage(t)))return[2,null];if(n=e.counterPartyType,r=e.senderStatus,o=e.shouldEnsureRecipientStatus,s=e.statusesPerRecipient,r===sr.SENDING)return[2,null];if("distributionList"===n)return[2,null];if(!o&&s.length>0){if(u=!1,i)for(c=0,l=s;c<l.length;c++)l[c].user||(u=!0);if(!u)return[2,s]}return a?[4,this.__queueFindRecipientStatuses([{id:t,includeUsers:i}])]:[3,2];case 1:return f=h.sent(),d=f[0],[3,4];case 2:return[4,this.__findRecipientStatus(t,{includeUsers:i})];case 3:d=h.sent(),h.label=4;case 4:return[2,d]}}))}))},e.prototype.findRecipientStatus=function(t,e){var n=void 0===e?{}:e,r=n.includeUsers,i=void 0!==r&&r,o=n.queue,a=void 0===o||o;return wa(this,void 0,void 0,(function(){var e,n,r;return Ia(this,(function(o){switch(o.label){case 0:return this.host.requireUser(),(e=this._resolveMessage(t))?e.senderStatus===sr.SENDING||"distributionList"===e.counterPartyType?[2,null]:(t=this._resolveModelId(t),a?[4,this.__queueFindRecipientStatuses([{id:t,includeUsers:i}])]:[3,2]):[2,null];case 1:return r=o.sent(),n=r[0],[3,4];case 2:return[4,this.__findRecipientStatus(t,{includeUsers:i})];case 3:n=o.sent(),o.label=4;case 4:return[2,n]}}))}))},e.prototype.ensureRecipientStatusMulti=function(t,e){var n=void 0===e?{}:e,r=n.includeUsers,i=void 0===r||r,o=n.queue,a=void 0===o||o;return wa(this,void 0,void 0,(function(){var e,n,r,o,s,u,c,l,d,f,h,p,v,y,g,m,_,b,w;return Ia(this,(function(I){switch(I.label){case 0:for(t=Mi.call(t).map(this._resolveModelId),e=Xi.a.call(t),n=[],r={},o=0,s=e;o<s.length;o++){if(w=s[o],y={id:w,includeUsers:i},u=this._resolveMessage(w),c=!0,u&&(l=u.shouldEnsureRecipientStatus,d=u.statusesPerRecipient,!l&&d.length>0&&(c=!1,i)))for(f=0,h=d;f<h.length;f++)h[f].user||(c=!0);c?n.push(y):r[y.id]=u.statusesPerRecipient}return 0===n.length?[2]:a?[4,this.__queueFindRecipientStatuses(n)]:[3,2];case 1:return p=I.sent(),[3,4];case 2:return[4,this.__findRecipientStatusMulti(n)];case 3:p=I.sent(),I.label=4;case 4:if(p)for(v=0;v<n.length;v++)p.length>v&&(y=n[v],g=p[v],r[y.id]=g);for(m=[],_=0,b=e;_<b.length;_++)w=b[_],m.push(r[w]);return[2,m]}}))}))},e.prototype.findRecipientStatusMulti=function(t,e){var n=void 0===e?{}:e,r=n.includeUsers,i=void 0!==r&&r,o=n.queue,a=void 0!==o&&o;return wa(this,void 0,void 0,(function(){var e,n,r,o,s,u;return Ia(this,(function(c){for(t=Mi.call(t).map(this._resolveModelId),e=Xi.a.call(t),n=[],r=0,o=e;r<o.length;r++)s=o[r],u={id:s,includeUsers:i},n.push(u);return 0===n.length?[2]:a?[2,this.__queueFindRecipientStatuses(n)]:[2,this.__findRecipientStatusMulti(n)]}))}))},e.prototype.__queueFindRecipientStatuses=function(t){return wa(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u;return Ia(this,(function(c){switch(c.label){case 0:for(e=[],n=function(t,n){var i,o,a=!0;e.push(new Promise((function(t,e){i=t,o=e})));for(var s=0,u=r._queuedFindRecipientStatuses;s<u.length;s++){var c=u[s];if(t===c.id){c.includeUsers=c.includeUsers||n,c.onCompletes.push(i),c.onErrors.push(o),a=!1;break}}a&&r._queuedFindRecipientStatuses.push({id:t,includeUsers:n,onCompletes:[i],onErrors:[o]})},r=this,i=0,o=t;i<o.length;i++)a=o[i],s=a.id,u=a.includeUsers,n(s,u);return this._queuedFindRecipientStatuses.length>=this.config.flushFindRecipientStatusMaxCount?(this.logger.log("reached "+this.config.flushFindRecipientStatusMaxCount+" -- flushing"),this.__flushFindRecipientStatusesQueue()):this._queuedFindRecipientStatuses.length>0&&this._throttled_flushFindRecipientStatusesQueue(),[4,Promise.all(e)];case 1:return[2,c.sent()]}}))}))},e.prototype.__flushFindRecipientStatusesQueue=function(){return wa(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Ia(this,(function(a){switch(a.label){case 0:if(0===this._queuedFindRecipientStatuses.length)return[2];t=this._queuedFindRecipientStatuses,this._queuedFindRecipientStatuses=[],a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.__findRecipientStatusMulti(t)];case 2:return n=a.sent(),[3,5];case 3:return r=a.sent(),e=r,[3,5];case 4:for(i=function(r){var i;n&&n.length>r&&(i=n[r]);var o=t[r],a=o.onCompletes,s=o.onErrors;if(e)for(var u=function(t){setTimeout((function(){return t(e)}),0)},c=0,l=s;c<l.length;c++){u(l[c])}else for(var d=function(t){setTimeout((function(){return t(i)}),0)},f=0,h=a;f<h.length;f++){d(h[f])}},o=0;o<t.length;o++)i(o);return[7];case 5:return[2]}}))}))},e.prototype.__findRecipientStatus=function(t,e){var n=e.includeUsers;return wa(this,void 0,void 0,(function(){var e,r,i,o,a,s,u,c,l,d,f,h,p,v=this;return Ia(this,(function(y){switch(y.label){case 0:if(this.host.requireUser(),e=this._resolveMessage(t),r=!1,this._pendingFindRecipientStatuses[e.id])return[2,null];y.label=1;case 1:return y.trys.push([1,,3,4]),o=new Promise((function(t,n){v._pendingFindRecipientStatuses[e.id]=function(){return t(null)}})),[4,Promise.race([o,this.host.api.messages.findRecipientStatus(e.serverId)])];case 2:return i=y.sent(),[3,4];case 3:return delete this._pendingFindRecipientStatuses[e.id],[7];case 4:if(!i)return[2,null];if(i.is_recalled)return this.host.models.Message.eject(e),[2,null];for(a=0,s=i.statuses;a<s.length;a++)u=s[a],this.__injectMessageStatus(e,u);if(!n)return[3,6];for(c=e.recipientOrganizationId,l=e.statusesPerRecipient,d=[],f=0,h=l;f<h.length;f++)(p=h[f].userId)&&d.push(p);return[4,this.host.users.ensureUsers(d,c)];case 5:y.sent(),r=!0,y.label=6;case 6:return e.shouldEnsureRecipientStatus&&(e.shouldEnsureRecipientStatus=!1,r=!0),r&&this.host.models.Message.inject(e),!this.config.condensedReplays&&or[e.markedRecipientStatus]<or[ar.DELIVERED]&&this.markAsReceived(e),[2,e.statusesPerRecipient]}}))}))},e.prototype.__findRecipientStatusMulti=function(t){return wa(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_,b,w,I,O,E,T,S,A,C,R,P,j,x,M,k,N,z,D,U,L;return Ia(this,(function(F){switch(F.label){case 0:for(this.host.requireUser(),e={},n=t,t=[],r=0,i=n;r<i.length;r++)o=i[r],U=o.id,O=o.includeUsers,k=this._resolveMessage(U),s=(a=k||{}).counterParty,u=a.serverId,c={id:U,includeUsers:O,message:k},t.push(c),u&&(this._pendingFindRecipientStatuses[u]||s&&"distributionList"===s.$entityType||(c.id=u,e[u]=!0));l=y.a.chunk(Object.keys(e),20),d={},f={},h=function(t){var e,n,r,i,o,a,s,u,c,l,h,v,y,g,m,_,b,w,I,O;return Ia(this,(function(E){switch(E.label){case 0:e=void 0,E.label=1;case 1:for(E.trys.push([1,,3,4]),n={},r=function(t){p._pendingFindRecipientStatuses[t]=function(){n[t]=!0}},i=0,o=t;i<o.length;i++)h=o[i],r(h);return[4,p.host.api.messages.findRecipientStatusMulti(t)];case 2:for(a=E.sent(),e=[],s=0,u=a;s<u.length;s++)g=u[s],h=g.client_id,n[h]||e.push(g);return[3,4];case 3:for(c=0,l=t;c<l.length;c++)h=l[c],delete p._pendingFindRecipientStatuses[h];return[7];case 4:if(!e)return[2,{value:[]}];for(v=0,y=e;v<y.length;v++)if(g=y[v],m=g.client_id,_=g.statuses,b=p.host.models.Message.get(m),g.is_recalled)p.host.models.Message.eject(b),f[m]=!0;else if(_&&_.length>0){for(w=0,I=_;w<I.length;w++)O=I[w],p.__injectMessageStatus(b,O);d[m]=b}return[2]}}))},p=this,v=0,g=l,F.label=1;case 1:return v<g.length?(m=g[v],[5,h(m)]):[3,4];case 2:if("object"==typeof(_=F.sent()))return[2,_.value];F.label=3;case 3:return v++,[3,1];case 4:b=0,w=t,F.label=5;case 5:if(!(b<w.length))return[3,9];if(I=w[b],O=I.includeUsers,k=I.message,E=!1,!k||f[k.serverId])return[3,8];if(T=k.recipientOrganizationId,S=k.shouldEnsureRecipientStatus,A=k.statusesPerRecipient,!O)return[3,7];for(C=[],R=0,P=A;R<P.length;R++)(j=P[R].userId)&&C.push(j);return[4,this.host.users.ensureUsers(C,T)];case 6:F.sent(),E=!0,F.label=7;case 7:S&&(k.shouldEnsureRecipientStatus=!1,E=!0),E&&this.host.models.Message.inject(k),F.label=8;case 8:return b++,[3,5];case 9:if(!this.config.condensedReplays)for(x=0,M=Object.values(d);x<M.length;x++)k=M[x],or[k.markedRecipientStatus]<or[ar.DELIVERED]&&this.markAsReceived(k);for(N=[],z=0,D=t;z<D.length;z++)U=D[z].id,L=d[U],N.push(L?L.statusesPerRecipient:null);return[2,N]}}))}))},ba([Object(Tr.decorator)()],e.prototype,"__prepareGroupForUsers",null),ba([Object(Tr.decorator)()],e.prototype,"__prepareRoleP2PGroup",null),ba([Object(Tr.decorator)({serializeArguments:function(t){return t[0]}})],e.prototype,"find",null),ba([Object(Tr.decorator)({memoize:!0})],e.prototype,"downloadAttachmentUrl",null),ba([Object(Tr.decorator)({memoize:!0})],e.prototype,"downloadAttachmentBlobAndUrl",null),ba([Object(Tr.decorator)()],e.prototype,"downloadAttachment",null),ba([Object(Tr.decorator)({memoize:!0})],e.prototype,"_downloadAttachmentBlobAndUrl",null),ba([Object(Tr.decorator)({serializeArguments:function(t){return"object"==typeof t[0]?t[0].id:t[0]}})],e.prototype,"findRecipientStatus",null),ba([Object(Tr.decorator)({serializeArguments:function(t){return t[0].map((function(t){return"object"==typeof t?t.id:t})).join(":")}})],e.prototype,"findRecipientStatusMulti",null),e}(zi),Ca=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ra=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Pa=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ja=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xa=["template_label"].join(","),Ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ca(e,t),e.prototype.batchDelete=function(t){var e=t.ids,n=t.organizationId;return Pa(this,void 0,void 0,(function(){var t=this;return ja(this,(function(r){switch(r.label){case 0:if(!Array.isArray(e))throw new Un.ValidationError("ids","required","ids must be an array");if(!n)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.messageTemplates.batch({ids:e,operation:"destroy",organizationId:n})];case 1:return r.sent(),[2,e.map((function(e){return t.host.models.MessageTemplate.inject({$deleted:!0,id:e})}))]}}))}))},e.prototype.create=function(t){var e=t.attachment,n=t.body,r=t.network,i=void 0===r?"patient":r,o=t.organizationId,a=t.repository,s=void 0===a?"personal":a,u=t.title;return Pa(this,void 0,void 0,(function(){var t,r,a;return ja(this,(function(c){switch(c.label){case 0:if(t=u?u.trim():"",r=n?n.trim():"",this._validate({body:r,organizationId:o,repository:s,shouldCheckId:!1,title:t}),!1===["patient"].includes(i))throw new Un.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.messageTemplates.create({attachment:e,body:r,network:i,organizationId:o,repository:s,title:t})];case 1:return a=c.sent(),[2,this.host.models.MessageTemplate.inject(a)]}}))}))},e.prototype.delete=function(t,e){return Pa(this,void 0,void 0,(function(){return ja(this,(function(n){switch(n.label){case 0:return this._validate({id:t,organizationId:e,shouldCheckInvalid:!1}),[4,this.host.api.messageTemplates.delete(t,e)];case 1:return n.sent(),[2,this.host.models.MessageTemplate.inject({$deleted:!0,id:t})]}}))}))},e.prototype.downloadTemplateFile=function(t){var e=t.templateId,n=t.fileName,r=t.organizationId;return Pa(this,void 0,void 0,(function(){var t;return ja(this,(function(i){switch(i.label){case 0:return[4,this.host.api.messageTemplates.downloadTemplateFile({templateId:e,fileName:n,organizationId:r})];case 1:return[4,gi({attachmentContentType:(t=i.sent()).type,blob:t,fileName:n})];case 2:return i.sent(),[2]}}))}))},e.prototype.find=function(t,e){return Pa(this,void 0,void 0,(function(){var n;return ja(this,(function(r){switch(r.label){case 0:return this._validate({id:t,organizationId:e,shouldCheckInvalid:!1}),[4,this.host.api.messageTemplates.find(t,e)];case 1:return n=r.sent(),[2,this.host.models.MessageTemplate.inject(n)]}}))}))},e.prototype.getAll=function(){return this.host.models.MessageTemplate.getAll()},e.prototype.getById=function(t){return this.host.models.MessageTemplate.get(t)},e.prototype.search=function(t){var e=t.continuation,n=t.network,r=void 0===n?"patient":n,i=t.organizationId,o=t.query,a=void 0===o?"":o,s=t.repository,u=void 0===s?"personal":s,c=t.sortBy,l=void 0===c?"title":c,d=t.sortOrder,f=void 0===d?"asc":d;return Pa(this,void 0,void 0,(function(){var t,n,o,s;return ja(this,(function(c){switch(c.label){case 0:return[4,this.host.search.query({continuation:e,network:r,organizationId:i,query:(o={},o[xa]=a,o.repository=u,o),returnFields:[],sort:(s={},s[l]=f,s),types:["messageTemplate"]})];case 1:return t=c.sent(),n=this._processSearchResults(t.results),[2,{metadata:t.metadata,results:n}]}}))}))},e.prototype.update=function(t){var e=t.attachment,n=t.body,r=t.id,i=t.organizationId,o=t.repository,a=t.title;return Pa(this,void 0,void 0,(function(){var t,s,u;return ja(this,(function(c){switch(c.label){case 0:return t=a?a.trim():"",s=n?n.trim():"",this._validate({body:s,id:r,organizationId:i,repository:o,title:t}),[4,this.host.api.messageTemplates.update({attachment:e,body:s,id:r,organizationId:i,repository:o,title:t})];case 1:return u=c.sent(),[2,this.host.models.MessageTemplate.inject(u)]}}))}))},e.prototype._processSearchResults=function(t){return t.map((function(t){return t.entity})).filter((function(t){return!t.$deleted}))},e.prototype._validate=function(t){var e=t.body,n=t.id,r=(t.network,t.organizationId),i=t.repository,o=t.shouldCheckId,a=void 0===o||o,s=t.shouldCheckInvalid,u=void 0===s||s,c=t.title;if(a&&!n)throw new Un.ValidationError("id","required");if(!r)throw new Un.ValidationError("organizationId","required");if(u){if(!e||0===e.trim().length)throw new Un.ValidationError("body","invalid","body must be at least 1 character");if(!i||!["general","personal"].includes(i))throw new Un.ValidationError("repository","invalid",'repository must be either "general" or "personal"');if(!c||0===c.trim().length||c.trim().length>60)throw new Un.ValidationError("title","invalid","title must be between 1 and 60 characters")}},Ra([Object(Tr.decorator)()],e.prototype,"downloadTemplateFile",null),Ra([Object(Tr.decorator)()],e.prototype,"find",null),Ra([Object(Tr.decorator)()],e.prototype,"search",null),e}(zi),ka=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Na=function(){return(Na=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},za=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Da=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ua=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},La=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Fa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__parseMessageMetadata=function(t){var e=t.mimetype,n=t.payload,r=e.indexOf(";");if(r>-1&&(e=e.slice(0,r)),"application/json"===e&&"string"==typeof n){var i=void 0;try{i=JSON.parse(n)}catch(e){return console.warn("Invalid metadata payload",t),null}return Na(Na({},t),{payload:i})}return t},e}return ka(e,t),e.prototype.fullUpdate=function(t,e,n){return Da(this,void 0,void 0,(function(){var r,i,o,a,s;return Ua(this,(function(u){switch(u.label){case 0:if(!n)throw new Un.ValidationError("organizationId","required");if(this.host.config.maxMetadataKeyCount>0&&Object.keys(e).length>this.host.config.maxMetadataKeyCount)throw new Un.ValidationError("entireData","invalid","Total number of metadata keys is "+Object.keys(e)+" and should not exceed "+this.host.config.maxMetadataKeyCount);for(r=0,i=Object.entries(e);r<i.length;r++)if(o=i[r],a=o[0],"string"!=typeof o[1])throw new Un.ValidationError("value","invalid","Value for metadata key "+a+" must be a string");this.host.requireUser(),t=this._resolveModelId(t),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.host.api.metadata.update(t,e,n)];case 2:return u.sent(),this.__injectMetadata(t,n,e),[2,e];case 3:if((s=u.sent()).response&&404===s.response.status)throw new Un.NotFoundError("metadata",t);return[2,Promise.reject(s)];case 4:return[2]}}))}))},e.prototype.update=function(t,e,n){return Da(this,void 0,void 0,(function(){var r,i;return Ua(this,(function(o){switch(o.label){case 0:if(!n)throw new Un.ValidationError("organizationId","required");return[4,this.find(t,n,{bypassCache:!0})];case 1:return r=o.sent(),i=Object.assign({},r,e),[2,this.fullUpdate(t,i,n)]}}))}))},e.prototype.find=function(t,e,n){return void 0===n&&(n={}),Da(this,void 0,void 0,(function(){var r,i;return Ua(this,(function(o){switch(o.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(n=y.a.defaults(n,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),t=this._resolveModelId(t),!n.bypassCache&&(r=this.get(t,e)))return[2,r];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.host.api.metadata.find(t,e)];case 2:return r=o.sent(),this.__injectMetadata(t,e,r),[2,r];case 3:if(!(i=o.sent()).response||404!==i.response.status)return[2,Promise.reject(i)];if(!n.ignoreNotFound)throw new Un.NotFoundError("metadata",t);return[3,4];case 4:return[2]}}))}))},e.prototype.findMulti=function(t,e,n){return void 0===n&&(n={}),Da(this,void 0,void 0,(function(){var r,i,o,a=this;return Ua(this,(function(s){switch(s.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");return this.host.requireUser(),t=y.a.uniq(ki(t).map(this._resolveModelId)),r=y.a.chunk(t,20),i=r.map((function(t){return a.__findMultiPaged(t,e,n)})),[4,Promise.all(i)];case 1:return o=s.sent(),[2,y.a.assign.apply(y.a,La([{}],o))]}}))}))},e.prototype.__findMultiPaged=function(t,e,n){return void 0===n&&(n={}),Da(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return Ua(this,(function(h){switch(h.label){case 0:return[4,this.host.api.entities.findMulti({users:[],metadata:t,organizationId:e})];case 1:for(n=h.sent().metadata,r={},i=0,o=n;i<o.length;i++)for(a=o[i],s=0,u=Object.entries(a);s<u.length;s++)c=u[s],l=c[0],(d=c[1])&&(f=this.__injectMetadata(l,e,d),r[l]=f);return[2,r]}}))}))},e.prototype.get=function(t,e){var n="metadata:"+t+":"+e;return this.host.models.Metadata.get(n)||null},e.prototype.__injectMetadata=function(t,e,n){var r="metadata:"+t+":"+e;return this.host.models.Metadata.inject({id:r,data:n,entityId:t,organizationId:e})},za([Object(Tr.decorator)()],e.prototype,"find",null),za([Object(Tr.decorator)()],e.prototype,"findMulti",null),e}(zi),Ba=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qa=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Va=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ga=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ha={account:"user",group:"group"},Wa=new Set(Object.keys(Ha)),Ya=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parseMuteEntry=function(t){var n,r=+t.mute_duration,i=t.mute_start,o=t.caller_organization||t.organization_id;if(i&&(i=1e3*+i),e.config.condensedReplays)n=t.conversation_id;else{var a=Ha[t.sender_type],s=t.sender_token;n=e.host.conversations.getConversationKey(a,s,o)}return{conversationId:n,entry:{durationInMinutes:r,organizationId:o,startedAt:i}}},e._addEntry=function(t,n){var r=n.durationInMinutes,i=n.organizationId,o=n.startedAt,a=void 0===o?Date.now():o,s=+a+60*r*1e3;if(!(s<Date.now())){var u=e.host.models.Mute.inject({id:"mute:"+t,conversationId:t,durationInMinutes:r,expiresAt:s,organizationId:i,startedAt:a});if(e.config.condensedReplays){var c=e.host.conversations.getById(t);if(!c)return u;c.muted=u,e.host.models.Conversation.inject(c)}else e._muteEntriesByConversationHandle[t]=u,e.host.models.Conversation.touch(t);return u}},e._removeEntry=function(t){e.config.condensedReplays||delete e._muteEntriesByConversationHandle[t];var n=e.host.conversations.getById(t);n&&n.muted&&(e.host.models.Mute.eject(n.muted),n.muted=null,e.host.models.Conversation.inject(n))},e}return Ba(e,t),e.prototype.mounted=function(){this._fetched=!1,this._muteEntriesByConversationHandle={}},e.prototype.dispose=function(){this._fetched=!1,this._muteEntriesByConversationHandle=null},e.prototype.findAll=function(){return Va(this,void 0,void 0,(function(){var t,e,n,r,i,o,a;return Ga(this,(function(s){switch(s.label){case 0:return this._fetched?[3,2]:[4,this.host.api.mute.findAll()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)r=n[e],Wa.has(r.sender_type)&&(i=this._parseMuteEntry(r),o=i.conversationId,a=i.entry,this._addEntry(o,a));this._fetched=!0,s.label=2;case 2:return[2,Object.values(this._muteEntriesByConversationHandle)]}}))}))},e.prototype._removeAllEntries=function(){if(this.config.condensedReplays)for(var t=0,e=this.host.conversations.getAll();t<e.length;t++){var n=e[t];n.muted&&this._removeEntry(n.id)}else for(var r=0,i=Object.keys(this._muteEntriesByConversationHandle);r<i.length;r++){var o=i[r];this._removeEntry(o)}},e.prototype._getByConversationHandle=function(t){var e=this._muteEntriesByConversationHandle[t];return e?e.expiresAt<Date.now()?(delete this._muteEntriesByConversationHandle[t],null):e:null},e.prototype.unmuteAll=function(){return Va(this,void 0,void 0,(function(){return Ga(this,(function(t){switch(t.label){case 0:return[4,this.host.api.mute.unmuteAll()];case 1:return t.sent(),this._removeAllEntries(),[2]}}))}))},e.prototype.muteConversation=function(t,e){return Va(this,void 0,void 0,(function(){var n,r,i,o;return Ga(this,(function(a){switch(a.label){case 0:if(this.__validateDurationInMinutes(e),t=this._resolveModelId(t),!(n=this._resolveEntity(t,"conversation")))throw new Error("conversation "+t+" not found");return t=n.id,r=n.counterPartyId,i=n.counterPartyType,o=n.organizationId,"user"!==i?[3,2]:[4,this.host.api.mute.muteUser(r,e,o,{recipientOrganizationId:o})];case 1:return a.sent(),this._addEntry(t,{durationInMinutes:e,organizationId:o}),[3,4];case 2:return"group"!==i?[3,4]:[4,this.host.api.mute.muteGroup(r,e,o)];case 3:a.sent(),this._addEntry(t,{durationInMinutes:e,organizationId:o}),a.label=4;case 4:return[2]}}))}))},e.prototype.unmuteConversation=function(t){return Va(this,void 0,void 0,(function(){var e,n,r,i;return Ga(this,(function(o){switch(o.label){case 0:if(!(e=this._resolveEntity(t,"conversation")))throw new Error("conversation "+t+" not found");return t=e.id,n=e.counterPartyId,r=e.counterPartyType,i=e.organizationId,"user"!==r?[3,2]:[4,this.host.api.mute.unmuteUser(n,i,{recipientOrganizationId:i})];case 1:return o.sent(),this._removeEntry(t),[3,4];case 2:return"group"!==r?[3,4]:[4,this.host.api.mute.unmuteGroup(n,i)];case 3:o.sent(),this._removeEntry(t),o.label=4;case 4:return[2]}}))}))},e.prototype.reactToMuteEvent=function(t){var e=t.data;if((e=wi(e)).token===this.host.currentUser.id){var n=e.action;if("clear"!==n){var r=this._parseMuteEntry(e),i=r.conversationId,o=r.entry;"add"===n?this._addEntry(i,o):this._removeEntry(i)}else this._removeAllEntries()}},e.prototype.getById=function(t){return t.startsWith("mute:")||(t="mute:"+t),this.host.models.Mute.get(t)},e.prototype.__validateDurationInMinutes=function(t){(t<0||t>525600||t%1!=0)&&xi.raise("durationInMinutes","invalid","should be a positive integer from 1 to 525600 (1 year)")},qa([Object(Tr.decorator)()],e.prototype,"findAll",null),e}(zi),Ka=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$a=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.EVENTS={"message|group_message":function(t){this.host.notifications.reactToMessageEvent(t)},"message:status|group:message:status":function(t){this.host.notifications.reactToMessageStatusEvent(t)},remote_wipe:function(t){this.host.notifications.disconnect({source:"Notifications remote_wipe"}),this.host.notifications.signOut({fromServer:!0})},"sse:heartbeat":function(){return null}};for(var i=0,o=Object.entries(r.EVENTS);i<o.length;i++){var a=o[i],s=a[0],u=a[1];if(s.includes("|")){for(var c=0,l=s.split("|");c<l.length;c++){var d=l[c];r.EVENTS[d]=u}delete r.EVENTS[s]}}return r}return Ka(e,t),e.prototype.emit=function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t):this.logger.info("unhandled event: "+t.type,t.data)},e}(zi),Xa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qa=function(){return(Qa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Za=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Ja=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ts=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},es=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._emitConnected=function(){r.emit("connected")},r._emitDisconnected=function(t){r.emit("disconnected",t)},r._emitEvent=function(t){r.emit("event",t)},r.events=new ia(e,Qa(Qa({},n),{endpointType:"simpleNotifications"})),r}return Xa(e,t),e.prototype.mounted=function(){this.events.mounted(),this.events.on("connected",this._emitConnected),this.events.on("disconnected",this._emitDisconnected),this.events.on("event",this._emitEvent)},e.prototype.dispose=function(){this.events.removeListener("connected",this._emitConnected),this.events.removeListener("disconnected",this._emitDisconnected),this.events.removeListener("event",this._emitEvent),this.events.dispose()},e.prototype.signIn=function(){return Ja(this,void 0,void 0,(function(){var t,e,n;return ts(this,(function(r){switch(r.label){case 0:if(!(t=this.host.getAuth())||!t.key||!t.secret)throw new Un.RequiresBasicAuthError;return this.emit("signingIn"),this.events.isSignedIn?[3,2]:[4,this.host.api.notifications.signIn(t.key,t.secret)];case 1:e=r.sent(),this.events.setAuth(e),r.label=2;case 2:return n=this.events.getAuth(),this.emit("signedIn",n),[2,n]}}))}))},e.prototype.signOut=function(t){var e=(void 0===t?{}:t).fromServer,n=void 0!==e&&e;return Ja(this,void 0,void 0,(function(){var t,e,r;return ts(this,(function(i){switch(i.label){case 0:if(!(t=this.events.getAuth()))return[2,!1];this.emit("signingOut",{fromServer:n}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.host.api.notifications.signOut(t.key,t.secret)];case 2:return i.sent(),e=!0,[3,4];case 3:return r=i.sent(),this.httpClient.isUnauthorizedError(r)?(e=!0,[3,4]):[2,Promise.reject(r)];case 4:return e&&this.events.removeAuth(),this.emit("signedOut",{fromServer:n,signedOut:e}),[2,e]}}))}))},Object.defineProperty(e.prototype,"isSignedIn",{get:function(){return this.events.isSignedIn},enumerable:!1,configurable:!0}),e.prototype.authenticate=function(t,e){return Ja(this,void 0,void 0,(function(){return ts(this,(function(n){return this.events.setAuth({key:t,secret:e}),[2]}))}))},e.prototype.connect=function(){return this.events.connect()},e.prototype.disconnect=function(t){var e=(void 0===t?{}:t).source;return this.events.disconnect({source:e})},e.prototype.reconnect=function(){return this.events.reconnect()},Object.defineProperty(e.prototype,"hasConnection",{get:function(){return this.events.hasConnection},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.events.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.events.isOpen},enumerable:!1,configurable:!0}),e.prototype.reactToMessageEvent=function(t){var e=t.data;e=wi(e);var n=this.host.models.Message.createInstance(Qa(Qa({},e),{id:b.a.v4()}));this.emit("unread:change",n.unreadMessageCount),this.emit("message",n)},e.prototype.reactToMessageStatusEvent=function(t){this.emit("unread:change",t.unread_message_count)},Za([Object(Tr.decorator)({serializeArguments:function(t){return""}})],e.prototype,"signOut",null),e}(zi),ns=n(60),rs=n.n(ns),is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),os=function(){return(os=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},as=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ss=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},us=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},cs=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},ls=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._onChangeConversation=function(t,n){var r=n.organization;r&&(e.host.currentlyServingOfflineMessages||e._deferConversationChanges||e.__reloadConversations(r))},e._onChangeUser=function(t,n){for(var r=n.id,i=e.host.models.Organization.getAll(),o=0,a=i;o<a.length;o++){(l=a[o]).autoForwardReceiverId===r&&l.autoForwardReceiver!==n&&e.host.models.Organization.inject(l)}if(n===e.host.currentUser&&!e.host.currentlyServingOfflineMessages&&!e._deferConversationChanges){var s=e.host.currentUser.roles;if(!rs()(s,e._lastMyRoles)){e._lastMyRoles=cs(s);for(var u=0,c=i;u<c.length;u++){var l=c[u];rs()(l.allowedSenders,e._getAllowedSenders(l))||e.host.models.Organization.inject(l)}}}},e.getPreferences=function(t){return ss(e,void 0,void 0,(function(){return us(this,(function(e){switch(e.label){case 0:if(!t)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.organizations.getPreferences(t)];case 1:return[2,e.sent()]}}))}))},e.editPreferences=function(t){var n=t.quickReplies,r=void 0===n?[]:n,i=t.organizationId;return ss(e,void 0,void 0,(function(){return us(this,(function(t){switch(t.label){case 0:if(!r)throw new Un.ValidationError("quickReplies","required");if(!i)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.organizations.editPreferences({organizationId:i,quickReplies:r})];case 1:return[2,t.sent()]}}))}))},e}return is(e,t),e.prototype.mounted=function(){this._deferConversationChanges=!1,this._lastMyRoles=[],this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onChangeConversation),this.host.models.User.on("afterInject",this._onChangeUser)},e.prototype.dispose=function(){this._deferConversationChanges=!1,this._lastMyRoles=[],this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onChangeConversation),this.host.models.User.removeListener("afterInject",this._onChangeUser),Tr.decorator.clear(this._findAll)},e.prototype.create=function(t){return void 0===t&&(t={allowPublicGroups:void 0,autologoutTime:void 0,deleteOnRead:void 0,groupLifespan:void 0,lifecycleCallback:void 0,name:void 0,pinLock:void 0,settingsRestricted:void 0,ttl:void 0,welcomeEmailSettings:void 0}),ss(this,void 0,void 0,(function(){var e=this;return us(this,(function(n){return this.host.requireUser(),[2,this.httpClient.post("/v2/organization",{data:t}).then((function(n){var r=n.getHeader("TT-X-Organization-Key");return e.host.models.Organization.inject({id:r,name:t.name})}))]}))}))},e.prototype.update=function(t){return void 0===t&&(t={allowPublicGroups:void 0,autologoutTime:void 0,autoSendWelcomeEmail:void 0,deleteOnRead:void 0,groupLifespan:void 0,id:void 0,lifecycleCallback:void 0,name:void 0,pinLock:void 0,settingsRestricted:void 0,ttl:void 0,welcomeEmailLogo:void 0,welcomeEmailSettings:void 0}),ss(this,void 0,void 0,(function(){var e,n=this;return us(this,(function(r){return this.host.requireUser(),e=I.a.underscoreObject({allowPublicGroups:t.allowPublicGroups,autologoutTime:t.autologoutTime,autoSendWelcomeEmail:t.autoSendWelcomeEmail,dor:t.deleteOnRead,groupLifespan:t.groupLifespan,lifecycleCallback:t.lifecycleCallback,name:t.name,pinLock:t.pinLock,settingsRestricted:t.settingsRestricted,ttl:t.ttl,welcomeEmailLogo:t.welcomeEmailLogo,welcomeEmailSettings:t.welcomeEmailSettings}),[2,this.httpClient.post("/v2/organization/:id",{urlParams:{id:t.id},data:e}).then((function(r){return n.host.models.Organization.inject(os({id:t.id},e))}))]}))}))},e.prototype.findAll=function(t){var e=void 0===t?{}:t,n=e.filter,r=void 0===n?{onlyApproved:!1}:n,i=e.findRoles,o=void 0===i||i;return ss(this,void 0,void 0,(function(){var t,e=this;return us(this,(function(n){switch(n.label){case 0:return this.host.requireUser(),[4,this._findAll()];case 1:return t=n.sent(),o?[4,this.host.userRoles.findAll()]:[3,3];case 2:n.sent(),n.label=3;case 3:return r.onlyApproved&&(t=y.a.filter(t,{pending:!1})),(t=y.a.sortBy(t,(function(t){return t.name.toLowerCase()}))).forEach((function(t){return e.__reloadConversations(t)})),[2,t]}}))}))},e.prototype.refreshAll=function(){return ss(this,void 0,void 0,(function(){var t;return us(this,(function(e){switch(e.label){case 0:return Tr.decorator.clear(this._findAll),[4,this._findAll()];case 1:return t=e.sent(),[4,this.host.userRoles.refreshAll()];case 2:return e.sent(),[2,t]}}))}))},e.prototype._findAll=function(){return ss(this,void 0,void 0,(function(){var t,e,n,r,i,o;return us(this,(function(a){switch(a.label){case 0:return[4,this.host.api.organizations.findAllOfUser(this.host.currentUserId)];case 1:for(t=a.sent(),e=[],n=0,r=t;n<r.length;n++)i=r[n],o=this.host.models.Organization.inject(i),this.host.models.Organization.removePlaceholder({entity:o,attrs:i}),e.push(o);return[2,e]}}))}))},e.prototype.find=function(t,e){return void 0===e&&(e={}),ss(this,void 0,void 0,(function(){var n,r;return us(this,(function(i){switch(i.label){case 0:return e=y.a.defaults(e,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),e.bypassCache||!(n=this.host.models.Organization.get(t))||n.$placeholder?[4,this.host.api.organizations.find(this.host.currentUserId,t)]:[2,n];case 1:return r=i.sent(),[4,this.host.userRoles.findAll({organizationId:t})];case 2:if(i.sent(),r)n=this.host.models.Organization.inject(r),this.__reloadConversations(n);else if(!e.ignoreNotFound)throw new Un.NotFoundError(this.host.models.Organization.name,t);return[2,n]}}))}))},e.prototype._getAllowedSenders=function(t){var e=t.id,n=[],r=this.host.currentUser;if(r){for(var i=0,o=r.roles;i<o.length;i++){var a=o[i];a.organizationId===e&&n.push(a)}n.push(r)}return n},e.prototype.getPendingEulas=function(){return ss(this,void 0,void 0,(function(){var t,e;return us(this,(function(n){switch(n.label){case 0:return[4,this._findAll()];case 1:return t=n.sent(),e=t.filter((function(t){return t.eulaEnabled&&!t.isEulaAccepted})).reduce((function(t,e){var n=e.id,r=e.eulaUrl;return t[r]?t[r].push(n):t[r]=[n],t}),{}),[2,Object.entries(e).map((function(t){return{url:t[0],organizationIds:t[1]}}))]}}))}))},e.prototype.findEulaContent=function(t){return ss(this,void 0,void 0,(function(){return us(this,(function(e){switch(e.label){case 0:return t=t.replace("http://","https://"),[4,this.httpClient.get(t,{withCredentials:!1,withHeaders:!1,resFormat:"text"})];case 1:return[2,e.sent()]}}))}))},e.prototype.getSettingValue=function(t,e){t=this._resolveModelId(t);var n=this.getById(t);return n?n.getSettingValue(e):null},e.prototype.getAll=function(){return this.host.models.Organization.getAll()},e.prototype.getById=function(t){return this.host.models.Organization.get(t)},e.prototype.getMultiById=function(t){return this.host.models.Organization.getMulti(t)},e.prototype.__reloadConversations=function(t){if(t){for(var e=0,n=0,r=0,i=0,o=0,a=0,s=0,u=0,c=t.conversations;u<c.length;u++){var l=c[u],d=l.highestSortNumber,f=l.unreadCount,h=l.unreadPriorityCount,p=l.lastIncomingMessageSortNumber,v=l.shouldDisplay,y=l.metadata;v&&(e=Math.max(e,d),y&&"patient_messaging"===y.feature_service?(n+=f,o+=h,i+=f,s+=h):(r+=f,a+=h),!this.config.condensedReplays&&p&&(!t.lastIncomingMessageSortNumber||t.lastIncomingMessageSortNumber<p)&&(t.lastIncomingMessageSortNumber=p))}t.highestSortNumber=e,t.unreadCount=r+n,t.unreadPriorityCount=a+o,t.networks.provider.unreadCount=r,t.networks.provider.unreadPriorityCount=a,t.networks.patient.unreadCount=n,t.networks.patient.unreadPriorityCount=o,t.networks.virtualWaitingRoom.unreadCount=i,t.networks.virtualWaitingRoom.unreadPriorityCount=s,this.host.models.Organization.inject(t),t.emit("change")}},e.prototype.reactToOrganizationPreferencesEvent=function(t){this.emit("preferences:change",I.a.camelizeObject(t))},as([Object(Tr.decorator)()],e.prototype,"findAll",null),as([Object(Tr.decorator)()],e.prototype,"refreshAll",null),as([Object(Tr.decorator)({memoize:!0})],e.prototype,"_findAll",null),as([Object(Tr.decorator)()],e.prototype,"find",null),e}(zi),ds=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fs=function(){return(fs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},hs=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ps=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},vs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ys=["patient","user"],gs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__resolvePatientId=function(t){if("string"!=typeof t){if(!ys.includes(t.$entityType))return t;t=e._resolveModelId(t)}return t.replace("patient:","")},e}return ds(e,t),e.prototype.create=function(t){var e=t.contacts,n=t.dob,r=t.firstName,i=t.lastName,o=t.mrn,a=t.organizationId,s=t.phoneNumber,u=t.gender;return hs(this,void 0,void 0,(function(){var t;return ps(this,(function(c){switch(c.label){case 0:if(!o)throw new Un.ValidationError("mrn","required");if(!r)throw new Un.ValidationError("firstName","required");if(!i)throw new Un.ValidationError("lastName","required");if(!s)throw new Un.ValidationError("phoneNumber","required");if(!Object(Ii.isPhone)(s))throw new Un.ValidationError("phoneNumber","not a valid format");if(!n)throw new Un.ValidationError("dob","required");if(!/^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/.test(n))throw new Un.ValidationError("dob","not a valid format of YYYY-MM-DD");if(!u)throw new Un.ValidationError("gender","required");if(!a)throw new Un.ValidationError("organizationId","required");return e&&e.length&&function(t){if(t.length>2)throw new Un.ValidationError("contacts count","larger than 2");for(var e=0;e<t.length;e++){var n=t[e],r=n.firstName,i=n.lastName,o=n.phoneNumber,a=n.relation;if(!r)throw new Un.ValidationError("contact firstName","required");if(!i)throw new Un.ValidationError("contact lastName","required");if(!o)throw new Un.ValidationError("contact phoneNumber","required");if(!a)throw new Un.ValidationError("contact relation","required")}if(2===t.length&&Object(v.isEqual)(t[0],t[1]))throw new Un.ValidationError("contacts being unique","required")}(e),[4,this.host.api.patients.create({contacts:_s(e),dob:n,firstName:r,gender:u,lastName:i,mrn:o,organizationId:a,phoneNumber:Object(Ii.normalizePhone)(s)})];case 1:return t=c.sent(),[2,this.host.models.User.inject(t.entity)]}}))}))},e.prototype.update=function(t){var e=t.currentEditVersion,n=t.dob,r=t.firstName,i=t.patientId,o=t.lastName,a=t.organizationId,s=t.phoneNumber,u=t.gender;return hs(this,void 0,void 0,(function(){var t;return ps(this,(function(c){switch(c.label){case 0:if(!e)throw new Un.ValidationError("currentEditVersion","required");if(!a)throw new Un.ValidationError("organizationId","required");if(!i)throw new Un.ValidationError("patientId","required");return[4,this.host.api.patients.update({dob:n,editVersion:ms(e),firstName:r,gender:u,patientId:i,lastName:o,organizationId:a,phoneNumber:Object(Ii.normalizePhone)(s)})];case 1:return t=c.sent(),[2,this.host.models.User.inject(t.entity)]}}))}))},e.prototype.delete=function(t,e){return hs(this,void 0,void 0,(function(){var n;return ps(this,(function(r){switch(r.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");return(n=this.host.models.Patient.get(t))&&this.host.models.Patient.eject(n),[4,this.host.api.patients.delete(t,e)];case 1:return r.sent(),[2]}}))}))},e.prototype.createContact=function(t){var e=t.firstName,n=t.lastName,r=t.organizationId,i=t.patientId,o=t.phoneNumber,a=t.relation;return hs(this,void 0,void 0,(function(){var t;return ps(this,(function(s){switch(s.label){case 0:if(!i)throw new Un.ValidationError("patientId","required");if(!e)throw new Un.ValidationError("firstName","required");if(!n)throw new Un.ValidationError("lastName","required");if(!o)throw new Un.ValidationError("phoneNumber","required");if(!Object(Ii.isPhone)(o))throw new Un.ValidationError("phoneNumber","not a valid format");if(!a)throw new Un.ValidationError("relation","required");if(!r)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.patients.createContact({firstName:e,lastName:n,organizationId:r,patientId:i,phoneNumber:Object(Ii.normalizePhone)(o),relation:a})];case 1:return t=s.sent(),[2,this.host.models.User.inject(t.entity)]}}))}))},e.prototype.updateContact=function(t){var e=t.contactId,n=t.currentEditVersion,r=t.firstName,i=t.lastName,o=t.organizationId,a=t.patientId,s=t.phoneNumber,u=t.relation;return hs(this,void 0,void 0,(function(){var t;return ps(this,(function(c){switch(c.label){case 0:if(!n)throw new Un.ValidationError("currentEditVersion","required");if(!o)throw new Un.ValidationError("organizationId","required");if(!a)throw new Un.ValidationError("patientId","required");if(!e)throw new Un.ValidationError("contactId","required");if(!r)throw new Un.ValidationError("firstName","required");if(!i)throw new Un.ValidationError("lastName","required");if(!s)throw new Un.ValidationError("phoneNumber","required");if(!Object(Ii.isPhone)(s))throw new Un.ValidationError("phoneNumber","not a valid format");if(!u)throw new Un.ValidationError("relation","required");return[4,this.host.api.patients.updateContact({contactId:e,editVersion:ms(n),firstName:r,lastName:i,organizationId:o,patientId:a,phoneNumber:Object(Ii.normalizePhone)(s),relation:u})];case 1:return t=c.sent(),[2,this.host.models.User.inject(t.entity)]}}))}))},e.prototype.deleteContact=function(t){var e=t.contactId,n=t.organizationId,r=t.patientId;return hs(this,void 0,void 0,(function(){var t;return ps(this,(function(i){switch(i.label){case 0:if(!e)throw new Un.ValidationError("contactId","required");if(!n)throw new Un.ValidationError("organizationId","required");if(!r)throw new Un.ValidationError("patientId","required");return[4,this.host.api.patients.deleteContact({contactId:e,patientId:r,organizationId:n})];case 1:return i.sent(),(t=this.host.models.PatientContact.get("patientContact:"+e))&&this.host.models.PatientContact.eject(t),[2]}}))}))},e.prototype.login=function(t){var e=t.accessToken,n=t.dateOfBirth,r=t.linkToken,i=t.sessions;return hs(this,void 0,void 0,(function(){var t,o,a,s,u,c;return ps(this,(function(l){switch(l.label){case 0:return this.host.emit("signingIn"),[4,this.host.api.patients.login(r,e,n,i)];case 1:return t=l.sent(),o=t.api_key,a=t.api_secret,s=t.group_id,u=t.organization_id,this.host.configure({events:fs(fs({},this.host.config.events),{singleConversation:s})}),this.host._setAuth({key:o,secret:a}),this.host.setDefaultOrganization(u),[4,this.host.users.findMe({ignoreNotFound:!0})];case 2:return c=l.sent(),this.host._setCurrentUser(c),this.host.emit("signedIn",c,this.host.getAuth()),this.host.messages._fetchAttachmentTokens(),[2,t]}}))}))},e.prototype.loginCheck=function(t){var e=t.linkToken,n=t.sessions;return hs(this,void 0,void 0,(function(){return ps(this,(function(t){return[2,this.host.api.patients.loginCheck(e,n)]}))}))},e.prototype.requestAccessToken=function(t){return hs(this,void 0,void 0,(function(){return ps(this,(function(e){return[2,this.host.api.patients.requestAccessToken(t)]}))}))},e.prototype.csvUpload=function(t,e){return hs(this,void 0,void 0,(function(){return ps(this,(function(n){return[2,this.host.api.patients.csvUpload(t,e)]}))}))},e.prototype.getWhiteLabel=function(t){return hs(this,void 0,void 0,(function(){return ps(this,(function(e){return[2,this.host.api.patients.getWhiteLabel(t)]}))}))},e.prototype.setWhiteLabel=function(t,e){return hs(this,void 0,void 0,(function(){return ps(this,(function(n){return[2,this.host.api.patients.setWhiteLabel(t,e)]}))}))},e.prototype._createPatientGroupMetadata=function(t){var e=t.displayName,n=t.patient,r=t.id;return{feature_service:"patient_messaging",is_patient_contact:"false",patient_dob:n.dob,patient_gender:n.gender,patient_id:r,patient_mrn:n.mrn,patient_name:e,phone_number:n.phoneNumber,sms_opted_out:n.smsOptedOut}},e.prototype._createPatientContactGroupMetadata=function(t){var e=t.patient,n=t.patientContact,r=t.id,i=e.dob,o=e.gender,a=e.mrn,s=e.user,u=n.phoneNumber,c=n.relation,l=n.smsOptedOut;return{feature_service:"patient_messaging",is_patient_contact:"true",patient_contact_id:r,patient_dob:i,patient_gender:o,patient_id:s.id,patient_mrn:a,patient_name:s.displayName,phone_number:u,relation_name:c,sms_opted_out:l}},e.prototype.getAll=function(){return this.host.models.Patient.getAll()},e.prototype.getById=function(t){return t=this.__resolvePatientId(t),this.host.models.Patient.get("patient:"+t)},e}(zi);function ms(t){if(null==t)throw new Un.ValidationError("version","of type string or number");return"string"==typeof t?parseInt(t)+1:t+1}function _s(t){return void 0===t&&(t=[]),t.map((function(t){var e=t.phoneNumber,n=vs(t,["phoneNumber"]);return fs(fs({},n),{phoneNumber:Object(Ii.normalizePhone)(e)})}))}var bs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bs(e,t),e.prototype.mounted=function(){this._data={}},e.prototype.dispose=function(){this._data=null},e.prototype.reactToPresenceEvent=function(t){var e=t.data;this.set(e.from,pr.resolve(e.type))},e.prototype.set=function(t,e){if(this._data[t]!==e){this._data[t]=e;var n=this.host.models.User.inject({id:t,presence:e});this.emit("change",{presence:e,user:n,userId:t})}},e.prototype.get=function(t){return t===this.host.currentUserId?pr.AVAILABLE:this._data[t]||pr.UNKNOWN},e}(zi),Is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Os=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Es=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ts=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ss=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._addProcessingEvent=function(t){var n=e.host.models.Product.getAll()[0];if(n){var r=t.actionType,i=t.entity;r===vr.ROLE_OPT_IN&&n.rolesOptingIn.push(i.id),n.activeProcessingEvents.push(t),e.host.models.Product.inject(n),e.emit("processing:start",t)}},e._removeProcessingEvent=function(t){var n=e.host.models.Product.getAll()[0];if(n){for(var r=n.activeProcessingEvents,i=n.rolesOptingIn,o=t.actionType,a=t.entity,s=r.length-1;s>=0;s--){var u=r[s];if(o===u.actionType&&a.id===u.entity.id&&(r.splice(s,1),o===vr.ROLE_OPT_IN&&i.includes(a.id)&&i.splice(i.indexOf(a.id),1),o!==vr.MESSAGE_REPLAY))break}e.host.models.Product.inject(n),e.emit("processing:stop",t)}},e._onChangeOrganization=function(t,n){var r=e.host.models.Product.getAll()[0];if(r){var i=e.host.models.Organization.getAll();if(0!==i.length){for(var o={organizations:i},a=0,s=0,u=0,c=0,l=0,d=0,f=i;d<f.length;d++){var h=f[d];h.$placeholder||(a+=h.conversations.length,s+=h.unreadCount,u+=h.unreadPriorityCount,h.networks.virtualWaitingRoom&&(c+=h.networks.patient.unreadCount,l+=h.networks.patient.unreadPriorityCount))}o.conversationCount=a,o.unreadCount=s,o.unreadPriorityCount=u,o.unreadVWRCount=c,o.unreadVWRPriorityCount=l;for(var p=!1,v=0,y=Object.entries(o);v<y.length;v++){var g=y[v],m=g[0],_=g[1];rs()(r[m],_)||(r[m]=_,p=!0)}p&&e.host.models.Product.inject(r)}}},e}return Is(e,t),e.prototype.mounted=function(){this.host.models.Organization.on("afterInject",this._onChangeOrganization),this.host.models.Organization.on("afterEject",this._onChangeOrganization)},e.prototype.dispose=function(){this.host.models.Organization.removeListener("afterInject",this._onChangeOrganization),this.host.models.Organization.removeListener("afterEject",this._onChangeOrganization)},e.prototype.findAll=function(){return Es(this,void 0,void 0,(function(){return Ts(this,(function(t){switch(t.label){case 0:return[4,this.host.organizations.findAll()];case 1:return t.sent(),[2,this.getAll()]}}))}))},e.prototype.refreshAll=function(){return Es(this,void 0,void 0,(function(){return Ts(this,(function(t){switch(t.label){case 0:return[4,this.host.organizations.refreshAll()];case 1:return t.sent(),[2,this.getAll()]}}))}))},e.prototype.getAll=function(){return this.host.models.Product.getAll()},e.prototype.getById=function(t){return this.host.models.Product.get(t)},Os([Object(Tr.decorator)()],e.prototype,"findAll",null),Os([Object(Tr.decorator)()],e.prototype,"refreshAll",null),e}(zi),As=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cs=function(){return(Cs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Rs=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Ps=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},js=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ms=["role","user"],ks=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__injectSearchResult=function(t){var n=t.entity,r=t.metadata,i=void 0===r?{}:r,o=t.organizationId;return i=Cs(Cs({},i),{display_name:n.displayName,token:e.__resolveRoleId(n.id)}),e.__injectRoleFromMetadata({metadata:i,organizationId:o})},e.__injectRoleAssignmentEntity=function(t,n,r){return e.__injectRoleFromMetadata({metadata:{display_name:t,meta_type:n.meta_type,owners:n.owner_id,tag_color:n.tag_color,tag_id:n.tag_id,tag_name:n.tag_name,token:n.id},organizationId:r,replaceExisting:!1})},e.__resolveRoleId=function(t){if("string"!=typeof t){if(!Ms.includes(t.$entityType))return t;t=e._resolveModelId(t)}return t.replace("role:","")},e._onChangeConversation=function(t,n){var r=n.counterParty,i=n.counterPartyType,o=r&&r.members&&r.members.length>0;if("group"===i&&o)for(var a=0,s=r.members;a<s.length;a++){var u=s[a];if(u.isRoleBot){var c=e._roleConversations[u.id]||[];if(c.includes(n)||c.push(n),e._roleConversations[u.id]=c,"ROLE_P2P"===r.groupType){var l=e._roleP2PConversations[u.id]||[];l.includes(n)||l.push(n),e._roleP2PConversations[u.id]=l}}}},e._onRemoveConversation=function(t,n){var r=n.counterParty,i=n.counterPartyType,o=r&&r.members&&r.members.length>0;if("group"===i&&o)for(var a=0,s=r.memberIds;a<s.length;a++){var u=s[a],c=e._roleConversations[u],l=c?c.indexOf(n):-1;if(l>-1&&c.splice(l,1),c&&0===c.length&&delete e._roleConversations[u],"ROLE_P2P"===r.groupType){var d=e._roleP2PConversations[u],f=d?d.indexOf(n):-1;f>-1&&d.splice(f,1),d&&0===d.length&&delete e._roleP2PConversations[u]}}},e}return As(e,t),e.prototype.mounted=function(){this._previouslyInRoles={},this._roleConversations={},this._roleP2PConversations={},this.host.models.Conversation.on("afterInject",this._onChangeConversation),this.host.models.Conversation.on("afterEject",this._onRemoveConversation)},e.prototype.dispose=function(){this._previouslyInRoles={},this._roleConversations={},this._roleP2PConversations={},this.host.models.Conversation.removeListener("afterInject",this._onChangeConversation),this.host.models.Conversation.removeListener("afterEject",this._onRemoveConversation)},e.prototype.createP2PGroup=function(t){var e=t.metadata,n=t.name,r=t.organizationId,i=t.recipientId,o=t.replayHistory,a=void 0===o||o,s=t.senderId,u=void 0===s?this.host.currentUserId:s;return Ps(this,void 0,void 0,(function(){var t,o,s,c,l,d,f,h,p,v,y,g,m,_,b,w,I,O,E,T,S=this;return js(this,(function(A){switch(A.label){case 0:if(this.host.requireUser(),!i)throw new Un.ValidationError("recipientId","required");if(!r)throw new Un.ValidationError("organizationId","required");for(t=this.host.currentUserId,o=[],s=0,c=[u,i];s<c.length;s++)l=c[s],l=this.host.roles.__resolveRoleId(l),l=this._resolveModelIdWithTypes(l,"user"),o.includes(l)||o.push(l);if(2!==o.length)throw new Un.ValidationError("recipientId","same user as senderId");return[4,Promise.all(o.map((function(t){return S.host.users.find(t,{organizationId:r})})))];case 1:return d=A.sent(),n||(n=d.map((function(t){return t.isRoleBot?t.displayName:t.firstName})).filter(Boolean).join(", ")||"Group"),[4,this.host.api.roles.createP2PGroup({createdByUserId:u,memberIds:o,name:n,organizationId:r,replayHistory:a})];case 2:for(f=A.sent(),this.config.condensedReplays?(p=f.entity||f,h=f.conversation_id):p=f,v=0,y=d;v<y.length;v++)if(g=y[v],m=g.botRole,g.isRoleBot&&m&&(_=m.memberIds))for(b=0,w=_;b<w.length;b++)I=w[b],o.includes(I)||o.push(I);return O=p.id||p.token,(E=this.host.models.Group.get(O))&&E.memberIds?T=E.memberIds:(p.members=o,T=o),E=this.host.conversations.__injectCounterParty({conversationId:h,entityAttrs:p,entityType:"group",groupType:nr.ROLE_P2P,hasCurrentUser:T.includes(t),isPlaceholder:!0,organizationId:r}),e?[4,this.host.metadata.update(E.id,e,r)]:[3,4];case 3:A.sent(),A.label=4;case 4:return[2,E]}}))}))},e.prototype.findAll=function(){return Ps(this,void 0,void 0,(function(){var t,e,n,r=this;return js(this,(function(i){switch(i.label){case 0:return 0!==(t=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:t=i.sent(),i.label=2;case 2:return 0===(t=t.filter((function(t){return t.rolesEnabled}))).length?[2,[]]:[4,this.host.search.query({types:["user"],organizationIds:t.map((function(t){return t.id})),query:{displayName:"",featureService:"role"},followContinuations:!0})];case 3:return e=i.sent().results,n=e.map((function(t){return t.entity})),t.map((function(t){var e=t.id;return r.host.models.Organization.touch(e)})),[2,n]}}))}))},e.prototype.findByOrganizationId=function(t){return Ps(this,void 0,void 0,(function(){var e,n,r;return js(this,(function(i){switch(i.label){case 0:return t=this._resolveModelId(t),[4,this.host.organizations.find(t)];case 1:return(e=i.sent()).rolesEnabled?[4,this.host.search.query({types:["user"],organizationIds:e.id,query:{displayName:"",featureService:"role"},followContinuations:!0})]:[2,[]];case 2:return n=i.sent().results,r=n.map((function(t){return t.entity})),this.host.models.Organization.touch(t),[2,r]}}))}))},e.prototype.find=function(t,e,n){return void 0===n&&(n={}),Ps(this,void 0,void 0,(function(){var r,i,o;return js(this,(function(a){switch(a.label){case 0:return this.host.requireUser(),n=y.a.defaults(n,{bypassCache:!1,ignoreNotFound:!1}),t=this.__resolveRoleId(t),e=this._resolveModelId(e),!n.bypassCache&&(r=this.getById(t))?[2,r]:[4,this.host.api.roles.find(t,e)];case 1:if(!(i=a.sent())){if(n.ignoreNotFound)return[2];throw new Un.NotFoundError(this.host.models.Role.name,t)}return o=this.__injectSearchResult({entity:{id:t,displayName:i.display_name},metadata:i,organizationId:e}),this.host.models.Organization.touch(e),[2,o]}}))}))},e.prototype.saveRole=function(t,e){return Ps(this,void 0,void 0,(function(){return js(this,(function(n){switch(n.label){case 0:return this.host.requireUser(),e=this._resolveModelId(e),t=this.__resolveRoleId(t),[4,this.host.api.roles.saveRole(t,this.host.currentUserId,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.removeSavedRole=function(t,e){return Ps(this,void 0,void 0,(function(){return js(this,(function(n){switch(n.label){case 0:return this.host.requireUser(),e=this._resolveModelId(e),t=this.__resolveRoleId(t),[4,this.host.api.roles.removeSavedRole(t,this.host.currentUserId,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.findSavedRoles=function(t,e){return void 0===e&&(e={}),Ps(this,void 0,void 0,(function(){var n,r,i=this;return js(this,(function(o){switch(o.label){case 0:return e=y.a.defaults(e,{ignoreNotFound:!1}),this.host.requireUser(),t=this._resolveModelId(t),[4,this.host.api.roles.findSavedRoles(this.host.currentUserId,t)];case 1:if(!(n=o.sent())){if(e.ignoreNotFound)return[2];throw new Un.NotFoundError("saved roles",t)}return r=n.map((function(e){return i.__injectSearchResult({entity:{id:e.token,displayName:e.display_name},metadata:e,organizationId:t})})).filter(Boolean),this.host.models.Organization.touch(t),[2,r]}}))}))},e.prototype.reactToUpdateEventCR=function(t){var e,n=t.entity,r=n.display_name,i=n.metadata,o=n.organizationId;return e="group"===n.type?i.id:n.id,i=Cs(Cs({},i),{display_name:r,token:this.__resolveRoleId(e)}),this.__injectRoleFromMetadata({metadata:i,organizationId:o})},e.prototype.reactToUpdateEvent=function(t){var e,n=t.data,r=n.display_name,i=n.metadata,o=n.organization_key;return e="tigertext:entity:group"===n.type?i.id:n.token,i=Cs(Cs({},i),{display_name:r,token:this.__resolveRoleId(e)}),this.__injectRoleFromMetadata({metadata:i,organizationId:o})},e.prototype.__injectRoleFromMetadata=function(t){var e=t.metadata,n=void 0===e?{}:e,r=t.organizationId,i=t.replaceExisting,o=void 0===i||i,a=n.escalation_policy,s=n.token;if(!s)return null;var u="role:"+s;if(!o){var c=this.host.models.Role.get(u);if(c)return c}var l=this.host.models.Organization.get(r);this.host.metadata.__injectMetadata(s,r,Cs({feature_service:"role"},n)),this.host.models.User.injectPlaceholder({id:s,organizationId:r,displayName:n.display_name});var d={botUserId:s,displayName:n.display_name,id:u,organizationId:r};if(n.description&&(d.description=n.description),a&&a.escalation_path){var f=JSON.parse(JSON.stringify(a));f.id="escalationPolicy:"+s,f.targetId=s;var h=this.host.models.EscalationPolicy.inject(f);d.escalationPolicyId=h.id}else d.escalationPolicyId=null;if(n.room_assignment_id&&(d.assignmentGroupId=n.room_assignment_id),n.owners)if("string"==typeof n.owners)d.memberIds=n.owners.split(","),this.host.models.User.injectPlaceholder({id:n.owners});else{d.memberIds=n.owners.map((function(t){return t.token}));for(var p=0,v=n.owners;p<v.length;p++){var g=v[p];this.host.models.User.injectPlaceholder(g)}}return n.tag_id?(d.roleTagId=r+":"+n.tag_id,this.host.models.RoleTag.inject(Cs(Cs({},y.a.pick(n,"tag_id","tag_color","tag_name")),{id:d.roleTagId,organizationId:r}))):l&&(d.roleTagId=null),this.host.models.Role.inject(d)},e.prototype.__parseRoleFromMetadata=function(t){var e=t.metadata,n=void 0===e?{}:e,r=t.organizationId,i=n.token;if(!i)return null;var o={$entityType:"role",botUserId:i,displayName:n.display_name,id:"role:"+i,organizationId:r},a=null;n.tag_id&&((a={id:r+":"+n.tag_id,organizationId:r,color:n.tag_color,tagId:n.tag_id,name:n.tag_name,displayName:n.tag_name}).color&&(a.color=a.color.replace("0x","#")));return o.roleTag=a,o},e.prototype.getAll=function(){return this.host.models.Role.getAll()},e.prototype.getById=function(t){return t=this.__resolveRoleId(t),this.host.models.Role.get("role:"+t)},e.prototype.refresh=function(t){return Ps(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return js(this,(function(u){switch(u.label){case 0:return 0===(e=Object.keys(this._roleConversations)).length?[2]:[4,this.host.entities.findMulti(e,t)];case 1:for(n=u.sent(),r=0,i=n;r<i.length;r++)o=i[r],a=o.entity,s=o.metadata,a&&s&&(s.owners||(s.owners=[]),this.__injectSearchResult({entity:{id:a.token,displayName:a.display_name},metadata:s,organizationId:t}));return[2]}}))}))},e.prototype.reactToFriendsEventCR=function(t){return Ps(this,void 0,void 0,(function(){var e,n,r,i,o,a;return js(this,(function(s){switch(s.label){case 0:return e=t.action,n=t.attrs,r=n.id,i=n.metadata,o=void 0===i?{}:i,a=n.organizationId,n.action=e,n.token=r,[4,this.__reactToRoleChange(o.id,a,o.triggered_id,n)];case 1:return s.sent(),[2]}}))}))},e.prototype.reactToFriendsEvent=function(t){return Ps(this,void 0,void 0,(function(){var e,n,r,i,o;return js(this,(function(a){switch(a.label){case 0:return e=t.data.friend,n=e.metadata,r=void 0===n?{}:n,i=e.organization_id,o=xs(e,["metadata","organization_id"]),[4,this.__reactToRoleChange(r.id,i,r.triggered_id,o)];case 1:return a.sent(),[2]}}))}))},e.prototype.__reactToRoleChange=function(t,e,n,r){return Ps(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,d,f,h,p,v,y;return js(this,(function(g){switch(g.label){case 0:if(e=this._resolveModelId(e),t=this.__resolveRoleId(t),n=this._resolveModelId(n),i=this.host.currentUser,o=r.action,a=r.token,s=function(){return i.roles.some((function(e){return e.botUserId===t}))},u=this._previouslyInRoles[t]||s(),c=r.event_status,"del"===o){if(c&&"end"!==c)return this._previouslyInRoles[t]=u,[2];delete this._previouslyInRoles[t]}return l=this.getById(t),[4,Promise.all([this.find(t,e,{bypassCache:!0,ignoreNotFound:!0}),this.host.users.find(n,{organizationId:e,ignoreNotFound:!0})])];case 1:return d=g.sent(),f=d[0],h=d[1],l||f?((p="del"===o&&l&&!f)&&(f=l,v="role:"+t,this.host.models.Role.inject({id:v,memberIds:[]}),this.host.models.Role.eject(f)),(y=s())&&!u?this.emit("change",{type:"OPT_IN",role:f,target:i,triggeredBy:h}):!y&&u&&(this.host.models.Group.eject(a),this.host.models.User.touch(this.host.currentUserId),this.emit("change",{type:"OPT_OUT",isRoleDeleted:p,role:f,target:i,triggeredBy:h})),[2]):[2]}}))}))},Rs([Object(Tr.decorator)()],e.prototype,"findAll",null),Rs([Object(Tr.decorator)()],e.prototype,"findByOrganizationId",null),Rs([Object(Tr.decorator)()],e.prototype,"find",null),Rs([Object(Tr.decorator)()],e.prototype,"saveRole",null),Rs([Object(Tr.decorator)()],e.prototype,"removeSavedRole",null),Rs([Object(Tr.decorator)()],e.prototype,"findSavedRoles",null),Rs([Object(Tr.decorator)()],e.prototype,"refresh",null),Rs([Object(Tr.decorator)()],e.prototype,"__reactToRoleChange",null),e}(zi),Ns=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zs=function(){return(zs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ds=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Us=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ls=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ns(e,t),e.prototype.findAll=function(t){return void 0===t&&(t={}),Us(this,void 0,void 0,(function(){var e,n,r=this;return Ls(this,(function(i){switch(i.label){case 0:return t=y.a.defaults(t,{ignoreNotFound:!0,bypassCache:!1}),0!==(e=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:e=i.sent(),i.label=2;case 2:return[4,Promise.all(e.map((function(e){return r.findAllForOrganization(e.id,t)})))];case 3:return n=i.sent(),[2,y.a.flatten(n)]}}))}))},e.prototype.findAllForOrganization=function(t,e){return void 0===e&&(e={}),Us(this,void 0,void 0,(function(){var n,r,i,o=this;return Ls(this,(function(a){switch(a.label){case 0:return e=y.a.defaults(e,{ignoreNotFound:!0,bypassCache:!1}),t=this._resolveModelId(t),(n=this._resolveEntity(t)).rolesEnabled&&n.canAdminRoles?[4,this.host.api.roleTags.findAll(t)]:[2,[]];case 1:if(!(r=a.sent())){if(e.ignoreNotFound)return[2,[]];throw new Un.NotFoundError("roleTags",t)}return i=r.map((function(e){var n=t+":"+e.tag_id;return o.host.models.RoleTag.inject(zs(zs({},e),{id:n,organizationId:t}))})),this.host.models.Organization.touch(t),[2,i]}}))}))},e.prototype.reactToUpdateEventCR=function(t){var e=t.data,n=(e=wi(e)).entity,r=e.organization_id,i=n.color,o=n.display_name,a=n.id||n.token,s=i.color_id,u=i.color_value;return this.host.models.RoleTag.inject({color:s,colorValue:u,id:r+":"+a,name:o,organizationId:r,tagId:a})},e.prototype.reactToUpdateEvent=function(t){var e=t.data;if(!this.config.condensedReplays||!e.entity){var n=(e=wi(e)).color,r=e.display_name,i=e.organization_key,o=e.token,a=n.color_id,s=n.color_value;return this.host.models.RoleTag.inject({color:a,colorValue:s,id:i+":"+o,name:r,organizationId:i,tagId:o})}this.reactToUpdateEventCR({data:e})},e.prototype.getAll=function(){return this.host.models.RoleTag.getAll()},e.prototype.getById=function(t){return this.host.models.RoleTag.get(t)},Ds([Object(Tr.decorator)()],e.prototype,"findAllForOrganization",null),e}(zi),Bs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qs=function(){return(qs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Vs=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Gs=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Hs=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bs(e,t),e.prototype.batchDelete=function(t){var e=t.ids,n=t.organizationId;return Gs(this,void 0,void 0,(function(){var t=this;return Hs(this,(function(r){switch(r.label){case 0:if(!Array.isArray(e))throw new Un.ValidationError("ids","required","ids must be an array");if(!n)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.scheduledMessages.batch({ids:e,operation:"destroy",organizationId:n})];case 1:return r.sent(),[2,e.map((function(e){return t.host.models.ScheduledMessage.inject({$deleted:!0,id:e})}))]}}))}))},e.prototype.create=function(t){var e=t.attachment,n=t.body,r=t.endDate,i=t.network,o=void 0===i?"patient":i,a=t.noReply,s=void 0!==a&&a,u=t.organizationId,c=t.recipients,l=t.repeating,d=t.sendNow,f=void 0!==d&&d,h=t.startDate,p=t.startTime,v=t.templateId,y=t.timezoneName;return Gs(this,void 0,void 0,(function(){var t=this;return Hs(this,(function(i){switch(i.label){case 0:if(this._validate({body:n,endDate:r,organizationId:u,recipients:c,repeating:l,sendNow:f,shouldCheckId:!1,startDate:h,startTime:p}),!1===["patient"].includes(o))throw new Un.ValidationError("network","invalid",'network must be "patient"');return[4,this.host.api.scheduledMessages.create({attachment:e,body:n,end_date:r,network:o,no_reply:s,organizationId:u,recipients:c,repeating:l,send_now:f,start_date:h,start_time:p,template_id:v,timezone_name:y})];case 1:return[2,i.sent().map((function(e){return e.sender_id=t.host.currentUserId,t.host.conversations.__injectCounterParty({entityAttrs:e,entityType:"scheduledMessage",organizationId:u})}))]}}))}))},e.prototype.delete=function(t,e){return Gs(this,void 0,void 0,(function(){return Hs(this,(function(n){switch(n.label){case 0:return this._validate({id:t,organizationId:e,shouldCheckInvalid:!1}),[4,this.host.api.scheduledMessages.delete(t,e)];case 1:return n.sent(),[2,this.host.models.ScheduledMessage.inject({$deleted:!0,id:t})]}}))}))},e.prototype.downloadScheduledMessageFile=function(t){var e=t.scheduleId,n=t.fileName,r=t.organizationId;return Gs(this,void 0,void 0,(function(){var t;return Hs(this,(function(i){switch(i.label){case 0:return[4,this.host.api.scheduledMessages.downloadScheduledMessageFile({scheduleId:e,fileName:n,organizationId:r})];case 1:return[4,gi({attachmentContentType:(t=i.sent()).type,blob:t,fileName:n})];case 2:return i.sent(),[2]}}))}))},e.prototype.fetchHits=function(t,e){return Gs(this,void 0,void 0,(function(){var n,r,i,o,a=this;return Hs(this,(function(s){switch(s.label){case 0:return n=["history","queue"].map((function(n){return a.search({category:n,feed:t,organizationId:e,pageSize:0})})),[4,Promise.all(n)];case 1:return r=s.sent(),i=r[0],o=r[1],[2,{history:i.metadata.totalHits,queue:o.metadata.totalHits}]}}))}))},e.prototype.find=function(t){var e=t.id,n=t.organizationId,r=t.category;return Gs(this,void 0,void 0,(function(){var t;return Hs(this,(function(i){switch(i.label){case 0:return this._validate({id:e,organizationId:n,shouldCheckInvalid:!1}),[4,this.host.api.scheduledMessages.find({id:e,organizationId:n,isHistoryCategory:"history"===r})];case 1:return t=i.sent(),[2,this.host.models.ScheduledMessage.inject(t)]}}))}))},e.prototype.findCoarseTimezone=function(t,e){return Gs(this,void 0,void 0,(function(){var n,r,i;return Hs(this,(function(o){switch(o.label){case 0:return[4,this.host.api.scheduledMessages.findCoarseTimezone(t,e)];case 1:return n=o.sent(),r=n.abbr,i=n.name,[2,{abbr:r,name:i}]}}))}))},e.prototype.getAll=function(){return this.host.models.ScheduledMessage.getAll()},e.prototype.getById=function(t){return this.host.models.ScheduledMessage.get(t)},e.prototype.search=function(t){var e=t.category,n=t.continuation,r=t.feed,i=t.network,o=void 0===i?"patient":i,a=t.organizationId,s=t.pageSize,u=t.range,c=t.sortBy,l=void 0===c?"scheduled_time":c,d=t.sortOrder,f=void 0===d?"asc":d;return Gs(this,void 0,void 0,(function(){var t,i,c;return Hs(this,(function(d){switch(d.label){case 0:return[4,this.host.search.query({query:qs(qs({},u?{range:u}:null),{schedule_message_category:e}),continuation:n,feedLevel:r,network:o,organizationId:a,pageSize:s,returnFields:[],sort:(c={},c[l]=f,c),types:["scheduledMessage"]})];case 1:return t=d.sent(),i=this._processSearchResults(t.results),[2,{metadata:t.metadata,results:i}]}}))}))},e.prototype.update=function(t){var e=t.attachment,n=t.body,r=t.endDate,i=t.id,o=t.organizationId,a=t.repeating,s=t.startDate,u=t.startTime,c=t.templateId,l=t.timezoneName;return Gs(this,void 0,void 0,(function(){var t;return Hs(this,(function(d){switch(d.label){case 0:return this._validate({body:n,endDate:r,id:i,organizationId:o,repeating:a,startDate:s,startTime:u}),[4,this.host.api.scheduledMessages.update({attachment:e,body:n,end_date:r,id:i,organizationId:o,repeating:a,start_date:s,start_time:u,template_id:c,timezone_name:l})];case 1:return t=d.sent(),[2,this.host.models.ScheduledMessage.inject(t)]}}))}))},e.prototype._processSearchResults=function(t){return t.map((function(t){return t.entity})).filter((function(t){return!t.$deleted}))},e.prototype._validate=function(t){var e=t.body,n=t.endDate,r=t.id,i=t.organizationId,o=t.recipients,a=t.repeating,s=t.sendNow,u=t.shouldCheckId,c=void 0===u||u,l=t.shouldCheckInvalid,d=void 0===l||l,f=t.startDate,h=t.startTime;if(c&&!r)throw new Un.ValidationError("id","required");if(!i)throw new Un.ValidationError("organizationId","required");if(d){if(!e||0===e.trim().length)throw new Un.ValidationError("body","invalid","body must be at least 1 character");if(!(c||Array.isArray(o)&&o.length>0&&o.length<=5))throw new Un.ValidationError("recipients","invalid","recipients must be an array of ids between 1 and 5 elements");if(!s){var p=Date.parse(f+"T"+h);if(isNaN(p))throw new Un.ValidationError("startDate","invalid","start date and time must be the correct format");if(a){if(!1===["daily","weekly","biweekly","monthly"].includes(a))throw new Un.ValidationError("repeating","invalid",'repeating must be either "daily", "weekly", "biweekly", or "monthly"');var v=Date.parse(""+n);if(isNaN(v))throw new Un.ValidationError("endDate","invalid","endDate must be the correct format")}}}},Vs([Object(Tr.decorator)()],e.prototype,"downloadScheduledMessageFile",null),Vs([Object(Tr.decorator)()],e.prototype,"fetchHits",null),Vs([Object(Tr.decorator)()],e.prototype,"find",null),Vs([Object(Tr.decorator)()],e.prototype,"findCoarseTimezone",null),Vs([Object(Tr.decorator)()],e.prototype,"search",null),e}(zi),Ys=function(){function t(t,e,n,r){this.id="searchResult:"+e+":"+t.id,this.entity=t,this.entityId=t.id,this.entityType=t.$entityType,this.metadata=r,this.organizationId=e,this.conversationId=n}return t.is=function(t){return t instanceof this},t}(),Ks=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e={}),!t||y.a.isEmpty(e.cloudfront))return t;var n=e.cloudfront,r=y.a.findKey(n,(function(e,n){return-1!==t.indexOf(n)})),i=n[r]?r+"."+e.cloudfrontDomain:"",o=n[r]?e.assetDomain+"/"+n[r]:"",a=i&&o?t.replace(i,o):t;return a=a.replace("http://","https://")},$s=function(){return($s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Xs=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Qs=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Zs={},Js=function(t){return t.$entityType+":"+t.id};function tu(t,e,n){return Xs(this,void 0,void 0,(function(){var r,i,o,a,s,u,c;return Qs(this,(function(l){switch(l.label){case 0:if(!n.placeholderEntityAllowLoading)return[2];Object.defineProperty(e,"$$loading",{value:!0,configurable:!0}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.finder(e.id)];case 2:return l.sent(),[3,4];case 3:return((i=l.sent()).code===Un.NotFoundError.CODE||i.code===Un.PermissionDeniedError.CODE)&&(r=!0),[3,4];case 4:if(delete e.$$loading,r){for(o=0,a=Object.entries(n.notFoundAttributes);o<a.length;o++)s=a[o],u=s[0],c=s[1],bi(e,u)&&(e[u]=c);Object.defineProperty(e,"$notFound",{value:!0,configurable:!0}),t.inject(e),n.onNotFound&&n.onNotFound(),n.onLoad&&n.onLoad(null),n.onFinish&&n.onFinish(null)}else delete e.$placeholder,delete e.$notFound,t.inject(e),n.onSuccess&&n.onSuccess(e),n.onLoad&&n.onLoad(e),n.onFinish&&n.onFinish(e);return[2]}}))}))}function eu(t,e,n){var r=Js(e);if(!Zs[r])return n.placeholderEntityDelayBeforeRefreshing?(Object.defineProperty(e,"$$loadingScheduled",{value:!0,configurable:!0}),void(Zs[r]=setTimeout((function(){return function(t,e,n){return Xs(this,void 0,void 0,(function(){return Qs(this,(function(r){try{return delete e.$$loadingScheduled,delete Zs[Js(e)],e.$placeholder?[2,tu(t,e,n)]:[2]}catch(t){console.error(t)}return[2]}))}))}(t,e,n)}),n.placeholderEntityDelayBeforeRefreshing))):tu(t,e,n).catch(console.error)}function nu(t,e){var n=e.finder,r=e.defaultPlaceholderAttrs,i=e.defaultNotFoundAttrs,o=e.placeholderEntityDelayBeforeRefreshing,a=e.placeholderEntityAllowLoading,s=e.shouldEnsure;t.ensureEntity=function(e,s){return void 0===s&&(s={}),"function"==typeof o&&(o=o()),"function"==typeof a&&(a=a()),function(t,e,n,r){var i;void 0===r&&(r={});var o=t.get(e);if(o)o.$placeholder?o.$$loading||o.$notFound||r.onlyPlaceholder||eu(t,o,r):(r.onExists&&r.onExists(o),r.onFinish&&r.onFinish(o));else{if(n=$s(((i={})[t.idAttribute]=e,i),n),r.onMissing&&r.onMissing(),o=t.createInstance(n),Object.defineProperty(o,"$placeholder",{value:!0,configurable:!0}),t.inject(o),r.onlyPlaceholder)return o;eu(t,o,r)}}(t,e,$s($s({},r),s.attrs),$s({finder:n,notFoundAttributes:i,placeholderEntityDelayBeforeRefreshing:o,placeholderEntityAllowLoading:a},s))},t.waitForEnsuredEntity=function(e,n){return void 0===n&&(n={}),new Promise((function(r,i){t.ensureEntity(e,$s($s({},n),{onFinish:r}))}))},t.shouldEnsure=function(e,n,r){return void 0===r&&(r={}),"string"==typeof e&&(e=t.get(e)),!e||(!(!s||!s(e,n,r))||!(!e.$placeholder||e.$$loading||n))}}var ru=function(){return(ru=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},iu=["autoForwardReceiverIds","conversationId","department","title"],ou=function(t,e){var n=e.host,r=t.defineModel("user",{replaceKeys:{avatar:"avatarUrl",blockedPersonal:"contactsMessagingBlockedByOrganizationIds",organizationKey:"organizationId",organizationToken:"organizationId",timeToLive:"messagesTTL"},defaultValues:{botRole:null,contactsMessagingBlockedByOrganizationIds:[],isPatient:!1,isPatientContact:!1,organizationIds:[],presence:pr.UNKNOWN,profileByOrganizationId:{},removedFromOrg:!1,roles:[]},skipCamelizationForKeys:["metadata"],parseAttrs:function(t){var e=t.organizationId;if(t.dndAutoForwardReceivers?t.autoForwardReceiverIds=t.dndAutoForwardReceivers.map((function(t){return t.token})):""===t.dndAutoForwardReceiver||"undefined"===t.dndAutoForwardReceiver?t.autoForwardReceiverIds=[]:void 0!==t.dndAutoForwardReceiver&&(t.autoForwardReceiverIds=[t.dndAutoForwardReceiver]),delete t.dndAutoForwardReceiver,delete t.dndAutoForwardReceivers,e){delete t.organizationId,t.organizationIds||(t.organizationIds=[]),t.organizationIds.includes(e)||t.organizationIds.push(e);var r=ru(ru({},y.a.pick(t,iu)),{userId:t.id,organizationId:e});delete t.autoForwardReceiverIds,delete t.conversationId,t.profileByOrganizationId||(t.profileByOrganizationId={}),t.profileByOrganizationId[e]=r}if("patientId"in t&&!t.patientId.startsWith("patient:")){var i="patient:"+t.patientId,o=t.patientId;t.isPatient=!t.isPatientContact,t.patientId=i,t.patientBroadcastListDetails={addedByDisplayName:t.addedByDisplayName,addedOn:t.addedOn};var a={id:i,dob:t.patientDob,gender:t.patientGender,mrn:t.patientMrn};if(t.isPatient)a.userId=t.id;else if(t.isPatientContact){var s="patientContact:"+t.id;t.patientContactId=s,n.models.User.injectPlaceholder({id:o,displayName:t.patientDisplayName,patientId:i}),n.models.PatientContact.injectPlaceholder({id:s,relation:t.relationName,userId:t.id,patientId:i}),a.userId=o}n.models.Patient.injectPlaceholder(a),delete t.addedByDisplayName,delete t.addedOn,delete t.patientDisplayName,delete t.patientDob,delete t.patientGender,delete t.patientMrn,delete t.relationName}if("metadata"in t){if("feature_service"in t.metadata&&"patient_messaging"===t.metadata.feature_service){var u=(a=t.metadata).is_patient_contact;"string"==typeof u&&"true"===u||"boolean"==typeof u&&u?(t.patientContactId="patientContact:"+t.id,t.isPatientContact=!0,n.users._injectPatientContactEntity(t,e)):(t.patientId="patient:"+t.id,t.isPatient=!0,n.users._injectPatientEntity(a,t.id,e))}"feature_service"in t.metadata&&"role"===t.metadata.feature_service&&e&&n.roles.__injectRoleFromMetadata({metadata:ru(ru({},t.metadata),{display_name:t.display_name,token:t.id}),organizationId:e}),delete t.metadata}return t.avatarUrl&&(t.avatarUrl=Ks(t.avatarUrl,n.config)),!t.displayName&&t.name&&(t.displayName=t.name),t.displayName&&Object(Ii.isPhone)(t.displayName)&&(t.displayName=Object(Ii.formatPhone)(t.displayName)),t},beforeInject:function(t,e){if(e&&(t.organizationIds&&(t.organizationIds=y.a.union(e.organizationIds,t.organizationIds)),t.profileByOrganizationId)){var n={};if(e.profileByOrganizationId)for(var r=0,i=Object.entries(e.profileByOrganizationId);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n[a]={},Object.assign(n[a],s)}for(var u=0,c=Object.entries(t.profileByOrganizationId);u<c.length;u++){var l=c[u];a=l[0],s=l[1];n[a]||(n[a]={}),Object.assign(n[a],s)}t.profileByOrganizationId=n}},afterAssignment:function(t){var e=t.profileByOrganizationId;t.contactsMessagingBlocked=t.contactsMessagingBlockedByOrganizationIds.length>0,t.isRoleBot=t.metadata.some((function(t){return"role"===t.data.feature_service})),t.shouldDisplay=!t.metadata.some((function(t){return"true"===t.data.invisible}));for(var r=0,i=Object.values(e);r<i.length;r++){var o=i[r];t.dnd||(o.autoForwardReceiverIds=[]),n.users._setMembersOnEntity(o,"autoForwardReceiverIds","autoForwardReceivers")}t.removedFromOrg&&(!t.displayName||t.$$loading||t.$$loadingScheduled||t.$notFound)&&(t.displayName="Removed User")},relations:{belongsTo:{patient:{type:"patient",foreignKey:"patientId"},patientContact:{type:"patientContact",foreignKey:"patientContactId"}},hasMany:{metadata:{type:"metadata",foreignKey:"entityId"}}}});return nu(r,{finder:function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=n.users).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return n.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return n.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading..."},defaultNotFoundAttrs:{displayName:"<User Not Found>"}}),r},au=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),su=function(){return(su=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},uu=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},cu=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},lu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},du=["avatar","conversation_id","department","description","display_name","dnd_auto_forward_receiver","dnd","first_name","group_token","is_public","last_login_time","last_name","members","name","network","num_members","organization_key","pagers","status","title","token","total_members"],fu={distributionList:yr.toServer(yr.DISTRIBUTION_LIST),distributionListMember:yr.toServer(yr.DISTRIBUTION_LIST_MEMBER),forum:yr.toServer(yr.FORUM),group:yr.toServer(yr.GROUP),messageTemplate:yr.toServer(yr.MESSAGE_TEMPLATE),organization:yr.toServer(yr.ORGANIZATION),patient_account:yr.toServer(yr.PATIENT),patientDistributionList:yr.toServer(yr.PATIENT_DISTRIBUTION_LIST),scheduledMessage:yr.toServer(yr.SCHEDULED_MESSAGE),tag:yr.toServer(yr.TAG),team:yr.toServer(yr.TEAM),user:yr.toServer(yr.USER)},hu=Object.values(fu),pu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._query=function(t){return cu(e,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,y,g,m,_,b,w,I,O,E,T,S,A,C,R,P,j,x,M,k,N,z,D,U,L,F,B,q,V;return lu(this,(function(G){switch(G.label){case 0:return e=t.continuation,n=void 0===e?null:e,r=t.excludeIds,i=void 0===r?[]:r,o=t.excludeSelf,a=void 0!==o&&o,s=t.followContinuations,u=void 0!==s&&s,c=t.network,l=void 0===c?"provider":c,d=t.params,n&&(d=su(su({},d),{continuation:n})),h=[],"patient"===l||d.type.includes("patient_account")?[4,this.host.api.search.patientQuery(d)]:[3,2];case 1:return(f=G.sent()).metadata.continuation||(f.metadata.continuation=null),[3,4];case 2:return[4,this.host.api.search.query(d)];case 3:f=G.sent(),G.label=4;case 4:for(h=f.results,p=[],v=0,y=h;v<y.length;v++)R=y[v],M=R.type,j=R.entity,x=R.organization_id,g={entityAttrs:j,organizationId:x,type:M},this.config.condensedReplays?j.conversation_id?(g.conversationId=j.conversation_id,delete j.conversation_id):g.conversationId=R.conversation_id:delete j.conversation_id,0!==Object.keys(j).length&&("tigertext:entity:account"===M?Oi(j,"status","account_status"):"tigertext:entity:tag"===M&&(j.token=x+":"+j.token),(D=j.metadata)&&this.host.metadata.__injectMetadata(j.token,x,D),p.push(g));return m=f.metadata,_=m.continuation,b=m.first_hit,w=m.total_hits,I={firstHit:b,totalHits:w},_&&(u?I.firstHit=1:I.continuation=_),O=[],E=[],T=function(t){for(var e=0,n=t.results;e<n.length;e++){var r=n[e];O.push(r)}},u&&_&&E.push(this._query(su(su({},t),{continuation:_})).then(T)),[4,Promise.all(E)];case 5:for(G.sent(),S=[],A=0,C=p;A<C.length;A++)R=C[A],P=R.conversationId,j=R.entityAttrs,x=R.organizationId,M=R.type,k=this.host.modelNameByTypeNS(M),(N="group"===k&&this.host.groups.__extractGroupTypeFromAttrs(j))===nr.FORUM&&delete j.members,z=this.host.metadata.get(j.token,x),D=z?z.data:null,"user"===(U=this.host.conversations.__injectCounterParty({conversationId:P,entityAttrs:j,entityType:k,groupType:N,hasCurrentUser:!1,organizationId:x})).$entityType&&D&&"role"===D.feature_service&&this.host.roles.__injectSearchResult({entity:U,metadata:D,organizationId:x}),i.length&&i.includes(U.id)||(L=this.host.currentUserId,a&&U.id===L||(U?(U.isRoleBot&&U.botRole&&(U=U.botRole),F=new Ys(U,x,P,D),S.unshift(F)):this.logger.warn("no entity for ",R)));for(B=0,q=S;B<q.length;B++)V=q[B],O.unshift(V);return[2,{results:O,metadata:I}]}}))}))},e._searchLocalOrganization=function(t){for(var e=t.organization,n=t.query,r=t.types,i=void 0===r?[]:r,o=e.conversations,a=e.id,s=[],u=0,c=o;u<c.length;u++){var l=c[u],d=l.counterParty,f=l.counterPartyType,h=l.metadata,p=fu[f];if(i.includes(p))if(n&&0!==Object.keys(n).length){for(var v=!0,y=0,g=Object.entries(n);y<g.length;y++){var m=g[y],_=m[0],b=m[1];_=_.split(","),b=b.toLowerCase();for(var w=!1,I=0,O=_;I<O.length;I++){var E=O[I],T="user"===f&&iu.includes(E)?d.profileByOrganizationId[a]:d;if(T){var S=T[E];if(void 0!==S&&S.toLowerCase().includes(b)){w=!0;break}}}if(!w){v=!1;break}}v&&s.push(new Ys(d,a,h))}else s.push(new Ys(d,a,h))}return s},e}return au(e,t),e.prototype.query=function(t){return cu(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,_,b,w,O,E,T,S,A,C,R,P,j,x,M,k,N,z,D,U,L,F,B,q,V,G,H,W,Y,K,$,X,Q,Z,J,tt;return lu(this,(function(et){switch(et.label){case 0:if(e=t.continuation,n=void 0===e?null:e,r=t.enabledCapabilities,i=void 0===r?[]:r,o=t.excludeEmptyLists,a=void 0!==o&&o,s=t.excludeIds,u=void 0===s?[]:s,c=t.excludeSelf,l=void 0!==c&&c,d=t.followContinuations,f=void 0!==d&&d,h=t.includeDisabled,p=void 0!==h&&h,v=t.network,g=void 0===v?"provider":v,m=t.organizationId,_=void 0===m?null:m,b=t.organizationIds,w=void 0===b?[]:b,O=t.pageSize,E=t.query,T=void 0===E?{}:E,S=t.resultsFormat,A=void 0===S?"entities":S,C=t.returnFields,R=void 0===C?du:C,P=t.sort,j=void 0===P?[]:P,x=t.types,0===(M=void 0===x?[]:x).length)throw new Un.ValidationError("types","required","no types specified");if(M=y.a.uniq(M.map((function(t){return yr.isValid(t)?yr.toServer(t):fu[t]}))),(k=y.a.difference(M,hu)).length>0)throw new Un.ValidationError("types","invalid","invalid types: "+k.join(", "));if(_&&(w=[_]),0===w.length)throw new Un.ValidationError("organizationIds","invalid","search must be done in a context of an organization");if(1===w.length&&(N=this.host.models.Organization.get(_))&&N.isContacts)return z=this._queryLocalOrganization({organization:N,query:T,types:M}),Q=z.results,D=z.metadata,[2,{results:Q,metadata:D}];if("ids"===A&&(A="tokens"),u=ki(u),U={directory:w,include_disabled:p,render_metadata:!0,results_format:A,return_fields:R,type:M},i.length&&(U.enabled_capabilities=i),j&&j.length?U.sort=j.map((function(t){return I.a.underscoreKey(t)})):"object"==typeof j&&(U.sort=j),U.type.includes("schedule_message")&&t.feedLevel&&(U.feed_level=t.feedLevel),isNaN(parseInt(O))||(U.page_size=O),L={},T&&Object.keys(T).length>0){for(F=0,B=Object.entries(T);F<B.length;F++)q=B[F],V=q[0],G=q[1],V.includes(",")&&(H=V.split(",").map(I.a.underscoreKey).join(","),L[H]=G,delete T[V]);L=su(su({},L),I.a.underscoreObject(T)),U.bool={must:L}}return a&&(M.includes("distribution_list")||M.includes("patient_distribution_list"))&&(U.bool=Object.assign({},U.bool,{must_not:{total_members:"0"}})),W=[{continuation:n,excludeIds:u,excludeSelf:l,followContinuations:f,network:g,params:U}],[4,Promise.all(W.map(this._query))];case 1:for(Y=et.sent(),K=[],$=0,X=Y;$<X.length;$++)for(Q=X[$].results,Z=0,J=Q;Z<J.length;Z++)tt=J[Z],K.push(tt);return[2,{results:K=y.a.uniqBy(K,"entity"),metadata:Y[0].metadata}]}}))}))},e.prototype._queryLocalOrganization=function(t){var e=t.organization,n=t.query,r=t.types,i=e.id,o=this._searchLocalOrganization({organization:e,query:n,types:r}),a={firstHit:1,totalHits:o.length},s=Object.keys(n);if(0===o.length&&s.length>0){var u=s.find((function(t){return t.includes("displayName")})),c=u?n[u]:n[s[0]];if(Object(mt.isEmail)(c)||Object(Ii.isPhone)(c)){var l=Object(mt.isEmail)(c)?c:Object(Ii.normalizePhoneUS)(c),d=this.host.models.User.createInstance({displayName:Object(Ii.isPhone)(c)?Object(Ii.formatPhone)(c):c,id:l,messageAnyoneRecipient:!0,organizationId:i});return{results:[new Ys(d,i,a)],metadata:a}}}return{results:o,metadata:a}},uu([Object(Tr.decorator)()],e.prototype,"query",null),e}(zi),vu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yu=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},gu=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},mu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vu(e,t),e.prototype.mounted=function(){this._fetched=!1},e.prototype.dispose=function(){this._fetched=!1},e.prototype.find=function(t,e){var n=void 0===e?{}:e,r=n.organizationId,i=n.bypassCache,o=void 0!==i&&i;return gu(this,void 0,void 0,(function(){var e,n,i;return mu(this,(function(a){switch(a.label){case 0:if(this.host.requireUser(),!t)throw new Un.ValidationError("id","required");if(!r)throw new Un.ValidationError("organizationId","required");return o||!(e=this.host.models.Team.get(t))||e.$placeholder?[4,this.host.api.teams.find(t,{organizationId:r})]:[2,e];case 1:return n=a.sent(),i=n.team,[2,e=this.host.models.Team.inject(i)]}}))}))},e.prototype.refresh=function(t,e){var n=(void 0===e?{}:e).organizationId;return gu(this,void 0,void 0,(function(){return mu(this,(function(e){switch(e.label){case 0:return[4,this.find(t,{organizationId:n,bypassCache:!0})];case 1:return[2,e.sent()]}}))}))},e.prototype.findAll=function(t){var e=(void 0===t?{}:t).bypassCache,n=void 0!==e&&e;return gu(this,void 0,void 0,(function(){var t,e,r;return mu(this,(function(i){switch(i.label){case 0:return!n&&this._fetched?[2,this.getAll()]:0!==(t=this.host.models.Organization.getAll()).length?[3,2]:[4,this.host.organizations.findAll()];case 1:t=i.sent(),i.label=2;case 2:return[4,this.host.search.query({types:["team"],organizationIds:t.map((function(t){return t.id})),query:{displayName:""},followContinuations:!0})];case 3:return e=i.sent().results,r=e.map((function(t){return t.entity})),this._fetched=!0,[2,r]}}))}))},e.prototype.findByOrganizationId=function(t){return gu(this,void 0,void 0,(function(){var e,n;return mu(this,(function(r){switch(r.label){case 0:return t=this._resolveModelId(t),[4,this.host.organizations.find(t)];case 1:return e=r.sent(),[4,this.host.search.query({types:["team"],organizationIds:e.id,query:{displayName:""},followContinuations:!0})];case 2:return n=r.sent().results,[2,n.map((function(t){return t.entity}))]}}))}))},e.prototype.refreshAll=function(){return gu(this,void 0,void 0,(function(){return mu(this,(function(t){switch(t.label){case 0:return[4,this.findAll({bypassCache:!0})];case 1:return[2,t.sent()]}}))}))},e.prototype.getAll=function(){return this.host.models.Team.getAll()},e.prototype.create=function(t){var e=t.avatar,n=t.canMembersLeave,r=void 0===n||n,i=t.canRequestToJoin,o=void 0===i||i,a=t.description,s=t.displayName,u=t.memberIds,c=void 0===u?[]:u,l=t.organizationId;return gu(this,void 0,void 0,(function(){var t,n,i,u=this;return mu(this,(function(d){switch(d.label){case 0:if(this.host.requireUser(),!l)throw new Un.ValidationError("organizationId","required");if(c.length<2)throw new Un.ValidationError("memberIds","required to have 2 or more IDs");return[4,Promise.all(c.map(this.host.roles.__resolveRoleId).filter(Boolean).map((function(t){return u._resolveModelIdWithTypes(t,"user")})).map((function(t){return u.host.users.find(t,{organizationId:l})})))];case 1:return t=d.sent(),n=Xi.a.call(t),c=n.map((function(t){return u._resolveModelIdWithTypes(t,"user")})),[4,this.host.api.teams.create({avatar:e,canMembersLeave:r,canRequestToJoin:o,description:a,displayName:s,memberIds:c,organizationId:l})];case 2:return i=d.sent(),[2,this.host.models.Team.inject(i.team)]}}))}))},e.prototype.update=function(t){var e=t.avatar,n=t.canMembersLeave,r=void 0===n||n,i=t.canRequestToJoin,o=void 0===i||i,a=t.description,s=t.displayName,u=t.id,c=t.memberIds,l=void 0===c?[]:c,d=t.organizationId;return gu(this,void 0,void 0,(function(){var t;return mu(this,(function(n){switch(n.label){case 0:if(this.host.requireUser(),!u)throw new Un.ValidationError("id","required");if(!d)throw new Un.ValidationError("organizationId","required");if(l.length<2)throw new Un.ValidationError("memberIds","required to have 2 or more IDs");return l=l.map(this.host.roles.__resolveRoleId),[4,this.host.api.teams.update({avatar:e,canMembersLeave:r,canRequestToJoin:o,description:a,displayName:s,id:u,memberIds:l,organizationId:d})];case 1:return t=n.sent(),[2,this.host.models.Team.inject(t.team)]}}))}))},e.prototype.delete=function(t,e){var n=e.organizationId;return gu(this,void 0,void 0,(function(){var e,r;return mu(this,(function(i){switch(i.label){case 0:if(!n)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("teamId","required");return[4,this.host.api.teams.delete(t,{organizationId:n})];case 1:return 204===(e=i.sent())&&(r=this.host.models.Team.get(t))&&this.host.models.Team.eject(r),[2,e]}}))}))},e.prototype.requestToJoin=function(t,e){var n=e.requestedById,r=e.organizationId;return gu(this,void 0,void 0,(function(){var e;return mu(this,(function(i){switch(i.label){case 0:if(!r)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("teamId","required");if(!n)throw new Un.ValidationError("requestedById","required");return[4,this.host.api.teams.requestToJoin(t,{requestedById:n,organizationId:r})];case 1:return 204===(e=i.sent())&&this.host.models.Team.inject({id:t,hasCurrentUserPending:!0}),[2,e]}}))}))},e.prototype.acceptJoinRequest=function(t,e){var n=e.teamId,r=e.organizationId,i=e.handledAsId;return gu(this,void 0,void 0,(function(){return mu(this,(function(e){switch(e.label){case 0:if(!r)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("teamId","required");if(!t)throw new Un.ValidationError("requestId","required");if(!i)throw new Un.ValidationError("handledAsId","required");return[4,this.host.api.teams.updateJoinRequest(t,{teamId:n,organizationId:r,handledAsId:i,status:"accepted"})];case 1:return[2,e.sent()]}}))}))},e.prototype.declineJoinRequest=function(t,e){var n=e.teamId,r=e.organizationId,i=e.handledAsId;return gu(this,void 0,void 0,(function(){return mu(this,(function(e){switch(e.label){case 0:if(!r)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("teamId","required");if(!t)throw new Un.ValidationError("requestId","required");if(!i)throw new Un.ValidationError("handledAsId","required");return[4,this.host.api.teams.updateJoinRequest(t,{teamId:n,organizationId:r,handledAsId:i,status:"declined"})];case 1:return[2,e.sent()]}}))}))},e.prototype.leave=function(t,e){var n=(void 0===e?{}:e).organizationId;return gu(this,void 0,void 0,(function(){var e;return mu(this,(function(r){switch(r.label){case 0:if(!t)throw new Un.ValidationError("teamId","required");if(!n)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.teams.leave(t,{organizationId:n})];case 1:return 204===(e=r.sent())&&this.refresh(t,{organizationId:n}),[2,e]}}))}))},e.prototype._setHasUserPending=function(t){if(t.pendingRequestUserIds)for(var e=0,n=t.pendingRequestUserIds;e<n.length;e++){if(n[e]===this.host.currentUserId)return void(t.hasCurrentUserPending=!0)}},e.prototype.__injectTeamRequest=function(t){if(!t.id)return null;var e;if(t.created_by&&t.created_by.token&&(e=this.host.models.User.inject(t.created_by)),t.team&&t.team.id){var n=t.status,r=Object.assign({},t.team);e&&e.id===this.host.currentUserId&&("accepted"===n?(r.hasCurrentUserBeenDeclined=!1,r.hasCurrentUserPending=!1):"declined"===n&&(r.hasCurrentUserBeenDeclined=!0,r.hasCurrentUserPending=!1)),this.host.models.Team.inject(r)}return this.host.models.TeamRequest.inject(t)},e.prototype.resetDeclinedUserOnTeam=function(t){this.host.models.Team.inject({id:t,hasCurrentUserBeenDeclined:!1})},yu([Object(Tr.decorator)()],e.prototype,"find",null),yu([Object(Tr.decorator)()],e.prototype,"refresh",null),yu([Object(Tr.decorator)()],e.prototype,"findAll",null),yu([Object(Tr.decorator)()],e.prototype,"findByOrganizationId",null),yu([Object(Tr.decorator)()],e.prototype,"refreshAll",null),e}(zi),bu=n(61),wu=n.n(bu),Iu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ou=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Eu=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Tu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Su=gr.GLOBAL,Au=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._onMessageSending=function(t){e.stopTyping(t.counterPartyId,{senderId:t.senderId})},e}return Iu(e,t),e.prototype.mounted=function(){this._lastStartTypingAPICalls={},this._lastStopTypingAPICalls={},this._typers={},this._currentUserTyping={},this.host.on("message:sending",this._onMessageSending)},e.prototype.dispose=function(){Ki.a.call(Gi.a.call(Ki.a.call(wu.a.call(this._typers),y.a.values)),"timer").forEach((function(t){return null!==t&&clearTimeout(t)})),Ki.a.call(wu.a.call(this._currentUserTyping),"timer").forEach((function(t){return null!==t&&clearTimeout(t)})),this._lastStartTypingAPICalls=null,this._lastStopTypingAPICalls=null,this._typers=null,this.host.removeListener("message:sending",this._onMessageSending)},e.prototype.reactToIsTypingEvent=function(t){var e,n=this,r=t.data;if(this.host.requireUser(),(e=r.proxy_token?r.proxy_token:r.sender_token)!==this.host.currentUserId){var i=r.group_token,o=r.org_token,a=i||o||null,s=i?gr.GROUP:o?gr.ORGANIZATION:Su,u="typing"===r.status;this.host.models.User.ensureEntity(e,{onlyPlaceholder:!1}),s===Su?y.a.get(this.host,"currentUser.organizationIds",[]).forEach((function(t){n._setTypingStatusOfUser(t,gr.ORGANIZATION,e,u)})):this._setTypingStatusOfUser(a,s,e,u)}},e.prototype.startTyping=function(t,e){var n=void 0===e?{}:e,r=n.autoStopAfterTimeout,i=n.senderId,o=n.organizationId;return Eu(this,void 0,void 0,(function(){var e,n,a=this;return Tu(this,(function(s){switch(s.label){case 0:return void 0===t?[2]:(t=this._resolveModelId(t),i=this._resolveModelId(i),this.host.requireUser(),[4,this._sendStartTyping(t,i,o)]);case 1:return s.sent(),(e=this._currentUserTyping[t])?(clearTimeout(this._currentUserTyping[t].timer),e.timer=null):(e={},this._currentUserTyping[t]=e),n="number"==typeof r?r:this.host.config.clearTypingStatusTimeout,e.timer=setTimeout((function(){a.logger.info("auto stop typing for current user",t),a.stopTyping(t,{senderId:i})}),n),[2]}}))}))},e.prototype._sendStartTyping=function(t,e,n){return Eu(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Tu(this,(function(c){switch(c.label){case 0:return this._lastStartTypingAPICalls[t]?(r=this._lastStartTypingAPICalls[t],i=r.expiresAt,o=r.retVal,a=r.lastSenderId,e===a?[3,2]:[4,this.stopTyping(t,{senderId:a})]):[3,3];case 1:c.sent(),c.label=2;case 2:if(to()().isBefore(i))return[2,o];c.label=3;case 3:return[4,this.host.api.typingStatus.startTyping(t,e,n)];case 4:return s=c.sent(),u=to()().add(this.config.clearTypingStatusThrottleDelay,"ms"),this._lastStartTypingAPICalls[t]={expiresAt:u,retVal:s,lastSenderId:e},[2,s]}}))}))},e.prototype.stopTyping=function(t,e){var n=(void 0===e?{}:e).senderId;return Eu(this,void 0,void 0,(function(){var e;return Tu(this,(function(r){switch(r.label){case 0:return void 0===t?[2]:(t=this._resolveModelId(t),n=this._resolveModelId(n),this.host.requireUser(),(e=this._currentUserTyping[t])&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null),[4,this._sendStopTyping(t,n)]);case 1:return r.sent(),[2]}}))}))},e.prototype._sendStopTyping=function(t,e){return Eu(this,void 0,void 0,(function(){var n,r,i,o,a;return Tu(this,(function(s){switch(s.label){case 0:return(n=this._lastStopTypingAPICalls[t])&&(r=n.expiresAt,i=n.retVal,to()().isBefore(r))?[2,i]:[4,this.host.api.typingStatus.stopTyping(t,e)];case 1:return o=s.sent(),a=to()().add(this.config.clearTypingStatusThrottleDelay,"ms"),this._lastStopTypingAPICalls[t]={expiresAt:a,retVal:o,senderId:e},[2,o]}}))}))},e.prototype._setTypingStatusOfUser=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1),t=t||gr.GLOBAL;var a=this._typers[t];if(r){a||(a={},this._typers[t]=a);var s=(u=a[n])&&null!==u.timer;if(u?clearTimeout(u.timer):(u={},a[n]=u),u.timer=setTimeout((function(){o.logger.info("auto stop typing for other typer",t,n),o._setTypingStatusOfUser(t,e,n,!1,!0)}),this.host.config.clearTypingStatusTimeout),s)return}else{var u;if(!(s=(u=a&&a[n])&&null!==u.timer))return;clearTimeout(u.timer),u.timer=null}this.emit("change",{userId:n,contextId:t,contextType:e,isTyping:r,timedOut:i})},e.prototype.isUserTyping=function(t,e){var n=this,r=(void 0===e?{}:e).organizationId;return t=this._resolveModelId(t),r?this._isUserTypingInContext(r,t):y.a.get(this.host,"currentUser.organizationIds",[]).some((function(e){return n._isUserTypingInContext(e,t)}))},e.prototype.isCurrentUserTyping=function(t){t=this._resolveModelId(t);var e=this._currentUserTyping[t];return!!e&&null!==e.timer},e.prototype.isUserTypingInGroup=function(t,e){return e=this._resolveModelId(e),t=this._resolveModelId(t),this._isUserTypingInContext(t,e)},e.prototype._isUserTypingInContext=function(t,e){var n=this._typers[t],r=n&&n[e];return!!r&&null!==r.timer},Ou([Object(Tr.decorator)()],e.prototype,"_sendStartTyping",null),Ou([Object(Tr.decorator)()],e.prototype,"_sendStopTyping",null),e}(zi),Cu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ru=function(){return(Ru=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Pu=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ju=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},xu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cu(e,t),e.prototype.dispose=function(){Tr.decorator.clear(this._findAll)},e.prototype.findAll=function(t){var e=void 0===t?{}:t,n=e.userId,r=void 0===n?this.host.currentUserId:n,i=e.organizationId;return ju(this,void 0,void 0,(function(){return xu(this,(function(t){return this.host.requireUser(),[2,this._findAll(r,i)]}))}))},e.prototype.refreshAll=function(t){var e=void 0===t?{}:t,n=e.userId,r=void 0===n?this.host.currentUserId:n,i=e.organizationId;return ju(this,void 0,void 0,(function(){return xu(this,(function(t){return this.host.requireUser(),Tr.decorator.clear(this._findAll),[2,this._findAll(r,i)]}))}))},e.prototype._findAll=function(t,e){return void 0===e&&(e=this._pickOrganizationId()),ju(this,void 0,void 0,(function(){var n,r,i=this;return xu(this,(function(o){switch(o.label){case 0:return[4,this.host.api.userRoles.findAll(t,e)];case 1:return n=o.sent(),r={userRoles:[],productRoles:[]},n.forEach((function(e){var n=e.organization,o=e.product;if(n){var a=n.organization_id,s=i.host.organizations.getById(a),u=i.host.models.UserRoles.inject(Ru({id:i._getOrganizationKey({organizationId:a,userId:t}),userId:t},n));s&&i.host.models.Organization.touch(s),r.userRoles.push(u)}else if(o){var c=o.product_id,l=i.host.models.ProductRoles.inject(Ru({id:i._getProductKey({productId:c,userId:t}),userId:t},o));i.host.models.Product.inject({id:c}),r.productRoles.push(l)}})),[2,r]}}))}))},e.prototype._pickOrganizationId=function(){var t=this.host.organizations.getAll();return 0===t.length?"placeholder":t[0].id},e.prototype.getAllUserRoles=function(){return this.host.models.UserRoles.getAll()},e.prototype.getByOrganizationId=function(t,e){var n=(void 0===e?{}:e).userId,r=void 0===n?this.host.currentUserId:n,i=this._getOrganizationKey({organizationId:t,userId:r});return this.host.models.UserRoles.get(i)},e.prototype._getOrganizationKey=function(t){var e=t.organizationId,n=t.userId;return"userRoles:"+(void 0===n?this.host.currentUserId:n)+":"+e},e.prototype.getAllProductRoles=function(){return this.host.models.ProductRoles.getAll()},e.prototype.getByProductId=function(t,e){var n=(void 0===e?{}:e).userId,r=void 0===n?this.host.currentUserId:n,i=this._getProductKey({productId:t,userId:r});return this.host.models.ProductRoles.get(i)},e.prototype._getProductKey=function(t){var e=t.productId,n=t.userId;return"productRoles:"+(void 0===n?this.host.currentUserId:n)+":"+e},Pu([Object(Tr.decorator)()],e.prototype,"findAll",null),Pu([Object(Tr.decorator)()],e.prototype,"refreshAll",null),Pu([Object(Tr.decorator)({memoize:!0,serializeArguments:function(t){return t[0]}})],e.prototype,"_findAll",null),e}(zi),ku=n(83),Nu=n.n(ku),zu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Du=function(){return(Du=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Uu=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Lu=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Fu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Bu=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},qu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROFILE_ATTRIBUTES_PER_ORG=iu,e._setMembersOnEntity=function(t,n,r){void 0===n&&(n="memberIds"),void 0===r&&(r="members");var i=t,o=i[n],a=i[r];if(o){a?a.length=0:a=[];for(var s=0,u=o;s<u.length;s++){var c=u[s],l=e.host.models.User.get(c);l&&a.push(l)}}else a=null;t[r]=a},e._injectPatientEntity=function(t,n,r){var i="patient:"+n;if(t.id=i,t.organizationId=r,t.userId=n,e.host.models.Patient.inject(t),t.patient_contacts)for(var o=0,a=t.patient_contacts;o<a.length;o++){var s=a[o],u=s.entity?s.entity:s,c=u.token||u.id;u.id=c,u.patientId=i,e.host.models.User.inject(u)}},e._injectPatientContactEntity=function(t,n){t.entity&&(t=t.entity);var r=t.metadata,i={editVersion:r.edit_version,id:"patientContact:"+t.id,organizationId:n,patientDob:r.patient_dob,patientGender:r.patient_gender,patientId:"patient:"+r.patient_id,patientMrn:r.patient_mrn,phoneNumber:r.phone_number,relationName:r.relation_name,smsOptedOut:r.sms_opted_out,userId:t.id};e.host.models.PatientContact.inject(i)},e._onChangeMetadata=function(t,n){var r=n.entityId,i=e.host.models.User.get(r);i&&e.host.models.User.inject(i)},e._onChangeRole=function(t,n){var r=e.host.currentUserId,i=n.botUserId,o=n.memberIds;o||(o=[]),i&&e.host.models.User.injectPlaceholder({id:i,botRole:n});var a={},s=e._roleMemberIds[n.id];if(s)for(var u=0,c=s;u<c.length;u++){var l=c[u];if((p=e.host.models.User.get(l))&&!o.includes(l)){var d=(_=p.roles).indexOf(n);d>-1&&(_.splice(d,1),a[l]=_)}}e._roleMemberIds[n.id]=o;for(var f=0,h=o;f<h.length;f++){var p;l=h[f];(_=(p=e.host.models.User.get(l))?p.roles:[]).includes(n)||(_.push(n),a[l]=_)}for(var v=0,y=Object.entries(a);v<y.length;v++){var g=y[v],m=g[0],_=g[1];e.host.models.User.injectPlaceholder({id:m,roles:_}),m===r&&e._onChangeCurrentUserRole(n)}},e._onRemoveRole=function(t,n){var r=n.botUserId;r&&e.host.models.User.injectPlaceholder({id:r,botRole:null});var i=e._roleMemberIds[n.id];if(i){for(var o=0,a=i;o<a.length;o++){var s=a[o],u=e.host.models.User.get(s);if(u){var c=u.roles,l=c.indexOf(n);l>-1&&(c.splice(l,1),e.host.models.User.inject(u))}}delete e._roleMemberIds[n.id]}},e.getPreferences=function(t){return void 0===t&&(t=e.host.currentUserId),Lu(e,void 0,void 0,(function(){return Fu(this,(function(e){switch(e.label){case 0:if(!t)throw new Un.ValidationError("userId","required");return[4,this.host.api.users.getPreferences(t)];case 1:return[2,e.sent()]}}))}))},e.editPreferences=function(t){var n=t.quickReplies,r=void 0===n?[]:n,i=t.organizationId,o=t.userId,a=void 0===o?e.host.currentUserId:o;return Lu(e,void 0,void 0,(function(){return Fu(this,(function(t){switch(t.label){case 0:if(!r)throw new Un.ValidationError("quickReplies","required");if(!i)throw new Un.ValidationError("organizationId","required");if(!a)throw new Un.ValidationError("userId","required");return[4,this.host.api.users.editPreferences({organizationId:i,quickReplies:r,userId:a})];case 1:return[2,t.sent()]}}))}))},e}return zu(e,t),e.prototype.mounted=function(){this._defaultOrganizationId=null,this._roleMemberIds={},this.host.models.Metadata.on("afterInject",this._onChangeMetadata),this.host.models.Metadata.on("afterEject",this._onChangeMetadata),this.host.models.Role.on("afterInject",this._onChangeRole),this.host.models.Role.on("afterEject",this._onRemoveRole)},e.prototype.dispose=function(){this._defaultOrganizationId=null,this._roleMemberIds={},this.host.models.Metadata.removeListener("afterInject",this._onChangeMetadata),this.host.models.Metadata.removeListener("afterEject",this._onChangeMetadata),this.host.models.Role.removeListener("afterInject",this._onChangeRole),this.host.models.Role.removeListener("afterEject",this._onRemoveRole)},e.prototype.signInWithMagicToken=function(t,e){void 0===e&&(e={});var n={Authorization:"magic-token "+t};return this._signInWithHeaders(n,e)},e.prototype.signInWithApiKeyAndSecret=function(t,e,n){void 0===n&&(n={});var r=this.httpClient.getAuthHeaders({key:t,secret:e});return this._signInWithHeaders(r,n)},e.prototype.signIn=function(t,e,n){void 0===n&&(n={}),Object(Ii.isPhone)(t)&&(t=Object(Ii.normalizePhoneUS)(t));var r={Authorization:this.getSignInAuthHeader(t,e)};return this._signInWithHeaders(r,n)},e.prototype._checkPartnerName=function(){if(!this.config.partnerName)throw new Error("`partnerName` must be supplied as a config option for `new TigerConnect.Client()`")},e.prototype._signInWithHeaders=function(t,e){return void 0===e&&(e={}),Lu(this,void 0,void 0,(function(){var n,r;return Fu(this,(function(i){switch(i.label){case 0:return this._checkPartnerName(),[4,this.host.api.users.signIn(t,e)];case 1:return n=i.sent(),r=this.host.models.User.inject(n.data.user),[2,{auth:n.data.auth,user:r}]}}))}))},e.prototype.checkLogin=function(t,e){return void 0===e&&(e={udid:void 0}),Lu(this,void 0,void 0,(function(){return Fu(this,(function(n){switch(n.label){case 0:return this._checkPartnerName(),[4,this.host.api.users.checkLogin(t,e)];case 1:return[2,n.sent().data]}}))}))},e.prototype.signUp=function(t){return void 0===t&&(t={udid:void 0,email:void 0,password:void 0,countryCode:void 0,version:void 0}),Lu(this,void 0,void 0,(function(){var e,n,r,i;return Fu(this,(function(o){switch(o.label){case 0:return[4,this.host.api.users.signUp(t)];case 1:return e=o.sent(),n=this.host.models.User.inject(e.data.user),r=e.data.auth,i={user:n,auth:r},this.host.emit("signUp",i),[2,i]}}))}))},e.prototype.signOut=function(t){var e=void 0===t?{}:t,n=e.fromServer,r=void 0!==n&&n,i=e.resetClient,o=void 0===i||i;return Lu(this,void 0,void 0,(function(){var t,e,n,i;return Fu(this,(function(a){switch(a.label){case 0:if(!this.host.isSignedIn)return[2,!1];t=!1,e=!1,this.host.emit("signingOut",{fromServer:r,resetClient:o}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.host.api.users.signOut()];case 2:return n=a.sent(),t=!0,[3,4];case 3:return i=a.sent(),e=!0,this.httpClient.isUnauthorizedError(i)?(t=!0,[3,4]):[2,Promise.reject(i)];case 4:return t&&(this.host._setCurrentUser(null),this.host._removeAuth()),this.host.emit("signedOut",{externalLogoutUrl:e?null:n.data.external_logout_url,fromServer:r,resetClient:o&&t,signedOut:t}),[2,t]}}))}))},e.prototype.createQRCode=function(){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.qrCode.create()];case 1:return[2,t.sent()]}}))}))},e.prototype.findOrCreate=function(t,e){return void 0===e&&(e={}),Lu(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Fu(this,(function(c){switch(c.label){case 0:return n=e.organizationId,r=!1,n?[4,this.host.organizations._findAll()]:[3,2];case 1:c.sent(),i=this.host.models.Organization.get(n),r=!!i&&i.isContacts,c.label=2;case 2:return(o=r&&(Object(mt.isEmail)(t)||Object(Ii.isPhone)(t)))&&t!==this.host.currentUserId&&!this.getById(t)?[3,4]:[4,this.find(t,{organizationId:n,ignoreNotFound:!0})];case 3:a=c.sent(),c.label=4;case 4:return a||!o?[3,8]:[4,this.host.api.users.lookup(t)];case 5:return(s=c.sent())?this.config.condensedReplays?[3,7]:[4,this.find(s.token,{organizationId:n})]:[2,null];case 6:return a=c.sent(),[3,8];case 7:(u=s.entity).conversationId=s.conversation_id,u.organizationId=s.organization_id,a=this.host.models.User.inject(u),c.label=8;case 8:return[2,a]}}))}))},e.prototype.signOutAllDevices=function(){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.users.wipe(this.host.currentUserId)];case 1:return[2,t.sent()]}}))}))},e.prototype.findMe=function(t){return void 0===t&&(t={}),Lu(this,void 0,void 0,(function(){var e,n,r,i;return Fu(this,(function(o){switch(o.label){case 0:return t=y.a.defaults(t,{ignoreNotFound:!1}),this.host.requireUser(),[4,this.host.api.users.findMe()];case 1:if(e=o.sent())return e.entity&&(e.entity.organization_token=e.organization_id,e=e.entity),n=e.metadata,r=e.organization_token,this._defaultOrganizationId=r,i=this.host.models.User.inject(e),n&&this.host.metadata.__injectMetadata(i.id,r,n),[2,i];if(!t.ignoreNotFound)throw new Un.NotFoundError(this.host.models.User.name,"me");return[2]}}))}))},e.prototype.findDefaultOrganizationId=function(){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(t){switch(t.label){case 0:return this._defaultOrganizationId?[3,2]:[4,this.findMe()];case 1:t.sent(),t.label=2;case 2:return[2,this._defaultOrganizationId]}}))}))},e.prototype.findMyProfilesForAllOrganizations=function(t){return void 0===t&&(t={}),Lu(this,void 0,void 0,(function(){var t;return Fu(this,(function(e){switch(e.label){case 0:return[4,this.host.organizations.findAll()];case 1:return t=e.sent().map((function(t){return t.id})),[2,this.findProfileForOrganizations(this.host.currentUserId,t)]}}))}))},e.prototype.find=function(t,e){return void 0===e&&(e={}),Lu(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h,p,v=this;return Fu(this,(function(g){switch(g.label){case 0:return e=y.a.defaults(e,{bypassCache:!1,ignoreNotFound:!1}),this.host.requireUser(),n=this.host.models.User.get(t),i=!0,e.organizationIds?(r=e.organizationIds,[3,4]):[3,1];case 1:return e.organizationId?(r=[e.organizationId],[3,4]):[3,2];case 2:return i=!1,r=n?Bu(n.organizationIds):[],[4,this.findDefaultOrganizationId()];case 3:o=g.sent(),r.includes(o)||r.push(o),g.label=4;case 4:for(a=Du(Du({},e),{ignoreNotFound:!0}),s=[],u=0,c=r;u<c.length;u++)l=c[u],s.push(this.__find(t,l,a));return[4,Promise.all(s)];case 5:return d=g.sent(),f=d.map((function(t){return t.data})).find(Boolean),h=!!d.find((function(t){return!t.cached})),f&&f.id&&(n=this.host.models.User.get(f.id)),!f||t===f.id||i?[3,7]:(p=y.a.difference(n.organizationIds,r)).length>0?[4,Promise.all(p.map((function(e){return v.__find(t,e,a)})))]:[3,7];case 6:g.sent(),g.label=7;case 7:if(this.host.models.User.removePlaceholder({entity:n,attrs:f}),h&&!e.ignoreNotFound&&!f)throw new Un.NotFoundError(this.host.models.User.name,t);return[2,n]}}))}))},e.prototype.__find=function(t,e,n){return void 0===n&&(n={}),Lu(this,void 0,void 0,(function(){var r,i,o,a,s,u=this;return Fu(this,(function(c){switch(c.label){case 0:return n=y.a.defaults(n,{bypassCache:!1,ignoreNotFound:!1}),r=this.host.models.User.get(t),n.bypassCache?[3,2]:r&&!r.$placeholder&&r.profileByOrganizationId&&r.profileByOrganizationId[e]?[4,this.host.metadata.find(t,e,n)]:[3,2];case 1:return c.sent(),this.host.models.User.touch(t),[2,{cached:!0,user:r}];case 2:return[4,this.host.api.users.find(t,{organizationId:e})];case 3:if((i=c.sent())&&(i.entity&&(i.entity.organization_token=i.organization_id,i.entity.conversation_id=i.conversation_id,i=i.entity),i.token&&(i.id=i.token,delete i.token),o=i.dnd_auto_forward_receivers,a=void 0===o?[]:o,s=i.metadata,a.forEach((function(t){return u.host.models.User.injectPlaceholder(t)})),i.dnd_auto_forward_receivers=a,r=this.host.models.User.inject(i),s&&("role"===s.feature_service?this.host.roles.__injectSearchResult({entity:r,metadata:s,organizationId:e}):this.host.metadata.__injectMetadata(r.id,e,s))),!n.ignoreNotFound&&!i)throw new Un.NotFoundError(this.host.models.User.name,t);return[2,{cached:!1,data:i,user:r}]}}))}))},e.prototype.findProfileForOrganizations=function(t,e,n){return void 0===n&&(n={}),Lu(this,void 0,void 0,(function(){var r;return Fu(this,(function(i){switch(i.label){case 0:return n=y.a.defaults(n,{bypassCache:!1,ignoreNotFound:!1}),[4,this.find(t,Du(Du({},n),{organizationIds:e}))];case 1:return[2,(r=i.sent())?r.profileByOrganizationId:r]}}))}))},e.prototype.findProfileForOrganization=function(t,e,n){return void 0===n&&(n={}),Lu(this,void 0,void 0,(function(){var r;return Fu(this,(function(i){switch(i.label){case 0:return n=y.a.defaults(n,{bypassCache:!1,ignoreNotFound:!0}),"string"!=typeof e&&(e=e.id),[4,this.find(t,Du(Du({},n),{organizationId:e}))];case 1:return r=i.sent(),[2,r&&r.profileByOrganizationId&&r.profileByOrganizationId[e]||null]}}))}))},e.prototype.ensureUsers=function(t,e){return Lu(this,void 0,void 0,(function(){var n,r,i,o;return Fu(this,(function(a){switch(a.label){case 0:for(this.host.requireUser(),"string"!=typeof e&&(e=e.id),n=[],r=0,i=t;r<i.length;r++)o=i[r],n.push(this.find(o,{organizationId:e,ignoreNotFound:!0}));return[4,Promise.all(n)];case 1:return[2,a.sent()]}}))}))},e.prototype.refresh=function(t){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(e){switch(e.label){case 0:return[4,this.find(t,{ignoreNotFound:!0,bypassCache:!0})];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(t){var e=t.firstName,n=t.lastName,r=t.displayName,i=t.status,o=t.dnd,a=t.dndText,s=t.avatarFile,u=t.removeAvatar;return Lu(this,void 0,void 0,(function(){var t,c,l;return Fu(this,(function(d){switch(d.label){case 0:return this.host.requireUser(),t=Nu.a.call({firstName:e,lastName:n,displayName:r,status:i,dnd:o,dndText:a,avatarFile:s,removeAvatar:u},(function(t,e){return void 0===t})),[4,this.host.api.users.update(this.host.currentUserId,t)];case 1:return c=d.sent(),l=y.a.omit(t,"removeAvatar","avatarFile"),u?l.avatarUrl=null:void 0!==c.avatarUrl&&(l.avatarUrl=c.avatarUrl),[2,this.host.models.User.inject(Du({id:this.host.currentUserId},l))]}}))}))},e.prototype.updatePassword=function(t,e){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(n){return this.host.requireUser(),[2,this.host.api.users.updatePassword(this.host.currentUserId,t,e,this.config.productKey)]}))}))},e.prototype.setAutoForward=function(t,e){return Lu(this,void 0,void 0,(function(){var n;return Fu(this,(function(r){switch(r.label){case 0:return this.host.requireUser(),n=this.host.currentUser.dnd,[4,this.host.api.users.setAutoForward(this.host.currentUserId,t,{dnd:n,receiverId:e})];case 1:return r.sent(),[2,!0]}}))}))},e.prototype.removeAutoForward=function(t){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(e){switch(e.label){case 0:return this.host.requireUser(),[4,this.host.api.users.removeAutoForward(this.host.currentUserId,t)];case 1:return e.sent(),[2,!0]}}))}))},e.prototype.setEulaAccepted=function(t,e){return Lu(this,void 0,void 0,(function(){return Fu(this,(function(n){switch(n.label){case 0:return this.host.requireUser(),[4,this.host.api.users.setEulaAccepted(this.host.currentUserId,t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.setAwayMessage=function(t,e){return void 0===e&&(e={}),Lu(this,void 0,void 0,(function(){var n,r,i;return Fu(this,(function(o){switch(o.label){case 0:return n=e.dnd,r=e.dndText,i=void 0===r?"":r,this.host.requireUser(),[4,this.host.api.users.setAwayMessage(this.host.currentUserId,t,{dnd:n,dndText:i})];case 1:return o.sent(),[2]}}))}))},e.prototype.getSignInAuthHeader=function(t,e){return this.host.api.users.getSignInAuthHeader(this.config.productKey,t,e)},e.prototype.getAll=function(){return this.host.models.User.getAll()},e.prototype.getById=function(t){return this.host.models.User.get(t)},e.prototype.getMultiById=function(t){return this.host.models.User.getMulti(t)},e.prototype._onChangeCurrentUserRole=function(t){var e=t.botUser;if(e){var n=this.host.roles._roleConversations[e.id];if(n)for(var r=0,i=n;r<i.length;r++){for(var o=i[r],a=!1,s=0,u=o.content;s<u.length;s++){var c=u[s];c.shouldEnsureRecipientStatus=!0,this.host.models.Message.inject(c),a=!0}a||this.host.models.Conversation.inject(o)}}},e.prototype.reactToUserPreferencesEvent=function(t){this.emit("preferences:change",I.a.camelizeObject(t))},e.PROFILE_ATTRIBUTES_PER_ORG=iu,Uu([Object(Tr.decorator)({serializeArguments:function(t){return""}})],e.prototype,"signOut",null),Uu([Object(Tr.decorator)()],e.prototype,"findOrCreate",null),Uu([Object(Tr.decorator)()],e.prototype,"signOutAllDevices",null),Uu([Object(Tr.decorator)()],e.prototype,"findMe",null),Uu([Object(Tr.decorator)()],e.prototype,"findMyProfilesForAllOrganizations",null),Uu([Object(Tr.decorator)()],e.prototype,"find",null),Uu([Object(Tr.decorator)()],e.prototype,"__find",null),Uu([Object(Tr.decorator)()],e.prototype,"refresh",null),e}(zi),Vu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gu=function(){return(Gu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Hu=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Wu=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vu(e,t),e.prototype.findAll=function(t,e){var n=(void 0===e?{showAll:!1}:e).showAll;return Hu(this,void 0,void 0,(function(){var e=this;return Wu(this,(function(r){switch(r.label){case 0:if(!t)throw new Un.ValidationError("organizationId","required");return[4,this.host.api.virtualWaitingRoom.findAll(t,{showAll:n})];case 1:return[2,r.sent().content.map((function(t){return e.host.models.VirtualWaitingRoom.inject(t)}))]}}))}))},e.prototype.find=function(t,e){return Hu(this,void 0,void 0,(function(){var n;return Wu(this,(function(r){switch(r.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("room_id","required");return[4,this.host.api.virtualWaitingRoom.find(t,e)];case 1:return n=r.sent(),[2,this.host.models.VirtualWaitingRoom.inject(n)]}}))}))},e.prototype.create=function(t,e){var n=e.staff,r=e.name;return Hu(this,void 0,void 0,(function(){var e;return Wu(this,(function(i){switch(i.label){case 0:if(!t)throw new Un.ValidationError("organizationId","required");if(!n)throw new Un.ValidationError("staff","required");if(!r)throw new Un.ValidationError("name","required");return[4,this.host.api.virtualWaitingRoom.create(t,{staff:n,name:r})];case 1:return e=i.sent(),[2,this.host.models.VirtualWaitingRoom.inject(e)]}}))}))},e.prototype.update=function(t,e,n){var r=n.staff,i=n.name,o=n.status,a=n.version;return Hu(this,void 0,void 0,(function(){var n;return Wu(this,(function(s){switch(s.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("room_id","required");return[4,this.host.api.virtualWaitingRoom.update(t,e,{staff:r,name:i,status:o,version:a})];case 1:return n=s.sent(),[2,this.host.models.VirtualWaitingRoom.inject({id:t,staff:r,name:i,status:o,version:n.version})]}}))}))},e.prototype.delete=function(t,e){return Hu(this,void 0,void 0,(function(){var n;return Wu(this,(function(r){switch(r.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("room_id","required");return(n=this.host.models.VirtualWaitingRoom.get(t))&&this.host.models.VirtualWaitingRoom.eject(n),[4,this.host.api.virtualWaitingRoom.delete(t,e)];case 1:return r.sent(),[2]}}))}))},e.prototype.getVisitInfo=function(t){return Hu(this,void 0,void 0,(function(){return Wu(this,(function(e){switch(e.label){case 0:if(!t)throw new Un.ValidationError("joinId","required");return[4,this.host.api.virtualWaitingRoom.getVisitInfo(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.createVisit=function(t){var e=t.firstName,n=t.lastName,r=t.mobilePhone,i=t.visitReason,o=t.joinId;return Hu(this,void 0,void 0,(function(){return Wu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.createVisit({firstName:e,lastName:n,mobilePhone:r,visitReason:i,joinId:o})];case 1:return[2,t.sent()]}}))}))},e.prototype.visitorLogin=function(t){var e=t.groupId,n=t.accountKey,r=t.accountSecret,i=t.organizationId;return Hu(this,void 0,void 0,(function(){var t;return Wu(this,(function(o){switch(o.label){case 0:return this.host.emit("signingIn"),this.host.configure({events:Gu(Gu({},this.host.config.events),{singleConversation:e})}),this.host._setAuth({key:n,secret:r}),this.host.setDefaultOrganization(i),[4,this.host.users.findMe({ignoreNotFound:!0,isVwrFeature:!0})];case 1:return t=o.sent(),this.host._setCurrentUser(t),this.host.emit("signedIn",t,this.host.getAuth()),this.host.messages._fetchAttachmentTokens(20,{isVwrFeature:!0}),[2]}}))}))},e.prototype.rejoinVisit=function(t){var e=t.rejoinToken,n=t.sessionTokens;return Hu(this,void 0,void 0,(function(){return Wu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.rejoinVisit({rejoinToken:e,sessionTokens:n})];case 1:return[2,t.sent()]}}))}))},e.prototype.rejoinWithAuthForm=function(t){var e=t.rejoinToken,n=t.challengeAnswers;return Hu(this,void 0,void 0,(function(){return Wu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.rejoinWithAuthForm({rejoinToken:e,challengeAnswers:n})];case 1:return[2,t.sent()]}}))}))},e.prototype.clearAllCompletedVisits=function(t){var e=t.roomId,n=t.organizationId;return Hu(this,void 0,void 0,(function(){return Wu(this,(function(t){switch(t.label){case 0:return[4,this.host.api.virtualWaitingRoom.cleanupVisits({type:"delete_completed_visits",roomId:e,organizationId:n})];case 1:return t.sent(),[2]}}))}))},e.prototype.reactToJoinableCallSSE=function(t){var e=t.data,n=t.type,r=wi(e);r.vwrCallStatus=n.split(":")[1],this.host.models.VirtualWaitingRoom.inject(r)},e.prototype.findAllVisits=function(t,e){return Hu(this,void 0,void 0,(function(){var n=this;return Wu(this,(function(r){switch(r.label){case 0:if(!e)throw new Un.ValidationError("organizationId","required");if(!t)throw new Un.ValidationError("roomId","required");return[4,this.host.api.virtualWaitingRoom.findAllVisits(t,e)];case 1:return[2,r.sent().content.map((function(r){return n.host.models.VirtualWaitingRoomVisit.inject(Gu({roomId:t,organizationId:e},r))}))]}}))}))},e.prototype.informProvider=function(t,e){return Hu(this,void 0,void 0,(function(){return Wu(this,(function(n){if(!t)throw new Un.ValidationError("organizationId","required");if(!e.roomId)throw new Un.ValidationError("roomId","required");if(!e.visitId)throw new Un.ValidationError("visitId","required");if(!e.accountToken)throw new Un.ValidationError("accountToken","required");return[2,this.host.api.virtualWaitingRoom.informProvider(t,e)]}))}))},e.prototype.updateVisit=function(t,e){return Hu(this,void 0,void 0,(function(){var n;return Wu(this,(function(r){switch(r.label){case 0:if(!t)throw new Un.ValidationError("organizationId","required");if(!e.roomId)throw new Un.ValidationError("roomId","required");if(!e.visitId)throw new Un.ValidationError("visitId","required");return[4,this.host.api.virtualWaitingRoom.updateVisit(t,e)];case 1:return n=r.sent(),[2,this.host.models.VirtualWaitingRoomVisit.inject(Gu(Gu({},n),{id:e.visitId,organizationId:t}))]}}))}))},e}(zi),Ku=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},$u=function(t,e){e.host;return t.defineModel("call",{replaceKeys:{},defaultValues:{},skipCamelizationForKeys:["payload"],parseAttrs:function(t){if(t.id||(t.id=t.roomName),t.payload){var e={};t.payload.disabled_participants&&(e=t.payload.disabled_participants,delete t.payload.disabled_participants),t.payload=I.a.camelizeObject(t.payload),t.payload.disabledParticipants=e}return t.payload&&(t.payload.orgId&&(t.organizationId=t.payload.orgId),t.payload.callId&&(t.callId=t.payload.callId),t.payload.groupId&&(t.groupId=t.payload.groupId),t.payload.participantsTokens&&t.payload.callerId&&(t.memberIds=Ku(t.payload.participantsTokens,[t.payload.callerId]))),delete t.serverId,t}})},Xu=function(t,e){var n=e.host;return t.defineModel("callLogEntry",{parseAttrs:function(t){return t.isContact=fi()(t,"target.entity.metadata.isPatientContact"),t.isGroup="tigertext:entity:group"===fi()(t,"target.type"),t.memberCount=fi()(t,"target.entity.numMembers"),t.isMissed="missed_voip_call"===t.type,t.isOptedOut=fi()(t,"target.entity.metadata.smsOptedOut",!1),t.isOutgoing=n.currentUserId===fi()(t,"caller.entity.token"),t.isQuickCall=Boolean(Object(Ii.isPhone)(fi()(t,"target.entity.displayName")))&&"00000"===fi()(t,"target.entity.metadata.patientMrn"),t}})},Qu={DEFAULT:"",PATIENT_MESSAGING:"patient_messaging",VIRTUAL_WAITING_ROOM:"vwr"},Zu=function(t,e){var n=e.host;return t.defineModel("conversation",{instanceEvents:!0,transientAttrs:["_counterPartyAddedOnServer","_origIndex","highestSortNumber","unreadCount","unreadPriorityCount"],defaultValues:{_markingAsRead:!1,_markingAsReadSortNumber:null,_markingAsReadExpiration:null,featureService:Qu.DEFAULT,firstExpiringUnreadMessage:null,firstUnreadMessage:null,higherContinuation:null,highestSortNumber:0,inProgressEscalationCount:0,isLive:!1,lastBangMessageSortNumber:0,lastIncomingMessageSortNumber:0,lastMessage:null,lowerContinuation:null,markableAsReadMessages:null,messages:null,muted:null,network:lr.PROVIDER,timeline:null,unreadCount:0,unreadPriorityCount:0},skipCamelizationForKeys:["metadata","muted"],parseAttrs:function(t){if("muted"in t&&t.muted){var e=t.muted;if(Object.keys(e).length>0){var r=e.mute_duration,i=e.mute_start;i&&(i=1e3*+i);var o=n.mute._addEntry(t.id,{durationInMinutes:r,organizationId:t.organizationId,startedAt:i});t.muted=o}else t.muted=null}return t},afterAssignment:function(e){var r=e.counterParty,i=e.counterPartyId,o=e.counterPartyType,a=e.id,s=e.isDeletable,u=e.isMuteable,c=e.metadata,l=e.muted;if(t.host.config.condensedReplays?l||(l=n.mute.getById(a)):l=n.mute._getByConversationHandle(a),e.muted=l,e.isMuted=!!e.muted,r?(i=r.id,o=r.$entityType):r=o&&i?t.store.get(o,i):null,e.counterParty=r,e.counterPartyId=i,e.counterPartyType=o,e.shouldDisplay=!("user"===o&&r&&!r.shouldDisplay),n.conversations._setAllowedSenders(e),s=!0,u="distributionList"!==o,r&&"group"===o){var d=r.groupType,f=r.p2pSender;if(d===nr.ROLE_P2P){var h=f&&"role"===f.$entityType;s=e.allowedSenders.length>0&&!h,u=u&&e.allowedSenders.length>0}else d===nr.ESCALATION?(s=!1,u=!0):d===nr.PATIENT_MESSAGING&&(s=e.counterParty.memberCount>2)}else r&&"team"===o&&(s=!1,u=!1);e.isDeletable=s,e.isMuteable=u,e.markableAsReadMessages||(e.markableAsReadMessages=[]),e.messages||(e.messages=[]),e.timeline||(e.timeline=[]),e.higherContinuation||(e.higherContinuation={continuation:t.host.config.condensedReplays?{higher_continuation:null}:"HIGHER",itemsEstimate:null}),e.lowerContinuation||(e.lowerContinuation={continuation:t.host.config.condensedReplays?{lower_continuation:null}:"LOWER",itemsEstimate:null}),c&&"patient_messaging"===c.feature_service&&(e.network=lr.PATIENT,e.featureService=Qu.PATIENT_MESSAGING,"group"===o&&(e.patientId="patient:"+c.patient_id,c.patient_contact_id&&(e.patientContactId="patientContact:"+c.patient_contact_id))),c&&"vwr"===c.feature_service&&(e.network=lr.PATIENT,e.featureService=Qu.VIRTUAL_WAITING_ROOM)},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}},hasMany:{content:{type:"message",foreignKey:"conversationId",sortBy:[["sortNumber","asc"],["id","asc"]]}}}})},Ju=function(t,e){var n=t.defineModel("distributionList",{replaceKeys:{avatar:"avatarUrl",createdBy:"createdById",displayName:"name",organizationKey:"organizationId",totalMembers:"memberCount",updatedBy:"updatedById"},skipCamelizationForKeys:["metadata"],transientAttrs:["$deleted"],defaultValues:{memberCount:0},afterAssignment:function(t){t.displayName=t.name},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}});return nu(n,{finder:function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(t=e.host.distributionLists).find.apply(t,n)},placeholderEntityDelayBeforeRefreshing:function(){return t.host.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return t.host.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{name:"Loading Distribution List..."},defaultNotFoundAttrs:{name:"<Distribution List Not Found>"}}),n},tc=function(t,e){var n=e.host;return t.defineModel("escalationExecution",{replaceKeys:{destructionDuration:"minutesToExpire",destructionTime:"expiresAt",displayName:"displayId",escalationExecutionId:"id",escalationGroupToken:"groupId",escalationPath:"path",escalationStatus:"status",level:"currentStep",organizationToken:"organizationId",targetDuration:"targetMinutesToAcknowledge",targetToken:"targetId",triggeredMessageToken:"carbonCopyMessageId",triggeringConversationId:"originalGroupConversationId",triggeringMessageToken:"originalMessageId"},defaultValues:{currentStep:0,status:er.IN_PROGRESS},parseAttrs:function(t){if("actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),"carbonCopyMessageId"in t&&"string"==typeof t.carbonCopyMessageId&&"undefined"===t.carbonCopyMessageId&&(t.carbonCopyMessageId=null),"displayId"in t&&(t.displayId.startsWith("#")&&(t.displayId=t.displayId.slice(1)),t.displayId=t.displayId.toUpperCase()),"expiresAt"in t&&"string"==typeof t.expiresAt&&(t.expiresAt=new Date(t.expiresAt).getTime()),"groupId"in t&&"string"==typeof t.groupId&&"undefined"===t.groupId&&(t.groupId=null),"path"in t){for(var e=[],r=!1,i=0,o=t.path;i<o.length;i++){for(var a=o[i],s=a.targets,u=a.duration,c=[],l=0,d=s;l<d.length;l++){var f=d[l];if("string"==typeof f)c.push(n.injectPlaceholderModel({id:f},"user"));else if(f&&f.token){var h=f.displayName,p=f.token;c.push(n.injectPlaceholderModel({id:p,displayName:h},"user"))}else r=!0}e.push({minutesToAcknowledge:u,targets:c})}r?delete t.path:t.path=e}return"status"in t&&("init"===t.status&&(t.status="in_progress"),"destruct"===t.status&&(t.status="cancelled"),t.status=er.resolve(t.status)),t},afterAssignment:function(t){},relations:{belongsTo:{carbonCopyMessage:{type:"message",foreignKey:"carbonCopyMessageId"},group:{type:"group",foreignKey:"groupId"},organization:{type:"organization",foreignKey:"organizationId"},originalConversation:{type:"conversation",foreignKey:"originalGroupConversationId"},originalMessage:{type:"message",foreignKey:"originalMessageId"},target:{type:"user",foreignKey:"targetId"},escalationGroupConversation:{type:"conversation",foreignKey:"escalationGroupConversationId"}}}})},ec=function(t,e){e.host;return t.defineModel("escalationExecutionChange",{parseAttrs:function(t){return"actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),t}})},nc=function(t,e){var n=e.host;return t.defineModel("escalationPolicy",{replaceKeys:{destructionDuration:"minutesToExpire",escalationPath:"path",target:"targetId",targetDuration:"targetMinutesToAcknowledge"},defaultValues:{alwaysEscalate:!1},parseAttrs:function(t){if("path"in t){for(var e=[],r=!1,i=0,o=t.path;i<o.length;i++){for(var a=o[i],s=a.targets,u=a.duration,c=[],l=0,d=s;l<d.length;l++){var f=d[l];if("string"==typeof f)c.push(n.injectPlaceholderModel({id:f},"user"));else if(f&&f.token){var h=f.displayName,p=f.token;c.push(n.injectPlaceholderModel({id:p,displayName:h},"user"))}else r=!0}e.push({minutesToAcknowledge:u,targets:c})}r?delete t.path:t.path=e}return t},afterAssignment:function(t){},relations:{belongsTo:{target:{type:"user",foreignKey:"targetId"}}}})},rc=function(t,e){var n=e.host,r=t.defineModel("group",{replaceKeys:{avatar:"avatarUrl",createdTime:"createdAt",displayName:"name",members:"memberIds",numMembers:"__memberCount",organizationKey:"organizationId",proxied_members:"proxiedMembers"},transientAttrs:["__memberCount"],defaultValues:{hasCurrentUser:!1,isPublic:!1,memberIds:null},skipCamelizationForKeys:["escalation","metadata","proxied_members"],parseAttrs:function(t){if("createdAt"in t&&(t.createdAt=new Date(t.createdAt)),"createdBy"in t&&delete t.createdBy,t.avatarUrl&&(t.avatarUrl=Ks(t.avatarUrl,n.config)),"escalation"in t){var e=n.escalations._updateEscalation(t.escalation,{inGroupInject:!0});delete t.escalation,t.escalationExecutionId=e.id}if(t.memberIds){for(var r=[],i=0,o=t.memberIds;i<o.length;i++){var a=o[i];"string"==typeof a?r.push(a):a.id&&r.push(a.id)}t.memberIds=r}if(t.metadata&&"patient_care"===t.metadata.feature_service&&(t.patientDetails=t.metadata.patient),t.metadata&&"patient_messaging"===t.metadata.feature_service&&(t.patientDetails={dob:t.metadata.patient_dob,gender:t.metadata.patient_gender,id:t.metadata.patient_id,isPatientContact:t.metadata.is_patient_contact,mrn:t.metadata.patient_mrn,name:t.metadata.patient_name,phoneNumber:t.metadata.phone_number,smsOptedOut:t.metadata.sms_opted_out},t.patientDetails.isPatientContact&&t.metadata.relation_name&&(t.patientDetails.relationName=t.metadata.relation_name)),t.metadata)if(t.metadata.team&&(t.metadata.team.token||t.metadata.team.id)){var s=n.models.Team.inject(t.metadata.team);s&&(t.teamId=s.id)}else t.metadata.team_token&&(t.teamId=t.metadata.team_token);return"metadata"in t&&delete t.metadata,t},afterAssignment:function(t){var e,r=t.id,i=t.memberIds,o=t.organizationId;n.config.condensedReplays?t.conversationId&&(e=n.conversations.getById(t.conversationId)):e=o?n.conversations.get("group",r,o):null;var a=o?n.metadata.get(r,o):null;a&&(a=a.data);var s=n.groups.__extractGroupTypeFromAttrs(t),u=a&&s===nr.ROLE_P2P?a.target_display_name:t.name;t.conversation=e,t.displayName=u,t.groupType=s,t.memberCount=i&&i.length||t.__memberCount||0,t.metadata=a,"FORUM"!==s&&delete t.hasCurrentUser,n.users._setMembersOnEntity(t),n.groups._setMembership(t),n.groups._setP2PEntities(t)},beforeCreateInstance:function(t){!function(t,e,r){if(!e||0===e.length)return;n.groups.ensureMembersWithIds(t,e,{onlyPlaceholder:!0,attrs:{organizationId:r}})}(t.id,t.memberIds,t.organizationId)},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"},escalationExecution:{type:"escalationExecution",foreignKey:"escalationExecutionId"},team:{type:"team",foreignKey:"teamId"}}}});return nu(r,{finder:function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=n.groups).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return n.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return n.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading group..."},defaultNotFoundAttrs:{displayName:"<Group Not Found>"},shouldEnsure:function(t,e,r){var i=r.groupMembersOnlyPlaceholder;return!t.members||!t.metadata||t.groupType===nr.ROLE_P2P||t.members.some((function(t){return n.models.User.shouldEnsure(t,i)}))}}),r},ic=function(t,e){e.host;return t.defineModel("groupMembersChange",{parseAttrs:function(t){return"actionTime"in t&&"string"==typeof t.actionTime&&(t.actionTime=new Date(t.actionTime)),t}})},oc=function(t,e){var n=e.host;return t.defineModel("message",{replaceKeys:{clientId:"id",createdTime:"createdAt",data:"metadata",dndAutoForwardedFrom:"autoForwardedFromId",dor:"deleteOnRead",escalationExecId:"escalationExecutionId",groupAvatar:"groupAvatarUrl",groupToken:"groupId",messageId:"id",originalData:"originalMetadata",originalMsgId:"originalMessageId",originalSenderName:"originalSenderDisplayName",originalTimestamp:"originalForwardedMessageCreatedAt",recipient:"recipientId",recipientOrganization:"recipientOrganizationId",recipientOrgToken:"recipientOrganizationId",recipientToken:"recipientId",sender:"senderId",senderAvatar:"senderAvatarUrl",senderOrganization:"senderOrganizationId",senderOrgToken:"senderOrganizationId",senderToken:"senderId"},transientAttrs:["__organizationId","$synced","escalationExecutionChange","groupMembersChange","inTimeline"],defaultValues:{inTimeline:!1,isUnread:!1,messageType:cr.USER_SENT,senderStatus:ar.NEW,shouldEnsureRecipientStatus:!1,sortNumber:0},skipCamelizationForKeys:["escalation","metadata","originalMetadata"],parseAttrs:function(t){if(t.teamRequest&&(t.senderId||(t.senderId=t.teamRequest.createdById),t.teamRequestId=t.teamRequest.id,delete t.teamRequest),"attachmentName"in t){var e=t.attachmentName;delete t.attachmentName,"undefined"!==e&&Array.isArray(t.attachments)&&t.attachments.length>0&&e&&(t.attachments[0].name=e)}if(Array.isArray(t.attachments)&&t.attachments.forEach((function(t,e){return t.id=""+(e+1)})),"priority"in t&&(t.priority=rr.resolve(t.priority)),"createdAt"in t&&"string"==typeof t.createdAt&&(t.createdAt=new Date(t.createdAt)),"expireIn"in t&&(t.expiresAt=Date.now()+1e3*t.expireIn,delete t.expireIn),"recipientStatus"in t&&delete t.recipientStatus,"status"in t&&delete t.status,"xmlns"in t&&delete t.xmlns,"escalation"in t){var r=n.escalations._updateEscalation(t.escalation);delete t.escalation,t.escalationExecutionId=r.id}if("subType"in t&&(t.subType=ur.resolve(t.subType)),t.metadata){t.metadata=y.a.castArray(t.metadata).map(n.metadata.__parseMessageMetadata).filter(Boolean);var i=t.metadata.find((function(t){return"tigertext:message:role:sender"===t.namespace})),o=t.metadata.find((function(t){return"tigertext:message:role:owner"===t.namespace})),a=t.metadata.find((function(t){return"tigertext:message:patient_care"===t.namespace}));if(i&&i.payload){var s=t.senderOrganizationId,u=i.payload;t.senderRole=n.roles.__parseRoleFromMetadata({metadata:u,organizationId:s}),t.currentSenderRoleId=t.senderRole.id}if(o&&o.payload){s=t.senderOrganizationId;var c=t.senderId;u=o.payload;t.senderId=u.token,c!==u.token&&(t.senderRole={$entityType:"role",botUserId:c,id:"role:"+c,organizationId:s},t.currentSenderRoleId="role:"+c)}if(a&&a.payload){for(var l=[],d=0,f=a.payload.components;d<f.length;d++){var h=f[d];"type"in h&&(h.type=hr.resolve(h.type)),"sub_type"in h&&(h.sub_type=fr.resolve(h.sub_type)),"action_type"in h&&(h.action_type=dr.resolve(h.action_type)),l.push(h)}t.patientCareCard=l}}else"metadata"in t&&delete t.metadata;if(t.originalMetadata){t.originalMetadata=y.a.castArray(t.originalMetadata).map(n.metadata.__parseMessageMetadata).filter(Boolean);i=t.originalMetadata.find((function(t){return"tigertext:message:role:sender"===t.namespace})),o=t.originalMetadata.find((function(t){return"tigertext:message:role:owner"===t.namespace}));var p=t.originalMetadata.find((function(t){return"tigertext:message:patient_messaging"===t.namespace}));if(i&&i.payload){s=t.senderOrganizationId,u=i.payload;t.originalSenderRole=n.roles.__parseRoleFromMetadata({metadata:u,organizationId:s})}if(o&&o.payload){var v=t.originalSender,g=t.originalSenderDisplayName,m=t.originalSenderRole;s=t.senderOrganizationId,u=o.payload;m||"string"!=typeof v||(t.originalSenderRole={$entityType:"role",botUserId:v,displayName:g,id:"role:"+v,organizationId:s}),(!v||v&&"string"==typeof v)&&(t.originalSender={$entityType:"user",displayName:u.display_name,id:u.token,organizationId:s})}"isForwarded"in t&&t.isForwarded&&p&&(t.isForwardedFromPatientNetwork=!0,p.payload&&(t.patientDetails={isPatientContact:p.payload.is_patient_contact,mrn:p.payload.patient_mrn,patientId:p.payload.patient_id,patientName:p.payload.patient_name},p.payload.is_patient_contact&&(t.patientDetails.contactId=p.payload.patient_contact_id,t.patientDetails.contactName=p.payload.patient_contact_name,t.patientDetails.relation=p.payload.relation_name),t.originalGroupId=p.payload.group_id,t.originalGroupName=p.payload.group_name))}if("originalSender"in t&&"string"==typeof t.originalSender){s=t.senderOrganizationId,v=t.originalSender,g=t.originalSenderDisplayName;t.originalSender={$entityType:"user",displayName:g,id:v,organizationId:s},"patientDetails"in t&&(t.patientDetails.patientId===t.originalSender.id&&(t.originalSender.isPatient=!0),t.patientDetails.contactId===t.originalSender.id&&(t.originalSender.isPatientContact=!0,t.originalSender.relation=t.patientDetails.relation)),delete t.originalSenderDisplayName}return t},afterAssignment:function(e){var r=e.__organizationId,i=e.counterParty,o=e.counterPartyId,a=e.counterPartyType,s=e.createdAt,u=e.isOutgoing,c=e.recipientOrganizationId,l=e.senderId,d=e.senderOrganizationId,f=n.currentUserId;if(i)switch(o=i.id,a=i.$entityType){case"group":e.groupId=o,delete e.recipientId;break;case"distributionList":e.distributionListId=o,delete e.recipientId}else i=a&&o?t.store.get(a,o):null;e.counterParty=i,e.counterPartyId=o,e.counterPartyType=a,s||(s=new Date),l&&(u=n.messages._isMessageOutgoing(e)),u&&d?r=d:!u&&c&&(r=c),e.__organizationId=r,e.canRecall="distributionList"!==a&&l===f,e.createdAt=s,e.isOutgoing=u,e.isAutoForwarded=!!e.autoForwardedFromId,e.subType||(e.subType=ur.NA),n.messages._setRecipientStatus(e)},relations:{belongsTo:{autoForwardedFrom:{type:"user",foreignKey:"autoForwardedFromId"},conversation:{type:"conversation",foreignKey:"conversationId"},currentSenderRole:{type:"role",foreignKey:"currentSenderRoleId"},distributionList:{type:"distributionList",foreignKey:"distributionListId"},escalationExecution:{type:"escalationExecution",foreignKey:"escalationExecutionId"},group:{type:"group",foreignKey:"groupId"},originalGroup:{type:"group",foreignKey:"originalGroupId"},recipient:{type:"user",foreignKey:"recipientId"},recipientOrganization:{type:"organization",foreignKey:"recipientOrganizationId"},sender:{type:"user",foreignKey:"senderId"},senderOrganization:{type:"organization",foreignKey:"senderOrganizationId"},teamRequest:{type:"teamRequest",foreignKey:"teamRequestId"}},hasMany:{statusesPerRecipient:{type:"messageStatusPerRecipient",foreignKey:"messageId"}}}})},ac=function(t){return t.defineModel("messageStatusPerRecipient",{replaceKeys:{accountId:"userId",timestamp:"createdAt"},defaultValues:{status:ar.NA},parseAttrs:function(t){return t.status&&(t.status=ar.resolve(t.status)),t.createdAt&&"string"==typeof t.createdAt&&(t.createdAt=new Date(t.createdAt)),t},beforeInject:function(t,e){if(e){var n=e.status,r=t.status;or[r]<or[n]&&(delete t.createdAt,delete t.status)}},relations:{belongsTo:{distributionList:{type:"distributionList",foreignKey:"distributionListId"},message:{type:"message",foreignKey:"messageId"},user:{type:"user",foreignKey:"userId"}}}})},sc=function(t,e){e.host;return t.defineModel("messageTemplate",{replaceKeys:{createdBy:"createdById",templateLabel:"title",updatedBy:"updatedById"},transientAttrs:["$deleted"],parseAttrs:function(t){return t.hasAttachment=!1,t.attachmentName&&t.attachmentSize&&t.attachmentType&&(t.hasAttachment=!0),t},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}})},uc=function(t,e){return t.defineModel("metadata",{parseAttrs:function(t,e){return t.data=e.data,t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},cc=function(t,e){e.host;return t.defineModel("mute",{parseAttrs:function(t){return t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},lc=n(201),dc=n.n(lc),fc=n(202),hc=n.n(fc);function pc(t,e){return e in t?t[e].value:null}var vc=function(t,e){var n=e.host,r=t.defineModel("organization",{instanceEvents:!0,replaceKeys:{allowMsgForward:"__isForwardAllowed",allowPublicGroups:"forumsEnabled",allowRoleScheduleUpload:"__isRolesScheduleUploadEnabled",desktopPriorityMessaging:"__desktopPriorityMessagingSounds",eula:"eulaEnabled",eulaContent:"eulaUrl",featurePatientCare:"__canShowPatientCare",featurePatientNetwork:"__canShowPatientNetwork",featureRoleScheduleUpload:"__canUploadRolesSchedule",featureRoleService:"rolesEnabled",featureRolesEscalation:"__canEscalateMessages",featureTeams:"__canShowTeams",featureTransactions:"canShowTransactions",latestIncomingMessageSortNumber:"lastIncomingMessageSortNumber",members:"memberCount",organizationKey:"organizationId",patientCare:"__showPatientCare",patientNetwork:"__showPatientNetwork",pfNoAttachment:"__isPFAttachmentAllowed",pfNoPhoto:"__isPFPhotoAllowed",roleService:"canAdminRoles",rolesEscalation:"__isRolesEscalationEnabled",ssoWebSessionDuration:"desktopExtendedSession",teams:"__showTeams"},defaultValues:{__canEscalateMessages:!1,__canShowPatientCare:!1,__canShowTeams:!1,__canUploadRolesSchedule:!1,__isForwardAllowed:!1,__isPFAttachmentAllowed:!1,__isPFPhotoAllowed:!1,__isRolesEscalationEnabled:!1,__isRolesScheduleUploadEnabled:!1,__showPatientCare:!1,__showTeams:!1,canAdminRoles:!1,canShowTransactions:!1,desktopExtendedSession:-1,forumsEnabled:!1,highestSortNumber:0,isPatientNetworkEnabled:!1,lastIncomingMessageSortNumber:0,networks:null,paid:!1,rolesEnabled:!1,settings:{},unreadCount:0,unreadPriorityCount:0},transientAttrs:["unreadCount","unreadPriorityCount"],parseAttrs:function(t){return t.settings&&(t.settings=hc.a.call(dc.a.call(t.settings,(function(t){return I.a.camelizeKey(t.name)})),(function(t){isFinite(t.value)&&(t.value=+t.value),"true"===t.value&&(t.value=!0),"false"===t.value&&(t.value=!1)}))),t},afterAssignment:function(t){var e=t.__canEscalateMessages,r=t.__canShowPatientCare,i=t.__canShowPatientNetwork,o=t.__canShowTeams,a=t.__canUploadRolesSchedule,s=t.__desktopPriorityMessagingSounds,u=t.__isForwardAllowed,c=t.__isPFAttachmentAllowed,l=t.__isPFPhotoAllowed,d=t.__isRolesEscalationEnabled,f=t.__isRolesScheduleUploadEnabled,h=t.__showPatientCare,p=t.__showPatientNetwork,v=t.__showTeams,y=t.autoForwardReceiverId,g=t.id,m=t.name,_=t.paid,b=t.settings;v=v&&!!pc(b,"teams"),p="individual"===p?!!pc(b,"patientNetwork"):!!p,y=pc(b,"dndAutoForwardReceiver"),t.allowPriorityMessage=!!pc(b,"priorityMessaging"),t.autoLogoutMinutes=pc(b,"autologoutTime")||1440,t.canUploadRolesSchedule=a&&f,t.deleteOnRead=!!pc(b,"dor"),t.desktopAutoUpdate=!!pc(b,"autoUpdate"),t.isEulaAccepted=!pc(b,"eula"),t.isForwardAllowed=u&&1===pc(b,"forward"),t.messageTimeToLive=pc(b,"ttl")||-1,t.isPatientBroadcastEnabled=!!pc(b,"pfBroadcast"),t.isPatientScheduledMessagesEnabled=!!pc(b,"pfScheduleMessages"),t.isPatientVirtualWaitingRoomEnabled=!!pc(b,"pfVirtualWaitingRoom"),t.isPFVideoCallEnabled=!!pc(b,"pfVideoCall"),t.isPFVoiceCallEnabled=!!pc(b,"pfVoiceCall"),t.isPFGroupVideoCallEnabled=!!pc(b,"pfGroupVideoCall"),t.isPFGroupVoiceCallEnabled=!!pc(b,"pfGroupVoiceCall"),t.isPFAttachmentAllowed=!c,t.isPFPhotoAllowed=!l,t.isVoiceCallEnabled=!!pc(b,"voip"),t.isVideoCallEnabled=!!pc(b,"videoCall"),t.isGroupVoiceCallEnabled=!!pc(b,"groupAudioCall"),t.isGroupVideoCallEnabled=!!pc(b,"groupVideoCall");var w="UpM28mnfW65vJkbqEATtKvxm"===t.id;if(t.allowedSenders=n.organizations._getAllowedSenders(t),t.autoForwardReceiverId=y,t.autoForwardReceiver=y?n.models.User.get(y):null,t.canEscalateMessages=e&&d,t.desktopPriorityMessagingSounds=_&&s,t.displayName=w?"Contacts":m,t.isContacts=w,t.showPatientCare=r&&h,t.isPatientNetworkEnabled=i&&p,n.currentUser&&(n.currentUser.isPatient||n.currentUser.isPatientContact)&&i&&(t.isPatientNetworkEnabled="off"!==p),t.showTeams=o&&v,t.userRoles=n.userRoles.getByOrganizationId(g),t.networks||(t.networks={}),t.networks.provider||(t.networks.provider={unreadCount:0,unreadPriorityCount:0}),t.networks.patient||(t.networks.patient={dnd:!1,dndText:"",unreadCount:0,unreadPriorityCount:0}),t.networks.virtualWaitingRoom||(t.networks.virtualWaitingRoom={unreadCount:0,unreadPriorityCount:0}),t.network){var I=t.network.patient,O=I.dnd,E=I.dndText;t.networks.patient.dnd=O,t.networks.patient.dndText=null!==E?E:"",delete t.network}},methods:{getSettingValue:function(t){return pc(this.settings,t)},getSettingEntry:function(t){return this.settings&&t in this.settings?this.settings[t]:null}},relations:{hasMany:{__expirableMessages:{type:"message",foreignKey:"__organizationId",filter:function(t){return!!t.expiresAt},sortBy:[["expiresAt","asc"],["id","asc"]]},__expirableMutes:{type:"mute",foreignKey:"organizationId",filter:function(t){return!!t.expiresAt},sortBy:[["expiresAt","asc"],["id","asc"]]},__markingAsReadConversations:{type:"conversation",foreignKey:"organizationId",filter:function(t){return!!t._markingAsRead},sortBy:[["_markingAsReadExpiration","asc"],["id","asc"]]},conversations:{type:"conversation",foreignKey:"organizationId",filter:function(t){var e=t.counterParty;return!!e&&e.groupType!==nr.ROLE_ASSIGNMENT},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]},messageTemplates:{type:"messageTemplate",foreignKey:"organizationId",sortBy:[["title","asc"]]},roles:{type:"role",foreignKey:"organizationId"},roleTags:{type:"roleTag",foreignKey:"organizationId"}}}});return nu(r,{finder:function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=n.organizations).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return n.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return n.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{name:"Loading Organization..."},defaultNotFoundAttrs:{displayName:"<Organization Not Found>"}}),r},yc=function(t,e){e.host;return t.defineModel("patient",{replaceKeys:{patientMrn:"mrn",patientGender:"gender",patientDob:"dob"},parseAttrs:function(t){return"featureService"in t&&delete t.featureService,"patientContacts"in t&&delete t.patientContacts,"isPatientContact"in t&&delete t.isPatientContact,"dob"in t&&(t.dob=hi(t.dob)),"phoneNumber"in t&&(t.phoneNumber=Object(Ii.formatPhoneWithDash)(t.phoneNumber)),t},relations:{belongsTo:{user:{type:"user",foreignKey:"userId"}},hasMany:{contacts:{type:"patientContact",foreignKey:"patientId"},sharedConversations:{type:"conversation",foreignKey:"patientId",filter:function(t,e){var n=t.counterParty;if(!n)return!1;var r=n.groupType,i=n.hasCurrentUserOrRole,o=n.memberIds;return!(r!==nr.PATIENT_MESSAGING||!i||!o.includes(e.userId))},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]}}}})},gc=function(t,e){e.host;return t.defineModel("patientContact",{replaceKeys:{patientDob:"dob",patientGender:"gender",patientMrn:"mrn",relationName:"relation"},parseAttrs:function(t){return"entity"in t&&delete t.entity,"dob"in t&&(t.dob=hi(t.dob)),"phoneNumber"in t&&(t.phoneNumber=Object(Ii.formatPhoneWithDash)(t.phoneNumber)),t},relations:{belongsTo:{patient:{type:"patient",foreignKey:"patientId"},user:{type:"user",foreignKey:"userId"}},hasMany:{sharedConversations:{type:"conversation",foreignKey:"patientContactId",filter:function(t,e){var n=t.counterParty;if(!n)return!1;var r=n.groupType,i=n.hasCurrentUserOrRole,o=n.memberIds;return!(r!==nr.PATIENT_MESSAGING||!i||!o.includes(e.userId))},sortBy:[["highestSortNumber","desc"],["_origIndex","asc"],["id","asc"]]}}}})},mc=function(t,e){var n=e.host;return t.defineModel("product",{defaultValues:{activeProcessingEvents:null,conversationCount:0,organizations:null,rolesOptingIn:null,unreadCount:0,unreadPriorityCount:0,unreadVWRCount:0,unreadVWRPriorityCount:0},transientAttrs:["conversationCount","organizations","unreadCount","unreadPriorityCount"],afterAssignment:function(t){var e=t.id;t.productRoles=n.userRoles.getByProductId(e),null===t.activeProcessingEvents&&(t.activeProcessingEvents=[]),null===t.organizations&&(t.organizations=[]),null===t.rolesOptingIn&&(t.rolesOptingIn=[])}})};function _c(t,e){return!!t&&t.includes(e)}var bc=function(t,e){return t.defineModel("productRoles",{defaultValues:{roles:[]},afterAssignment:function(t){var e=t.roles;t.isAdmin=_c(e,"tt_admin"),t.isAnalyticsAdmin=_c(e,"tt_reporting"),t.isLdapAdmin=_c(e,"tt_ldap"),t.isSuperAdmin=_c(e,"tt_super_admin")},methods:{hasRole:function(t){return!!this.roles&&this.roles.includes(t)}},relations:{belongsTo:{product:{type:"product",foreignKey:"productId"},user:{type:"user",foreignKey:"userId"}}}})},wc=function(t,e){var n=e.host;return t.defineModel("role",{defaultValues:{description:"",memberIds:null,roleTagId:null},afterAssignment:function(t){n.users._setMembersOnEntity(t)},relations:{belongsTo:{assignmentGroup:{type:"group",foreignKey:"assignmentGroupId"},botUser:{type:"user",foreignKey:"botUserId"},escalationPolicy:{type:"escalationPolicy",foreignKey:"escalationPolicyId"},organization:{type:"organization",foreignKey:"organizationId"},roleTag:{type:"roleTag",foreignKey:"roleTagId"}}}})},Ic=function(t,e){return t.defineModel("roleTag",{replaceKeys:{tagColor:"color",tagName:"name"},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}},hasMany:{roles:{type:"role",foreignKey:"roleTagId"}}},parseAttrs:function(t){if("colorValue"in t){var e=t.color,n=t.colorValue;t.color=n,t.colorId=e,delete t.colorValue}return"color"in t&&(t.color=t.color.replace("0x","#")),t},afterAssignment:function(t){var e=t.name;t.displayName=e,t.isDefault=e&&e.startsWith("Default")}})},Oc=function(t,e){var n=e.host;return t.defineModel("scheduledMessage",{replaceKeys:{createdBy:"createdById",recipient:"recipientId",recipientType:"_recipientType",senderToken:"senderId",scheduleStatus:"status",updatedBy:"updatedById"},transientAttrs:["$deleted"],parseAttrs:function(t){return t.hasAttachment=!1,t.attachmentName&&t.attachmentSize&&t.attachmentType&&(t.hasAttachment=!0),t._recipientType&&(t.recipientType=n.modelsByEntityType[I.a.camelizeKey(t._recipientType)].name),t},afterAssignment:function(e){var n=e.recipient,r=e.recipientId,i=e.recipientType;n?(r=n.id,i=n.$entityType):n=i&&r?t.store.get(i,r):null,e.recipient=n,e.recipientId=r,e.recipientType=i},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},organization:{type:"organization",foreignKey:"organizationId"},sender:{type:"user",foreignKey:"senderId"},template:{type:"messageTemplate",foreignKey:"templateId"},updatedBy:{type:"user",foreignKey:"updatedById"}}}})},Ec=function(t,e){var n=e.host,r=t.defineModel("team",{replaceKeys:{avatar:"avatarUrl",group_token:"groupToken",members:"__members",numMembers:"__memberCount",name:"displayName"},transientAttrs:["__memberCount","__members"],defaultValues:{canMembersLeave:!1,canRequestToJoin:!1,hasCurrentUserOrRole:!1,hasCurrentUserPending:!1,hasCurrentUserBeenDeclined:!1,memberIds:[]},skipCamelizationForKeys:["members"],parseAttrs:function(t){var e=t.__members;if(e){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if("object"==typeof a)if(a.token){r.push(a.token);var s=n.models.User.inject(a);n.models.User.removePlaceholder({entity:s,attrs:a})}else a.id&&r.push(a.id);else"string"==typeof a&&r.push(a)}t.memberIds=r,delete t.__members}return t},afterAssignment:function(t){var e=t.memberIds;n.groups._setMembership(t),n.users._setMembersOnEntity(t),n.teams._setHasUserPending(t),t.memberCount=e&&e.length||t.__memberCount||0},relations:{belongsTo:{group:{type:"group",foreignKey:"groupId"}}}});return nu(r,{finder:function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=n.teams).find.apply(t,e)},placeholderEntityDelayBeforeRefreshing:function(){return n.config.placeholderEntityDelayBeforeRefreshing},placeholderEntityAllowLoading:function(){return n.config.placeholderEntityAllowLoading},defaultPlaceholderAttrs:{displayName:"Loading..."},defaultNotFoundAttrs:{displayName:"<Team Not Found>"}}),r},Tc=function(t,e){e.host;return t.defineModel("teamRequest",{replaceKeys:{},transientAttrs:[],defaultValues:{},parseAttrs:function(t){return t.createdBy&&(t.createdById=t.createdBy.token,delete t.createdBy),t.team&&(t.teamId=t.team.id,delete t.team),t},afterAssignment:function(t){},relations:{belongsTo:{createdBy:{type:"user",foreignKey:"createdById"},team:{type:"team",foreignKey:"teamId"}}}})},Sc=function(t,e){return t.defineModel("userRoles",{defaultValues:{roles:[]},afterAssignment:function(t){var e="UpM28mnfW65vJkbqEATtKvxm"===t.organizationId,n=t.roles;t.isAdmin=n.includes("admin"),t.isHelpDesk=n.includes("help_desk"),t.isPatientAdmin=n.includes("patient_messaging_admin"),t.isRoleAdmin=n.includes("feature_role_admin"),t.isTeamAdmin=n.includes("team_admin"),t.isVirtualWaitingRoomAdmin=n.includes("virtual_waiting_room_admin"),t.reportingEnabled=n.includes("reporting")&&!e,t.reportingEnabledOnAllOrgs=n.includes("reporting_view_orgs")&&!e,t.tigerTouchPlusReportingEnabled=n.includes("tigertouchplus_reporting")},methods:{hasRole:function(t){return this.roles.includes(t)}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"},user:{type:"user",foreignKey:"userId"}}}})},Ac=function(t,e){e.host;return t.defineModel("virtualWaitingRoom",{parseAttrs:function(t){return t},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}})},Cc=function(t,e){e.host;return t.defineModel("VirtualWaitingRoomVisit",{parseAttrs:function(t){return t},relations:{belongsTo:{conversation:{type:"Conversation",foreignKey:"conversationId"},organization:{type:"organization",foreignKey:"organizationId"},virtualWaitingRoom:{type:"VirtualWaitingRoom",foreignKey:"roomId"}}}})},Rc=n(203),Pc=n.n(Rc),jc=n(204),xc=n.n(jc),Mc=n(205),kc=n.n(Mc),Nc=function(){return(Nc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},zc={computed:{},defaultValues:null,idAttribute:"id",methods:{},parseAttrs:y.a.identity,relations:{belongsTo:{},hasMany:{}}},Dc=Symbol("NOT_PROVIDED"),Uc=function(){function t(t,e,n){var r=this;void 0===n&&(n={}),this.get=function(t){return r.entitiesById[t]||r.entitiesByServerId[t]||null},this.options=y.a.defaultsDeep({},n,zc),this.idAttribute=this.options.idAttribute,this.name=e,this.store=t,this.entitiesById={},this.entitiesByServerId={},this.entitiesList=[],this.hasManySortFields=null,this.previousHasManySortValues={},this.previousServerIds={},this.transientAttrsStore={},this.options.relations&&this.__initRelations(),this.__initTransientAttrs(),Object.assign(this.options.computed,{$entityType:{enumerable:!0,value:e,writable:!1},$entityClass:{enumerable:!1,value:this,writable:!1}}),this.options.computed=y.a.transform(this.options.computed,(function(t,e,n){t[n]="function"==typeof e?{get:e,enumerable:!1}:e}),{}),this._computedKeys=Zi.a.call(xc.a.call(this.options.computed),"$entityType","$entityClass","$$transientAttrs"),this._writablePropertyKeys=Ki.a.call(Pc.a.call(kc.a.call(this.options.computed),(function(t){return t[1].set})),y.a.first),this._relationKeys=Gi.a.call(Ki.a.call(wu.a.call(this.options.relations),y.a.keys))}return t.create=function(t,e,n){return new this(t,e,n)},t.prototype.__initRelations=function(){var t=this,e=this,n=y.a.transform(this.options.relations.belongsTo,(function(t,n,r){t[r]={get:function(){return e.store.get(n.type,this[n.foreignKey])},set:function(t){this[n.foreignKey]=e.store.resolveId(n.type,t)}}}),{});Object.assign(this.options.computed,n);var r=y.a.transform(this.options.relations.hasMany,(function(n,r,i){var o=r.filter,a=r.foreignKey,s=r.sortBy,u=r.type,c=t.__getSorted(s);n[i]={get:function(){if(this.$$transientAttrs.relations||(this.$$transientAttrs.relations={}),this.$$transientAttrs.relations[i])return this.$$transientAttrs.relations[i];var t=[],n=e.store.models[u];if(n.hasManySortFields)for(var r=0,s=n.getAll();r<s.length;r++){var l=s[r];if(l[a]===this[e.idAttribute]&&(!o||o(l,this))){var d=y.a.has(this.previousHasManySortValues,l[this.idAttribute])?this.previousHasManySortValues[l[this.idAttribute]]:Dc;n.previousHasManySortValues[l[n.idAttribute]]=y.a.pick(l,n.hasManySortFields),d===Dc?c.add(t,l):c.update(t,l,{previousValue:d})}}return this.$$transientAttrs.relations[i]=t,t},set:function(t){}}}),{});Object.assign(this.options.computed,r)},t.prototype.__getSorted=function(t){void 0===t&&(t=[[this.idAttribute,"asc"]]);var e=function(t){for(var e=0,n=[],r=0,i=t;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(n.push("const a"+e+" = a['"+a+"']"),n.push("const b"+e+" = b['"+a+"']"),"asc"===s)n.push("if (a"+e+" === undefined && b"+e+" !== undefined) return -1"),n.push("if (a"+e+" !== undefined && b"+e+" === undefined) return 1"),n.push("if (a"+e+" === null && b"+e+" !== null) return -1"),n.push("if (a"+e+" !== null && b"+e+" === null) return 1"),n.push("if (a"+e+" < b"+e+") return -1"),n.push("if (a"+e+" > b"+e+") return 1");else{if("desc"!==s)throw new Error("unsupported sort ordering for field "+a+": "+s);n.push("if (a"+e+" === undefined && b"+e+" !== undefined) return 1"),n.push("if (a"+e+" !== undefined && b"+e+" === undefined) return -1"),n.push("if (a"+e+" === null && b"+e+" !== null) return 1"),n.push("if (a"+e+" !== null && b"+e+" === null) return -1"),n.push("if (a"+e+" < b"+e+") return 1"),n.push("if (a"+e+" > b"+e+") return -1")}e++}return n.push("return 0"),new Function("a","b",n.join("\n"))}(t);return new Ci(e)},t.prototype.__initTransientAttrs=function(){var t=this,e=this,n={$$transientAttrs:{enumerable:!1,get:function(){var t=this[e.idAttribute];return e.transientAttrsStore[t]||(e.transientAttrsStore[t]={})}}},r={};this.options.transientAttrs&&this.options.transientAttrs.forEach((function(e){t.options.defaultValues&&e in t.options.defaultValues&&(r[e]=wi(t.options.defaultValues[e]),delete t.options.defaultValues[e]),n[e]={get:function(){return e in this.$$transientAttrs?this.$$transientAttrs[e]:e in r?this.$$transientAttrs[e]=r[e]:void 0},set:function(t){this.$$transientAttrs[e]=t}}})),Object.assign(this.options.computed,n)},t.prototype.createInstance=function(t,e){void 0===e&&(e=!0),e&&(t=this.parseAttrs(t));var n=t[this.idAttribute];if(this.entitiesById[n]||this.entitiesByServerId[n])throw new Error("called createInstance on an existing instance");return this.__wireInstance(t)},t.prototype.__wireInstance=function(t){var e=this;this.options.defaultValues&&y.a.defaults(t,wi(this.options.defaultValues));var n={};this._writablePropertyKeys.forEach((function(e){bi(t,e)&&(n[e]=t[e],delete t[e])})),Object.defineProperties(t,this.options.computed),Object.assign(t,n),this.options.instanceEvents&&Object.assign(t,f.a.prototype),Object.assign(t,this.options.methods),Object.assign(t,{toPlainObject:function(t){var n=this,r={};e._computedKeys.forEach((function(t){return r[t]=n[t]}));var i=Object.assign({},this,r);return delete i.setMaxListeners,delete i.emit,delete i.addListener,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.listeners,delete i.listenerCount,delete i.off,delete i.toPlainObject,delete i._events,delete i._maxListeners,i}});var r=t[this.idAttribute];return r&&!("serverId"in t)&&(t.serverId=r),this.options.beforeCreateInstance&&this.options.beforeCreateInstance(t),t},t.prototype.inject=function(t){var e,n;if(this.is(t)&&(n=t,e=this.resolveId(n),this.entitiesById[e]))return this.__beforeInject(n),this.__register(e,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),n;if(!n&&(t=this.parseAttrs(t),e=this.resolveId(t),!this.isValidId(e)))throw new Error("'"+this.idAttribute+"' is required");var r=!1,i=this.entitiesById[e]||this.entitiesByServerId[e];return n?(i||(r=!0),this.__beforeInject(n)):i?(n=i,this.__beforeInject(t,n),Object.assign(n,t)):(r=!0,n=this.__wireInstance(t),this.__beforeInject(n)),this.__register(e,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),r&&(this.options.afterCreate&&this.options.afterCreate(n),this.emit("afterCreate",this,n)),n},t.prototype.__beforeInject=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];i&&!("serverId"in r)&&(r.serverId=i.serverId),this.options.beforeInject&&(t=this.options).beforeInject.apply(t,e),this.emit("beforeInject",this,r)},t.prototype.replaceExisting=function(t,e){var n=(void 0===e?{}:e).instance,r=this.options.idAttribute;if(this.is(t))throw new Error("cannot call replaceExisting() on an instance; should be plain object");if(n&&!this.is(n))throw new Error("provided 'instance' option is not an instance of this model");t=this.parseAttrs(t);var i=this.resolveId(t);if(!this.isValidId(i))throw new Error("'"+r+"' is required");var o,a=i;if(n){var s=this.resolveId(n);if(a!==s)this.entitiesById[a]?(this.eject(n),n=null):a=s}if(n||(n=this.entitiesById[a]||this.entitiesByServerId[a])&&(a=n[r]),n){var u={};for(var c in t)u[c]=!0;this.__beforeInject(t,n);for(var l=0,d=Object.getOwnPropertyNames(n);l<d.length;l++){var f=d[l];!u[f]&&bi(n,f)&&delete n[f]}Object.assign(n,t),n[r]=a,n.serverId=i,this.__wireInstance(n)}else o=!0,n=this.__wireInstance(t),this.__beforeInject(n);return this.__register(a,n),this.options.afterAssignment&&this.options.afterAssignment(n),this.__addToHasManyRelationships(n),this.options.afterInject&&this.options.afterInject(n),this.emit("afterInject",this,n),o&&(this.options.afterCreate&&this.options.afterCreate(n),this.emit("afterCreate",this,n)),n},t.prototype.eject=function(t){t=this.resolveId(t);var e=this.entitiesById[t]||this.entitiesByServerId[t];e&&(this.emit("beforeEject",this,e),this.__removeFromHasManyRelationships(e),this.__unregister(t,e),this.emit("afterEject",this,e))},t.prototype.__register=function(t,e){this.entitiesById[t]!==e&&(this.entitiesById[t]=e,this.entitiesList.push(e));var n=this.previousServerIds[t],r=e.serverId;n&&n!==r&&(delete this.entitiesByServerId[n],r===t?delete this.previousServerIds[t]:(this.entitiesByServerId[r]=e,this.previousServerIds[t]=r)),n||r===t||(this.entitiesByServerId[r]=e,this.previousServerIds[t]=r)},t.prototype.__unregister=function(t,e){delete this.entitiesById[t],y.a.pull(this.entitiesList,e),t in this.transientAttrsStore&&delete this.transientAttrsStore[t];var n=this.previousServerIds[t];n&&(delete this.entitiesByServerId[n],delete this.previousServerIds[t])},t.prototype.injectPlaceholder=function(t){var e=t.token||t[this.idAttribute];if(this.get(e))return this.inject(t);var n=this.createInstance(t);return Object.defineProperty(n,"$placeholder",{value:!0,configurable:!0}),this.inject(n)},t.prototype.removePlaceholder=function(t){var e=t.entity,n=t.attrs;e&&e.$placeholder&&(n?(delete e.$placeholder,delete e.$notFound,this.inject(e)):(Object.defineProperty(e,"$notFound",{value:!0,configurable:!0}),this.inject(e)))},t.prototype.touch=function(t){var e;t=this.resolveId(t),(this.entitiesById[t]||this.entitiesByServerId[t])&&this.inject(((e={})[this.idAttribute]=t,e))},t.prototype.__addToHasManyRelationships=function(t){this.__updateRelationsIfNeeded(t,"add")},t.prototype.__removeFromHasManyRelationships=function(t){this.__updateRelationsIfNeeded(t,"remove")},t.prototype.__updateRelationsIfNeeded=function(t,e){var n=this,r=this.store.getParentRelationshipsOfModel(this.name);if(r){this.hasManySortFields||(this.hasManySortFields=Xi.a.call(Gi.a.call(r.map((function(t){var e=t.sortBy;return e&&e.map((function(t){return t[0]}))})).filter(Boolean)).concat([this.idAttribute])));var i=y.a.has(this.previousHasManySortValues,t[this.idAttribute])?this.previousHasManySortValues[t[this.idAttribute]]:Dc;this.previousHasManySortValues[t[this.idAttribute]]=y.a.pick(t,this.hasManySortFields),r.forEach((function(r){var o=r.filter,a=r.foreignKey,s=r.relationKey,u=r.sortBy,c=r.sorted,l=n.store.get(r.parent,t[a]);if(l&&l.$$transientAttrs.relations&&l.$$transientAttrs.relations[s]){var d=!1;if("remove"===e||o&&!o(t,l))if(u)d=i===Dc?c.remove(l[s],t):c.remove(l[s],t,{previousValue:i});else{var f=l[s].indexOf(t);-1!==f&&(l[s].splice(f,1),d=!0)}else"add"===e&&(u?d=i===Dc?c.update(l[s],t):c.update(l[s],t,{previousValue:i}):l[s].includes(t)||(l[s].push(t),d=!0));l.$$transientAttrs.$$wasUpdatedByRelation||(l.$$transientAttrs.$$wasUpdatedByRelation=d)}}))}},t.prototype.ejectAll=function(){for(;this.entitiesList.length>0;)this.eject(this.entitiesList[0])},t.prototype.parseAttrs=function(t){var e=this,n=y.a.pickBy(t,(function(t){return e.store.isEntity(t)||e.store.isEntityArray(t)})),r=y.a.pick(t,this.options.transientAttrs),i=y.a.omit(t,Object.keys(n),this.options.transientAttrs),o=this.options.parseAttrs(wi(i));return Nc(Nc(Nc({},o),n),r)},t.prototype.getAll=function(){return this.entitiesList},t.prototype.getMulti=function(t){return t.map(this.get)},t.prototype.resolveId=function(t){return this.isValidId(t)?t:t[this.idAttribute]},t.prototype.isValidId=function(t){return"string"==typeof t||"number"==typeof t},t.prototype.is=function(t){return t&&t.$entityClass===this},t}();Object.assign(Uc.prototype,f.a.prototype);var Lc=function(){function t(t){var e=this;void 0===t&&(t={}),this.options=t,this.models={},this.__relationsOfHasManyByContainedItem={};["filter","get","getAll","inject","injectPlaceholder","is","resolveId"].forEach((function(t){e[t]=function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=e.models[n])[t].apply(r,i)}}))}return t.prototype.defineModel=function(t,e){var n=this;if(void 0===e&&(e={}),this.models[t])throw new Error(t+" already defined");e=Nc(Nc({},this.options),e),this.models[t]=Uc.create(this,t,e);var r=this.models[t].options.relations.hasMany;return y.a.isEmpty(r)||y.a.each(r,(function(e,r){var i=e.sortBy,o=e.type,a=n.models[t].__getSorted(i);n.__relationsOfHasManyByContainedItem[o]||(n.__relationsOfHasManyByContainedItem[o]=[]),n.__relationsOfHasManyByContainedItem[o].push(Nc(Nc({},e),{relationKey:r,sorted:a,parent:t}))})),this.models[t]},t.prototype.getParentRelationshipsOfModel=function(t){return this.__relationsOfHasManyByContainedItem[t]},t.prototype.isEntity=function(t){return t&&t.$entityClass&&t.$entityClass.constructor===Uc},t.prototype.isEntityArray=function(t){return t&&Array.isArray(t)&&t.some(this.isEntity)},t.prototype.clear=function(){y.a.values(this.models).forEach((function(t){return t.ejectAll()}))},t}(),Fc=function(){return(Fc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Bc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},qc=function(){function t(t,e){void 0===e&&(e={});var n=e.logger,r=Bc(e,["logger"]);this.host=t,this.options=r,this.logger=n,this.store=new Lc(Fc(Fc({},r),{host:t,logger:n})),this.store.host=t}return t.prototype.defineModels=function(){var t=this,e={},n=Fc(Fc({},this.options),{host:this.host,logger:this.logger});y.a.each(c,(function(r,i){e[i]=r(t,n)})),this.models=e},t.prototype.defineModel=function(t,e){return void 0===e&&(e={}),y.a.defaults(e,{replaceKeys:{},skipCamelizationForKeys:null}),y.a.defaults(e.replaceKeys,{token:"id"}),this.store.defineModel(t,Fc(Fc({},e),{afterInject:function(t){var n=Date.now();t.$lastModified===n&&(n+=1e-5),t.$lastModified=n,e.afterInject&&e.afterInject(t)},parseAttrs:function(t){var n;if(y.a.isEmpty(e.skipCamelizationForKeys))n=I.a.camelizeObject(t);else{var r=y.a.omit(t,e.skipCamelizationForKeys),i=y.a.pick(t,e.skipCamelizationForKeys);n=Fc(Fc({},I.a.camelizeObject(r)),i)}return function(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],a=i[1];!(a in t)&&o in t&&(t[a]=t[o],delete t[o])}}(n,e.replaceKeys),e.parseAttrs&&(n=e.parseAttrs(n,t)),n}}))},t.prototype.clear=function(){this.store.clear()},t}(),Vc=n(206).version,Gc=Vc=Vc.replace("-dev",""),Hc=function(){return(Hc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Wc=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Yc=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Kc=function(){function t(t){var e=this;void 0===t&&(t={}),this.errors=Un,this.VERSION=Gc,this.version=Gc,this._onBrowserUnload=function(){var t=[];e.emit("browserUnload",(function(e,n,r){return t.push({fn:e,priority:n,name:r})})),y.a.orderBy(t,["priority"],["desc"]).forEach((function(t){var e=t.fn,n=t.priority,r=t.name;console.log("[unload]",n,r),e()}))},this._onDisconnected=function(t){var n=t.isRecoverable;n||e._removeAuth(),e.emit("events:disconnected",{isRecoverable:n})},this._onTick=function(){e.__tickerFrame=m()((function(){try{e.emit("tick")}finally{e.__ticker=setTimeout(e._onTick,5e3)}}))},this._resetLastBang=function(){e._bangOccurredDuringReplay=!0},this._startBangTimer=function(){e._bangOccurredDuringReplay=!1,e._checkBangTimer=setTimeout(e._didBangOccur,e.config.detectBangReplayTimeout)},this._didBangOccur=function(){e._bangOccurredDuringReplay?e._startBangTimer():(e._checkBangTimer=null,e._bangReplayDone())},this._bangReplayDone=function(){e.currentlyServingOfflineMessages&&(e.currentlyServingOfflineMessages=!1,e.emit("conversations:loading:start"),e.conversations.hasPendingReloads()&&e.conversations.__flushConversationsToReload(),e.emit("groups:offline:stop"),e.emit("messages:offline:stop"),e.emit("conversations:loading:stop"),e.emit("messages:new:start"))},this.config=Object.assign({},t),y.a.defaultsDeep(this.config,Fn.CONFIG_DEFAULT);var n=this.config,c=n.apiEnv,l=n.logLevel;this.config.cloudfront=Fn.CLOUDFRONT[c],/(env\d+|lt\d*)/.test(c)&&(this.config.cloudfront=Fn.CLOUDFRONT.development,Fn.BASE_URLS[this.config.apiEnv]="https://"+c+"-devapi.tigertext.xyz",Fn.FORGOT_PASSWORD_URLS[this.config.apiEnv]="https://"+c+"-forget.tigertext.com",Fn.CN_URLS[this.config.apiEnv]="https://"+c+"-console.tigertext.xyz",Fn.ADMIN_URLS[this.config.apiEnv]=Fn.CN_URLS[c]+"/app/admin",Fn.ROLES_URLS[this.config.apiEnv]="/"+c+"/app/roles/index.html"),this.config.baseUrl||(this.config.baseUrl=Fn.BASE_URLS[c]),Object.assign(this,{attachments:o,date:a,email:mt,file:s,phone:Ii}),this.httpClient=new li({config:this.config,logger:new Vn({name:"HttpClient",level:l})}),this.eventSourceClient=new Ir({config:this.config,httpClient:this.httpClient,logger:new Vn({name:"EventSourceClient",level:l})}),this.enums=Hc(Hc({},i),{NetworkStatus:br}),this.store=new qc(this,{logger:new Vn({name:"Store",level:l})}),this.store.defineModels(),this.models=this.store.models,this.modelsByEntityType=y.a.mapKeys(this.store.models,(function(t,e){return I.a.camelizeKey(e)})),this.modelsByEntityType.account=this.modelsByEntityType.user,this.modelsByEntityType.list=this.modelsByEntityType.distributionList,this.allModelEntityTypes=Object.keys(this.modelsByEntityType),this.logger=new Vn({name:"TigerConnectClient",level:l}),this.api={};for(var d=0,f=Object.entries(r);d<f.length;d++){var h=f[d],p=h[0],v=h[1],g=I.a.camelizeKey(p);this.api[g]=new v(this,{logger:new Vn({name:p+"API",level:l})})}this._services=[];for(var _=0,b=Object.entries(u);_<b.length;_++){var w=b[_],O=w[0],E=(v=w[1],g=I.a.camelizeKey(O),new v(this,{logger:new Vn({name:O+"Service",level:this.config.serviceLogLevels[g]||l})}));this[g]=E,this._services.push(E)}for(var T=0,S=this._services;T<S.length;T++){(E=S[T]).mounted&&E.mounted()}this._listenToEvents(),this._startTicker(),this.on("browserUnload",(function(t){return t((function(){e.config.autoSignOutOnBrowserUnload&&(e.notifications.disconnect({source:"On browser unload"}),e.signOut({async:!1,resetClient:!1}))}),100,"signOut")})),this._checkBangTimer=null,this.conversationsLoaded=!1,this.currentlyServingOfflineMessages=!1}return t.prototype._listenToEvents=function(){var t=this;this.on("signedIn",(function(e,n){t.logger.info("signedIn",e.id)})),this.on("signedOut",(function(e){e.resetClient&&t.reset()})),this.on("signUp",(function(e){var n=e.user,r=e.auth;t.logger.info("signUp",n.id),t._setCurrentUser(n),t._setAuth(r)})),this.events.on("event",(function(e){t.emit("event",e),"bang"===e.type&&t._resetLastBang()})),this.events.on("batch:available",(function(e){return t.emit("events:batch:available",e)})),this.events.on("connected",(function(){return t.emit("events:connected")})),this.events.on("disconnected",this._onDisconnected),this.events.on("processing:start",(function(e){return t.emit("processing:start",e)})),this.events.on("processing:stop",(function(e){return t.emit("processing:stop",e)})),this.events.on("visibilityChange",(function(e,n){return t.emit("visibilityChange",e,n)})),this.calls.on("answered",(function(e){return t.emit("call:answered",e)})),this.calls.on("ended",(function(e){return t.emit("call:ended",e)})),this.calls.on("incoming",(function(e){return t.emit("call:incoming",e)})),this.calls.on("state",(function(e){return t.emit("call:state",e)})),this.conversations.on("clearTimeline",(function(e){return t.emit("conversation:clearTimeline",e)})),this.conversations.on("clearMessageStatuses",(function(e){return t.emit("conversation:clearMessageStatuses",e)})),this.conversations.on("message",(function(e){return t.emit("message",e)})),this.conversations.on("friends",(function(e){return t.emit("friends",e)})),this.eventSourceClient.on("auth:invalid",(function(){return t.emit("auth:invalid")})),this.groups.on("membership:change",(function(e){return t.emit("group:membership:change",e)})),this.httpClient.on("networkStatus:change",(function(e){return t.emit("networkStatus:change",e)})),this.notifications.on("connected",(function(){return t.emit("notifications:connected")})),this.notifications.on("disconnected",(function(e){return t.emit("notifications:disconnected")})),this.notifications.on("signingIn",(function(){return t.emit("notifications:signingIn")})),this.notifications.on("signedIn",(function(e){return t.emit("notifications:signedIn",e)})),this.notifications.on("signingOut",(function(e){return t.emit("notifications:signingOut",e)})),this.notifications.on("signedOut",(function(e){return t.emit("notifications:signedOut",e)})),this.notifications.on("event",(function(e){return t.emit("notifications:event",e)})),this.notifications.on("message",(function(e){return t.emit("notification:message",e)})),this.notifications.on("unread:change",(function(e){return t.emit("notification:unread:change",e)})),this.organizations.on("preferences:change",(function(e){return t.emit("organization:preferences:change",e)})),this.presence.on("change",(function(e){return t.emit("presence:change",e)})),this.roles.on("change",(function(e){return t.emit("role:change",e)})),this.typingStatus.on("change",(function(e){return t.emit("typing:change",e)})),this.users.on("preferences:change",(function(e){return t.emit("user:preferences:change",e)})),"undefined"!=typeof window&&window.addEventListener("unload",this._onBrowserUnload)},t.prototype._startTicker=function(){this.__ticker=setTimeout(this._onTick,5e3),this.__tickerFrame=null},t.prototype._stopTicker=function(){null!==this.__ticker&&(clearTimeout(this.__ticker),this.__ticker=null),null!==this.__tickerFrame&&(m.a.cancel(this.__tickerFrame),this.__tickerFrame=null)},t.prototype.signIn=function(t,e,n){return void 0===n&&(n={}),Wc(this,void 0,void 0,(function(){var r,i,o,a,s,u,c;return Yc(this,(function(l){switch(l.label){case 0:return r=n.udid,i=void 0===r?b()():r,o=n.refreshUser,a=void 0===o||o,this.emit("signingIn"),[4,this.users.signIn(t,e,{udid:i})];case 1:return s=l.sent(),u=s.auth,c=s.user,this._setCurrentUser(c),this._setAuth(u),a?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:l.sent(),l.label=3;case 3:return this.emit("signedIn",c,u),[2,{auth:u,user:c}]}}))}))},t.prototype.signInWithApiKeyAndSecret=function(t,e,n){return void 0===n&&(n={}),Wc(this,void 0,void 0,(function(){var r,i,o,a,s,u,c;return Yc(this,(function(l){switch(l.label){case 0:return r=n.udid,i=void 0===r?b()():r,o=n.refreshUser,a=void 0===o||o,this.emit("signingIn"),[4,this.users.signInWithApiKeyAndSecret(t,e,{udid:i})];case 1:return s=l.sent(),u=s.auth,c=s.user,this._setCurrentUser(c),this._setAuth(u),a?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:l.sent(),l.label=3;case 3:return this.emit("signedIn",c,u),[2,{auth:u,user:c}]}}))}))},t.prototype.signInWithMagicToken=function(t,e){return void 0===e&&(e={}),Wc(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Yc(this,(function(c){switch(c.label){case 0:return n=e.udid,r=void 0===n?b()():n,i=e.refreshUser,o=void 0===i||i,this.emit("signingIn"),[4,this.users.signInWithMagicToken(t,{udid:r})];case 1:return a=c.sent(),s=a.auth,u=a.user,this._setCurrentUser(u),this._setAuth(s),o?[4,this.users.findMe({bypassCache:!0})]:[3,3];case 2:c.sent(),c.label=3;case 3:return this.emit("signedIn",u,s),[2,{auth:s,user:u}]}}))}))},t.prototype.signOut=function(t){var e=void 0===t?{}:t,n=e.async,r=void 0===n||n,i=e.fromServer,o=void 0!==i&&i,a=e.resetClient,s=void 0===a||a;if(!this.isSignedIn)return Promise.resolve(!1);if(!r&&"undefined"==typeof XMLHttpRequest)throw new Error("`async: false` option cannot be set unless using signOut() in a browser");if(this.events.disconnect({source:"On sign out"}),r)return this.users.signOut({fromServer:o,resetClient:s});this.emit("signingOut",{fromServer:o,resetClient:s});var u=new XMLHttpRequest;u.open("POST",this.config.baseUrl+"/v2/logout",!1);for(var c=0,l=Object.entries(this.httpClient.getAuthHeaders());c<l.length;c++){var d=l[c],f=d[0],h=d[1];u.setRequestHeader(f,h)}return u.send(null),this.emit("signedOut",{fromServer:o,resetClient:s,signedOut:!0}),Promise.resolve(!0)},t.prototype.signOutAllDevices=function(t){var e=(void 0===t?{}:t).async,n=void 0===e||e;if(!this.isSignedIn)return Promise.resolve();if(!n&&"undefined"==typeof XMLHttpRequest)throw new Error("`async: false` option cannot be set unless using signOutAllDevices() in a browser");if(n)return this.users.signOutAllDevices();var r=new XMLHttpRequest;r.open("POST",this.config.baseUrl+"/v2/wipe?token="+this.currentUserId,!1);for(var i=0,o=Object.entries(this.httpClient.getAuthHeaders());i<o.length;i++){var a=o[i],s=a[0],u=a[1];r.setRequestHeader(s,u)}return r.send(null),Promise.resolve()},t.prototype.authenticate=function(t,e){return Wc(this,void 0,void 0,(function(){return Yc(this,(function(n){switch(n.label){case 0:return[4,this._authenticateWithParams({key:t,secret:e})];case 1:return[2,n.sent()]}}))}))},t.prototype.authenticateUsingOauth=function(t,e){return void 0===e&&(e={udid:void 0}),Wc(this,void 0,void 0,(function(){var n,r;return Yc(this,(function(i){switch(i.label){case 0:return n=e.udid,r=void 0===n?b()():n,[4,this._authenticateWithParams({bearerToken:t,udid:r})];case 1:return[2,i.sent()]}}))}))},t.prototype._authenticateWithParams=function(t){return Wc(this,void 0,void 0,(function(){var e,n;return Yc(this,(function(r){switch(r.label){case 0:this._setAuth(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.users.findMe()];case 2:return e=r.sent(),this._setCurrentUser(e),this.emit("signedIn",e,t),[2,e];case 3:throw n=r.sent(),this._removeAuth(),this._currentUser=null,n;case 4:return[2]}}))}))},t.prototype._setCurrentUser=function(t){this._currentUser=t},t.prototype._setAuth=function(t){this._auth=t,this.httpClient.setAuth(t),this.events.setAuth(t)},t.prototype._removeAuth=function(){this._auth=null,this.httpClient.removeAuth(),this.events.removeAuth()},t.prototype.getCurrentUser=function(){return this._currentUser||null},Object.defineProperty(t.prototype,"currentUser",{get:function(){return this.getCurrentUser()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentUserId",{get:function(){var t=this.getCurrentUser();return t?t.id:null},enumerable:!1,configurable:!0}),t.prototype.getAuth=function(){return this._auth},Object.defineProperty(t.prototype,"isSignedIn",{get:function(){return!!this.getAuth()},enumerable:!1,configurable:!0}),t.prototype.requireUser=function(){if(!this.isSignedIn)throw new Un.NotSignedInError},t.prototype.reactToAdvisoryEvent=function(t,e){switch(this.emit("advisory",{type:t,data:e}),t){case"replayStart":this.currentlyServingOfflineMessages=!0,this.emit("messages:offline:start",e),this.products._addProcessingEvent({actionType:vr.MESSAGE_REPLAY,entity:this.products.getAll()[0],itemsEstimate:e.replayMessageCount});break;case"replayStop":null===this._checkBangTimer&&(this.emit("groups:offline:start"),this._startBangTimer()),this.products._removeProcessingEvent({actionType:vr.MESSAGE_REPLAY,entity:this.products.getAll()[0]})}},Object.defineProperty(t.prototype,"MODEL_BY_TYPE_NS",{get:function(){return this._MODEL_BY_TYPE_NS||(this._MODEL_BY_TYPE_NS={"tigertext:entity:account":this.models.User,"tigertext:entity:group":this.models.Group,"tigertext:entity:distribution_list":this.models.DistributionList,"tigertext:entity:dist_list_member":this.models.User,"tigertext:entity:list":this.models.DistributionList,"tigertext:entity:message_template":this.models.MessageTemplate,"tigertext:entity:patient_distribution_list":this.models.DistributionList,"tigertext:entity:schedule_message":this.models.ScheduledMessage,"tigertext:entity:tag":this.models.RoleTag,"tigertext:entity:team":this.models.Team,"tigertext:iq:message":this.models.Message,"tigertext:iq:group_message":this.models.Message,"tigertext:iq:group:message":this.models.Message}),this._MODEL_BY_TYPE_NS},enumerable:!1,configurable:!0}),t.prototype.modelByTypeNS=function(t){return this.MODEL_BY_TYPE_NS[t]},t.prototype.modelNameByTypeNS=function(t){var e=this.MODEL_BY_TYPE_NS[t];return e?e.name:(p()(e,"modelNameByTypeNS: Missing class for "+t),null)},t.prototype.modelNameByEntityType=function(t){var e=this.modelsByEntityType[t]||this.MODEL_BY_TYPE_NS[t];if(e)return e.name;p()(e,"modelNameByEntityType: Missing class for "+t)},t.prototype.ejectModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.MODEL_BY_TYPE_NS[e]||this.modelsByEntityType[e];if(n)return n.eject(t);p()(n,"ejectModel: Missing class for "+e)},t.prototype.injectModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.MODEL_BY_TYPE_NS[e]||this.modelsByEntityType[e];return n?n.inject(t):(p()(n,"injectModel: Missing class for "+e),null)},t.prototype.injectPlaceholderModel=function(t,e){void 0===e&&(e=t.xmlns||t.type);var n=this.modelByTypeNS(e)||this.modelsByEntityType[e];return n?n.injectPlaceholder(t):(p()(n,"injectPlaceholderModel: Missing class for "+e),null)},t.prototype.getEntity=function(t,e){return this.modelsByEntityType[t].get(e)},t.prototype.getEntities=function(t){var e=this;return t.map((function(t){return e.getEntity(t.type,t.id)}))},t.prototype.dispose=function(){this._stopTicker(),this.conversationsLoaded=!1,null!==this._checkBangTimer&&(clearTimeout(this._checkBangTimer),this._checkBangTimer=null);for(var t=0,e=this._services;t<e.length;t++){var n=e[t];n.dispose&&n.dispose()}this.store&&this.store.clear()},t.prototype.reset=function(){this.dispose();for(var t=0,e=this._services;t<e.length;t++){var n=e[t];n.mounted&&n.mounted()}this._startTicker()},t.prototype.configure=function(t){return Object.assign(this.config,t),this.httpClient.mounted(),this},t.prototype.setDefaultOrganization=function(t){return this.configure({defaultOrganizationId:t})},Object.defineProperty(t.prototype,"networkStatus",{get:function(){return this.httpClient.networkStatus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forgotPasswordUrl",{get:function(){return Fn.FORGOT_PASSWORD_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adminUrl",{get:function(){return this.config.adminFeatureBranch?"/feature/"+this.config.adminFeatureBranch+"/app/admin":this.config.localAdminUrl?this.config.localAdminUrl:Fn.ADMIN_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cnUrl",{get:function(){return this.config.localCnUrl?this.config.localCnUrl:Fn.CN_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rolesUrl",{get:function(){return this.config.rolesFeatureBranch?"/feature/"+this.config.rolesFeatureBranch+"/app/roles/index.html":this.config.localRolesUrl?this.config.localRolesUrl:Fn.ROLES_URLS[this.config.apiEnv]},enumerable:!1,configurable:!0}),t.CONSUMER_ORGANIZATION_ID=Fn.CONSUMER_ORGANIZATION_ID,t.errors=Un,t.VERSION=Gc,t.version=Gc,t}();Object.assign(Kc.prototype,f.a.prototype)}]);
//# sourceMappingURL=tigerconnect-sdk-web.min.js.map